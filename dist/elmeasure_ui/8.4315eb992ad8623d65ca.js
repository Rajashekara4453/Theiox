(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{"+4/i":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("DtyJ"),l=n("odkN");i.Observable.prototype.let=l.letProto,i.Observable.prototype.letBind=l.letProto},"+oeQ":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("DtyJ"),l=n("H+DX");i.Observable.prototype.observeOn=l.observeOn},"+psR":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("DtyJ"),l=n("16Oq");i.Observable.prototype.retry=l.retry},"+qxJ":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("DtyJ"),l=n("GsYY");i.Observable.prototype.distinctUntilChanged=l.distinctUntilChanged},"+v8i":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("DtyJ");i.Observable.concat=i.concat},"00Es":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("DtyJ"),l=n("bb3/");i.Observable.prototype.timestamp=l.timestamp},"02G1":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("DtyJ");e.merge=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this.lift.call(i.merge.apply(void 0,[this].concat(t)))}},"0ZAG":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("DtyJ"),l=n("8mU2");i.Observable.prototype.takeLast=l.takeLast},"0c70":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("ahDk");e.toArray=function(){return i.toArray()(this)}},"11EI":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("DtyJ");i.Observable.fromEventPattern=i.fromEventPattern},"16Oq":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("ahDk");e.retry=function(t){return void 0===t&&(t=-1),i.retry(t)(this)}},"1JPw":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("DtyJ");i.Observable.bindCallback=i.bindCallback},"1M8x":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("DtyJ"),l=n("Xk39");i.Observable.prototype.catch=l._catch,i.Observable.prototype._catch=l._catch},"1gRP":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("ahDk");e.materialize=function(){return i.materialize()(this)}},"2+DN":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("DtyJ"),l=n("uMcE");i.Observable.prototype.shareReplay=l.shareReplay},"2IC2":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("DtyJ"),l=n("j5kd");i.Observable.prototype.windowTime=l.windowTime},"338f":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("ahDk");e.concatMap=function(t){return i.concatMap(t)(this)}},"37L2":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("DtyJ"),l=n("338f");i.Observable.prototype.concatMap=l.concatMap},"3EiV":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("DtyJ"),l=n("dL1u");i.Observable.prototype.buffer=l.buffer},"3Qpg":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("DtyJ");i.Observable.fromPromise=i.from},"4AtU":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("ahDk");e.expand=function(t,e,n){return void 0===e&&(e=Number.POSITIVE_INFINITY),void 0===n&&(n=void 0),e=(e||0)<1?Number.POSITIVE_INFINITY:e,i.expand(t,e,n)(this)}},"4Hgy":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("ahDk");e._do=function(t,e,n){return i.tap(t,e,n)(this)}},"4Wg5":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("DtyJ"),l=n("nZYK");i.Observable.prototype.switchMap=l.switchMap},"4w9M":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("DtyJ");i.Observable.race=i.race},"5LO2":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("ahDk");e.exhaust=function(){return i.exhaust()(this)}},"5hZ8":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("DtyJ"),l=n("b/PJ");i.Observable.prototype.skipUntil=l.skipUntil},"5i7x":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("ahDk");e.mapTo=function(t){return i.mapTo(t)(this)}},"6IDA":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("DtyJ"),l=n("YiA4");i.Observable.prototype.windowWhen=l.windowWhen},"6PMC":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("ahDk");e.skipWhile=function(t){return i.skipWhile(t)(this)}},"6mJ0":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("ahDk");e.findIndex=function(t,e){return i.findIndex(t,e)(this)}},"7+k4":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("DtyJ"),l=n("qIMP");i.Observable.prototype.pairwise=l.pairwise},7065:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("ahDk");e.max=function(t){return i.max(t)(this)}},"70oK":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("DtyJ"),l=n("73rQ");i.Observable.prototype.exhaustMap=l.exhaustMap},"73rQ":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("ahDk");e.exhaustMap=function(t){return i.exhaustMap(t)(this)}},"7MrP":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("DtyJ"),l=n("TqLU");i.Observable.prototype.find=l.find},"7N5M":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("DtyJ"),l=n("TpWx");i.Observable.prototype.windowCount=l.windowCount},"7RDD":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("DtyJ"),l=n("ZHaO");i.Observable.prototype.multicast=l.multicast},"7y2s":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("ahDk");e.distinctUntilKeyChanged=function(t,e){return i.distinctUntilKeyChanged(t,e)(this)}},"89kA":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("DtyJ"),l=n("ZR4w");i.Observable.prototype.map=l.map},"8Ip+":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("DtyJ");function l(){return i.NEVER}e.staticNever=l,i.Observable.never=l},"8LQU":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("ahDk");e.subscribeOn=function(t,e){return void 0===e&&(e=0),i.subscribeOn(t,e)(this)}},"8YE1":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("DtyJ"),l=n("5i7x");i.Observable.prototype.mapTo=l.mapTo},"8Yhr":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("DtyJ"),l=n("Vzig");i.Observable.prototype.throttleTime=l.throttleTime},"8mU2":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("ahDk");e.takeLast=function(t){return i.takeLast(t)(this)}},"9E4K":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("DtyJ"),l=n("gzwt");i.Observable.prototype.count=l.count},"9HtI":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("DtyJ"),l=n("atJV");i.Observable.prototype.last=l.last},"9Sef":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("DtyJ"),l=n("fY5S");i.Observable.prototype.zip=l.zipProto},"9qLK":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("DtyJ"),l=n("6PMC");i.Observable.prototype.skipWhile=l.skipWhile},"9xAK":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("DtyJ"),l=n("lRok"),o=n("ahDk");e.bufferTime=function(t){var e=arguments.length,n=i.asyncScheduler;l.isScheduler(arguments[arguments.length-1])&&(n=arguments[arguments.length-1],e--);var s=null;e>=2&&(s=arguments[1]);var r=Number.POSITIVE_INFINITY;return e>=3&&(r=arguments[2]),o.bufferTime(t,s,r,n)(this)}},"A+qg":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("DtyJ"),l=n("IMZ1");i.Observable.prototype.publishBehavior=l.publishBehavior},A5T5:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("ahDk");e.repeatWhen=function(t){return i.repeatWhen(t)(this)}},ADT6:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("ahDk");e.filter=function(t,e){return i.filter(t,e)(this)}},AXqq:function(module,exports){var jscolor={dir:"",bindClass:"color",binding:!0,preloading:!0,install:function(){},init:function(){jscolor.preloading&&jscolor.preload()},getDir:function(){var t;return jscolor.dir||(t=jscolor.detectDir(),jscolor.dir=!1!==t?t:window.RESOURCES_PATH),jscolor.dir},detectDir:function(){for(var t=location.href,e=document.getElementsByTagName("base"),n=0;n<e.length;n+=1)e[n].href&&(t=e[n].href);for(e=document.getElementsByTagName("script"),n=0;n<e.length;n+=1)if(e[n].src&&/(^|\/)jscolor\.js([?#].*)?$/i.test(e[n].src))return(t=new jscolor.URI(e[n].src).toAbsolute(t)).path=t.path.replace(/[^\/]+$/,""),t.query=null,t.fragment=null,t.toString();return!1},preload:function(){for(var t in jscolor.imgRequire)jscolor.imgRequire.hasOwnProperty(t)&&jscolor.loadImage(t)},images:{pad:[181,101],sld:[16,101],cross:[15,15],arrow:[7,11]},imgRequire:{},imgLoaded:{},requireImage:function(t){jscolor.imgRequire[t]=!0},loadImage:function(t){jscolor.imgLoaded[t]||(jscolor.imgLoaded[t]=new Image,jscolor.imgLoaded[t].src=jscolor.getDir()+t)},fetchElement:function(t){return"string"==typeof t?document.getElementById(t):t},addEvent:function(t,e,n){t.addEventListener?t.addEventListener(e,n,!1):t.attachEvent&&t.attachEvent("on"+e,n)},fireEvent:function(t,e){var n;t&&(document.createEvent?((n=document.createEvent("HTMLEvents")).initEvent(e,!0,!0),t.dispatchEvent(n)):document.createEventObject?(n=document.createEventObject(),t.fireEvent("on"+e,n)):t["on"+e]&&t["on"+e]())},getElementPos:function(t){var e=t,n=0,i=0;if(e.offsetParent)for(;n+=e.offsetLeft,i+=e.offsetTop,e=e.offsetParent;);for(;(t=t.parentNode)&&"BODY"!==t.nodeName.toUpperCase();)n-=t.scrollLeft,i-=t.scrollTop;return[n,i]},getElementSize:function(t){return[t.offsetWidth,t.offsetHeight]},getRelMousePos:function(t){var e=0,n=0;return"number"==typeof(t=t||window.event).offsetX?(e=t.offsetX,n=t.offsetY):"number"==typeof t.layerX&&(e=t.layerX,n=t.layerY),{x:e,y:n}},getViewPos:function(){return"number"==typeof window.pageYOffset?[window.pageXOffset,window.pageYOffset]:document.body&&(document.body.scrollLeft||document.body.scrollTop)?[document.body.scrollLeft,document.body.scrollTop]:document.documentElement&&(document.documentElement.scrollLeft||document.documentElement.scrollTop)?[document.documentElement.scrollLeft,document.documentElement.scrollTop]:[0,0]},getViewSize:function(){return"number"==typeof window.innerWidth?[window.innerWidth,window.innerHeight]:document.body&&(document.body.clientWidth||document.body.clientHeight)?[document.body.clientWidth,document.body.clientHeight]:document.documentElement&&(document.documentElement.clientWidth||document.documentElement.clientHeight)?[document.documentElement.clientWidth,document.documentElement.clientHeight]:[0,0]},URI:function(t){function e(t){for(var e,n="";t;)"../"===t.substr(0,3)||"./"===t.substr(0,2)?t=t.replace(/^\.+/,"").substr(1):"/./"===t.substr(0,3)||"/."===t?t="/"+t.substr(3):"/../"===t.substr(0,4)||"/.."===t?(t="/"+t.substr(4),n=n.replace(/\/?[^\/]*$/,"")):"."===t||".."===t?t="":(e=t.match(/^\/?[^\/]*/)[0],t=t.substr(e.length),n+=e);return n}this.authority=this.scheme=null,this.path="",this.fragment=this.query=null,this.parse=function(t){return t=t.match(/^(([A-Za-z][0-9A-Za-z+.-]*)(:))?((\/\/)([^\/?#]*))?([^?#]*)((\?)([^#]*))?((#)(.*))?/),this.scheme=t[3]?t[2]:null,this.authority=t[5]?t[6]:null,this.path=t[7],this.query=t[9]?t[10]:null,this.fragment=t[12]?t[13]:null,this},this.toString=function(){var t="";return null!==this.scheme&&(t=t+this.scheme+":"),null!==this.authority&&(t=t+"//"+this.authority),null!==this.path&&(t+=this.path),null!==this.query&&(t=t+"?"+this.query),null!==this.fragment?t+"#"+this.fragment:t},this.toAbsolute=function(t){t=new jscolor.URI(t);var n=new jscolor.URI;return null!==t.scheme&&(null!==this.scheme&&this.scheme.toLowerCase()===t.scheme.toLowerCase()&&(this.scheme=null),null!==this.scheme?(n.scheme=this.scheme,n.authority=this.authority,n.path=e(this.path),n.query=this.query):(null!==this.authority?(n.authority=this.authority,n.path=e(this.path),n.query=this.query):(""===this.path?(n.path=t.path,n.query=(null!==this.query?this:t).query):("/"===this.path.substr(0,1)?n.path=e(this.path):(n.path=null!==t.authority&&""===t.path?"/"+this.path:t.path.replace(/[^\/]+$/,"")+this.path,n.path=e(n.path)),n.query=this.query),n.authority=t.authority),n.scheme=t.scheme),n.fragment=this.fragment,n)},t&&this.parse(t)},color:function(b,e){function a(t,e,n){if(null===t)return[n,n,n];var i=Math.floor(t),l=n*(1-e);switch(t=n*(1-e*(i%2?t-i:1-(t-i))),i){case 6:case 0:return[n,t,l];case 1:return[t,n,l];case 2:return[l,n,t];case 3:return[l,t,n];case 4:return[t,l,n];case 5:return[n,l,t]}}function m(t,e){if(!jscolor.picker){jscolor.picker={box:document.createElement("div"),boxB:document.createElement("div"),pad:document.createElement("div"),padB:document.createElement("div"),padM:document.createElement("div"),sld:document.createElement("div"),sldB:document.createElement("div"),sldM:document.createElement("div"),btn:document.createElement("div"),btnS:document.createElement("span"),btnT:document.createTextNode(d.pickerCloseText)};for(var i=0;i<jscolor.images.sld[1];i+=4){var o=document.createElement("div");o.style.height="4px",o.style.fontSize="1px",o.style.lineHeight="0",jscolor.picker.sld.appendChild(o)}jscolor.picker.sldB.appendChild(jscolor.picker.sld),jscolor.picker.box.appendChild(jscolor.picker.sldB),jscolor.picker.box.appendChild(jscolor.picker.sldM),jscolor.picker.padB.appendChild(jscolor.picker.pad),jscolor.picker.box.appendChild(jscolor.picker.padB),jscolor.picker.box.appendChild(jscolor.picker.padM),jscolor.picker.btnS.appendChild(jscolor.picker.btnT),jscolor.picker.btn.appendChild(jscolor.picker.btnS),jscolor.picker.box.appendChild(jscolor.picker.btn),jscolor.picker.boxB.appendChild(jscolor.picker.box)}var s=jscolor.picker;s.box.onmouseup=s.box.onmouseout=function(){mxClient.IS_TOUCH||b.focus()},s.box.onmousedown=function(){},s.box.onmousemove=function(t){(n||p)&&(n&&z(t),p&&A(t),document.selection?document.selection.empty():window.getSelection&&window.getSelection().removeAllRanges(),r())},s.padM.onmouseup=s.padM.onmouseout=function(){n&&(n=!1,jscolor.fireEvent(h,"change"))},s.padM.onmousedown=function(t){switch(l){case 0:0===d.hsv[2]&&d.fromHSV(null,null,1);break;case 1:0===d.hsv[1]&&d.fromHSV(null,1,null)}n=!0,z(t),r()},s.sldM.onmouseup=s.sldM.onmouseout=function(){p&&(p=!1,jscolor.fireEvent(h,"change"))},s.sldM.onmousedown=function(t){p=!0,A(t),r()},i=y(d),s.box.style.width=i[0]+"px",s.box.style.height=i[1]+"px",s.boxB.style.position="absolute",s.boxB.style.clear="both",s.boxB.style.left=t+"px",s.boxB.style.top=e+"px",s.boxB.style.zIndex=d.pickerZIndex,s.boxB.style.border=d.pickerBorder+"px solid",s.boxB.style.borderColor=d.pickerBorderColor,s.boxB.style.background=d.pickerFaceColor,s.pad.style.width=jscolor.images.pad[0]+"px",s.pad.style.height=jscolor.images.pad[1]+"px",s.padB.style.position="absolute",s.padB.style.left=d.pickerFace+"px",s.padB.style.top=d.pickerFace+"px",s.padB.style.border=d.pickerInset+"px solid",s.padB.style.borderColor=d.pickerInsetColor,s.padM.style.position="absolute",s.padM.style.left="0",s.padM.style.top="0",s.padM.style.width=d.pickerFace+2*d.pickerInset+jscolor.images.pad[0]+jscolor.images.arrow[0]+"px",s.padM.style.height=s.box.style.height,s.padM.style.cursor="crosshair",s.sld.style.overflow="hidden",s.sld.style.width=jscolor.images.sld[0]+"px",s.sld.style.height=jscolor.images.sld[1]+"px",s.sldB.style.display=d.slider?"block":"none",s.sldB.style.position="absolute",s.sldB.style.right=d.pickerFace+"px",s.sldB.style.top=d.pickerFace+"px",s.sldB.style.border=d.pickerInset+"px solid",s.sldB.style.borderColor=d.pickerInsetColor,s.sldM.style.display=d.slider?"block":"none",s.sldM.style.position="absolute",s.sldM.style.right="0",s.sldM.style.top="0",s.sldM.style.width=jscolor.images.sld[0]+jscolor.images.arrow[0]+d.pickerFace+2*d.pickerInset+"px",s.sldM.style.height=s.box.style.height;try{s.sldM.style.cursor="pointer"}catch(t){s.sldM.style.cursor="hand"}s.btn.style.display=d.pickerClosable?"block":"none",s.btn.style.position="absolute",s.btn.style.left=d.pickerFace+"px",s.btn.style.bottom=d.pickerFace+"px",s.btn.style.padding="0 15px",s.btn.style.height="18px",s.btn.style.border=d.pickerInset+"px solid",e=d.pickerInsetColor.split(/\s+/),s.btn.style.borderColor=e.length<2?e[0]:e[1]+" "+e[0]+" "+e[0]+" "+e[1],s.btn.style.color=d.pickerButtonColor,s.btn.style.font="12px sans-serif",s.btn.style.textAlign="center";try{s.btn.style.cursor="pointer"}catch(t){s.btn.style.cursor="hand"}switch(s.btn.onmousedown=function(){d.hidePicker()},s.btnS.style.lineHeight=s.btn.style.height,l){case 0:var a="hs.png";break;case 1:a="hv.png"}s.padM.style.backgroundImage="url('"+jscolor.getDir()+"cross.gif')",s.padM.style.backgroundRepeat="no-repeat",s.sldM.style.backgroundImage="url('"+jscolor.getDir()+"arrow.gif')",s.sldM.style.backgroundRepeat="no-repeat",s.pad.style.backgroundImage="url('"+jscolor.getDir()+a+"')",s.pad.style.backgroundRepeat="no-repeat",s.pad.style.backgroundPosition="0 0",B(),C(),jscolor.picker.owner=d,document.getElementsByTagName("body")[0].appendChild(s.boxB)}function y(t){return[2*t.pickerInset+2*t.pickerFace+jscolor.images.pad[0]+(t.slider?2*t.pickerInset+2*jscolor.images.arrow[0]+jscolor.images.sld[0]:0),t.pickerClosable?4*t.pickerInset+3*t.pickerFace+jscolor.images.pad[1]+t.pickerButtonHeight:2*t.pickerInset+2*t.pickerFace+jscolor.images.pad[1]]}function B(){switch(l){case 0:var t=1;break;case 1:t=2}switch(jscolor.picker.padM.style.backgroundPosition=d.pickerFace+d.pickerInset+Math.round(d.hsv[0]/6*(jscolor.images.pad[0]-1))-Math.floor(jscolor.images.cross[0]/2)+"px "+(d.pickerFace+d.pickerInset+Math.round((1-d.hsv[t])*(jscolor.images.pad[1]-1))-Math.floor(jscolor.images.cross[1]/2))+"px",t=jscolor.picker.sld.childNodes,l){case 0:for(var e=a(d.hsv[0],d.hsv[1],1),n=0;n<t.length;n+=1)t[n].style.backgroundColor="rgb("+e[0]*(1-n/t.length)*100+"%,"+e[1]*(1-n/t.length)*100+"%,"+e[2]*(1-n/t.length)*100+"%)";break;case 1:var i=[d.hsv[2],0,0],o=(n=Math.floor(d.hsv[0]))%2?d.hsv[0]-n:1-(d.hsv[0]-n);switch(n){case 6:case 0:e=[0,1,2];break;case 1:e=[1,0,2];break;case 2:e=[2,0,1];break;case 3:e=[2,1,0];break;case 4:e=[1,2,0];break;case 5:e=[0,2,1]}for(n=0;n<t.length;n+=1){var s=1-1/(t.length-1)*n;i[1]=i[0]*(1-s*o),i[2]=i[0]*(1-s),t[n].style.backgroundColor="rgb("+100*i[e[0]]+"%,"+100*i[e[1]]+"%,"+100*i[e[2]]+"%)"}}}function C(){switch(l){case 0:var t=2;break;case 1:t=1}jscolor.picker.sldM.style.backgroundPosition="0 "+(d.pickerFace+d.pickerInset+Math.round((1-d.hsv[t])*(jscolor.images.sld[1]-1))-Math.floor(jscolor.images.arrow[1]/2))+"px"}function t(){return jscolor.picker&&jscolor.picker.owner===d}function E(){h!==b&&d.importColor()}function z(t){var e=jscolor.getRelMousePos(t);switch(t=e.x-d.pickerFace-d.pickerInset,e=e.y-d.pickerFace-d.pickerInset,l){case 0:d.fromHSV(6/(jscolor.images.pad[0]-1)*t,1-e/(jscolor.images.pad[1]-1),null,u);break;case 1:d.fromHSV(6/(jscolor.images.pad[0]-1)*t,null,1-e/(jscolor.images.pad[1]-1),u)}}function A(t){switch(t=jscolor.getRelMousePos(t).y-d.pickerFace-d.pickerInset,l){case 0:d.fromHSV(null,null,1-t/(jscolor.images.sld[1]-1),v);break;case 1:d.fromHSV(null,1-t/(jscolor.images.sld[1]-1),null,v)}}function r(){d.onImmediateChange&&("string"==typeof d.onImmediateChange?eval(d.onImmediateChange):d.onImmediateChange(d))}for(var w in this.adjust=this.required=!0,this.hash=!1,this.slider=this.caps=!0,this.styleElement=this.valueElement=b,this.onImmediateChange=null,this.hsv=[0,0,1],this.rgb=[1,1,1],this.pickerOnfocus=!0,this.pickerMode="HSV",this.pickerPosition="bottom",this.pickerSmartPosition=!0,this.pickerButtonHeight=20,this.pickerClosable=!1,this.pickerCloseText="Close",this.pickerButtonColor="ButtonText",this.pickerFace=0,this.pickerFaceColor="ThreeDFace",this.pickerBorder=1,this.pickerBorderColor="ThreeDHighlight ThreeDShadow ThreeDShadow ThreeDHighlight",this.pickerInset=1,this.pickerInsetColor="ThreeDShadow ThreeDHighlight ThreeDHighlight ThreeDShadow",this.pickerZIndex=1e4,e)e.hasOwnProperty(w)&&(this[w]=e[w]);this.hidePicker=function(){t()&&(delete jscolor.picker.owner,document.getElementsByTagName("body")[0].removeChild(jscolor.picker.boxB))},this.showPicker=function(){t()||(jscolor.getElementPos(b),jscolor.getElementSize(b),jscolor.getViewPos(),jscolor.getViewSize(),y(this),this.pickerPosition.toLowerCase(),m(0,0))},this.importColor=function(){h?this.adjust?!this.required&&/^\s*$/.test(h.value)?(h.value="",f.style.backgroundImage=f.jscStyle.backgroundImage,f.style.backgroundColor=f.jscStyle.backgroundColor,f.style.color=f.jscStyle.color,this.exportColor(q|x)):this.fromString(h.value)||this.exportColor():this.fromString(h.value,q)||(f.style.backgroundImage=f.jscStyle.backgroundImage,f.style.backgroundColor=f.jscStyle.backgroundColor,f.style.color=f.jscStyle.color,this.exportColor(q|x)):this.exportColor()},this.exportColor=function(e){var n;e&q||!h||(n=this.toString(),this.caps&&(n=n.toUpperCase()),this.hash&&(n="#"+n),h.value=n),e&x||!f||(f.style.backgroundImage="none",f.style.backgroundColor="#"+this.toString(),f.style.color=.213*this.rgb[0]+.715*this.rgb[1]+.072*this.rgb[2]<.5?"#FFF":"#000"),e&v||!t()||B(),e&u||!t()||C()},this.fromHSV=function(t,e,n,i){1<(e=e<0?0:e)&&(e=1),1<(n=n<0?0:n)&&(n=1),this.rgb=a(null===(t=6<(t=t<0?0:t)?6:t)?this.hsv[0]:this.hsv[0]=t,null===e?this.hsv[1]:this.hsv[1]=e,null===n?this.hsv[2]:this.hsv[2]=n),this.exportColor(i)},this.fromRGB=function(t,e,n,i){1<(e=e<0?0:e)&&(e=1),1<(n=n<0?0:n)&&(n=1),t=null===(t=1<(t=t<0?0:t)?1:t)?this.rgb[0]:this.rgb[0]=t,e=null===e?this.rgb[1]:this.rgb[1]=e;var l=null===n?this.rgb[2]:this.rgb[2]=n,o=Math.min(Math.min(t,e),l),s=(n=Math.max(Math.max(t,e),l))-o;null!==(t=0==s?[null,0,n]:[6==(t=t===o?3+(l-e)/s:e===o?5+(t-l)/s:1+(e-t)/s)?0:t,s/n,n])[0]&&(this.hsv[0]=t[0]),0!==t[2]&&(this.hsv[1]=t[1]),this.hsv[2]=t[2],this.exportColor(i)},this.fromString=function(t,e){return!!(t=t.match(/^\W*([0-9A-F]{3}([0-9A-F]{3})?)\W*$/i))&&(6===t[1].length?this.fromRGB(parseInt(t[1].substr(0,2),16)/255,parseInt(t[1].substr(2,2),16)/255,parseInt(t[1].substr(4,2),16)/255,e):this.fromRGB(parseInt(t[1].charAt(0)+t[1].charAt(0),16)/255,parseInt(t[1].charAt(1)+t[1].charAt(1),16)/255,parseInt(t[1].charAt(2)+t[1].charAt(2),16)/255,e),!0)},this.toString=function(){return(256|Math.round(255*this.rgb[0])).toString(16).substr(1)+(256|Math.round(255*this.rgb[1])).toString(16).substr(1)+(256|Math.round(255*this.rgb[2])).toString(16).substr(1)};var d=this,l="hvs"===this.pickerMode.toLowerCase()?1:0,h=jscolor.fetchElement(this.valueElement),f=jscolor.fetchElement(this.styleElement),n=!1,p=!1,q=1,x=2,v=4,u=8;switch(h&&(e=function(){d.fromString(h.value,q),r()},jscolor.addEvent(h,"keyup",e),jscolor.addEvent(h,"input",e),jscolor.addEvent(h,"blur",E),h.setAttribute("autocomplete","off")),f&&(f.jscStyle={backgroundImage:f.style.backgroundImage,backgroundColor:f.style.backgroundColor,color:f.style.color}),l){case 0:jscolor.requireImage("./images/hs.png");break;case 1:jscolor.requireImage("./images/hv.png")}jscolor.requireImage("./images/cross.gif"),jscolor.requireImage("./images/arrow.gif"),this.importColor()}};jscolor.install(),function(){var t,e,n,i,l,o,s,r,a=void 0,h=!0,u=null,d=!1,c={animation:{cssPropBits:517,cssLitGroup:[(A=["aliceblue,antiquewhite,aqua,aquamarine,azure,beige,bisque,black,blanchedalmond,blue,blueviolet,brown,burlywood,cadetblue,chartreuse,chocolate,coral,cornflowerblue,cornsilk,crimson,cyan,darkblue,darkcyan,darkgoldenrod,darkgray,darkgreen,darkkhaki,darkmagenta,darkolivegreen,darkorange,darkorchid,darkred,darksalmon,darkseagreen,darkslateblue,darkslategray,darkturquoise,darkviolet,deeppink,deepskyblue,dimgray,dodgerblue,firebrick,floralwhite,forestgreen,fuchsia,gainsboro,ghostwhite,gold,goldenrod,gray,green,greenyellow,honeydew,hotpink,indianred,indigo,ivory,khaki,lavender,lavenderblush,lawngreen,lemonchiffon,lightblue,lightcoral,lightcyan,lightgoldenrodyellow,lightgreen,lightgrey,lightpink,lightsalmon,lightseagreen,lightskyblue,lightslategray,lightsteelblue,lightyellow,lime,limegreen,linen,magenta,maroon,mediumaquamarine,mediumblue,mediumorchid,mediumpurple,mediumseagreen,mediumslateblue,mediumspringgreen,mediumturquoise,mediumvioletred,midnightblue,mintcream,mistyrose,moccasin,navajowhite,navy,oldlace,olive,olivedrab,orange,orangered,orchid,palegoldenrod,palegreen,paleturquoise,palevioletred,papayawhip,peachpuff,peru,pink,plum,powderblue,purple,red,rosybrown,royalblue,saddlebrown,salmon,sandybrown,seagreen,seashell,sienna,silver,skyblue,slateblue,slategray,snow,springgreen,steelblue,tan,teal,thistle,tomato,transparent,turquoise,violet,wheat,white,whitesmoke,yellow,yellowgreen".split(","),"all-scroll,col-resize,crosshair,default,e-resize,hand,help,move,n-resize,ne-resize,no-drop,not-allowed,nw-resize,pointer,progress,row-resize,s-resize,se-resize,sw-resize,text,vertical-text,w-resize,wait".split(","),"armenian,decimal,decimal-leading-zero,disc,georgian,lower-alpha,lower-greek,lower-latin,lower-roman,square,upper-alpha,upper-latin,upper-roman".split(","),"100,200,300,400,500,600,700,800,900,bold,bolder,lighter".split(","),"block-level,inline-level,table-caption,table-cell,table-column,table-column-group,table-footer-group,table-header-group,table-row,table-row-group".split(","),"condensed,expanded,extra-condensed,extra-expanded,narrower,semi-condensed,semi-expanded,ultra-condensed,ultra-expanded,wider".split(","),"inherit,inline,inline-block,inline-box,inline-flex,inline-grid,inline-list-item,inline-stack,inline-table,run-in".split(","),"behind,center-left,center-right,far-left,far-right,left-side,leftwards,right-side,rightwards".split(","),"large,larger,small,smaller,x-large,x-small,xx-large,xx-small".split(","),"dashed,dotted,double,groove,outset,ridge,solid".split(","),"ease,ease-in,ease-in-out,ease-out,linear,step-end,step-start".split(","),"at,closest-corner,closest-side,ellipse,farthest-corner,farthest-side".split(","),"baseline,middle,sub,super,text-bottom,text-top".split(","),"caption,icon,menu,message-box,small-caption,status-bar".split(","),"fast,faster,slow,slower,x-fast,x-slow".split(","),["above","below","higher","level","lower"],["cursive","fantasy","monospace","sans-serif","serif"],["loud","silent","soft","x-loud","x-soft"],["no-repeat","repeat-x","repeat-y","round","space"],["blink","line-through","overline","underline"],["block","flex","grid","table"],["high","low","x-high","x-low"],["nowrap","pre","pre-line","pre-wrap"],["absolute","relative","static"],["alternate","alternate-reverse","reverse"],["border-box","content-box","padding-box"],["capitalize","lowercase","uppercase"],["child","female","male"],["=","opacity"],["backwards","forwards"],["bidi-override","embed"],["bottom","top"],["break-all","keep-all"],["clip","ellipsis"],["contain","cover"],["continuous","digits"],["end","start"],["flat","preserve-3d"],["hide","show"],["horizontal","vertical"],["inside","outside"],["italic","oblique"],["left","right"],["ltr","rtl"],["no-content","no-display"],["paused","running"],["suppress","unrestricted"],["thick","thin"],[","],["/"],["all"],["always"],["auto"],["avoid"],["both"],["break-word"],["center"],["circle"],["code"],["collapse"],["contents"],["fixed"],["hidden"],["infinite"],["inset"],["invert"],["justify"],["list-item"],["local"],["medium"],["mix"],["none"],["normal"],["once"],["repeat"],["scroll"],["separate"],["small-caps"],["spell-out"],["to"],["visible"]])[10],A[24],A[29],A[45],A[48],A[54],A[63],A[71],A[72]],cssFns:["cubic-bezier()","steps()"]},"animation-delay":{cssPropBits:5,cssLitGroup:[A[48]],cssFns:[]},"animation-direction":{cssPropBits:0,cssLitGroup:[A[24],A[48],A[72]],cssFns:[]},"animation-duration":"animation-delay","animation-fill-mode":{cssPropBits:0,cssLitGroup:[A[29],A[48],A[54],A[71]],cssFns:[]},"animation-iteration-count":{cssPropBits:5,cssLitGroup:[A[48],A[63]],cssFns:[]},"animation-name":{cssPropBits:512,cssLitGroup:[A[48],A[71]],cssFns:[]},"animation-play-state":{cssPropBits:0,cssLitGroup:[A[45],A[48]],cssFns:[]},"animation-timing-function":{cssPropBits:0,cssLitGroup:[A[10],A[48]],cssFns:["cubic-bezier()","steps()"]},appearance:{cssPropBits:0,cssLitGroup:[A[71]],cssFns:[]},azimuth:{cssPropBits:5,cssLitGroup:[A[7],A[42],A[56]],cssFns:[]},"backface-visibility":{cssPropBits:0,cssLitGroup:[A[59],A[62],A[80]],cssFns:[]},background:{cssPropBits:23,cssLitGroup:[A[0],A[18],A[25],A[31],A[34],A[42],A[48],A[49],A[52],A[56],A[61],A[68],A[71],A[74],A[75]],cssFns:"image(),linear-gradient(),radial-gradient(),repeating-linear-gradient(),repeating-radial-gradient(),rgb(),rgba()".split(",")},"background-attachment":{cssPropBits:0,cssLitGroup:[A[48],A[61],A[68],A[75]],cssFns:[]},"background-color":{cssPropBits:2,cssLitGroup:[A[0]],cssFns:["rgb()","rgba()"]},"background-image":{cssPropBits:16,cssLitGroup:[A[48],A[71]],cssFns:["image()","linear-gradient()","radial-gradient()","repeating-linear-gradient()","repeating-radial-gradient()"]},"background-position":{cssPropBits:5,cssLitGroup:[A[31],A[42],A[48],A[56]],cssFns:[]},"background-repeat":{cssPropBits:0,cssLitGroup:[A[18],A[48],A[74]],cssFns:[]},"background-size":{cssPropBits:5,cssLitGroup:[A[34],A[48],A[52]],cssFns:[]},border:{cssPropBits:7,cssLitGroup:[A[0],A[9],A[47],A[62],A[64],A[69],A[71]],cssFns:["rgb()","rgba()"]},"border-bottom":"border","border-bottom-color":"background-color","border-bottom-left-radius":{cssPropBits:5,cssFns:[]},"border-bottom-right-radius":"border-bottom-left-radius","border-bottom-style":{cssPropBits:0,cssLitGroup:[A[9],A[62],A[64],A[71]],cssFns:[]},"border-bottom-width":{cssPropBits:5,cssLitGroup:[A[47],A[69]],cssFns:[]},"border-collapse":{cssPropBits:0,cssLitGroup:[A[59],A[76]],cssFns:[]},"border-color":"background-color","border-left":"border","border-left-color":"background-color","border-left-style":"border-bottom-style","border-left-width":"border-bottom-width","border-radius":{cssPropBits:5,cssLitGroup:[A[49]],cssFns:[]},"border-right":"border","border-right-color":"background-color","border-right-style":"border-bottom-style","border-right-width":"border-bottom-width","border-spacing":"border-bottom-left-radius","border-style":"border-bottom-style","border-top":"border","border-top-color":"background-color","border-top-left-radius":"border-bottom-left-radius","border-top-right-radius":"border-bottom-left-radius","border-top-style":"border-bottom-style","border-top-width":"border-bottom-width","border-width":"border-bottom-width",bottom:{cssPropBits:5,cssLitGroup:[A[52]],cssFns:[]},box:{cssPropBits:0,cssLitGroup:[A[60],A[71],A[72]],cssFns:[]},"box-shadow":{cssPropBits:7,cssLitGroup:[A[0],A[48],A[64],A[71]],cssFns:["rgb()","rgba()"]},"box-sizing":{cssPropBits:0,cssLitGroup:[A[25]],cssFns:[]},"caption-side":{cssPropBits:0,cssLitGroup:[A[31]],cssFns:[]},clear:{cssPropBits:0,cssLitGroup:[A[42],A[54],A[71]],cssFns:[]},clip:{cssPropBits:0,cssLitGroup:[A[52]],cssFns:["rect()"]},color:"background-color",content:{cssPropBits:8,cssLitGroup:[A[71],A[72]],cssFns:[]},cue:{cssPropBits:16,cssLitGroup:[A[71]],cssFns:[]},"cue-after":"cue","cue-before":"cue",cursor:{cssPropBits:16,cssLitGroup:[A[1],A[48],A[52]],cssFns:[]},direction:{cssPropBits:0,cssLitGroup:[A[43]],cssFns:[]},display:{cssPropBits:0,cssLitGroup:[A[4],A[6],A[20],A[52],A[67],A[71]],cssFns:[]},"display-extras":{cssPropBits:0,cssLitGroup:[A[67],A[71]],cssFns:[]},"display-inside":{cssPropBits:0,cssLitGroup:[A[20],A[52]],cssFns:[]},"display-outside":{cssPropBits:0,cssLitGroup:[A[4],A[71]],cssFns:[]},elevation:{cssPropBits:5,cssLitGroup:[A[15]],cssFns:[]},"empty-cells":{cssPropBits:0,cssLitGroup:[A[38]],cssFns:[]},filter:{cssPropBits:0,cssFns:["alpha()"]},float:{cssPropBits:0,cssLitGroup:[A[42],A[71]],cssFns:[]},font:{cssPropBits:73,cssLitGroup:[A[3],A[8],A[13],A[16],A[41],A[48],A[49],A[69],A[72],A[77]],cssFns:[]},"font-family":{cssPropBits:72,cssLitGroup:[A[16],A[48]],cssFns:[]},"font-size":{cssPropBits:1,cssLitGroup:[A[8],A[69]],cssFns:[]},"font-stretch":{cssPropBits:0,cssLitGroup:[A[5],A[72]],cssFns:[]},"font-style":{cssPropBits:0,cssLitGroup:[A[41],A[72]],cssFns:[]},"font-variant":{cssPropBits:0,cssLitGroup:[A[72],A[77]],cssFns:[]},"font-weight":{cssPropBits:0,cssLitGroup:[A[3],A[72]],cssFns:[]},height:"bottom",left:"bottom","letter-spacing":{cssPropBits:5,cssLitGroup:[A[72]],cssFns:[]},"line-height":{cssPropBits:1,cssLitGroup:[A[72]],cssFns:[]},"list-style":{cssPropBits:16,cssLitGroup:[A[2],A[40],A[57],A[71]],cssFns:["image()","linear-gradient()","radial-gradient()","repeating-linear-gradient()","repeating-radial-gradient()"]},"list-style-image":{cssPropBits:16,cssLitGroup:[A[71]],cssFns:["image()","linear-gradient()","radial-gradient()","repeating-linear-gradient()","repeating-radial-gradient()"]},"list-style-position":{cssPropBits:0,cssLitGroup:[A[40]],cssFns:[]},"list-style-type":{cssPropBits:0,cssLitGroup:[A[2],A[57],A[71]],cssFns:[]},margin:"bottom","margin-bottom":"bottom","margin-left":"bottom","margin-right":"bottom","margin-top":"bottom","max-height":{cssPropBits:1,cssLitGroup:[A[52],A[71]],cssFns:[]},"max-width":"max-height","min-height":{cssPropBits:1,cssLitGroup:[A[52]],cssFns:[]},"min-width":"min-height",opacity:{cssPropBits:1,cssFns:[]},outline:{cssPropBits:7,cssLitGroup:[A[0],A[9],A[47],A[62],A[64],A[65],A[69],A[71]],cssFns:["rgb()","rgba()"]},"outline-color":{cssPropBits:2,cssLitGroup:[A[0],A[65]],cssFns:["rgb()","rgba()"]},"outline-style":"border-bottom-style","outline-width":"border-bottom-width",overflow:{cssPropBits:0,cssLitGroup:[A[52],A[62],A[75],A[80]],cssFns:[]},"overflow-wrap":{cssPropBits:0,cssLitGroup:[A[55],A[72]],cssFns:[]},"overflow-x":{cssPropBits:0,cssLitGroup:[A[44],A[52],A[62],A[75],A[80]],cssFns:[]},"overflow-y":"overflow-x",padding:"opacity","padding-bottom":"opacity","padding-left":"opacity","padding-right":"opacity","padding-top":"opacity","page-break-after":{cssPropBits:0,cssLitGroup:[A[42],A[51],A[52],A[53]],cssFns:[]},"page-break-before":"page-break-after","page-break-inside":{cssPropBits:0,cssLitGroup:[A[52],A[53]],cssFns:[]},pause:"border-bottom-left-radius","pause-after":"border-bottom-left-radius","pause-before":"border-bottom-left-radius",perspective:{cssPropBits:5,cssLitGroup:[A[71]],cssFns:[]},"perspective-origin":{cssPropBits:5,cssLitGroup:[A[31],A[42],A[56]],cssFns:[]},pitch:{cssPropBits:5,cssLitGroup:[A[21],A[69]],cssFns:[]},"pitch-range":"border-bottom-left-radius","play-during":{cssPropBits:16,cssLitGroup:[A[52],A[70],A[71],A[74]],cssFns:[]},position:{cssPropBits:0,cssLitGroup:[A[23]],cssFns:[]},quotes:{cssPropBits:8,cssLitGroup:[A[71]],cssFns:[]},resize:{cssPropBits:0,cssLitGroup:[A[39],A[54],A[71]],cssFns:[]},richness:"border-bottom-left-radius",right:"bottom",speak:{cssPropBits:0,cssLitGroup:[A[71],A[72],A[78]],cssFns:[]},"speak-header":{cssPropBits:0,cssLitGroup:[A[51],A[73]],cssFns:[]},"speak-numeral":{cssPropBits:0,cssLitGroup:[A[35]],cssFns:[]},"speak-punctuation":{cssPropBits:0,cssLitGroup:[A[58],A[71]],cssFns:[]},"speech-rate":{cssPropBits:5,cssLitGroup:[A[14],A[69]],cssFns:[]},stress:"border-bottom-left-radius","table-layout":{cssPropBits:0,cssLitGroup:[A[52],A[61]],cssFns:[]},"text-align":{cssPropBits:0,cssLitGroup:[A[42],A[56],A[66]],cssFns:[]},"text-decoration":{cssPropBits:0,cssLitGroup:[A[19],A[71]],cssFns:[]},"text-indent":"border-bottom-left-radius","text-overflow":{cssPropBits:8,cssLitGroup:[A[33]],cssFns:[]},"text-shadow":"box-shadow","text-transform":{cssPropBits:0,cssLitGroup:[A[26],A[71]],cssFns:[]},"text-wrap":{cssPropBits:0,cssLitGroup:[A[46],A[71],A[72]],cssFns:[]},top:"bottom",transform:{cssPropBits:0,cssLitGroup:[A[71]],cssFns:"matrix(),perspective(),rotate(),rotate3d(),rotatex(),rotatey(),rotatez(),scale(),scale3d(),scalex(),scaley(),scalez(),skew(),skewx(),skewy(),translate(),translate3d(),translatex(),translatey(),translatez()".split(",")},"transform-origin":"perspective-origin","transform-style":{cssPropBits:0,cssLitGroup:[A[37]],cssFns:[]},transition:{cssPropBits:1029,cssLitGroup:[A[10],A[48],A[50],A[71]],cssFns:["cubic-bezier()","steps()"]},"transition-delay":"animation-delay","transition-duration":"animation-delay","transition-property":{cssPropBits:1024,cssLitGroup:[A[48],A[50]],cssFns:[]},"transition-timing-function":"animation-timing-function","unicode-bidi":{cssPropBits:0,cssLitGroup:[A[30],A[72]],cssFns:[]},"vertical-align":{cssPropBits:5,cssLitGroup:[A[12],A[31]],cssFns:[]},visibility:"backface-visibility","voice-family":{cssPropBits:8,cssLitGroup:[A[27],A[48]],cssFns:[]},volume:{cssPropBits:1,cssLitGroup:[A[17],A[69]],cssFns:[]},"white-space":{cssPropBits:0,cssLitGroup:[A[22],A[72]],cssFns:[]},width:"min-height","word-break":{cssPropBits:0,cssLitGroup:[A[32],A[72],A[55]],cssFns:[]},"word-spacing":"letter-spacing","word-wrap":"overflow-wrap","z-index":"bottom",zoom:"line-height","cubic-bezier()":"animation-delay","steps()":{cssPropBits:5,cssLitGroup:[A[36],A[48]],cssFns:[]},"image()":{cssPropBits:18,cssLitGroup:[A[0],A[48]],cssFns:["rgb()","rgba()"]},"linear-gradient()":{cssPropBits:7,cssLitGroup:[A[0],A[31],A[42],A[48],A[79]],cssFns:["rgb()","rgba()"]},"radial-gradient()":{cssPropBits:7,cssLitGroup:[A[0],A[11],A[31],A[42],A[48],A[56],A[57]],cssFns:["rgb()","rgba()"]},"repeating-linear-gradient()":"linear-gradient()","repeating-radial-gradient()":"radial-gradient()","rgb()":{cssPropBits:1,cssLitGroup:[A[48]],cssFns:[]},"rgba()":"rgb()","rect()":{cssPropBits:5,cssLitGroup:[A[48],A[52]],cssFns:[]},"alpha()":{cssPropBits:1,cssLitGroup:[A[28]],cssFns:[]},"matrix()":"animation-delay","perspective()":"border-bottom-left-radius","rotate()":"border-bottom-left-radius","rotate3d()":"animation-delay","rotatex()":"border-bottom-left-radius","rotatey()":"border-bottom-left-radius","rotatez()":"border-bottom-left-radius","scale()":"animation-delay","scale3d()":"animation-delay","scalex()":"border-bottom-left-radius","scaley()":"border-bottom-left-radius","scalez()":"border-bottom-left-radius","skew()":"animation-delay","skewx()":"border-bottom-left-radius","skewy()":"border-bottom-left-radius","translate()":"animation-delay","translate3d()":"animation-delay","translatex()":"border-bottom-left-radius","translatey()":"border-bottom-left-radius","translatez()":"border-bottom-left-radius"};for(t in c)"string"==typeof c[t]&&Object.hasOwnProperty.call(c,t)&&(c[t]=c[c[t]]);function p(t){var e=parseInt(t.substring(1),16);return 65535<e?(e-=65536,String.fromCharCode(55296+(e>>10),56320+(1023&e))):e==e?String.fromCharCode(e):t[1]<" "?"":t[1]}function m(t,e){return'"'+t.replace(/[\u0000-\u001f\\\"<>]/g,e)+'"'}function g(t){return i[t]||(i[t]="\\"+t.charCodeAt(0).toString(16)+" ")}function x(t){return l[t]||(l[t]=(t<"\x10"?"%0":"%")+t.charCodeAt(0).toString(16))}"undefined"!=typeof window&&(window.cssSchema=c),i={"\\":"\\\\"},l={"\\":"%5c"},o=RegExp("\\uFEFF|U[+][0-9A-F?]{1,6}(?:-[0-9A-F]{1,6})?|url[(][\\t\\n\\f ]*(?:\"(?:'|[^'\"\\n\\f\\\\]|\\\\[\\s\\S])*\"|'(?:\"|[^'\"\\n\\f\\\\]|\\\\[\\s\\S])*'|(?:[\\t\\x21\\x23-\\x26\\x28-\\x5b\\x5d-\\x7e]|[\\u0080-\\ud7ff\\ue000-\\ufffd]|[\\ud800-\\udbff][\\udc00-\\udfff]|\\\\(?:[0-9a-fA-F]{1,6}[\\t\\n\\f ]?|[\\u0020-\\u007e\\u0080-\\ud7ff\\ue000\\ufffd]|[\\ud800-\\udbff][\\udc00-\\udfff]))*)[\\t\\n\\f ]*[)]|(?!url[(])-?(?:[a-zA-Z_]|[\\u0080-\\ud7ff\\ue000-\\ufffd]|[\\ud800-\\udbff][\\udc00-\\udfff]|\\\\(?:[0-9a-fA-F]{1,6}[\\t\\n\\f ]?|[\\u0020-\\u007e\\u0080-\\ud7ff\\ue000\\ufffd]|[\\ud800-\\udbff][\\udc00-\\udfff]))(?:[a-zA-Z0-9_-]|[\\u0080-\\ud7ff\\ue000-\\ufffd]|[\\ud800-\\udbff][\\udc00-\\udfff]|\\\\(?:[0-9a-fA-F]{1,6}[\\t\\n\\f ]?|[\\u0020-\\u007e\\u0080-\\ud7ff\\ue000\\ufffd]|[\\ud800-\\udbff][\\udc00-\\udfff]))*[(]|(?:@?-?(?:[a-zA-Z_]|[\\u0080-\\ud7ff\\ue000-\\ufffd]|[\\ud800-\\udbff][\\udc00-\\udfff]|\\\\(?:[0-9a-fA-F]{1,6}[\\t\\n\\f ]?|[\\u0020-\\u007e\\u0080-\\ud7ff\\ue000\\ufffd]|[\\ud800-\\udbff][\\udc00-\\udfff]))|#)(?:[a-zA-Z0-9_-]|[\\u0080-\\ud7ff\\ue000-\\ufffd]|[\\ud800-\\udbff][\\udc00-\\udfff]|\\\\(?:[0-9a-fA-F]{1,6}[\\t\\n\\f ]?|[\\u0020-\\u007e\\u0080-\\ud7ff\\ue000\\ufffd]|[\\ud800-\\udbff][\\udc00-\\udfff]))*|\"(?:'|[^'\"\\n\\f\\\\]|\\\\[\\s\\S])*\"|'(?:\"|[^'\"\\n\\f\\\\]|\\\\[\\s\\S])*'|[-+]?(?:[0-9]+(?:[.][0-9]+)?|[.][0-9]+)(?:%|-?(?:[a-zA-Z_]|[\\u0080-\\ud7ff\\ue000-\\ufffd]|[\\ud800-\\udbff][\\udc00-\\udfff]|\\\\(?:[0-9a-fA-F]{1,6}[\\t\\n\\f ]?|[\\u0020-\\u007e\\u0080-\\ud7ff\\ue000\\ufffd]|[\\ud800-\\udbff][\\udc00-\\udfff]))(?:[a-zA-Z0-9_-]|[\\u0080-\\ud7ff\\ue000-\\ufffd]|[\\ud800-\\udbff][\\udc00-\\udfff]|\\\\(?:[0-9a-fA-F]{1,6}[\\t\\n\\f ]?|[\\u0020-\\u007e\\u0080-\\ud7ff\\ue000\\ufffd]|[\\ud800-\\udbff][\\udc00-\\udfff]))*)?|\x3c!--|--\x3e|[\\t\\n\\f ]+|/(?:[*][^*]*[*]+(?:[^/][^*]*[*]+)*/|/[^\\n\\f]*)|[~|^$*]=|[^\"'\\\\/]|/(?![/*])","gi"),s=RegExp("\\\\(?:(?:[0-9a-fA-F]{1,6}[\\t\\n\\f ]?|[\\u0020-\\u007e\\u0080-\\ud7ff\\ue000\\ufffd]|[\\ud800-\\udbff][\\udc00-\\udfff])|[\\n\\f])","g"),r=RegExp("^url\\([\\t\\n\\f ]*[\"']?|[\"']?[\\t\\n\\f ]*\\)$","gi"),n=function(t){return t.replace(s,p)},e=function(t){for(var e=0,i=" ",l=0,s=(t=(""+t).replace(/\r\n?/g,"\n").match(o)||[]).length;l<s;++l){var a=n(t[l]),h=a.length,u=a.charCodeAt(0);i==(a=34==u||39==u?m(a.substring(1,h-1),g):47==u&&1<h||"\\"==a||"--\x3e"==a||"\x3c!--"==a||"\ufeff"==a||u<=32?" ":/url\(/i.test(a)?"url("+m(a.replace(r,""),x)+")":a)&&" "==a||(t[e++]=i=a)}return t.length=e,t},"undefined"!=typeof window&&(window.lexCss=e,window.decodeCss=n);var y=function(){function t(t){return(t=(""+t).match(h))?new o(s(t[1]),s(t[2]),s(t[3]),s(t[4]),s(t[5]),s(t[6]),s(t[7])):u}function e(t,e){return"string"==typeof t?encodeURI(t).replace(e,n):u}function n(t){return t=t.charCodeAt(0),"%"+"0123456789ABCDEF".charAt(t>>4&15)+"0123456789ABCDEF".charAt(15&t)}function i(t){if(t===u)return u;t=t.replace(/(^|\/)\.(?:\/|$)/g,"$1").replace(/\/{2,}/g,"/");for(var e,n=r;(e=t.replace(n,"$1"))!=t;t=e);return t}function l(t,e){var n=t.T(),l=e.K();l?n.ga(e.j):l=e.X(),l?n.da(e.n):l=e.Y(),l?n.ea(e.k):l=e.$();var o=e.g,s=i(o);return l?(n.ca(e.V()),s=s&&s.replace(a,"")):(l=!!o)?47!==s.charCodeAt(0)&&(s=i(n.g||"").replace(a,""),s=i(((t=s.lastIndexOf("/")+1)?s.substring(0,t):"")+i(o)).replace(a,"")):(s=s&&s.replace(a,""))!==o&&n.G(s),l?n.G(s):l=e.aa(),l?n.O(e.l):l=e.Z(),l&&n.fa(e.o),n}function o(t,e,n,i,l,o,s){this.j=t,this.n=e,this.k=n,this.h=i,this.g=l,this.l=o,this.o=s}function s(t){return"string"==typeof t&&0<t.length?t:u}var r=RegExp(/(\/|^)(?:[^./][^/]*|\.{2,}(?:[^./][^/]*)|\.{3,}[^/]*)\/\.\.(?:\/|$)/),a=/^(?:\.\.\/)*(?:\.\.$)?/;o.prototype.toString=function(){var t=[];return u!==this.j&&t.push(this.j,":"),u!==this.k&&(t.push("//"),u!==this.n&&t.push(this.n,"@"),t.push(this.k),u!==this.h&&t.push(":",this.h.toString())),u!==this.g&&t.push(this.g),u!==this.l&&t.push("?",this.l),u!==this.o&&t.push("#",this.o),t.join("")},o.prototype.T=function(){return new o(this.j,this.n,this.k,this.h,this.g,this.l,this.o)},o.prototype.W=function(){return this.j&&decodeURIComponent(this.j).toLowerCase()},o.prototype.ga=function(t){this.j=t||u},o.prototype.K=function(){return u!==this.j},o.prototype.da=function(t){this.n=t||u},o.prototype.X=function(){return u!==this.n},o.prototype.ea=function(t){this.k=t||u,this.G(this.g)},o.prototype.Y=function(){return u!==this.k},o.prototype.V=function(){return this.h&&decodeURIComponent(this.h)},o.prototype.ca=function(t){if(t){if((t=Number(t))!==(65535&t))throw Error("Bad port number "+t);this.h=""+t}else this.h=u},o.prototype.$=function(){return u!==this.h},o.prototype.U=function(){return this.g&&decodeURIComponent(this.g)},o.prototype.G=function(t){t?(t=""+t,this.g=!this.k||/^\//.test(t)?t:"/"+t):this.g=u},o.prototype.O=function(t){this.l=t||u},o.prototype.aa=function(){return u!==this.l},o.prototype.ba=function(t){if("object"==typeof t&&!(t instanceof Array)&&(t instanceof Object||"[object Array]"!==Object.prototype.toString.call(t))){var e,n=[],i=-1;for(e in t){var l=t[e];"string"==typeof l&&(n[++i]=e,n[++i]=l)}t=n}n=[],i="";for(var o=0;o<t.length;)e=t[o++],l=t[o++],n.push(i,encodeURIComponent(e.toString())),i="&",l&&n.push("=",encodeURIComponent(l.toString()));this.l=n.join("")},o.prototype.fa=function(t){this.o=t||u},o.prototype.Z=function(){return u!==this.o};var h=/^(?:([^:/?#]+):)?(?:\/\/(?:([^/?#]*)@)?([^/?#:@]*)(?::([0-9]+))?)?([^?#]+)?(?:\?([^#]*))?(?:#(.*))?$/,d=/[#\/\?@]/g,c=/[\#\?]/g;return o.parse=t,o.create=function(t,i,l,s,r,a,h){return t=new o(e(t,d),e(i,d),"string"==typeof l?encodeURIComponent(l):u,0<s?s.toString():u,e(r,c),u,"string"==typeof h?encodeURIComponent(h):u),a&&("string"==typeof a?t.O(a.replace(/[^?&=0-9A-Za-z_\-~.%]/g,n)):t.ba(a)),t},o.N=l,o.ma=i,o.ha={ua:function(e){return/\.html$/.test(t(e).U())?"text/html":"application/javascript"},N:function(e,n){return e?l(t(e),t(n)).toString():""+n}},o}();"undefined"!=typeof window&&(window.URI=y);var f,v,b,C=a,E=a,S=a;!function(){function t(t){return"string"==typeof t?'url("'+t.replace(r,e)+'")':'url("about:blank")'}function e(t){return p[t]}function i(t,e){return t?y.ha.N(t,e):e}function l(t,e,n){if(!n)return u;var i=(""+t).match(m);return!i||i[1]&&!g.test(i[1])?u:n(t,e)}function o(t){return t.replace(/^-(?:apple|css|epub|khtml|moz|mso?|o|rim|wap|webkit|xv)-(?=[a-z])/,"")}var s,r=/[\n\f\r\"\'()*<>]/g,p={"\n":"%0a","\f":"%0c","\r":"%0d",'"':"%22","'":"%27","(":"%28",")":"%29","*":"%2a","<":"%3c",">":"%3e"},m=/^(?:([^:/?# ]+):)?/,g=/^(?:https?|mailto|data)$/i;s={},C=function e(r,a,h,u,d){r=o(r);var p=c[r];if(p&&"object"==typeof p){for(var m=p.cssPropBits,g=80&m,x=1536&m,y=NaN,f=0,v=0;f<a.length;++f){var b,C,E,S,w=a[f].toLowerCase(),T=w.charCodeAt(0);if(32===T)w="";else if(34===T)w=16==g?h?t(l(i(u,n(a[f].substring(1,w.length-1))),r,h)):"":8&m&&!(g&g-1)?w:"";else if("inherit"!==w){if(S=p.cssLitGroup){if(!(A=p.cssLitMap)){for(var A={},M=S.length;0<=--M;)for(var L=S[M],P=L.length;0<=--P;)A[L[P]]=s;A=p.cssLitMap=A}S=A}else S=s;if(S[o(w)]!==s)if(35===T&&/^#(?:[0-9a-f]{3}){1,2}$/.test(w))w=2&m?w:"";else if(48<=T&&T<=57)w=1&m?w:"";else if(C=48<=(b=w.charCodeAt(1))&&b<=57,E=48<=(E=w.charCodeAt(2))&&E<=57,43===T&&(C||46===b&&E))w=1&m?(C?"":"0")+w.substring(1):"";else if(45===T&&(C||46===b&&E))w=4&m?(C?"-":"-0")+w.substring(1):1&m?"0":"";else if(46===T&&C)w=1&m?"0"+w:"";else if('url("'===w.substring(0,5))w=h&&16&m?t(l(i(u,a[f].substring(5,w.length-2)),r,h)):"";else if("("===w.charAt(w.length-1))t:{for(M=(A=f)+(w=1),T=(S=a).length;M<T&&w;)w+=")"===(L=S[M++])?-1:/^[^"']*\($/.test(L);if(!w)for(T=o(w=S[A].toLowerCase()),S=S.splice(A,M-A,""),M=0,L=(A=p.cssFns).length;M<L;++M)if(A[M].substring(0,T.length)==T){S[0]=S[S.length-1]="",e(A[M],S,h,u),w=w+S.join(" ")+")";break t}w=""}else w=x&&/^-?[a-z_][\w\-]*$/.test(w)&&!/__$/.test(w)?d&&512==x?a[f]+d:1024==x&&c[w]&&"number"==typeof c[w].oa?w:"":/^\w+$/.test(w)&&64==g&&8&m?y+1===v?(a[y]=a[y].substring(0,a[y].length-1)+" "+w+'"',""):(y=v,'"'+w+'"'):""}w&&(a[v++]=w)}1===v&&'url("about:blank")'===a[0]&&(v=0),a.length=v}else a.length=0};var x,b,T=RegExp("^(active|after|before|blank|checked|default|disabled|drop|empty|enabled|first|first-child|first-letter|first-line|first-of-type|fullscreen|focus|hover|in-range|indeterminate|invalid|last-child|last-of-type|left|link|only-child|only-of-type|optional|out-of-range|placeholder-shown|read-only|read-write|required|right|root|scope|user-error|valid|visited)$"),A={};A[">"]=A["+"]=A["~"]=A,E=function(t,e,n){function i(i,l){function c(n,i,l){var o,a,u,c=h,m="";n<i&&("*"===(x=t[n])?(++n,m=x):/^[a-zA-Z]/.test(x)&&(o=r(x.toLowerCase(),[]))&&(++n,m=x="tagName"in o?o.tagName:x));for(u=a=o="";c&&n<i;++n)if("#"===(x=t[n]).charAt(0))/^#_|__$|[^\w#:\-]/.test(x)?c=d:o+=x+s;else if("."===x)++n<i&&/^[0-9A-Za-z:_\-]+$/.test(x=t[n])&&!/^_|__$/.test(x)?o+="."+x:c=d;else if(n+1<i&&"["===t[n]){++n;var g,x,y=t[n++].toLowerCase();(x=w.m[m+"::"+y])!==+x&&(x=w.m["*::"+y]),e.ia?("string"!=typeof(g=e.ia(m,y))&&(c=d,g=y),c&&x!==+x&&(x=w.d.NONE)):(g=y,x!==+x&&(c=d));var f=y="",v=d;switch(/^[~^$*|]?=$/.test(t[n])&&(y=t[n++],f=t[n++],/^[0-9A-Za-z:_\-]+$/.test(f)?f='"'+f+'"':"]"===f&&(f='""',--n),/^"([^\"\\]|\\.)*"$/.test(f)||(c=d),(v="i"===t[n])&&++n),"]"!==t[n]&&(++n,c=d),x){case w.d.CLASSES:case w.d.LOCAL_NAME:case w.d.NONE:break;case w.d.GLOBAL_NAME:case w.d.ID:case w.d.IDREF:"="!==y&&"~="!==y&&"$="!==y||'""'==f||v?"|="===y||""===y||(c=d):f='"'+f.substring(1,f.length-1)+s+'"';break;case w.d.URI:case w.d.URI_FRAGMENT:""!==y&&(c=d);break;default:c=d}c&&(a+="["+g.replace(/[^\w-]/g,"\\$&")+y+f+(v?" i]":"]"))}else{if(!(n<i&&":"===t[n]))break;if(x=t[++n],!T.test(x))break;u+=":"+x}return(c=n!==i?d:c)&&(n=(m+o).replace(/[^ .*#\w-]/g,"\\$&")+a+u+l)&&p.push(n),c}" "===t[i]&&++i,l-1!==i&&" "===t[l]&&--l;for(var p=[],m=i,g=h,x=i;g&&x<l;++x){var y=t[x];A[y]!==A&&" "!==y||(c(m,x,y)?m=x+1:g=d)}return(g=c(m,l,"")?g:d)?(p.length&&(m=p.join(""),a.push(m=o!==u?"."+o+" "+m:m)),h):!n||n(t.slice(i,l))}for(var l,o=e.na,s=e.L,r=e.Aa,a=[],c=0,p=0,m=0;m<t.length;++m)("("==(l=t[m])||"["==l?(++p,h):")"==l||"]"==l?(p&&--p,h):" "!=t[m]||!p&&A[t[m-1]]!==A&&A[t[m+1]]!==A)&&(t[c++]=t[m]);for(t.length=c,c=t.length,m=p=0;m<c;++m)if(","===t[m]){if(!i(p,m))return u;p=m+1}return i(p,c)?a:u},x=/^\w/,b=RegExp("^(?:(?:(?:(?:only|not) )?(?:all|aural|braille|embossed|handheld|print|projection|screen|speech|tty|tv)|\\( (?:(?:min-|max-)?(?:(?:device-)?(?:aspect-ratio|height|width)|color(?:-index)?|monochrome|orientation|resolution)|grid|hover|luminosity|pointer|scan|script) (?:: -?(?:[a-z]\\w+(?:-\\w+)*|\\d+(?: / \\d+|(?:\\.\\d+)?(?:p[cxt]|[cem]m|in|dpi|dppx|dpcm|%)?)) )?\\))(?: and ?\\( (?:(?:min-|max-)?(?:(?:device-)?(?:aspect-ratio|height|width)|color(?:-index)?|monochrome|orientation|resolution)|grid|hover|luminosity|pointer|scan|script) (?:: -?(?:[a-z]\\w+(?:-\\w+)*|\\d+(?: / \\d+|(?:\\.\\d+)?(?:p[cxt]|[cem]m|in|dpi|dppx|dpcm|%)?)) )?\\))*)(?: , (?:(?:(?:(?:only|not) )?(?:all|aural|braille|embossed|handheld|print|projection|screen|speech|tty|tv)|\\( (?:(?:min-|max-)?(?:(?:device-)?(?:aspect-ratio|height|width)|color(?:-index)?|monochrome|orientation|resolution)|grid|hover|luminosity|pointer|scan|script) (?:: -?(?:[a-z]\\w+(?:-\\w+)*|\\d+(?: / \\d+|(?:\\.\\d+)?(?:p[cxt]|[cem]m|in|dpi|dppx|dpcm|%)?)) )?\\))(?: and ?\\( (?:(?:min-|max-)?(?:(?:device-)?(?:aspect-ratio|height|width)|color(?:-index)?|monochrome|orientation|resolution)|grid|hover|luminosity|pointer|scan|script) (?:: -?(?:[a-z]\\w+(?:-\\w+)*|\\d+(?: / \\d+|(?:\\.\\d+)?(?:p[cxt]|[cem]m|in|dpi|dppx|dpcm|%)?)) )?\\))*))*$","i"),S=function(t){for(var e=(t=t.slice()).length,n=0,i=0;i<e;++i){var l=t[i];" "!=l&&(t[n++]=l)}return t.length=n,(t=t.join(" ")).length?b.test(t)?x.test(t)?t:"not all , "+t:"not all":""},f=function(t,e,n,o){return function t(e,n,o,s,r,c,p){function m(){f=y.length&&y[y.length-1]===u}var g=a,x=p||[0],y=[],f=d;return v(n,{startStylesheet:function(){g=[]},endStylesheet:function(){},startAtrule:function(n,a){var h,d,p,m,v;f?n=u:"@media"===n?g.push("@media"," ",S(a)):"@keyframes"===n||"@-webkit-keyframes"===n?(v=a[0],n=1!==a.length||/__$|[^\w\-]/.test(v)?u:(g.push(n," ",v+o.L),"@keyframes")):"@import"===n&&0<a.length&&(n=u,"function"==typeof c?"not all"!==(h=S(a.slice(1)))&&(++x[0],g.push(d=[]),p=l(i(e,(v=/^\s*["]([^"]*)["]\s*$/.exec(m=a[0]))||(v=/^\s*[']([^']*)[']\s*$/.exec(m))||(v=/^\s*url\s*[(]["]([^"]*)["][)]\s*$/.exec(m))||(v=/^\s*url\s*[(][']([^']*)['][)]\s*$/.exec(m))||(v=/^\s*url\s*[(]([^)]*)[)]\s*$/.exec(m))?v[1]:u),function(e){var n=t(p,e.qa,o,s,r,c,x);--x[0],d[0]=e=h?{toString:function(){return"@media "+h+" {"+n.result+"}"}}:n.result,c(e,!!x[0])},r)):window.console&&window.console.log("@import "+a.join(" ")+" elided")),f=!n,y.push(n)},endAtrule:function(){y.pop(),f||g.push(";"),m()},startBlock:function(){f||g.push("{")},endBlock:function(){f||(g.push("}"),f=h)},startRuleset:function(t){var e;f||(e=a,"@keyframes"===y[y.length-1]?(e=t.join(" ").match(/^ *(?:from|to|\d+(?:\.\d+)?%) *(?:, *(?:from|to|\d+(?:\.\d+)?%) *)*$/i),f=!e,e=e&&e[0].replace(/ +/g,"")):(t=E(t,o))&&t.length?e=t.join(", "):f=h,f||g.push(e,"{")),y.push(u)},endRuleset:function(){y.pop(),f||g.push("}"),m()},declaration:function(t,n){var i,l;f||(i=d,2<=(l=n.length)&&"!"===n[l-2]&&"important"===n[l-1].toLowerCase()&&(i=h,n.length-=2),C(t,n,s,e,o.L),n.length&&g.push(t,":",n.join(" "),i?" !important;":";"))}}),{result:{toString:function(){return g.join("")}},va:!!x[0]}}(t,e,n,o,a,a).result.toString()}}(),"undefined"!=typeof window&&(window.sanitizeCssProperty=C,window.sanitizeCssSelectorList=E,window.sanitizeStylesheet=f,window.sanitizeMediaQuery=S),function(){function t(e,i,l,o,s){for(var r,a=i++;i<l&&"{"!==e[i]&&";"!==e[i];)++i;return i<l&&(s||";"===e[i])&&((s=1+a)<l&&" "===e[s]&&++s,s<(r=i)&&" "===e[r-1]&&--r,o.startAtrule&&o.startAtrule(e[a].toLowerCase(),e.slice(s,r)),i="{"===e[i]?function e(i,l,o,s){for(++l,s.startBlock&&s.startBlock();l<o;){var r=i[l].charAt(0);if("}"==r){++l;break}l=" "===r||";"===r?l+1:"@"===r?t(i,l,o,s,d):("{"===r?e:n)(i,l,o,s)}return s.endBlock&&s.endBlock(),l}(e,i,l,o):i+1,o.endAtrule&&o.endAtrule()),i}function n(t,e,n,l){var s,r=e,a=i(t,e,n,h);if(a<0)return(a=~a)===r?a+1:a;if("{"!==(s=t[a]))return a===r?a+1:a;for(e=a+1,r<a&&" "===t[a-1]&&--a,l.startRuleset&&l.startRuleset(t.slice(r,a));e<n;){if("}"===(s=t[e])){++e;break}e=" "===s?e+1:o(t,e,n,l)}return l.endRuleset&&l.endRuleset(),e}function i(t,e,n,i){for(var l,o=[],s=-1;e<n;++e)if("["===(l=t[e].charAt(0))||"("===l)o[++s]=l;else if("]"===l&&"["===o[s]||")"===l&&"("===o[s])--s;else if("{"===l||"}"===l||";"===l||"@"===l||":"===l&&!i)break;return 0<=s?~(e+1):e}function l(t,e,n){for(;e<n&&";"!==t[e]&&"}"!==t[e];)++e;return e<n&&";"===t[e]?e+1:e}function o(t,e,n,o){var r=t[e++];if(!s.test(r))return l(t,e,n);if(e<n&&" "===t[e]&&++e,e==n||":"!==t[e])return l(t,e,n);++e<n&&" "===t[e]&&++e;var a=i(t,e,n,d);if(a<0)a=~a;else{for(var h=[],u=0,c=e;c<a;++c)" "!==(e=t[c])&&(h[u++]=e);if(a<n){for(;";"!==(e=t[a])&&"}"!==e&&(u=0,++a<n););";"===e&&++a}u&&o.declaration&&o.declaration(r.toLowerCase(),h)}return a}v=function(i,l){var o=e(i);l.startStylesheet&&l.startStylesheet();for(var s=0,r=o.length;s<r;)s=" "===o[s]?s+1:s<r?"@"===o[s].charAt(0)?t(o,s,r,l,h):n(o,s,r,l):s;l.endStylesheet&&l.endStylesheet()};var s=/^-?[a-z]/i;b=function(t,n){for(var i=e(t),l=0,s=i.length;l<s;)l=" "!==i[l]?o(i,l,s,n):l+1}}(),"undefined"!=typeof window&&(window.parseCssStylesheet=v,window.parseCssDeclarations=b);var w={d:{NONE:0,URI:1,URI_FRAGMENT:11,SCRIPT:2,STYLE:3,HTML:12,ID:4,IDREF:5,IDREFS:6,GLOBAL_NAME:7,LOCAL_NAME:8,CLASSES:9,FRAME_TARGET:10,MEDIA_QUERY:13}};w.atype=w.d,w.m={"*::class":9,"*::dir":0,"*::draggable":0,"*::hidden":0,"*::id":4,"*::inert":0,"*::itemprop":0,"*::itemref":6,"*::itemscope":0,"*::lang":0,"*::onblur":2,"*::onchange":2,"*::onclick":2,"*::ondblclick":2,"*::onerror":2,"*::onfocus":2,"*::onkeydown":2,"*::onkeypress":2,"*::onkeyup":2,"*::onload":2,"*::onmousedown":2,"*::onmousemove":2,"*::onmouseout":2,"*::onmouseover":2,"*::onmouseup":2,"*::onreset":2,"*::onscroll":2,"*::onselect":2,"*::onsubmit":2,"*::ontouchcancel":2,"*::ontouchend":2,"*::ontouchenter":2,"*::ontouchleave":2,"*::ontouchmove":2,"*::ontouchstart":2,"*::onunload":2,"*::spellcheck":0,"*::style":3,"*::tabindex":0,"*::title":0,"*::translate":0,"a::accesskey":0,"a::coords":0,"a::href":1,"a::hreflang":0,"a::name":7,"a::onblur":2,"a::onfocus":2,"a::shape":0,"a::target":10,"a::type":0,"area::accesskey":0,"area::alt":0,"area::coords":0,"area::href":1,"area::nohref":0,"area::onblur":2,"area::onfocus":2,"area::shape":0,"area::target":10,"audio::controls":0,"audio::loop":0,"audio::mediagroup":5,"audio::muted":0,"audio::preload":0,"audio::src":1,"bdo::dir":0,"blockquote::cite":1,"br::clear":0,"button::accesskey":0,"button::disabled":0,"button::name":8,"button::onblur":2,"button::onfocus":2,"button::type":0,"button::value":0,"canvas::height":0,"canvas::width":0,"caption::align":0,"col::align":0,"col::char":0,"col::charoff":0,"col::span":0,"col::valign":0,"col::width":0,"colgroup::align":0,"colgroup::char":0,"colgroup::charoff":0,"colgroup::span":0,"colgroup::valign":0,"colgroup::width":0,"command::checked":0,"command::command":5,"command::disabled":0,"command::icon":1,"command::label":0,"command::radiogroup":0,"command::type":0,"data::value":0,"del::cite":1,"del::datetime":0,"details::open":0,"dir::compact":0,"div::align":0,"dl::compact":0,"fieldset::disabled":0,"font::color":0,"font::face":0,"font::size":0,"form::accept":0,"form::action":1,"form::autocomplete":0,"form::enctype":0,"form::method":0,"form::name":7,"form::novalidate":0,"form::onreset":2,"form::onsubmit":2,"form::target":10,"h1::align":0,"h2::align":0,"h3::align":0,"h4::align":0,"h5::align":0,"h6::align":0,"hr::align":0,"hr::noshade":0,"hr::size":0,"hr::width":0,"iframe::align":0,"iframe::frameborder":0,"iframe::height":0,"iframe::marginheight":0,"iframe::marginwidth":0,"iframe::width":0,"img::align":0,"img::alt":0,"img::border":0,"img::height":0,"img::hspace":0,"img::ismap":0,"img::name":7,"img::src":1,"img::usemap":11,"img::vspace":0,"img::width":0,"input::accept":0,"input::accesskey":0,"input::align":0,"input::alt":0,"input::autocomplete":0,"input::checked":0,"input::disabled":0,"input::inputmode":0,"input::ismap":0,"input::list":5,"input::max":0,"input::maxlength":0,"input::min":0,"input::multiple":0,"input::name":8,"input::onblur":2,"input::onchange":2,"input::onfocus":2,"input::onselect":2,"input::pattern":0,"input::placeholder":0,"input::readonly":0,"input::required":0,"input::size":0,"input::src":1,"input::step":0,"input::type":0,"input::usemap":11,"input::value":0,"ins::cite":1,"ins::datetime":0,"label::accesskey":0,"label::for":5,"label::onblur":2,"label::onfocus":2,"legend::accesskey":0,"legend::align":0,"li::type":0,"li::value":0,"map::name":7,"menu::compact":0,"menu::label":0,"menu::type":0,"meter::high":0,"meter::low":0,"meter::max":0,"meter::min":0,"meter::value":0,"ol::compact":0,"ol::reversed":0,"ol::start":0,"ol::type":0,"optgroup::disabled":0,"optgroup::label":0,"option::disabled":0,"option::label":0,"option::selected":0,"option::value":0,"output::for":6,"output::name":8,"p::align":0,"pre::width":0,"progress::max":0,"progress::min":0,"progress::value":0,"q::cite":1,"select::autocomplete":0,"select::disabled":0,"select::multiple":0,"select::name":8,"select::onblur":2,"select::onchange":2,"select::onfocus":2,"select::required":0,"select::size":0,"source::type":0,"table::align":0,"table::bgcolor":0,"table::border":0,"table::cellpadding":0,"table::cellspacing":0,"table::frame":0,"table::rules":0,"table::summary":0,"table::width":0,"tbody::align":0,"tbody::char":0,"tbody::charoff":0,"tbody::valign":0,"td::abbr":0,"td::align":0,"td::axis":0,"td::bgcolor":0,"td::char":0,"td::charoff":0,"td::colspan":0,"td::headers":6,"td::height":0,"td::nowrap":0,"td::rowspan":0,"td::scope":0,"td::valign":0,"td::width":0,"textarea::accesskey":0,"textarea::autocomplete":0,"textarea::cols":0,"textarea::disabled":0,"textarea::inputmode":0,"textarea::name":8,"textarea::onblur":2,"textarea::onchange":2,"textarea::onfocus":2,"textarea::onselect":2,"textarea::placeholder":0,"textarea::readonly":0,"textarea::required":0,"textarea::rows":0,"textarea::wrap":0,"tfoot::align":0,"tfoot::char":0,"tfoot::charoff":0,"tfoot::valign":0,"th::abbr":0,"th::align":0,"th::axis":0,"th::bgcolor":0,"th::char":0,"th::charoff":0,"th::colspan":0,"th::headers":6,"th::height":0,"th::nowrap":0,"th::rowspan":0,"th::scope":0,"th::valign":0,"th::width":0,"thead::align":0,"thead::char":0,"thead::charoff":0,"thead::valign":0,"tr::align":0,"tr::bgcolor":0,"tr::char":0,"tr::charoff":0,"tr::valign":0,"track::default":0,"track::kind":0,"track::label":0,"track::srclang":0,"ul::compact":0,"ul::type":0,"video::controls":0,"video::height":0,"video::loop":0,"video::mediagroup":5,"video::muted":0,"video::poster":1,"video::preload":0,"video::src":1,"video::width":0},w.ATTRIBS=w.m,w.c={OPTIONAL_ENDTAG:1,EMPTY:2,CDATA:4,RCDATA:8,UNSAFE:16,FOLDABLE:32,SCRIPT:64,STYLE:128,VIRTUALIZED:256},w.eflags=w.c,w.f={a:0,abbr:0,acronym:0,address:0,applet:272,area:2,article:0,aside:0,audio:0,b:0,base:274,basefont:274,bdi:0,bdo:0,big:0,blockquote:0,body:305,br:2,button:0,canvas:0,caption:0,center:0,cite:0,code:0,col:2,colgroup:1,command:2,data:0,datalist:0,dd:1,del:0,details:0,dfn:0,dialog:272,dir:0,div:0,dl:0,dt:1,em:0,fieldset:0,figcaption:0,figure:0,font:0,footer:0,form:0,frame:274,frameset:272,h1:0,h2:0,h3:0,h4:0,h5:0,h6:0,head:305,header:0,hgroup:0,hr:2,html:305,i:0,iframe:4,img:2,input:2,ins:0,isindex:274,kbd:0,keygen:274,label:0,legend:0,li:1,link:274,map:0,mark:0,menu:0,meta:274,meter:0,nav:0,nobr:0,noembed:276,noframes:276,noscript:276,object:272,ol:0,optgroup:0,option:1,output:0,p:1,param:274,pre:0,progress:0,q:0,s:0,samp:0,script:84,section:0,select:0,small:0,source:2,span:0,strike:0,strong:0,style:148,sub:0,summary:0,sup:0,table:0,tbody:1,td:1,textarea:8,tfoot:1,th:1,thead:1,time:0,title:280,tr:1,track:2,tt:0,u:0,ul:0,var:0,video:0,wbr:2},w.ELEMENTS=w.f,w.Q={a:"HTMLAnchorElement",abbr:"HTMLElement",acronym:"HTMLElement",address:"HTMLElement",applet:"HTMLAppletElement",area:"HTMLAreaElement",article:"HTMLElement",aside:"HTMLElement",audio:"HTMLAudioElement",b:"HTMLElement",base:"HTMLBaseElement",basefont:"HTMLBaseFontElement",bdi:"HTMLElement",bdo:"HTMLElement",big:"HTMLElement",blockquote:"HTMLQuoteElement",body:"HTMLBodyElement",br:"HTMLBRElement",button:"HTMLButtonElement",canvas:"HTMLCanvasElement",caption:"HTMLTableCaptionElement",center:"HTMLElement",cite:"HTMLElement",code:"HTMLElement",col:"HTMLTableColElement",colgroup:"HTMLTableColElement",command:"HTMLCommandElement",data:"HTMLElement",datalist:"HTMLDataListElement",dd:"HTMLElement",del:"HTMLModElement",details:"HTMLDetailsElement",dfn:"HTMLElement",dialog:"HTMLDialogElement",dir:"HTMLDirectoryElement",div:"HTMLDivElement",dl:"HTMLDListElement",dt:"HTMLElement",em:"HTMLElement",fieldset:"HTMLFieldSetElement",figcaption:"HTMLElement",figure:"HTMLElement",font:"HTMLFontElement",footer:"HTMLElement",form:"HTMLFormElement",frame:"HTMLFrameElement",frameset:"HTMLFrameSetElement",h1:"HTMLHeadingElement",h2:"HTMLHeadingElement",h3:"HTMLHeadingElement",h4:"HTMLHeadingElement",h5:"HTMLHeadingElement",h6:"HTMLHeadingElement",head:"HTMLHeadElement",header:"HTMLElement",hgroup:"HTMLElement",hr:"HTMLHRElement",html:"HTMLHtmlElement",i:"HTMLElement",iframe:"HTMLIFrameElement",img:"HTMLImageElement",input:"HTMLInputElement",ins:"HTMLModElement",isindex:"HTMLUnknownElement",kbd:"HTMLElement",keygen:"HTMLKeygenElement",label:"HTMLLabelElement",legend:"HTMLLegendElement",li:"HTMLLIElement",link:"HTMLLinkElement",map:"HTMLMapElement",mark:"HTMLElement",menu:"HTMLMenuElement",meta:"HTMLMetaElement",meter:"HTMLMeterElement",nav:"HTMLElement",nobr:"HTMLElement",noembed:"HTMLElement",noframes:"HTMLElement",noscript:"HTMLElement",object:"HTMLObjectElement",ol:"HTMLOListElement",optgroup:"HTMLOptGroupElement",option:"HTMLOptionElement",output:"HTMLOutputElement",p:"HTMLParagraphElement",param:"HTMLParamElement",pre:"HTMLPreElement",progress:"HTMLProgressElement",q:"HTMLQuoteElement",s:"HTMLElement",samp:"HTMLElement",script:"HTMLScriptElement",section:"HTMLElement",select:"HTMLSelectElement",small:"HTMLElement",source:"HTMLSourceElement",span:"HTMLSpanElement",strike:"HTMLElement",strong:"HTMLElement",style:"HTMLStyleElement",sub:"HTMLElement",summary:"HTMLElement",sup:"HTMLElement",table:"HTMLTableElement",tbody:"HTMLTableSectionElement",td:"HTMLTableDataCellElement",textarea:"HTMLTextAreaElement",tfoot:"HTMLTableSectionElement",th:"HTMLTableHeaderCellElement",thead:"HTMLTableSectionElement",time:"HTMLTimeElement",title:"HTMLTitleElement",tr:"HTMLTableRowElement",track:"HTMLTrackElement",tt:"HTMLElement",u:"HTMLElement",ul:"HTMLUListElement",var:"HTMLElement",video:"HTMLVideoElement",wbr:"HTMLElement"},w.ELEMENT_DOM_INTERFACES=w.Q,w.P={NOT_LOADED:0,SAME_DOCUMENT:1,NEW_DOCUMENT:2},w.ueffects=w.P,w.J={"a::href":2,"area::href":2,"audio::src":1,"blockquote::cite":0,"command::icon":1,"del::cite":0,"form::action":2,"img::src":1,"input::src":1,"ins::cite":0,"q::cite":0,"video::poster":1,"video::src":1},w.URIEFFECTS=w.J,w.M={UNSANDBOXED:2,SANDBOXED:1,DATA:0},w.ltypes=w.M,w.I={"a::href":2,"area::href":2,"audio::src":2,"blockquote::cite":2,"command::icon":1,"del::cite":2,"form::action":2,"img::src":1,"input::src":1,"ins::cite":2,"q::cite":2,"video::poster":1,"video::src":2},w.LOADERTYPES=w.I,"undefined"!=typeof window&&(window.html4=w);var T=function(t){function e(t,e){return function(t){if(w.hasOwnProperty(t))return w[t];var e=t.match(T);return e?String.fromCharCode(parseInt(e[1],10)):(e=t.match(A))?String.fromCharCode(parseInt(e[1],16)):L&&M.test(t)?(L.innerHTML="&"+t+";",w[t]=e=L.textContent):"&"+t+";"}(e)}function n(t){return t.replace(I,e)}function i(t){return(""+t).replace(O,"&amp;").replace(D,"&lt;").replace(U,"&gt;").replace(N,"&#34;")}function l(t){return t.replace(_,"&amp;$1").replace(D,"&lt;").replace(U,"&gt;")}function o(t){var e={z:t.z||t.cdata,A:t.A||t.comment,B:t.B||t.endDoc,t:t.t||t.endTag,e:t.e||t.pcdata,F:t.F||t.rcdata,H:t.H||t.startDoc,w:t.w||t.startTag};return function(t,n){var i=/(<\/|<\!--|<[!?]|[&<>])/g,l=t+"";if(H)l=l.split(i);else{for(var o,s=[],a=0;(o=i.exec(l))!==u;)s.push(l.substring(a,o.index)),s.push(o[0]),a=o.index+o[0].length;s.push(l.substring(a)),l=s}r(e,l,0,{r:d,C:d},n)}}function s(t,e,n,i,l){return function(){r(t,e,n,i,l)}}function r(e,n,i,l,o){try{e.H&&0==i&&e.H(o);for(var r,a,u,d=n.length;i<d;){var m,g,x,y,f,v,b,C,E,S,w=n[i++],T=n[i];switch(w){case"&":R.test(T)?(e.e&&e.e("&"+T,o,F,s(e,n,i,l,o)),i++):e.e&&e.e("&amp;",o,F,s(e,n,i,l,o));break;case"</":(r=/^([-\w:]+)[^\'\"]*/.exec(T))?r[0].length===T.length&&">"===n[i+1]?(i+=2,u=r[1].toLowerCase(),e.t&&e.t(u,o,F,s(e,n,i,l,o))):(v=e,b=o,C=F,m=l,i=(g=p(y=n,f=i))?(v.t&&v.t(g.name,b,C,s(v,y,f,m,b)),g.next):y.length):e.e&&e.e("&lt;/",o,F,s(e,n,i,l,o));break;case"<":(r=/^([-\w:]+)\s*\/?/.exec(T))?r[0].length===T.length&&">"===n[i+1]?(i+=2,u=r[1].toLowerCase(),e.w&&e.w(u,[],o,F,s(e,n,i,l,o)),(x=t.f[u])&G&&(i=c(n,{name:u,next:i,c:x},e,o,F,l))):(f=e,v=o,b=F,C=l,i=(E=p(y=n,i))?(f.w&&f.w(E.name,E.R,v,b,s(f,y,E.next,C,v)),E.c&G?c(y,E,f,v,b,C):E.next):y.length):e.e&&e.e("&lt;",o,F,s(e,n,i,l,o));break;case"\x3c!--":if(!l.C){for(a=i+1;a<d&&(">"!==n[a]||!/--$/.test(n[a-1]));a++);a<d?(e.A&&(S=n.slice(i,a).join(""),e.A(S.substr(0,S.length-2),o,F,s(e,n,a+1,l,o))),i=a+1):l.C=h}l.C&&e.e&&e.e("&lt;!--",o,F,s(e,n,i,l,o));break;case"<!":if(/^\w/.test(T)){if(!l.r){for(a=i+1;a<d&&">"!==n[a];a++);a<d?i=a+1:l.r=h}l.r&&e.e&&e.e("&lt;!",o,F,s(e,n,i,l,o))}else e.e&&e.e("&lt;!",o,F,s(e,n,i,l,o));break;case"<?":if(!l.r){for(a=i+1;a<d&&">"!==n[a];a++);a<d?i=a+1:l.r=h}l.r&&e.e&&e.e("&lt;?",o,F,s(e,n,i,l,o));break;case">":e.e&&e.e("&gt;",o,F,s(e,n,i,l,o));break;case"":break;default:e.e&&e.e(w,o,F,s(e,n,i,l,o))}}e.B&&e.B(o)}catch(e){if(e!==F)throw e}}function c(e,n,i,o,r,a){var h=e.length;V.hasOwnProperty(n.name)||(V[n.name]=RegExp("^"+n.name+"(?:[\\s\\/]|$)","i"));for(var u=V[n.name],d=n.next,c=n.next+1;c<h&&("</"!==e[c-1]||!u.test(e[c]));c++);if(c<h&&--c,h=e.slice(d,c).join(""),n.c&t.c.CDATA)i.z&&i.z(h,o,r,s(i,e,c,a,o));else{if(!(n.c&t.c.RCDATA))throw Error("bug");i.F&&i.F(l(h),o,r,s(i,e,c,a,o))}return c}function p(e,i){var l=/^([-\w:]+)/.exec(e[i]),o={};o.name=l[1].toLowerCase(),o.c=t.f[o.name];for(var s=e[i].substr(l[0].length),r=i+1,a=e.length;r<a&&">"!==e[r];r++)s+=e[r];if(!(a<=r)){for(var u=[];""!==s;)if(l=k.exec(s))if(l[4]&&!l[5]||l[6]&&!l[7]){l=l[4]||l[6];var c=d;for(s=[s,e[r++]];r<a;r++){if(c){if(">"===e[r])break}else 0<=e[r].indexOf(l)&&(c=h);s.push(e[r])}if(a<=r)break;s=s.join("")}else{var p,m;c=l[1].toLowerCase(),p=l[2]?n((p=34===(m=(p=l[3]).charCodeAt(0))||39===m?p.substr(1,p.length-2):p).replace(P,"")):"",u.push(c,p),s=s.substr(l[0].length)}else s=s.replace(/^[\s\S][^a-z\s]*/,"");return o.R=u,o.next=r+1,o}}function m(e){function n(t,e){s||e.push(t)}var l,s;return o({startDoc:function(){l=[],s=d},startTag:function(n,o,r){if(!s&&t.f.hasOwnProperty(n)){var h=t.f[n];if(!(h&t.c.FOLDABLE)){var d,c,p=e(n,o);if(p){if("object"!=typeof p)throw Error("tagPolicy did not return object (old API?)");if(!("attribs"in p))throw Error("tagPolicy gave no attribs");o=p.attribs,p="tagName"in p?t.f[d=p.tagName]:(d=n,h),h&t.c.OPTIONAL_ENDTAG&&(!(c=l[l.length-1])||c.D!==n||c.v===d&&n===d||r.push("</",c.v,">")),h&t.c.EMPTY||l.push({D:n,v:d}),r.push("<",d),n=0;for(c=o.length;n<c;n+=2){var m=o[n+1];m!==u&&m!==a&&r.push(" ",o[n],'="',i(m),'"')}r.push(">"),h&t.c.EMPTY&&!(p&t.c.EMPTY)&&r.push("</",d,">")}else s=!(h&t.c.EMPTY)}}},endTag:function(e,n){if(s)s=d;else if(t.f.hasOwnProperty(e)){var i=t.f[e];if(!(i&(t.c.EMPTY|t.c.FOLDABLE))){if(i&t.c.OPTIONAL_ENDTAG)for(i=l.length;0<=--i;){var o=l[i].D;if(o===e)break;if(!(t.f[o]&t.c.OPTIONAL_ENDTAG))return}else for(i=l.length;0<=--i&&l[i].D!==e;);if(!(i<0)){for(o=l.length;--o>i;){var r=l[o].v;t.f[r]&t.c.OPTIONAL_ENDTAG||n.push("</",r,">")}i<l.length&&(e=l[i].v),l.length=i,n.push("</",e,">")}}}},pcdata:n,rcdata:n,cdata:n,endDoc:function(t){for(;l.length;l.length--)t.push("</",l[l.length-1].v,">")}})}function g(t,e,n,i,l){if(!l)return u;try{var o=y.parse(""+t);if(o&&(!o.K()||B.test(o.W()))){var s=l(o,e,n,i);return s?s.toString():u}}catch(t){}return u}function x(t,e,n,i,l){var o;n||t(e+" removed",{S:"removed",tagName:e}),i!==l&&(o="changed",i&&!l?o="removed":!i&&l&&(o="added"),t(e+"."+n+" "+o,{S:o,tagName:e,la:n,oldValue:i,newValue:l}))}function f(t,e,n){return t.hasOwnProperty(e=e+"::"+n)||t.hasOwnProperty(e="*::"+n)?t[e]:void 0}function v(e,n,i,l,o){for(var s=0;s<n.length;s+=2){var r,h=n[s],d=n[s+1],c=d,p=u;if((p=t.m.hasOwnProperty(r=e+"::"+h)||t.m.hasOwnProperty(r="*::"+h)?t.m[r]:p)!==u)switch(p){case t.d.NONE:break;case t.d.SCRIPT:d=u,o&&x(o,e,h,c,d);break;case t.d.STYLE:if(void 0===E){d=u,o&&x(o,e,h,c,d);break}var m=[];E(d,{declaration:function(e,n){var l=e.toLowerCase();S(l,n,i?function(e){return g(e,t.P.ja,t.M.ka,{TYPE:"CSS",CSS_PROP:l},i)}:u),n.length&&m.push(l+": "+n.join(" "))}}),d=0<m.length?m.join(" ; "):u,o&&x(o,e,h,c,d);break;case t.d.ID:case t.d.IDREF:case t.d.IDREFS:case t.d.GLOBAL_NAME:case t.d.LOCAL_NAME:case t.d.CLASSES:d=l?l(d):d,o&&x(o,e,h,c,d);break;case t.d.URI:d=g(d,f(t.J,e,h),f(t.I,e,h),{TYPE:"MARKUP",XML_ATTR:h,XML_TAG:e},i),o&&x(o,e,h,c,d);break;case t.d.URI_FRAGMENT:d&&"#"===d.charAt(0)?(d=d.substring(1),(d=l?l(d):d)!==u&&d!==a&&(d="#"+d)):d=u,o&&x(o,e,h,c,d);break;default:d=u,o&&x(o,e,h,c,d)}else d=u,o&&x(o,e,h,c,d);n[s+1]=d}return n}function b(e,n,i){return function(l,o){if(!(t.f[l]&t.c.UNSAFE))return{attribs:v(l,o,e,n,i)};i&&x(i,l,a,a,a)}}function C(t,e){var n=[];return m(e)(t,n),n.join("")}var E,S;"undefined"!=typeof window&&(E=window.parseCssDeclarations,S=window.sanitizeCssProperty);var w={lt:"<",LT:"<",gt:">",GT:">",amp:"&",AMP:"&",quot:'"',apos:"'",nbsp:"\xa0"},T=/^#(\d+)$/,A=/^#x([0-9A-Fa-f]+)$/,M=/^[A-Za-z][A-za-z0-9]+$/,L="undefined"!=typeof window&&window.document?window.document.createElement("textarea"):u,P=/\0/g,I=/&(#[0-9]+|#[xX][0-9A-Fa-f]+|\w+);/g,R=/^(#[0-9]+|#[xX][0-9A-Fa-f]+|\w+);/,O=/&/g,_=/&([^a-z#]|#(?:[^0-9x]|x(?:[^0-9a-f]|$)|$)|$)/gi,D=/[<]/g,U=/>/g,N=/\"/g,k=/^\s*([-.:\w]+)(?:\s*(=)\s*((")[^"]*("|$)|(')[^']*('|$)|(?=[a-z][-\w]*\s*=)|[^"'\s]*))?/i,H=3==="a,b".split(/(,)/).length,G=t.c.CDATA|t.c.RCDATA,F={},V={},B=/^(?:https?|mailto|data)$/i,z={};return z.pa=z.escapeAttrib=i,z.ra=z.makeHtmlSanitizer=m,z.sa=z.makeSaxParser=o,z.ta=z.makeTagPolicy=b,z.wa=z.normalizeRCData=l,z.xa=z.sanitize=function(t,e,n,i){return C(t,b(e,n,i))},z.ya=z.sanitizeAttribs=v,z.za=z.sanitizeWithPolicy=C,z.Ba=z.unescapeEntities=n,z}(w),A=T.sanitize;"undefined"!=typeof window&&(window.html=T,window.html_sanitize=A)}(),function(){var t,e,n,i,l,o,s,r,a=void 0,h=!0,u=null,d=!1,c={animation:{cssPropBits:517,cssLitGroup:[(A=["aliceblue,antiquewhite,aqua,aquamarine,azure,beige,bisque,black,blanchedalmond,blue,blueviolet,brown,burlywood,cadetblue,chartreuse,chocolate,coral,cornflowerblue,cornsilk,crimson,cyan,darkblue,darkcyan,darkgoldenrod,darkgray,darkgreen,darkkhaki,darkmagenta,darkolivegreen,darkorange,darkorchid,darkred,darksalmon,darkseagreen,darkslateblue,darkslategray,darkturquoise,darkviolet,deeppink,deepskyblue,dimgray,dodgerblue,firebrick,floralwhite,forestgreen,fuchsia,gainsboro,ghostwhite,gold,goldenrod,gray,green,greenyellow,honeydew,hotpink,indianred,indigo,ivory,khaki,lavender,lavenderblush,lawngreen,lemonchiffon,lightblue,lightcoral,lightcyan,lightgoldenrodyellow,lightgreen,lightgrey,lightpink,lightsalmon,lightseagreen,lightskyblue,lightslategray,lightsteelblue,lightyellow,lime,limegreen,linen,magenta,maroon,mediumaquamarine,mediumblue,mediumorchid,mediumpurple,mediumseagreen,mediumslateblue,mediumspringgreen,mediumturquoise,mediumvioletred,midnightblue,mintcream,mistyrose,moccasin,navajowhite,navy,oldlace,olive,olivedrab,orange,orangered,orchid,palegoldenrod,palegreen,paleturquoise,palevioletred,papayawhip,peachpuff,peru,pink,plum,powderblue,purple,red,rosybrown,royalblue,saddlebrown,salmon,sandybrown,seagreen,seashell,sienna,silver,skyblue,slateblue,slategray,snow,springgreen,steelblue,tan,teal,thistle,tomato,transparent,turquoise,violet,wheat,white,whitesmoke,yellow,yellowgreen".split(","),"all-scroll,col-resize,crosshair,default,e-resize,hand,help,move,n-resize,ne-resize,no-drop,not-allowed,nw-resize,pointer,progress,row-resize,s-resize,se-resize,sw-resize,text,vertical-text,w-resize,wait".split(","),"armenian,decimal,decimal-leading-zero,disc,georgian,lower-alpha,lower-greek,lower-latin,lower-roman,square,upper-alpha,upper-latin,upper-roman".split(","),"100,200,300,400,500,600,700,800,900,bold,bolder,lighter".split(","),"block-level,inline-level,table-caption,table-cell,table-column,table-column-group,table-footer-group,table-header-group,table-row,table-row-group".split(","),"condensed,expanded,extra-condensed,extra-expanded,narrower,semi-condensed,semi-expanded,ultra-condensed,ultra-expanded,wider".split(","),"inherit,inline,inline-block,inline-box,inline-flex,inline-grid,inline-list-item,inline-stack,inline-table,run-in".split(","),"behind,center-left,center-right,far-left,far-right,left-side,leftwards,right-side,rightwards".split(","),"large,larger,small,smaller,x-large,x-small,xx-large,xx-small".split(","),"dashed,dotted,double,groove,outset,ridge,solid".split(","),"ease,ease-in,ease-in-out,ease-out,linear,step-end,step-start".split(","),"at,closest-corner,closest-side,ellipse,farthest-corner,farthest-side".split(","),"baseline,middle,sub,super,text-bottom,text-top".split(","),"caption,icon,menu,message-box,small-caption,status-bar".split(","),"fast,faster,slow,slower,x-fast,x-slow".split(","),["above","below","higher","level","lower"],["cursive","fantasy","monospace","sans-serif","serif"],["loud","silent","soft","x-loud","x-soft"],["no-repeat","repeat-x","repeat-y","round","space"],["blink","line-through","overline","underline"],["block","flex","grid","table"],["high","low","x-high","x-low"],["nowrap","pre","pre-line","pre-wrap"],["absolute","relative","static"],["alternate","alternate-reverse","reverse"],["border-box","content-box","padding-box"],["capitalize","lowercase","uppercase"],["child","female","male"],["=","opacity"],["backwards","forwards"],["bidi-override","embed"],["bottom","top"],["break-all","keep-all"],["clip","ellipsis"],["contain","cover"],["continuous","digits"],["end","start"],["flat","preserve-3d"],["hide","show"],["horizontal","vertical"],["inside","outside"],["italic","oblique"],["left","right"],["ltr","rtl"],["no-content","no-display"],["paused","running"],["suppress","unrestricted"],["thick","thin"],[","],["/"],["all"],["always"],["auto"],["avoid"],["both"],["break-word"],["center"],["circle"],["code"],["collapse"],["contents"],["fixed"],["hidden"],["infinite"],["inset"],["invert"],["justify"],["list-item"],["local"],["medium"],["mix"],["none"],["normal"],["once"],["repeat"],["scroll"],["separate"],["small-caps"],["spell-out"],["to"],["visible"]])[10],A[24],A[29],A[45],A[48],A[54],A[63],A[71],A[72]],cssFns:["cubic-bezier()","steps()"]},"animation-delay":{cssPropBits:5,cssLitGroup:[A[48]],cssFns:[]},"animation-direction":{cssPropBits:0,cssLitGroup:[A[24],A[48],A[72]],cssFns:[]},"animation-duration":"animation-delay","animation-fill-mode":{cssPropBits:0,cssLitGroup:[A[29],A[48],A[54],A[71]],cssFns:[]},"animation-iteration-count":{cssPropBits:5,cssLitGroup:[A[48],A[63]],cssFns:[]},"animation-name":{cssPropBits:512,cssLitGroup:[A[48],A[71]],cssFns:[]},"animation-play-state":{cssPropBits:0,cssLitGroup:[A[45],A[48]],cssFns:[]},"animation-timing-function":{cssPropBits:0,cssLitGroup:[A[10],A[48]],cssFns:["cubic-bezier()","steps()"]},appearance:{cssPropBits:0,cssLitGroup:[A[71]],cssFns:[]},azimuth:{cssPropBits:5,cssLitGroup:[A[7],A[42],A[56]],cssFns:[]},"backface-visibility":{cssPropBits:0,cssLitGroup:[A[59],A[62],A[80]],cssFns:[]},background:{cssPropBits:23,cssLitGroup:[A[0],A[18],A[25],A[31],A[34],A[42],A[48],A[49],A[52],A[56],A[61],A[68],A[71],A[74],A[75]],cssFns:"image(),linear-gradient(),radial-gradient(),repeating-linear-gradient(),repeating-radial-gradient(),rgb(),rgba()".split(",")},"background-attachment":{cssPropBits:0,cssLitGroup:[A[48],A[61],A[68],A[75]],cssFns:[]},"background-color":{cssPropBits:2,cssLitGroup:[A[0]],cssFns:["rgb()","rgba()"]},"background-image":{cssPropBits:16,cssLitGroup:[A[48],A[71]],cssFns:["image()","linear-gradient()","radial-gradient()","repeating-linear-gradient()","repeating-radial-gradient()"]},"background-position":{cssPropBits:5,cssLitGroup:[A[31],A[42],A[48],A[56]],cssFns:[]},"background-repeat":{cssPropBits:0,cssLitGroup:[A[18],A[48],A[74]],cssFns:[]},"background-size":{cssPropBits:5,cssLitGroup:[A[34],A[48],A[52]],cssFns:[]},border:{cssPropBits:7,cssLitGroup:[A[0],A[9],A[47],A[62],A[64],A[69],A[71]],cssFns:["rgb()","rgba()"]},"border-bottom":"border","border-bottom-color":"background-color","border-bottom-left-radius":{cssPropBits:5,cssFns:[]},"border-bottom-right-radius":"border-bottom-left-radius","border-bottom-style":{cssPropBits:0,cssLitGroup:[A[9],A[62],A[64],A[71]],cssFns:[]},"border-bottom-width":{cssPropBits:5,cssLitGroup:[A[47],A[69]],cssFns:[]},"border-collapse":{cssPropBits:0,cssLitGroup:[A[59],A[76]],cssFns:[]},"border-color":"background-color","border-left":"border","border-left-color":"background-color","border-left-style":"border-bottom-style","border-left-width":"border-bottom-width","border-radius":{cssPropBits:5,cssLitGroup:[A[49]],cssFns:[]},"border-right":"border","border-right-color":"background-color","border-right-style":"border-bottom-style","border-right-width":"border-bottom-width","border-spacing":"border-bottom-left-radius","border-style":"border-bottom-style","border-top":"border","border-top-color":"background-color","border-top-left-radius":"border-bottom-left-radius","border-top-right-radius":"border-bottom-left-radius","border-top-style":"border-bottom-style","border-top-width":"border-bottom-width","border-width":"border-bottom-width",bottom:{cssPropBits:5,cssLitGroup:[A[52]],cssFns:[]},box:{cssPropBits:0,cssLitGroup:[A[60],A[71],A[72]],cssFns:[]},"box-shadow":{cssPropBits:7,cssLitGroup:[A[0],A[48],A[64],A[71]],cssFns:["rgb()","rgba()"]},"box-sizing":{cssPropBits:0,cssLitGroup:[A[25]],cssFns:[]},"caption-side":{cssPropBits:0,cssLitGroup:[A[31]],cssFns:[]},clear:{cssPropBits:0,cssLitGroup:[A[42],A[54],A[71]],cssFns:[]},clip:{cssPropBits:0,cssLitGroup:[A[52]],cssFns:["rect()"]},color:"background-color",content:{cssPropBits:8,cssLitGroup:[A[71],A[72]],cssFns:[]},cue:{cssPropBits:16,cssLitGroup:[A[71]],cssFns:[]},"cue-after":"cue","cue-before":"cue",cursor:{cssPropBits:16,cssLitGroup:[A[1],A[48],A[52]],cssFns:[]},direction:{cssPropBits:0,cssLitGroup:[A[43]],cssFns:[]},display:{cssPropBits:0,cssLitGroup:[A[4],A[6],A[20],A[52],A[67],A[71]],cssFns:[]},"display-extras":{cssPropBits:0,cssLitGroup:[A[67],A[71]],cssFns:[]},"display-inside":{cssPropBits:0,cssLitGroup:[A[20],A[52]],cssFns:[]},"display-outside":{cssPropBits:0,cssLitGroup:[A[4],A[71]],cssFns:[]},elevation:{cssPropBits:5,cssLitGroup:[A[15]],cssFns:[]},"empty-cells":{cssPropBits:0,cssLitGroup:[A[38]],cssFns:[]},filter:{cssPropBits:0,cssFns:["alpha()"]},float:{cssPropBits:0,cssLitGroup:[A[42],A[71]],cssFns:[]},font:{cssPropBits:73,cssLitGroup:[A[3],A[8],A[13],A[16],A[41],A[48],A[49],A[69],A[72],A[77]],cssFns:[]},"font-family":{cssPropBits:72,cssLitGroup:[A[16],A[48]],cssFns:[]},"font-size":{cssPropBits:1,cssLitGroup:[A[8],A[69]],cssFns:[]},"font-stretch":{cssPropBits:0,cssLitGroup:[A[5],A[72]],cssFns:[]},"font-style":{cssPropBits:0,cssLitGroup:[A[41],A[72]],cssFns:[]},"font-variant":{cssPropBits:0,cssLitGroup:[A[72],A[77]],cssFns:[]},"font-weight":{cssPropBits:0,cssLitGroup:[A[3],A[72]],cssFns:[]},height:"bottom",left:"bottom","letter-spacing":{cssPropBits:5,cssLitGroup:[A[72]],cssFns:[]},"line-height":{cssPropBits:1,cssLitGroup:[A[72]],cssFns:[]},"list-style":{cssPropBits:16,cssLitGroup:[A[2],A[40],A[57],A[71]],cssFns:["image()","linear-gradient()","radial-gradient()","repeating-linear-gradient()","repeating-radial-gradient()"]},"list-style-image":{cssPropBits:16,cssLitGroup:[A[71]],cssFns:["image()","linear-gradient()","radial-gradient()","repeating-linear-gradient()","repeating-radial-gradient()"]},"list-style-position":{cssPropBits:0,cssLitGroup:[A[40]],cssFns:[]},"list-style-type":{cssPropBits:0,cssLitGroup:[A[2],A[57],A[71]],cssFns:[]},margin:"bottom","margin-bottom":"bottom","margin-left":"bottom","margin-right":"bottom","margin-top":"bottom","max-height":{cssPropBits:1,cssLitGroup:[A[52],A[71]],cssFns:[]},"max-width":"max-height","min-height":{cssPropBits:1,cssLitGroup:[A[52]],cssFns:[]},"min-width":"min-height",opacity:{cssPropBits:1,cssFns:[]},outline:{cssPropBits:7,cssLitGroup:[A[0],A[9],A[47],A[62],A[64],A[65],A[69],A[71]],cssFns:["rgb()","rgba()"]},"outline-color":{cssPropBits:2,cssLitGroup:[A[0],A[65]],cssFns:["rgb()","rgba()"]},"outline-style":"border-bottom-style","outline-width":"border-bottom-width",overflow:{cssPropBits:0,cssLitGroup:[A[52],A[62],A[75],A[80]],cssFns:[]},"overflow-wrap":{cssPropBits:0,cssLitGroup:[A[55],A[72]],cssFns:[]},"overflow-x":{cssPropBits:0,cssLitGroup:[A[44],A[52],A[62],A[75],A[80]],cssFns:[]},"overflow-y":"overflow-x",padding:"opacity","padding-bottom":"opacity","padding-left":"opacity","padding-right":"opacity","padding-top":"opacity","page-break-after":{cssPropBits:0,cssLitGroup:[A[42],A[51],A[52],A[53]],cssFns:[]},"page-break-before":"page-break-after","page-break-inside":{cssPropBits:0,cssLitGroup:[A[52],A[53]],cssFns:[]},pause:"border-bottom-left-radius","pause-after":"border-bottom-left-radius","pause-before":"border-bottom-left-radius",perspective:{cssPropBits:5,cssLitGroup:[A[71]],cssFns:[]},"perspective-origin":{cssPropBits:5,cssLitGroup:[A[31],A[42],A[56]],cssFns:[]},pitch:{cssPropBits:5,cssLitGroup:[A[21],A[69]],cssFns:[]},"pitch-range":"border-bottom-left-radius","play-during":{cssPropBits:16,cssLitGroup:[A[52],A[70],A[71],A[74]],cssFns:[]},position:{cssPropBits:0,cssLitGroup:[A[23]],cssFns:[]},quotes:{cssPropBits:8,cssLitGroup:[A[71]],cssFns:[]},resize:{cssPropBits:0,cssLitGroup:[A[39],A[54],A[71]],cssFns:[]},richness:"border-bottom-left-radius",right:"bottom",speak:{cssPropBits:0,cssLitGroup:[A[71],A[72],A[78]],cssFns:[]},"speak-header":{cssPropBits:0,cssLitGroup:[A[51],A[73]],cssFns:[]},"speak-numeral":{cssPropBits:0,cssLitGroup:[A[35]],cssFns:[]},"speak-punctuation":{cssPropBits:0,cssLitGroup:[A[58],A[71]],cssFns:[]},"speech-rate":{cssPropBits:5,cssLitGroup:[A[14],A[69]],cssFns:[]},stress:"border-bottom-left-radius","table-layout":{cssPropBits:0,cssLitGroup:[A[52],A[61]],cssFns:[]},"text-align":{cssPropBits:0,cssLitGroup:[A[42],A[56],A[66]],cssFns:[]},"text-decoration":{cssPropBits:0,cssLitGroup:[A[19],A[71]],cssFns:[]},"text-indent":"border-bottom-left-radius","text-overflow":{cssPropBits:8,cssLitGroup:[A[33]],cssFns:[]},"text-shadow":"box-shadow","text-transform":{cssPropBits:0,cssLitGroup:[A[26],A[71]],cssFns:[]},"text-wrap":{cssPropBits:0,cssLitGroup:[A[46],A[71],A[72]],cssFns:[]},top:"bottom",transform:{cssPropBits:0,cssLitGroup:[A[71]],cssFns:"matrix(),perspective(),rotate(),rotate3d(),rotatex(),rotatey(),rotatez(),scale(),scale3d(),scalex(),scaley(),scalez(),skew(),skewx(),skewy(),translate(),translate3d(),translatex(),translatey(),translatez()".split(",")},"transform-origin":"perspective-origin","transform-style":{cssPropBits:0,cssLitGroup:[A[37]],cssFns:[]},transition:{cssPropBits:1029,cssLitGroup:[A[10],A[48],A[50],A[71]],cssFns:["cubic-bezier()","steps()"]},"transition-delay":"animation-delay","transition-duration":"animation-delay","transition-property":{cssPropBits:1024,cssLitGroup:[A[48],A[50]],cssFns:[]},"transition-timing-function":"animation-timing-function","unicode-bidi":{cssPropBits:0,cssLitGroup:[A[30],A[72]],cssFns:[]},"vertical-align":{cssPropBits:5,cssLitGroup:[A[12],A[31]],cssFns:[]},visibility:"backface-visibility","voice-family":{cssPropBits:8,cssLitGroup:[A[27],A[48]],cssFns:[]},volume:{cssPropBits:1,cssLitGroup:[A[17],A[69]],cssFns:[]},"white-space":{cssPropBits:0,cssLitGroup:[A[22],A[72]],cssFns:[]},width:"min-height","word-break":{cssPropBits:0,cssLitGroup:[A[32],A[72],A[55]],cssFns:[]},"word-spacing":"letter-spacing","word-wrap":"overflow-wrap","z-index":"bottom",zoom:"line-height","cubic-bezier()":"animation-delay","steps()":{cssPropBits:5,cssLitGroup:[A[36],A[48]],cssFns:[]},"image()":{cssPropBits:18,cssLitGroup:[A[0],A[48]],cssFns:["rgb()","rgba()"]},"linear-gradient()":{cssPropBits:7,cssLitGroup:[A[0],A[31],A[42],A[48],A[79]],cssFns:["rgb()","rgba()"]},"radial-gradient()":{cssPropBits:7,cssLitGroup:[A[0],A[11],A[31],A[42],A[48],A[56],A[57]],cssFns:["rgb()","rgba()"]},"repeating-linear-gradient()":"linear-gradient()","repeating-radial-gradient()":"radial-gradient()","rgb()":{cssPropBits:1,cssLitGroup:[A[48]],cssFns:[]},"rgba()":"rgb()","rect()":{cssPropBits:5,cssLitGroup:[A[48],A[52]],cssFns:[]},"alpha()":{cssPropBits:1,cssLitGroup:[A[28]],cssFns:[]},"matrix()":"animation-delay","perspective()":"border-bottom-left-radius","rotate()":"border-bottom-left-radius","rotate3d()":"animation-delay","rotatex()":"border-bottom-left-radius","rotatey()":"border-bottom-left-radius","rotatez()":"border-bottom-left-radius","scale()":"animation-delay","scale3d()":"animation-delay","scalex()":"border-bottom-left-radius","scaley()":"border-bottom-left-radius","scalez()":"border-bottom-left-radius","skew()":"animation-delay","skewx()":"border-bottom-left-radius","skewy()":"border-bottom-left-radius","translate()":"animation-delay","translate3d()":"animation-delay","translatex()":"border-bottom-left-radius","translatey()":"border-bottom-left-radius","translatez()":"border-bottom-left-radius"};for(t in c)"string"==typeof c[t]&&Object.hasOwnProperty.call(c,t)&&(c[t]=c[c[t]]);function p(t){var e=parseInt(t.substring(1),16);return 65535<e?(e-=65536,String.fromCharCode(55296+(e>>10),56320+(1023&e))):e==e?String.fromCharCode(e):t[1]<" "?"":t[1]}function m(t,e){return'"'+t.replace(/[\u0000-\u001f\\\"<>]/g,e)+'"'}function g(t){return i[t]||(i[t]="\\"+t.charCodeAt(0).toString(16)+" ")}function x(t){return l[t]||(l[t]=(t<"\x10"?"%0":"%")+t.charCodeAt(0).toString(16))}"undefined"!=typeof window&&(window.cssSchema=c),i={"\\":"\\\\"},l={"\\":"%5c"},o=RegExp("\\uFEFF|U[+][0-9A-F?]{1,6}(?:-[0-9A-F]{1,6})?|url[(][\\t\\n\\f ]*(?:\"(?:'|[^'\"\\n\\f\\\\]|\\\\[\\s\\S])*\"|'(?:\"|[^'\"\\n\\f\\\\]|\\\\[\\s\\S])*'|(?:[\\t\\x21\\x23-\\x26\\x28-\\x5b\\x5d-\\x7e]|[\\u0080-\\ud7ff\\ue000-\\ufffd]|[\\ud800-\\udbff][\\udc00-\\udfff]|\\\\(?:[0-9a-fA-F]{1,6}[\\t\\n\\f ]?|[\\u0020-\\u007e\\u0080-\\ud7ff\\ue000\\ufffd]|[\\ud800-\\udbff][\\udc00-\\udfff]))*)[\\t\\n\\f ]*[)]|(?!url[(])-?(?:[a-zA-Z_]|[\\u0080-\\ud7ff\\ue000-\\ufffd]|[\\ud800-\\udbff][\\udc00-\\udfff]|\\\\(?:[0-9a-fA-F]{1,6}[\\t\\n\\f ]?|[\\u0020-\\u007e\\u0080-\\ud7ff\\ue000\\ufffd]|[\\ud800-\\udbff][\\udc00-\\udfff]))(?:[a-zA-Z0-9_-]|[\\u0080-\\ud7ff\\ue000-\\ufffd]|[\\ud800-\\udbff][\\udc00-\\udfff]|\\\\(?:[0-9a-fA-F]{1,6}[\\t\\n\\f ]?|[\\u0020-\\u007e\\u0080-\\ud7ff\\ue000\\ufffd]|[\\ud800-\\udbff][\\udc00-\\udfff]))*[(]|(?:@?-?(?:[a-zA-Z_]|[\\u0080-\\ud7ff\\ue000-\\ufffd]|[\\ud800-\\udbff][\\udc00-\\udfff]|\\\\(?:[0-9a-fA-F]{1,6}[\\t\\n\\f ]?|[\\u0020-\\u007e\\u0080-\\ud7ff\\ue000\\ufffd]|[\\ud800-\\udbff][\\udc00-\\udfff]))|#)(?:[a-zA-Z0-9_-]|[\\u0080-\\ud7ff\\ue000-\\ufffd]|[\\ud800-\\udbff][\\udc00-\\udfff]|\\\\(?:[0-9a-fA-F]{1,6}[\\t\\n\\f ]?|[\\u0020-\\u007e\\u0080-\\ud7ff\\ue000\\ufffd]|[\\ud800-\\udbff][\\udc00-\\udfff]))*|\"(?:'|[^'\"\\n\\f\\\\]|\\\\[\\s\\S])*\"|'(?:\"|[^'\"\\n\\f\\\\]|\\\\[\\s\\S])*'|[-+]?(?:[0-9]+(?:[.][0-9]+)?|[.][0-9]+)(?:%|-?(?:[a-zA-Z_]|[\\u0080-\\ud7ff\\ue000-\\ufffd]|[\\ud800-\\udbff][\\udc00-\\udfff]|\\\\(?:[0-9a-fA-F]{1,6}[\\t\\n\\f ]?|[\\u0020-\\u007e\\u0080-\\ud7ff\\ue000\\ufffd]|[\\ud800-\\udbff][\\udc00-\\udfff]))(?:[a-zA-Z0-9_-]|[\\u0080-\\ud7ff\\ue000-\\ufffd]|[\\ud800-\\udbff][\\udc00-\\udfff]|\\\\(?:[0-9a-fA-F]{1,6}[\\t\\n\\f ]?|[\\u0020-\\u007e\\u0080-\\ud7ff\\ue000\\ufffd]|[\\ud800-\\udbff][\\udc00-\\udfff]))*)?|\x3c!--|--\x3e|[\\t\\n\\f ]+|/(?:[*][^*]*[*]+(?:[^/][^*]*[*]+)*/|/[^\\n\\f]*)|[~|^$*]=|[^\"'\\\\/]|/(?![/*])","gi"),s=RegExp("\\\\(?:(?:[0-9a-fA-F]{1,6}[\\t\\n\\f ]?|[\\u0020-\\u007e\\u0080-\\ud7ff\\ue000\\ufffd]|[\\ud800-\\udbff][\\udc00-\\udfff])|[\\n\\f])","g"),r=RegExp("^url\\([\\t\\n\\f ]*[\"']?|[\"']?[\\t\\n\\f ]*\\)$","gi"),n=function(t){return t.replace(s,p)},e=function(t){for(var e=0,i=" ",l=0,s=(t=(""+t).replace(/\r\n?/g,"\n").match(o)||[]).length;l<s;++l){var a=n(t[l]),h=a.length,u=a.charCodeAt(0);i==(a=34==u||39==u?m(a.substring(1,h-1),g):47==u&&1<h||"\\"==a||"--\x3e"==a||"\x3c!--"==a||"\ufeff"==a||u<=32?" ":/url\(/i.test(a)?"url("+m(a.replace(r,""),x)+")":a)&&" "==a||(t[e++]=i=a)}return t.length=e,t},"undefined"!=typeof window&&(window.lexCss=e,window.decodeCss=n);var y=function(){function t(t){return(t=(""+t).match(h))?new o(s(t[1]),s(t[2]),s(t[3]),s(t[4]),s(t[5]),s(t[6]),s(t[7])):u}function e(t,e){return"string"==typeof t?encodeURI(t).replace(e,n):u}function n(t){return t=t.charCodeAt(0),"%"+"0123456789ABCDEF".charAt(t>>4&15)+"0123456789ABCDEF".charAt(15&t)}function i(t){if(t===u)return u;t=t.replace(/(^|\/)\.(?:\/|$)/g,"$1").replace(/\/{2,}/g,"/");for(var e,n=r;(e=t.replace(n,"$1"))!=t;t=e);return t}function l(t,e){var n=t.T(),l=e.K();l?n.ga(e.j):l=e.X(),l?n.da(e.n):l=e.Y(),l?n.ea(e.k):l=e.$();var o=e.g,s=i(o);return l?(n.ca(e.V()),s=s&&s.replace(a,"")):(l=!!o)?47!==s.charCodeAt(0)&&(s=i(n.g||"").replace(a,""),s=i(((t=s.lastIndexOf("/")+1)?s.substring(0,t):"")+i(o)).replace(a,"")):(s=s&&s.replace(a,""))!==o&&n.G(s),l?n.G(s):l=e.aa(),l?n.O(e.l):l=e.Z(),l&&n.fa(e.o),n}function o(t,e,n,i,l,o,s){this.j=t,this.n=e,this.k=n,this.h=i,this.g=l,this.l=o,this.o=s}function s(t){return"string"==typeof t&&0<t.length?t:u}var r=RegExp(/(\/|^)(?:[^./][^/]*|\.{2,}(?:[^./][^/]*)|\.{3,}[^/]*)\/\.\.(?:\/|$)/),a=/^(?:\.\.\/)*(?:\.\.$)?/;o.prototype.toString=function(){var t=[];return u!==this.j&&t.push(this.j,":"),u!==this.k&&(t.push("//"),u!==this.n&&t.push(this.n,"@"),t.push(this.k),u!==this.h&&t.push(":",this.h.toString())),u!==this.g&&t.push(this.g),u!==this.l&&t.push("?",this.l),u!==this.o&&t.push("#",this.o),t.join("")},o.prototype.T=function(){return new o(this.j,this.n,this.k,this.h,this.g,this.l,this.o)},o.prototype.W=function(){return this.j&&decodeURIComponent(this.j).toLowerCase()},o.prototype.ga=function(t){this.j=t||u},o.prototype.K=function(){return u!==this.j},o.prototype.da=function(t){this.n=t||u},o.prototype.X=function(){return u!==this.n},o.prototype.ea=function(t){this.k=t||u,this.G(this.g)},o.prototype.Y=function(){return u!==this.k},o.prototype.V=function(){return this.h&&decodeURIComponent(this.h)},o.prototype.ca=function(t){if(t){if((t=Number(t))!==(65535&t))throw Error("Bad port number "+t);this.h=""+t}else this.h=u},o.prototype.$=function(){return u!==this.h},o.prototype.U=function(){return this.g&&decodeURIComponent(this.g)},o.prototype.G=function(t){t?(t=""+t,this.g=!this.k||/^\//.test(t)?t:"/"+t):this.g=u},o.prototype.O=function(t){this.l=t||u},o.prototype.aa=function(){return u!==this.l},o.prototype.ba=function(t){if("object"==typeof t&&!(t instanceof Array)&&(t instanceof Object||"[object Array]"!==Object.prototype.toString.call(t))){var e,n=[],i=-1;for(e in t){var l=t[e];"string"==typeof l&&(n[++i]=e,n[++i]=l)}t=n}n=[],i="";for(var o=0;o<t.length;)e=t[o++],l=t[o++],n.push(i,encodeURIComponent(e.toString())),i="&",l&&n.push("=",encodeURIComponent(l.toString()));this.l=n.join("")},o.prototype.fa=function(t){this.o=t||u},o.prototype.Z=function(){return u!==this.o};var h=/^(?:([^:/?#]+):)?(?:\/\/(?:([^/?#]*)@)?([^/?#:@]*)(?::([0-9]+))?)?([^?#]+)?(?:\?([^#]*))?(?:#(.*))?$/,d=/[#\/\?@]/g,c=/[\#\?]/g;return o.parse=t,o.create=function(t,i,l,s,r,a,h){return t=new o(e(t,d),e(i,d),"string"==typeof l?encodeURIComponent(l):u,0<s?s.toString():u,e(r,c),u,"string"==typeof h?encodeURIComponent(h):u),a&&("string"==typeof a?t.O(a.replace(/[^?&=0-9A-Za-z_\-~.%]/g,n)):t.ba(a)),t},o.N=l,o.ma=i,o.ha={ua:function(e){return/\.html$/.test(t(e).U())?"text/html":"application/javascript"},N:function(e,n){return e?l(t(e),t(n)).toString():""+n}},o}();"undefined"!=typeof window&&(window.URI=y);var f,v,b,C=a,E=a,S=a;!function(){function t(t){return"string"==typeof t?'url("'+t.replace(r,e)+'")':'url("about:blank")'}function e(t){return p[t]}function i(t,e){return t?y.ha.N(t,e):e}function l(t,e,n){if(!n)return u;var i=(""+t).match(m);return!i||i[1]&&!g.test(i[1])?u:n(t,e)}function o(t){return t.replace(/^-(?:apple|css|epub|khtml|moz|mso?|o|rim|wap|webkit|xv)-(?=[a-z])/,"")}var s,r=/[\n\f\r\"\'()*<>]/g,p={"\n":"%0a","\f":"%0c","\r":"%0d",'"':"%22","'":"%27","(":"%28",")":"%29","*":"%2a","<":"%3c",">":"%3e"},m=/^(?:([^:/?# ]+):)?/,g=/^(?:https?|mailto|data)$/i;s={},C=function e(r,a,h,u,d){r=o(r);var p=c[r];if(p&&"object"==typeof p){for(var m=p.cssPropBits,g=80&m,x=1536&m,y=NaN,f=0,v=0;f<a.length;++f){var b,C,E=a[f].toLowerCase(),S=E.charCodeAt(0);if(32===S)E="";else if(34===S)E=16==g?h?t(l(i(u,n(a[f].substring(1,E.length-1))),r,h)):"":8&m&&!(g&g-1)?E:"";else if("inherit"!==E){if(C=p.cssLitGroup){if(!(w=p.cssLitMap)){for(var w={},T=C.length;0<=--T;)for(var A=C[T],M=A.length;0<=--M;)w[A[M]]=s;w=p.cssLitMap=w}C=w}else C=s;if(C[o(E)]!==s)if(35===S&&/^#(?:[0-9a-f]{3}){1,2}$/.test(E))E=2&m?E:"";else if(48<=S&&S<=57)E=1&m?E:"";else if(b=E.charCodeAt(1),Pv=E.charCodeAt(2),b=48<=b&&b<=57,43===S&&b)E=1&m?(b?"":"0")+E.substring(1):"";else if(45===S&&b)E=4&m?(b?"-":"-0")+E.substring(1):1&m?"0":"";else if(46===S&&b)E=1&m?"0"+E:"";else if('url("'===E.substring(0,5))E=h&&16&m?t(l(i(u,a[f].substring(5,E.length-2)),r,h)):"";else if("("===E.charAt(E.length-1))t:{for(T=(w=f)+(E=1),S=(C=a).length;T<S&&E;)E+=")"===(A=C[T++])?-1:/^[^"']*\($/.test(A);if(!E)for(S=o(E=C[w].toLowerCase()),C=C.splice(w,T-w,""),T=0,A=(w=p.cssFns).length;T<A;++T)if(w[T].substring(0,S.length)==S){C[0]=C[C.length-1]="",e(w[T],C,h,u),E=E+C.join(" ")+")";break t}E=""}else E=x&&/^-?[a-z_][\w\-]*$/.test(E)&&!/__$/.test(E)?d&&512==x?a[f]+d:1024==x&&c[E]&&"number"==typeof c[E].oa?E:"":/^\w+$/.test(E)&&64==g&&8&m?y+1===v?(a[y]=a[y].substring(0,a[y].length-1)+" "+E+'"',""):(y=v,'"'+E+'"'):""}E&&(a[v++]=E)}1===v&&'url("about:blank")'===a[0]&&(v=0),a.length=v}else a.length=0};var x,b,T=RegExp("^(active|after|before|blank|checked|default|disabled|drop|empty|enabled|first|first-child|first-letter|first-line|first-of-type|fullscreen|focus|hover|in-range|indeterminate|invalid|last-child|last-of-type|left|link|only-child|only-of-type|optional|out-of-range|placeholder-shown|read-only|read-write|required|right|root|scope|user-error|valid|visited)$"),A={};A[">"]=A["+"]=A["~"]=A,E=function(t,e,n){function i(i,l){function c(n,i,l){var o,a,u,c=h,m="";n<i&&("*"===(x=t[n])?(++n,m=x):/^[a-zA-Z]/.test(x)&&(o=r(x.toLowerCase(),[]))&&(++n,m=x="tagName"in o?o.tagName:x));for(u=a=o="";c&&n<i;++n)if("#"===(x=t[n]).charAt(0))/^#_|__$|[^\w#:\-]/.test(x)?c=d:o+=x+s;else if("."===x)++n<i&&/^[0-9A-Za-z:_\-]+$/.test(x=t[n])&&!/^_|__$/.test(x)?o+="."+x:c=d;else if(n+1<i&&"["===t[n]){++n;var g,x,y=t[n++].toLowerCase();(x=w.m[m+"::"+y])!==+x&&(x=w.m["*::"+y]),e.ia?("string"!=typeof(g=e.ia(m,y))&&(c=d,g=y),c&&x!==+x&&(x=w.d.NONE)):(g=y,x!==+x&&(c=d));var f=y="",v=d;switch(/^[~^$*|]?=$/.test(t[n])&&(y=t[n++],f=t[n++],/^[0-9A-Za-z:_\-]+$/.test(f)?f='"'+f+'"':"]"===f&&(f='""',--n),/^"([^\"\\]|\\.)*"$/.test(f)||(c=d),(v="i"===t[n])&&++n),"]"!==t[n]&&(++n,c=d),x){case w.d.CLASSES:case w.d.LOCAL_NAME:case w.d.NONE:break;case w.d.GLOBAL_NAME:case w.d.ID:case w.d.IDREF:"="!==y&&"~="!==y&&"$="!==y||'""'==f||v?"|="===y||""===y||(c=d):f='"'+f.substring(1,f.length-1)+s+'"';break;case w.d.URI:case w.d.URI_FRAGMENT:""!==y&&(c=d);break;default:c=d}c&&(a+="["+g.replace(/[^\w-]/g,"\\$&")+y+f+(v?" i]":"]"))}else{if(!(n<i&&":"===t[n]))break;if(x=t[++n],!T.test(x))break;u+=":"+x}return(c=n!==i?d:c)&&(n=(m+o).replace(/[^ .*#\w-]/g,"\\$&")+a+u+l)&&p.push(n),c}" "===t[i]&&++i,l-1!==i&&" "===t[l]&&--l;for(var p=[],m=i,g=h,x=i;g&&x<l;++x){var y=t[x];A[y]!==A&&" "!==y||(c(m,x,y)?m=x+1:g=d)}return(g=c(m,l,"")?g:d)?(p.length&&(m=p.join(""),a.push(m=o!==u?"."+o+" "+m:m)),h):!n||n(t.slice(i,l))}for(var l,o=e.na,s=e.L,r=e.Aa,a=[],c=0,p=0,m=0;m<t.length;++m)("("==(l=t[m])||"["==l?(++p,h):")"==l||"]"==l?(p&&--p,h):" "!=t[m]||!p&&A[t[m-1]]!==A&&A[t[m+1]]!==A)&&(t[c++]=t[m]);for(t.length=c,c=t.length,m=p=0;m<c;++m)if(","===t[m]){if(!i(p,m))return u;p=m+1}return i(p,c)?a:u},x=/^\w/,b=RegExp("^(?:(?:(?:(?:only|not) )?(?:all|aural|braille|embossed|handheld|print|projection|screen|speech|tty|tv)|\\( (?:(?:min-|max-)?(?:(?:device-)?(?:aspect-ratio|height|width)|color(?:-index)?|monochrome|orientation|resolution)|grid|hover|luminosity|pointer|scan|script) (?:: -?(?:[a-z]\\w+(?:-\\w+)*|\\d+(?: / \\d+|(?:\\.\\d+)?(?:p[cxt]|[cem]m|in|dpi|dppx|dpcm|%)?)) )?\\))(?: and ?\\( (?:(?:min-|max-)?(?:(?:device-)?(?:aspect-ratio|height|width)|color(?:-index)?|monochrome|orientation|resolution)|grid|hover|luminosity|pointer|scan|script) (?:: -?(?:[a-z]\\w+(?:-\\w+)*|\\d+(?: / \\d+|(?:\\.\\d+)?(?:p[cxt]|[cem]m|in|dpi|dppx|dpcm|%)?)) )?\\))*)(?: , (?:(?:(?:(?:only|not) )?(?:all|aural|braille|embossed|handheld|print|projection|screen|speech|tty|tv)|\\( (?:(?:min-|max-)?(?:(?:device-)?(?:aspect-ratio|height|width)|color(?:-index)?|monochrome|orientation|resolution)|grid|hover|luminosity|pointer|scan|script) (?:: -?(?:[a-z]\\w+(?:-\\w+)*|\\d+(?: / \\d+|(?:\\.\\d+)?(?:p[cxt]|[cem]m|in|dpi|dppx|dpcm|%)?)) )?\\))(?: and ?\\( (?:(?:min-|max-)?(?:(?:device-)?(?:aspect-ratio|height|width)|color(?:-index)?|monochrome|orientation|resolution)|grid|hover|luminosity|pointer|scan|script) (?:: -?(?:[a-z]\\w+(?:-\\w+)*|\\d+(?: / \\d+|(?:\\.\\d+)?(?:p[cxt]|[cem]m|in|dpi|dppx|dpcm|%)?)) )?\\))*))*$","i"),S=function(t){for(var e=(t=t.slice()).length,n=0,i=0;i<e;++i){var l=t[i];" "!=l&&(t[n++]=l)}return t.length=n,(t=t.join(" ")).length?b.test(t)?x.test(t)?t:"not all , "+t:"not all":""},f=function(t,e,n,o){return function t(e,n,o,s,r,c,p){function m(){f=y.length&&y[y.length-1]===u}var g=a,x=p||[0],y=[],f=d;return v(n,{startStylesheet:function(){g=[]},endStylesheet:function(){},startAtrule:function(n,a){var h,d,p,m,v;f?n=u:"@media"===n?g.push("@media"," ",S(a)):"@keyframes"===n||"@-webkit-keyframes"===n?(v=a[0],n=1!==a.length||/__$|[^\w\-]/.test(v)?u:(g.push(n," ",v+o.L),"@keyframes")):"@import"===n&&0<a.length&&(n=u,"function"==typeof c?"not all"!==(h=S(a.slice(1)))&&(++x[0],g.push(d=[]),p=l(i(e,(v=/^\s*["]([^"]*)["]\s*$/.exec(m=a[0]))||(v=/^\s*[']([^']*)[']\s*$/.exec(m))||(v=/^\s*url\s*[(]["]([^"]*)["][)]\s*$/.exec(m))||(v=/^\s*url\s*[(][']([^']*)['][)]\s*$/.exec(m))||(v=/^\s*url\s*[(]([^)]*)[)]\s*$/.exec(m))?v[1]:u),function(e){var n=t(p,e.qa,o,s,r,c,x);--x[0],d[0]=e=h?{toString:function(){return"@media "+h+" {"+n.result+"}"}}:n.result,c(e,!!x[0])},r)):window.console&&window.console.log("@import "+a.join(" ")+" elided")),f=!n,y.push(n)},endAtrule:function(){y.pop(),f||g.push(";"),m()},startBlock:function(){f||g.push("{")},endBlock:function(){f||(g.push("}"),f=h)},startRuleset:function(t){var e;f||(e=a,"@keyframes"===y[y.length-1]?(e=t.join(" ").match(/^ *(?:from|to|\d+(?:\.\d+)?%) *(?:, *(?:from|to|\d+(?:\.\d+)?%) *)*$/i),f=!e,e=e&&e[0].replace(/ +/g,"")):(t=E(t,o))&&t.length?e=t.join(", "):f=h,f||g.push(e,"{")),y.push(u)},endRuleset:function(){y.pop(),f||g.push("}"),m()},declaration:function(t,n){var i,l;f||(i=d,2<=(l=n.length)&&"!"===n[l-2]&&"important"===n[l-1].toLowerCase()&&(i=h,n.length-=2),C(t,n,s,e,o.L),n.length&&g.push(t,":",n.join(" "),i?" !important;":";"))}}),{result:{toString:function(){return g.join("")}},va:!!x[0]}}(t,e,n,o,a,a).result.toString()}}(),"undefined"!=typeof window&&(window.sanitizeCssProperty=C,window.sanitizeCssSelectorList=E,window.sanitizeStylesheet=f,window.sanitizeMediaQuery=S),function(){function t(e,i,l,o,s){for(var r,a=i++;i<l&&"{"!==e[i]&&";"!==e[i];)++i;return i<l&&(s||";"===e[i])&&((s=1+a)<l&&" "===e[s]&&++s,s<(r=i)&&" "===e[r-1]&&--r,o.startAtrule&&o.startAtrule(e[a].toLowerCase(),e.slice(s,r)),i="{"===e[i]?function e(i,l,o,s){for(++l,s.startBlock&&s.startBlock();l<o;){var r=i[l].charAt(0);if("}"==r){++l;break}l=" "===r||";"===r?l+1:"@"===r?t(i,l,o,s,d):("{"===r?e:n)(i,l,o,s)}return s.endBlock&&s.endBlock(),l}(e,i,l,o):i+1,o.endAtrule&&o.endAtrule()),i}function n(t,e,n,l){var s,r=e,a=i(t,e,n,h);if(a<0)return(a=~a)===r?a+1:a;if("{"!==(s=t[a]))return a===r?a+1:a;for(e=a+1,r<a&&" "===t[a-1]&&--a,l.startRuleset&&l.startRuleset(t.slice(r,a));e<n;){if("}"===(s=t[e])){++e;break}e=" "===s?e+1:o(t,e,n,l)}return l.endRuleset&&l.endRuleset(),e}function i(t,e,n,i){for(var l,o=[],s=-1;e<n;++e)if("["===(l=t[e].charAt(0))||"("===l)o[++s]=l;else if("]"===l&&"["===o[s]||")"===l&&"("===o[s])--s;else if("{"===l||"}"===l||";"===l||"@"===l||":"===l&&!i)break;return 0<=s?~(e+1):e}function l(t,e,n){for(;e<n&&";"!==t[e]&&"}"!==t[e];)++e;return e<n&&";"===t[e]?e+1:e}function o(t,e,n,o){var r=t[e++];if(!s.test(r))return l(t,e,n);if(e<n&&" "===t[e]&&++e,e==n||":"!==t[e])return l(t,e,n);++e<n&&" "===t[e]&&++e;var a=i(t,e,n,d);if(a<0)a=~a;else{for(var h=[],u=0,c=e;c<a;++c)" "!==(e=t[c])&&(h[u++]=e);if(a<n){for(;";"!==(e=t[a])&&"}"!==e&&(u=0,++a<n););";"===e&&++a}u&&o.declaration&&o.declaration(r.toLowerCase(),h)}return a}v=function(i,l){var o=e(i);l.startStylesheet&&l.startStylesheet();for(var s=0,r=o.length;s<r;)s=" "===o[s]?s+1:s<r?"@"===o[s].charAt(0)?t(o,s,r,l,h):n(o,s,r,l):s;l.endStylesheet&&l.endStylesheet()};var s=/^-?[a-z]/i;b=function(t,n){for(var i=e(t),l=0,s=i.length;l<s;)l=" "!==i[l]?o(i,l,s,n):l+1}}(),"undefined"!=typeof window&&(window.parseCssStylesheet=v,window.parseCssDeclarations=b);var w={d:{NONE:0,URI:1,URI_FRAGMENT:11,SCRIPT:2,STYLE:3,HTML:12,ID:4,IDREF:5,IDREFS:6,GLOBAL_NAME:7,LOCAL_NAME:8,CLASSES:9,FRAME_TARGET:10,MEDIA_QUERY:13}};w.atype=w.d,w.m={"*::class":9,"*::dir":0,"*::draggable":0,"*::hidden":0,"*::id":4,"*::inert":0,"*::itemprop":0,"*::itemref":6,"*::itemscope":0,"*::lang":0,"*::onblur":2,"*::onchange":2,"*::onclick":2,"*::ondblclick":2,"*::onerror":2,"*::onfocus":2,"*::onkeydown":2,"*::onkeypress":2,"*::onkeyup":2,"*::onload":2,"*::onmousedown":2,"*::onmousemove":2,"*::onmouseout":2,"*::onmouseover":2,"*::onmouseup":2,"*::onreset":2,"*::onscroll":2,"*::onselect":2,"*::onsubmit":2,"*::ontouchcancel":2,"*::ontouchend":2,"*::ontouchenter":2,"*::ontouchleave":2,"*::ontouchmove":2,"*::ontouchstart":2,"*::onunload":2,"*::spellcheck":0,"*::style":3,"*::tabindex":0,"*::title":0,"*::translate":0,"a::accesskey":0,"a::coords":0,"a::href":1,"a::hreflang":0,"a::name":7,"a::onblur":2,"a::onfocus":2,"a::shape":0,"a::target":10,"a::type":0,"area::accesskey":0,"area::alt":0,"area::coords":0,"area::href":1,"area::nohref":0,"area::onblur":2,"area::onfocus":2,"area::shape":0,"area::target":10,"audio::controls":0,"audio::loop":0,"audio::mediagroup":5,"audio::muted":0,"audio::preload":0,"audio::src":1,"bdo::dir":0,"blockquote::cite":1,"br::clear":0,"button::accesskey":0,"button::disabled":0,"button::name":8,"button::onblur":2,"button::onfocus":2,"button::type":0,"button::value":0,"canvas::height":0,"canvas::width":0,"caption::align":0,"col::align":0,"col::char":0,"col::charoff":0,"col::span":0,"col::valign":0,"col::width":0,"colgroup::align":0,"colgroup::char":0,"colgroup::charoff":0,"colgroup::span":0,"colgroup::valign":0,"colgroup::width":0,"command::checked":0,"command::command":5,"command::disabled":0,"command::icon":1,"command::label":0,"command::radiogroup":0,"command::type":0,"data::value":0,"del::cite":1,"del::datetime":0,"details::open":0,"dir::compact":0,"div::align":0,"dl::compact":0,"fieldset::disabled":0,"font::color":0,"font::face":0,"font::size":0,"form::accept":0,"form::action":1,"form::autocomplete":0,"form::enctype":0,"form::method":0,"form::name":7,"form::novalidate":0,"form::onreset":2,"form::onsubmit":2,"form::target":10,"h1::align":0,"h2::align":0,"h3::align":0,"h4::align":0,"h5::align":0,"h6::align":0,"hr::align":0,"hr::noshade":0,"hr::size":0,"hr::width":0,"iframe::align":0,"iframe::frameborder":0,"iframe::height":0,"iframe::marginheight":0,"iframe::marginwidth":0,"iframe::width":0,"img::align":0,"img::alt":0,"img::border":0,"img::height":0,"img::hspace":0,"img::ismap":0,"img::name":7,"img::src":1,"img::usemap":11,"img::vspace":0,"img::width":0,"input::accept":0,"input::accesskey":0,"input::align":0,"input::alt":0,"input::autocomplete":0,"input::checked":0,"input::disabled":0,"input::inputmode":0,"input::ismap":0,"input::list":5,"input::max":0,"input::maxlength":0,"input::min":0,"input::multiple":0,"input::name":8,"input::onblur":2,"input::onchange":2,"input::onfocus":2,"input::onselect":2,"input::pattern":0,"input::placeholder":0,"input::readonly":0,"input::required":0,"input::size":0,"input::src":1,"input::step":0,"input::type":0,"input::usemap":11,"input::value":0,"ins::cite":1,"ins::datetime":0,"label::accesskey":0,"label::for":5,"label::onblur":2,"label::onfocus":2,"legend::accesskey":0,"legend::align":0,"li::type":0,"li::value":0,"map::name":7,"menu::compact":0,"menu::label":0,"menu::type":0,"meter::high":0,"meter::low":0,"meter::max":0,"meter::min":0,"meter::value":0,"ol::compact":0,"ol::reversed":0,"ol::start":0,"ol::type":0,"optgroup::disabled":0,"optgroup::label":0,"option::disabled":0,"option::label":0,"option::selected":0,"option::value":0,"output::for":6,"output::name":8,"p::align":0,"pre::width":0,"progress::max":0,"progress::min":0,"progress::value":0,"q::cite":1,"select::autocomplete":0,"select::disabled":0,"select::multiple":0,"select::name":8,"select::onblur":2,"select::onchange":2,"select::onfocus":2,"select::required":0,"select::size":0,"source::type":0,"table::align":0,"table::bgcolor":0,"table::border":0,"table::cellpadding":0,"table::cellspacing":0,"table::frame":0,"table::rules":0,"table::summary":0,"table::width":0,"tbody::align":0,"tbody::char":0,"tbody::charoff":0,"tbody::valign":0,"td::abbr":0,"td::align":0,"td::axis":0,"td::bgcolor":0,"td::char":0,"td::charoff":0,"td::colspan":0,"td::headers":6,"td::height":0,"td::nowrap":0,"td::rowspan":0,"td::scope":0,"td::valign":0,"td::width":0,"textarea::accesskey":0,"textarea::autocomplete":0,"textarea::cols":0,"textarea::disabled":0,"textarea::inputmode":0,"textarea::name":8,"textarea::onblur":2,"textarea::onchange":2,"textarea::onfocus":2,"textarea::onselect":2,"textarea::placeholder":0,"textarea::readonly":0,"textarea::required":0,"textarea::rows":0,"textarea::wrap":0,"tfoot::align":0,"tfoot::char":0,"tfoot::charoff":0,"tfoot::valign":0,"th::abbr":0,"th::align":0,"th::axis":0,"th::bgcolor":0,"th::char":0,"th::charoff":0,"th::colspan":0,"th::headers":6,"th::height":0,"th::nowrap":0,"th::rowspan":0,"th::scope":0,"th::valign":0,"th::width":0,"thead::align":0,"thead::char":0,"thead::charoff":0,"thead::valign":0,"tr::align":0,"tr::bgcolor":0,"tr::char":0,"tr::charoff":0,"tr::valign":0,"track::default":0,"track::kind":0,"track::label":0,"track::srclang":0,"ul::compact":0,"ul::type":0,"video::controls":0,"video::height":0,"video::loop":0,"video::mediagroup":5,"video::muted":0,"video::poster":1,"video::preload":0,"video::src":1,"video::width":0},w.ATTRIBS=w.m,w.c={OPTIONAL_ENDTAG:1,EMPTY:2,CDATA:4,RCDATA:8,UNSAFE:16,FOLDABLE:32,SCRIPT:64,STYLE:128,VIRTUALIZED:256},w.eflags=w.c,w.f={a:0,abbr:0,acronym:0,address:0,applet:272,area:2,article:0,aside:0,audio:0,b:0,base:274,basefont:274,bdi:0,bdo:0,big:0,blockquote:0,body:305,br:2,button:0,canvas:0,caption:0,center:0,cite:0,code:0,col:2,colgroup:1,command:2,data:0,datalist:0,dd:1,del:0,details:0,dfn:0,dialog:272,dir:0,div:0,dl:0,dt:1,em:0,fieldset:0,figcaption:0,figure:0,font:0,footer:0,form:0,frame:274,frameset:272,h1:0,h2:0,h3:0,h4:0,h5:0,h6:0,head:305,header:0,hgroup:0,hr:2,html:305,i:0,iframe:4,img:2,input:2,ins:0,isindex:274,kbd:0,keygen:274,label:0,legend:0,li:1,link:274,map:0,mark:0,menu:0,meta:274,meter:0,nav:0,nobr:0,noembed:276,noframes:276,noscript:276,object:272,ol:0,optgroup:0,option:1,output:0,p:1,param:274,pre:0,progress:0,q:0,s:0,samp:0,script:84,section:0,select:0,small:0,source:2,span:0,strike:0,strong:0,style:148,sub:0,summary:0,sup:0,table:0,tbody:1,td:1,textarea:8,tfoot:1,th:1,thead:1,time:0,title:280,tr:1,track:2,tt:0,u:0,ul:0,var:0,video:0,wbr:2},w.ELEMENTS=w.f,w.Q={a:"HTMLAnchorElement",abbr:"HTMLElement",acronym:"HTMLElement",address:"HTMLElement",applet:"HTMLAppletElement",area:"HTMLAreaElement",article:"HTMLElement",aside:"HTMLElement",audio:"HTMLAudioElement",b:"HTMLElement",base:"HTMLBaseElement",basefont:"HTMLBaseFontElement",bdi:"HTMLElement",bdo:"HTMLElement",big:"HTMLElement",blockquote:"HTMLQuoteElement",body:"HTMLBodyElement",br:"HTMLBRElement",button:"HTMLButtonElement",canvas:"HTMLCanvasElement",caption:"HTMLTableCaptionElement",center:"HTMLElement",cite:"HTMLElement",code:"HTMLElement",col:"HTMLTableColElement",colgroup:"HTMLTableColElement",command:"HTMLCommandElement",data:"HTMLElement",datalist:"HTMLDataListElement",dd:"HTMLElement",del:"HTMLModElement",details:"HTMLDetailsElement",dfn:"HTMLElement",dialog:"HTMLDialogElement",dir:"HTMLDirectoryElement",div:"HTMLDivElement",dl:"HTMLDListElement",dt:"HTMLElement",em:"HTMLElement",fieldset:"HTMLFieldSetElement",figcaption:"HTMLElement",figure:"HTMLElement",font:"HTMLFontElement",footer:"HTMLElement",form:"HTMLFormElement",frame:"HTMLFrameElement",frameset:"HTMLFrameSetElement",h1:"HTMLHeadingElement",h2:"HTMLHeadingElement",h3:"HTMLHeadingElement",h4:"HTMLHeadingElement",h5:"HTMLHeadingElement",h6:"HTMLHeadingElement",head:"HTMLHeadElement",header:"HTMLElement",hgroup:"HTMLElement",hr:"HTMLHRElement",html:"HTMLHtmlElement",i:"HTMLElement",iframe:"HTMLIFrameElement",img:"HTMLImageElement",input:"HTMLInputElement",ins:"HTMLModElement",isindex:"HTMLUnknownElement",kbd:"HTMLElement",keygen:"HTMLKeygenElement",label:"HTMLLabelElement",legend:"HTMLLegendElement",li:"HTMLLIElement",link:"HTMLLinkElement",map:"HTMLMapElement",mark:"HTMLElement",menu:"HTMLMenuElement",meta:"HTMLMetaElement",meter:"HTMLMeterElement",nav:"HTMLElement",nobr:"HTMLElement",noembed:"HTMLElement",noframes:"HTMLElement",noscript:"HTMLElement",object:"HTMLObjectElement",ol:"HTMLOListElement",optgroup:"HTMLOptGroupElement",option:"HTMLOptionElement",output:"HTMLOutputElement",p:"HTMLParagraphElement",param:"HTMLParamElement",pre:"HTMLPreElement",progress:"HTMLProgressElement",q:"HTMLQuoteElement",s:"HTMLElement",samp:"HTMLElement",script:"HTMLScriptElement",section:"HTMLElement",select:"HTMLSelectElement",small:"HTMLElement",source:"HTMLSourceElement",span:"HTMLSpanElement",strike:"HTMLElement",strong:"HTMLElement",style:"HTMLStyleElement",sub:"HTMLElement",summary:"HTMLElement",sup:"HTMLElement",table:"HTMLTableElement",tbody:"HTMLTableSectionElement",td:"HTMLTableDataCellElement",textarea:"HTMLTextAreaElement",tfoot:"HTMLTableSectionElement",th:"HTMLTableHeaderCellElement",thead:"HTMLTableSectionElement",time:"HTMLTimeElement",title:"HTMLTitleElement",tr:"HTMLTableRowElement",track:"HTMLTrackElement",tt:"HTMLElement",u:"HTMLElement",ul:"HTMLUListElement",var:"HTMLElement",video:"HTMLVideoElement",wbr:"HTMLElement"},w.ELEMENT_DOM_INTERFACES=w.Q,w.P={NOT_LOADED:0,SAME_DOCUMENT:1,NEW_DOCUMENT:2},w.ueffects=w.P,w.J={"a::href":2,"area::href":2,"audio::src":1,"blockquote::cite":0,"command::icon":1,"del::cite":0,"form::action":2,"img::src":1,"input::src":1,"ins::cite":0,"q::cite":0,"video::poster":1,"video::src":1},w.URIEFFECTS=w.J,w.M={UNSANDBOXED:2,SANDBOXED:1,DATA:0},w.ltypes=w.M,w.I={"a::href":2,"area::href":2,"audio::src":2,"blockquote::cite":2,"command::icon":1,"del::cite":2,"form::action":2,"img::src":1,"input::src":1,"ins::cite":2,"q::cite":2,"video::poster":1,"video::src":2},w.LOADERTYPES=w.I,"undefined"!=typeof window&&(window.html4=w);var T=function(t){function e(t,e){return function(t){if(w.hasOwnProperty(t))return w[t];var e=t.match(T);return e?String.fromCharCode(parseInt(e[1],10)):(e=t.match(A))?String.fromCharCode(parseInt(e[1],16)):L&&M.test(t)?(L.innerHTML="&"+t+";",w[t]=e=L.textContent):"&"+t+";"}(e)}function n(t){return t.replace(I,e)}function i(t){return(""+t).replace(O,"&amp;").replace(D,"&lt;").replace(U,"&gt;").replace(N,"&#34;")}function l(t){return t.replace(_,"&amp;$1").replace(D,"&lt;").replace(U,"&gt;")}function o(t){var e={z:t.z||t.cdata,A:t.A||t.comment,B:t.B||t.endDoc,t:t.t||t.endTag,e:t.e||t.pcdata,F:t.F||t.rcdata,H:t.H||t.startDoc,w:t.w||t.startTag};return function(t,n){var i=/(<\/|<\!--|<[!?]|[&<>])/g,l=t+"";if(H)l=l.split(i);else{for(var o,s=[],a=0;(o=i.exec(l))!==u;)s.push(l.substring(a,o.index)),s.push(o[0]),a=o.index+o[0].length;s.push(l.substring(a)),l=s}r(e,l,0,{r:d,C:d},n)}}function s(t,e,n,i,l){return function(){r(t,e,n,i,l)}}function r(e,n,i,l,o){try{e.H&&0==i&&e.H(o);for(var r,a,u,d=n.length;i<d;){var m,g,x,y,f,v,b,C,E,S,w=n[i++],T=n[i];switch(w){case"&":R.test(T)?(e.e&&e.e("&"+T,o,F,s(e,n,i,l,o)),i++):e.e&&e.e("&amp;",o,F,s(e,n,i,l,o));break;case"</":(r=/^([-\w:]+)[^\'\"]*/.exec(T))?r[0].length===T.length&&">"===n[i+1]?(i+=2,u=r[1].toLowerCase(),e.t&&e.t(u,o,F,s(e,n,i,l,o))):(v=e,b=o,C=F,m=l,i=(g=p(y=n,f=i))?(v.t&&v.t(g.name,b,C,s(v,y,f,m,b)),g.next):y.length):e.e&&e.e("&lt;/",o,F,s(e,n,i,l,o));break;case"<":(r=/^([-\w:]+)\s*\/?/.exec(T))?r[0].length===T.length&&">"===n[i+1]?(i+=2,u=r[1].toLowerCase(),e.w&&e.w(u,[],o,F,s(e,n,i,l,o)),(x=t.f[u])&G&&(i=c(n,{name:u,next:i,c:x},e,o,F,l))):(f=e,v=o,b=F,C=l,i=(E=p(y=n,i))?(f.w&&f.w(E.name,E.R,v,b,s(f,y,E.next,C,v)),E.c&G?c(y,E,f,v,b,C):E.next):y.length):e.e&&e.e("&lt;",o,F,s(e,n,i,l,o));break;case"\x3c!--":if(!l.C){for(a=i+1;a<d&&(">"!==n[a]||!/--$/.test(n[a-1]));a++);a<d?(e.A&&(S=n.slice(i,a).join(""),e.A(S.substr(0,S.length-2),o,F,s(e,n,a+1,l,o))),i=a+1):l.C=h}l.C&&e.e&&e.e("&lt;!--",o,F,s(e,n,i,l,o));break;case"<!":if(/^\w/.test(T)){if(!l.r){for(a=i+1;a<d&&">"!==n[a];a++);a<d?i=a+1:l.r=h}l.r&&e.e&&e.e("&lt;!",o,F,s(e,n,i,l,o))}else e.e&&e.e("&lt;!",o,F,s(e,n,i,l,o));break;case"<?":if(!l.r){for(a=i+1;a<d&&">"!==n[a];a++);a<d?i=a+1:l.r=h}l.r&&e.e&&e.e("&lt;?",o,F,s(e,n,i,l,o));break;case">":e.e&&e.e("&gt;",o,F,s(e,n,i,l,o));break;case"":break;default:e.e&&e.e(w,o,F,s(e,n,i,l,o))}}e.B&&e.B(o)}catch(e){if(e!==F)throw e}}function c(e,n,i,o,r,a){var h=e.length;V.hasOwnProperty(n.name)||(V[n.name]=RegExp("^"+n.name+"(?:[\\s\\/]|$)","i"));for(var u=V[n.name],d=n.next,c=n.next+1;c<h&&("</"!==e[c-1]||!u.test(e[c]));c++);if(c<h&&--c,h=e.slice(d,c).join(""),n.c&t.c.CDATA)i.z&&i.z(h,o,r,s(i,e,c,a,o));else{if(!(n.c&t.c.RCDATA))throw Error("bug");i.F&&i.F(l(h),o,r,s(i,e,c,a,o))}return c}function p(e,i){var l=/^([-\w:]+)/.exec(e[i]),o={};o.name=l[1].toLowerCase(),o.c=t.f[o.name];for(var s=e[i].substr(l[0].length),r=i+1,a=e.length;r<a&&">"!==e[r];r++)s+=e[r];if(!(a<=r)){for(var u=[];""!==s;)if(l=k.exec(s))if(l[4]&&!l[5]||l[6]&&!l[7]){l=l[4]||l[6];var c=d;for(s=[s,e[r++]];r<a;r++){if(c){if(">"===e[r])break}else 0<=e[r].indexOf(l)&&(c=h);s.push(e[r])}if(a<=r)break;s=s.join("")}else{var p,m;c=l[1].toLowerCase(),p=l[2]?n((p=34===(m=(p=l[3]).charCodeAt(0))||39===m?p.substr(1,p.length-2):p).replace(P,"")):"",u.push(c,p),s=s.substr(l[0].length)}else s=s.replace(/^[\s\S][^a-z\s]*/,"");return o.R=u,o.next=r+1,o}}function m(e){function n(t,e){s||e.push(t)}var l,s;return o({startDoc:function(){l=[],s=d},startTag:function(n,o,r){if(!s&&t.f.hasOwnProperty(n)){var h=t.f[n];if(!(h&t.c.FOLDABLE)){var d,c,p=e(n,o);if(p){if("object"!=typeof p)throw Error("tagPolicy did not return object (old API?)");if(!("attribs"in p))throw Error("tagPolicy gave no attribs");o=p.attribs,p="tagName"in p?t.f[d=p.tagName]:(d=n,h),h&t.c.OPTIONAL_ENDTAG&&(!(c=l[l.length-1])||c.D!==n||c.v===d&&n===d||r.push("</",c.v,">")),h&t.c.EMPTY||l.push({D:n,v:d}),r.push("<",d),n=0;for(c=o.length;n<c;n+=2){var m=o[n+1];m!==u&&m!==a&&r.push(" ",o[n],'="',i(m),'"')}r.push(">"),h&t.c.EMPTY&&!(p&t.c.EMPTY)&&r.push("</",d,">")}else s=!(h&t.c.EMPTY)}}},endTag:function(e,n){if(s)s=d;else if(t.f.hasOwnProperty(e)){var i=t.f[e];if(!(i&(t.c.EMPTY|t.c.FOLDABLE))){if(i&t.c.OPTIONAL_ENDTAG)for(i=l.length;0<=--i;){var o=l[i].D;if(o===e)break;if(!(t.f[o]&t.c.OPTIONAL_ENDTAG))return}else for(i=l.length;0<=--i&&l[i].D!==e;);if(!(i<0)){for(o=l.length;--o>i;){var r=l[o].v;t.f[r]&t.c.OPTIONAL_ENDTAG||n.push("</",r,">")}i<l.length&&(e=l[i].v),l.length=i,n.push("</",e,">")}}}},pcdata:n,rcdata:n,cdata:n,endDoc:function(t){for(;l.length;l.length--)t.push("</",l[l.length-1].v,">")}})}function g(t,e,n,i,l){if(!l)return u;try{var o=y.parse(""+t);if(o&&(!o.K()||B.test(o.W()))){var s=l(o,e,n,i);return s?s.toString():u}}catch(t){}return u}function x(t,e,n,i,l){var o;n||t(e+" removed",{S:"removed",tagName:e}),i!==l&&(o="changed",i&&!l?o="removed":!i&&l&&(o="added"),t(e+"."+n+" "+o,{S:o,tagName:e,la:n,oldValue:i,newValue:l}))}function f(t,e,n){return t.hasOwnProperty(e=e+"::"+n)||t.hasOwnProperty(e="*::"+n)?t[e]:void 0}function v(e,n,i,l,o){for(var s=0;s<n.length;s+=2){var r,h=n[s],d=n[s+1],c=d,p=u;if((p=t.m.hasOwnProperty(r=e+"::"+h)||t.m.hasOwnProperty(r="*::"+h)?t.m[r]:p)!==u)switch(p){case t.d.NONE:break;case t.d.SCRIPT:d=u,o&&x(o,e,h,c,d);break;case t.d.STYLE:if(void 0===E){d=u,o&&x(o,e,h,c,d);break}var m=[];E(d,{declaration:function(e,n){var l=e.toLowerCase();S(l,n,i?function(e){return g(e,t.P.ja,t.M.ka,{TYPE:"CSS",CSS_PROP:l},i)}:u),n.length&&m.push(l+": "+n.join(" "))}}),d=0<m.length?m.join(" ; "):u,o&&x(o,e,h,c,d);break;case t.d.ID:case t.d.IDREF:case t.d.IDREFS:case t.d.GLOBAL_NAME:case t.d.LOCAL_NAME:case t.d.CLASSES:d=l?l(d):d,o&&x(o,e,h,c,d);break;case t.d.URI:d=g(d,f(t.J,e,h),f(t.I,e,h),{TYPE:"MARKUP",XML_ATTR:h,XML_TAG:e},i),o&&x(o,e,h,c,d);break;case t.d.URI_FRAGMENT:d&&"#"===d.charAt(0)?(d=d.substring(1),(d=l?l(d):d)!==u&&d!==a&&(d="#"+d)):d=u,o&&x(o,e,h,c,d);break;default:d=u,o&&x(o,e,h,c,d)}else d=u,o&&x(o,e,h,c,d);n[s+1]=d}return n}function b(e,n,i){return function(l,o){if(!(t.f[l]&t.c.UNSAFE))return{attribs:v(l,o,e,n,i)};i&&x(i,l,a,a,a)}}function C(t,e){var n=[];return m(e)(t,n),n.join("")}var E,S;"undefined"!=typeof window&&(E=window.parseCssDeclarations,S=window.sanitizeCssProperty);var w={lt:"<",LT:"<",gt:">",GT:">",amp:"&",AMP:"&",quot:'"',apos:"'",nbsp:"\xa0"},T=/^#(\d+)$/,A=/^#x([0-9A-Fa-f]+)$/,M=/^[A-Za-z][A-za-z0-9]+$/,L="undefined"!=typeof window&&window.document?window.document.createElement("textarea"):u,P=/\0/g,I=/&(#[0-9]+|#[xX][0-9A-Fa-f]+|\w+);/g,R=/^(#[0-9]+|#[xX][0-9A-Fa-f]+|\w+);/,O=/&/g,_=/&([^a-z#]|#(?:[^0-9x]|x(?:[^0-9a-f]|$)|$)|$)/gi,D=/[<]/g,U=/>/g,N=/\"/g,k=/^\s*([-.:\w]+)(?:\s*(=)\s*((")[^"]*("|$)|(')[^']*('|$)|(?=[a-z][-\w]*\s*=)|[^"'\s]*))?/i,H=3==="a,b".split(/(,)/).length,G=t.c.CDATA|t.c.RCDATA,F={},V={},B=/^(?:https?|mailto|data)$/i,z={};return z.pa=z.escapeAttrib=i,z.ra=z.makeHtmlSanitizer=m,z.sa=z.makeSaxParser=o,z.ta=z.makeTagPolicy=b,z.wa=z.normalizeRCData=l,z.xa=z.sanitize=function(t,e,n,i){return C(t,b(e,n,i))},z.ya=z.sanitizeAttribs=v,z.za=z.sanitizeWithPolicy=C,z.Ba=z.unescapeEntities=n,z}(w),A=T.sanitize;"undefined"!=typeof window&&(window.html=T,window.html_sanitize=A)}();var urlParams=function(t){var e={},n=t.lastIndexOf("?");if(0<n){t=t.substring(n+1).split("&");for(var i=0;i<t.length;i++)0<(n=t[i].indexOf("="))&&(e[t[i].substring(0,n)]=t[i].substring(n+1))}return e}(window.location.href),mxClient={VERSION:"14.6.6",IS_IE:null!=navigator.userAgent&&0<=navigator.userAgent.indexOf("MSIE"),IS_IE11:null!=navigator.userAgent&&!!navigator.userAgent.match(/Trident\/7\./),IS_EDGE:null!=navigator.userAgent&&!!navigator.userAgent.match(/Edge\//),IS_EM:"spellcheck"in document.createElement("textarea")&&8==document.documentMode,VML_PREFIX:"v",OFFICE_PREFIX:"o",IS_NS:null!=navigator.userAgent&&0<=navigator.userAgent.indexOf("Mozilla/")&&navigator.userAgent.indexOf("MSIE")<0&&navigator.userAgent.indexOf("Edge/")<0,IS_OP:null!=navigator.userAgent&&(0<=navigator.userAgent.indexOf("Opera/")||0<=navigator.userAgent.indexOf("OPR/")),IS_OT:null!=navigator.userAgent&&0<=navigator.userAgent.indexOf("Presto/")&&navigator.userAgent.indexOf("Presto/2.4.")<0&&navigator.userAgent.indexOf("Presto/2.3.")<0&&navigator.userAgent.indexOf("Presto/2.2.")<0&&navigator.userAgent.indexOf("Presto/2.1.")<0&&navigator.userAgent.indexOf("Presto/2.0.")<0&&navigator.userAgent.indexOf("Presto/1.")<0,IS_SF:/Apple Computer, Inc/.test(navigator.vendor),IS_ANDROID:0<=navigator.appVersion.indexOf("Android"),IS_IOS:/iP(hone|od|ad)/.test(navigator.platform),IS_GC:/Google Inc/.test(navigator.vendor),IS_CHROMEAPP:null!=window.chrome&&null!=chrome.app&&null!=chrome.app.runtime,IS_FF:"undefined"!=typeof InstallTrigger,IS_MT:0<=navigator.userAgent.indexOf("Firefox/")&&navigator.userAgent.indexOf("Firefox/1.")<0&&navigator.userAgent.indexOf("Firefox/2.")<0||0<=navigator.userAgent.indexOf("Iceweasel/")&&navigator.userAgent.indexOf("Iceweasel/1.")<0&&navigator.userAgent.indexOf("Iceweasel/2.")<0||0<=navigator.userAgent.indexOf("SeaMonkey/")&&navigator.userAgent.indexOf("SeaMonkey/1.")<0||0<=navigator.userAgent.indexOf("Iceape/")&&navigator.userAgent.indexOf("Iceape/1.")<0,IS_SVG:"MICROSOFT INTERNET EXPLORER"!=navigator.appName.toUpperCase(),NO_FO:!document.createElementNS||"[object SVGForeignObjectElement]"!=document.createElementNS("http://www.w3.org/2000/svg","foreignObject")||0<=navigator.userAgent.indexOf("Opera/"),IS_WIN:0<navigator.appVersion.indexOf("Win"),IS_MAC:0<navigator.appVersion.indexOf("Mac"),IS_CHROMEOS:/\bCrOS\b/.test(navigator.appVersion),IS_TOUCH:"ontouchstart"in document.documentElement,IS_POINTER:null!=window.PointerEvent&&!(0<navigator.appVersion.indexOf("Mac")),IS_LOCAL:document.location.href.indexOf("http://")<0&&document.location.href.indexOf("https://")<0,defaultBundles:[],isBrowserSupported:function(){return mxClient.IS_SVG},link:function(t,e,n,i){var l=(n=n||document).createElement("link");l.setAttribute("rel",t),l.setAttribute("href",e),l.setAttribute("charset","UTF-8"),l.setAttribute("type","text/css"),i&&l.setAttribute("id",i),n.getElementsByTagName("head")[0].appendChild(l)},loadResources:function(t,e){function n(){0==--i&&t()}for(var i=mxClient.defaultBundles.length,l=0;l<mxClient.defaultBundles.length;l++)mxResources.add(mxClient.defaultBundles[l],e,n)},include:function(t){document.write('<script src="'+t+'"><\/script>')}};"undefined"==typeof mxLoadResources&&(mxLoadResources=!0),"undefined"==typeof mxForceIncludes&&(mxForceIncludes=!1),"undefined"==typeof mxResourceExtension&&(mxResourceExtension=".txt"),"undefined"==typeof mxLoadStylesheets&&(mxLoadStylesheets=!0),"undefined"!=typeof mxBasePath&&0<mxBasePath.length?("/"==mxBasePath.substring(mxBasePath.length-1)&&(mxBasePath=mxBasePath.substring(0,mxBasePath.length-1)),mxClient.basePath=mxBasePath):mxClient.basePath="/assets/library/scada","undefined"!=typeof mxImageBasePath&&0<mxImageBasePath.length?("/"==mxImageBasePath.substring(mxImageBasePath.length-1)&&(mxImageBasePath=mxImageBasePath.substring(0,mxImageBasePath.length-1)),mxClient.imageBasePath=mxImageBasePath):mxClient.imageBasePath="/assets/library/scada/resources/images/",mxClient.language="undefined"!=typeof mxLanguage&&null!=mxLanguage?mxLanguage:mxClient.IS_IE?navigator.userLanguage:navigator.language,mxClient.defaultLanguage="undefined"!=typeof mxDefaultLanguage&&null!=mxDefaultLanguage?mxDefaultLanguage:"en",mxLoadStylesheets,"undefined"!=typeof mxLanguages&&null!=mxLanguages&&(mxClient.languages=mxLanguages);var mxLog={consoleName:"Console",TRACE:!1,DEBUG:!0,WARN:!0,buffer:"",init:function(){var t,e,n,i,l,o;null==mxLog.window&&null!=document.body&&(o=mxLog.consoleName+" - mxGraph "+mxClient.VERSION,(t=document.createElement("table")).setAttribute("width","100%"),t.setAttribute("height","100%"),e=document.createElement("tbody"),n=document.createElement("tr"),(i=document.createElement("td")).style.verticalAlign="top",mxLog.textarea=document.createElement("textarea"),mxLog.textarea.setAttribute("wrap","off"),mxLog.textarea.setAttribute("readOnly","true"),mxLog.textarea.style.height="100%",mxLog.textarea.style.resize="none",mxLog.textarea.value=mxLog.buffer,mxLog.textarea.style.width=mxClient.IS_NS&&"BackCompat"!=document.compatMode?"99%":"100%",i.appendChild(mxLog.textarea),n.appendChild(i),e.appendChild(n),n=document.createElement("tr"),mxLog.td=document.createElement("td"),mxLog.td.style.verticalAlign="top",mxLog.td.setAttribute("height","30px"),n.appendChild(mxLog.td),e.appendChild(n),t.appendChild(e),mxLog.addButton("Info",function(t){mxLog.info()}),mxLog.addButton("DOM",function(t){t=mxUtils.getInnerHtml(document.body),mxLog.debug(t)}),mxLog.addButton("Trace",function(t){mxLog.TRACE=!mxLog.TRACE,mxLog.debug(mxLog.TRACE?"Tracing enabled":"Tracing disabled")}),mxLog.addButton("Copy",function(t){try{mxUtils.copy(mxLog.textarea.value)}catch(t){mxUtils.alert(t)}}),mxLog.addButton("Show",function(t){try{mxUtils.popup(mxLog.textarea.value)}catch(t){mxUtils.alert(t)}}),mxLog.addButton("Clear",function(t){mxLog.textarea.value=""}),n=e=0,n="number"==typeof window.innerWidth?(e=window.innerHeight,window.innerWidth):(e=document.documentElement.clientHeight||document.body.clientHeight,document.body.clientWidth),mxLog.window=new mxWindow(o,t,Math.max(0,n-320),Math.max(0,e-210),300,160),mxLog.window.setMaximizable(!0),mxLog.window.setScrollable(!1),mxLog.window.setResizable(!0),mxLog.window.setClosable(!0),mxLog.window.destroyOnClose=!1,(!mxClient.IS_NS&&!mxClient.IS_IE||mxClient.IS_GC||mxClient.IS_SF||"BackCompat"==document.compatMode)&&11!=document.documentMode||(l=mxLog.window.getElement(),o=function(t,e){mxLog.textarea.style.height=Math.max(0,l.offsetHeight-70)+"px"},mxLog.window.addListener(mxEvent.RESIZE_END,o),mxLog.window.addListener(mxEvent.MAXIMIZE,o),mxLog.window.addListener(mxEvent.NORMALIZE,o),mxLog.textarea.style.height="92px"))},info:function(){mxLog.writeln(mxUtils.toString(navigator))},addButton:function(t,e){var n=document.createElement("button");mxUtils.write(n,t),mxEvent.addListener(n,"click",e),mxLog.td.appendChild(n)},isVisible:function(){return null!=mxLog.window&&mxLog.window.isVisible()},show:function(){mxLog.setVisible(!0)},setVisible:function(t){null==mxLog.window&&mxLog.init(),null!=mxLog.window&&mxLog.window.setVisible(t)},enter:function(t){if(mxLog.TRACE)return mxLog.writeln("Entering "+t),(new Date).getTime()},leave:function(t,e){mxLog.TRACE&&(e=0!=e?" ("+((new Date).getTime()-e)+" ms)":"",mxLog.writeln("Leaving "+t+e))},debug:function(){mxLog.DEBUG&&mxLog.writeln.apply(this,arguments)},warn:function(){mxLog.WARN&&mxLog.writeln.apply(this,arguments)},write:function(){for(var t="",e=0;e<arguments.length;e++)t+=arguments[e],e<arguments.length-1&&(t+=" ");null!=mxLog.textarea?(mxLog.textarea.value+=t,null!=navigator.userAgent&&0<=navigator.userAgent.indexOf("Presto/2.5")&&(mxLog.textarea.style.visibility="hidden",mxLog.textarea.style.visibility="visible"),mxLog.textarea.scrollTop=mxLog.textarea.scrollHeight):mxLog.buffer+=t},writeln:function(){for(var t="",e=0;e<arguments.length;e++)t+=arguments[e],e<arguments.length-1&&(t+=" ");mxLog.write(t+"\n")}},mxObjectIdentity={FIELD_NAME:"mxObjectId",counter:0,get:function(t){return null==t?null:(null==t[mxObjectIdentity.FIELD_NAME]&&("object"==typeof t?(e=mxUtils.getFunctionName(t.constructor),t[mxObjectIdentity.FIELD_NAME]=e+"#"+mxObjectIdentity.counter++):"function"==typeof t&&(t[mxObjectIdentity.FIELD_NAME]="Function#"+mxObjectIdentity.counter++)),t[mxObjectIdentity.FIELD_NAME]);var e},clear:function(t){"object"!=typeof t&&"function"!=typeof t||delete t[mxObjectIdentity.FIELD_NAME]}};function mxDictionary(){this.clear()}mxDictionary.prototype.map=null,mxDictionary.prototype.clear=function(){this.map={}},mxDictionary.prototype.get=function(t){return t=mxObjectIdentity.get(t),this.map[t]},mxDictionary.prototype.put=function(t,e){var n=mxObjectIdentity.get(t);return t=this.map[n],this.map[n]=e,t},mxDictionary.prototype.remove=function(t){t=mxObjectIdentity.get(t);var e=this.map[t];return delete this.map[t],e},mxDictionary.prototype.getKeys=function(){var t,e=[];for(t in this.map)e.push(t);return e},mxDictionary.prototype.getValues=function(){var t,e=[];for(t in this.map)e.push(this.map[t]);return e},mxDictionary.prototype.visit=function(t){for(var e in this.map)t(e,this.map[e])};var mxResources={resources:{},extension:mxResourceExtension,resourcesEncoded:!1,loadDefaultBundle:!0,loadSpecialBundle:!0,isLanguageSupported:function(t){return null==mxClient.languages||0<=mxUtils.indexOf(mxClient.languages,t)},getDefaultBundle:function(t,e){return mxResources.loadDefaultBundle||!mxResources.isLanguageSupported(e)?t+mxResources.extension:null},getSpecialBundle:function(t,e){var n;return null!=mxClient.languages&&this.isLanguageSupported(e)||0<(n=e.indexOf("-"))&&(e=e.substring(0,n)),mxResources.loadSpecialBundle&&mxResources.isLanguageSupported(e)&&e!=mxClient.defaultLanguage?t+"_"+e+mxResources.extension:null},add:function(t,e,n){if((e=null!=e?e:null!=mxClient.language?mxClient.language.toLowerCase():mxConstants.NONE)!=mxConstants.NONE){function i(){if(null!=o)if(n)mxUtils.get(o,function(t){mxResources.parse(t.getText()),n()},function(){n()});else try{var t=mxUtils.load(o);t.isReady()&&mxResources.parse(t.getText())}catch(t){}else null!=n&&n()}var l=mxResources.getDefaultBundle(t,e),o=mxResources.getSpecialBundle(t,e);if(null!=l)if(n)mxUtils.get(l,function(t){mxResources.parse(t.getText()),i()},function(){i()});else try{var s=mxUtils.load(l);s.isReady()&&mxResources.parse(s.getText()),i()}catch(t){}else i()}},parse:function(t){if(null!=t){t=t.split("\n");for(var e,n,i,l=0;l<t.length;l++)"#"==t[l].charAt(0)||0<(e=t[l].indexOf("="))&&(n=t[l].substring(0,e),13==t[l].charCodeAt((i=t[l].length)-1)&&i--,e=t[l].substring(e+1,i),this.resourcesEncoded?(e=e.replace(/\\(?=u[a-fA-F\d]{4})/g,"%"),mxResources.resources[n]=unescape(e)):mxResources.resources[n]=e)}},get:function(t,e,n){return null!=(t=null==(t=mxResources.resources[t])?n:t)&&null!=e?mxResources.replacePlaceholders(t,e):t},replacePlaceholders:function(t,e){for(var n=[],i=null,l=0;l<t.length;l++){var o=t.charAt(l);"{"==o?i="":null!=i&&"}"==o?(0<=(i=parseInt(i)-1)&&i<e.length&&n.push(e[i]),i=null):null!=i?i+=o:n.push(o)}return n.join("")},loadResources:function(t){mxResources.add(mxClient.basePath+"/resources/editor",null,function(){mxResources.add(mxClient.basePath+"/resources/graph",null,t)})}};function mxPoint(t,e){this.x=null!=t?t:0,this.y=null!=e?e:0}function mxRectangle(t,e,n,i){mxPoint.call(this,t,e),this.width=null!=n?n:0,this.height=null!=i?i:0}mxPoint.prototype.x=null,mxPoint.prototype.y=null,mxPoint.prototype.equals=function(t){return null!=t&&t.x==this.x&&t.y==this.y},mxPoint.prototype.clone=function(){return mxUtils.clone(this)},mxRectangle.prototype=new mxPoint,mxRectangle.prototype.constructor=mxRectangle,mxRectangle.prototype.width=null,mxRectangle.prototype.height=null,mxRectangle.prototype.setRect=function(t,e,n,i){this.x=t,this.y=e,this.width=n,this.height=i},mxRectangle.prototype.getCenterX=function(){return this.x+this.width/2},mxRectangle.prototype.getCenterY=function(){return this.y+this.height/2},mxRectangle.prototype.add=function(t){var e,n,i;null!=t&&(e=Math.min(this.x,t.x),n=Math.min(this.y,t.y),i=Math.max(this.x+this.width,t.x+t.width),t=Math.max(this.y+this.height,t.y+t.height),this.x=e,this.y=n,this.width=i-e,this.height=t-n)},mxRectangle.prototype.intersect=function(t){var e,n,i,l;null!=t&&(e=this.x+this.width,n=t.x+t.width,i=this.y+this.height,l=t.y+t.height,this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.width=Math.min(e,n)-this.x,this.height=Math.min(i,l)-this.y)},mxRectangle.prototype.grow=function(t){return this.x-=t,this.y-=t,this.width+=2*t,this.height+=2*t,this},mxRectangle.prototype.getPoint=function(){return new mxPoint(this.x,this.y)},mxRectangle.prototype.rotate90=function(){var t=(this.width-this.height)/2;this.x+=t,this.y-=t,t=this.width,this.width=this.height,this.height=t},mxRectangle.prototype.equals=function(t){return null!=t&&t.x==this.x&&t.y==this.y&&t.width==this.width&&t.height==this.height},mxRectangle.fromRectangle=function(t){return new mxRectangle(t.x,t.y,t.width,t.height)};var mxEffects={animateChanges:function(t,e,n){var i=0,l=function(){for(var s=!1,r=0;r<e.length;r++){var a,h,u,d,c,p=e[r];!(p instanceof mxGeometryChange||p instanceof mxTerminalChange||p instanceof mxValueChange||p instanceof mxChildChange||p instanceof mxStyleChange)||null!=(a=t.getView().getState(p.cell||p.child,!1))&&(s=!0,p.constructor!=mxGeometryChange||t.model.isEdge(p.cell)?mxUtils.setOpacity(a.shape.node,100*i/10):(c=t.getView().scale,h=(p.geometry.x-p.previous.x)*c,u=(p.geometry.y-p.previous.y)*c,d=(p.geometry.width-p.previous.width)*c,c*=p.geometry.height-p.previous.height,0==i?(a.x-=h,a.y-=u,a.width-=d,a.height-=c):(a.x+=h/10,a.y+=u/10,a.width+=d/10,a.height+=c/10),t.cellRenderer.redraw(a),mxEffects.cascadeOpacity(t,p.cell,100*i/10)))}i<10&&s?(i++,window.setTimeout(l,o)):null!=n&&n()},o=30;l()},cascadeOpacity:function(t,e,n){for(var i=t.model.getChildCount(e),l=0;l<i;l++){var o=t.model.getChildAt(e,l),s=t.getView().getState(o);null!=s&&(mxUtils.setOpacity(s.shape.node,n),mxEffects.cascadeOpacity(t,o,n))}if(null!=(e=t.model.getEdges(e)))for(l=0;l<e.length;l++)null!=(i=t.getView().getState(e[l]))&&mxUtils.setOpacity(i.shape.node,n)},fadeOut:function(t,e,n,i,l,o){i=i||40,l=l||30;var s,r=e||100;mxUtils.setOpacity(t,r),o||null==o?(s=function(){r=Math.max(r-i,0),mxUtils.setOpacity(t,r),0<r?window.setTimeout(s,l):(t.style.visibility="hidden",n&&t.parentNode&&t.parentNode.removeChild(t))},window.setTimeout(s,l)):(t.style.visibility="hidden",n&&t.parentNode&&t.parentNode.removeChild(t))}},mxUtils={errorResource:"none"!=mxClient.language?"error":"",closeResource:"none"!=mxClient.language?"close":"",errorImage:mxClient.imageBasePath+"/error.gif",removeCursors:function(t){if(null!=t.style&&(t.style.cursor=""),null!=(t=t.childNodes))for(var e=t.length,n=0;n<e;n+=1)mxUtils.removeCursors(t[n])},getCurrentStyle:mxClient.IS_IE&&(null==document.documentMode||document.documentMode<9)?function(t){return null!=t?t.currentStyle:null}:function(t){return null!=t?window.getComputedStyle(t,""):null},parseCssNumber:function(t){return"thin"==t?t="2":"medium"==t?t="4":"thick"==t&&(t="6"),t=parseFloat(t),isNaN(t)?0:t},setPrefixedStyle:function(){var t=null;return mxClient.IS_OT?t="O":mxClient.IS_SF||mxClient.IS_GC?t="Webkit":mxClient.IS_MT?t="Moz":mxClient.IS_IE&&9<=document.documentMode&&document.documentMode<10&&(t="ms"),function(e,n,i){e[n]=i,null!=t&&0<n.length&&(e[n=t+n.substring(0,1).toUpperCase()+n.substring(1)]=i)}}(),hasScrollbars:function(t){return null!=(t=mxUtils.getCurrentStyle(t))&&("scroll"==t.overflow||"auto"==t.overflow)},bind:function(t,e){return function(){return e.apply(t,arguments)}},eval:function(a){var b=null;if(0<=a.indexOf("function"))try{eval("var _mxJavaScriptExpression="+a),b=_mxJavaScriptExpression,_mxJavaScriptExpression=null}catch(c){mxLog.warn(c.message+" while evaluating "+a)}else try{b=eval(a)}catch(c){mxLog.warn(c.message+" while evaluating "+a)}return b},findNode:function(t,e,n){if(t.nodeType==mxConstants.NODETYPE_ELEMENT){var i=t.getAttribute(e);if(null!=i&&i==n)return t}for(t=t.firstChild;null!=t;){if(null!=(i=mxUtils.findNode(t,e,n)))return i;t=t.nextSibling}return null},getFunctionName:function(t){var e=null;return null!=t&&(null!=t.name?e=t.name:(e=mxUtils.trim(t.toString()),/^function\s/.test(e)&&0<(t=(e=mxUtils.ltrim(e.substring(9))).indexOf("("))&&(e=e.substring(0,t)))),e},indexOf:function(t,e){if(null!=t&&null!=e)for(var n=0;n<t.length;n++)if(t[n]==e)return n;return-1},forEach:function(t,e){if(null!=t&&null!=e)for(var n=0;n<t.length;n++)e(t[n]);return t},remove:function(t,e){var n,i=null;if("object"==typeof e)for(var l=mxUtils.indexOf(e,t);0<=l;)e.splice(l,1),l=mxUtils.indexOf(e,i=t);for(n in e)e[n]==t&&(delete e[n],i=t);return i},isNode:function(t,e,n,i){return!(null==t||isNaN(t.nodeType)||null!=e&&t.nodeName.toLowerCase()!=e.toLowerCase()||null!=n&&t.getAttribute(n)!=i)},isAncestorNode:function(t,e){for(var n=e;null!=n;){if(n==t)return!0;n=n.parentNode}return!1},getChildNodes:function(t,e){e=e||mxConstants.NODETYPE_ELEMENT;for(var n=[],i=t.firstChild;null!=i;)i.nodeType==e&&n.push(i),i=i.nextSibling;return n},importNode:function(t,e,n){return mxClient.IS_IE&&(null==document.documentMode||document.documentMode<10)?mxUtils.importNodeImplementation(t,e,n):t.importNode(e,n)},importNodeImplementation:function(t,e,n){switch(e.nodeType){case 1:var i=t.createElement(e.nodeName);if(e.attributes&&0<e.attributes.length)for(var l=0;l<e.attributes.length;l++)i.setAttribute(e.attributes[l].nodeName,e.getAttribute(e.attributes[l].nodeName));if(n&&e.childNodes&&0<e.childNodes.length)for(l=0;l<e.childNodes.length;l++)i.appendChild(mxUtils.importNodeImplementation(t,e.childNodes[l],n));return i;case 3:case 4:case 8:return t.createTextNode(null!=e.nodeValue?e.nodeValue:e.value)}},createXmlDocument:function(){var t=null;return document.implementation&&document.implementation.createDocument?t=document.implementation.createDocument("","",null):"ActiveXObject"in window&&(t=mxUtils.createMsXmlDocument()),t},createMsXmlDocument:function(){var t=new ActiveXObject("Microsoft.XMLDOM");return t.async=!1,t.validateOnParse=!1,t.resolveExternals=!1,t},parseXml:window.DOMParser?function(t){return(new DOMParser).parseFromString(t,"text/xml")}:function(t){var e=mxUtils.createMsXmlDocument();return e.loadXML(t),e},clearSelection:document.selection?function(){document.selection.empty()}:window.getSelection?function(){window.getSelection().empty?window.getSelection().empty():window.getSelection().removeAllRanges&&window.getSelection().removeAllRanges()}:function(){},removeWhitespace:function(t,e){for(var n=e?t.previousSibling:t.nextSibling;null!=n&&n.nodeType==mxConstants.NODETYPE_TEXT;){var i=e?n.previousSibling:n.nextSibling,l=mxUtils.getTextContent(n);0==mxUtils.trim(l).length&&n.parentNode.removeChild(n),n=i}},htmlEntities:function(t,e){return t=(t=(t=(t=(t=(t=String(t||"")).replace(/&/g,"&amp;")).replace(/"/g,"&quot;")).replace(/\'/g,"&#39;")).replace(/</g,"&lt;")).replace(/>/g,"&gt;"),null==e||e?t.replace(/\n/g,"&#xa;"):t},getXml:function(t,e){var n="";return mxClient.IS_IE||mxClient.IS_IE11?n=mxUtils.getPrettyXml(t,"","",""):null!=window.XMLSerializer?n=(new XMLSerializer).serializeToString(t):null!=t.xml&&(n=t.xml.replace(/\r\n\t[\t]*/g,"").replace(/>\r\n/g,">").replace(/\r\n/g,"\n")),n.replace(/\n/g,e||"&#xa;")},getPrettyXml:function(t,e,n,i,l){var o,s=[];if(null!=t)if(e=null!=e?e:"  ",n=null!=n?n:"",i=null!=i?i:"\n",null!=t.namespaceURI&&t.namespaceURI!=l&&(l=t.namespaceURI,null==t.getAttribute("xmlns")&&t.setAttribute("xmlns",t.namespaceURI)),t.nodeType==mxConstants.NODETYPE_DOCUMENT)s.push(mxUtils.getPrettyXml(t.documentElement,e,n,i,l));else if(t.nodeType==mxConstants.NODETYPE_DOCUMENT_FRAGMENT){if(null!=(r=t.firstChild))for(;null!=r;)s.push(mxUtils.getPrettyXml(r,e,n,i,l)),r=r.nextSibling}else if(t.nodeType==mxConstants.NODETYPE_COMMENT)0<(o=mxUtils.getTextContent(t)).length&&s.push(n+"\x3c!--"+o+"--\x3e"+i);else if(t.nodeType==mxConstants.NODETYPE_TEXT)0<(o=mxUtils.getTextContent(t)).length&&s.push(n+mxUtils.htmlEntities(mxUtils.trim(o),!1)+i);else{s.push(n+"<"+t.nodeName);var r,a=t.attributes;if(null!=a)for(var h=0;h<a.length;h++){var u=mxUtils.htmlEntities(a[h].value);s.push(" "+a[h].nodeName+'="'+u+'"')}if(null!=(r=t.firstChild)){for(s.push(">"+i);null!=r;)s.push(mxUtils.getPrettyXml(r,e,n+e,i,l)),r=r.nextSibling;s.push(n+"</"+t.nodeName+">"+i)}else s.push(" />"+i)}return s.join("")},extractTextWithWhitespace:function(t){var e="BLOCKQUOTE DIV H1 H2 H3 H4 H5 H6 OL P PRE TABLE UL".split(" "),n=[];return function t(i){if(1!=i.length||"BR"!=i[0].nodeName&&"\n"!=i[0].innerHTML)for(var l=0;l<i.length;l++){var o=i[l];"BR"==o.nodeName||"\n"==o.innerHTML||(1==i.length||0==l)&&"DIV"==o.nodeName&&"<br>"==o.innerHTML.toLowerCase()?n.push("\n"):(3===o.nodeType||4===o.nodeType?0<o.nodeValue.length&&n.push(o.nodeValue):8!==o.nodeType&&0<o.childNodes.length&&t(o.childNodes),l<i.length-1&&0<=mxUtils.indexOf(e,i[l+1].nodeName)&&n.push("\n"))}}(t),n.join("")},replaceTrailingNewlines:function(t,e){for(var n="";0<t.length&&"\n"==t.charAt(t.length-1);)t=t.substring(0,t.length-1),n+=e;return t+n},getTextContent:function(t){return mxClient.IS_IE&&void 0!==t.innerText?t.innerText:null!=t?t[void 0===t.textContent?"text":"textContent"]:""},setTextContent:function(t,e){void 0!==t.innerText?t.innerText=e:t[void 0===t.textContent?"text":"textContent"]=e},getInnerHtml:mxClient.IS_IE?function(t){return null!=t?t.innerHTML:""}:function(t){return null!=t?(new XMLSerializer).serializeToString(t):""},getOuterHtml:mxClient.IS_IE?function(t){if(null==t)return"";if(null!=t.outerHTML)return t.outerHTML;var e=[];e.push("<"+t.nodeName);var n=t.attributes;if(null!=n)for(var i=0;i<n.length;i++){var l=n[i].value;null!=l&&0<l.length&&(e.push(" "),e.push(n[i].nodeName),e.push('="'),e.push(l),e.push('"'))}return 0==t.innerHTML.length?e.push("/>"):(e.push(">"),e.push(t.innerHTML),e.push("</"+t.nodeName+">")),e.join("")}:function(t){return null!=t?(new XMLSerializer).serializeToString(t):""},write:function(t,e){return e=t.ownerDocument.createTextNode(e),null!=t&&t.appendChild(e),e},writeln:function(t,e){return e=t.ownerDocument.createTextNode(e),null!=t&&(t.appendChild(e),t.appendChild(document.createElement("br"))),e},br:function(t,e){e=e||1;for(var n=null,i=0;i<e;i++)null!=t&&(n=t.ownerDocument.createElement("br"),t.appendChild(n));return n},button:function(t,e,n){return n=(n=null!=n?n:document).createElement("button"),mxUtils.write(n,t),mxEvent.addListener(n,"click",function(t){e(t)}),n},para:function(t,e){var n=document.createElement("p");return mxUtils.write(n,e),null!=t&&t.appendChild(n),n},addTransparentBackgroundFilter:function(t){t.style.filter+="progid:DXImageTransform.Microsoft.AlphaImageLoader(src='"+mxClient.imageBasePath+"/transparent.gif', sizingMethod='scale')"},linkAction:function(t,e,n,i,l){return mxUtils.link(t,e,function(){n.execute(i)},l)},linkInvoke:function(t,e,n,i,l,o){return mxUtils.link(t,e,function(){n[i](l)},o)},link:function(t,e,n,i){var l=document.createElement("span");return l.style.color="blue",l.style.textDecoration="underline",l.style.cursor="pointer",null!=i&&(l.style.paddingLeft=i+"px"),mxEvent.addListener(l,"click",n),mxUtils.write(l,e),null!=t&&t.appendChild(l),l},getDocumentSize:function(){var t=document.body,e=document.documentElement;try{return new mxRectangle(0,0,t.clientWidth||e.clientWidth,Math.max(t.clientHeight||0,e.clientHeight))}catch(t){return new mxRectangle}},fit:function(t){var e=mxUtils.getDocumentSize(),n=parseInt(t.offsetLeft),i=parseInt(t.offsetWidth),l=(o=mxUtils.getDocumentScrollOrigin(t.ownerDocument)).x,o=o.y,s=l+e.width;s<n+i&&(t.style.left=Math.max(l,s-i)+"px"),n=parseInt(t.offsetTop),i=parseInt(t.offsetHeight),(e=o+e.height)<n+i&&(t.style.top=Math.max(o,e-i)+"px")},load:function(t){return(t=new mxXmlRequest(t,null,"GET",!1)).send(),t},get:function(t,e,n,i,l,o,s){var r=(t=new mxXmlRequest(t,null,"GET")).setRequestHeaders;return s&&(t.setRequestHeaders=function(t,e){for(var n in r.apply(this,arguments),s)t.setRequestHeader(n,s[n])}),null!=i&&t.setBinary(i),t.send(e,n,l,o),t},getAll:function(t,e,n){function i(){0==s&&null!=n&&n(),s++}for(var l=t.length,o=[],s=0,r=0;r<t.length;r++)!function(t,n){mxUtils.get(t,function(t){var s=t.getStatus();s<200||299<s?i():(o[n]=t,0==--l&&e(o))},i)}(t[r],r);0==l&&e(o)},post:function(t,e,n,i){return new mxXmlRequest(t,e).send(n,i)},submit:function(t,e,n,i){return new mxXmlRequest(t,e).simulate(n,i)},loadInto:function(t,e,n){mxClient.IS_IE?e.onreadystatechange=function(){4==e.readyState&&n()}:e.addEventListener("load",n,!1),e.load(t)},getValue:function(t,e,n){return null==(t=null!=t?t[e]:null)?n:t},getNumber:function(t,e,n){return null==(t=null!=t?t[e]:null)&&(t=n||0),Number(t)},getColor:function(t,e,n){return null==(t=null!=t?t[e]:null)?t=n:t==mxConstants.NONE&&(t=null),t},clone:function(t,e,n){n=null!=n&&n;var i,l=null;if(null!=t&&"function"==typeof t.constructor)for(i in l=new t.constructor,t)i!=mxObjectIdentity.FIELD_NAME&&(null==e||mxUtils.indexOf(e,i)<0)&&(l[i]=n||"object"!=typeof t[i]?t[i]:mxUtils.clone(t[i]));return l},equalPoints:function(t,e){if(null==t&&null!=e||null!=t&&null==e||null!=t&&null!=e&&t.length!=e.length)return!1;if(null!=t&&null!=e)for(var n=0;n<t.length;n++)if(null!=t[n]&&null==e[n]||null==t[n]&&null!=e[n]||null!=t[n]&&null!=e[n]&&(t[n].x!=e[n].x||t[n].y!=e[n].y))return!1;return!0},equalEntries:function(t,e){var n=0;if(null==t&&null!=e||null!=t&&null==e||null!=t&&null!=e&&t.length!=e.length)return!1;if(null!=t&&null!=e){for(var i in e)n++;for(i in t)if(n--,!(mxUtils.isNaN(t[i])&&mxUtils.isNaN(e[i])||t[i]==e[i]))return!1}return 0==n},removeDuplicates:function(t){for(var e=new mxDictionary,n=[],i=0;i<t.length;i++)e.get(t[i])||(n.push(t[i]),e.put(t[i],!0));return n},isNaN:function(t){return"number"==typeof t&&isNaN(t)},extend:function(t,e){function n(){}n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t},toString:function(t){var e,n="";for(e in t)try{null==t[e]?n+=e+" = [null]\n":"function"==typeof t[e]?n+=e+" => [Function]\n":"object"==typeof t[e]?n=n+(e+" => [")+mxUtils.getFunctionName(t[e].constructor)+"]\n":n+=e+" = "+t[e]+"\n"}catch(t){n+=e+"="+t.message}return n},toRadians:function(t){return Math.PI*t/180},toDegree:function(t){return 180*t/Math.PI},arcToCurves:function(t,e,n,i,l,o,s,r,a){if(r-=t,a-=e,0===n||0===i)return g;n=Math.abs(n),i=Math.abs(i);var h=-r/2,u=-a/2,d=Math.cos(l*Math.PI/180);l=d*h+(g=Math.sin(l*Math.PI/180))*u,h=-1*g*h+d*u,r=d*(u=(o=1<(v=(u=l*l)/(m=n*n)+(p=h*h)/(f=i*i))?(n*=Math.sqrt(v),i*=Math.sqrt(v),0):(v=o===s?-1:1)*Math.sqrt((m*f-m*p-f*u)/(m*p+f*u)))*n*h/i)-g*(p=-1*o*i*l/n)+r/2,a=g*u+d*p+a/2,o=0<=(m=Math.atan2((h-p)/i,(l-u)/n)-Math.atan2(0,1))?m:2*Math.PI+m,l=0<=(m=Math.atan2((-h-p)/i,(-l-u)/n)-Math.atan2((h-p)/i,(l-u)/n))?m:2*Math.PI+m,0==s&&0<l?l-=2*Math.PI:0!=s&&l<0&&(l+=2*Math.PI),s=2*l/Math.PI,l/=s=Math.ceil(s<0?-1*s:s),h=8/3*Math.sin(l/4)*Math.sin(l/4)/Math.sin(l/2),u=d*n,d*=i,n*=g,i*=g;for(var c=Math.cos(o),p=-h*(u*(y=Math.sin(o))+i*c),m=-h*(n*y-d*c),g=[],x=0;x<s;++x){o+=l;var y,f=u*(c=Math.cos(o))-i*(y=Math.sin(o))+r,v=n*c+d*y+a,b=-h*(u*y+i*c);c=-h*(n*y-d*c),g[y=6*x]=Number(p+t),g[1+y]=Number(m+e),g[2+y]=Number(f-b+t),g[3+y]=Number(v-c+e),g[4+y]=Number(f+t),g[5+y]=Number(v+e),p=f+b,m=v+c}return g},getBoundingBox:function(t,e,n){var i,l,o,s=null;return null!=t&&null!=e&&0!=e&&(e=mxUtils.toRadians(e),s=Math.cos(e),i=Math.sin(e),n=null!=n?n:new mxPoint(t.x+t.width/2,t.y+t.height/2),l=new mxPoint(t.x,t.y),e=new mxPoint(t.x+t.width,t.y),o=new mxPoint(e.x,t.y+t.height),t=new mxPoint(t.x,o.y),l=mxUtils.getRotatedPoint(l,s,i,n),e=mxUtils.getRotatedPoint(e,s,i,n),o=mxUtils.getRotatedPoint(o,s,i,n),t=mxUtils.getRotatedPoint(t,s,i,n),(s=new mxRectangle(l.x,l.y,0,0)).add(new mxRectangle(e.x,e.y,0,0)),s.add(new mxRectangle(o.x,o.y,0,0)),s.add(new mxRectangle(t.x,t.y,0,0))),s},getRotatedPoint:function(t,e,n,i){i=null!=i?i:new mxPoint;var l=t.x-i.x;return new mxPoint(l*e-(t=t.y-i.y)*n+i.x,t*e+l*n+i.y)},getPortConstraints:function(t,e,n,i){if(null==(e=mxUtils.getValue(t.style,mxConstants.STYLE_PORT_CONSTRAINT,mxUtils.getValue(e.style,n?mxConstants.STYLE_SOURCE_PORT_CONSTRAINT:mxConstants.STYLE_TARGET_PORT_CONSTRAINT,null))))return i;if(i=e.toString(),e=mxConstants.DIRECTION_MASK_NONE,1==mxUtils.getValue(t.style,mxConstants.STYLE_PORT_CONSTRAINT_ROTATION,n=0)&&(n=mxUtils.getValue(t.style,mxConstants.STYLE_ROTATION,0)),t=0,45<n?t=135<=n?2:1:n<-45&&(t=n<=-135?2:3),0<=i.indexOf(mxConstants.DIRECTION_NORTH))switch(t){case 0:e|=mxConstants.DIRECTION_MASK_NORTH;break;case 1:e|=mxConstants.DIRECTION_MASK_EAST;break;case 2:e|=mxConstants.DIRECTION_MASK_SOUTH;break;case 3:e|=mxConstants.DIRECTION_MASK_WEST}if(0<=i.indexOf(mxConstants.DIRECTION_WEST))switch(t){case 0:e|=mxConstants.DIRECTION_MASK_WEST;break;case 1:e|=mxConstants.DIRECTION_MASK_NORTH;break;case 2:e|=mxConstants.DIRECTION_MASK_EAST;break;case 3:e|=mxConstants.DIRECTION_MASK_SOUTH}if(0<=i.indexOf(mxConstants.DIRECTION_SOUTH))switch(t){case 0:e|=mxConstants.DIRECTION_MASK_SOUTH;break;case 1:e|=mxConstants.DIRECTION_MASK_WEST;break;case 2:e|=mxConstants.DIRECTION_MASK_NORTH;break;case 3:e|=mxConstants.DIRECTION_MASK_EAST}if(0<=i.indexOf(mxConstants.DIRECTION_EAST))switch(t){case 0:e|=mxConstants.DIRECTION_MASK_EAST;break;case 1:e|=mxConstants.DIRECTION_MASK_SOUTH;break;case 2:e|=mxConstants.DIRECTION_MASK_WEST;break;case 3:e|=mxConstants.DIRECTION_MASK_NORTH}return e},reversePortConstraints:function(t){var e=(t&mxConstants.DIRECTION_MASK_WEST)<<3;return e|=(t&mxConstants.DIRECTION_MASK_NORTH)<<1,(e|=(t&mxConstants.DIRECTION_MASK_SOUTH)>>1)|(t&mxConstants.DIRECTION_MASK_EAST)>>3},findNearestSegment:function(t,e,n){var i=-1;if(0<t.absolutePoints.length)for(var l=t.absolutePoints[0],o=null,s=1;s<t.absolutePoints.length;s++){var r=t.absolutePoints[s];l=mxUtils.ptSegDistSq(l.x,l.y,r.x,r.y,e,n),(null==o||l<o)&&(o=l,i=s-1),l=r}return i},getDirectedBounds:function(t,e,n,i,l){var o=mxUtils.getValue(n,mxConstants.STYLE_DIRECTION,mxConstants.DIRECTION_EAST);return i=null!=i?i:mxUtils.getValue(n,mxConstants.STYLE_FLIPH,!1),l=null!=l?l:mxUtils.getValue(n,mxConstants.STYLE_FLIPV,!1),e.x=Math.round(Math.max(0,Math.min(t.width,e.x))),e.y=Math.round(Math.max(0,Math.min(t.height,e.y))),e.width=Math.round(Math.max(0,Math.min(t.width,e.width))),e.height=Math.round(Math.max(0,Math.min(t.height,e.height))),(l&&(o==mxConstants.DIRECTION_SOUTH||o==mxConstants.DIRECTION_NORTH)||i&&(o==mxConstants.DIRECTION_EAST||o==mxConstants.DIRECTION_WEST))&&(n=e.x,e.x=e.width,e.width=n),(i&&(o==mxConstants.DIRECTION_SOUTH||o==mxConstants.DIRECTION_NORTH)||l&&(o==mxConstants.DIRECTION_EAST||o==mxConstants.DIRECTION_WEST))&&(n=e.y,e.y=e.height,e.height=n),i=mxRectangle.fromRectangle(e),o==mxConstants.DIRECTION_SOUTH?(i.y=e.x,i.x=e.height,i.width=e.y,i.height=e.width):o==mxConstants.DIRECTION_WEST?(i.y=e.height,i.x=e.width,i.width=e.x,i.height=e.y):o==mxConstants.DIRECTION_NORTH&&(i.y=e.width,i.x=e.y,i.width=e.height,i.height=e.x),new mxRectangle(t.x+i.x,t.y+i.y,t.width-i.width-i.x,t.height-i.height-i.y)},getPerimeterPoint:function(t,e,n){for(var i=null,l=0;l<t.length-1;l++){var o,s,r=mxUtils.intersection(t[l].x,t[l].y,t[l+1].x,t[l+1].y,e.x,e.y,n.x,n.y);null!=r&&null!=(r={p:r,distSq:(s=n.y-r.y)*s+(o=n.x-r.x)*o})&&(null==i||i.distSq>r.distSq)&&(i=r)}return null!=i?i.p:null},rectangleIntersectsSegment:function(t,e,n){var i=t.y,l=i+t.height,o=(r=t.x)+t.width;t=e.x;var s=n.x;if(e.x>n.x&&(t=n.x,s=e.x),(s=o<s?o:s)<(t=t<r?r:t))return!1;var r=e.y,a=(o=n.y,n.x-e.x);return 1e-7<Math.abs(a)&&(r=(n=(n.y-e.y)/a)*t+(e=e.y-n*e.x),o=n*s+e),o<r&&(e=o,o=r,r=e),!((o=l<o?l:o)<(r=r<i?i:r))},contains:function(t,e,n){return t.x<=e&&t.x+t.width>=e&&t.y<=n&&t.y+t.height>=n},intersects:function(t,e){var n=t.width,i=t.height,l=e.width,o=e.height;if(l<=0||o<=0||n<=0||i<=0)return!1;var s=t.x,r=t.y;return t=e.x,o+=e=e.y,n+=s,i+=r,((l+=t)<t||s<l)&&(o<e||r<o)&&(n<s||t<n)&&(i<r||e<i)},intersectsHotspot:function(t,e,n,i,l,o){if(l=null!=l?l:0,o=null!=o?o:0,0<(i=null!=i?i:1)){var s=t.getCenterX(),r=t.getCenterY(),a=t.width,h=t.height,u=mxUtils.getValue(t.style,mxConstants.STYLE_STARTSIZE)*t.view.scale;return 0<u&&(mxUtils.getValue(t.style,mxConstants.STYLE_HORIZONTAL,!0)?(r=t.y+u/2,h=u):(s=t.x+u/2,a=u)),a=Math.max(l,a*i),h=Math.max(l,h*i),0<o&&(a=Math.min(a,o),h=Math.min(h,o)),i=new mxRectangle(s-a/2,r-h/2,a,h),0!=(s=mxUtils.toRadians(mxUtils.getValue(t.style,mxConstants.STYLE_ROTATION)||0))&&(l=Math.cos(-s),o=Math.sin(-s),s=new mxPoint(t.getCenterX(),t.getCenterY()),e=(t=mxUtils.getRotatedPoint(new mxPoint(e,n),l,o,s)).x,n=t.y),mxUtils.contains(i,e,n)}return!0},getOffset:function(t,e){for(var n=0,i=0,l=!1,o=t,s=document.body,r=document.documentElement;null!=o&&o!=s&&o!=r&&!l;){var a=mxUtils.getCurrentStyle(o);null!=a&&(l=l||"fixed"==a.position),o=o.parentNode}return e||l||(n+=(l=mxUtils.getDocumentScrollOrigin(t.ownerDocument)).x,i+=l.y),null!=(l=t.getBoundingClientRect())&&(n+=l.left,i+=l.top),new mxPoint(n,i)},getDocumentScrollOrigin:function(t){return new mxPoint(null!=(t=t.defaultView||t.parentWindow)&&void 0!==window.pageXOffset?window.pageXOffset:(document.documentElement||document.body.parentNode||document.body).scrollLeft,null!=t&&void 0!==window.pageYOffset?window.pageYOffset:(document.documentElement||document.body.parentNode||document.body).scrollTop)},getScrollOrigin:function(t,e,n){e=null!=e&&e,n=null==n||n;for(var i=null!=t?t.ownerDocument:document,l=i.body,o=i.documentElement,s=new mxPoint,r=!1;null!=t&&t!=l&&t!=o;){isNaN(t.scrollLeft)||isNaN(t.scrollTop)||(s.x+=t.scrollLeft,s.y+=t.scrollTop);var a=mxUtils.getCurrentStyle(t);null!=a&&(r=r||"fixed"==a.position),t=e?t.parentNode:null}return!r&&n&&(t=mxUtils.getDocumentScrollOrigin(i),s.x+=t.x,s.y+=t.y),s},convertPoint:function(t,e,n){var i=mxUtils.getScrollOrigin(t,!1);return(t=mxUtils.getOffset(t)).x-=i.x,t.y-=i.y,new mxPoint(e-t.x,n-t.y)},ltrim:function(t,e){return null!=t?t.replace(new RegExp("^["+(e||"\\s")+"]+","g"),""):null},rtrim:function(t,e){return null!=t?t.replace(new RegExp("["+(e||"\\s")+"]+$","g"),""):null},trim:function(t,e){return mxUtils.ltrim(mxUtils.rtrim(t,e),e)},isNumeric:function(t){return!isNaN(parseFloat(t))&&isFinite(t)&&("string"!=typeof t||t.toLowerCase().indexOf("0x")<0)},isInteger:function(t){return String(parseInt(t))===String(t)},mod:function(t,e){return(t%e+e)%e},intersection:function(t,e,n,i,l,o,s,r){var a=(r-o)*(n-t)-(s-l)*(i-e);return s=((s-l)*(e-o)-(r-o)*(t-l))/a,l=((n-t)*(e-o)-(i-e)*(t-l))/a,0<=s&&s<=1&&0<=l&&l<=1?new mxPoint(t+s*(n-t),e+s*(i-e)):null},ptSegDistSq:function(t,e,n,i,l,o){return n=(l-=t)*(n-=t)+(o-=e)*(i-=e)<=0?0:(t=(l=n-l)*n+(o=i-o)*i)<=0?0:t*t/(n*n+i*i),(l=l*l+o*o-n)<0?0:l},ptLineDist:function(t,e,n,i,l,o){return Math.abs((i-e)*l-(n-t)*o+n*e-i*t)/Math.sqrt((i-e)*(i-e)+(n-t)*(n-t))},relativeCcw:function(t,e,n,i,l,o){return 0==(t=(l-=t)*(i-=e)-(o-=e)*(n-=t))&&0<(t=l*n+o*i)&&(t=(l-n)*n+(o-i)*i)<0&&(t=0),t<0?-1:0<t?1:0},animateChanges:function(t,e){mxEffects.animateChanges.apply(this,arguments)},cascadeOpacity:function(t,e,n){mxEffects.cascadeOpacity.apply(this,arguments)},fadeOut:function(t,e,n,i,l,o){mxEffects.fadeOut.apply(this,arguments)},setOpacity:function(t,e){mxClient.IS_IE&&(void 0===document.documentMode||document.documentMode<9)?t.style.filter=100<=e?"":"alpha(opacity="+e+")":t.style.opacity=e/100},createImage:function(t){var e=document.createElement("img");return e.setAttribute("src",t),e.setAttribute("border","0"),e},sortCells:function(t,e){e=null==e||e;var n=new mxDictionary;return t.sort(function(t,i){var l=n.get(t);return null==l&&(l=mxCellPath.create(t).split(mxCellPath.PATH_SEPARATOR),n.put(t,l)),null==(t=n.get(i))&&(t=mxCellPath.create(i).split(mxCellPath.PATH_SEPARATOR),n.put(i,t)),0==(l=mxCellPath.compare(l,t))?0:0<l==e?1:-1}),t},getStylename:function(t){return null!=t&&(t=t.split(";")[0]).indexOf("=")<0?t:""},getStylenames:function(t){var e=[];if(null!=t){t=t.split(";");for(var n=0;n<t.length;n++)t[n].indexOf("=")<0&&e.push(t[n])}return e},indexOfStylename:function(t,e){if(null!=t&&null!=e)for(var n=t.split(";"),i=0,l=0;l<n.length;l++){if(n[l]==e)return i;i+=n[l].length+1}return-1},addStylename:function(t,e){return mxUtils.indexOfStylename(t,e)<0&&(null==t?t="":0<t.length&&";"!=t.charAt(t.length-1)&&(t+=";"),t+=e),t},removeStylename:function(t,e){var n=[];if(null!=t)for(var i=t.split(";"),l=0;l<i.length;l++)i[l]!=e&&n.push(i[l]);return n.join(";")},removeAllStylenames:function(t){var e=[];if(null!=t){t=t.split(";");for(var n=0;n<t.length;n++)0<=t[n].indexOf("=")&&e.push(t[n])}return e.join(";")},setCellStyles:function(t,e,n,i){if(null!=e&&0<e.length){t.beginUpdate();try{for(var l,o=0;o<e.length;o++)null!=e[o]&&(l=mxUtils.setStyle(t.getStyle(e[o]),n,i),t.setStyle(e[o],l))}finally{t.endUpdate()}}},setStyle:function(t,e,n){var i,l,o=null!=n&&(void 0===n.length||0<n.length);return null==t||0==t.length?o&&(t=e+"="+n+";"):t.substring(0,e.length+1)==e+"="?(i=t.indexOf(";"),t=o?e+"="+n+(i<0?";":t.substring(i)):i<0||i==t.length-1?"":t.substring(i+1)):(l=t.indexOf(";"+e+"="))<0?o&&(o=";"==t.charAt(t.length-1)?"":";",t=t+o+e+"="+n+";"):(i=t.indexOf(";",l+1),t=o?t.substring(0,l+1)+e+"="+n+(i<0?";":t.substring(i)):t.substring(0,l)+(i<0?";":t.substring(i))),t},setCellStyleFlags:function(t,e,n,i,l){if(null!=e&&0<e.length){t.beginUpdate();try{for(var o,s=0;s<e.length;s++)null!=e[s]&&(o=mxUtils.setStyleFlag(t.getStyle(e[s]),n,i,l),t.setStyle(e[s],o))}finally{t.endUpdate()}}},setStyleFlag:function(t,e,n,i){var l,o,s;return null==t||0==t.length?i||null==i?e+"="+n:e+"=0":(l=t.indexOf(e+"="))<0?(l=";"==t.charAt(t.length-1)?"":";",i||null==i?t+l+e+"="+n:t+l+e+"=0"):(s=(o=t.indexOf(";",l))<0?t.substring(l+e.length+1):t.substring(l+e.length+1,o),s=null==i?parseInt(s)^n:i?parseInt(s)|n:parseInt(s)&~n,t.substring(0,l)+e+"="+s+(0<=o?t.substring(o):""))},getAlignmentAsPoint:function(t,e){var n=-.5,i=-.5;return t==mxConstants.ALIGN_LEFT?n=0:t==mxConstants.ALIGN_RIGHT&&(n=-1),e==mxConstants.ALIGN_TOP?i=0:e==mxConstants.ALIGN_BOTTOM&&(i=-1),new mxPoint(n,i)},getSizeForString:function(t,e,n,i,l){e=null!=e?e:mxConstants.DEFAULT_FONTSIZE,n=null!=n?n:mxConstants.DEFAULT_FONTFAMILY;var o=document.createElement("div");return o.style.fontFamily=n,o.style.fontSize=Math.round(e)+"px",o.style.lineHeight=Math.round(e*mxConstants.LINE_HEIGHT)+"px",null!=l&&((l&mxConstants.FONT_BOLD)==mxConstants.FONT_BOLD&&(o.style.fontWeight="bold"),(l&mxConstants.FONT_ITALIC)==mxConstants.FONT_ITALIC&&(o.style.fontStyle="italic"),e=[],(l&mxConstants.FONT_UNDERLINE)==mxConstants.FONT_UNDERLINE&&e.push("underline"),(l&mxConstants.FONT_STRIKETHROUGH)==mxConstants.FONT_STRIKETHROUGH&&e.push("line-through"),0<e.length&&(o.style.textDecoration=e.join(" "))),o.style.position="absolute",o.style.visibility="hidden",o.style.display="inline-block",o.style.zoom="1",null!=i?(o.style.width=i+"px",o.style.whiteSpace="normal"):o.style.whiteSpace="nowrap",o.innerHTML=t,document.body.appendChild(o),t=new mxRectangle(0,0,o.offsetWidth,o.offsetHeight),document.body.removeChild(o),t},getViewXml:function(t,e,n,i,l){i=null!=i?i:0,l=null!=l?l:0,e=null!=e?e:1,null==n&&(n=[t.getModel().getRoot()]);var o=t.getView(),s=null,r=o.isEventsEnabled();o.setEventsEnabled(!1);var a=o.drawPane,h=o.overlayPane;t.dialect==mxConstants.DIALECT_SVG?(o.drawPane=document.createElementNS(mxConstants.NS_SVG,"g"),o.canvas.appendChild(o.drawPane),o.overlayPane=document.createElementNS(mxConstants.NS_SVG,"g")):(o.drawPane=o.drawPane.cloneNode(!1),o.canvas.appendChild(o.drawPane),o.overlayPane=o.overlayPane.cloneNode(!1)),o.canvas.appendChild(o.overlayPane);var u=o.getTranslate();o.translate=new mxPoint(i,l),e=new mxTemporaryCellStates(t.getView(),e,n);try{s=(new mxCodec).encode(t.getView())}finally{e.destroy(),o.translate=u,o.canvas.removeChild(o.drawPane),o.canvas.removeChild(o.overlayPane),o.drawPane=a,o.overlayPane=h,o.setEventsEnabled(r)}return s},getScaleForPageCount:function(t,e,n,i){if(t<1)return 1;var l=(n=null!=n?n:mxConstants.PAGE_FORMAT_A4_PORTRAIT).width-2*(i=null!=i?i:0);n=n.height-2*i,i=e.getGraphBounds().clone(),e=e.getView().getScale(),i.width/=e,i.height/=e,e=i.width;var o=Math.sqrt(t);for(n=o*(i=Math.sqrt(e/i.height/(l/n))),i=o/i,n<1&&t<i&&(s=i/t,i=t,n/=s),i<1&&t<n&&(s=n/t,n=t,i/=s),s=Math.ceil(n)*Math.ceil(i),o=0;t<s;){var s=Math.floor(n)/n,r=Math.floor(i)/i;if(1==s&&(s=Math.floor(n-1)/n),n*=s=(r=1==r?Math.floor(i-1)/i:r)<s?s:r,i*=s,s=Math.ceil(n)*Math.ceil(i),10<++o)break}return l*n/e*.99999},show:function(t,e,n,i,l,o){n=null!=n?n:0,i=null!=i?i:0,null==e?e=window.open().document:e.open(),9==document.documentMode&&e.writeln('\x3c!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=9"><![endif]--\x3e');var s=t.getGraphBounds(),r=Math.ceil(n-s.x),a=Math.ceil(i-s.y);if(null==l&&(l=Math.ceil(s.width+n)+Math.ceil(Math.ceil(s.x)-s.x)),null==o&&(o=Math.ceil(s.height+i)+Math.ceil(Math.ceil(s.y)-s.y)),mxClient.IS_IE||11==document.documentMode){for(i="<html><head>",s=document.getElementsByTagName("base"),n=0;n<s.length;n++)i+=s[n].outerHTML;for(i+="<style>",n=0;n<document.styleSheets.length;n++)try{i+=document.styleSheets[n].cssText}catch(t){}e.writeln((i=i+'</style></head><body style="margin:0px;"><div style="position:absolute;overflow:hidden;width:'+l+"px;height:"+o+'px;"><div style="position:relative;left:'+r+"px;top:"+a+'px;">'+t.container.innerHTML)+"</div></div></body><html>"),e.close()}else{for(e.writeln("<html><head>"),s=document.getElementsByTagName("base"),n=0;n<s.length;n++)e.writeln(mxUtils.getOuterHtml(s[n]));for(i=document.getElementsByTagName("link"),n=0;n<i.length;n++)e.writeln(mxUtils.getOuterHtml(i[n]));for(i=document.getElementsByTagName("style"),n=0;n<i.length;n++)e.writeln(mxUtils.getOuterHtml(i[n]));for(e.writeln('</head><body style="margin:0px;"></body></html>'),e.close(),(n=e.createElement("div")).position="absolute",n.overflow="hidden",n.style.width=l+"px",n.style.height=o+"px",(l=e.createElement("div")).style.position="absolute",l.style.left=r+"px",l.style.top=a+"px",o=t.container.firstChild,i=null;null!=o;)s=o.cloneNode(!0),o==t.view.drawPane.ownerSVGElement?(n.appendChild(s),i=s):l.appendChild(s),o=o.nextSibling;e.body.appendChild(n),null!=l.firstChild&&e.body.appendChild(l),null!=i&&(i.style.minWidth="",i.style.minHeight="",i.firstChild.setAttribute("transform","translate("+r+","+a+")"))}return mxUtils.removeCursors(e.body),e},printScreen:function(t){var e=window.open();t.getGraphBounds(),mxUtils.show(t,e.document),t=function(){e.focus(),e.print(),e.close()},mxClient.IS_GC?e.setTimeout(t,500):t()},popup:function(t,e){var n,i;e?((n=document.createElement("div")).style.overflow="scroll",n.style.width="636px",n.style.height="460px",(i=document.createElement("pre")).innerHTML=mxUtils.htmlEntities(t,!1).replace(/\n/g,"<br>").replace(/ /g,"&nbsp;"),n.appendChild(i),(n=new mxWindow("Popup Window",n,document.body.clientWidth/2-320,Math.max(document.body.clientHeight||0,document.documentElement.clientHeight)/2-240,640,480,!1,!0)).setClosable(!0),n.setVisible(!0)):mxClient.IS_NS?((n=window.open()).document.writeln("<pre>"+mxUtils.htmlEntities(t)+"</pre"),n.document.close()):((i=(n=window.open()).document.createElement("pre")).innerHTML=mxUtils.htmlEntities(t,!1).replace(/\n/g,"<br>").replace(/ /g,"&nbsp;"),n.document.body.appendChild(i))},alert:function(t){alert(t)},prompt:function(t,e){return prompt(t,null!=e?e:"")},confirm:function(t){return confirm(t)},error:function(t,e,n,i){var l=document.createElement("div");l.style.padding="20px";var o=document.createElement("img");o.setAttribute("src",i||mxUtils.errorImage),o.setAttribute("valign","bottom"),o.style.verticalAlign="middle",l.appendChild(o),l.appendChild(document.createTextNode("\xa0")),l.appendChild(document.createTextNode("\xa0")),l.appendChild(document.createTextNode("\xa0")),mxUtils.write(l,t),t=document.body.clientWidth,i=document.body.clientHeight||document.documentElement.clientHeight;var s=new mxWindow(mxResources.get(mxUtils.errorResource)||mxUtils.errorResource,l,(t-e)/2,i/4,e,null,!1,!0);return n&&(mxUtils.br(l),e=document.createElement("p"),n=document.createElement("button"),mxClient.IS_IE?n.style.cssText="float:right":n.setAttribute("style","float:right"),mxEvent.addListener(n,"click",function(t){s.destroy()}),mxUtils.write(n,mxResources.get(mxUtils.closeResource)||mxUtils.closeResource),e.appendChild(n),l.appendChild(e),mxUtils.br(l),s.setClosable(!0)),s.setVisible(!0),s},makeDraggable:function(t,e,n,i,l,o,s,r,a,h){return(t=new mxDragSource(t,n)).dragOffset=new mxPoint(null!=l?l:0,null!=o?o:mxConstants.TOOLTIP_VERTICAL_OFFSET),t.autoscroll=s,t.setGuidesEnabled(!1),null!=a&&(t.highlightDropTargets=a),null!=h&&(t.getDropTarget=h),t.getGraphForEvent=function(t){return"function"==typeof e?e(t):e},null!=i&&(t.createDragElement=function(){return i.cloneNode(!0)},r&&(t.createPreviewElement=function(t){var e=i.cloneNode(!0),n=parseInt(e.style.width),l=parseInt(e.style.height);return e.style.width=Math.round(n*t.view.scale)+"px",e.style.height=Math.round(l*t.view.scale)+"px",e})),t}},mxConstants={DEFAULT_HOTSPOT:.3,MIN_HOTSPOT_SIZE:8,MAX_HOTSPOT_SIZE:0,RENDERING_HINT_EXACT:"exact",RENDERING_HINT_FASTER:"faster",RENDERING_HINT_FASTEST:"fastest",DIALECT_SVG:"svg",DIALECT_MIXEDHTML:"mixedHtml",DIALECT_PREFERHTML:"preferHtml",DIALECT_STRICTHTML:"strictHtml",NS_SVG:"http://www.w3.org/2000/svg",NS_XHTML:"http://www.w3.org/1999/xhtml",NS_XLINK:"http://www.w3.org/1999/xlink",SHADOWCOLOR:"gray",VML_SHADOWCOLOR:"gray",SHADOW_OFFSET_X:2,SHADOW_OFFSET_Y:3,SHADOW_OPACITY:1,NODETYPE_ELEMENT:1,NODETYPE_ATTRIBUTE:2,NODETYPE_TEXT:3,NODETYPE_CDATA:4,NODETYPE_ENTITY_REFERENCE:5,NODETYPE_ENTITY:6,NODETYPE_PROCESSING_INSTRUCTION:7,NODETYPE_COMMENT:8,NODETYPE_DOCUMENT:9,NODETYPE_DOCUMENTTYPE:10,NODETYPE_DOCUMENT_FRAGMENT:11,NODETYPE_NOTATION:12,TOOLTIP_VERTICAL_OFFSET:16,DEFAULT_VALID_COLOR:"#00FF00",DEFAULT_INVALID_COLOR:"#FF0000",OUTLINE_HIGHLIGHT_COLOR:"#00FF00",OUTLINE_HIGHLIGHT_STROKEWIDTH:5,HIGHLIGHT_STROKEWIDTH:3,HIGHLIGHT_SIZE:2,HIGHLIGHT_OPACITY:100,CURSOR_MOVABLE_VERTEX:"move",CURSOR_MOVABLE_EDGE:"move",CURSOR_LABEL_HANDLE:"default",CURSOR_TERMINAL_HANDLE:"pointer",CURSOR_BEND_HANDLE:"crosshair",CURSOR_VIRTUAL_BEND_HANDLE:"crosshair",CURSOR_CONNECT:"pointer",HIGHLIGHT_COLOR:"#00FF00",CONNECT_TARGET_COLOR:"#0000FF",INVALID_CONNECT_TARGET_COLOR:"#FF0000",DROP_TARGET_COLOR:"#0000FF",VALID_COLOR:"#00FF00",INVALID_COLOR:"#FF0000",EDGE_SELECTION_COLOR:"#00FF00",VERTEX_SELECTION_COLOR:"#00FF00",VERTEX_SELECTION_STROKEWIDTH:1,EDGE_SELECTION_STROKEWIDTH:1,VERTEX_SELECTION_DASHED:!0,EDGE_SELECTION_DASHED:!0,GUIDE_COLOR:"#FF0000",GUIDE_STROKEWIDTH:1,OUTLINE_COLOR:"#0099FF",OUTLINE_STROKEWIDTH:mxClient.IS_IE?2:3,HANDLE_SIZE:6,LABEL_HANDLE_SIZE:4,HANDLE_FILLCOLOR:"#00FF00",HANDLE_STROKECOLOR:"black",LABEL_HANDLE_FILLCOLOR:"yellow",CONNECT_HANDLE_FILLCOLOR:"#0000FF",LOCKED_HANDLE_FILLCOLOR:"#FF0000",OUTLINE_HANDLE_FILLCOLOR:"#00FFFF",OUTLINE_HANDLE_STROKECOLOR:"#0033FF",DEFAULT_FONTFAMILY:"Arial,Helvetica",DEFAULT_FONTSIZE:11,DEFAULT_TEXT_DIRECTION:"",LINE_HEIGHT:1.2,WORD_WRAP:"normal",ABSOLUTE_LINE_HEIGHT:!1,DEFAULT_FONTSTYLE:0,DEFAULT_STARTSIZE:40,DEFAULT_MARKERSIZE:6,DEFAULT_IMAGESIZE:24,ENTITY_SEGMENT:30,RECTANGLE_ROUNDING_FACTOR:.15,LINE_ARCSIZE:20,ARROW_SPACING:0,ARROW_WIDTH:30,ARROW_SIZE:30,PAGE_FORMAT_A4_PORTRAIT:new mxRectangle(0,0,827,1169),PAGE_FORMAT_A4_LANDSCAPE:new mxRectangle(0,0,1169,827),PAGE_FORMAT_LETTER_PORTRAIT:new mxRectangle(0,0,850,1100),PAGE_FORMAT_LETTER_LANDSCAPE:new mxRectangle(0,0,1100,850),NONE:"none",STYLE_PERIMETER:"perimeter",STYLE_SOURCE_PORT:"sourcePort",STYLE_TARGET_PORT:"targetPort",STYLE_PORT_CONSTRAINT:"portConstraint",STYLE_PORT_CONSTRAINT_ROTATION:"portConstraintRotation",STYLE_SOURCE_PORT_CONSTRAINT:"sourcePortConstraint",STYLE_TARGET_PORT_CONSTRAINT:"targetPortConstraint",STYLE_OPACITY:"opacity",STYLE_FILL_OPACITY:"fillOpacity",STYLE_STROKE_OPACITY:"strokeOpacity",STYLE_TEXT_OPACITY:"textOpacity",STYLE_TEXT_DIRECTION:"textDirection",STYLE_OVERFLOW:"overflow",STYLE_BLOCK_SPACING:"blockSpacing",STYLE_ORTHOGONAL:"orthogonal",STYLE_EXIT_X:"exitX",STYLE_EXIT_Y:"exitY",STYLE_EXIT_DX:"exitDx",STYLE_EXIT_DY:"exitDy",STYLE_EXIT_PERIMETER:"exitPerimeter",STYLE_ENTRY_X:"entryX",STYLE_ENTRY_Y:"entryY",STYLE_ENTRY_DX:"entryDx",STYLE_ENTRY_DY:"entryDy",STYLE_ENTRY_PERIMETER:"entryPerimeter",STYLE_WHITE_SPACE:"whiteSpace",STYLE_ROTATION:"rotation",STYLE_FILLCOLOR:"fillColor",STYLE_POINTER_EVENTS:"pointerEvents",STYLE_SWIMLANE_FILLCOLOR:"swimlaneFillColor",STYLE_MARGIN:"margin",STYLE_GRADIENTCOLOR:"gradientColor",STYLE_GRADIENT_DIRECTION:"gradientDirection",STYLE_STROKECOLOR:"strokeColor",STYLE_SEPARATORCOLOR:"separatorColor",STYLE_STROKEWIDTH:"strokeWidth",STYLE_ALIGN:"align",STYLE_VERTICAL_ALIGN:"verticalAlign",STYLE_LABEL_WIDTH:"labelWidth",STYLE_LABEL_POSITION:"labelPosition",STYLE_VERTICAL_LABEL_POSITION:"verticalLabelPosition",STYLE_IMAGE_ASPECT:"imageAspect",STYLE_IMAGE_ALIGN:"imageAlign",STYLE_IMAGE_VERTICAL_ALIGN:"imageVerticalAlign",STYLE_GLASS:"glass",STYLE_IMAGE:"image",STYLE_IMAGE_WIDTH:"imageWidth",STYLE_IMAGE_HEIGHT:"imageHeight",STYLE_IMAGE_BACKGROUND:"imageBackground",STYLE_IMAGE_BORDER:"imageBorder",STYLE_FLIPH:"flipH",STYLE_FLIPV:"flipV",STYLE_NOLABEL:"noLabel",STYLE_NOEDGESTYLE:"noEdgeStyle",STYLE_LABEL_BACKGROUNDCOLOR:"labelBackgroundColor",STYLE_LABEL_BORDERCOLOR:"labelBorderColor",STYLE_LABEL_PADDING:"labelPadding",STYLE_INDICATOR_SHAPE:"indicatorShape",STYLE_INDICATOR_IMAGE:"indicatorImage",STYLE_INDICATOR_COLOR:"indicatorColor",STYLE_INDICATOR_STROKECOLOR:"indicatorStrokeColor",STYLE_INDICATOR_GRADIENTCOLOR:"indicatorGradientColor",STYLE_INDICATOR_SPACING:"indicatorSpacing",STYLE_INDICATOR_WIDTH:"indicatorWidth",STYLE_INDICATOR_HEIGHT:"indicatorHeight",STYLE_INDICATOR_DIRECTION:"indicatorDirection",STYLE_SHADOW:"shadow",STYLE_SEGMENT:"segment",STYLE_ENDARROW:"endArrow",STYLE_STARTARROW:"startArrow",STYLE_ENDSIZE:"endSize",STYLE_STARTSIZE:"startSize",STYLE_SWIMLANE_LINE:"swimlaneLine",STYLE_ENDFILL:"endFill",STYLE_STARTFILL:"startFill",STYLE_DASHED:"dashed",STYLE_DASH_PATTERN:"dashPattern",STYLE_FIX_DASH:"fixDash",STYLE_ROUNDED:"rounded",STYLE_CURVED:"curved",STYLE_ARCSIZE:"arcSize",STYLE_ABSOLUTE_ARCSIZE:"absoluteArcSize",STYLE_SOURCE_PERIMETER_SPACING:"sourcePerimeterSpacing",STYLE_TARGET_PERIMETER_SPACING:"targetPerimeterSpacing",STYLE_PERIMETER_SPACING:"perimeterSpacing",STYLE_SPACING:"spacing",STYLE_SPACING_TOP:"spacingTop",STYLE_SPACING_LEFT:"spacingLeft",STYLE_SPACING_BOTTOM:"spacingBottom",STYLE_SPACING_RIGHT:"spacingRight",STYLE_HORIZONTAL:"horizontal",STYLE_DIRECTION:"direction",STYLE_ANCHOR_POINT_DIRECTION:"anchorPointDirection",STYLE_ELBOW:"elbow",STYLE_FONTCOLOR:"fontColor",STYLE_FONTFAMILY:"fontFamily",STYLE_FONTSIZE:"fontSize",STYLE_FONTSTYLE:"fontStyle",STYLE_ASPECT:"aspect",STYLE_AUTOSIZE:"autosize",STYLE_FOLDABLE:"foldable",STYLE_EDITABLE:"editable",STYLE_BACKGROUND_OUTLINE:"backgroundOutline",STYLE_BENDABLE:"bendable",STYLE_MOVABLE:"movable",STYLE_RESIZABLE:"resizable",STYLE_RESIZE_WIDTH:"resizeWidth",STYLE_RESIZE_HEIGHT:"resizeHeight",STYLE_ROTATABLE:"rotatable",STYLE_CLONEABLE:"cloneable",STYLE_DELETABLE:"deletable",STYLE_SHAPE:"shape",STYLE_EDGE:"edgeStyle",STYLE_JETTY_SIZE:"jettySize",STYLE_SOURCE_JETTY_SIZE:"sourceJettySize",STYLE_TARGET_JETTY_SIZE:"targetJettySize",STYLE_LOOP:"loopStyle",STYLE_ORTHOGONAL_LOOP:"orthogonalLoop",STYLE_ROUTING_CENTER_X:"routingCenterX",STYLE_ROUTING_CENTER_Y:"routingCenterY",FONT_BOLD:1,FONT_ITALIC:2,FONT_UNDERLINE:4,FONT_STRIKETHROUGH:8,SHAPE_RECTANGLE:"rectangle",SHAPE_ELLIPSE:"ellipse",SHAPE_DOUBLE_ELLIPSE:"doubleEllipse",SHAPE_RHOMBUS:"rhombus",SHAPE_LINE:"line",SHAPE_IMAGE:"image",SHAPE_ARROW:"arrow",SHAPE_ARROW_CONNECTOR:"arrowConnector",SHAPE_LABEL:"label",SHAPE_CYLINDER:"cylinder",SHAPE_SWIMLANE:"swimlane",SHAPE_CONNECTOR:"connector",SHAPE_ACTOR:"actor",SHAPE_CLOUD:"cloud",SHAPE_TRIANGLE:"triangle",SHAPE_HEXAGON:"hexagon",ARROW_CLASSIC:"classic",ARROW_CLASSIC_THIN:"classicThin",ARROW_BLOCK:"block",ARROW_BLOCK_THIN:"blockThin",ARROW_OPEN:"open",ARROW_OPEN_THIN:"openThin",ARROW_OVAL:"oval",ARROW_DIAMOND:"diamond",ARROW_DIAMOND_THIN:"diamondThin",ALIGN_LEFT:"left",ALIGN_CENTER:"center",ALIGN_RIGHT:"right",ALIGN_TOP:"top",ALIGN_MIDDLE:"middle",ALIGN_BOTTOM:"bottom",DIRECTION_NORTH:"north",DIRECTION_SOUTH:"south",DIRECTION_EAST:"east",DIRECTION_WEST:"west",TEXT_DIRECTION_DEFAULT:"",TEXT_DIRECTION_AUTO:"auto",TEXT_DIRECTION_LTR:"ltr",TEXT_DIRECTION_RTL:"rtl",DIRECTION_MASK_NONE:0,DIRECTION_MASK_WEST:1,DIRECTION_MASK_NORTH:2,DIRECTION_MASK_SOUTH:4,DIRECTION_MASK_EAST:8,DIRECTION_MASK_ALL:15,ELBOW_VERTICAL:"vertical",ELBOW_HORIZONTAL:"horizontal",EDGESTYLE_ELBOW:"elbowEdgeStyle",EDGESTYLE_ENTITY_RELATION:"entityRelationEdgeStyle",EDGESTYLE_LOOP:"loopEdgeStyle",EDGESTYLE_SIDETOSIDE:"sideToSideEdgeStyle",EDGESTYLE_TOPTOBOTTOM:"topToBottomEdgeStyle",EDGESTYLE_ORTHOGONAL:"orthogonalEdgeStyle",EDGESTYLE_SEGMENT:"segmentEdgeStyle",PERIMETER_ELLIPSE:"ellipsePerimeter",PERIMETER_RECTANGLE:"rectanglePerimeter",PERIMETER_RHOMBUS:"rhombusPerimeter",PERIMETER_HEXAGON:"hexagonPerimeter",PERIMETER_TRIANGLE:"trianglePerimeter"};function mxEventObject(t){this.name=t,this.properties=[];for(var e=1;e<arguments.length;e+=2)null!=arguments[e+1]&&(this.properties[arguments[e]]=arguments[e+1])}function mxMouseEvent(t,e){this.evt=t,this.sourceState=this.state=e}function mxEventSource(t){this.setEventSource(t)}mxEventObject.prototype.name=null,mxEventObject.prototype.properties=null,mxEventObject.prototype.consumed=!1,mxEventObject.prototype.getName=function(){return this.name},mxEventObject.prototype.getProperties=function(){return this.properties},mxEventObject.prototype.getProperty=function(t){return this.properties[t]},mxEventObject.prototype.isConsumed=function(){return this.consumed},mxEventObject.prototype.consume=function(){this.consumed=!0},mxMouseEvent.prototype.consumed=!1,mxMouseEvent.prototype.evt=null,mxMouseEvent.prototype.graphX=null,mxMouseEvent.prototype.graphY=null,mxMouseEvent.prototype.state=null,mxMouseEvent.prototype.sourceState=null,mxMouseEvent.prototype.getEvent=function(){return this.evt},mxMouseEvent.prototype.getSource=function(){return mxEvent.getSource(this.evt)},mxMouseEvent.prototype.isSource=function(t){return null!=t&&mxUtils.isAncestorNode(t.node,this.getSource())},mxMouseEvent.prototype.getX=function(){return mxEvent.getClientX(this.getEvent())},mxMouseEvent.prototype.getY=function(){return mxEvent.getClientY(this.getEvent())},mxMouseEvent.prototype.getGraphX=function(){return this.graphX},mxMouseEvent.prototype.getGraphY=function(){return this.graphY},mxMouseEvent.prototype.getState=function(){return this.state},mxMouseEvent.prototype.getCell=function(){var t=this.getState();return null!=t?t.cell:null},mxMouseEvent.prototype.isPopupTrigger=function(){return mxEvent.isPopupTrigger(this.getEvent())},mxMouseEvent.prototype.isConsumed=function(){return this.consumed},mxMouseEvent.prototype.consume=function(t){(t=null!=t?t:null!=this.evt.touches||mxEvent.isMouseEvent(this.evt))&&this.evt.preventDefault&&this.evt.preventDefault(),mxClient.IS_IE&&(this.evt.returnValue=!0),this.consumed=!0},mxEventSource.prototype.eventListeners=null,mxEventSource.prototype.eventsEnabled=!0,mxEventSource.prototype.eventSource=null,mxEventSource.prototype.isEventsEnabled=function(){return this.eventsEnabled},mxEventSource.prototype.setEventsEnabled=function(t){this.eventsEnabled=t},mxEventSource.prototype.getEventSource=function(){return this.eventSource},mxEventSource.prototype.setEventSource=function(t){this.eventSource=t},mxEventSource.prototype.addListener=function(t,e){null==this.eventListeners&&(this.eventListeners=[]),this.eventListeners.push(t),this.eventListeners.push(e)},mxEventSource.prototype.removeListener=function(t){if(null!=this.eventListeners)for(var e=0;e<this.eventListeners.length;)this.eventListeners[e+1]==t?this.eventListeners.splice(e,2):e+=2},mxEventSource.prototype.fireEvent=function(t,e){if(null!=this.eventListeners&&this.isEventsEnabled()){null==t&&(t=new mxEventObject);for(var n=[e=null==(e=null==e?this.getEventSource():e)?this:e,t],i=0;i<this.eventListeners.length;i+=2){var l=this.eventListeners[i];null!=l&&l!=t.getName()||this.eventListeners[i+1].apply(this,n)}}};var mxEvent={addListener:function(){if(window.addEventListener){var e=!1;try{document.addEventListener("test",function(){},Object.defineProperty&&Object.defineProperty({},"passive",{get:function(){e=!0}}))}catch(t){}return function(t,n,i){t.addEventListener(n,i,!!e&&{passive:!1}),null==t.mxListenerList&&(t.mxListenerList=[]),t.mxListenerList.push({name:n,f:i})}}return function(t,e,n){t.attachEvent("on"+e,n),null==t.mxListenerList&&(t.mxListenerList=[]),t.mxListenerList.push({name:e,f:n})}}(),removeListener:function(){function t(t,e,n){if(null!=t.mxListenerList){e=t.mxListenerList.length;for(var i=0;i<e;i++)if(t.mxListenerList[i].f==n){t.mxListenerList.splice(i,1);break}0==t.mxListenerList.length&&(t.mxListenerList=null)}}return window.removeEventListener?function(e,n,i){e.removeEventListener(n,i,!1),t(e,0,i)}:function(e,n,i){e.detachEvent("on"+n,i),t(e,0,i)}}(),removeAllListeners:function(t){var e=t.mxListenerList;if(null!=e)for(;0<e.length;){var n=e[0];mxEvent.removeListener(t,n.name,n.f)}},addGestureListeners:function(t,e,n,i){null!=e&&mxEvent.addListener(t,mxClient.IS_POINTER?"pointerdown":"mousedown",e),null!=n&&mxEvent.addListener(t,mxClient.IS_POINTER?"pointermove":"mousemove",n),null!=i&&mxEvent.addListener(t,mxClient.IS_POINTER?"pointerup":"mouseup",i),!mxClient.IS_POINTER&&mxClient.IS_TOUCH&&(null!=e&&mxEvent.addListener(t,"touchstart",e),null!=n&&mxEvent.addListener(t,"touchmove",n),null!=i&&mxEvent.addListener(t,"touchend",i))},removeGestureListeners:function(t,e,n,i){null!=e&&mxEvent.removeListener(t,mxClient.IS_POINTER?"pointerdown":"mousedown",e),null!=n&&mxEvent.removeListener(t,mxClient.IS_POINTER?"pointermove":"mousemove",n),null!=i&&mxEvent.removeListener(t,mxClient.IS_POINTER?"pointerup":"mouseup",i),!mxClient.IS_POINTER&&mxClient.IS_TOUCH&&(null!=e&&mxEvent.removeListener(t,"touchstart",e),null!=n&&mxEvent.removeListener(t,"touchmove",n),null!=i&&mxEvent.removeListener(t,"touchend",i))},redirectMouseEvents:function(t,e,n,i,l,o,s){function r(t){return"function"==typeof n?n(t):n}mxEvent.addGestureListeners(t,function(t){null!=i?i(t):mxEvent.isConsumed(t)||e.fireMouseEvent(mxEvent.MOUSE_DOWN,new mxMouseEvent(t,r(t)))},function(t){null!=l?l(t):mxEvent.isConsumed(t)||e.fireMouseEvent(mxEvent.MOUSE_MOVE,new mxMouseEvent(t,r(t)))},function(t){null!=o?o(t):mxEvent.isConsumed(t)||e.fireMouseEvent(mxEvent.MOUSE_UP,new mxMouseEvent(t,r(t)))}),mxEvent.addListener(t,"dblclick",function(t){var n;null!=s?s(t):mxEvent.isConsumed(t)||(n=r(t),e.dblClick(t,null!=n?n.cell:null))})},release:function(t){try{if(null!=t){mxEvent.removeAllListeners(t);var e=t.childNodes;if(null!=e){var n=e.length;for(t=0;t<n;t+=1)mxEvent.release(e[t])}}}catch(t){}},addMouseWheelListener:function(t,e){var n,i,l,o;null!=t&&(e=null!=e?e:window,mxClient.IS_SF&&!mxClient.IS_TOUCH?(n=1,mxEvent.addListener(e,"gesturestart",function(t){mxEvent.consume(t),n=1}),mxEvent.addListener(e,"gesturechange",function(e){mxEvent.consume(e);var i=n-e.scale;.2<Math.abs(i)&&(t(e,i<0,!0),n=e.scale)}),mxEvent.addListener(e,"gestureend",function(t){mxEvent.consume(t)})):(i=[],o=l=0,mxEvent.addGestureListeners(e,mxUtils.bind(this,function(t){mxEvent.isMouseEvent(t)||null==t.pointerId||i.push(t)}),mxUtils.bind(this,function(e){if(!mxEvent.isMouseEvent(e)&&2==i.length){for(var n=0;n<i.length;n++)if(e.pointerId==i[n].pointerId){i[n]=e;break}e=Math.abs(i[0].clientX-i[1].clientX),n=Math.abs(i[0].clientY-i[1].clientY);var s=Math.abs(e-l),r=Math.abs(n-o);(s>mxEvent.PINCH_THRESHOLD||r>mxEvent.PINCH_THRESHOLD)&&(t(i[0],r<s?l<e:o<n,!0,i[0].clientX+(i[1].clientX-i[0].clientX)/2,i[0].clientY+(i[1].clientY-i[0].clientY)/2),l=e,o=n)}}),mxUtils.bind(this,function(t){i=[],o=l=0}))),mxEvent.addListener(e,"wheel",function(e){(e=null==e?window.event:e).ctrlKey&&e.preventDefault(),(.5<Math.abs(e.deltaX)||.5<Math.abs(e.deltaY))&&t(e,0==e.deltaY?0<-e.deltaX:0<-e.deltaY)}))},disableContextMenu:function(t){mxEvent.addListener(t,"contextmenu",function(t){return t.preventDefault&&t.preventDefault(),!1})},getSource:function(t){return null!=t.srcElement?t.srcElement:t.target},isConsumed:function(t){return null!=t.isConsumed&&t.isConsumed},isTouchEvent:function(t){return null!=t.pointerType?"touch"==t.pointerType||t.pointerType===t.MSPOINTER_TYPE_TOUCH:null!=t.mozInputSource?5==t.mozInputSource:0==t.type.indexOf("touch")},isPenEvent:function(t){return null!=t.pointerType?"pen"==t.pointerType||t.pointerType===t.MSPOINTER_TYPE_PEN:null!=t.mozInputSource?2==t.mozInputSource:0==t.type.indexOf("pen")},isMultiTouchEvent:function(t){return null!=t.type&&0==t.type.indexOf("touch")&&null!=t.touches&&1<t.touches.length},isMouseEvent:function(t){return null!=t.pointerType?"mouse"==t.pointerType||t.pointerType===t.MSPOINTER_TYPE_MOUSE:null!=t.mozInputSource?1==t.mozInputSource:0==t.type.indexOf("mouse")},isLeftMouseButton:function(t){return"buttons"in t&&("mousedown"==t.type||"mousemove"==t.type)?1==t.buttons:"which"in t?1===t.which:1===t.button},isMiddleMouseButton:function(t){return"which"in t?2===t.which:4===t.button},isRightMouseButton:function(t){return"which"in t?3===t.which:2===t.button},isPopupTrigger:function(t){return mxEvent.isRightMouseButton(t)||mxClient.IS_MAC&&mxEvent.isControlDown(t)&&!mxEvent.isShiftDown(t)&&!mxEvent.isMetaDown(t)&&!mxEvent.isAltDown(t)},isShiftDown:function(t){return null!=t&&t.shiftKey},isAltDown:function(t){return null!=t&&t.altKey},isControlDown:function(t){return null!=t&&t.ctrlKey},isMetaDown:function(t){return null!=t&&t.metaKey},getMainEvent:function(t){return"touchstart"!=t.type&&"touchmove"!=t.type||null==t.touches||null==t.touches[0]?"touchend"==t.type&&null!=t.changedTouches&&null!=t.changedTouches[0]&&(t=t.changedTouches[0]):t=t.touches[0],t},getClientX:function(t){return mxEvent.getMainEvent(t).clientX},getClientY:function(t){return mxEvent.getMainEvent(t).clientY},consume:function(t,e,n){n=null==n||n,null!=e&&!e||(t.preventDefault?(n&&t.stopPropagation(),t.preventDefault()):n&&(t.cancelBubble=!0)),t.isConsumed=!0,t.preventDefault||(t.returnValue=!1)},LABEL_HANDLE:-1,ROTATION_HANDLE:-2,CUSTOM_HANDLE:-100,VIRTUAL_HANDLE:-1e5,MOUSE_DOWN:"mouseDown",MOUSE_MOVE:"mouseMove",MOUSE_UP:"mouseUp",ACTIVATE:"activate",RESIZE_START:"resizeStart",RESIZE:"resize",RESIZE_END:"resizeEnd",MOVE_START:"moveStart",MOVE:"move",MOVE_END:"moveEnd",PAN_START:"panStart",PAN:"pan",PAN_END:"panEnd",MINIMIZE:"minimize",NORMALIZE:"normalize",MAXIMIZE:"maximize",HIDE:"hide",SHOW:"show",CLOSE:"close",DESTROY:"destroy",REFRESH:"refresh",SIZE:"size",SELECT:"select",FIRED:"fired",FIRE_MOUSE_EVENT:"fireMouseEvent",GESTURE:"gesture",TAP_AND_HOLD:"tapAndHold",GET:"get",RECEIVE:"receive",CONNECT:"connect",DISCONNECT:"disconnect",SUSPEND:"suspend",RESUME:"resume",MARK:"mark",ROOT:"root",POST:"post",OPEN:"open",SAVE:"save",BEFORE_ADD_VERTEX:"beforeAddVertex",ADD_VERTEX:"addVertex",AFTER_ADD_VERTEX:"afterAddVertex",DONE:"done",EXECUTE:"execute",EXECUTED:"executed",BEGIN_UPDATE:"beginUpdate",START_EDIT:"startEdit",END_UPDATE:"endUpdate",END_EDIT:"endEdit",BEFORE_UNDO:"beforeUndo",UNDO:"undo",REDO:"redo",CHANGE:"change",NOTIFY:"notify",LAYOUT_CELLS:"layoutCells",CLICK:"click",SCALE:"scale",TRANSLATE:"translate",SCALE_AND_TRANSLATE:"scaleAndTranslate",UP:"up",DOWN:"down",ADD:"add",REMOVE:"remove",CLEAR:"clear",ADD_CELLS:"addCells",CELLS_ADDED:"cellsAdded",MOVE_CELLS:"moveCells",CELLS_MOVED:"cellsMoved",RESIZE_CELLS:"resizeCells",CELLS_RESIZED:"cellsResized",TOGGLE_CELLS:"toggleCells",CELLS_TOGGLED:"cellsToggled",ORDER_CELLS:"orderCells",CELLS_ORDERED:"cellsOrdered",REMOVE_CELLS:"removeCells",CELLS_REMOVED:"cellsRemoved",GROUP_CELLS:"groupCells",UNGROUP_CELLS:"ungroupCells",REMOVE_CELLS_FROM_PARENT:"removeCellsFromParent",FOLD_CELLS:"foldCells",CELLS_FOLDED:"cellsFolded",ALIGN_CELLS:"alignCells",LABEL_CHANGED:"labelChanged",CONNECT_CELL:"connectCell",CELL_CONNECTED:"cellConnected",SPLIT_EDGE:"splitEdge",FLIP_EDGE:"flipEdge",START_EDITING:"startEditing",EDITING_STARTED:"editingStarted",EDITING_STOPPED:"editingStopped",ADD_OVERLAY:"addOverlay",REMOVE_OVERLAY:"removeOverlay",UPDATE_CELL_SIZE:"updateCellSize",ESCAPE:"escape",DOUBLE_CLICK:"doubleClick",START:"start",RESET:"reset",PINCH_THRESHOLD:10};function mxXmlRequest(t,e,n,i,l,o){this.url=t,this.params=e,this.method=n||"POST",this.async=null==i||i,this.username=l,this.password=o}mxXmlRequest.prototype.url=null,mxXmlRequest.prototype.params=null,mxXmlRequest.prototype.method=null,mxXmlRequest.prototype.async=null,mxXmlRequest.prototype.binary=!1,mxXmlRequest.prototype.withCredentials=!1,mxXmlRequest.prototype.username=null,mxXmlRequest.prototype.password=null,mxXmlRequest.prototype.request=null,mxXmlRequest.prototype.decodeSimulateValues=!1,mxXmlRequest.prototype.isBinary=function(){return this.binary},mxXmlRequest.prototype.setBinary=function(t){this.binary=t},mxXmlRequest.prototype.getText=function(){return this.request.responseText},mxXmlRequest.prototype.isReady=function(){return 4==this.request.readyState},mxXmlRequest.prototype.getDocumentElement=function(){var t=this.getXml();return null!=t?t.documentElement:null},mxXmlRequest.prototype.getXml=function(){var t=this.request.responseXML;return 9<=document.documentMode||null==t||null==t.documentElement?mxUtils.parseXml(this.request.responseText):t},mxXmlRequest.prototype.getStatus=function(){return null!=this.request?this.request.status:null},mxXmlRequest.prototype.create=window.XMLHttpRequest?function(){var t=new XMLHttpRequest;return this.isBinary()&&t.overrideMimeType&&t.overrideMimeType("text/plain; charset=x-user-defined"),t}:"undefined"!=typeof ActiveXObject?function(){return new ActiveXObject("Microsoft.XMLHTTP")}:void 0,mxXmlRequest.prototype.send=function(t,e,n,i){this.request=this.create(),null!=this.request&&(null!=t&&(this.request.onreadystatechange=mxUtils.bind(this,function(){this.isReady()&&(t(this),this.request.onreadystatechange=null)})),this.request.open(this.method,this.url,this.async,this.username,this.password),this.setRequestHeaders(this.request,this.params),window.XMLHttpRequest&&this.withCredentials&&(this.request.withCredentials="true"),(null==document.documentMode||9<document.documentMode)&&window.XMLHttpRequest&&null!=n&&null!=i&&(this.request.timeout=n,this.request.ontimeout=i),this.request.send(this.params))},mxXmlRequest.prototype.setRequestHeaders=function(t,e){null!=e&&t.setRequestHeader("Content-Type","application/x-www-form-urlencoded")},mxXmlRequest.prototype.simulate=function(t,e){var n=null;(t=t||document)==document&&(n=window.onbeforeunload,window.onbeforeunload=null);var i=t.createElement("form");i.setAttribute("method",this.method),i.setAttribute("action",this.url),null!=e&&i.setAttribute("target",e),i.style.display="none",i.style.visibility="hidden";for(var l=0<this.params.indexOf("&")?this.params.split("&"):this.params.split(),o=0;o<l.length;o++){var s,r,a=l[o].indexOf("=");0<a&&(s=l[o].substring(0,a),a=l[o].substring(a+1),this.decodeSimulateValues&&(a=decodeURIComponent(a)),(r=t.createElement("textarea")).setAttribute("wrap","off"),r.setAttribute("name",s),mxUtils.write(r,a),i.appendChild(r))}t.body.appendChild(i),i.submit(),null!=i.parentNode&&i.parentNode.removeChild(i),null!=n&&(window.onbeforeunload=n)};var mxClipboard={STEPSIZE:10,insertCount:1,cells:null,setCells:function(t){mxClipboard.cells=t},getCells:function(){return mxClipboard.cells},isEmpty:function(){return null==mxClipboard.getCells()},cut:function(t,e){return e=mxClipboard.copy(t,e),mxClipboard.insertCount=0,mxClipboard.removeCells(t,e),e},removeCells:function(t,e){t.removeCells(e)},copy:function(t,e){return e=e||t.getSelectionCells(),e=t.getExportableCells(t.model.getTopmostCells(e)),mxClipboard.insertCount=1,mxClipboard.setCells(t.cloneCells(e)),e},paste:function(t){var e,n,i=null;return mxClipboard.isEmpty()||(i=t.getImportableCells(mxClipboard.getCells()),e=mxClipboard.insertCount*mxClipboard.STEPSIZE,n=t.getDefaultParent(),i=t.importCells(i,e,e,n),mxClipboard.insertCount++,t.setSelectionCells(i)),i}};function mxWindow(t,e,n,i,l,o,s,r,a,h){null!=e&&(s=null==s||s,this.content=e,this.init(n,i,l,o,h),this.installMaximizeHandler(),this.installMinimizeHandler(),this.installCloseHandler(),this.setMinimizable(s),this.setTitle(t),null!=r&&!r||this.installMoveHandler(),null!=a&&null!=a.parentNode?a.parentNode.replaceChild(this.div,a):document.body.appendChild(this.div))}function mxForm(t){this.table=document.createElement("table"),this.table.className=t,this.body=document.createElement("tbody"),this.table.appendChild(this.body)}function mxImage(t,e,n){this.src=t,this.width=e,this.height=n}function mxDivResizer(t,e){"div"==t.nodeName.toLowerCase()&&(null==e&&(e=window),this.div=t,null!=(t=mxUtils.getCurrentStyle(t))&&(this.resizeWidth="auto"==t.width,this.resizeHeight="auto"==t.height),mxEvent.addListener(e,"resize",mxUtils.bind(this,function(t){this.handlingResize||(this.handlingResize=!0,this.resize(),this.handlingResize=!1)})),this.resize())}function mxDragSource(t,e){this.element=t,this.dropHandler=e,mxEvent.addGestureListeners(t,mxUtils.bind(this,function(t){this.mouseDown(t)})),mxEvent.addListener(t,"dragstart",function(t){mxEvent.consume(t)}),this.eventConsumer=function(t,e){var n=e.getProperty("eventName");e=e.getProperty("event"),n!=mxEvent.MOUSE_DOWN&&e.consume()}}function mxToolbar(t){this.container=t}function mxUndoableEdit(t,e){this.source=t,this.changes=[],this.significant=null==e||e}function mxUndoManager(t){this.size=null!=t?t:100,this.clear()}mxWindow.prototype=new mxEventSource,mxWindow.prototype.constructor=mxWindow,mxWindow.prototype.closeImage=mxClient.imageBasePath+"/close.gif",mxWindow.prototype.minimizeImage=mxClient.imageBasePath+"/minimize.gif",mxWindow.prototype.normalizeImage=mxClient.imageBasePath+"/normalize.gif",mxWindow.prototype.maximizeImage=mxClient.imageBasePath+"/maximize.gif",mxWindow.prototype.resizeImage=mxClient.imageBasePath+"/resize.gif",mxWindow.prototype.visible=!1,mxWindow.prototype.minimumSize=new mxRectangle(0,0,50,40),mxWindow.prototype.destroyOnClose=!0,mxWindow.prototype.contentHeightCorrection=8==document.documentMode||7==document.documentMode?6:2,mxWindow.prototype.title=null,mxWindow.prototype.content=null,mxWindow.prototype.init=function(t,e,n,i,l){l=null!=l?l:"mxWindow",this.div=document.createElement("div"),this.div.className=l,this.div.style.left=t+"px",this.div.style.top=e+"px",this.table=document.createElement("table"),this.table.className=l,mxClient.IS_POINTER&&(this.div.style.touchAction="none"),null!=n&&(this.div.style.width=n+"px",this.table.style.width=n+"px"),null!=i&&(this.div.style.height=i+"px",this.table.style.height=i+"px"),t=document.createElement("tbody"),e=document.createElement("tr"),this.title=document.createElement("td"),this.title.className=l+"Title",this.buttons=document.createElement("div"),this.buttons.style.position="absolute",this.buttons.style.display="inline-block",this.buttons.style.right="4px",this.buttons.style.top="5px",this.title.appendChild(this.buttons),e.appendChild(this.title),t.appendChild(e),e=document.createElement("tr"),this.td=document.createElement("td"),this.td.className=l+"Pane",7==document.documentMode&&(this.td.style.height="100%"),this.contentWrapper=document.createElement("div"),this.contentWrapper.className=l+"Pane",this.contentWrapper.style.width="100%",this.contentWrapper.appendChild(this.content),"DIV"!=this.content.nodeName.toUpperCase()&&(this.contentWrapper.style.height="100%"),this.td.appendChild(this.contentWrapper),e.appendChild(this.td),t.appendChild(e),this.table.appendChild(t),this.div.appendChild(this.table),l=mxUtils.bind(this,function(t){this.activate()}),mxEvent.addGestureListeners(this.title,l),mxEvent.addGestureListeners(this.table,l),this.hide()},mxWindow.prototype.setTitle=function(t){for(var e=this.title.firstChild;null!=e;){var n=e.nextSibling;e.nodeType==mxConstants.NODETYPE_TEXT&&e.parentNode.removeChild(e),e=n}mxUtils.write(this.title,t||""),this.title.appendChild(this.buttons)},mxWindow.prototype.setScrollable=function(t){(null==navigator.userAgent||navigator.userAgent.indexOf("Presto/2.5")<0)&&(this.contentWrapper.style.overflow=t?"auto":"hidden")},mxWindow.prototype.activate=function(){var t,e;mxWindow.activeWindow!=this&&(t=null!=(t=mxUtils.getCurrentStyle(this.getElement()))?t.zIndex:3,!mxWindow.activeWindow||null!=(e=mxWindow.activeWindow.getElement())&&null!=e.style&&(e.style.zIndex=t),e=mxWindow.activeWindow,this.getElement().style.zIndex=parseInt(t)+1,(mxWindow.activeWindow=this).fireEvent(new mxEventObject(mxEvent.ACTIVATE,"previousWindow",e)))},mxWindow.prototype.getElement=function(){return this.div},mxWindow.prototype.fit=function(){mxUtils.fit(this.div)},mxWindow.prototype.isResizable=function(){return null!=this.resize&&"none"!=this.resize.style.display},mxWindow.prototype.setResizable=function(t){var e,n,i,l,o,s;t?null==this.resize?(this.resize=document.createElement("img"),this.resize.style.position="absolute",this.resize.style.bottom="2px",this.resize.style.right="2px",this.resize.setAttribute("src",this.resizeImage),this.resize.style.cursor="nw-resize",l=i=n=e=null,t=mxUtils.bind(this,function(t){this.activate(),e=mxEvent.getClientX(t),n=mxEvent.getClientY(t),i=this.div.offsetWidth,l=this.div.offsetHeight,mxEvent.addGestureListeners(document,null,o,s),this.fireEvent(new mxEventObject(mxEvent.RESIZE_START,"event",t)),mxEvent.consume(t)}),o=mxUtils.bind(this,function(t){var o,s;null!=e&&null!=n&&(o=mxEvent.getClientX(t)-e,s=mxEvent.getClientY(t)-n,this.setSize(i+o,l+s),this.fireEvent(new mxEventObject(mxEvent.RESIZE,"event",t)),mxEvent.consume(t))}),s=mxUtils.bind(this,function(t){null!=e&&null!=n&&(n=e=null,mxEvent.removeGestureListeners(document,null,o,s),this.fireEvent(new mxEventObject(mxEvent.RESIZE_END,"event",t)),mxEvent.consume(t))}),mxEvent.addGestureListeners(this.resize,t,o,s),this.div.appendChild(this.resize)):this.resize.style.display="inline":null!=this.resize&&(this.resize.style.display="none")},mxWindow.prototype.setSize=function(t,e){t=Math.max(this.minimumSize.width,t),e=Math.max(this.minimumSize.height,e),this.div.style.width=t+"px",this.div.style.height=e+"px",this.table.style.width=t+"px",this.table.style.height=e+"px",this.contentWrapper.style.height=this.div.offsetHeight-this.title.offsetHeight-this.contentHeightCorrection+"px"},mxWindow.prototype.setMinimizable=function(t){this.minimizeImg.style.display=t?"":"none"},mxWindow.prototype.getMinimumSize=function(){return new mxRectangle(0,0,0,this.title.offsetHeight)},mxWindow.prototype.toggleMinimized=function(t){var e;this.activate(),this.minimized?(this.minimized=!1,this.minimizeImg.setAttribute("src",this.minimizeImage),this.minimizeImg.setAttribute("title","Minimize"),this.contentWrapper.style.display="",this.maximize.style.display=this.maxDisplay,this.div.style.height=this.height,this.table.style.height=this.height,null!=this.resize&&(this.resize.style.visibility=""),this.fireEvent(new mxEventObject(mxEvent.NORMALIZE,"event",t))):(this.minimized=!0,this.minimizeImg.setAttribute("src",this.normalizeImage),this.minimizeImg.setAttribute("title","Normalize"),this.contentWrapper.style.display="none",this.maxDisplay=this.maximize.style.display,this.maximize.style.display="none",this.height=this.table.style.height,0<(e=this.getMinimumSize()).height&&(this.div.style.height=e.height+"px",this.table.style.height=e.height+"px"),0<e.width&&(this.div.style.width=e.width+"px",this.table.style.width=e.width+"px"),null!=this.resize&&(this.resize.style.visibility="hidden"),this.fireEvent(new mxEventObject(mxEvent.MINIMIZE,"event",t)))},mxWindow.prototype.installMinimizeHandler=function(){this.minimizeImg=document.createElement("img"),this.minimizeImg.setAttribute("src",this.minimizeImage),this.minimizeImg.setAttribute("title","Minimize"),this.minimizeImg.style.cursor="pointer",this.minimizeImg.style.marginLeft="2px",this.minimizeImg.style.display="none",this.buttons.appendChild(this.minimizeImg),this.minimized=!1,this.height=this.maxDisplay=null;var t=mxUtils.bind(this,function(t){this.toggleMinimized(t),mxEvent.consume(t)});mxEvent.addGestureListeners(this.minimizeImg,t)},mxWindow.prototype.setMaximizable=function(t){this.maximize.style.display=t?"":"none"},mxWindow.prototype.installMaximizeHandler=function(){this.maximize=document.createElement("img"),this.maximize.setAttribute("src",this.maximizeImage),this.maximize.setAttribute("title","Maximize"),this.maximize.style.cursor="default",this.maximize.style.marginLeft="2px",this.maximize.style.cursor="pointer",this.maximize.style.display="none",this.buttons.appendChild(this.maximize);var t=!1,e=null,n=null,i=null,l=null,o=null,s=mxUtils.bind(this,function(s){var r;this.activate(),"none"!=this.maximize.style.display&&(t?(t=!1,this.maximize.setAttribute("src",this.maximizeImage),this.maximize.setAttribute("title","Maximize"),this.contentWrapper.style.display="",this.minimizeImg.style.display=o,this.div.style.left=e+"px",this.div.style.top=n+"px",this.div.style.height=i,this.div.style.width=l,"auto"!=(r=mxUtils.getCurrentStyle(this.contentWrapper)).overflow&&null==this.resize||(this.contentWrapper.style.height=this.div.offsetHeight-this.title.offsetHeight-this.contentHeightCorrection+"px"),this.table.style.height=i,this.table.style.width=l,null!=this.resize&&(this.resize.style.visibility=""),this.fireEvent(new mxEventObject(mxEvent.NORMALIZE,"event",s))):(t=!0,this.maximize.setAttribute("src",this.normalizeImage),this.maximize.setAttribute("title","Normalize"),this.contentWrapper.style.display="",o=this.minimizeImg.style.display,this.minimizeImg.style.display="none",e=parseInt(this.div.style.left),n=parseInt(this.div.style.top),i=this.table.style.height,l=this.table.style.width,this.div.style.left="0px",this.div.style.top="0px",r=Math.max(document.body.clientHeight||0,document.documentElement.clientHeight||0),this.div.style.width=document.body.clientWidth-2+"px",this.div.style.height=r-2+"px",this.table.style.width=document.body.clientWidth-2+"px",this.table.style.height=r-2+"px",null!=this.resize&&(this.resize.style.visibility="hidden"),"auto"!=(r=mxUtils.getCurrentStyle(this.contentWrapper)).overflow&&null==this.resize||(this.contentWrapper.style.height=this.div.offsetHeight-this.title.offsetHeight-this.contentHeightCorrection+"px"),this.fireEvent(new mxEventObject(mxEvent.MAXIMIZE,"event",s))),mxEvent.consume(s))});mxEvent.addGestureListeners(this.maximize,s),mxEvent.addListener(this.title,"dblclick",s)},mxWindow.prototype.installMoveHandler=function(){this.title.style.cursor="move",mxEvent.addGestureListeners(this.title,mxUtils.bind(this,function(t){var e=mxEvent.getClientX(t),n=mxEvent.getClientY(t),i=this.getX(),l=this.getY(),o=mxUtils.bind(this,function(t){var o=mxEvent.getClientX(t)-e,s=mxEvent.getClientY(t)-n;this.setLocation(i+o,l+s),this.fireEvent(new mxEventObject(mxEvent.MOVE,"event",t)),mxEvent.consume(t)}),s=mxUtils.bind(this,function(t){mxEvent.removeGestureListeners(document,null,o,s),this.fireEvent(new mxEventObject(mxEvent.MOVE_END,"event",t)),mxEvent.consume(t)});mxEvent.addGestureListeners(document,null,o,s),this.fireEvent(new mxEventObject(mxEvent.MOVE_START,"event",t)),mxEvent.consume(t)})),mxClient.IS_POINTER&&(this.title.style.touchAction="none")},mxWindow.prototype.setLocation=function(t,e){this.div.style.left=t+"px",this.div.style.top=e+"px"},mxWindow.prototype.getX=function(){return parseInt(this.div.style.left)},mxWindow.prototype.getY=function(){return parseInt(this.div.style.top)},mxWindow.prototype.installCloseHandler=function(){this.closeImg=document.createElement("img"),this.closeImg.setAttribute("src",this.closeImage),this.closeImg.setAttribute("title","Close"),this.closeImg.style.marginLeft="2px",this.closeImg.style.cursor="pointer",this.closeImg.style.display="none",this.buttons.appendChild(this.closeImg),mxEvent.addGestureListeners(this.closeImg,mxUtils.bind(this,function(t){this.fireEvent(new mxEventObject(mxEvent.CLOSE,"event",t)),this.destroyOnClose?this.destroy():this.setVisible(!1),mxEvent.consume(t)}))},mxWindow.prototype.setImage=function(t){this.image=document.createElement("img"),this.image.setAttribute("src",t),this.image.setAttribute("align","left"),this.image.style.marginRight="4px",this.image.style.marginLeft="0px",this.image.style.marginTop="-2px",this.title.insertBefore(this.image,this.title.firstChild)},mxWindow.prototype.setClosable=function(t){this.closeImg.style.display=t?"":"none"},mxWindow.prototype.isVisible=function(){return null!=this.div&&"none"!=this.div.style.display},mxWindow.prototype.setVisible=function(t){null!=this.div&&this.isVisible()!=t&&(t?this.show():this.hide())},mxWindow.prototype.show=function(){this.div.style.display="",this.activate(),"auto"!=mxUtils.getCurrentStyle(this.contentWrapper).overflow&&null==this.resize||"none"==this.contentWrapper.style.display||(this.contentWrapper.style.height=this.div.offsetHeight-this.title.offsetHeight-this.contentHeightCorrection+"px"),this.fireEvent(new mxEventObject(mxEvent.SHOW))},mxWindow.prototype.hide=function(){this.div.style.display="none",this.fireEvent(new mxEventObject(mxEvent.HIDE))},mxWindow.prototype.destroy=function(){this.fireEvent(new mxEventObject(mxEvent.DESTROY)),null!=this.div&&(mxEvent.release(this.div),this.div.parentNode.removeChild(this.div),this.div=null),this.contentWrapper=this.content=this.title=null},mxForm.prototype.table=null,mxForm.prototype.body=!1,mxForm.prototype.getTable=function(){return this.table},mxForm.prototype.addButtons=function(t,e){var n=document.createElement("tr"),i=document.createElement("td");n.appendChild(i),i=document.createElement("td");var l=document.createElement("button");mxUtils.write(l,mxResources.get("ok")||"OK"),i.appendChild(l),mxEvent.addListener(l,"click",function(){t()}),l=document.createElement("button"),mxUtils.write(l,mxResources.get("cancel")||"Cancel"),i.appendChild(l),mxEvent.addListener(l,"click",function(){e()}),n.appendChild(i),this.body.appendChild(n)},mxForm.prototype.addText=function(t,e,n){var i=document.createElement("input");return i.setAttribute("type",n||"text"),i.value=e,this.addField(t,i)},mxForm.prototype.addCheckbox=function(t,e){var n=document.createElement("input");return n.setAttribute("type","checkbox"),this.addField(t,n),e&&(n.checked=!0),n},mxForm.prototype.addTextarea=function(t,e,n){var i=document.createElement("textarea");return mxClient.IS_NS&&n--,i.setAttribute("rows",n||2),i.value=e,this.addField(t,i)},mxForm.prototype.addCombo=function(t,e,n){var i=document.createElement("select");return null!=n&&i.setAttribute("size",n),e&&i.setAttribute("multiple","true"),this.addField(t,i)},mxForm.prototype.addOption=function(t,e,n,i){var l=document.createElement("option");mxUtils.writeln(l,e),l.setAttribute("value",n),i&&l.setAttribute("selected",i),t.appendChild(l)},mxForm.prototype.addField=function(t,e){var n=document.createElement("tr"),i=document.createElement("td");return mxUtils.write(i,t),n.appendChild(i),(i=document.createElement("td")).appendChild(e),n.appendChild(i),this.body.appendChild(n),e},mxImage.prototype.src=null,mxImage.prototype.width=null,mxImage.prototype.height=null,mxDivResizer.prototype.resizeWidth=!0,mxDivResizer.prototype.resizeHeight=!0,mxDivResizer.prototype.handlingResize=!1,mxDivResizer.prototype.resize=function(){var t=this.getDocumentWidth(),e=this.getDocumentHeight(),n=parseInt(this.div.style.left),i=parseInt(this.div.style.right),l=parseInt(this.div.style.top),o=parseInt(this.div.style.bottom);this.resizeWidth&&!isNaN(n)&&!isNaN(i)&&0<=n&&0<=i&&0<t-i-n&&(this.div.style.width=t-i-n+"px"),this.resizeHeight&&!isNaN(l)&&!isNaN(o)&&0<=l&&0<=o&&0<e-l-o&&(this.div.style.height=e-l-o+"px")},mxDivResizer.prototype.getDocumentWidth=function(){return document.body.clientWidth},mxDivResizer.prototype.getDocumentHeight=function(){return document.body.clientHeight},mxDragSource.prototype.element=null,mxDragSource.prototype.dropHandler=null,mxDragSource.prototype.dragOffset=null,mxDragSource.prototype.dragElement=null,mxDragSource.prototype.previewElement=null,mxDragSource.prototype.previewOffset=null,mxDragSource.prototype.enabled=!0,mxDragSource.prototype.currentGraph=null,mxDragSource.prototype.currentDropTarget=null,mxDragSource.prototype.currentPoint=null,mxDragSource.prototype.currentGuide=null,mxDragSource.prototype.currentHighlight=null,mxDragSource.prototype.autoscroll=!0,mxDragSource.prototype.guidesEnabled=!0,mxDragSource.prototype.gridEnabled=!0,mxDragSource.prototype.highlightDropTargets=!0,mxDragSource.prototype.dragElementZIndex=100,mxDragSource.prototype.dragElementOpacity=70,mxDragSource.prototype.checkEventSource=!0,mxDragSource.prototype.isEnabled=function(){return this.enabled},mxDragSource.prototype.setEnabled=function(t){this.enabled=t},mxDragSource.prototype.isGuidesEnabled=function(){return this.guidesEnabled},mxDragSource.prototype.setGuidesEnabled=function(t){this.guidesEnabled=t},mxDragSource.prototype.isGridEnabled=function(){return this.gridEnabled},mxDragSource.prototype.setGridEnabled=function(t){this.gridEnabled=t},mxDragSource.prototype.getGraphForEvent=function(t){return null},mxDragSource.prototype.getDropTarget=function(t,e,n,i){return t.getCellAt(e,n)},mxDragSource.prototype.createDragElement=function(t){return this.element.cloneNode(!0)},mxDragSource.prototype.createPreviewElement=function(t){return null},mxDragSource.prototype.isActive=function(){return null!=this.mouseMoveHandler},mxDragSource.prototype.reset=function(){null!=this.currentGraph&&(this.dragExit(this.currentGraph),this.currentGraph=null),this.removeDragElement(),this.removeListeners(),this.stopDrag()},mxDragSource.prototype.mouseDown=function(t){this.enabled&&!mxEvent.isConsumed(t)&&null==this.mouseMoveHandler&&(this.startDrag(t),this.mouseMoveHandler=mxUtils.bind(this,this.mouseMove),this.mouseUpHandler=mxUtils.bind(this,this.mouseUp),mxEvent.addGestureListeners(document,null,this.mouseMoveHandler,this.mouseUpHandler),mxClient.IS_TOUCH&&!mxEvent.isMouseEvent(t)&&(this.eventSource=mxEvent.getSource(t),mxEvent.addGestureListeners(this.eventSource,null,this.mouseMoveHandler,this.mouseUpHandler)))},mxDragSource.prototype.startDrag=function(t){this.dragElement=this.createDragElement(t),this.dragElement.style.position="absolute",this.dragElement.style.zIndex=this.dragElementZIndex,mxUtils.setOpacity(this.dragElement,this.dragElementOpacity),this.checkEventSource&&mxClient.IS_SVG&&(this.dragElement.style.pointerEvents="none")},mxDragSource.prototype.stopDrag=function(){this.removeDragElement()},mxDragSource.prototype.removeDragElement=function(){null!=this.dragElement&&(null!=this.dragElement.parentNode&&this.dragElement.parentNode.removeChild(this.dragElement),this.dragElement=null)},mxDragSource.prototype.getElementForEvent=function(t){return mxEvent.isTouchEvent(t)||mxEvent.isPenEvent(t)?document.elementFromPoint(mxEvent.getClientX(t),mxEvent.getClientY(t)):mxEvent.getSource(t)},mxDragSource.prototype.graphContainsEvent=function(t,e){var n=mxEvent.getClientX(e),i=mxEvent.getClientY(e),l=mxUtils.getOffset(t.container),o=mxUtils.getScrollOrigin(),s=this.getElementForEvent(e);if(this.checkEventSource)for(;null!=s&&s!=t.container;)s=s.parentNode;return null!=s&&n>=l.x-o.x&&i>=l.y-o.y&&n<=l.x-o.x+t.container.offsetWidth&&i<=l.y-o.y+t.container.offsetHeight},mxDragSource.prototype.mouseMove=function(t){var e,n,i=this.getGraphForEvent(t);(i=null==i||this.graphContainsEvent(i,t)?i:null)!=this.currentGraph&&(null!=this.currentGraph&&this.dragExit(this.currentGraph,t),this.currentGraph=i,null!=this.currentGraph&&this.dragEnter(this.currentGraph,t)),null!=this.currentGraph&&this.dragOver(this.currentGraph,t),null==this.dragElement||null!=this.previewElement&&"visible"==this.previewElement.style.visibility?null!=this.dragElement&&(this.dragElement.style.visibility="hidden"):(i=mxEvent.getClientX(t),e=mxEvent.getClientY(t),null==this.dragElement.parentNode&&document.body.appendChild(this.dragElement),this.dragElement.style.visibility="visible",null!=this.dragOffset&&(i+=this.dragOffset.x,e+=this.dragOffset.y),n=mxUtils.getDocumentScrollOrigin(document),this.dragElement.style.left=i+n.x+"px",this.dragElement.style.top=e+n.y+"px"),mxEvent.consume(t)},mxDragSource.prototype.mouseUp=function(t){var e,n;null!=this.currentGraph&&(null==this.currentPoint||null!=this.previewElement&&"hidden"==this.previewElement.style.visibility||this.drop(this.currentGraph,t,this.currentDropTarget,this.currentPoint.x/(e=this.currentGraph.view.scale)-(n=this.currentGraph.view.translate).x,this.currentPoint.y/e-n.y),this.dragExit(this.currentGraph),this.currentGraph=null),this.stopDrag(),this.removeListeners(),mxEvent.consume(t)},mxDragSource.prototype.removeListeners=function(){null!=this.eventSource&&(mxEvent.removeGestureListeners(this.eventSource,null,this.mouseMoveHandler,this.mouseUpHandler),this.eventSource=null),mxEvent.removeGestureListeners(document,null,this.mouseMoveHandler,this.mouseUpHandler),this.mouseUpHandler=this.mouseMoveHandler=null},mxDragSource.prototype.dragEnter=function(t,e){t.isMouseDown=!0,t.isMouseTrigger=mxEvent.isMouseEvent(e),this.previewElement=this.createPreviewElement(t),null!=this.previewElement&&this.checkEventSource&&mxClient.IS_SVG&&(this.previewElement.style.pointerEvents="none"),this.isGuidesEnabled()&&null!=this.previewElement&&(this.currentGuide=new mxGuide(t,t.graphHandler.getGuideStates())),this.highlightDropTargets&&(this.currentHighlight=new mxCellHighlight(t,mxConstants.DROP_TARGET_COLOR)),t.addListener(mxEvent.FIRE_MOUSE_EVENT,this.eventConsumer)},mxDragSource.prototype.dragExit=function(t,e){this.currentPoint=this.currentDropTarget=null,t.isMouseDown=!1,t.removeListener(this.eventConsumer),null!=this.previewElement&&(null!=this.previewElement.parentNode&&this.previewElement.parentNode.removeChild(this.previewElement),this.previewElement=null),null!=this.currentGuide&&(this.currentGuide.destroy(),this.currentGuide=null),null!=this.currentHighlight&&(this.currentHighlight.destroy(),this.currentHighlight=null)},mxDragSource.prototype.dragOver=function(t,e){var n,i,l=mxUtils.getOffset(t.container),o=mxUtils.getScrollOrigin(t.container),s=mxEvent.getClientX(e)-l.x+o.x-t.panDx;l=mxEvent.getClientY(e)-l.y+o.y-t.panDy,t.autoScroll&&(null==this.autoscroll||this.autoscroll)&&t.scrollPointToVisible(s,l,t.autoExtend),null!=this.currentHighlight&&t.isDropEnabled()&&(this.currentDropTarget=this.getDropTarget(t,s,l,e),o=t.getView().getState(this.currentDropTarget),this.currentHighlight.highlight(o)),null!=this.previewElement&&(null==this.previewElement.parentNode&&(t.container.appendChild(this.previewElement),this.previewElement.style.zIndex="3",this.previewElement.style.position="absolute"),o=this.isGridEnabled()&&t.isGridEnabledEvent(e),n=!0,null!=this.currentGuide&&this.currentGuide.isEnabledForEvent(e)?(n=new mxRectangle(0,0,n=parseInt(this.previewElement.style.width),i=parseInt(this.previewElement.style.height)),l=new mxPoint(s,l),l=this.currentGuide.move(n,l,o,!0),n=!1,s=l.x,l=l.y):o&&(s=(t.snap(s/(o=t.view.scale)-(i=t.view.translate).x-(e=t.gridSize/2))+i.x)*o,l=(t.snap(l/o-i.y-e)+i.y)*o),null!=this.currentGuide&&n&&this.currentGuide.hide(),null!=this.previewOffset&&(s+=this.previewOffset.x,l+=this.previewOffset.y),this.previewElement.style.left=Math.round(s)+"px",this.previewElement.style.top=Math.round(l)+"px",this.previewElement.style.visibility="visible"),this.currentPoint=new mxPoint(s,l)},mxDragSource.prototype.drop=function(t,e,n,i,l){this.dropHandler.apply(this,arguments),"hidden"!=t.container.style.visibility&&t.container.focus()},mxToolbar.prototype=new mxEventSource,mxToolbar.prototype.constructor=mxToolbar,mxToolbar.prototype.container=null,mxToolbar.prototype.enabled=!0,mxToolbar.prototype.noReset=!1,mxToolbar.prototype.updateDefaultMode=!0,mxToolbar.prototype.addItem=function(t,e,n,i,l,o){var s=document.createElement(null!=e?"img":"button"),r=l||(null!=o?"mxToolbarMode":"mxToolbarItem");return s.className=r,s.setAttribute("src",e),null!=t&&(null!=e?s.setAttribute("title",t):mxUtils.write(s,t)),this.container.appendChild(s),null!=n&&(mxEvent.addListener(s,"click",n),mxClient.IS_TOUCH&&mxEvent.addListener(s,"touchend",n)),t=mxUtils.bind(this,function(t){null!=i?s.setAttribute("src",e):s.style.backgroundColor=""}),mxEvent.addGestureListeners(s,mxUtils.bind(this,function(t){var e;null!=i?s.setAttribute("src",i):s.style.backgroundColor="gray",null!=o&&(null==this.menu&&(this.menu=new mxPopupMenu,this.menu.init()),e=this.currentImg,this.menu.isMenuShowing()&&this.menu.hideMenu(),e!=s&&(this.currentImg=s,this.menu.factoryMethod=o,e=new mxPoint(s.offsetLeft,s.offsetTop+s.offsetHeight),this.menu.popup(e.x,e.y,null,t),this.menu.isMenuShowing()&&(s.className=r+"Selected",this.menu.hideMenu=function(){mxPopupMenu.prototype.hideMenu.apply(this),s.className=r,this.currentImg=null})))}),null,t),mxEvent.addListener(s,"mouseout",t),s},mxToolbar.prototype.addCombo=function(t){var e=document.createElement("div");e.style.display="inline",e.className="mxToolbarComboContainer";var n=document.createElement("select");return n.className=t||"mxToolbarCombo",e.appendChild(n),this.container.appendChild(e),n},mxToolbar.prototype.addActionCombo=function(t,e){var n=document.createElement("select");return n.className=e||"mxToolbarCombo",this.addOption(n,t,null),mxEvent.addListener(n,"change",function(t){var e=n.options[n.selectedIndex];n.selectedIndex=0,null!=e.funct&&e.funct(t)}),this.container.appendChild(n),n},mxToolbar.prototype.addOption=function(t,e,n){var i=document.createElement("option");return mxUtils.writeln(i,e),"function"==typeof n?i.funct=n:i.setAttribute("value",n),t.appendChild(i),i},mxToolbar.prototype.addSwitchMode=function(t,e,n,i,l){var o=document.createElement("img");return o.initialClassName=l||"mxToolbarMode",o.className=o.initialClassName,o.setAttribute("src",e),o.altIcon=i,null!=t&&o.setAttribute("title",t),mxEvent.addListener(o,"click",mxUtils.bind(this,function(t){null!=(t=this.selectedMode.altIcon)?(this.selectedMode.altIcon=this.selectedMode.getAttribute("src"),this.selectedMode.setAttribute("src",t)):this.selectedMode.className=this.selectedMode.initialClassName,this.updateDefaultMode&&(this.defaultMode=o),null!=(t=(this.selectedMode=o).altIcon)?(o.altIcon=o.getAttribute("src"),o.setAttribute("src",t)):o.className=o.initialClassName+"Selected",this.fireEvent(new mxEventObject(mxEvent.SELECT)),n()})),this.container.appendChild(o),null==this.defaultMode&&(this.defaultMode=o,this.selectMode(o),n()),o},mxToolbar.prototype.addMode=function(t,e,n,i,l,o){o=null==o||o;var s=document.createElement(null!=e?"img":"button");return s.initialClassName=l||"mxToolbarMode",s.className=s.initialClassName,s.setAttribute("src",e),s.altIcon=i,null!=t&&s.setAttribute("title",t),this.enabled&&o&&(mxEvent.addListener(s,"click",mxUtils.bind(this,function(t){this.selectMode(s,n),this.noReset=!1})),mxEvent.addListener(s,"dblclick",mxUtils.bind(this,function(t){this.selectMode(s,n),this.noReset=!0})),null==this.defaultMode&&(this.defaultMode=s,this.defaultFunction=n,this.selectMode(s,n))),this.container.appendChild(s),s},mxToolbar.prototype.selectMode=function(t,e){var n;this.selectedMode!=t&&(null!=this.selectedMode&&(null!=(n=this.selectedMode.altIcon)?(this.selectedMode.altIcon=this.selectedMode.getAttribute("src"),this.selectedMode.setAttribute("src",n)):this.selectedMode.className=this.selectedMode.initialClassName),this.selectedMode=t,null!=(n=this.selectedMode.altIcon)?(this.selectedMode.altIcon=this.selectedMode.getAttribute("src"),this.selectedMode.setAttribute("src",n)):this.selectedMode.className=this.selectedMode.initialClassName+"Selected",this.fireEvent(new mxEventObject(mxEvent.SELECT,"function",e)))},mxToolbar.prototype.resetMode=function(t){!t&&this.noReset||this.selectedMode==this.defaultMode||this.selectMode(this.defaultMode,this.defaultFunction)},mxToolbar.prototype.addSeparator=function(t){return this.addItem(null,t,null)},mxToolbar.prototype.addBreak=function(){mxUtils.br(this.container)},mxToolbar.prototype.addLine=function(){var t=document.createElement("hr");t.style.marginRight="6px",t.setAttribute("size","1"),this.container.appendChild(t)},mxToolbar.prototype.destroy=function(){mxEvent.release(this.container),(this.selectedMode=this.defaultFunction=this.defaultMode=this.container=null)!=this.menu&&this.menu.destroy()},mxUndoableEdit.prototype.source=null,mxUndoableEdit.prototype.changes=null,mxUndoableEdit.prototype.significant=null,mxUndoableEdit.prototype.undone=!1,mxUndoableEdit.prototype.redone=!1,mxUndoableEdit.prototype.isEmpty=function(){return 0==this.changes.length},mxUndoableEdit.prototype.isSignificant=function(){return this.significant},mxUndoableEdit.prototype.add=function(t){this.changes.push(t)},mxUndoableEdit.prototype.notify=function(){},mxUndoableEdit.prototype.die=function(){},mxUndoableEdit.prototype.undo=function(){if(!this.undone){this.source.fireEvent(new mxEventObject(mxEvent.START_EDIT));for(var t=this.changes.length-1;0<=t;t--){var e=this.changes[t];null!=e.execute?e.execute():null!=e.undo&&e.undo(),this.source.fireEvent(new mxEventObject(mxEvent.EXECUTED,"change",e))}this.undone=!0,this.redone=!1,this.source.fireEvent(new mxEventObject(mxEvent.END_EDIT))}this.notify()},mxUndoableEdit.prototype.redo=function(){if(!this.redone){this.source.fireEvent(new mxEventObject(mxEvent.START_EDIT));for(var t=this.changes.length,e=0;e<t;e++){var n=this.changes[e];null!=n.execute?n.execute():null!=n.redo&&n.redo(),this.source.fireEvent(new mxEventObject(mxEvent.EXECUTED,"change",n))}this.undone=!1,this.redone=!0,this.source.fireEvent(new mxEventObject(mxEvent.END_EDIT))}this.notify()},mxUndoManager.prototype=new mxEventSource,mxUndoManager.prototype.constructor=mxUndoManager,mxUndoManager.prototype.size=null,mxUndoManager.prototype.history=null,mxUndoManager.prototype.indexOfNextAdd=0,mxUndoManager.prototype.isEmpty=function(){return 0==this.history.length},mxUndoManager.prototype.clear=function(){this.history=[],this.indexOfNextAdd=0,this.fireEvent(new mxEventObject(mxEvent.CLEAR))},mxUndoManager.prototype.canUndo=function(){return 0<this.indexOfNextAdd},mxUndoManager.prototype.undo=function(){for(;0<this.indexOfNextAdd;){var t=this.history[--this.indexOfNextAdd];if(t.undo(),t.isSignificant()){this.fireEvent(new mxEventObject(mxEvent.UNDO,"edit",t));break}}},mxUndoManager.prototype.canRedo=function(){return this.indexOfNextAdd<this.history.length},mxUndoManager.prototype.redo=function(){for(var t=this.history.length;this.indexOfNextAdd<t;){var e=this.history[this.indexOfNextAdd++];if(e.redo(),e.isSignificant()){this.fireEvent(new mxEventObject(mxEvent.REDO,"edit",e));break}}},mxUndoManager.prototype.undoableEditHappened=function(t){this.trim(),0<this.size&&this.size==this.history.length&&this.history.shift(),this.history.push(t),this.indexOfNextAdd=this.history.length,this.fireEvent(new mxEventObject(mxEvent.ADD,"edit",t))},mxUndoManager.prototype.trim=function(){if(this.history.length>this.indexOfNextAdd)for(var t=this.history.splice(this.indexOfNextAdd,this.history.length-this.indexOfNextAdd),e=0;e<t.length;e++)t[e].die()};var mxUrlConverter=function(){};function mxPanningManager(t){this.thread=null,this.active=!1,this.dy=this.dx=this.t0y=this.t0x=this.tdy=this.tdx=0,this.scrollbars=!1,this.scrollTop=this.scrollLeft=0,this.mouseListener={mouseDown:function(t,e){},mouseMove:function(t,e){},mouseUp:mxUtils.bind(this,function(t,e){this.active&&this.stop()})},t.addMouseListener(this.mouseListener),this.mouseUpListener=mxUtils.bind(this,function(){this.active&&this.stop()}),mxEvent.addListener(document,"mouseup",this.mouseUpListener);var e=mxUtils.bind(this,function(){return this.scrollbars=mxUtils.hasScrollbars(t.container),this.scrollLeft=t.container.scrollLeft,this.scrollTop=t.container.scrollTop,window.setInterval(mxUtils.bind(this,function(){this.tdx-=this.dx,this.tdy-=this.dy,this.scrollbars?(t.panGraph(-t.container.scrollLeft-Math.ceil(this.dx),-t.container.scrollTop-Math.ceil(this.dy)),t.panDx=this.scrollLeft-t.container.scrollLeft,t.panDy=this.scrollTop-t.container.scrollTop,t.fireEvent(new mxEventObject(mxEvent.PAN))):t.panGraph(this.getDx(),this.getDy())}),this.delay)});this.isActive=function(){return active},this.getDx=function(){return Math.round(this.tdx)},this.getDy=function(){return Math.round(this.tdy)},this.start=function(){this.t0x=t.view.translate.x,this.t0y=t.view.translate.y,this.active=!0},this.panTo=function(n,i,l,o){this.active||this.start(),this.scrollLeft=t.container.scrollLeft,this.scrollTop=t.container.scrollTop;var s=t.container;this.dx=n+(null!=l?l:0)-s.scrollLeft-s.clientWidth,this.dx=this.dx<0&&Math.abs(this.dx)<this.border?this.border+this.dx:this.handleMouseOut?Math.max(this.dx,0):0,0==this.dx&&(this.dx=n-s.scrollLeft,this.dx=0<this.dx&&this.dx<this.border?this.dx-this.border:this.handleMouseOut?Math.min(0,this.dx):0),this.dy=i+(null!=o?o:0)-s.scrollTop-s.clientHeight,this.dy=this.dy<0&&Math.abs(this.dy)<this.border?this.border+this.dy:this.handleMouseOut?Math.max(this.dy,0):0,0==this.dy&&(this.dy=i-s.scrollTop,this.dy=0<this.dy&&this.dy<this.border?this.dy-this.border:this.handleMouseOut?Math.min(0,this.dy):0),0!=this.dx||0!=this.dy?(this.dx*=this.damper,this.dy*=this.damper,null==this.thread&&(this.thread=e())):null!=this.thread&&(window.clearInterval(this.thread),this.thread=null)},this.stop=function(){var e,n;this.active&&(this.active=!1,null!=this.thread&&(window.clearInterval(this.thread),this.thread=null),this.tdy=this.tdx=0,this.scrollbars?(t.panDx=0,t.panDy=0,t.fireEvent(new mxEventObject(mxEvent.PAN))):(n=t.panDy,0==(e=t.panDx)&&0==n||(t.panGraph(0,0),t.view.setTranslate(this.t0x+e/t.view.scale,this.t0y+n/t.view.scale))))},this.destroy=function(){t.removeMouseListener(this.mouseListener),mxEvent.removeListener(document,"mouseup",this.mouseUpListener)}}function mxPopupMenu(t){null!=(this.factoryMethod=t)&&this.init()}function mxAutoSaveManager(t){this.changeHandler=mxUtils.bind(this,function(t,e){this.isEnabled()&&this.graphModelChanged(e.getProperty("edit").changes)}),this.setGraph(t)}function mxAnimation(t){this.delay=null!=t?t:20}function mxMorphing(t,e,n,i){mxAnimation.call(this,i),this.graph=t,this.steps=null!=e?e:6,this.ease=null!=n?n:1.5}function mxImageBundle(t){this.images=[],this.alt=null!=t&&t}function mxImageExport(){}function mxAbstractCanvas2D(){this.converter=this.createUrlConverter(),this.reset()}function mxXmlCanvas2D(t){mxAbstractCanvas2D.call(this),this.root=t,this.writeDefaults()}function mxSvgCanvas2D(t,e){mxAbstractCanvas2D.call(this),this.root=t,this.gradients=[],this.defs=null,this.styleEnabled=null!=e&&e;var n=null;if(t.ownerDocument!=document)for(n=t;null!=n&&"svg"!=n.nodeName;)n=n.parentNode;null!=n&&(0<n.getElementsByTagName("defs").length&&(this.defs=n.getElementsByTagName("defs")[0]),null==this.defs&&(this.defs=this.createElement("defs"),null!=n.firstChild?n.insertBefore(this.defs,n.firstChild):n.appendChild(this.defs)),this.styleEnabled&&this.defs.appendChild(this.createStyle()))}function mxGuide(t,e){this.graph=t,this.setStates(e)}function mxShape(t){this.stencil=t,this.initStyles()}function mxStencil(t){this.desc=t,this.parseDescription(),this.parseConstraints()}mxUrlConverter.prototype.enabled=!0,mxUrlConverter.prototype.baseUrl=null,mxUrlConverter.prototype.baseDomain=null,mxUrlConverter.prototype.updateBaseUrl=function(){this.baseDomain=location.protocol+"//"+location.host,this.baseUrl=this.baseDomain+location.pathname;var t=this.baseUrl.lastIndexOf("/");0<t&&(this.baseUrl=this.baseUrl.substring(0,t+1))},mxUrlConverter.prototype.isEnabled=function(){return this.enabled},mxUrlConverter.prototype.setEnabled=function(t){this.enabled=t},mxUrlConverter.prototype.getBaseUrl=function(){return this.baseUrl},mxUrlConverter.prototype.setBaseUrl=function(t){this.baseUrl=t},mxUrlConverter.prototype.getBaseDomain=function(){return this.baseDomain},mxUrlConverter.prototype.setBaseDomain=function(t){this.baseDomain=t},mxUrlConverter.prototype.isRelativeUrl=function(t){return null!=t&&"//"!=t.substring(0,2)&&"http://"!=t.substring(0,7)&&"https://"!=t.substring(0,8)&&"data:image"!=t.substring(0,10)&&"file://"!=t.substring(0,7)},mxUrlConverter.prototype.convert=function(t){return this.isEnabled()&&this.isRelativeUrl(t)&&(null==this.getBaseUrl()&&this.updateBaseUrl(),t="/"==t.charAt(0)?this.getBaseDomain()+t:this.getBaseUrl()+t),t},mxPanningManager.prototype.damper=1/6,mxPanningManager.prototype.delay=10,mxPanningManager.prototype.handleMouseOut=!0,mxPanningManager.prototype.border=0,mxPopupMenu.prototype=new mxEventSource,mxPopupMenu.prototype.constructor=mxPopupMenu,mxPopupMenu.prototype.submenuImage=mxClient.imageBasePath+"/submenu.gif",mxPopupMenu.prototype.zIndex=10006,mxPopupMenu.prototype.factoryMethod=null,mxPopupMenu.prototype.useLeftButtonForPopup=!1,mxPopupMenu.prototype.enabled=!0,mxPopupMenu.prototype.itemCount=0,mxPopupMenu.prototype.autoExpand=!1,mxPopupMenu.prototype.smartSeparators=!1,mxPopupMenu.prototype.labels=!0,mxPopupMenu.prototype.init=function(){this.table=document.createElement("table"),this.table.className="mxPopupMenu",this.tbody=document.createElement("tbody"),this.table.appendChild(this.tbody),this.div=document.createElement("div"),this.div.className="mxPopupMenu",this.div.style.display="inline",this.div.style.zIndex=this.zIndex,this.div.appendChild(this.table),mxEvent.disableContextMenu(this.div)},mxPopupMenu.prototype.isEnabled=function(){return this.enabled},mxPopupMenu.prototype.setEnabled=function(t){this.enabled=t},mxPopupMenu.prototype.isPopupTrigger=function(t){return t.isPopupTrigger()||this.useLeftButtonForPopup&&mxEvent.isLeftMouseButton(t.getEvent())},mxPopupMenu.prototype.addItem=function(t,e,n,i,l,o,s,r){i=i||this,this.itemCount++,i.willAddSeparator&&(i.containsItems&&this.addSeparator(i,!0),i.willAddSeparator=!1),i.containsItems=!0;var a=document.createElement("tr");a.className="mxPopupMenuItem";var h,u=document.createElement("td");return u.className="mxPopupMenuIcon",null!=e?((l=document.createElement("img")).src=e,u.appendChild(l)):null!=l&&((e=document.createElement("div")).className=l,u.appendChild(e)),a.appendChild(u),this.labels&&((u=document.createElement("td")).className="mxPopupMenuItem"+(null==o||o?"":" mxDisabled"),mxUtils.write(u,t),u.align="left",a.appendChild(u),(t=document.createElement("td")).className="mxPopupMenuItem"+(null==o||o?"":" mxDisabled"),t.style.paddingRight="6px",t.style.textAlign="right",a.appendChild(t),null==i.div&&this.createSubmenu(i)),i.tbody.appendChild(a),0!=s&&0!=o&&(h=null,mxEvent.addGestureListeners(a,mxUtils.bind(this,function(t){this.eventReceiver=a,i.activeRow!=a&&i.activeRow!=i&&(null!=i.activeRow&&null!=i.activeRow.div.parentNode&&this.hideSubmenu(i),null!=a.div&&(this.showSubmenu(i,a),i.activeRow=a)),null!=document.selection&&8==document.documentMode&&(h=document.selection.createRange()),mxEvent.consume(t)}),mxUtils.bind(this,function(t){i.activeRow!=a&&i.activeRow!=i&&(null!=i.activeRow&&null!=i.activeRow.div.parentNode&&this.hideSubmenu(i),this.autoExpand&&null!=a.div&&(this.showSubmenu(i,a),i.activeRow=a)),r||(a.className="mxPopupMenuItemHover")}),mxUtils.bind(this,function(t){if(this.eventReceiver==a){if(i.activeRow!=a&&this.hideMenu(),null!=h){try{h.select()}catch(t){}h=null}null!=n&&n(t)}this.eventReceiver=null,mxEvent.consume(t)})),r||mxEvent.addListener(a,"mouseout",mxUtils.bind(this,function(t){a.className="mxPopupMenuItem"}))),a},mxPopupMenu.prototype.addCheckmark=function(t,e){(t=t.firstChild.nextSibling).style.backgroundImage="url('"+e+"')",t.style.backgroundRepeat="no-repeat",t.style.backgroundPosition="2px 50%"},mxPopupMenu.prototype.createSubmenu=function(t){t.table=document.createElement("table"),t.table.className="mxPopupMenu",t.tbody=document.createElement("tbody"),t.table.appendChild(t.tbody),t.div=document.createElement("div"),t.div.className="mxPopupMenu",t.div.style.position="absolute",t.div.style.display="inline",t.div.style.zIndex=this.zIndex,t.div.appendChild(t.table);var e=document.createElement("img");e.setAttribute("src",this.submenuImage),td=t.firstChild.nextSibling.nextSibling,td.appendChild(e)},mxPopupMenu.prototype.showSubmenu=function(t,e){var n,i,l,o;null!=e.div&&(e.div.style.left=t.div.offsetLeft+e.offsetLeft+e.offsetWidth-1+"px",e.div.style.top=t.div.offsetTop+e.offsetTop+"px",document.body.appendChild(e.div),n=parseInt(e.div.offsetLeft),i=parseInt(e.div.offsetWidth),l=mxUtils.getDocumentScrollOrigin(document),o=document.documentElement,n+i>l.x+(document.body.clientWidth||o.clientWidth)&&(e.div.style.left=Math.max(0,t.div.offsetLeft-i+(mxClient.IS_IE?6:-6))+"px"),e.div.style.overflowY="auto",e.div.style.overflowX="hidden",e.div.style.maxHeight=Math.max(document.body.clientHeight,document.documentElement.clientHeight)-10+"px",mxUtils.fit(e.div))},mxPopupMenu.prototype.addSeparator=function(t,e){var n,i;t=t||this,this.smartSeparators&&!e?t.willAddSeparator=!0:null!=t.tbody&&(t.willAddSeparator=!1,n=document.createElement("tr"),(i=document.createElement("td")).className="mxPopupMenuIcon",i.style.padding="0 0 0 0px",n.appendChild(i),(i=document.createElement("td")).style.padding="0 0 0 0px",i.setAttribute("colSpan","2"),(e=document.createElement("hr")).setAttribute("size","1"),i.appendChild(e),n.appendChild(i),t.tbody.appendChild(n))},mxPopupMenu.prototype.popup=function(t,e,n,i){if(null!=this.div&&null!=this.tbody&&null!=this.factoryMethod){for(this.div.style.left=t+"px",this.div.style.top=e+"px";null!=this.tbody.firstChild;)mxEvent.release(this.tbody.firstChild),this.tbody.removeChild(this.tbody.firstChild);this.itemCount=0,this.factoryMethod(this,n,i),0<this.itemCount&&(this.showMenu(),this.fireEvent(new mxEventObject(mxEvent.SHOW)))}},mxPopupMenu.prototype.isMenuShowing=function(){return null!=this.div&&this.div.parentNode==document.body},mxPopupMenu.prototype.showMenu=function(){9<=document.documentMode&&(this.div.style.filter="none"),document.body.appendChild(this.div),mxUtils.fit(this.div)},mxPopupMenu.prototype.hideMenu=function(){null!=this.div&&(null!=this.div.parentNode&&this.div.parentNode.removeChild(this.div),this.hideSubmenu(this),this.containsItems=!1,this.fireEvent(new mxEventObject(mxEvent.HIDE)))},mxPopupMenu.prototype.hideSubmenu=function(t){null!=t.activeRow&&(this.hideSubmenu(t.activeRow),null!=t.activeRow.div.parentNode&&t.activeRow.div.parentNode.removeChild(t.activeRow.div),t.activeRow=null)},mxPopupMenu.prototype.destroy=function(){null!=this.div&&(mxEvent.release(this.div),null!=this.div.parentNode&&this.div.parentNode.removeChild(this.div),this.div=null)},mxAutoSaveManager.prototype=new mxEventSource,mxAutoSaveManager.prototype.constructor=mxAutoSaveManager,mxAutoSaveManager.prototype.graph=null,mxAutoSaveManager.prototype.autoSaveDelay=10,mxAutoSaveManager.prototype.autoSaveThrottle=2,mxAutoSaveManager.prototype.autoSaveThreshold=5,mxAutoSaveManager.prototype.ignoredChanges=0,mxAutoSaveManager.prototype.lastSnapshot=0,mxAutoSaveManager.prototype.enabled=!0,mxAutoSaveManager.prototype.changeHandler=null,mxAutoSaveManager.prototype.isEnabled=function(){return this.enabled},mxAutoSaveManager.prototype.setEnabled=function(t){this.enabled=t},mxAutoSaveManager.prototype.setGraph=function(t){null!=this.graph&&this.graph.getModel().removeListener(this.changeHandler),this.graph=t,null!=this.graph&&this.graph.getModel().addListener(mxEvent.CHANGE,this.changeHandler)},mxAutoSaveManager.prototype.save=function(){},mxAutoSaveManager.prototype.graphModelChanged=function(t){(t=((new Date).getTime()-this.lastSnapshot)/1e3)>this.autoSaveDelay||this.ignoredChanges>=this.autoSaveThreshold&&t>this.autoSaveThrottle?(this.save(),this.reset()):this.ignoredChanges++},mxAutoSaveManager.prototype.reset=function(){this.lastSnapshot=(new Date).getTime(),this.ignoredChanges=0},mxAutoSaveManager.prototype.destroy=function(){this.setGraph(null)},mxAnimation.prototype=new mxEventSource,mxAnimation.prototype.constructor=mxAnimation,mxAnimation.prototype.delay=null,mxAnimation.prototype.thread=null,mxAnimation.prototype.isRunning=function(){return null!=this.thread},mxAnimation.prototype.startAnimation=function(){null==this.thread&&(this.thread=window.setInterval(mxUtils.bind(this,this.updateAnimation),this.delay))},mxAnimation.prototype.updateAnimation=function(){this.fireEvent(new mxEventObject(mxEvent.EXECUTE))},mxAnimation.prototype.stopAnimation=function(){null!=this.thread&&(window.clearInterval(this.thread),this.thread=null,this.fireEvent(new mxEventObject(mxEvent.DONE)))},mxMorphing.prototype=new mxAnimation,mxMorphing.prototype.constructor=mxMorphing,mxMorphing.prototype.graph=null,mxMorphing.prototype.steps=null,mxMorphing.prototype.step=0,mxMorphing.prototype.ease=null,mxMorphing.prototype.cells=null,mxMorphing.prototype.updateAnimation=function(){mxAnimation.prototype.updateAnimation.apply(this,arguments);var t=new mxCellStatePreview(this.graph);if(null!=this.cells)for(var e=0;e<this.cells.length;e++)this.animateCell(this.cells[e],t,!1);else this.animateCell(this.graph.getModel().getRoot(),t,!0);this.show(t),(t.isEmpty()||this.step++>=this.steps)&&this.stopAnimation()},mxMorphing.prototype.show=function(t){t.show()},mxMorphing.prototype.animateCell=function(t,e,n){var i,l,o=this.graph.getView().getState(t),s=null;if(null==o||(s=this.getDelta(o),!this.graph.getModel().isVertex(t)||0==s.x&&0==s.y)||(i=this.graph.view.getTranslate(),l=this.graph.view.getScale(),s.x+=i.x*l,s.y+=i.y*l,e.moveState(o,-s.x/this.ease,-s.y/this.ease)),n&&!this.stopRecursion(o,s))for(o=this.graph.getModel().getChildCount(t),s=0;s<o;s++)this.animateCell(this.graph.getModel().getChildAt(t,s),e,n)},mxMorphing.prototype.stopRecursion=function(t,e){return null!=e&&(0!=e.x||0!=e.y)},mxMorphing.prototype.getDelta=function(t){var e=this.getOriginForCell(t.cell),n=this.graph.getView().getTranslate(),i=this.graph.getView().getScale();return new mxPoint((e.x-(t.x/i-n.x))*i,(e.y-(t.y/i-n.y))*i)},mxMorphing.prototype.getOriginForCell=function(t){var e,n=null;return null!=t&&(e=this.graph.getModel().getParent(t),t=this.graph.getCellGeometry(t),n=this.getOriginForCell(e),null!=t&&(t.relative?null!=(e=this.graph.getCellGeometry(e))&&(n.x+=t.x*e.width,n.y+=t.y*e.height):(n.x+=t.x,n.y+=t.y))),null==n?new mxPoint(-(n=this.graph.view.getTranslate()).x,-n.y):n},mxImageBundle.prototype.images=null,mxImageBundle.prototype.alt=null,mxImageBundle.prototype.putImage=function(t,e,n){this.images[t]={value:e,fallback:n}},mxImageBundle.prototype.getImage=function(t){var e=null;return null!=t&&null!=(t=this.images[t])&&(e=this.alt?t.fallback:t.value),e},mxImageExport.prototype.includeOverlays=!1,mxImageExport.prototype.drawState=function(t,e){null!=t&&(this.visitStatesRecursive(t,e,mxUtils.bind(this,function(){this.drawCellState.apply(this,arguments)})),this.includeOverlays&&this.visitStatesRecursive(t,e,mxUtils.bind(this,function(){this.drawOverlays.apply(this,arguments)})))},mxImageExport.prototype.visitStatesRecursive=function(t,e,n){if(null!=t){n(t,e);for(var i=t.view.graph,l=i.model.getChildCount(t.cell),o=0;o<l;o++){var s=i.view.getState(i.model.getChildAt(t.cell,o));this.visitStatesRecursive(s,e,n)}}},mxImageExport.prototype.getLinkForCellState=function(t,e){return null},mxImageExport.prototype.getLinkTargetForCellState=function(t,e){return null},mxImageExport.prototype.drawCellState=function(t,e){var n=this.getLinkForCellState(t,e);null!=n&&e.setLink(n,this.getLinkTargetForCellState(t,e)),this.drawShape(t,e),this.drawText(t,e),null!=n&&e.setLink(null)},mxImageExport.prototype.drawShape=function(t,e){t.shape instanceof mxShape&&t.shape.checkBounds()&&(e.save(),t.shape.beforePaint(e),t.shape.paint(e),t.shape.afterPaint(e),e.restore())},mxImageExport.prototype.drawText=function(t,e){null!=t.text&&t.text.checkBounds()&&(e.save(),t.text.beforePaint(e),t.text.paint(e),t.text.afterPaint(e),e.restore())},mxImageExport.prototype.drawOverlays=function(t,e){null!=t.overlays&&t.overlays.visit(function(t,n){n instanceof mxShape&&n.paint(e)})},mxAbstractCanvas2D.prototype.state=null,mxAbstractCanvas2D.prototype.states=null,mxAbstractCanvas2D.prototype.path=null,mxAbstractCanvas2D.prototype.rotateHtml=!0,mxAbstractCanvas2D.prototype.lastX=0,mxAbstractCanvas2D.prototype.lastY=0,mxAbstractCanvas2D.prototype.moveOp="M",mxAbstractCanvas2D.prototype.lineOp="L",mxAbstractCanvas2D.prototype.quadOp="Q",mxAbstractCanvas2D.prototype.curveOp="C",mxAbstractCanvas2D.prototype.closeOp="Z",mxAbstractCanvas2D.prototype.pointerEvents=!1,mxAbstractCanvas2D.prototype.createUrlConverter=function(){return new mxUrlConverter},mxAbstractCanvas2D.prototype.reset=function(){this.state=this.createState(),this.states=[]},mxAbstractCanvas2D.prototype.createState=function(){return{dx:0,dy:0,scale:1,alpha:1,fillAlpha:1,strokeAlpha:1,fillColor:null,gradientFillAlpha:1,gradientColor:null,gradientAlpha:1,gradientDirection:null,strokeColor:null,strokeWidth:1,dashed:!1,dashPattern:"3 3",fixDash:!1,lineCap:"flat",lineJoin:"miter",miterLimit:10,fontColor:"#000000",fontBackgroundColor:null,fontBorderColor:null,fontSize:mxConstants.DEFAULT_FONTSIZE,fontFamily:mxConstants.DEFAULT_FONTFAMILY,fontStyle:0,shadow:!1,shadowColor:mxConstants.SHADOWCOLOR,shadowAlpha:mxConstants.SHADOW_OPACITY,shadowDx:mxConstants.SHADOW_OFFSET_X,shadowDy:mxConstants.SHADOW_OFFSET_Y,rotation:0,rotationCx:0,rotationCy:0}},mxAbstractCanvas2D.prototype.format=function(t){return Math.round(parseFloat(t))},mxAbstractCanvas2D.prototype.addOp=function(){if(null!=this.path&&(this.path.push(arguments[0]),2<arguments.length))for(var t=this.state,e=2;e<arguments.length;e+=2)this.lastX=arguments[e-1],this.lastY=arguments[e],this.path.push(this.format((this.lastX+t.dx)*t.scale)),this.path.push(this.format((this.lastY+t.dy)*t.scale))},mxAbstractCanvas2D.prototype.rotatePoint=function(t,e,n,i,l){return n*=Math.PI/180,mxUtils.getRotatedPoint(new mxPoint(t,e),Math.cos(n),Math.sin(n),new mxPoint(i,l))},mxAbstractCanvas2D.prototype.save=function(){this.states.push(this.state),this.state=mxUtils.clone(this.state)},mxAbstractCanvas2D.prototype.restore=function(){0<this.states.length&&(this.state=this.states.pop())},mxAbstractCanvas2D.prototype.setLink=function(t,e){},mxAbstractCanvas2D.prototype.scale=function(t){this.state.scale*=t,this.state.strokeWidth*=t},mxAbstractCanvas2D.prototype.translate=function(t,e){this.state.dx+=t,this.state.dy+=e},mxAbstractCanvas2D.prototype.rotate=function(t,e,n,i,l){},mxAbstractCanvas2D.prototype.setAlpha=function(t){this.state.alpha=t},mxAbstractCanvas2D.prototype.setFillAlpha=function(t){this.state.fillAlpha=t},mxAbstractCanvas2D.prototype.setStrokeAlpha=function(t){this.state.strokeAlpha=t},mxAbstractCanvas2D.prototype.setFillColor=function(t){t==mxConstants.NONE&&(t=null),this.state.fillColor=t,this.state.gradientColor=null},mxAbstractCanvas2D.prototype.setGradient=function(t,e,n,i,l,o,s,r,a){(n=this.state).fillColor=t,n.gradientFillAlpha=null!=r?r:1,n.gradientColor=e,n.gradientAlpha=null!=a?a:1,n.gradientDirection=s},mxAbstractCanvas2D.prototype.setStrokeColor=function(t){t==mxConstants.NONE&&(t=null),this.state.strokeColor=t},mxAbstractCanvas2D.prototype.setStrokeWidth=function(t){this.state.strokeWidth=t},mxAbstractCanvas2D.prototype.setDashed=function(t,e){this.state.dashed=t,this.state.fixDash=e},mxAbstractCanvas2D.prototype.setDashPattern=function(t){this.state.dashPattern=t},mxAbstractCanvas2D.prototype.setLineCap=function(t){this.state.lineCap=t},mxAbstractCanvas2D.prototype.setLineJoin=function(t){this.state.lineJoin=t},mxAbstractCanvas2D.prototype.setMiterLimit=function(t){this.state.miterLimit=t},mxAbstractCanvas2D.prototype.setFontColor=function(t){t==mxConstants.NONE&&(t=null),this.state.fontColor=t},mxAbstractCanvas2D.prototype.setFontBackgroundColor=function(t){t==mxConstants.NONE&&(t=null),this.state.fontBackgroundColor=t},mxAbstractCanvas2D.prototype.setFontBorderColor=function(t){t==mxConstants.NONE&&(t=null),this.state.fontBorderColor=t},mxAbstractCanvas2D.prototype.setFontSize=function(t){this.state.fontSize=parseFloat(t)},mxAbstractCanvas2D.prototype.setFontFamily=function(t){this.state.fontFamily=t},mxAbstractCanvas2D.prototype.setFontStyle=function(t){this.state.fontStyle=t=null==t?0:t},mxAbstractCanvas2D.prototype.setShadow=function(t){this.state.shadow=t},mxAbstractCanvas2D.prototype.setShadowColor=function(t){t==mxConstants.NONE&&(t=null),this.state.shadowColor=t},mxAbstractCanvas2D.prototype.setShadowAlpha=function(t){this.state.shadowAlpha=t},mxAbstractCanvas2D.prototype.setShadowOffset=function(t,e){this.state.shadowDx=t,this.state.shadowDy=e},mxAbstractCanvas2D.prototype.begin=function(){this.lastY=this.lastX=0,this.path=[]},mxAbstractCanvas2D.prototype.moveTo=function(t,e){this.addOp(this.moveOp,t,e)},mxAbstractCanvas2D.prototype.lineTo=function(t,e){this.addOp(this.lineOp,t,e)},mxAbstractCanvas2D.prototype.quadTo=function(t,e,n,i){this.addOp(this.quadOp,t,e,n,i)},mxAbstractCanvas2D.prototype.curveTo=function(t,e,n,i,l,o){this.addOp(this.curveOp,t,e,n,i,l,o)},mxAbstractCanvas2D.prototype.arcTo=function(t,e,n,i,l,o,s){if(null!=(t=mxUtils.arcToCurves(this.lastX,this.lastY,t,e,n,i,l,o,s)))for(e=0;e<t.length;e+=6)this.curveTo(t[e],t[e+1],t[e+2],t[e+3],t[e+4],t[e+5])},mxAbstractCanvas2D.prototype.close=function(t,e,n,i,l,o){this.addOp(this.closeOp)},mxAbstractCanvas2D.prototype.end=function(){},mxUtils.extend(mxXmlCanvas2D,mxAbstractCanvas2D),mxXmlCanvas2D.prototype.textEnabled=!0,mxXmlCanvas2D.prototype.compressed=!0,mxXmlCanvas2D.prototype.writeDefaults=function(){var t=this.createElement("fontfamily");t.setAttribute("family",mxConstants.DEFAULT_FONTFAMILY),this.root.appendChild(t),(t=this.createElement("fontsize")).setAttribute("size",mxConstants.DEFAULT_FONTSIZE),this.root.appendChild(t),(t=this.createElement("shadowcolor")).setAttribute("color",mxConstants.SHADOWCOLOR),this.root.appendChild(t),(t=this.createElement("shadowalpha")).setAttribute("alpha",mxConstants.SHADOW_OPACITY),this.root.appendChild(t),(t=this.createElement("shadowoffset")).setAttribute("dx",mxConstants.SHADOW_OFFSET_X),t.setAttribute("dy",mxConstants.SHADOW_OFFSET_Y),this.root.appendChild(t)},mxXmlCanvas2D.prototype.format=function(t){return parseFloat(parseFloat(t).toFixed(2))},mxXmlCanvas2D.prototype.createElement=function(t){return this.root.ownerDocument.createElement(t)},mxXmlCanvas2D.prototype.save=function(){this.compressed&&mxAbstractCanvas2D.prototype.save.apply(this,arguments),this.root.appendChild(this.createElement("save"))},mxXmlCanvas2D.prototype.restore=function(){this.compressed&&mxAbstractCanvas2D.prototype.restore.apply(this,arguments),this.root.appendChild(this.createElement("restore"))},mxXmlCanvas2D.prototype.scale=function(t){var e=this.createElement("scale");e.setAttribute("scale",t),this.root.appendChild(e)},mxXmlCanvas2D.prototype.translate=function(t,e){var n=this.createElement("translate");n.setAttribute("dx",this.format(t)),n.setAttribute("dy",this.format(e)),this.root.appendChild(n)},mxXmlCanvas2D.prototype.rotate=function(t,e,n,i,l){var o=this.createElement("rotate");(0!=t||e||n)&&(o.setAttribute("theta",this.format(t)),o.setAttribute("flipH",e?"1":"0"),o.setAttribute("flipV",n?"1":"0"),o.setAttribute("cx",this.format(i)),o.setAttribute("cy",this.format(l)),this.root.appendChild(o))},mxXmlCanvas2D.prototype.setAlpha=function(t){if(this.compressed){if(this.state.alpha==t)return;mxAbstractCanvas2D.prototype.setAlpha.apply(this,arguments)}var e=this.createElement("alpha");e.setAttribute("alpha",this.format(t)),this.root.appendChild(e)},mxXmlCanvas2D.prototype.setFillAlpha=function(t){if(this.compressed){if(this.state.fillAlpha==t)return;mxAbstractCanvas2D.prototype.setFillAlpha.apply(this,arguments)}var e=this.createElement("fillalpha");e.setAttribute("alpha",this.format(t)),this.root.appendChild(e)},mxXmlCanvas2D.prototype.setStrokeAlpha=function(t){if(this.compressed){if(this.state.strokeAlpha==t)return;mxAbstractCanvas2D.prototype.setStrokeAlpha.apply(this,arguments)}var e=this.createElement("strokealpha");e.setAttribute("alpha",this.format(t)),this.root.appendChild(e)},mxXmlCanvas2D.prototype.setFillColor=function(t){if(t==mxConstants.NONE&&(t=null),this.compressed){if(this.state.fillColor==t)return;mxAbstractCanvas2D.prototype.setFillColor.apply(this,arguments)}var e=this.createElement("fillcolor");e.setAttribute("color",null!=t?t:mxConstants.NONE),this.root.appendChild(e)},mxXmlCanvas2D.prototype.setGradient=function(t,e,n,i,l,o,s,r,a){var h;null!=t&&null!=e&&(mxAbstractCanvas2D.prototype.setGradient.apply(this,arguments),(h=this.createElement("gradient")).setAttribute("c1",t),h.setAttribute("c2",e),h.setAttribute("x",this.format(n)),h.setAttribute("y",this.format(i)),h.setAttribute("w",this.format(l)),h.setAttribute("h",this.format(o)),null!=s&&h.setAttribute("direction",s),null!=r&&h.setAttribute("alpha1",r),null!=a&&h.setAttribute("alpha2",a),this.root.appendChild(h))},mxXmlCanvas2D.prototype.setStrokeColor=function(t){if(t==mxConstants.NONE&&(t=null),this.compressed){if(this.state.strokeColor==t)return;mxAbstractCanvas2D.prototype.setStrokeColor.apply(this,arguments)}var e=this.createElement("strokecolor");e.setAttribute("color",null!=t?t:mxConstants.NONE),this.root.appendChild(e)},mxXmlCanvas2D.prototype.setStrokeWidth=function(t){if(this.compressed){if(this.state.strokeWidth==t)return;mxAbstractCanvas2D.prototype.setStrokeWidth.apply(this,arguments)}var e=this.createElement("strokewidth");e.setAttribute("width",this.format(t)),this.root.appendChild(e)},mxXmlCanvas2D.prototype.setDashed=function(t,e){if(this.compressed){if(this.state.dashed==t)return;mxAbstractCanvas2D.prototype.setDashed.apply(this,arguments)}var n=this.createElement("dashed");n.setAttribute("dashed",t?"1":"0"),null!=e&&n.setAttribute("fixDash",e?"1":"0"),this.root.appendChild(n)},mxXmlCanvas2D.prototype.setDashPattern=function(t){if(this.compressed){if(this.state.dashPattern==t)return;mxAbstractCanvas2D.prototype.setDashPattern.apply(this,arguments)}var e=this.createElement("dashpattern");e.setAttribute("pattern",t),this.root.appendChild(e)},mxXmlCanvas2D.prototype.setLineCap=function(t){if(this.compressed){if(this.state.lineCap==t)return;mxAbstractCanvas2D.prototype.setLineCap.apply(this,arguments)}var e=this.createElement("linecap");e.setAttribute("cap",t),this.root.appendChild(e)},mxXmlCanvas2D.prototype.setLineJoin=function(t){if(this.compressed){if(this.state.lineJoin==t)return;mxAbstractCanvas2D.prototype.setLineJoin.apply(this,arguments)}var e=this.createElement("linejoin");e.setAttribute("join",t),this.root.appendChild(e)},mxXmlCanvas2D.prototype.setMiterLimit=function(t){if(this.compressed){if(this.state.miterLimit==t)return;mxAbstractCanvas2D.prototype.setMiterLimit.apply(this,arguments)}var e=this.createElement("miterlimit");e.setAttribute("limit",t),this.root.appendChild(e)},mxXmlCanvas2D.prototype.setFontColor=function(t){if(this.textEnabled){if(t==mxConstants.NONE&&(t=null),this.compressed){if(this.state.fontColor==t)return;mxAbstractCanvas2D.prototype.setFontColor.apply(this,arguments)}var e=this.createElement("fontcolor");e.setAttribute("color",null!=t?t:mxConstants.NONE),this.root.appendChild(e)}},mxXmlCanvas2D.prototype.setFontBackgroundColor=function(t){if(this.textEnabled){if(t==mxConstants.NONE&&(t=null),this.compressed){if(this.state.fontBackgroundColor==t)return;mxAbstractCanvas2D.prototype.setFontBackgroundColor.apply(this,arguments)}var e=this.createElement("fontbackgroundcolor");e.setAttribute("color",null!=t?t:mxConstants.NONE),this.root.appendChild(e)}},mxXmlCanvas2D.prototype.setFontBorderColor=function(t){if(this.textEnabled){if(t==mxConstants.NONE&&(t=null),this.compressed){if(this.state.fontBorderColor==t)return;mxAbstractCanvas2D.prototype.setFontBorderColor.apply(this,arguments)}var e=this.createElement("fontbordercolor");e.setAttribute("color",null!=t?t:mxConstants.NONE),this.root.appendChild(e)}},mxXmlCanvas2D.prototype.setFontSize=function(t){if(this.textEnabled){if(this.compressed){if(this.state.fontSize==t)return;mxAbstractCanvas2D.prototype.setFontSize.apply(this,arguments)}var e=this.createElement("fontsize");e.setAttribute("size",t),this.root.appendChild(e)}},mxXmlCanvas2D.prototype.setFontFamily=function(t){if(this.textEnabled){if(this.compressed){if(this.state.fontFamily==t)return;mxAbstractCanvas2D.prototype.setFontFamily.apply(this,arguments)}var e=this.createElement("fontfamily");e.setAttribute("family",t),this.root.appendChild(e)}},mxXmlCanvas2D.prototype.setFontStyle=function(t){if(this.textEnabled){if(null==t&&(t=0),this.compressed){if(this.state.fontStyle==t)return;mxAbstractCanvas2D.prototype.setFontStyle.apply(this,arguments)}var e=this.createElement("fontstyle");e.setAttribute("style",t),this.root.appendChild(e)}},mxXmlCanvas2D.prototype.setShadow=function(t){if(this.compressed){if(this.state.shadow==t)return;mxAbstractCanvas2D.prototype.setShadow.apply(this,arguments)}var e=this.createElement("shadow");e.setAttribute("enabled",t?"1":"0"),this.root.appendChild(e)},mxXmlCanvas2D.prototype.setShadowColor=function(t){if(this.compressed){if(t==mxConstants.NONE&&(t=null),this.state.shadowColor==t)return;mxAbstractCanvas2D.prototype.setShadowColor.apply(this,arguments)}var e=this.createElement("shadowcolor");e.setAttribute("color",null!=t?t:mxConstants.NONE),this.root.appendChild(e)},mxXmlCanvas2D.prototype.setShadowAlpha=function(t){if(this.compressed){if(this.state.shadowAlpha==t)return;mxAbstractCanvas2D.prototype.setShadowAlpha.apply(this,arguments)}var e=this.createElement("shadowalpha");e.setAttribute("alpha",t),this.root.appendChild(e)},mxXmlCanvas2D.prototype.setShadowOffset=function(t,e){if(this.compressed){if(this.state.shadowDx==t&&this.state.shadowDy==e)return;mxAbstractCanvas2D.prototype.setShadowOffset.apply(this,arguments)}var n=this.createElement("shadowoffset");n.setAttribute("dx",t),n.setAttribute("dy",e),this.root.appendChild(n)},mxXmlCanvas2D.prototype.rect=function(t,e,n,i){var l=this.createElement("rect");l.setAttribute("x",this.format(t)),l.setAttribute("y",this.format(e)),l.setAttribute("w",this.format(n)),l.setAttribute("h",this.format(i)),this.root.appendChild(l)},mxXmlCanvas2D.prototype.roundrect=function(t,e,n,i,l,o){var s=this.createElement("roundrect");s.setAttribute("x",this.format(t)),s.setAttribute("y",this.format(e)),s.setAttribute("w",this.format(n)),s.setAttribute("h",this.format(i)),s.setAttribute("dx",this.format(l)),s.setAttribute("dy",this.format(o)),this.root.appendChild(s)},mxXmlCanvas2D.prototype.ellipse=function(t,e,n,i){var l=this.createElement("ellipse");l.setAttribute("x",this.format(t)),l.setAttribute("y",this.format(e)),l.setAttribute("w",this.format(n)),l.setAttribute("h",this.format(i)),this.root.appendChild(l)},mxXmlCanvas2D.prototype.image=function(t,e,n,i,l,o,s,r){l=this.converter.convert(l);var a=this.createElement("image");a.setAttribute("x",this.format(t)),a.setAttribute("y",this.format(e)),a.setAttribute("w",this.format(n)),a.setAttribute("h",this.format(i)),a.setAttribute("src",l),a.setAttribute("aspect",o?"1":"0"),a.setAttribute("flipH",s?"1":"0"),a.setAttribute("flipV",r?"1":"0"),this.root.appendChild(a)},mxXmlCanvas2D.prototype.begin=function(){this.root.appendChild(this.createElement("begin")),this.lastY=this.lastX=0},mxXmlCanvas2D.prototype.moveTo=function(t,e){var n=this.createElement("move");n.setAttribute("x",this.format(t)),n.setAttribute("y",this.format(e)),this.root.appendChild(n),this.lastX=t,this.lastY=e},mxXmlCanvas2D.prototype.lineTo=function(t,e){var n=this.createElement("line");n.setAttribute("x",this.format(t)),n.setAttribute("y",this.format(e)),this.root.appendChild(n),this.lastX=t,this.lastY=e},mxXmlCanvas2D.prototype.quadTo=function(t,e,n,i){var l=this.createElement("quad");l.setAttribute("x1",this.format(t)),l.setAttribute("y1",this.format(e)),l.setAttribute("x2",this.format(n)),l.setAttribute("y2",this.format(i)),this.root.appendChild(l),this.lastX=n,this.lastY=i},mxXmlCanvas2D.prototype.curveTo=function(t,e,n,i,l,o){var s=this.createElement("curve");s.setAttribute("x1",this.format(t)),s.setAttribute("y1",this.format(e)),s.setAttribute("x2",this.format(n)),s.setAttribute("y2",this.format(i)),s.setAttribute("x3",this.format(l)),s.setAttribute("y3",this.format(o)),this.root.appendChild(s),this.lastX=l,this.lastY=o},mxXmlCanvas2D.prototype.close=function(){this.root.appendChild(this.createElement("close"))},mxXmlCanvas2D.prototype.text=function(t,e,n,i,l,o,s,r,a,h,u,d,c){var p;this.textEnabled&&null!=l&&(mxUtils.isNode(l)&&(l=mxUtils.getOuterHtml(l)),(p=this.createElement("text")).setAttribute("x",this.format(t)),p.setAttribute("y",this.format(e)),p.setAttribute("w",this.format(n)),p.setAttribute("h",this.format(i)),p.setAttribute("str",l),null!=o&&p.setAttribute("align",o),null!=s&&p.setAttribute("valign",s),p.setAttribute("wrap",r?"1":"0"),p.setAttribute("format",a=null==a?"":a),null!=h&&p.setAttribute("overflow",h),null!=u&&p.setAttribute("clip",u?"1":"0"),null!=d&&p.setAttribute("rotation",d),null!=c&&p.setAttribute("dir",c),this.root.appendChild(p))},mxXmlCanvas2D.prototype.stroke=function(){this.root.appendChild(this.createElement("stroke"))},mxXmlCanvas2D.prototype.fill=function(){this.root.appendChild(this.createElement("fill"))},mxXmlCanvas2D.prototype.fillAndStroke=function(){this.root.appendChild(this.createElement("fillstroke"))},mxUtils.extend(mxSvgCanvas2D,mxAbstractCanvas2D),function(){if(mxSvgCanvas2D.prototype.useDomParser=!mxClient.IS_IE&&"function"==typeof DOMParser&&"function"==typeof XMLSerializer,mxSvgCanvas2D.prototype.useDomParser)try{var t=(new DOMParser).parseFromString("test text","text/html");mxSvgCanvas2D.prototype.useDomParser=null!=t}catch(t){mxSvgCanvas2D.prototype.useDomParser=!1}mxSvgCanvas2D.prototype.useAbsoluteIds=!mxClient.IS_CHROMEAPP&&!mxClient.IS_IE&&!mxClient.IS_IE11&&!mxClient.IS_EDGE&&0<document.getElementsByTagName("base").length}(),mxSvgCanvas2D.prototype.node=null,mxSvgCanvas2D.prototype.matchHtmlAlignment=!0,mxSvgCanvas2D.prototype.textEnabled=!0,mxSvgCanvas2D.prototype.foEnabled=!0,mxSvgCanvas2D.prototype.foAltText="[Object]",mxSvgCanvas2D.prototype.foOffset=0,mxSvgCanvas2D.prototype.textOffset=0,mxSvgCanvas2D.prototype.imageOffset=0,mxSvgCanvas2D.prototype.strokeTolerance=0,mxSvgCanvas2D.prototype.minStrokeWidth=1,mxSvgCanvas2D.prototype.refCount=0,mxSvgCanvas2D.prototype.lineHeightCorrection=1,mxSvgCanvas2D.prototype.pointerEventsValue="all",mxSvgCanvas2D.prototype.fontMetricsPadding=10,mxSvgCanvas2D.prototype.cacheOffsetSize=!0,mxSvgCanvas2D.prototype.format=function(t){return parseFloat(parseFloat(t).toFixed(2))},mxSvgCanvas2D.prototype.getBaseUrl=function(){var t=window.location.href,e=t.lastIndexOf("#");return 0<e?t.substring(0,e):t},mxSvgCanvas2D.prototype.reset=function(){mxAbstractCanvas2D.prototype.reset.apply(this,arguments),this.gradients=[]},mxSvgCanvas2D.prototype.createStyle=function(t){return(t=this.createElement("style")).setAttribute("type","text/css"),mxUtils.write(t,"svg{font-family:"+mxConstants.DEFAULT_FONTFAMILY+";font-size:"+mxConstants.DEFAULT_FONTSIZE+";fill:none;stroke-miterlimit:10}"),t},mxSvgCanvas2D.prototype.createElement=function(t,e){return null!=this.root.ownerDocument.createElementNS?this.root.ownerDocument.createElementNS(e||mxConstants.NS_SVG,t):(t=this.root.ownerDocument.createElement(t),null!=e&&t.setAttribute("xmlns",e),t)},mxSvgCanvas2D.prototype.getAlternateText=function(t,e,n,i,l,o,s,r,a,h,u,d,c){return null!=o?this.foAltText:null},mxSvgCanvas2D.prototype.createAlternateContent=function(t,e,n,i,l,o,s,r,a,h,u,d,c){return t=this.getAlternateText(t,e,n,i,l,o,s,r,a,h,u,d,c),i=this.state,null!=t&&0<i.fontSize?(r=r==mxConstants.ALIGN_TOP?1:r==mxConstants.ALIGN_BOTTOM?0:.3,l=s==mxConstants.ALIGN_RIGHT?"end":s==mxConstants.ALIGN_LEFT?"start":"middle",(s=this.createElement("text")).setAttribute("x",Math.round(e+i.dx)),s.setAttribute("y",Math.round(n+i.dy+r*i.fontSize)),s.setAttribute("fill",i.fontColor||"black"),s.setAttribute("font-family",i.fontFamily),s.setAttribute("font-size",Math.round(i.fontSize)+"px"),"start"!=l&&s.setAttribute("text-anchor",l),(i.fontStyle&mxConstants.FONT_BOLD)==mxConstants.FONT_BOLD&&s.setAttribute("font-weight","bold"),(i.fontStyle&mxConstants.FONT_ITALIC)==mxConstants.FONT_ITALIC&&s.setAttribute("font-style","italic"),e=[],(i.fontStyle&mxConstants.FONT_UNDERLINE)==mxConstants.FONT_UNDERLINE&&e.push("underline"),(i.fontStyle&mxConstants.FONT_STRIKETHROUGH)==mxConstants.FONT_STRIKETHROUGH&&e.push("line-through"),0<e.length&&s.setAttribute("text-decoration",e.join(" ")),mxUtils.write(s,t),s):null},mxSvgCanvas2D.prototype.createGradientId=function(t,e,n,i,l){return"#"==t.charAt(0)&&(t=t.substring(1)),"#"==e.charAt(0)&&(e=e.substring(1)),t=t.toLowerCase()+"-"+n,e=e.toLowerCase()+"-"+i,(n=null)==l||l==mxConstants.DIRECTION_SOUTH?n="s":l==mxConstants.DIRECTION_EAST?n="e":(i=t,t=e,e=i,l==mxConstants.DIRECTION_NORTH?n="s":l==mxConstants.DIRECTION_WEST&&(n="e")),"mx-gradient-"+t+"-"+e+"-"+n},mxSvgCanvas2D.prototype.getSvgGradient=function(t,e,n,i,l){var o=this.createGradientId(t,e,n,i,l),s=this.gradients[o];if(null==s){var r=this.root.ownerSVGElement,a=0,h=o+"-"+a;if(null!=r)for(s=r.ownerDocument.getElementById(h);null!=s&&s.ownerSVGElement!=r;)h=o+"-"+a++,s=r.ownerDocument.getElementById(h);else h="id"+ ++this.refCount;null==s&&((s=this.createSvgGradient(t,e,n,i,l)).setAttribute("id",h),(null!=this.defs?this.defs:r).appendChild(s)),this.gradients[o]=s}return s.getAttribute("id")},mxSvgCanvas2D.prototype.createSvgGradient=function(t,e,n,i,l){var o=this.createElement("linearGradient");return o.setAttribute("x1","0%"),o.setAttribute("y1","0%"),o.setAttribute("x2","0%"),o.setAttribute("y2","0%"),null==l||l==mxConstants.DIRECTION_SOUTH?o.setAttribute("y2","100%"):l==mxConstants.DIRECTION_EAST?o.setAttribute("x2","100%"):l==mxConstants.DIRECTION_NORTH?o.setAttribute("y1","100%"):l==mxConstants.DIRECTION_WEST&&o.setAttribute("x1","100%"),n=n<1?";stop-opacity:"+n:"",(l=this.createElement("stop")).setAttribute("offset","0%"),l.setAttribute("style","stop-color:"+t+n),o.appendChild(l),n=i<1?";stop-opacity:"+i:"",(l=this.createElement("stop")).setAttribute("offset","100%"),l.setAttribute("style","stop-color:"+e+n),o.appendChild(l),o},mxSvgCanvas2D.prototype.addNode=function(t,e){var n=this.node,i=this.state;if(null!=n){if("path"==n.nodeName){if(!(null!=this.path&&0<this.path.length))return;n.setAttribute("d",this.path.join(" "))}t&&null!=i.fillColor?this.updateFill():this.styleEnabled||(n.setAttribute("fill","ellipse"==n.nodeName&&mxClient.IS_FF?"transparent":"none"),t=!1),e&&null!=i.strokeColor?this.updateStroke():this.styleEnabled||n.setAttribute("stroke","none"),null!=i.transform&&0<i.transform.length&&n.setAttribute("transform",i.transform),this.pointerEvents?n.setAttribute("pointer-events",this.pointerEventsValue):this.pointerEvents||null!=this.originalRoot||n.setAttribute("pointer-events","none"),i.shadow&&this.root.appendChild(this.createShadow(n)),0<this.strokeTolerance&&!t&&this.addTolerance(n),("rect"!=n.nodeName&&"path"!=n.nodeName&&"ellipse"!=n.nodeName||"none"!=n.getAttribute("fill")&&"transparent"!=n.getAttribute("fill")||"none"!=n.getAttribute("stroke")||"none"!=n.getAttribute("pointer-events"))&&this.root.appendChild(n),this.node=null}},mxSvgCanvas2D.prototype.addTolerance=function(t){this.root.appendChild(this.createTolerance(t))},mxSvgCanvas2D.prototype.updateFill=function(){var t,e=this.state;(e.alpha<1||e.fillAlpha<1)&&this.node.setAttribute("fill-opacity",e.alpha*e.fillAlpha),null!=e.fillColor&&(null!=e.gradientColor?(e=this.getSvgGradient(String(e.fillColor),String(e.gradientColor),e.gradientFillAlpha,e.gradientAlpha,e.gradientDirection),this.root.ownerDocument==document&&this.useAbsoluteIds?(t=this.getBaseUrl().replace(/([\(\)])/g,"\\$1"),this.node.setAttribute("fill","url("+t+"#"+e+")")):this.node.setAttribute("fill","url(#"+e+")")):this.node.setAttribute("fill",String(e.fillColor).toLowerCase()))},mxSvgCanvas2D.prototype.getCurrentStrokeWidth=function(){return Math.max(this.minStrokeWidth,Math.max(.01,this.format(this.state.strokeWidth*this.state.scale)))},mxSvgCanvas2D.prototype.updateStroke=function(){var t=this.state;this.node.setAttribute("stroke",String(t.strokeColor).toLowerCase()),(t.alpha<1||t.strokeAlpha<1)&&this.node.setAttribute("stroke-opacity",t.alpha*t.strokeAlpha);var e=this.getCurrentStrokeWidth();1!=e&&this.node.setAttribute("stroke-width",e),"path"==this.node.nodeName&&this.updateStrokeAttributes(),t.dashed&&this.node.setAttribute("stroke-dasharray",this.createDashPattern((t.fixDash?1:t.strokeWidth)*t.scale))},mxSvgCanvas2D.prototype.updateStrokeAttributes=function(){var t,e=this.state;null!=e.lineJoin&&"miter"!=e.lineJoin&&this.node.setAttribute("stroke-linejoin",e.lineJoin),null==e.lineCap||"butt"!=(t="flat"==(t=e.lineCap)?"butt":t)&&this.node.setAttribute("stroke-linecap",t),null==e.miterLimit||this.styleEnabled&&10==e.miterLimit||this.node.setAttribute("stroke-miterlimit",e.miterLimit)},mxSvgCanvas2D.prototype.createDashPattern=function(t){var e=[];if("string"==typeof this.state.dashPattern){var n=this.state.dashPattern.split(" ");if(0<n.length)for(var i=0;i<n.length;i++)e[i]=Number(n[i])*t}return e.join(" ")},mxSvgCanvas2D.prototype.createTolerance=function(t){t=t.cloneNode(!0);var e=parseFloat(t.getAttribute("stroke-width")||1)+this.strokeTolerance;return t.setAttribute("pointer-events","stroke"),t.setAttribute("visibility","hidden"),t.removeAttribute("stroke-dasharray"),t.setAttribute("stroke-width",e),t.setAttribute("fill","none"),t.setAttribute("stroke",mxClient.IS_OT?"none":"white"),t},mxSvgCanvas2D.prototype.createShadow=function(t){t=t.cloneNode(!0);var e=this.state;return"none"==t.getAttribute("fill")||mxClient.IS_FF&&"transparent"==t.getAttribute("fill")||t.setAttribute("fill",e.shadowColor),"none"!=t.getAttribute("stroke")&&t.setAttribute("stroke",e.shadowColor),t.setAttribute("transform","translate("+this.format(e.shadowDx*e.scale)+","+this.format(e.shadowDy*e.scale)+")"+(e.transform||"")),t.setAttribute("opacity",e.shadowAlpha),t},mxSvgCanvas2D.prototype.setLink=function(t,e){var n;null==t?this.root=this.originalRoot:(this.originalRoot=this.root,null==(n=this.createElement("a")).setAttributeNS||this.root.ownerDocument!=document&&null==document.documentMode?n.setAttribute("xlink:href",t):n.setAttributeNS(mxConstants.NS_XLINK,"xlink:href",t),null!=e&&n.setAttribute("target",e),this.root.appendChild(n),this.root=n)},mxSvgCanvas2D.prototype.rotate=function(t,e,n,i,l){var o,s,r,a,h;(0!=t||e||n)&&(i+=(o=this.state).dx,l+=o.dy,i*=o.scale,l*=o.scale,o.transform=o.transform||"",e&&n?t+=180:e!=n&&(r=e?-1:1,a=n?l:0,h=n?-1:1,o.transform+="translate("+this.format(s=e?i:0)+","+this.format(a)+")scale("+this.format(r)+","+this.format(h)+")translate("+this.format(-s)+","+this.format(-a)+")"),(e?!n:n)&&(t*=-1),0!=t&&(o.transform+="rotate("+this.format(t)+","+this.format(i)+","+this.format(l)+")"),o.rotation+=t,o.rotationCx=i,o.rotationCy=l)},mxSvgCanvas2D.prototype.begin=function(){mxAbstractCanvas2D.prototype.begin.apply(this,arguments),this.node=this.createElement("path")},mxSvgCanvas2D.prototype.rect=function(t,e,n,i){var l=this.state,o=this.createElement("rect");o.setAttribute("x",this.format((t+l.dx)*l.scale)),o.setAttribute("y",this.format((e+l.dy)*l.scale)),o.setAttribute("width",this.format(n*l.scale)),o.setAttribute("height",this.format(i*l.scale)),this.node=o},mxSvgCanvas2D.prototype.roundrect=function(t,e,n,i,l,o){this.rect(t,e,n,i),0<l&&this.node.setAttribute("rx",this.format(l*this.state.scale)),0<o&&this.node.setAttribute("ry",this.format(o*this.state.scale))},mxSvgCanvas2D.prototype.ellipse=function(t,e,n,i){var l=this.state,o=this.createElement("ellipse");o.setAttribute("cx",this.format((t+n/2+l.dx)*l.scale)),o.setAttribute("cy",this.format((e+i/2+l.dy)*l.scale)),o.setAttribute("rx",n/2*l.scale),o.setAttribute("ry",i/2*l.scale),this.node=o},mxSvgCanvas2D.prototype.image=function(t,e,n,i,l,o,s,r){l=this.converter.convert(l),o=null==o||o,s=null!=s&&s,r=null!=r&&r;var a=this.state;t+=a.dx,e+=a.dy;var h,u,d,c=this.createElement("image");c.setAttribute("x",this.format(t*a.scale)+this.imageOffset),c.setAttribute("y",this.format(e*a.scale)+this.imageOffset),c.setAttribute("width",this.format(n*a.scale)),c.setAttribute("height",this.format(i*a.scale)),null==c.setAttributeNS?c.setAttribute("xlink:href",l):c.setAttributeNS(mxConstants.NS_XLINK,"xlink:href",l),o||c.setAttribute("preserveAspectRatio","none"),(a.alpha<1||a.fillAlpha<1)&&c.setAttribute("opacity",a.alpha*a.fillAlpha),l=this.state.transform||"",(s||r)&&(h=o=1,d=u=0,s&&(o=-1,u=-n-2*t),r&&(h=-1,d=-i-2*e),l+="scale("+o+","+h+")translate("+u*a.scale+","+d*a.scale+")"),0<l.length&&c.setAttribute("transform",l),this.pointerEvents||c.setAttribute("pointer-events","none"),this.root.appendChild(c)},mxSvgCanvas2D.prototype.convertHtml=function(t){if(this.useDomParser)null!=(e=(new DOMParser).parseFromString(t,"text/html"))&&"</body>"==(t="<body"==(t=(new XMLSerializer).serializeToString(e.body)).substring(0,5)?t.substring(t.indexOf(">",5)+1):t).substring(t.length-7,t.length)&&(t=t.substring(0,t.length-7));else{if(null!=document.implementation&&null!=document.implementation.createDocument){var e,n=(e=document.implementation.createDocument("http://www.w3.org/1999/xhtml","html",null)).createElement("body");e.documentElement.appendChild(n);var i=document.createElement("div");for(i.innerHTML=t,t=i.firstChild;null!=t;)i=t.nextSibling,n.appendChild(e.adoptNode(t)),t=i;return n.innerHTML}(e=document.createElement("textarea")).innerHTML=t.replace(/&amp;/g,"&amp;amp;").replace(/&#60;/g,"&amp;lt;").replace(/&#62;/g,"&amp;gt;").replace(/&lt;/g,"&amp;lt;").replace(/&gt;/g,"&amp;gt;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),t=e.value.replace(/&/g,"&amp;").replace(/&amp;lt;/g,"&lt;").replace(/&amp;gt;/g,"&gt;").replace(/&amp;amp;/g,"&amp;").replace(/<br>/g,"<br />").replace(/<hr>/g,"<hr />").replace(/(<img[^>]+)>/gm,"$1 />")}return t},mxSvgCanvas2D.prototype.createDiv=function(t){if(mxUtils.isNode(t)||(t="<div><div>"+this.convertHtml(t)+"</div></div>"),mxClient.IS_IE||mxClient.IS_IE11||!document.createElementNS)return mxUtils.isNode(t)&&(t="<div><div>"+mxUtils.getXml(t)+"</div></div>"),mxUtils.parseXml('<div xmlns="http://www.w3.org/1999/xhtml">'+t+"</div>").documentElement;var e,n,i=document.createElementNS("http://www.w3.org/1999/xhtml","div");return mxUtils.isNode(t)?(n=(e=document.createElement("div")).cloneNode(!1),this.root.ownerDocument!=document?e.appendChild(t.cloneNode(!0)):e.appendChild(t),n.appendChild(e),i.appendChild(n)):i.innerHTML=t,i},mxSvgCanvas2D.prototype.updateText=function(t,e,n,i,l,o,s,r,a,h,u){null!=u&&null!=u.firstChild&&null!=u.firstChild.firstChild&&this.updateTextNodes(t,e,n,i,l,o,s,r,a,h,u.firstChild)},mxSvgCanvas2D.prototype.addForeignObject=function(t,e,n,i,l,o,s,r,a,h,u,d,c,p,m){c=this.createElement("g");var g=this.createElement("foreignObject");g.setAttribute("style","overflow: visible; text-align: left;"),g.setAttribute("pointer-events","none"),p.ownerDocument!=document&&(p=mxUtils.importNodeImplementation(g.ownerDocument,p,!0)),g.appendChild(p),c.appendChild(g),this.updateTextNodes(t,e,n,i,o,s,r,h,u,d,c),this.root.ownerDocument==document||null!=(t=this.createAlternateContent(g,t,e,n,i,l,o,s,r,a,h,u,d))&&(g.setAttribute("requiredFeatures","http://www.w3.org/TR/SVG11/feature#Extensibility"),(e=this.createElement("switch")).appendChild(g),e.appendChild(t),c.appendChild(e)),m.appendChild(c)},mxSvgCanvas2D.prototype.updateTextNodes=function(t,e,n,i,l,o,s,r,a,h,u){var d=this.state.scale;mxSvgCanvas2D.createCss(n+2,i,l,o,s,r,a,null!=this.state.fontBackgroundColor?this.state.fontBackgroundColor:null,null!=this.state.fontBorderColor?this.state.fontBorderColor:null,"display: flex; align-items: unsafe "+(o==mxConstants.ALIGN_TOP?"flex-start":o==mxConstants.ALIGN_BOTTOM?"flex-end":"center")+"; justify-content: unsafe "+(l==mxConstants.ALIGN_LEFT?"flex-start":l==mxConstants.ALIGN_RIGHT?"flex-end":"center")+"; ",this.getTextCss(),d,mxUtils.bind(this,function(n,i,l,o,s){t+=this.state.dx,e+=this.state.dy;var r=u.firstChild,a=r.firstChild,c=a.firstChild,p=(this.rotateHtml?this.state.rotation:0)+(null!=h?h:0),m=(0!=this.foOffset?"translate("+this.foOffset+" "+this.foOffset+")":"")+(1!=d?"scale("+d+")":"");c.firstChild.setAttribute("style",s),c.setAttribute("style",o),r.setAttribute("width",Math.ceil(1/Math.min(1,d)*100)+"%"),r.setAttribute("height",Math.ceil(1/Math.min(1,d)*100)+"%"),(i=Math.round(e+i))<0?r.setAttribute("y",i):(r.removeAttribute("y"),l+="padding-top: "+i+"px; "),a.setAttribute("style",l+"margin-left: "+Math.round(t+n)+"px;"),(m+=0!=p?"rotate("+p+" "+t+" "+e+")":"")?u.setAttribute("transform",m):u.removeAttribute("transform"),1!=this.state.alpha?u.setAttribute("opacity",this.state.alpha):u.removeAttribute("opacity")}))},mxSvgCanvas2D.createCss=function(t,e,n,i,l,o,s,r,a,h,u,d,c){d="box-sizing: border-box; font-size: 0; text-align: "+(n==mxConstants.ALIGN_LEFT?"left":n==mxConstants.ALIGN_RIGHT?"right":"center")+"; ";var p=mxUtils.getAlignmentAsPoint(n,i);n="overflow: hidden; ";var m="width: 1px; ",g="height: 1px; ",x=p.x*t;p=p.y*e,s?(m="width: "+Math.round(t)+"px; ",d+="max-height: "+Math.round(e)+"px; ",p=0):"fill"==o?(m="width: "+Math.round(t)+"px; ",g="height: "+Math.round(e)+"px; ",u+="width: 100%; height: 100%; ",d+="width: "+Math.round(t-2)+"px; "+g):"width"==o?(u+="width: 100%; ",d+=m="width: "+Math.round(t-2)+"px; ",(p=0)<e&&(d+="max-height: "+Math.round(e)+"px; ")):"block"==o?(u+="width: 100%; ",n="",p=0,d+=m="width: "+Math.round(t-2)+"px; ","middle"==i&&(d+="max-height: "+Math.round(e)+"px; ")):(n="",p=0),e="",null!=r&&(e+="background-color: "+r+"; "),null!=a&&(e+="border: 1px solid "+a+"; "),""==n||s?u+=e:d+=e,l&&0<t?(u+="white-space: normal; word-wrap: "+mxConstants.WORD_WRAP+"; ",m="width: "+Math.round(t)+"px; ",""!=n&&"fill"!=o&&(p=0)):(u+="white-space: nowrap; ",""==n&&"block"!=o&&(x=0)),c(x,p,h+m+g,d+n,u,n)},mxSvgCanvas2D.prototype.getTextCss=function(){var t=this.state,e="display: inline-block; font-size: "+t.fontSize+"px; font-family: "+t.fontFamily+"; color: "+t.fontColor+"; line-height: "+(mxConstants.ABSOLUTE_LINE_HEIGHT?t.fontSize*mxConstants.LINE_HEIGHT+"px":mxConstants.LINE_HEIGHT*this.lineHeightCorrection)+"; pointer-events: "+(this.pointerEvents?this.pointerEventsValue:"none")+"; ";(t.fontStyle&mxConstants.FONT_BOLD)==mxConstants.FONT_BOLD&&(e+="font-weight: bold; "),(t.fontStyle&mxConstants.FONT_ITALIC)==mxConstants.FONT_ITALIC&&(e+="font-style: italic; ");var n=[];return(t.fontStyle&mxConstants.FONT_UNDERLINE)==mxConstants.FONT_UNDERLINE&&n.push("underline"),(t.fontStyle&mxConstants.FONT_STRIKETHROUGH)==mxConstants.FONT_STRIKETHROUGH&&n.push("line-through"),0<n.length&&(e+="text-decoration: "+n.join(" ")+"; "),e},mxSvgCanvas2D.prototype.text=function(t,e,n,i,l,o,s,r,a,h,u,d,c){var p;this.textEnabled&&null!=l&&(d=null!=d?d:0,this.foEnabled&&"html"==a?null!=(p=this.createDiv(l))&&(null!=c&&p.setAttribute("dir",c),this.addForeignObject(t,e,n,i,l,o,s,r,a,h,u,d,c,p,this.root)):this.plainText(t+this.state.dx,e+this.state.dy,n,i,l,o,s,r,h,u,d,c))},mxSvgCanvas2D.prototype.createClip=function(t,e,n,i){for(var l="mx-clip-"+(t=Math.round(t))+"-"+(e=Math.round(e))+"-"+(n=Math.round(n))+"-"+(i=Math.round(i)),o=0,s=l+"-"+o;null!=document.getElementById(s);)s=l+"-"+ ++o;return clip=this.createElement("clipPath"),clip.setAttribute("id",s),(l=this.createElement("rect")).setAttribute("x",t),l.setAttribute("y",e),l.setAttribute("width",n),l.setAttribute("height",i),clip.appendChild(l),clip},mxSvgCanvas2D.prototype.plainText=function(t,e,n,i,l,o,s,r,a,h,u,d){u=null!=u?u:0;var c=(r=this.state).fontSize,p=this.createElement("g"),m=r.transform||"";this.updateFont(p),this.pointerEvents||null!=this.originalRoot||p.setAttribute("pointer-events","none"),0!=u&&(m+="rotate("+u+","+this.format(t*r.scale)+","+this.format(e*r.scale)+")"),null!=d&&p.setAttribute("direction",d),h&&0<n&&0<i&&(d=t,u=e,o==mxConstants.ALIGN_CENTER?d-=n/2:o==mxConstants.ALIGN_RIGHT&&(d-=n),"fill"!=a&&(s==mxConstants.ALIGN_MIDDLE?u-=i/2:s==mxConstants.ALIGN_BOTTOM&&(u-=i)),u=this.createClip(d*r.scale-2,u*r.scale-2,n*r.scale+4,i*r.scale+4),(null!=this.defs?this.defs:this.root).appendChild(u),mxClient.IS_CHROMEAPP||mxClient.IS_IE||mxClient.IS_IE11||mxClient.IS_EDGE||this.root.ownerDocument!=document?p.setAttribute("clip-path","url(#"+u.getAttribute("id")+")"):(d=this.getBaseUrl().replace(/([\(\)])/g,"\\$1"),p.setAttribute("clip-path","url("+d+"#"+u.getAttribute("id")+")"))),"start"!=(u=o==mxConstants.ALIGN_RIGHT?"end":o==mxConstants.ALIGN_CENTER?"middle":"start")&&p.setAttribute("text-anchor",u),this.styleEnabled&&c==mxConstants.DEFAULT_FONTSIZE||p.setAttribute("font-size",c*r.scale+"px"),0<m.length&&p.setAttribute("transform",m),r.alpha<1&&p.setAttribute("opacity",r.alpha),m=l.split("\n"),d=Math.round(c*mxConstants.LINE_HEIGHT);var g=c+(m.length-1)*d;for(u=e+c-1,s==mxConstants.ALIGN_MIDDLE?u-="fill"==a?i/2:h=(this.matchHtmlAlignment&&h&&0<i?Math.min(g,i):g)/2:s==mxConstants.ALIGN_BOTTOM&&(u-="fill"==a?i:(h=this.matchHtmlAlignment&&h&&0<i?Math.min(g,i):g)+1),h=0;h<m.length;h++)0<m[h].length&&0<mxUtils.trim(m[h]).length&&((c=this.createElement("text")).setAttribute("x",this.format(t*r.scale)+this.textOffset),c.setAttribute("y",this.format(u*r.scale)+this.textOffset),mxUtils.write(c,m[h]),p.appendChild(c)),u+=d;this.root.appendChild(p),this.addTextBackground(p,l,t,e,n,"fill"==a?i:g,o,s,a)},mxSvgCanvas2D.prototype.updateFont=function(t){var e=this.state;t.setAttribute("fill",e.fontColor),this.styleEnabled&&e.fontFamily==mxConstants.DEFAULT_FONTFAMILY||t.setAttribute("font-family",e.fontFamily),(e.fontStyle&mxConstants.FONT_BOLD)==mxConstants.FONT_BOLD&&t.setAttribute("font-weight","bold"),(e.fontStyle&mxConstants.FONT_ITALIC)==mxConstants.FONT_ITALIC&&t.setAttribute("font-style","italic");var n=[];(e.fontStyle&mxConstants.FONT_UNDERLINE)==mxConstants.FONT_UNDERLINE&&n.push("underline"),(e.fontStyle&mxConstants.FONT_STRIKETHROUGH)==mxConstants.FONT_STRIKETHROUGH&&n.push("line-through"),0<n.length&&t.setAttribute("text-decoration",n.join(" "))},mxSvgCanvas2D.prototype.addTextBackground=function(t,e,n,i,l,o,s,r,a){var h=this.state;if(null!=h.fontBackgroundColor||null!=h.fontBorderColor){var u=null;if("fill"==a||"width"==a)s==mxConstants.ALIGN_CENTER?n-=l/2:s==mxConstants.ALIGN_RIGHT&&(n-=l),r==mxConstants.ALIGN_MIDDLE?i-=o/2:r==mxConstants.ALIGN_BOTTOM&&(i-=o),u=new mxRectangle((n+1)*h.scale,i*h.scale,(l-2)*h.scale,(o+2)*h.scale);else if(null!=t.getBBox&&this.root.ownerDocument==document)try{u=t.getBBox();var d=mxClient.IS_IE&&mxClient.IS_SVG;u=new mxRectangle(u.x,u.y+(d?0:1),u.width,u.height+(d?1:0))}catch(t){}null!=u&&0!=u.width&&0!=u.height||((u=document.createElement("div")).style.lineHeight=mxConstants.ABSOLUTE_LINE_HEIGHT?h.fontSize*mxConstants.LINE_HEIGHT+"px":mxConstants.LINE_HEIGHT,u.style.fontSize=h.fontSize+"px",u.style.fontFamily=h.fontFamily,u.style.whiteSpace="nowrap",u.style.position="absolute",u.style.visibility="hidden",u.style.display="inline-block",u.style.zoom="1",(h.fontStyle&mxConstants.FONT_BOLD)==mxConstants.FONT_BOLD&&(u.style.fontWeight="bold"),(h.fontStyle&mxConstants.FONT_ITALIC)==mxConstants.FONT_ITALIC&&(u.style.fontStyle="italic"),e=mxUtils.htmlEntities(e,!1),u.innerHTML=e.replace(/\n/g,"<br/>"),document.body.appendChild(u),l=u.offsetWidth,o=u.offsetHeight,u.parentNode.removeChild(u),s==mxConstants.ALIGN_CENTER?n-=l/2:s==mxConstants.ALIGN_RIGHT&&(n-=l),r==mxConstants.ALIGN_MIDDLE?i-=o/2:r==mxConstants.ALIGN_BOTTOM&&(i-=o),u=new mxRectangle((n+1)*h.scale,(i+2)*h.scale,l*h.scale,(o+1)*h.scale)),null!=u&&((e=this.createElement("rect")).setAttribute("fill",h.fontBackgroundColor||"none"),e.setAttribute("stroke",h.fontBorderColor||"none"),e.setAttribute("x",Math.floor(u.x-1)),e.setAttribute("y",Math.floor(u.y-1)),e.setAttribute("width",Math.ceil(u.width+2)),e.setAttribute("height",Math.ceil(u.height)),h=null!=h.fontBorderColor?Math.max(1,this.format(h.scale)):0,e.setAttribute("stroke-width",h),this.root.ownerDocument==document&&1==mxUtils.mod(h,2)&&e.setAttribute("transform","translate(0.5, 0.5)"),t.insertBefore(e,t.firstChild))}},mxSvgCanvas2D.prototype.stroke=function(){this.addNode(!1,!0)},mxSvgCanvas2D.prototype.fill=function(){this.addNode(!0,!1)},mxSvgCanvas2D.prototype.fillAndStroke=function(){this.addNode(!0,!0)},mxGuide.prototype.graph=null,mxGuide.prototype.states=null,mxGuide.prototype.horizontal=!0,mxGuide.prototype.vertical=!0,mxGuide.prototype.guideX=null,mxGuide.prototype.guideY=null,mxGuide.prototype.rounded=!1,mxGuide.prototype.tolerance=2,mxGuide.prototype.setStates=function(t){this.states=t},mxGuide.prototype.isEnabledForEvent=function(t){return!0},mxGuide.prototype.getGuideTolerance=function(t){return t&&this.graph.gridEnabled?this.graph.gridSize/2:this.tolerance},mxGuide.prototype.createGuideShape=function(t){return(t=new mxPolyline([],mxConstants.GUIDE_COLOR,mxConstants.GUIDE_STROKEWIDTH)).isDashed=!0,t},mxGuide.prototype.isStateIgnored=function(t){return!1},mxGuide.prototype.move=function(t,e,n,i){if(null!=this.states&&(this.horizontal||this.vertical)&&null!=t&&null!=e){i=function(n,i,l){var o=!1;l&&Math.abs(n-b)<m?(e.y=n-t.getCenterY(),m=Math.abs(n-b),o=!0):l||(Math.abs(n-f)<m?(e.y=n-t.y,m=Math.abs(n-f),o=!0):Math.abs(n-v)<m&&(e.y=n-t.y-t.height,m=Math.abs(n-v),o=!0)),o&&(d=i,c=n,null==this.guideY&&(this.guideY=this.createGuideShape(!1),this.guideY.dialect=mxConstants.DIALECT_SVG,this.guideY.pointerEvents=!1,this.guideY.init(this.graph.getView().getOverlayPane()))),u=u||o};var l=function(n,i,l){var o=!1;l&&Math.abs(n-y)<p?(e.x=n-t.getCenterX(),p=Math.abs(n-y),o=!0):l||(Math.abs(n-g)<p?(e.x=n-t.x,p=Math.abs(n-g),o=!0):Math.abs(n-x)<p&&(e.x=n-t.x-t.width,p=Math.abs(n-x),o=!0)),o&&(a=i,h=n,null==this.guideX&&(this.guideX=this.createGuideShape(!0),this.guideX.dialect=mxConstants.DIALECT_SVG,this.guideX.pointerEvents=!1,this.guideX.init(this.graph.getView().getOverlayPane()))),r=r||o},o=this.graph.getView().scale,s=(o=this.getGuideTolerance(n)*o,t.clone());s.x+=e.x,s.y+=e.y;var r=!1,a=null,h=null,u=!1,d=null,c=null,p=o,m=o,g=s.x,x=s.x+s.width,y=s.getCenterX(),f=s.y,v=s.y+s.height,b=s.getCenterY();for(o=0;o<this.states.length;o++)null==(s=this.states[o])||this.isStateIgnored(s)||(this.horizontal&&(l.call(this,s.getCenterX(),s,!0),l.call(this,s.x,s,!1),l.call(this,s.x+s.width,s,!1),null==s.cell&&l.call(this,s.getCenterX(),s,!1)),this.vertical&&(i.call(this,s.getCenterY(),s,!0),i.call(this,s.y,s,!1),i.call(this,s.y+s.height,s,!1),null==s.cell&&i.call(this,s.getCenterY(),s,!1)));this.graph.snapDelta(e,t,!n,r,u),e=this.getDelta(t,a,e.x,d,e.y),n=this.graph.container,r||null==this.guideX?null!=this.guideX&&((l=i=null)!=a&&null!=t&&(i=Math.min(t.y+e.y-this.graph.panDy,a.y),l=Math.max(t.y+t.height+e.y-this.graph.panDy,a.y+a.height)),this.guideX.points=null!=i&&null!=l?[new mxPoint(h,i),new mxPoint(h,l)]:[new mxPoint(h,-this.graph.panDy),new mxPoint(h,n.scrollHeight-3-this.graph.panDy)],this.guideX.stroke=this.getGuideColor(a,!0),this.guideX.node.style.visibility="visible",this.guideX.redraw()):this.guideX.node.style.visibility="hidden",u||null==this.guideY?null!=this.guideY&&((l=i=null)!=d&&null!=t&&(i=Math.min(t.x+e.x-this.graph.panDx,d.x),l=Math.max(t.x+t.width+e.x-this.graph.panDx,d.x+d.width)),this.guideY.points=null!=i&&null!=l?[new mxPoint(i,c),new mxPoint(l,c)]:[new mxPoint(-this.graph.panDx,c),new mxPoint(n.scrollWidth-3-this.graph.panDx,c)],this.guideY.stroke=this.getGuideColor(d,!1),this.guideY.node.style.visibility="visible",this.guideY.redraw()):this.guideY.node.style.visibility="hidden"}return e},mxGuide.prototype.getDelta=function(t,e,n,i,l){var o=this.graph.view.scale;return new mxPoint(n=this.rounded||null!=e&&null==e.cell?Math.round((t.x+n)/o)*o-t.x:n,l=this.rounded||null!=i&&null==i.cell?Math.round((t.y+l)/o)*o-t.y:l)},mxGuide.prototype.getGuideColor=function(t,e){return mxConstants.GUIDE_COLOR},mxGuide.prototype.hide=function(){this.setVisible(!1)},mxGuide.prototype.setVisible=function(t){null!=this.guideX&&(this.guideX.node.style.visibility=t?"visible":"hidden"),null!=this.guideY&&(this.guideY.node.style.visibility=t?"visible":"hidden")},mxGuide.prototype.destroy=function(){null!=this.guideX&&(this.guideX.destroy(),this.guideX=null),null!=this.guideY&&(this.guideY.destroy(),this.guideY=null)},mxShape.prototype.dialect=null,mxShape.prototype.scale=1,mxShape.prototype.antiAlias=!0,mxShape.prototype.minSvgStrokeWidth=1,mxShape.prototype.bounds=null,mxShape.prototype.points=null,mxShape.prototype.node=null,mxShape.prototype.state=null,mxShape.prototype.style=null,mxShape.prototype.boundingBox=null,mxShape.prototype.stencil=null,mxShape.prototype.svgStrokeTolerance=8,mxShape.prototype.pointerEvents=!0,mxShape.prototype.svgPointerEvents="all",mxShape.prototype.shapePointerEvents=!1,mxShape.prototype.stencilPointerEvents=!1,mxShape.prototype.outline=!1,mxShape.prototype.visible=!0,mxShape.prototype.useSvgBoundingBox=!1,mxShape.prototype.init=function(t){null==this.node&&(this.node=this.create(t),null!=t&&t.appendChild(this.node))},mxShape.prototype.initStyles=function(t){this.strokewidth=1,this.rotation=0,this.strokeOpacity=this.fillOpacity=this.opacity=100,this.flipV=this.flipH=!1},mxShape.prototype.isHtmlAllowed=function(){return!1},mxShape.prototype.getSvgScreenOffset=function(){return 1==mxUtils.mod(Math.max(1,Math.round((this.stencil&&"inherit"!=this.stencil.strokewidth?Number(this.stencil.strokewidth):this.strokewidth)*this.scale)),2)?.5:0},mxShape.prototype.create=function(t){return null!=t&&null!=t.ownerSVGElement?this.createSvg(t):this.createHtml(t)},mxShape.prototype.createSvg=function(){return document.createElementNS(mxConstants.NS_SVG,"g")},mxShape.prototype.createHtml=function(){var t=document.createElement("div");return t.style.position="absolute",t},mxShape.prototype.reconfigure=function(){this.redraw()},mxShape.prototype.redraw=function(){this.updateBoundsFromPoints(),this.visible&&this.checkBounds()?(this.node.style.visibility="visible",this.clear(),"DIV"==this.node.nodeName?this.redrawHtmlShape():this.redrawShape(),this.updateBoundingBox()):(this.node.style.visibility="hidden",this.boundingBox=null)},mxShape.prototype.clear=function(){if(null!=this.node.ownerSVGElement)for(;null!=this.node.lastChild;)this.node.removeChild(this.node.lastChild);else this.node.style.cssText="position:absolute;"+(null!=this.cursor?"cursor:"+this.cursor+";":""),this.node.innerHTML=""},mxShape.prototype.updateBoundsFromPoints=function(){var t=this.points;if(null!=t&&0<t.length&&null!=t[0]){this.bounds=new mxRectangle(Number(t[0].x),Number(t[0].y),1,1);for(var e=1;e<this.points.length;e++)null!=t[e]&&this.bounds.add(new mxRectangle(Number(t[e].x),Number(t[e].y),1,1))}},mxShape.prototype.getLabelBounds=function(t){var e=mxUtils.getValue(this.style,mxConstants.STYLE_DIRECTION,mxConstants.DIRECTION_EAST),n=t;if(e!=mxConstants.DIRECTION_SOUTH&&e!=mxConstants.DIRECTION_NORTH&&null!=this.state&&null!=this.state.text&&this.state.text.isPaintBoundsInverted()&&(e=(n=n.clone()).width,n.width=n.height,n.height=e),null==(n=this.getLabelMargins(n)))return t;var i="1"==mxUtils.getValue(this.style,mxConstants.STYLE_FLIPH,!1),l="1"==mxUtils.getValue(this.style,mxConstants.STYLE_FLIPV,!1);return null!=this.state&&null!=this.state.text&&this.state.text.isPaintBoundsInverted()&&(e=n.x,n.x=n.height,n.height=n.width,n.width=n.y,n.y=e,e=i,i=l,l=e),mxUtils.getDirectedBounds(t,n,this.style,i,l)},mxShape.prototype.getLabelMargins=function(t){return null},mxShape.prototype.checkBounds=function(){return!isNaN(this.scale)&&isFinite(this.scale)&&0<this.scale&&null!=this.bounds&&!isNaN(this.bounds.x)&&!isNaN(this.bounds.y)&&!isNaN(this.bounds.width)&&!isNaN(this.bounds.height)&&0<this.bounds.width&&0<this.bounds.height},mxShape.prototype.redrawShape=function(){var t=this.createCanvas();null!=t&&(t.pointerEvents=this.pointerEvents,this.beforePaint(t),this.paint(t),this.afterPaint(t),this.node!=t.root&&this.node.insertAdjacentHTML("beforeend",t.root.outerHTML),"DIV"==this.node.nodeName&&8==document.documentMode&&(this.node.style.filter="",mxUtils.addTransparentBackgroundFilter(this.node)),this.destroyCanvas(t))},mxShape.prototype.createCanvas=function(){var t=null;return null!=(t=null!=this.node.ownerSVGElement?this.createSvgCanvas():t)&&this.outline&&(t.setStrokeWidth(this.strokewidth),t.setStrokeColor(this.stroke),null!=this.isDashed&&t.setDashed(this.isDashed),t.setStrokeWidth=function(){},t.setStrokeColor=function(){},t.setFillColor=function(){},t.setGradient=function(){},t.setDashed=function(){},t.text=function(){}),t},mxShape.prototype.createSvgCanvas=function(){var t=new mxSvgCanvas2D(this.node,!1);t.strokeTolerance=this.pointerEvents?this.svgStrokeTolerance:0,t.pointerEventsValue=this.svgPointerEvents;var e=this.getSvgScreenOffset();return 0!=e?this.node.setAttribute("transform","translate("+e+","+e+")"):this.node.removeAttribute("transform"),t.minStrokeWidth=this.minSvgStrokeWidth,this.antiAlias||(t.format=function(t){return Math.round(parseFloat(t))}),t},mxShape.prototype.redrawHtmlShape=function(){this.updateHtmlBounds(this.node),this.updateHtmlFilters(this.node),this.updateHtmlColors(this.node)},mxShape.prototype.updateHtmlFilters=function(t){var e,n,i,l,o,s="";this.opacity<100&&(s+="alpha(opacity="+this.opacity+")"),this.isShadow&&(s+="progid:DXImageTransform.Microsoft.dropShadow (OffX='"+Math.round(mxConstants.SHADOW_OFFSET_X*this.scale)+"', OffY='"+Math.round(mxConstants.SHADOW_OFFSET_Y*this.scale)+"', Color='"+mxConstants.VML_SHADOWCOLOR+"')"),null!=this.fill&&this.fill!=mxConstants.NONE&&this.gradient&&this.gradient!=mxConstants.NONE&&(e=this.fill,n=this.gradient,i="0",l={east:0,south:1,west:2,north:3},o=null!=this.direction?l[this.direction]:0,1==(o=null!=this.gradientDirection?mxUtils.mod(o+l[this.gradientDirection]-1,4):o)?(i="1",l=e,e=n,n=l):2==o?(l=e,e=n,n=l):3==o&&(i="1"),s+="progid:DXImageTransform.Microsoft.gradient(startColorStr='"+e+"', endColorStr='"+n+"', gradientType='"+i+"')"),t.style.filter=s},mxShape.prototype.updateHtmlColors=function(t){var e=this.stroke;null!=e&&e!=mxConstants.NONE?(t.style.borderColor=e,this.isDashed?t.style.borderStyle="dashed":0<this.strokewidth&&(t.style.borderStyle="solid"),t.style.borderWidth=Math.max(1,Math.ceil(this.strokewidth*this.scale))+"px"):t.style.borderWidth="0px",null!=(e=this.outline?null:this.fill)&&e!=mxConstants.NONE?(t.style.backgroundColor=e,t.style.backgroundImage="none"):this.pointerEvents?t.style.backgroundColor="transparent":8==document.documentMode?mxUtils.addTransparentBackgroundFilter(t):this.setTransparentBackgroundImage(t)},mxShape.prototype.updateHtmlBounds=function(t){var e=9<=document.documentMode?0:Math.ceil(this.strokewidth*this.scale);t.style.borderWidth=Math.max(1,e)+"px",t.style.overflow="hidden",t.style.left=Math.round(this.bounds.x-e/2)+"px",t.style.top=Math.round(this.bounds.y-e/2)+"px","CSS1Compat"==document.compatMode&&(e=-e),t.style.width=Math.round(Math.max(0,this.bounds.width+e))+"px",t.style.height=Math.round(Math.max(0,this.bounds.height+e))+"px"},mxShape.prototype.destroyCanvas=function(t){if(t instanceof mxSvgCanvas2D){for(var e in t.gradients)null!=(e=t.gradients[e])&&(e.mxRefCount=(e.mxRefCount||0)+1);this.releaseSvgGradients(this.oldGradients),this.oldGradients=t.gradients}},mxShape.prototype.beforePaint=function(t){},mxShape.prototype.afterPaint=function(t){},mxShape.prototype.paint=function(t){var e,n,i=!1;null!=t&&this.outline&&(e=t.stroke,t.stroke=function(){i=!0,e.apply(this,arguments)},n=t.fillAndStroke,t.fillAndStroke=function(){i=!0,n.apply(this,arguments)});var l,o,s=this.scale,r=this.bounds.x/s,a=this.bounds.y/s,h=this.bounds.width/s,u=this.bounds.height/s;this.isPaintBoundsInverted()&&(r+=l=(h-u)/2,a-=l,l=h,h=u,u=l),this.updateTransform(t,r,a,h,u),this.configureCanvas(t,r,a,h,u),((l=null)==this.stencil&&null==this.points&&this.shapePointerEvents||null!=this.stencil&&this.stencilPointerEvents)&&(o=this.createBoundingBox(),this.dialect==mxConstants.DIALECT_SVG?(l=this.createTransparentSvgRectangle(o.x,o.y,o.width,o.height),this.node.appendChild(l)):((s=t.createRect("rect",o.x/s,o.y/s,o.width/s,o.height/s)).appendChild(t.createTransparentFill()),s.stroked="false",t.root.appendChild(s))),null!=this.stencil?this.stencil.drawShape(t,this,r,a,h,u):(t.setStrokeWidth(this.strokewidth),null!=(s=this.getWaypoints())?1<s.length&&this.paintEdgeShape(t,s):this.paintVertexShape(t,r,a,h,u)),null!=l&&null!=t.state&&null!=t.state.transform&&l.setAttribute("transform",t.state.transform),null!=t&&this.outline&&!i&&(t.rect(r,a,h,u),t.stroke())},mxShape.prototype.getWaypoints=function(){var t=this.points,e=null;if(null!=t&&(e=[],0<t.length)){var n=this.scale,i=Math.max(n,1),l=t[0];e.push(new mxPoint(l.x/n,l.y/n));for(var o=1;o<t.length;o++){var s=t[o];(Math.abs(l.x-s.x)>=i||Math.abs(l.y-s.y)>=i)&&e.push(new mxPoint(s.x/n,s.y/n)),l=s}}return e},mxShape.prototype.configureCanvas=function(t,e,n,i,l){var o=null;null!=this.style&&(o=this.style.dashPattern),t.setAlpha(this.opacity/100),t.setFillAlpha(this.fillOpacity/100),t.setStrokeAlpha(this.strokeOpacity/100),null!=this.isShadow&&t.setShadow(this.isShadow),null!=this.isDashed&&t.setDashed(this.isDashed,null!=this.style&&1==mxUtils.getValue(this.style,mxConstants.STYLE_FIX_DASH,!1)),null!=o&&t.setDashPattern(o),null!=this.fill&&this.fill!=mxConstants.NONE&&this.gradient&&this.gradient!=mxConstants.NONE?(e=this.getGradientBounds(t,e,n,i,l),t.setGradient(this.fill,this.gradient,e.x,e.y,e.width,e.height,this.gradientDirection)):t.setFillColor(this.fill),t.setStrokeColor(this.stroke),null==this.style||null!=this.fill&&this.fill!=mxConstants.NONE||"0"!=mxUtils.getValue(this.style,mxConstants.STYLE_POINTER_EVENTS,"1")||(t.pointerEvents=!1)},mxShape.prototype.getGradientBounds=function(t,e,n,i,l){return new mxRectangle(e,n,i,l)},mxShape.prototype.updateTransform=function(t,e,n,i,l){t.scale(this.scale),t.rotate(this.getShapeRotation(),this.flipH,this.flipV,e+i/2,n+l/2)},mxShape.prototype.paintVertexShape=function(t,e,n,i,l){this.paintBackground(t,e,n,i,l),this.outline&&null!=this.style&&0!=mxUtils.getValue(this.style,mxConstants.STYLE_BACKGROUND_OUTLINE,0)||(t.setShadow(!1),this.paintForeground(t,e,n,i,l))},mxShape.prototype.paintBackground=function(t,e,n,i,l){},mxShape.prototype.paintForeground=function(t,e,n,i,l){},mxShape.prototype.paintEdgeShape=function(t,e){},mxShape.prototype.getArcSize=function(t,e){var n="1"==mxUtils.getValue(this.style,mxConstants.STYLE_ABSOLUTE_ARCSIZE,0)?Math.min(t/2,Math.min(e/2,mxUtils.getValue(this.style,mxConstants.STYLE_ARCSIZE,mxConstants.LINE_ARCSIZE)/2)):(n=mxUtils.getValue(this.style,mxConstants.STYLE_ARCSIZE,100*mxConstants.RECTANGLE_ROUNDING_FACTOR)/100,Math.min(t*n,e*n));return n},mxShape.prototype.paintGlassEffect=function(t,e,n,i,l,o){var s=Math.ceil(this.strokewidth/2);t.setGradient("#ffffff","#ffffff",e,n,i,.6*l,"south",.9,.1),t.begin(),o+=2*s,this.isRounded?(t.moveTo(e-s+o,n-s),t.quadTo(e-s,n-s,e-s,n-s+o),t.lineTo(e-s,n+.4*l),t.quadTo(e+.5*i,n+.7*l,e+i+s,n+.4*l),t.lineTo(e+i+s,n-s+o),t.quadTo(e+i+s,n-s,e+i+s-o,n-s)):(t.moveTo(e-s,n-s),t.lineTo(e-s,n+.4*l),t.quadTo(e+.5*i,n+.7*l,e+i+s,n+.4*l),t.lineTo(e+i+s,n-s)),t.close(),t.fill()},mxShape.prototype.addPoints=function(t,e,n,i,l,o,s){if(null!=e&&0<e.length){s=null==s||s;var r=e[e.length-1];l&&n&&(h=(e=e.slice())[0],h=new mxPoint(r.x+(h.x-r.x)/2,r.y+(h.y-r.y)/2),e.splice(0,0,h));var a=e[0],h=1;for(s?t.moveTo(a.x,a.y):t.lineTo(a.x,a.y);h<(l?e.length:e.length-1);){s=e[mxUtils.mod(h,e.length)];var u=a.x-s.x;if(a=a.y-s.y,n&&(0!=u||0!=a)&&(null==o||mxUtils.indexOf(o,h-1)<0)){var d=Math.sqrt(u*u+a*a);for(t.lineTo(s.x+u*Math.min(i,d/2)/d,s.y+a*Math.min(i,d/2)/d),a=e[mxUtils.mod(h+1,e.length)];h<e.length-2&&0==Math.round(a.x-s.x)&&0==Math.round(a.y-s.y);)a=e[mxUtils.mod(h+2,e.length)],h++;u=a.x-s.x,a=a.y-s.y,d=Math.max(1,Math.sqrt(u*u+a*a)),u=s.x+u*Math.min(i,d/2)/d,a=s.y+a*Math.min(i,d/2)/d,t.quadTo(s.x,s.y,u,a),s=new mxPoint(u,a)}else t.lineTo(s.x,s.y);a=s,h++}l?t.close():t.lineTo(r.x,r.y)}},mxShape.prototype.resetStyles=function(){this.initStyles(),this.spacing=0,delete this.fill,delete this.gradient,delete this.gradientDirection,delete this.stroke,delete this.startSize,delete this.endSize,delete this.startArrow,delete this.endArrow,delete this.direction,delete this.isShadow,delete this.isDashed,delete this.isRounded,delete this.glass},mxShape.prototype.apply=function(t){this.state=t,this.style=t.style,null!=this.style&&(this.fill=mxUtils.getValue(this.style,mxConstants.STYLE_FILLCOLOR,this.fill),this.gradient=mxUtils.getValue(this.style,mxConstants.STYLE_GRADIENTCOLOR,this.gradient),this.gradientDirection=mxUtils.getValue(this.style,mxConstants.STYLE_GRADIENT_DIRECTION,this.gradientDirection),this.opacity=mxUtils.getValue(this.style,mxConstants.STYLE_OPACITY,this.opacity),this.fillOpacity=mxUtils.getValue(this.style,mxConstants.STYLE_FILL_OPACITY,this.fillOpacity),this.strokeOpacity=mxUtils.getValue(this.style,mxConstants.STYLE_STROKE_OPACITY,this.strokeOpacity),this.stroke=mxUtils.getValue(this.style,mxConstants.STYLE_STROKECOLOR,this.stroke),this.strokewidth=mxUtils.getNumber(this.style,mxConstants.STYLE_STROKEWIDTH,this.strokewidth),this.spacing=mxUtils.getValue(this.style,mxConstants.STYLE_SPACING,this.spacing),this.startSize=mxUtils.getNumber(this.style,mxConstants.STYLE_STARTSIZE,this.startSize),this.endSize=mxUtils.getNumber(this.style,mxConstants.STYLE_ENDSIZE,this.endSize),this.startArrow=mxUtils.getValue(this.style,mxConstants.STYLE_STARTARROW,this.startArrow),this.endArrow=mxUtils.getValue(this.style,mxConstants.STYLE_ENDARROW,this.endArrow),this.rotation=mxUtils.getValue(this.style,mxConstants.STYLE_ROTATION,this.rotation),this.direction=mxUtils.getValue(this.style,mxConstants.STYLE_DIRECTION,this.direction),this.flipH=1==mxUtils.getValue(this.style,mxConstants.STYLE_FLIPH,0),this.flipV=1==mxUtils.getValue(this.style,mxConstants.STYLE_FLIPV,0),null!=this.stencil&&(this.flipH=1==mxUtils.getValue(this.style,"stencilFlipH",0)||this.flipH,this.flipV=1==mxUtils.getValue(this.style,"stencilFlipV",0)||this.flipV),this.direction!=mxConstants.DIRECTION_NORTH&&this.direction!=mxConstants.DIRECTION_SOUTH||(t=this.flipH,this.flipH=this.flipV,this.flipV=t),this.isShadow=1==mxUtils.getValue(this.style,mxConstants.STYLE_SHADOW,this.isShadow),this.isDashed=1==mxUtils.getValue(this.style,mxConstants.STYLE_DASHED,this.isDashed),this.isRounded=1==mxUtils.getValue(this.style,mxConstants.STYLE_ROUNDED,this.isRounded),this.glass=1==mxUtils.getValue(this.style,mxConstants.STYLE_GLASS,this.glass),this.fill==mxConstants.NONE&&(this.fill=null),this.gradient==mxConstants.NONE&&(this.gradient=null),this.stroke==mxConstants.NONE&&(this.stroke=null))},mxShape.prototype.setCursor=function(t){this.cursor=t=null==t?"":t,null!=this.node&&(this.node.style.cursor=t)},mxShape.prototype.getCursor=function(){return this.cursor},mxShape.prototype.isRoundable=function(){return!1},mxShape.prototype.updateBoundingBox=function(){if(this.useSvgBoundingBox&&null!=this.node&&null!=this.node.ownerSVGElement)try{var t=this.node.getBBox();if(0<t.width&&0<t.height)return this.boundingBox=new mxRectangle(t.x,t.y,t.width,t.height),void this.boundingBox.grow(this.strokewidth*this.scale/2)}catch(t){}var e;null!=this.bounds&&(null!=(t=this.createBoundingBox())&&(this.augmentBoundingBox(t),0!=(e=this.getShapeRotation())&&(t=mxUtils.getBoundingBox(t,e))),this.boundingBox=t)},mxShape.prototype.createBoundingBox=function(){var t=this.bounds.clone();return(null==this.stencil||this.direction!=mxConstants.DIRECTION_NORTH&&this.direction!=mxConstants.DIRECTION_SOUTH)&&!this.isPaintBoundsInverted()||t.rotate90(),t},mxShape.prototype.augmentBoundingBox=function(t){this.isShadow&&(t.width+=Math.ceil(mxConstants.SHADOW_OFFSET_X*this.scale),t.height+=Math.ceil(mxConstants.SHADOW_OFFSET_Y*this.scale)),t.grow(this.strokewidth*this.scale/2)},mxShape.prototype.isPaintBoundsInverted=function(){return null==this.stencil&&(this.direction==mxConstants.DIRECTION_NORTH||this.direction==mxConstants.DIRECTION_SOUTH)},mxShape.prototype.getRotation=function(){return null!=this.rotation?this.rotation:0},mxShape.prototype.getTextRotation=function(){var t=this.getRotation();return 1!=mxUtils.getValue(this.style,mxConstants.STYLE_HORIZONTAL,1)&&(t+=mxText.prototype.verticalTextRotation),t},mxShape.prototype.getShapeRotation=function(){var t=this.getRotation();return null!=this.direction&&(this.direction==mxConstants.DIRECTION_NORTH?t+=270:this.direction==mxConstants.DIRECTION_WEST?t+=180:this.direction==mxConstants.DIRECTION_SOUTH&&(t+=90)),t},mxShape.prototype.createTransparentSvgRectangle=function(t,e,n,i){var l=document.createElementNS(mxConstants.NS_SVG,"rect");return l.setAttribute("x",t),l.setAttribute("y",e),l.setAttribute("width",n),l.setAttribute("height",i),l.setAttribute("fill","none"),l.setAttribute("stroke","none"),l.setAttribute("pointer-events","all"),l},mxShape.prototype.setTransparentBackgroundImage=function(t){t.style.backgroundImage="url('"+mxClient.imageBasePath+"/transparent.gif')"},mxShape.prototype.releaseSvgGradients=function(t){if(null!=t)for(var e in t)null!=(e=t[e])&&(e.mxRefCount=(e.mxRefCount||0)-1,0==e.mxRefCount&&null!=e.parentNode&&e.parentNode.removeChild(e))},mxShape.prototype.destroy=function(){null!=this.node&&(mxEvent.release(this.node),null!=this.node.parentNode&&this.node.parentNode.removeChild(this.node),this.node=null),this.releaseSvgGradients(this.oldGradients),this.oldGradients=null},mxUtils.extend(mxStencil,mxShape),mxStencil.defaultLocalized=!1,mxStencil.allowEval=!1,mxStencil.prototype.desc=null,mxStencil.prototype.constraints=null,mxStencil.prototype.aspect=null,mxStencil.prototype.w0=null,mxStencil.prototype.h0=null,mxStencil.prototype.bgNode=null,mxStencil.prototype.fgNode=null,mxStencil.prototype.strokewidth=null,mxStencil.prototype.parseDescription=function(){this.fgNode=this.desc.getElementsByTagName("foreground")[0],this.bgNode=this.desc.getElementsByTagName("background")[0],this.w0=Number(this.desc.getAttribute("w")||100),this.h0=Number(this.desc.getAttribute("h")||100);var t=this.desc.getAttribute("aspect");this.aspect=null!=t?t:"variable",t=this.desc.getAttribute("strokewidth"),this.strokewidth=null!=t?t:"1"},mxStencil.prototype.parseConstraints=function(){var t=this.desc.getElementsByTagName("connections")[0];if(null!=t&&null!=(t=mxUtils.getChildNodes(t))&&0<t.length){this.constraints=[];for(var e=0;e<t.length;e++)this.constraints.push(this.parseConstraint(t[e]))}},mxStencil.prototype.parseConstraint=function(t){var e=Number(t.getAttribute("x")),n=Number(t.getAttribute("y")),i="1"==t.getAttribute("perimeter");return t=t.getAttribute("name"),new mxConnectionConstraint(new mxPoint(e,n),i,t)},mxStencil.prototype.evaluateTextAttribute=function(t,e,n){return e=this.evaluateAttribute(t,e,n),t=t.getAttribute("localized"),mxStencil.defaultLocalized&&null==t||"1"==t?mxResources.get(e):e},mxStencil.prototype.evaluateAttribute=function(t,e,n){return null==(e=t.getAttribute(e))&&null!=(t=mxUtils.getTextContent(t))&&mxStencil.allowEval&&"function"==typeof(t=mxUtils.eval(t))&&(e=t(n)),e},mxStencil.prototype.drawShape=function(t,e,n,i,l,o){var s=t.states.slice(),r=mxUtils.getValue(e.style,mxConstants.STYLE_DIRECTION,null),a=(r=this.computeAspect(e.style,n,i,l,o,r),Math.min(r.width,r.height));a="inherit"==this.strokewidth?Number(mxUtils.getNumber(e.style,mxConstants.STYLE_STROKEWIDTH,1)):Number(this.strokewidth)*a,t.setStrokeWidth(a),null!=e.style&&"1"==mxUtils.getValue(e.style,mxConstants.STYLE_POINTER_EVENTS,"0")&&(t.setStrokeColor(mxConstants.NONE),t.rect(n,i,l,o),t.stroke(),t.setStrokeColor(e.stroke)),this.drawChildren(t,e,n,i,l,o,this.bgNode,r,!1,!0),this.drawChildren(t,e,n,i,l,o,this.fgNode,r,!0,!e.outline||null==e.style||0==mxUtils.getValue(e.style,mxConstants.STYLE_BACKGROUND_OUTLINE,0)),t.states.length!=s.length&&(t.states=s)},mxStencil.prototype.drawChildren=function(t,e,n,i,l,o,s,r,a,h){if(null!=s&&0<l&&0<o)for(n=s.firstChild;null!=n;)n.nodeType==mxConstants.NODETYPE_ELEMENT&&this.drawNode(t,e,n,r,a,h),n=n.nextSibling},mxStencil.prototype.computeAspect=function(t,e,n,i,l,o){t=e,e=i/this.w0;var s,r=l/this.h0;return(o=o==mxConstants.DIRECTION_NORTH||o==mxConstants.DIRECTION_SOUTH)&&(r=i/this.h0,e=l/this.w0,t+=s=(i-l)/2,n-=s),"fixed"==this.aspect&&(e=r=Math.min(e,r),o?(t+=(l-this.w0*e)/2,n+=(i-this.h0*r)/2):(t+=(i-this.w0*e)/2,n+=(l-this.h0*r)/2)),new mxRectangle(t,n,e,r)},mxStencil.prototype.drawNode=function(t,e,n,i,l,o){var s=n.nodeName,r=i.x,a=i.y,h=i.width,u=i.height,d=Math.min(h,u);if("save"==s)t.save();else if("restore"==s)t.restore();else if(o){if("path"==s){if(t.begin(),d=!0,"1"==n.getAttribute("rounded")){d=!1;for(var c=Number(n.getAttribute("arcSize")),p=0,m=[],g=n.firstChild;null!=g;){if(g.nodeType==mxConstants.NODETYPE_ELEMENT){var x=g.nodeName;if("move"!=x&&"line"!=x){d=!0;break}"move"!=x&&0!=m.length||m.push([]),m[m.length-1].push(new mxPoint(r+Number(g.getAttribute("x"))*h,a+Number(g.getAttribute("y"))*u)),p++}g=g.nextSibling}if(!d&&0<p)for(h=0;h<m.length;h++)u=!1,(a=m[h][0]).x==(r=m[h][m[h].length-1]).x&&a.y==r.y&&(m[h].pop(),u=!0),this.addPoints(t,m[h],!0,c,u);else d=!0}if(d)for(g=n.firstChild;null!=g;)g.nodeType==mxConstants.NODETYPE_ELEMENT&&this.drawNode(t,e,g,i,l,o),g=g.nextSibling}else if("close"==s)t.close();else if("move"==s)t.moveTo(r+Number(n.getAttribute("x"))*h,a+Number(n.getAttribute("y"))*u);else if("line"==s)t.lineTo(r+Number(n.getAttribute("x"))*h,a+Number(n.getAttribute("y"))*u);else if("quad"==s)t.quadTo(r+Number(n.getAttribute("x1"))*h,a+Number(n.getAttribute("y1"))*u,r+Number(n.getAttribute("x2"))*h,a+Number(n.getAttribute("y2"))*u);else if("curve"==s)t.curveTo(r+Number(n.getAttribute("x1"))*h,a+Number(n.getAttribute("y1"))*u,r+Number(n.getAttribute("x2"))*h,a+Number(n.getAttribute("y2"))*u,r+Number(n.getAttribute("x3"))*h,a+Number(n.getAttribute("y3"))*u);else if("arc"==s)t.arcTo(Number(n.getAttribute("rx"))*h,Number(n.getAttribute("ry"))*u,Number(n.getAttribute("x-axis-rotation")),Number(n.getAttribute("large-arc-flag")),Number(n.getAttribute("sweep-flag")),r+Number(n.getAttribute("x"))*h,a+Number(n.getAttribute("y"))*u);else if("rect"==s)t.rect(r+Number(n.getAttribute("x"))*h,a+Number(n.getAttribute("y"))*u,Number(n.getAttribute("w"))*h,Number(n.getAttribute("h"))*u);else if("roundrect"==s)0==(e=Number(n.getAttribute("arcsize")))&&(e=100*mxConstants.RECTANGLE_ROUNDING_FACTOR),i=Number(n.getAttribute("w"))*h,o=Number(n.getAttribute("h"))*u,e=Number(e)/100,e=Math.min(i*e,o*e),t.roundrect(r+Number(n.getAttribute("x"))*h,a+Number(n.getAttribute("y"))*u,i,o,e,e);else if("ellipse"==s)t.ellipse(r+Number(n.getAttribute("x"))*h,a+Number(n.getAttribute("y"))*u,Number(n.getAttribute("w"))*h,Number(n.getAttribute("h"))*u);else if("image"==s)e.outline||(e=this.evaluateAttribute(n,"src",e),t.image(r+Number(n.getAttribute("x"))*h,a+Number(n.getAttribute("y"))*u,Number(n.getAttribute("w"))*h,Number(n.getAttribute("h"))*u,e,!1,"1"==n.getAttribute("flipH"),"1"==n.getAttribute("flipV")));else if("text"==s)e.outline||(i=this.evaluateTextAttribute(n,"str",e),o="1"==n.getAttribute("vertical")?-90:0,"0"==n.getAttribute("align-shape")&&(d=e.rotation,c=1==mxUtils.getValue(e.style,mxConstants.STYLE_FLIPH,0),e=1==mxUtils.getValue(e.style,mxConstants.STYLE_FLIPV,0),o=c&&e||!c&&!e?o-d:o+d),o-=n.getAttribute("rotation"),t.text(r+Number(n.getAttribute("x"))*h,a+Number(n.getAttribute("y"))*u,0,0,i,n.getAttribute("align")||"left",n.getAttribute("valign")||"top",!1,"",null,!1,o));else if("include-shape"==s)null!=(d=mxStencilRegistry.getStencil(n.getAttribute("name")))&&(r+=Number(n.getAttribute("x"))*h,a+=Number(n.getAttribute("y"))*u,i=Number(n.getAttribute("w"))*h,o=Number(n.getAttribute("h"))*u,d.drawShape(t,e,r,a,i,o));else if("fillstroke"==s)t.fillAndStroke();else if("fill"==s)t.fill();else if("stroke"==s)t.stroke();else if("strokewidth"==s)h="1"==n.getAttribute("fixed")?1:d,t.setStrokeWidth(Number(n.getAttribute("width"))*h);else if("dashed"==s)t.setDashed("1"==n.getAttribute("dashed"));else if("dashpattern"==s){if(null!=(n=n.getAttribute("pattern"))){for(n=n.split(" "),u=[],h=0;h<n.length;h++)0<n[h].length&&u.push(Number(n[h])*d);n=u.join(" "),t.setDashPattern(n)}}else"strokecolor"==s?t.setStrokeColor(n.getAttribute("color")):"linecap"==s?t.setLineCap(n.getAttribute("cap")):"linejoin"==s?t.setLineJoin(n.getAttribute("join")):"miterlimit"==s?t.setMiterLimit(Number(n.getAttribute("limit"))):"fillcolor"==s?t.setFillColor(n.getAttribute("color")):"alpha"==s||"fillalpha"==s||"strokealpha"==s?t.setAlpha(n.getAttribute("alpha")):"fontcolor"==s?t.setFontColor(n.getAttribute("color")):"fontstyle"==s?t.setFontStyle(n.getAttribute("style")):"fontfamily"==s?t.setFontFamily(n.getAttribute("family")):"fontsize"==s&&t.setFontSize(Number(n.getAttribute("size"))*d);!l||"fillstroke"!=s&&"fill"!=s&&"stroke"!=s||t.setShadow(!1)}};var mxStencilRegistry={stencils:{},addStencil:function(t,e){mxStencilRegistry.stencils[t]=e},getStencil:function(t){return mxStencilRegistry.stencils[t]}},mxMarker={markers:[],addMarker:function(t,e){mxMarker.markers[t]=e},createMarker:function(t,e,n,i,l,o,s,r,a,h){var u=mxMarker.markers[n];return null!=u?u(t,e,n,i,l,o,s,r,a,h):null}};function mxActor(t,e,n,i){mxShape.call(this),this.bounds=t,this.fill=e,this.stroke=n,this.strokewidth=null!=i?i:1}function mxCloud(t,e,n,i){mxActor.call(this),this.bounds=t,this.fill=e,this.stroke=n,this.strokewidth=null!=i?i:1}function mxRectangleShape(t,e,n,i){mxShape.call(this),this.bounds=t,this.fill=e,this.stroke=n,this.strokewidth=null!=i?i:1}function mxEllipse(t,e,n,i){mxShape.call(this),this.bounds=t,this.fill=e,this.stroke=n,this.strokewidth=null!=i?i:1}function mxDoubleEllipse(t,e,n,i){mxShape.call(this),this.bounds=t,this.fill=e,this.stroke=n,this.strokewidth=null!=i?i:1}function mxRhombus(t,e,n,i){mxShape.call(this),this.bounds=t,this.fill=e,this.stroke=n,this.strokewidth=null!=i?i:1}function mxPolyline(t,e,n){mxShape.call(this),this.points=t,this.stroke=e,this.strokewidth=null!=n?n:1}function mxArrow(t,e,n,i,l,o,s){mxShape.call(this),this.points=t,this.fill=e,this.stroke=n,this.strokewidth=null!=i?i:1,this.arrowWidth=null!=l?l:mxConstants.ARROW_WIDTH,this.spacing=null!=o?o:mxConstants.ARROW_SPACING,this.endSize=null!=s?s:mxConstants.ARROW_SIZE}function mxArrowConnector(t,e,n,i,l,o,s){mxShape.call(this),this.points=t,this.fill=e,this.stroke=n,this.strokewidth=null!=i?i:1,this.arrowWidth=null!=l?l:mxConstants.ARROW_WIDTH,this.arrowSpacing=null!=o?o:mxConstants.ARROW_SPACING,this.startSize=mxConstants.ARROW_SIZE/5,this.endSize=mxConstants.ARROW_SIZE/5}function mxText(t,e,n,i,l,o,s,r,a,h,u,d,c,p,m,g,x,y,f,v,b){mxShape.call(this),this.value=t,this.bounds=e,this.color=null!=l?l:"black",this.align=null!=n?n:mxConstants.ALIGN_CENTER,this.valign=null!=i?i:mxConstants.ALIGN_MIDDLE,this.family=null!=o?o:mxConstants.DEFAULT_FONTFAMILY,this.size=null!=s?s:mxConstants.DEFAULT_FONTSIZE,this.fontStyle=null!=r?r:mxConstants.DEFAULT_FONTSTYLE,this.spacing=parseInt(a||2),this.spacingTop=this.spacing+parseInt(h||0),this.spacingRight=this.spacing+parseInt(u||0),this.spacingBottom=this.spacing+parseInt(d||0),this.spacingLeft=this.spacing+parseInt(c||0),this.horizontal=null==p||p,this.background=m,this.border=g,this.wrap=null!=x&&x,this.clipped=null!=y&&y,this.overflow=null!=f?f:"visible",this.labelPadding=null!=v?v:0,this.textDirection=b,this.rotation=0,this.updateMargin()}function mxTriangle(){mxActor.call(this)}function mxHexagon(){mxActor.call(this)}function mxLine(t,e,n,i){mxShape.call(this),this.bounds=t,this.stroke=e,this.strokewidth=null!=n?n:1,this.vertical=null!=i?i:this.vertical}function mxImageShape(t,e,n,i,l){mxShape.call(this),this.bounds=t,this.image=e,this.fill=n,this.stroke=i,this.strokewidth=null!=l?l:1,this.shadow=!1}function mxLabel(t,e,n,i){mxRectangleShape.call(this,t,e,n,i)}function mxCylinder(t,e,n,i){mxShape.call(this),this.bounds=t,this.fill=e,this.stroke=n,this.strokewidth=null!=i?i:1}function mxConnector(t,e,n){mxPolyline.call(this,t,e,n)}function mxSwimlane(t,e,n,i){mxShape.call(this),this.bounds=t,this.fill=e,this.stroke=n,this.strokewidth=null!=i?i:1}function mxGraphLayout(t){this.graph=t}function WeightedCellSorter(t,e){this.cell=t,this.weightedValue=e}function mxStackLayout(t,e,n,i,l,o){mxGraphLayout.call(this,t),this.horizontal=null==e||e,this.spacing=null!=n?n:0,this.x0=null!=i?i:0,this.y0=null!=l?l:0,this.border=null!=o?o:0}function mxPartitionLayout(t,e,n,i){mxGraphLayout.call(this,t),this.horizontal=null==e||e,this.spacing=n||0,this.border=i||0}function mxCompactTreeLayout(t,e,n){mxGraphLayout.call(this,t),this.horizontal=null==e||e,this.invert=null!=n&&n}function mxRadialTreeLayout(t){mxCompactTreeLayout.call(this,t,!1)}function mxFastOrganicLayout(t){mxGraphLayout.call(this,t)}function mxCircleLayout(t,e){mxGraphLayout.call(this,t),this.radius=null!=e?e:100}function mxParallelEdgeLayout(t){mxGraphLayout.call(this,t)}function mxCompositeLayout(t,e,n){mxGraphLayout.call(this,t),this.layouts=e,this.master=n}function mxEdgeLabelLayout(t,e){mxGraphLayout.call(this,t)}function mxGraphAbstractHierarchyCell(){this.x=[],this.y=[],this.temp=[]}function mxGraphHierarchyNode(t){mxGraphAbstractHierarchyCell.apply(this,arguments),this.cell=t,this.id=mxObjectIdentity.get(t),this.connectsAsTarget=[],this.connectsAsSource=[]}function mxGraphHierarchyEdge(t){mxGraphAbstractHierarchyCell.apply(this,arguments),this.edges=t,this.ids=[];for(var e=0;e<t.length;e++)this.ids.push(mxObjectIdentity.get(t[e]))}function mxGraphHierarchyModel(t,e,n,i,l){for(t.getGraph(),this.tightenToSource=l,this.roots=n,this.parent=i,this.vertexMapper=new mxDictionary,this.edgeMapper=new mxDictionary,this.maxRank=0,n=[],null==e&&(e=this.graph.getChildVertices(i)),this.maxRank=this.SOURCESCANSTARTRANK,this.createInternalCells(t,e,n),i=0;i<e.length;i++){l=n[i].connectsAsSource;for(var o=0;o<l.length;o++){var s,r=l[o],a=r.edges;null!=a&&0<a.length&&(s=t.getVisibleTerminal(a=a[0],!1),s=this.vertexMapper.get(s),n[i]==s&&(s=t.getVisibleTerminal(a,!0),s=this.vertexMapper.get(s)),null!=s&&n[i]!=s&&(0==(r.target=s).connectsAsTarget.length&&(s.connectsAsTarget=[]),mxUtils.indexOf(s.connectsAsTarget,r)<0&&s.connectsAsTarget.push(r)))}n[i].temp[0]=1}}function mxSwimlaneModel(t,e,n,i,l){for(t.getGraph(),this.tightenToSource=l,this.roots=n,this.parent=i,this.vertexMapper=new mxDictionary,this.edgeMapper=new mxDictionary,this.maxRank=0,n=[],null==e&&(e=this.graph.getChildVertices(i)),this.maxRank=this.SOURCESCANSTARTRANK,this.createInternalCells(t,e,n),i=0;i<e.length;i++){l=n[i].connectsAsSource;for(var o=0;o<l.length;o++){var s,r=l[o],a=r.edges;null!=a&&0<a.length&&(s=t.getVisibleTerminal(a=a[0],!1),s=this.vertexMapper.get(s),n[i]==s&&(s=t.getVisibleTerminal(a,!0),s=this.vertexMapper.get(s)),null!=s&&n[i]!=s&&(0==(r.target=s).connectsAsTarget.length&&(s.connectsAsTarget=[]),mxUtils.indexOf(s.connectsAsTarget,r)<0&&s.connectsAsTarget.push(r)))}n[i].temp[0]=1}}function mxHierarchicalLayoutStage(){}function mxMedianHybridCrossingReduction(t){this.layout=t}function MedianCellSorter(){}function mxMinimumCycleRemover(t){this.layout=t}function mxCoordinateAssignment(t,e,n,i,l,o){this.layout=t,this.intraCellSpacing=e,this.interRankCellSpacing=n,this.orientation=i,this.initialX=l,this.parallelEdgeSpacing=o}function mxSwimlaneOrdering(t){this.layout=t}function mxHierarchicalLayout(t,e,n){mxGraphLayout.call(this,t),this.orientation=null!=e?e:mxConstants.DIRECTION_NORTH,this.deterministic=null==n||n}!function(){function t(t){return t=null!=t?t:2,function(e,n,i,l,o,s,r,a,h,u){n=o*h*1.118,a=s*h*1.118,o*=r+h,s*=r+h;var d=l.clone();return d.x-=n,d.y-=a,l.x+=-o*(r=i!=mxConstants.ARROW_CLASSIC&&i!=mxConstants.ARROW_CLASSIC_THIN?1:.75)-n,l.y+=-s*r-a,function(){e.begin(),e.moveTo(d.x,d.y),e.lineTo(d.x-o-s/t,d.y-s+o/t),i!=mxConstants.ARROW_CLASSIC&&i!=mxConstants.ARROW_CLASSIC_THIN||e.lineTo(d.x-3*o/4,d.y-3*s/4),e.lineTo(d.x+s/t-o,d.y-s-o/t),e.close(),u?e.fillAndStroke():e.stroke()}}}function e(t){return t=null!=t?t:2,function(e,n,i,l,o,s,r,a,h,u){n=o*h*1.118,i=s*h*1.118,o*=r+h,s*=r+h;var d=l.clone();return d.x-=n,d.y-=i,l.x+=2*-n,l.y+=2*-i,function(){e.begin(),e.moveTo(d.x-o-s/t,d.y-s+o/t),e.lineTo(d.x,d.y),e.lineTo(d.x+s/t-o,d.y-s-o/t),e.stroke()}}}function n(t,e,n,i,l,o,s,r,a,h){e=l*a*(r=n==mxConstants.ARROW_DIAMOND?.7071:.9862),r*=o*a,l*=s+a,o*=s+a;var u=i.clone();u.x-=e,u.y-=r,i.x+=-l-e,i.y+=-o-r;var d=n==mxConstants.ARROW_DIAMOND?2:3.4;return function(){t.begin(),t.moveTo(u.x,u.y),t.lineTo(u.x-l/2-o/d,u.y+l/d-o/2),t.lineTo(u.x-l,u.y-o),t.lineTo(u.x-l/2+o/d,u.y-o/2-l/d),t.close(),h?t.fillAndStroke():t.stroke()}}mxMarker.addMarker("classic",t(2)),mxMarker.addMarker("classicThin",t(3)),mxMarker.addMarker("block",t(2)),mxMarker.addMarker("blockThin",t(3)),mxMarker.addMarker("open",e(2)),mxMarker.addMarker("openThin",e(3)),mxMarker.addMarker("oval",function(t,e,n,i,l,o,s,r,a,h){var u=s/2,d=i.clone();return i.x-=l*u,i.y-=o*u,function(){t.ellipse(d.x-u,d.y-u,s,s),h?t.fillAndStroke():t.stroke()}}),mxMarker.addMarker("diamond",n),mxMarker.addMarker("diamondThin",n)}(),mxUtils.extend(mxActor,mxShape),mxActor.prototype.paintVertexShape=function(t,e,n,i,l){t.translate(e,n),t.begin(),this.redrawPath(t,e,n,i,l),t.fillAndStroke()},mxActor.prototype.redrawPath=function(t,e,n,i,l){e=i/3,t.moveTo(0,l),t.curveTo(0,3*l/5,0,2*l/5,i/2,2*l/5),t.curveTo(i/2-e,2*l/5,i/2-e,0,i/2,0),t.curveTo(i/2+e,0,i/2+e,2*l/5,i/2,2*l/5),t.curveTo(i,2*l/5,i,3*l/5,i,l),t.close()},mxUtils.extend(mxCloud,mxActor),mxCloud.prototype.redrawPath=function(t,e,n,i,l){t.moveTo(.25*i,.25*l),t.curveTo(.05*i,.25*l,0,.5*l,.16*i,.55*l),t.curveTo(0,.66*l,.18*i,.9*l,.31*i,.8*l),t.curveTo(.4*i,l,.7*i,l,.8*i,.8*l),t.curveTo(i,.8*l,i,.6*l,.875*i,.5*l),t.curveTo(i,.3*l,.8*i,.1*l,.625*i,.2*l),t.curveTo(.5*i,.05*l,.3*i,.05*l,.25*i,.25*l),t.close()},mxUtils.extend(mxRectangleShape,mxShape),mxRectangleShape.prototype.isHtmlAllowed=function(){var t=!0;return null!=this.style&&(t="1"==mxUtils.getValue(this.style,mxConstants.STYLE_POINTER_EVENTS,"1")),!this.isRounded&&!this.glass&&0==this.rotation&&(t||null!=this.fill&&this.fill!=mxConstants.NONE)},mxRectangleShape.prototype.paintBackground=function(t,e,n,i,l){var o=!0;((o=null!=this.style?"1"==mxUtils.getValue(this.style,mxConstants.STYLE_POINTER_EVENTS,"1"):o)||null!=this.fill&&this.fill!=mxConstants.NONE||null!=this.stroke&&this.stroke!=mxConstants.NONE)&&(this.isRounded?(o="1"==mxUtils.getValue(this.style,mxConstants.STYLE_ABSOLUTE_ARCSIZE,0)?Math.min(i/2,Math.min(l/2,mxUtils.getValue(this.style,mxConstants.STYLE_ARCSIZE,mxConstants.LINE_ARCSIZE)/2)):(o=mxUtils.getValue(this.style,mxConstants.STYLE_ARCSIZE,100*mxConstants.RECTANGLE_ROUNDING_FACTOR)/100,Math.min(i*o,l*o)),t.roundrect(e,n,i,l,o,o)):t.rect(e,n,i,l),t.fillAndStroke())},mxRectangleShape.prototype.isRoundable=function(t,e,n,i,l){return!0},mxRectangleShape.prototype.paintForeground=function(t,e,n,i,l){this.glass&&!this.outline&&null!=this.fill&&this.fill!=mxConstants.NONE&&this.paintGlassEffect(t,e,n,i,l,this.getArcSize(i+this.strokewidth,l+this.strokewidth))},mxUtils.extend(mxEllipse,mxShape),mxEllipse.prototype.paintVertexShape=function(t,e,n,i,l){t.ellipse(e,n,i,l),t.fillAndStroke()},mxUtils.extend(mxDoubleEllipse,mxShape),mxDoubleEllipse.prototype.paintBackground=function(t,e,n,i,l){t.ellipse(e,n,i,l),t.fillAndStroke()},mxDoubleEllipse.prototype.paintForeground=function(t,e,n,i,l){var o;this.outline||(l-=2*(o=mxUtils.getValue(this.style,mxConstants.STYLE_MARGIN,Math.min(3+this.strokewidth,Math.min(i/5,l/5)))),0<(i-=2*o)&&0<l&&t.ellipse(e+o,n+o,i,l),t.stroke())},mxDoubleEllipse.prototype.getLabelBounds=function(t){var e=mxUtils.getValue(this.style,mxConstants.STYLE_MARGIN,Math.min(3+this.strokewidth,Math.min(t.width/5/this.scale,t.height/5/this.scale)))*this.scale;return new mxRectangle(t.x+e,t.y+e,t.width-2*e,t.height-2*e)},mxUtils.extend(mxRhombus,mxShape),mxRhombus.prototype.isRoundable=function(){return!0},mxRhombus.prototype.paintVertexShape=function(t,e,n,i,l){var o=i/2,s=l/2,r=mxUtils.getValue(this.style,mxConstants.STYLE_ARCSIZE,mxConstants.LINE_ARCSIZE)/2;t.begin(),this.addPoints(t,[new mxPoint(e+o,n),new mxPoint(e+i,n+s),new mxPoint(e+o,n+l),new mxPoint(e,n+s)],this.isRounded,r,!0),t.fillAndStroke()},mxUtils.extend(mxPolyline,mxShape),mxPolyline.prototype.getRotation=function(){return 0},mxPolyline.prototype.getShapeRotation=function(){return 0},mxPolyline.prototype.isPaintBoundsInverted=function(){return!1},mxPolyline.prototype.paintEdgeShape=function(t,e){var n=t.pointerEventsValue;t.pointerEventsValue="stroke",null==this.style||1!=this.style[mxConstants.STYLE_CURVED]?this.paintLine(t,e,this.isRounded):this.paintCurvedLine(t,e),t.pointerEventsValue=n},mxPolyline.prototype.paintLine=function(t,e,n){var i=mxUtils.getValue(this.style,mxConstants.STYLE_ARCSIZE,mxConstants.LINE_ARCSIZE)/2;t.begin(),this.addPoints(t,e,n,i,!1),t.stroke()},mxPolyline.prototype.paintCurvedLine=function(t,e){t.begin();var n=e[0],i=e.length;for(t.moveTo(n.x,n.y),n=1;n<i-2;n++){var l=e[n],o=e[n+1];t.quadTo(l.x,l.y,(l.x+o.x)/2,(l.y+o.y)/2)}t.quadTo((l=e[i-2]).x,l.y,(o=e[i-1]).x,o.y),t.stroke()},mxUtils.extend(mxArrow,mxShape),mxArrow.prototype.augmentBoundingBox=function(t){mxShape.prototype.augmentBoundingBox.apply(this,arguments),t.grow((Math.max(this.arrowWidth,this.endSize)/2+this.strokewidth)*this.scale)},mxArrow.prototype.paintEdgeShape=function(t,e){var n=mxConstants.ARROW_SPACING,i=mxConstants.ARROW_WIDTH,l=e[0],o=e[e.length-1],s=o.x-l.x,r=o.y-l.y,a=Math.sqrt(s*s+r*r),h=a-2*n-mxConstants.ARROW_SIZE,u=(s/=a,l.x-(a=i*(r/=a)/3)/2+n*s),d=u+a,c=(l=l.y-(i=-i*s/3)/2+n*r)+i,p=d+h*s,m=p+a,g=(h=c+h*r)+i,x=m-3*a;e=g-3*i,t.begin(),t.moveTo(u,l),t.lineTo(d,c),t.lineTo(p,h),t.lineTo(m,g),t.lineTo(o.x-n*s,o.y-n*r),t.lineTo(x,e),t.lineTo(x+a,e+i),t.close(),t.fillAndStroke()},mxUtils.extend(mxArrowConnector,mxShape),mxArrowConnector.prototype.useSvgBoundingBox=!0,mxArrowConnector.prototype.isRoundable=function(){return!0},mxArrowConnector.prototype.resetStyles=function(){mxShape.prototype.resetStyles.apply(this,arguments),this.arrowSpacing=mxConstants.ARROW_SPACING},mxArrowConnector.prototype.apply=function(t){mxShape.prototype.apply.apply(this,arguments),null!=this.style&&(this.startSize=3*mxUtils.getNumber(this.style,mxConstants.STYLE_STARTSIZE,mxConstants.ARROW_SIZE/5),this.endSize=3*mxUtils.getNumber(this.style,mxConstants.STYLE_ENDSIZE,mxConstants.ARROW_SIZE/5))},mxArrowConnector.prototype.augmentBoundingBox=function(t){mxShape.prototype.augmentBoundingBox.apply(this,arguments);var e=this.getEdgeWidth();this.isMarkerStart()&&(e=Math.max(e,this.getStartArrowWidth())),this.isMarkerEnd()&&(e=Math.max(e,this.getEndArrowWidth())),t.grow((e/2+this.strokewidth)*this.scale)},mxArrowConnector.prototype.paintEdgeShape=function(t,e){var n=this.strokewidth;this.outline&&(n=Math.max(1,mxUtils.getNumber(this.style,mxConstants.STYLE_STROKEWIDTH,this.strokewidth)));var i=this.getStartArrowWidth()+n,l=this.getEndArrowWidth()+n,o=this.outline?this.getEdgeWidth()+n:this.getEdgeWidth(),s=this.isOpenEnded(),r=this.isMarkerStart(),a=this.isMarkerEnd(),h=s?0:this.arrowSpacing+n/2,u=this.startSize+n,d=(n=this.endSize+n,this.isArrowRounded()),c=e[e.length-1],p=e[1].x-e[0].x,m=e[1].y-e[0].y;if(0!=(S=Math.sqrt(p*p+m*m))){var g,x,y,f,v=p/S,b=v,C=m/S,E=C,S=o*C,w=-o*v,T=[];d?t.setLineJoin("round"):2<e.length&&t.setMiterLimit(1.42),t.begin(),p=v,m=C,r&&!s?this.paintMarker(t,e[0].x,e[0].y,v,C,u,i,o,h,!0):(g=e[0].x+S/2+h*v,x=e[0].y+w/2+h*C,y=e[0].x-S/2+h*v,f=e[0].y-w/2+h*C,s?(t.moveTo(g,x),T.push(function(){t.lineTo(y,f)})):(t.moveTo(y,f),t.lineTo(g,x)));var A,M,L=x=g=0;for(S=0;S<e.length-2;S++){var P,I,R;w=mxUtils.relativeCcw(e[S].x,e[S].y,e[S+1].x,e[S+1].y,e[S+2].x,e[S+2].y),g=e[S+2].x-e[S+1].x,x=e[S+2].y-e[S+1].y,0!=(L=Math.sqrt(g*g+x*x))&&(b=g/L,E=x/L,L=Math.max(Math.sqrt((v*b+C*E+1)/2),.04),g=v+b,x=C+E,0!=(P=Math.sqrt(g*g+x*x))&&(g/=P,x/=P,P=Math.max(L,Math.min(this.strokewidth/200+.04,.35)),L=0!=w&&d?Math.max(.1,P):Math.max(L,.06),I=e[S+1].x+x*o/2/L,R=e[S+1].y-g*o/2/L,x=e[S+1].x-x*o/2/L,g=e[S+1].y+g*o/2/L,0!=w&&d?-1==w?(w=x+E*o,L=g-b*o,t.lineTo(x+C*o,g-v*o),t.quadTo(I,R,w,L),function(e,n){T.push(function(){t.lineTo(e,n)})}(x,g)):(t.lineTo(I,R),function(e,n){var i=I-C*o,l=R+v*o,s=I-E*o,r=R+b*o;T.push(function(){t.quadTo(e,n,i,l)}),T.push(function(){t.lineTo(s,r)})}(x,g)):(t.lineTo(I,R),function(e,n){T.push(function(){t.lineTo(e,n)})}(x,g)),v=b,C=E))}for(S=o*E,w=-o*b,a&&!s?this.paintMarker(t,c.x,c.y,-v,-C,n,l,o,h,!1):(t.lineTo(c.x-h*b+S/2,c.y-h*E+w/2),A=c.x-h*b-S/2,M=c.y-h*E-w/2,s?(t.moveTo(A,M),T.splice(0,0,function(){t.moveTo(A,M)})):t.lineTo(A,M)),S=T.length-1;0<=S;S--)T[S]();s?(t.end(),t.stroke()):(t.close(),t.fillAndStroke()),t.setShadow(!1),t.setMiterLimit(4),d&&t.setLineJoin("flat"),2<e.length&&(t.setMiterLimit(4),r&&!s&&(t.begin(),this.paintMarker(t,e[0].x,e[0].y,p,m,u,i,o,h,!0),t.stroke(),t.end()),a&&!s&&(t.begin(),this.paintMarker(t,c.x,c.y,-v,-C,n,l,o,h,!0),t.stroke(),t.end()))}},mxArrowConnector.prototype.paintMarker=function(t,e,n,i,l,o,s,r,a,h){s=r/s;var u=r*l/2;r=-r*i/2;var d=(a+o)*i;o=(a+o)*l,h?t.moveTo(e-u+d,n-r+o):t.lineTo(e-u+d,n-r+o),t.lineTo(e-u/s+d,n-r/s+o),t.lineTo(e+a*i,n+a*l),t.lineTo(e+u/s+d,n+r/s+o),t.lineTo(e+u+d,n+r+o)},mxArrowConnector.prototype.isArrowRounded=function(){return this.isRounded},mxArrowConnector.prototype.getStartArrowWidth=function(){return mxConstants.ARROW_WIDTH},mxArrowConnector.prototype.getEndArrowWidth=function(){return mxConstants.ARROW_WIDTH},mxArrowConnector.prototype.getEdgeWidth=function(){return mxConstants.ARROW_WIDTH/3},mxArrowConnector.prototype.isOpenEnded=function(){return!1},mxArrowConnector.prototype.isMarkerStart=function(){return mxUtils.getValue(this.style,mxConstants.STYLE_STARTARROW,mxConstants.NONE)!=mxConstants.NONE},mxArrowConnector.prototype.isMarkerEnd=function(){return mxUtils.getValue(this.style,mxConstants.STYLE_ENDARROW,mxConstants.NONE)!=mxConstants.NONE},mxUtils.extend(mxText,mxShape),mxText.prototype.baseSpacingTop=0,mxText.prototype.baseSpacingBottom=0,mxText.prototype.baseSpacingLeft=0,mxText.prototype.baseSpacingRight=0,mxText.prototype.replaceLinefeeds=!0,mxText.prototype.verticalTextRotation=-90,mxText.prototype.ignoreClippedStringSize=!0,mxText.prototype.ignoreStringSize=!1,mxText.prototype.textWidthPadding=8!=document.documentMode||mxClient.IS_EM?3:4,mxText.prototype.lastValue=null,mxText.prototype.cacheEnabled=!0,mxText.prototype.isHtmlAllowed=function(){return 8!=document.documentMode||mxClient.IS_EM},mxText.prototype.getSvgScreenOffset=function(){return 0},mxText.prototype.checkBounds=function(){return!isNaN(this.scale)&&isFinite(this.scale)&&0<this.scale&&null!=this.bounds&&!isNaN(this.bounds.x)&&!isNaN(this.bounds.y)&&!isNaN(this.bounds.width)&&!isNaN(this.bounds.height)},mxText.prototype.paint=function(t,e){var n,i,l,o,s=this.bounds.x/(o=this.scale),r=this.bounds.y/o,a=this.bounds.width/o;this.updateTransform(t,s,r,a,o=this.bounds.height/o),this.configureCanvas(t,s,r,a,o),e?t.updateText(s,r,a,o,this.align,this.valign,this.wrap,this.overflow,this.clipped,this.getTextRotation(),this.node):(i=(n=mxUtils.isNode(this.value)||this.dialect==mxConstants.DIALECT_STRICTHTML)?"html":"",l=this.value,n||"html"!=i||(l=mxUtils.htmlEntities(l,!1)),"html"!=i||mxUtils.isNode(this.value)||(l=mxUtils.replaceTrailingNewlines(l,"<div><br></div>")),l=!mxUtils.isNode(this.value)&&this.replaceLinefeeds&&"html"==i?l.replace(/\n/g,"<br/>"):l,(e=(e=this.textDirection)!=mxConstants.TEXT_DIRECTION_AUTO||n?e:this.getAutoDirection())!=mxConstants.TEXT_DIRECTION_LTR&&e!=mxConstants.TEXT_DIRECTION_RTL&&(e=null),t.text(s,r,a,o,l,this.align,this.valign,this.wrap,i,this.overflow,this.clipped,this.getTextRotation(),e))},mxText.prototype.redraw=function(){var t;this.visible&&this.checkBounds()&&this.cacheEnabled&&this.lastValue==this.value&&(mxUtils.isNode(this.value)||this.dialect==mxConstants.DIALECT_STRICTHTML)?"DIV"==this.node.nodeName?(mxClient.IS_SVG?this.redrawHtmlShapeWithCss3():(this.updateSize(this.node,null==this.state||null==this.state.view.textDiv),mxClient.IS_IE&&(null==document.documentMode||document.documentMode<=8)?this.updateHtmlFilter():this.updateHtmlTransform()),this.updateBoundingBox()):null!=(t=this.createCanvas())&&null!=t.updateText?(t.pointerEvents=this.pointerEvents,this.paint(t,!0),this.destroyCanvas(t),this.updateBoundingBox()):mxShape.prototype.redraw.apply(this,arguments):(mxShape.prototype.redraw.apply(this,arguments),this.lastValue=mxUtils.isNode(this.value)||this.dialect==mxConstants.DIALECT_STRICTHTML?this.value:null)},mxText.prototype.resetStyles=function(){mxShape.prototype.resetStyles.apply(this,arguments),this.color="black",this.align=mxConstants.ALIGN_CENTER,this.valign=mxConstants.ALIGN_MIDDLE,this.family=mxConstants.DEFAULT_FONTFAMILY,this.size=mxConstants.DEFAULT_FONTSIZE,this.fontStyle=mxConstants.DEFAULT_FONTSTYLE,this.spacingLeft=this.spacingBottom=this.spacingRight=this.spacingTop=this.spacing=2,this.horizontal=!0,delete this.background,delete this.border,this.textDirection=mxConstants.DEFAULT_TEXT_DIRECTION,delete this.margin},mxText.prototype.apply=function(t){var e=this.spacing;mxShape.prototype.apply.apply(this,arguments),null!=this.style&&(this.fontStyle=mxUtils.getValue(this.style,mxConstants.STYLE_FONTSTYLE,this.fontStyle),this.family=mxUtils.getValue(this.style,mxConstants.STYLE_FONTFAMILY,this.family),this.size=mxUtils.getValue(this.style,mxConstants.STYLE_FONTSIZE,this.size),this.color=mxUtils.getValue(this.style,mxConstants.STYLE_FONTCOLOR,this.color),this.align=mxUtils.getValue(this.style,mxConstants.STYLE_ALIGN,this.align),this.valign=mxUtils.getValue(this.style,mxConstants.STYLE_VERTICAL_ALIGN,this.valign),this.spacing=parseInt(mxUtils.getValue(this.style,mxConstants.STYLE_SPACING,this.spacing)),this.spacingTop=parseInt(mxUtils.getValue(this.style,mxConstants.STYLE_SPACING_TOP,this.spacingTop-e))+this.spacing,this.spacingRight=parseInt(mxUtils.getValue(this.style,mxConstants.STYLE_SPACING_RIGHT,this.spacingRight-e))+this.spacing,this.spacingBottom=parseInt(mxUtils.getValue(this.style,mxConstants.STYLE_SPACING_BOTTOM,this.spacingBottom-e))+this.spacing,this.spacingLeft=parseInt(mxUtils.getValue(this.style,mxConstants.STYLE_SPACING_LEFT,this.spacingLeft-e))+this.spacing,this.horizontal=mxUtils.getValue(this.style,mxConstants.STYLE_HORIZONTAL,this.horizontal),this.background=mxUtils.getValue(this.style,mxConstants.STYLE_LABEL_BACKGROUNDCOLOR,this.background),this.border=mxUtils.getValue(this.style,mxConstants.STYLE_LABEL_BORDERCOLOR,this.border),this.textDirection=mxUtils.getValue(this.style,mxConstants.STYLE_TEXT_DIRECTION,mxConstants.DEFAULT_TEXT_DIRECTION),this.opacity=mxUtils.getValue(this.style,mxConstants.STYLE_TEXT_OPACITY,100),this.updateMargin()),this.flipH=this.flipV=null},mxText.prototype.getAutoDirection=function(){var t=/[A-Za-z\u05d0-\u065f\u066a-\u06ef\u06fa-\u07ff\ufb1d-\ufdff\ufe70-\ufefc]/.exec(this.value);return null!=t&&0<t.length&&"z"<t[0]?mxConstants.TEXT_DIRECTION_RTL:mxConstants.TEXT_DIRECTION_LTR},mxText.prototype.getContentNode=function(){var t=this.node;return null!=t?(null==t.ownerSVGElement?this.node:t.firstChild.firstChild.firstChild).firstChild.firstChild:t},mxText.prototype.updateBoundingBox=function(){var t=this.node;this.boundingBox=this.bounds.clone();var e=this.getTextRotation(),n=null!=this.style?mxUtils.getValue(this.style,mxConstants.STYLE_LABEL_POSITION,mxConstants.ALIGN_CENTER):null,i=null!=this.style?mxUtils.getValue(this.style,mxConstants.STYLE_VERTICAL_LABEL_POSITION,mxConstants.ALIGN_MIDDLE):null;if(!(this.ignoreStringSize||null==t||"fill"==this.overflow||this.clipped&&this.ignoreClippedStringSize&&n==mxConstants.ALIGN_CENTER&&i==mxConstants.ALIGN_MIDDLE)){if((i=n=null)!=t.ownerSVGElement)if(null!=t.firstChild&&null!=t.firstChild.firstChild&&"foreignObject"==t.firstChild.firstChild.nodeName)i=(t=t.firstChild.firstChild.firstChild.firstChild).offsetHeight*this.scale,n="width"==this.overflow?this.boundingBox.width:t.offsetWidth*this.scale;else try{var l=t.getBBox();return void(this.boundingBox="string"==typeof this.value&&0==mxUtils.trim(this.value)?null:0==l.width&&0==l.height?null:new mxRectangle(l.x,l.y,l.width,l.height))}catch(t){}else n=null!=this.state?this.state.view.textDiv:null,null!=this.offsetWidth&&null!=this.offsetHeight||(null!=n&&(this.updateFont(n),this.updateSize(n,!1),this.updateInnerHtml(n),t=n),l=t,8!=document.documentMode||mxClient.IS_EM?null!=l.firstChild&&"DIV"==l.firstChild.nodeName&&(l=l.firstChild):(i=Math.round(this.bounds.width/this.scale),this.wrap&&0<i?(t.style.wordWrap=mxConstants.WORD_WRAP,t.style.whiteSpace="normal","break-word"!=t.style.wordWrap&&(n=(l=0<(t=l.getElementsByTagName("div")).length?t[t.length-1]:l).offsetWidth+2,t=this.node.getElementsByTagName("div"),this.clipped&&(n=Math.min(i,n)),1<t.length&&(t[t.length-2].style.width=n+"px"))):t.style.whiteSpace="nowrap"),this.offsetWidth=l.offsetWidth+this.textWidthPadding,this.offsetHeight=l.offsetHeight),n=this.offsetWidth*this.scale,i=this.offsetHeight*this.scale;null!=n&&null!=i&&(this.boundingBox=new mxRectangle(this.bounds.x,this.bounds.y,n,i))}null!=this.boundingBox&&(0!=e?(e=mxUtils.getBoundingBox(new mxRectangle(this.margin.x*this.boundingBox.width,this.margin.y*this.boundingBox.height,this.boundingBox.width,this.boundingBox.height),e,new mxPoint(0,0)),this.unrotatedBoundingBox=mxRectangle.fromRectangle(this.boundingBox),this.unrotatedBoundingBox.x+=this.margin.x*this.unrotatedBoundingBox.width,this.unrotatedBoundingBox.y+=this.margin.y*this.unrotatedBoundingBox.height,this.boundingBox.x+=e.x,this.boundingBox.y+=e.y,this.boundingBox.width=e.width,this.boundingBox.height=e.height):(this.boundingBox.x+=this.margin.x*this.boundingBox.width,this.boundingBox.y+=this.margin.y*this.boundingBox.height,this.unrotatedBoundingBox=null))},mxText.prototype.getShapeRotation=function(){return 0},mxText.prototype.getTextRotation=function(){return null!=this.state&&null!=this.state.shape?this.state.shape.getTextRotation():0},mxText.prototype.isPaintBoundsInverted=function(){return!this.horizontal&&null!=this.state&&this.state.view.graph.model.isVertex(this.state.cell)},mxText.prototype.configureCanvas=function(t,e,n,i,l){mxShape.prototype.configureCanvas.apply(this,arguments),t.setFontColor(this.color),t.setFontBackgroundColor(this.background),t.setFontBorderColor(this.border),t.setFontFamily(this.family),t.setFontSize(this.size),t.setFontStyle(this.fontStyle)},mxText.prototype.getHtmlValue=function(){var t=this.value;return this.dialect!=mxConstants.DIALECT_STRICTHTML&&(t=mxUtils.htmlEntities(t,!1)),t=mxUtils.replaceTrailingNewlines(t,"<div><br></div>"),this.replaceLinefeeds?t.replace(/\n/g,"<br/>"):t},mxText.prototype.getTextCss=function(){var t="display: inline-block; font-size: "+this.size+"px; font-family: "+this.family+"; color: "+this.color+"; line-height: "+(mxConstants.ABSOLUTE_LINE_HEIGHT?this.size*mxConstants.LINE_HEIGHT+"px":mxConstants.LINE_HEIGHT)+"; pointer-events: "+(this.pointerEvents?"all":"none")+"; ";(this.fontStyle&mxConstants.FONT_BOLD)==mxConstants.FONT_BOLD&&(t+="font-weight: bold; "),(this.fontStyle&mxConstants.FONT_ITALIC)==mxConstants.FONT_ITALIC&&(t+="font-style: italic; ");var e=[];return(this.fontStyle&mxConstants.FONT_UNDERLINE)==mxConstants.FONT_UNDERLINE&&e.push("underline"),(this.fontStyle&mxConstants.FONT_STRIKETHROUGH)==mxConstants.FONT_STRIKETHROUGH&&e.push("line-through"),0<e.length&&(t+="text-decoration: "+e.join(" ")+"; "),t},mxText.prototype.redrawHtmlShape=function(){var t;mxClient.IS_SVG?this.redrawHtmlShapeWithCss3():((t=this.node.style).whiteSpace="normal",t.overflow="",t.width="",t.height="",this.updateValue(),this.updateFont(this.node),this.updateSize(this.node,null==this.state||null==this.state.view.textDiv),this.offsetHeight=this.offsetWidth=null,mxClient.IS_IE&&(null==document.documentMode||document.documentMode<=8)?this.updateHtmlFilter():this.updateHtmlTransform())},mxText.prototype.redrawHtmlShapeWithCss3=function(){var t=Math.max(0,Math.round(this.bounds.width/this.scale)),e=Math.max(0,Math.round(this.bounds.height/this.scale)),n="position: absolute; left: "+Math.round(this.bounds.x)+"px; top: "+Math.round(this.bounds.y)+"px; pointer-events: none; ",i=this.getTextCss();mxSvgCanvas2D.createCss(t+2,e,this.align,this.valign,this.wrap,this.overflow,this.clipped,null!=this.background?mxUtils.htmlEntities(this.background):null,null!=this.border?mxUtils.htmlEntities(this.border):null,n,i,this.scale,mxUtils.bind(this,function(t,n,i,l,o,s){t=this.getTextRotation(),""!=(t=(1!=this.scale?"scale("+this.scale+") ":"")+(0!=t?"rotate("+t+"deg) ":"")+(0!=this.margin.x||0!=this.margin.y?"translate("+100*this.margin.x+"%,"+100*this.margin.y+"%)":""))&&(t="transform-origin: 0 0; transform: "+t+"; "),"block"==this.overflow&&this.valign==mxConstants.ALIGN_MIDDLE&&(t+="max-height: "+(e+1)+"px;"),""==s?(i+=l,l="display:inline-block; min-width: 100%; "+t):(l+=t,mxClient.IS_SF&&(l+="-webkit-clip-path: content-box;")),"block"==this.overflow&&(l+="width: 100%; "),this.opacity<100&&(o+="opacity: "+this.opacity/100+"; "),this.node.setAttribute("style",i),i=mxUtils.isNode(this.value)?this.value.outerHTML:this.getHtmlValue(),null==this.node.firstChild&&(this.node.innerHTML="<div><div>"+i+"</div></div>",mxClient.IS_IE11&&this.fixFlexboxForIe11(this.node)),this.node.firstChild.firstChild.setAttribute("style",o),this.node.firstChild.setAttribute("style",l)}))},mxText.prototype.fixFlexboxForIe11=function(t){for(var e=t.querySelectorAll('div[style*="display: flex; justify-content: flex-end;"]'),n=0;n<e.length;n++)e[n].style.justifyContent="flex-start",e[n].style.flexDirection="row-reverse";if(!this.wrap)for(e=t.querySelectorAll('div[style*="display: flex; justify-content: center;"]'),t=-window.innerWidth,n=0;n<e.length;n++)e[n].style.marginLeft=t+"px",e[n].style.marginRight=t+"px"},mxText.prototype.updateHtmlTransform=function(){var t=this.getTextRotation(),e=this.node.style,n=this.margin.x,i=this.margin.y;0!=t?(mxUtils.setPrefixedStyle(e,"transformOrigin",100*-n+"% "+100*-i+"%"),mxUtils.setPrefixedStyle(e,"transform","translate("+100*n+"%,"+100*i+"%) scale("+this.scale+") rotate("+t+"deg)")):(mxUtils.setPrefixedStyle(e,"transformOrigin","0% 0%"),mxUtils.setPrefixedStyle(e,"transform","scale("+this.scale+") translate("+100*n+"%,"+100*i+"%)")),e.left=Math.round(this.bounds.x-Math.ceil(n*("fill"!=this.overflow&&"width"!=this.overflow?3:1)))+"px",e.top=Math.round(this.bounds.y-i*("fill"!=this.overflow?3:1))+"px",e.opacity=this.opacity<100?this.opacity/100:""},mxText.prototype.updateInnerHtml=function(t){var e;mxUtils.isNode(this.value)?t.innerHTML=this.value.outerHTML:(e=this.value,this.dialect!=mxConstants.DIALECT_STRICTHTML&&(e=mxUtils.htmlEntities(e,!1)),e=mxUtils.replaceTrailingNewlines(e,"<div>&nbsp;</div>"),e=this.replaceLinefeeds?e.replace(/\n/g,"<br/>"):e,t.innerHTML='<div style="display:inline-block;_display:inline;">'+e+"</div>")},mxText.prototype.updateHtmlFilter=function(){var t=this.node.style,e=this.margin.x,n=this.margin.y,i=this.scale;mxUtils.setOpacity(this.node,this.opacity);var l=0,o=this.node;null!=(s=null!=this.state?this.state.view.textDiv:null)?(s.style.overflow="",s.style.height="",s.style.width="",this.updateFont(s),this.updateSize(s,!1),this.updateInnerHtml(s),r=Math.round(this.bounds.width/this.scale),this.wrap&&0<r?(s.style.whiteSpace="normal",s.style.wordWrap=mxConstants.WORD_WRAP,h=r,this.clipped&&(h=Math.min(h,this.bounds.width)),s.style.width=h+"px"):s.style.whiteSpace="nowrap",null!=(o=s).firstChild&&"DIV"==o.firstChild.nodeName&&(o=o.firstChild,this.wrap&&"break-word"==s.style.wordWrap&&(o.style.width="100%")),!this.clipped&&this.wrap&&0<r&&(s.style.width=(h=o.offsetWidth+this.textWidthPadding)+"px"),l=o.offsetHeight+2):null!=o.firstChild&&"DIV"==o.firstChild.nodeName&&(l=(o=o.firstChild).offsetHeight),h=o.offsetWidth+this.textWidthPadding,this.clipped&&(l=Math.min(l,this.bounds.height)),r=this.bounds.width/i,s=this.bounds.height/i,"fill"==this.overflow?(l=s,h=r):"width"==this.overflow&&(l=o.scrollHeight,h=r),this.offsetWidth=h,this.offsetHeight=l,"fill"!=this.overflow&&"width"!=this.overflow&&(r=h=this.clipped?Math.min(r,h):h,this.wrap&&(t.width=Math.round(r)+"px"));var s=l*i,r=r*i,a=this.getTextRotation()*(Math.PI/180),h=parseFloat(parseFloat(Math.cos(a)).toFixed(8));l=parseFloat(parseFloat(Math.sin(-a)).toFixed(8)),(a%=2*Math.PI)<0&&(a+=2*Math.PI),(a%=Math.PI)>Math.PI/2&&(a=Math.PI-a),o=Math.cos(a);var u=Math.sin(-a);e=r*-(e+.5),n=s*-(n+.5),0!=a&&(a="progid:DXImageTransform.Microsoft.Matrix(M11="+h+", M12="+l+", M21="+-l+", M22="+h+", sizingMethod='auto expand')",t.filter=null!=t.filter&&0<t.filter.length?t.filter+" "+a:a),t.zoom=i,t.left=Math.round(this.bounds.x+((r-r*o+s*u)/2-h*e-l*n)-r/2)+"px",t.top=Math.round(this.bounds.y+((s-s*o+r*u)/2+l*e-h*n)-s/2)+"px"},mxText.prototype.updateValue=function(){var t,e,n,i;mxUtils.isNode(this.value)?(this.node.innerHTML="",this.node.appendChild(this.value)):(t=this.value,this.dialect!=mxConstants.DIALECT_STRICTHTML&&(t=mxUtils.htmlEntities(t,!1)),t=mxUtils.replaceTrailingNewlines(t,"<div><br></div>"),t=this.replaceLinefeeds?t.replace(/\n/g,"<br/>"):t,e=null!=this.background&&this.background!=mxConstants.NONE?this.background:null,n=null!=this.border&&this.border!=mxConstants.NONE?this.border:null,"fill"==this.overflow||"width"==this.overflow?(null!=e&&(this.node.style.backgroundColor=e),null!=n&&(this.node.style.border="1px solid "+n)):(i="",null!=e&&(i+="background-color:"+mxUtils.htmlEntities(e)+";"),null!=n&&(i+="border:1px solid "+mxUtils.htmlEntities(n)+";"),t='<div style="zoom:1;'+i+"display:inline-block;_display:inline;text-decoration:inherit;padding-bottom:1px;padding-right:1px;line-height:"+(mxConstants.ABSOLUTE_LINE_HEIGHT?this.size*mxConstants.LINE_HEIGHT+"px":mxConstants.LINE_HEIGHT)+'">'+t+"</div>"),this.node.innerHTML=t,0<(t=this.node.getElementsByTagName("div")).length&&((e=(e=this.textDirection)==mxConstants.TEXT_DIRECTION_AUTO&&this.dialect!=mxConstants.DIALECT_STRICTHTML?this.getAutoDirection():e)==mxConstants.TEXT_DIRECTION_LTR||e==mxConstants.TEXT_DIRECTION_RTL?t[t.length-1].setAttribute("dir",e):t[t.length-1].removeAttribute("dir")))},mxText.prototype.updateFont=function(t){(t=t.style).lineHeight=mxConstants.ABSOLUTE_LINE_HEIGHT?this.size*mxConstants.LINE_HEIGHT+"px":mxConstants.LINE_HEIGHT,t.fontSize=this.size+"px",t.fontFamily=this.family,t.verticalAlign="top",t.color=this.color,t.fontWeight=(this.fontStyle&mxConstants.FONT_BOLD)==mxConstants.FONT_BOLD?"bold":"",t.fontStyle=(this.fontStyle&mxConstants.FONT_ITALIC)==mxConstants.FONT_ITALIC?"italic":"";var e=[];(this.fontStyle&mxConstants.FONT_UNDERLINE)==mxConstants.FONT_UNDERLINE&&e.push("underline"),(this.fontStyle&mxConstants.FONT_STRIKETHROUGH)==mxConstants.FONT_STRIKETHROUGH&&e.push("line-through"),t.textDecoration=e.join(" "),t.textAlign=this.align==mxConstants.ALIGN_CENTER?"center":this.align==mxConstants.ALIGN_RIGHT?"right":"left"},mxText.prototype.updateSize=function(t,e){var n,i=Math.max(0,Math.round(this.bounds.width/this.scale)),l=Math.max(0,Math.round(this.bounds.height/this.scale)),o=t.style;this.clipped?(o.overflow="hidden",o.maxHeight=l+"px",o.maxWidth=i+"px"):"fill"==this.overflow?(o.width=i+1+"px",o.height=l+1+"px",o.overflow="hidden"):"width"==this.overflow?(o.width=i+1+"px",o.maxHeight=l+1+"px",o.overflow="hidden"):"block"==this.overflow&&(o.width=i+1+"px"),this.wrap&&0<i?(o.wordWrap=mxConstants.WORD_WRAP,o.whiteSpace="normal",o.width=i+"px",e&&"fill"!=this.overflow&&"width"!=this.overflow&&(null!=(l=t).firstChild&&"DIV"==l.firstChild.nodeName&&(l=l.firstChild,"break-word"==t.style.wordWrap&&(l.style.width="100%")),0==(n=l.offsetWidth)&&(e=t.parentNode,t.style.visibility="hidden",document.body.appendChild(t),n=l.offsetWidth,t.style.visibility="",e.appendChild(t)),n+=3,this.clipped&&(n=Math.min(n,i)),o.width=n+"px")):o.whiteSpace="nowrap"},mxText.prototype.updateMargin=function(){this.margin=mxUtils.getAlignmentAsPoint(this.align,this.valign)},mxText.prototype.getSpacing=function(t){return new mxPoint(this.align==mxConstants.ALIGN_CENTER?(this.spacingLeft-this.spacingRight)/2:this.align==mxConstants.ALIGN_RIGHT?-this.spacingRight-(t?0:this.baseSpacingRight):this.spacingLeft+(t?0:this.baseSpacingLeft),this.valign==mxConstants.ALIGN_MIDDLE?(this.spacingTop-this.spacingBottom)/2:this.valign==mxConstants.ALIGN_BOTTOM?-this.spacingBottom-(t?0:this.baseSpacingBottom):this.spacingTop+(t?0:this.baseSpacingTop))},mxUtils.extend(mxTriangle,mxActor),mxTriangle.prototype.isRoundable=function(){return!0},mxTriangle.prototype.redrawPath=function(t,e,n,i,l){e=mxUtils.getValue(this.style,mxConstants.STYLE_ARCSIZE,mxConstants.LINE_ARCSIZE)/2,this.addPoints(t,[new mxPoint(0,0),new mxPoint(i,.5*l),new mxPoint(0,l)],this.isRounded,e,!0)},mxUtils.extend(mxHexagon,mxActor),mxHexagon.prototype.redrawPath=function(t,e,n,i,l){e=mxUtils.getValue(this.style,mxConstants.STYLE_ARCSIZE,mxConstants.LINE_ARCSIZE)/2,this.addPoints(t,[new mxPoint(.25*i,0),new mxPoint(.75*i,0),new mxPoint(i,.5*l),new mxPoint(.75*i,l),new mxPoint(.25*i,l),new mxPoint(0,.5*l)],this.isRounded,e,!0)},mxUtils.extend(mxLine,mxShape),mxLine.prototype.vertical=!1,mxLine.prototype.paintVertexShape=function(t,e,n,i,l){var o;t.begin(),this.vertical?(t.moveTo(o=e+i/2,n),t.lineTo(o,n+l)):(t.moveTo(e,o=n+l/2),t.lineTo(e+i,o)),t.stroke()},mxUtils.extend(mxImageShape,mxRectangleShape),mxImageShape.prototype.preserveImageAspect=!0,mxImageShape.prototype.getSvgScreenOffset=function(){return 0},mxImageShape.prototype.apply=function(t){mxShape.prototype.apply.apply(this,arguments),(this.gradient=this.stroke=this.fill=null)!=this.style&&(this.preserveImageAspect=1==mxUtils.getNumber(this.style,mxConstants.STYLE_IMAGE_ASPECT,1),this.flipH=this.flipH||1==mxUtils.getValue(this.style,"imageFlipH",0),this.flipV=this.flipV||1==mxUtils.getValue(this.style,"imageFlipV",0))},mxImageShape.prototype.isHtmlAllowed=function(){return!this.preserveImageAspect},mxImageShape.prototype.createHtml=function(){var t=document.createElement("div");return t.style.position="absolute",t},mxImageShape.prototype.isRoundable=function(t,e,n,i,l){return!1},mxImageShape.prototype.getImageDataUri=function(){return this.image},mxImageShape.prototype.paintVertexShape=function(t,e,n,i,l){var o,s;null!=this.image?(o=mxUtils.getValue(this.style,mxConstants.STYLE_IMAGE_BACKGROUND,null),s=mxUtils.getValue(this.style,mxConstants.STYLE_IMAGE_BORDER,null),null!=o&&(t.setFillColor(o),t.setStrokeColor(s),t.rect(e,n,i,l),t.fillAndStroke()),t.image(e,n,i,l,this.getImageDataUri(),this.preserveImageAspect,!1,!1),null!=(s=mxUtils.getValue(this.style,mxConstants.STYLE_IMAGE_BORDER,null))&&(t.setShadow(!1),t.setStrokeColor(s),t.rect(e,n,i,l),t.stroke())):mxRectangleShape.prototype.paintBackground.apply(this,arguments)},mxImageShape.prototype.redrawHtmlShape=function(){var t,e;this.node.style.left=Math.round(this.bounds.x)+"px",this.node.style.top=Math.round(this.bounds.y)+"px",this.node.style.width=Math.max(0,Math.round(this.bounds.width))+"px",this.node.style.height=Math.max(0,Math.round(this.bounds.height))+"px",this.node.innerHTML="",null!=this.image?(t=mxUtils.getValue(this.style,mxConstants.STYLE_IMAGE_BACKGROUND,""),e=mxUtils.getValue(this.style,mxConstants.STYLE_IMAGE_BORDER,""),this.node.style.backgroundColor=t,this.node.style.borderColor=e,(t=document.createElement("img")).setAttribute("border","0"),t.style.position="absolute",t.src=this.image,this.node.style.filter=e=this.opacity<100?"alpha(opacity="+this.opacity+")":"",this.flipH&&this.flipV?e+="progid:DXImageTransform.Microsoft.BasicImage(rotation=2)":this.flipH?e+="progid:DXImageTransform.Microsoft.BasicImage(mirror=1)":this.flipV&&(e+="progid:DXImageTransform.Microsoft.BasicImage(rotation=2, mirror=1)"),t.style.filter!=e&&(t.style.filter=e),"image"==t.nodeName?t.style.rotation=this.rotation:mxUtils.setPrefixedStyle(t.style,"transform",0!=this.rotation?"rotate("+this.rotation+"deg)":""),t.style.width=this.node.style.width,t.style.height=this.node.style.height,this.node.style.backgroundImage="",this.node.appendChild(t)):this.setTransparentBackgroundImage(this.node)},mxUtils.extend(mxLabel,mxRectangleShape),mxLabel.prototype.imageSize=mxConstants.DEFAULT_IMAGESIZE,mxLabel.prototype.spacing=2,mxLabel.prototype.indicatorSize=10,mxLabel.prototype.indicatorSpacing=2,mxLabel.prototype.init=function(t){mxShape.prototype.init.apply(this,arguments),null!=this.indicatorShape&&(this.indicator=new this.indicatorShape,this.indicator.dialect=this.dialect,this.indicator.init(this.node))},mxLabel.prototype.redraw=function(){null!=this.indicator&&(this.indicator.fill=this.indicatorColor,this.indicator.stroke=this.indicatorStrokeColor,this.indicator.gradient=this.indicatorGradientColor,this.indicator.direction=this.indicatorDirection,this.indicator.redraw()),mxShape.prototype.redraw.apply(this,arguments)},mxLabel.prototype.isHtmlAllowed=function(){return mxRectangleShape.prototype.isHtmlAllowed.apply(this,arguments)&&null==this.indicatorColor&&null==this.indicatorShape},mxLabel.prototype.paintForeground=function(t,e,n,i,l){this.paintImage(t,e,n,i,l),this.paintIndicator(t,e,n,i,l),mxRectangleShape.prototype.paintForeground.apply(this,arguments)},mxLabel.prototype.paintImage=function(t,e,n,i,l){null!=this.image&&(e=this.getImageBounds(e,n,i,l),t.image(e.x,e.y,e.width,e.height,this.image,!1,!1,!1))},mxLabel.prototype.getImageBounds=function(t,e,n,i){var l=mxUtils.getValue(this.style,mxConstants.STYLE_IMAGE_ALIGN,mxConstants.ALIGN_LEFT),o=mxUtils.getValue(this.style,mxConstants.STYLE_IMAGE_VERTICAL_ALIGN,mxConstants.ALIGN_MIDDLE),s=mxUtils.getNumber(this.style,mxConstants.STYLE_IMAGE_WIDTH,mxConstants.DEFAULT_IMAGESIZE),r=mxUtils.getNumber(this.style,mxConstants.STYLE_IMAGE_HEIGHT,mxConstants.DEFAULT_IMAGESIZE),a=mxUtils.getNumber(this.style,mxConstants.STYLE_SPACING,this.spacing)+5;return new mxRectangle(t=l==mxConstants.ALIGN_CENTER?t+(n-s)/2:l==mxConstants.ALIGN_RIGHT?t+(n-s-a):t+a,e=o==mxConstants.ALIGN_TOP?e+a:o==mxConstants.ALIGN_BOTTOM?e+(i-r-a):e+(i-r)/2,s,r)},mxLabel.prototype.paintIndicator=function(t,e,n,i,l){null!=this.indicator?(this.indicator.bounds=this.getIndicatorBounds(e,n,i,l),this.indicator.paint(t)):null!=this.indicatorImage&&(e=this.getIndicatorBounds(e,n,i,l),t.image(e.x,e.y,e.width,e.height,this.indicatorImage,!1,!1,!1))},mxLabel.prototype.getIndicatorBounds=function(t,e,n,i){var l=mxUtils.getValue(this.style,mxConstants.STYLE_IMAGE_ALIGN,mxConstants.ALIGN_LEFT),o=mxUtils.getValue(this.style,mxConstants.STYLE_IMAGE_VERTICAL_ALIGN,mxConstants.ALIGN_MIDDLE),s=mxUtils.getNumber(this.style,mxConstants.STYLE_INDICATOR_WIDTH,this.indicatorSize),r=mxUtils.getNumber(this.style,mxConstants.STYLE_INDICATOR_HEIGHT,this.indicatorSize),a=this.spacing+5;return new mxRectangle(t=l==mxConstants.ALIGN_RIGHT?t+(n-s-a):l==mxConstants.ALIGN_CENTER?t+(n-s)/2:t+a,e=o==mxConstants.ALIGN_BOTTOM?e+(i-r-a):o==mxConstants.ALIGN_TOP?e+a:e+(i-r)/2,s,r)},mxLabel.prototype.redrawHtmlShape=function(){for(mxRectangleShape.prototype.redrawHtmlShape.apply(this,arguments);this.node.hasChildNodes();)this.node.removeChild(this.node.lastChild);var t,e;null!=this.image&&((t=document.createElement("img")).style.position="relative",t.setAttribute("border","0"),(e=this.getImageBounds(this.bounds.x,this.bounds.y,this.bounds.width,this.bounds.height)).x-=this.bounds.x,e.y-=this.bounds.y,t.style.left=Math.round(e.x)+"px",t.style.top=Math.round(e.y)+"px",t.style.width=Math.round(e.width)+"px",t.style.height=Math.round(e.height)+"px",t.src=this.image,this.node.appendChild(t))},mxUtils.extend(mxCylinder,mxShape),mxCylinder.prototype.maxHeight=40,mxCylinder.prototype.svgStrokeTolerance=0,mxCylinder.prototype.paintVertexShape=function(t,e,n,i,l){t.translate(e,n),t.begin(),this.redrawPath(t,e,n,i,l,!1),t.fillAndStroke(),this.outline&&null!=this.style&&0!=mxUtils.getValue(this.style,mxConstants.STYLE_BACKGROUND_OUTLINE,0)||(t.setShadow(!1),t.begin(),this.redrawPath(t,e,n,i,l,!0),t.stroke())},mxCylinder.prototype.getCylinderSize=function(t,e,n,i){return Math.min(this.maxHeight,Math.round(i/5))},mxCylinder.prototype.redrawPath=function(t,e,n,i,l,o){e=this.getCylinderSize(e,n,i,l),(o&&null!=this.fill||!o&&null==this.fill)&&(t.moveTo(0,e),t.curveTo(0,2*e,i,2*e,i,e),o||(t.stroke(),t.begin())),o||(t.moveTo(0,e),t.curveTo(0,-e/3,i,-e/3,i,e),t.lineTo(i,l-e),t.curveTo(i,l+e/3,0,l+e/3,0,l-e),t.close())},mxUtils.extend(mxConnector,mxPolyline),mxConnector.prototype.updateBoundingBox=function(){this.useSvgBoundingBox=null!=this.style&&1==this.style[mxConstants.STYLE_CURVED],mxShape.prototype.updateBoundingBox.apply(this,arguments)},mxConnector.prototype.paintEdgeShape=function(t,e){var n=this.createMarker(t,e,!0),i=this.createMarker(t,e,!1);mxPolyline.prototype.paintEdgeShape.apply(this,arguments),t.setFillColor(this.stroke),t.setShadow(!1),t.setDashed(!1),null!=n&&n(),null!=i&&i()},mxConnector.prototype.createMarker=function(t,e,n){var i,l=null,o=e.length,s=mxUtils.getValue(this.style,n?mxConstants.STYLE_STARTARROW:mxConstants.STYLE_ENDARROW),r=n?e[1]:e[o-2];return e=n?e[0]:e[o-1],null!=s&&null!=r&&null!=e&&(o=e.y-r.y,r=(l=e.x-r.x)/(i=Math.sqrt(l*l+o*o)),l=o/i,o=mxUtils.getNumber(this.style,n?mxConstants.STYLE_STARTSIZE:mxConstants.STYLE_ENDSIZE,mxConstants.DEFAULT_MARKERSIZE),l=mxMarker.createMarker(t,this,s,e,r,l,o,n,this.strokewidth,0!=this.style[n?mxConstants.STYLE_STARTFILL:mxConstants.STYLE_ENDFILL])),l},mxConnector.prototype.augmentBoundingBox=function(t){mxShape.prototype.augmentBoundingBox.apply(this,arguments);var e=0;mxUtils.getValue(this.style,mxConstants.STYLE_STARTARROW,mxConstants.NONE)!=mxConstants.NONE&&(e=mxUtils.getNumber(this.style,mxConstants.STYLE_STARTSIZE,mxConstants.DEFAULT_MARKERSIZE)+1),mxUtils.getValue(this.style,mxConstants.STYLE_ENDARROW,mxConstants.NONE)!=mxConstants.NONE&&(e=Math.max(e,mxUtils.getNumber(this.style,mxConstants.STYLE_ENDSIZE,mxConstants.DEFAULT_MARKERSIZE))+1),t.grow(e*this.scale)},mxUtils.extend(mxSwimlane,mxShape),mxSwimlane.prototype.imageSize=16,mxSwimlane.prototype.isRoundable=function(t,e,n,i,l){return!0},mxSwimlane.prototype.getTitleSize=function(){return Math.max(0,mxUtils.getValue(this.style,mxConstants.STYLE_STARTSIZE,mxConstants.DEFAULT_STARTSIZE))},mxSwimlane.prototype.getLabelBounds=function(t){var e=this.getTitleSize();t=new mxRectangle(t.x,t.y,t.width,t.height);var n=this.isHorizontal(),i=1==mxUtils.getValue(this.style,mxConstants.STYLE_FLIPH,0),l=1==mxUtils.getValue(this.style,mxConstants.STYLE_FLIPV,0),o=this.direction==mxConstants.DIRECTION_NORTH||this.direction==mxConstants.DIRECTION_SOUTH;return i=!(n=n==!o)&&i!=(this.direction==mxConstants.DIRECTION_SOUTH||this.direction==mxConstants.DIRECTION_WEST),l=n&&l!=(this.direction==mxConstants.DIRECTION_SOUTH||this.direction==mxConstants.DIRECTION_WEST),o?(e=Math.min(t.width,e*this.scale),(i||l)&&(t.x+=t.width-e),t.width=e):(e=Math.min(t.height,e*this.scale),(i||l)&&(t.y+=t.height-e),t.height=e),t},mxSwimlane.prototype.getGradientBounds=function(t,e,n,i,l){return t=this.getTitleSize(),this.isHorizontal()?new mxRectangle(e,n,i,t=Math.min(t,l)):new mxRectangle(e,n,t=Math.min(t,i),l)},mxSwimlane.prototype.getSwimlaneArcSize=function(t,e,n){return"1"==mxUtils.getValue(this.style,mxConstants.STYLE_ABSOLUTE_ARCSIZE,0)?Math.min(t/2,Math.min(e/2,mxUtils.getValue(this.style,mxConstants.STYLE_ARCSIZE,mxConstants.LINE_ARCSIZE)/2)):n*(t=mxUtils.getValue(this.style,mxConstants.STYLE_ARCSIZE,100*mxConstants.RECTANGLE_ROUNDING_FACTOR)/100)*3},mxSwimlane.prototype.isHorizontal=function(){return 1==mxUtils.getValue(this.style,mxConstants.STYLE_HORIZONTAL,1)},mxSwimlane.prototype.paintVertexShape=function(t,e,n,i,l){var o=this.getTitleSize(),s=mxUtils.getValue(this.style,mxConstants.STYLE_SWIMLANE_FILLCOLOR,mxConstants.NONE),r=1==mxUtils.getValue(this.style,mxConstants.STYLE_SWIMLANE_LINE,1),a=0;o=this.isHorizontal()?Math.min(o,l):Math.min(o,i),t.translate(e,n),this.isRounded?(a=this.getSwimlaneArcSize(i,l,o),a=Math.min((this.isHorizontal()?l:i)-o,Math.min(o,a)),this.paintRoundedSwimlane(t,e,n,i,l,o,a,s,r)):this.paintSwimlane(t,e,n,i,l,o,s,r),s=mxUtils.getValue(this.style,mxConstants.STYLE_SEPARATORCOLOR,mxConstants.NONE),this.paintSeparator(t,e,n,i,l,o,s),null!=this.image&&(l=this.getImageBounds(e,n,i,l),t.image(l.x-e,l.y-n,l.width,l.height,this.image,!1,!1,!1)),this.glass&&(t.setShadow(!1),this.paintGlassEffect(t,0,0,i,o,a))},mxSwimlane.prototype.paintSwimlane=function(t,e,n,i,l,o,s,r){t.begin();var a=!0;null!=this.style&&(a="1"==mxUtils.getValue(this.style,mxConstants.STYLE_POINTER_EVENTS,"1")),this.isHorizontal()?(t.moveTo(0,o),t.lineTo(0,0),t.lineTo(i,0),t.lineTo(i,o),t.fillAndStroke(),o<l&&(s!=mxConstants.NONE&&a||(t.pointerEvents=!1),s!=mxConstants.NONE&&t.setFillColor(s),t.begin(),t.moveTo(0,o),t.lineTo(0,l),t.lineTo(i,l),t.lineTo(i,o),s==mxConstants.NONE?t.stroke():t.fillAndStroke())):(t.moveTo(o,0),t.lineTo(0,0),t.lineTo(0,l),t.lineTo(o,l),t.fillAndStroke(),o<i&&(s!=mxConstants.NONE&&a||(t.pointerEvents=!1),s!=mxConstants.NONE&&t.setFillColor(s),t.begin(),t.moveTo(o,0),t.lineTo(i,0),t.lineTo(i,l),t.lineTo(o,l),s==mxConstants.NONE?t.stroke():t.fillAndStroke())),r&&this.paintDivider(t,e,n,i,l,o,s==mxConstants.NONE)},mxSwimlane.prototype.paintRoundedSwimlane=function(t,e,n,i,l,o,s,r,a){t.begin();var h=!0;null!=this.style&&(h="1"==mxUtils.getValue(this.style,mxConstants.STYLE_POINTER_EVENTS,"1")),this.isHorizontal()?(t.moveTo(i,o),t.lineTo(i,s),t.quadTo(i,0,i-Math.min(i/2,s),0),t.lineTo(Math.min(i/2,s),0),t.quadTo(0,0,0,s),t.lineTo(0,o),t.fillAndStroke(),o<l&&(r!=mxConstants.NONE&&h||(t.pointerEvents=!1),r!=mxConstants.NONE&&t.setFillColor(r),t.begin(),t.moveTo(0,o),t.lineTo(0,l-s),t.quadTo(0,l,Math.min(i/2,s),l),t.lineTo(i-Math.min(i/2,s),l),t.quadTo(i,l,i,l-s),t.lineTo(i,o),r==mxConstants.NONE?t.stroke():t.fillAndStroke())):(t.moveTo(o,0),t.lineTo(s,0),t.quadTo(0,0,0,Math.min(l/2,s)),t.lineTo(0,l-Math.min(l/2,s)),t.quadTo(0,l,s,l),t.lineTo(o,l),t.fillAndStroke(),o<i&&(r!=mxConstants.NONE&&h||(t.pointerEvents=!1),r!=mxConstants.NONE&&t.setFillColor(r),t.begin(),t.moveTo(o,l),t.lineTo(i-s,l),t.quadTo(i,l,i,l-Math.min(l/2,s)),t.lineTo(i,Math.min(l/2,s)),t.quadTo(i,0,i-s,0),t.lineTo(o,0),r==mxConstants.NONE?t.stroke():t.fillAndStroke())),a&&this.paintDivider(t,e,n,i,l,o,r==mxConstants.NONE)},mxSwimlane.prototype.paintDivider=function(t,e,n,i,l,o,s){s||t.setShadow(!1),t.begin(),this.isHorizontal()?(t.moveTo(0,o),t.lineTo(i,o)):(t.moveTo(o,0),t.lineTo(o,l)),t.stroke()},mxSwimlane.prototype.paintSeparator=function(t,e,n,i,l,o,s){s!=mxConstants.NONE&&(t.setStrokeColor(s),t.setDashed(!0),t.begin(),this.isHorizontal()?(t.moveTo(i,o),t.lineTo(i,l)):(t.moveTo(o,0),t.lineTo(i,0)),t.stroke(),t.setDashed(!1))},mxSwimlane.prototype.getImageBounds=function(t,e,n,i){return this.isHorizontal()?new mxRectangle(t+n-this.imageSize,e,this.imageSize,this.imageSize):new mxRectangle(t,e,this.imageSize,this.imageSize)},mxGraphLayout.prototype.graph=null,mxGraphLayout.prototype.useBoundingBox=!0,mxGraphLayout.prototype.parent=null,mxGraphLayout.prototype.moveCell=function(t,e,n){},mxGraphLayout.prototype.resizeCell=function(t,e){},mxGraphLayout.prototype.execute=function(t){},mxGraphLayout.prototype.getGraph=function(){return this.graph},mxGraphLayout.prototype.getConstraint=function(t,e,n,i){return this.graph.getCurrentCellStyle(e)[t]},mxGraphLayout.traverse=function(t,e,n,i,l){if(null!=n&&null!=t&&(e=null==e||e,!(l=l||new mxDictionary).get(t)&&(l.put(t,!0),null==(i=n(t,i))||i))&&0<(i=this.graph.model.getEdgeCount(t)))for(var o=0;o<i;o++){var s=this.graph.model.getEdgeAt(t,o),r=this.graph.model.getTerminal(s,!0)==t;e&&!r||(r=this.graph.view.getVisibleTerminal(s,!r),this.traverse(r,e,n,s,l))}},mxGraphLayout.prototype.isAncestor=function(t,e,n){if(!n)return this.graph.model.getParent(e)==t;if(e==t)return!1;for(;null!=e&&e!=t;)e=this.graph.model.getParent(e);return e==t},mxGraphLayout.prototype.isVertexMovable=function(t){return this.graph.isCellMovable(t)},mxGraphLayout.prototype.isVertexIgnored=function(t){return!this.graph.getModel().isVertex(t)||!this.graph.isCellVisible(t)},mxGraphLayout.prototype.isEdgeIgnored=function(t){var e=this.graph.getModel();return!e.isEdge(t)||!this.graph.isCellVisible(t)||null==e.getTerminal(t,!0)||null==e.getTerminal(t,!1)},mxGraphLayout.prototype.setEdgeStyleEnabled=function(t,e){this.graph.setCellStyles(mxConstants.STYLE_NOEDGESTYLE,e?"0":"1",[t])},mxGraphLayout.prototype.setOrthogonalEdge=function(t,e){this.graph.setCellStyles(mxConstants.STYLE_ORTHOGONAL,e?"1":"0",[t])},mxGraphLayout.prototype.getParentOffset=function(t){var e=new mxPoint;if(null!=t&&t!=this.parent){var n=this.graph.getModel();if(n.isAncestor(this.parent,t))for(var i=n.getGeometry(t);t!=this.parent;)e.x+=i.x,e.y+=i.y,t=n.getParent(t),i=n.getGeometry(t)}return e},mxGraphLayout.prototype.setEdgePoints=function(t,e){if(null!=t){var n=this.graph.model,i=n.getGeometry(t);if(null==i?(i=new mxGeometry).setRelative(!0):i=i.clone(),null!=this.parent&&null!=e)for(var l=n.getParent(t),o=(l=this.getParentOffset(l),0);o<e.length;o++)e[o].x-=l.x,e[o].y-=l.y;i.points=e,n.setGeometry(t,i)}},mxGraphLayout.prototype.setVertexLocation=function(t,e,n){var i,l,o,s=this.graph.getModel(),r=s.getGeometry(t),a=null;return null!=r&&(a=new mxRectangle(e,n,r.width,r.height),!this.useBoundingBox||null!=(i=this.graph.getView().getState(t))&&null!=i.text&&null!=i.text.boundingBox&&(l=this.graph.getView().scale,o=i.text.boundingBox,i.text.boundingBox.x<i.x&&(e+=(i.x-o.x)/l,a.width=o.width),i.text.boundingBox.y<i.y&&(n+=(i.y-o.y)/l,a.height=o.height)),null==this.parent||null!=(i=s.getParent(t))&&i!=this.parent&&(e-=(i=this.getParentOffset(i)).x,n-=i.y),r.x==e&&r.y==n||((r=r.clone()).x=e,r.y=n,s.setGeometry(t,r))),a},mxGraphLayout.prototype.getVertexBounds=function(t){var e,n,i,l,o,s=this.graph.getModel().getGeometry(t);return!this.useBoundingBox||null!=(e=this.graph.getView().getState(t))&&null!=e.text&&null!=e.text.boundingBox&&(n=this.graph.getView().scale,i=e.text.boundingBox,l=Math.max(e.x-i.x,0)/n,o=Math.max(e.y-i.y,0)/n,s=new mxRectangle(s.x-l,s.y-o,s.width+l+Math.max(i.x+i.width-(e.x+e.width),0)/n,s.height+o+Math.max(i.y+i.height-(e.y+e.height),0)/n)),null!=this.parent&&(t=this.graph.getModel().getParent(t),s=s.clone(),null!=t&&t!=this.parent&&(t=this.getParentOffset(t),s.x+=t.x,s.y+=t.y)),new mxRectangle(s.x,s.y,s.width,s.height)},mxGraphLayout.prototype.arrangeGroups=function(t,e,n,i,l,o){return this.graph.updateGroupBounds(t,e,!0,n,i,l,o)},WeightedCellSorter.prototype.weightedValue=0,WeightedCellSorter.prototype.nudge=!1,WeightedCellSorter.prototype.visited=!1,WeightedCellSorter.prototype.rankIndex=null,WeightedCellSorter.prototype.cell=null,WeightedCellSorter.prototype.compare=function(t,e){return null!=t&&null!=e?e.weightedValue>t.weightedValue||!(e.weightedValue<t.weightedValue)&&e.nudge?-1:1:0},mxStackLayout.prototype=new mxGraphLayout,mxStackLayout.prototype.constructor=mxStackLayout,mxStackLayout.prototype.horizontal=null,mxStackLayout.prototype.spacing=null,mxStackLayout.prototype.x0=null,mxStackLayout.prototype.y0=null,mxStackLayout.prototype.border=0,mxStackLayout.prototype.marginTop=0,mxStackLayout.prototype.marginLeft=0,mxStackLayout.prototype.marginRight=0,mxStackLayout.prototype.marginBottom=0,mxStackLayout.prototype.keepFirstLocation=!1,mxStackLayout.prototype.fill=!1,mxStackLayout.prototype.resizeParent=!1,mxStackLayout.prototype.resizeParentMax=!1,mxStackLayout.prototype.resizeLast=!1,mxStackLayout.prototype.wrap=null,mxStackLayout.prototype.borderCollapse=!0,mxStackLayout.prototype.allowGaps=!1,mxStackLayout.prototype.gridSize=0,mxStackLayout.prototype.isHorizontal=function(){return this.horizontal},mxStackLayout.prototype.moveCell=function(t,e,n){var i=this.graph.getModel(),l=i.getParent(t),o=this.isHorizontal();if(null!=t&&null!=l){var s=0,r=i.getChildCount(l);for(n=o?e:n,null!=(e=this.graph.getView().getState(l))&&(n-=o?e.x:e.y),n/=this.graph.view.scale,e=0;e<r;e++){var a=i.getChildAt(l,e);if(a!=t&&null!=(a=i.getGeometry(a))){if(a=o?a.x+a.width/2:a.y+a.height/2,s<=n&&n<a)break;s=a}}o=l.getIndex(t),o=Math.max(0,e-(o<e?1:0)),i.add(l,t,o)}},mxStackLayout.prototype.getParentSize=function(t){var e=this.graph.getModel(),n=e.getGeometry(t);return null!=this.graph.container&&(null==n&&e.isLayer(t)||t==this.graph.getView().currentRoot)?new mxRectangle(0,0,this.graph.container.offsetWidth-1,this.graph.container.offsetHeight-1):n},mxStackLayout.prototype.getLayoutCells=function(t){for(var e=this.graph.getModel(),n=e.getChildCount(t),i=[],l=0;l<n;l++){var o=e.getChildAt(t,l);!this.isVertexIgnored(o)&&this.isVertexMovable(o)&&i.push(o)}return this.allowGaps&&i.sort(mxUtils.bind(this,function(t,e){return t=this.graph.getCellGeometry(t),e=this.graph.getCellGeometry(e),this.horizontal?t.x==e.x?0:0<(t.x>e.x)?1:-1:t.y==e.y?0:0<(t.y>e.y)?1:-1})),i},mxStackLayout.prototype.snap=function(t){var e;return null!=this.gridSize&&0<this.gridSize&&1<(t=Math.max(t,this.gridSize))/this.gridSize&&(t+=(e=t%this.gridSize)>this.gridSize/2?this.gridSize-e:-e),t},mxStackLayout.prototype.execute=function(t){if(null!=t){var e=this.getParentSize(t),n=this.isHorizontal(),i=this.graph.getModel(),l=null,o=(l=(l=null!=e?n?e.height-this.marginTop-this.marginBottom:e.width-this.marginLeft-this.marginRight:l)-2*this.border,this.x0+this.border+this.marginLeft),s=this.y0+this.border+this.marginTop;this.graph.isSwimlane(t)&&(a=this.graph.getCellStyle(t),r=mxUtils.getNumber(a,mxConstants.STYLE_STARTSIZE,mxConstants.DEFAULT_STARTSIZE),a=1==mxUtils.getValue(a,mxConstants.STYLE_HORIZONTAL,!0),null!=e&&(r=a?Math.min(r,e.height):Math.min(r,e.width)),n==a&&(l-=r),a?s+=r:o+=r),i.beginUpdate();try{for(var r=0,a=null,h=0,u=null,d=this.getLayoutCells(t),c=0;c<d.length;c++){var p,m,g,x=d[c],y=i.getGeometry(x);null!=y&&(y=y.clone(),null!=this.wrap&&null!=a&&(n&&a.x+a.width+y.width+2*this.spacing>this.wrap||!n&&a.y+a.height+y.height+2*this.spacing>this.wrap)&&(a=null,n?s+=r+this.spacing:o+=r+this.spacing,r=0),r=Math.max(r,n?y.height:y.width),m=0,this.borderCollapse||(p=this.graph.getCellStyle(x),m=mxUtils.getNumber(p,mxConstants.STYLE_STROKEWIDTH,1)),null!=a?(g=h+this.spacing+Math.floor(m/2),n?y.x=this.snap((this.allowGaps?Math.max(g,y.x):g)-this.marginLeft)+this.marginLeft:y.y=this.snap((this.allowGaps?Math.max(g,y.y):g)-this.marginTop)+this.marginTop):this.keepFirstLocation||(n?y.x=this.allowGaps&&y.x>o?Math.max(this.snap(y.x-this.marginLeft)+this.marginLeft,o):o:y.y=this.allowGaps&&y.y>s?Math.max(this.snap(y.y-this.marginTop)+this.marginTop,s):s),n?y.y=s:y.x=o,this.fill&&null!=l&&(n?y.height=l:y.width=l),n?y.width=this.snap(y.width):y.height=this.snap(y.height),this.setChildGeometry(x,y),u=x,a=y,h=n?a.x+a.width+Math.floor(m/2):a.y+a.height+Math.floor(m/2))}this.resizeParent&&null!=e&&null!=a&&!this.graph.isCellCollapsed(t)?this.updateParentGeometry(t,e,a):this.resizeLast&&null!=e&&null!=a&&null!=u&&(n?a.width=e.width-a.x-this.spacing-this.marginRight-this.marginLeft:a.height=e.height-a.y-this.spacing-this.marginBottom,this.setChildGeometry(u,a))}finally{i.endUpdate()}}},mxStackLayout.prototype.setChildGeometry=function(t,e){var n=this.graph.getCellGeometry(t);null!=n&&e.x==n.x&&e.y==n.y&&e.width==n.width&&e.height==n.height||this.graph.getModel().setGeometry(t,e)},mxStackLayout.prototype.updateParentGeometry=function(t,e,n){var i=this.isHorizontal(),l=this.graph.getModel(),o=e.clone();i?(n=n.x+n.width+this.marginRight+this.border,o.width=this.resizeParentMax?Math.max(o.width,n):n):(n=n.y+n.height+this.marginBottom+this.border,o.height=this.resizeParentMax?Math.max(o.height,n):n),e.x==o.x&&e.y==o.y&&e.width==o.width&&e.height==o.height||l.setGeometry(t,o)},mxPartitionLayout.prototype=new mxGraphLayout,mxPartitionLayout.prototype.constructor=mxPartitionLayout,mxPartitionLayout.prototype.horizontal=null,mxPartitionLayout.prototype.spacing=null,mxPartitionLayout.prototype.border=null,mxPartitionLayout.prototype.resizeVertices=!0,mxPartitionLayout.prototype.isHorizontal=function(){return this.horizontal},mxPartitionLayout.prototype.moveCell=function(t,e,n){var i=(n=this.graph.getModel()).getParent(t);if(null!=t&&null!=i){for(var l=0,o=n.getChildCount(i),s=0;s<o;s++){var r=n.getChildAt(i,s);if(null!=(r=this.getVertexBounds(r))){if(r=r.x+r.width/2,l<e&&e<r)break;l=r}}e=i.getIndex(t),e=Math.max(0,s-(e<s?1:0)),n.add(i,t,e)}},mxPartitionLayout.prototype.execute=function(t){var e=this.isHorizontal(),n=this.graph.getModel(),i=n.getGeometry(t);if(null!=(i=null!=this.graph.container&&(null==i&&n.isLayer(t)||t==this.graph.getView().currentRoot)?new mxRectangle(0,0,this.graph.container.offsetWidth-1,this.graph.container.offsetHeight-1):i)){for(var l=[],o=n.getChildCount(t),s=0;s<o;s++){var r=n.getChildAt(t,s);!this.isVertexIgnored(r)&&this.isVertexMovable(r)&&l.push(r)}if(0<(o=l.length)){var a=this.border,h=this.border,u=(u=e?i.height:i.width)-2*this.border;if(t=this.graph.isSwimlane(t)?this.graph.getStartSize(t):new mxRectangle,u-=e?t.height:t.width,a+=t.width,h+=t.height,t=this.border+(o-1)*this.spacing,0<(i=e?(i.width-a-t)/o:(i.height-h-t)/o)){n.beginUpdate();try{for(s=0;s<o;s++){var d=n.getGeometry(r=l[s]);null!=d&&((d=d.clone()).x=a,d.y=h,e?(this.resizeVertices&&(d.width=i,d.height=u),a+=i+this.spacing):(this.resizeVertices&&(d.height=i,d.width=u),h+=i+this.spacing),n.setGeometry(r,d))}}finally{n.endUpdate()}}}}},mxCompactTreeLayout.prototype=new mxGraphLayout,mxCompactTreeLayout.prototype.constructor=mxCompactTreeLayout,mxCompactTreeLayout.prototype.horizontal=null,mxCompactTreeLayout.prototype.invert=null,mxCompactTreeLayout.prototype.resizeParent=!0,mxCompactTreeLayout.prototype.maintainParentLocation=!1,mxCompactTreeLayout.prototype.groupPadding=10,mxCompactTreeLayout.prototype.groupPaddingTop=0,mxCompactTreeLayout.prototype.groupPaddingRight=0,mxCompactTreeLayout.prototype.groupPaddingBottom=0,mxCompactTreeLayout.prototype.groupPaddingLeft=0,mxCompactTreeLayout.prototype.parentsChanged=null,mxCompactTreeLayout.prototype.moveTree=!1,mxCompactTreeLayout.prototype.visited=null,mxCompactTreeLayout.prototype.levelDistance=10,mxCompactTreeLayout.prototype.nodeDistance=20,mxCompactTreeLayout.prototype.resetEdges=!0,mxCompactTreeLayout.prototype.prefHozEdgeSep=5,mxCompactTreeLayout.prototype.prefVertEdgeOff=4,mxCompactTreeLayout.prototype.minEdgeJetty=8,mxCompactTreeLayout.prototype.channelBuffer=4,mxCompactTreeLayout.prototype.edgeRouting=!0,mxCompactTreeLayout.prototype.sortEdges=!1,mxCompactTreeLayout.prototype.alignRanks=!1,mxCompactTreeLayout.prototype.maxRankHeight=null,mxCompactTreeLayout.prototype.root=null,mxCompactTreeLayout.prototype.node=null,mxCompactTreeLayout.prototype.isVertexIgnored=function(t){return mxGraphLayout.prototype.isVertexIgnored.apply(this,arguments)||0==this.graph.getConnections(t).length},mxCompactTreeLayout.prototype.isHorizontal=function(){return this.horizontal},mxCompactTreeLayout.prototype.execute=function(t,e){this.parent=t;var n,i,l,o,s,r=this.graph.getModel();if(null==e){if(0<this.graph.getEdges(t,r.getParent(t),this.invert,!this.invert,!1).length)this.root=t;else if(0<(l=this.graph.findTreeRoots(t,!0,this.invert)).length)for(var a=0;a<l.length;a++)if(!this.isVertexIgnored(l[a])&&0<this.graph.getEdges(l[a],null,this.invert,!this.invert,!1).length){this.root=l[a];break}}else this.root=e;if(null!=this.root){this.parentsChanged=this.resizeParent?{}:null,this.parentY=this.parentX=null,t==this.root||null==r.isVertex(t)||!this.maintainParentLocation||null!=(n=this.graph.getCellGeometry(t))&&(this.parentX=n.x,this.parentY=n.y),r.beginUpdate();try{this.visited={},this.node=this.dfs(this.root,t),this.alignRanks&&(this.maxRankHeight=[],this.findRankHeights(this.node,0),this.setCellHeights(this.node,0)),null!=this.node&&(this.layout(this.node),l=i=this.graph.gridSize,this.moveTree||null!=(o=this.getVertexBounds(this.root))&&(i=o.x,l=o.y),(o=null)!=(o=this.isHorizontal()?this.horizontalLayout(this.node,i,l):this.verticalLayout(this.node,null,i,l))&&(s=a=0,o.x<0&&(a=Math.abs(i-o.x)),o.y<0&&(s=Math.abs(l-o.y)),0==a&&0==s||this.moveNode(this.node,a,s),this.resizeParent&&this.adjustParents(),this.edgeRouting&&this.localEdgeProcessing(this.node)),null==this.parentX||null==this.parentY||null!=(n=this.graph.getCellGeometry(t))&&((n=n.clone()).x=this.parentX,n.y=this.parentY,r.setGeometry(t,n)))}finally{r.endUpdate()}}},mxCompactTreeLayout.prototype.moveNode=function(t,e,n){for(t.x+=e,t.y+=n,this.apply(t),t=t.child;null!=t;)this.moveNode(t,e,n),t=t.next},mxCompactTreeLayout.prototype.sortOutgoingEdges=function(t,e){var n=new mxDictionary;e.sort(function(e,i){var l=e.getTerminal(e.getTerminal(!1)==t);return null==(e=n.get(l))&&(e=mxCellPath.create(l).split(mxCellPath.PATH_SEPARATOR),n.put(l,e)),l=i.getTerminal(i.getTerminal(!1)==t),null==(i=n.get(l))&&(i=mxCellPath.create(l).split(mxCellPath.PATH_SEPARATOR),n.put(l,i)),mxCellPath.compare(e,i)})},mxCompactTreeLayout.prototype.findRankHeights=function(t,e){(null==this.maxRankHeight[e]||this.maxRankHeight[e]<t.height)&&(this.maxRankHeight[e]=t.height);for(var n=t.child;null!=n;)this.findRankHeights(n,e+1),n=n.next},mxCompactTreeLayout.prototype.setCellHeights=function(t,e){null!=this.maxRankHeight[e]&&this.maxRankHeight[e]>t.height&&(t.height=this.maxRankHeight[e]);for(var n=t.child;null!=n;)this.setCellHeights(n,e+1),n=n.next},mxCompactTreeLayout.prototype.dfs=function(t,e){var n=mxCellPath.create(t),i=null;if(null!=t&&null==this.visited[n]&&!this.isVertexIgnored(t)){this.visited[n]=t,i=this.createNode(t),n=this.graph.getModel();var l=null,o=this.graph.getEdges(t,e,this.invert,!this.invert,!1,!0),s=this.graph.getView();this.sortEdges&&this.sortOutgoingEdges(t,o);for(var r=0;r<o.length;r++){var a,h=o[r];this.isEdgeIgnored(h)||(this.resetEdges&&this.setEdgePoints(h,null),this.edgeRouting&&(this.setEdgeStyleEnabled(h,!1),this.setEdgePoints(h,null)),h=null!=(a=s.getState(h))?a.getVisibleTerminal(this.invert):s.getVisibleTerminal(h,this.invert),null!=(a=this.dfs(h,e))&&null!=n.getGeometry(h)&&(null==l?i.child=a:l.next=a,l=a))}}return i},mxCompactTreeLayout.prototype.layout=function(t){if(null!=t){for(var e=t.child;null!=e;)this.layout(e),e=e.next;null!=t.child?this.attachParent(t,this.join(t)):this.layoutLeaf(t)}},mxCompactTreeLayout.prototype.horizontalLayout=function(t,e,n,i){if(t.x+=e+t.offsetX,t.y+=n+t.offsetY,i=this.apply(t,i),null!=(e=t.child)){i=this.horizontalLayout(e,t.x,t.y,i),n=t.y+e.offsetY;for(var l=e.next;null!=l;)i=this.horizontalLayout(l,t.x+e.offsetX,n,i),n+=l.offsetY,l=l.next}return i},mxCompactTreeLayout.prototype.verticalLayout=function(t,e,n,i,l){if(t.x+=n+t.offsetY,t.y+=i+t.offsetX,l=this.apply(t,l),null!=(e=t.child))for(l=this.verticalLayout(e,t,t.x,t.y,l),n=t.x+e.offsetY,i=e.next;null!=i;)l=this.verticalLayout(i,t,n,t.y+e.offsetX,l),n+=i.offsetY,i=i.next;return l},mxCompactTreeLayout.prototype.attachParent=function(t,e){var n=this.nodeDistance+this.levelDistance,i=(e-t.width)/2-this.nodeDistance;e=i+t.width+2*this.nodeDistance-e,t.child.offsetX=n+t.height,t.child.offsetY=e,t.contour.upperHead=this.createLine(t.height,0,this.createLine(n,e,t.contour.upperHead)),t.contour.lowerHead=this.createLine(t.height,0,this.createLine(n,i,t.contour.lowerHead))},mxCompactTreeLayout.prototype.layoutLeaf=function(t){var e=2*this.nodeDistance;t.contour.upperTail=this.createLine(t.height+e,0),t.contour.upperHead=t.contour.upperTail,t.contour.lowerTail=this.createLine(0,-t.width-e),t.contour.lowerHead=this.createLine(t.height+e,0,t.contour.lowerTail)},mxCompactTreeLayout.prototype.join=function(t){var e=2*this.nodeDistance;t.contour=(l=t.child).contour;for(var n=l.width+e,i=n,l=l.next;null!=l;){var o=this.merge(t.contour,l.contour);l.offsetY=o+n,l.offsetX=0,i+=o+(n=l.width+e),l=l.next}return i},mxCompactTreeLayout.prototype.merge=function(t,e){for(var n=0,i=0,l=0,o=t.lowerHead,s=e.upperHead;null!=s&&null!=o;){var r=this.offset(n,i,s.dx,s.dy,o.dx,o.dy);i+=r,l+=r,n+s.dx<=o.dx?(n+=s.dx,i+=s.dy,s=s.next):(n-=o.dx,i-=o.dy,o=o.next)}return null!=s?(n=this.bridge(t.upperTail,0,0,s,n,i),t.upperTail=null!=n.next?e.upperTail:n,t.lowerTail=e.lowerTail):null==(n=this.bridge(e.lowerTail,n,i,o,0,0)).next&&(t.lowerTail=n),t.lowerHead=e.lowerHead,l},mxCompactTreeLayout.prototype.offset=function(t,e,n,i,l,o){return!(l<=t||t+n<=0)&&0<(t=0<l*i-n*o?t<0?t*i/n-e:0<t?t*o/l-e:-e:l<t+n?o-(e+(l-t)*i/n):t+n<l?(n+t)*o/l-(e+i):o-(e+i))?t:0},mxCompactTreeLayout.prototype.bridge=function(t,e,n,i,l,o){return e=l+i.dx-e,0==i.dx?l=i.dy:(l=e*i.dy,l/=i.dx),e=this.createLine(e,l,i.next),t.next=this.createLine(0,o+i.dy-l-n,e),e},mxCompactTreeLayout.prototype.createNode=function(t){var e={};return e.cell=t,e.x=0,e.y=0,e.width=0,e.height=0,null!=(t=this.getVertexBounds(t))&&(this.isHorizontal()?(e.width=t.height,e.height=t.width):(e.width=t.width,e.height=t.height)),e.offsetX=0,e.offsetY=0,e.contour={},e},mxCompactTreeLayout.prototype.apply=function(t,e){var n=this.graph.getModel(),i=t.cell,l=n.getGeometry(i);return null!=i&&null!=l&&(this.isVertexMovable(i)&&(l=this.setVertexLocation(i,t.x,t.y),this.resizeParent&&(n=n.getParent(i),i=mxCellPath.create(n),null==this.parentsChanged[i]&&(this.parentsChanged[i]=n))),e=null==e?new mxRectangle(l.x,l.y,l.width,l.height):new mxRectangle(Math.min(e.x,l.x),Math.min(e.y,l.y),Math.max(e.x+e.width,l.x+l.width),Math.max(e.y+e.height,l.y+l.height))),e},mxCompactTreeLayout.prototype.createLine=function(t,e,n){var i={};return i.dx=t,i.dy=e,i.next=n,i},mxCompactTreeLayout.prototype.adjustParents=function(){var t,e=[];for(t in this.parentsChanged)e.push(this.parentsChanged[t]);this.arrangeGroups(mxUtils.sortCells(e,!0),this.groupPadding,this.groupPaddingTop,this.groupPaddingRight,this.groupPaddingBottom,this.groupPaddingLeft)},mxCompactTreeLayout.prototype.localEdgeProcessing=function(t){for(this.processNodeOutgoing(t),t=t.child;null!=t;)this.localEdgeProcessing(t),t=t.next},mxCompactTreeLayout.prototype.processNodeOutgoing=function(t){for(var e=t.child,n=t.cell,i=0,l=[];null!=e;){i++;var o=e.x;this.horizontal&&(o=e.y),l.push(new WeightedCellSorter(e,o)),e=e.next}l.sort(WeightedCellSorter.prototype.compare),(o=t.width)>(s=(i+1)*this.prefHozEdgeSep)+2*this.prefHozEdgeSep&&(o-=2*this.prefHozEdgeSep),e=(t=o/i)/2,o>s+2*this.prefHozEdgeSep&&(e+=this.prefHozEdgeSep),o=this.minEdgeJetty-this.prefVertEdgeOff;for(var s=this.getVertexBounds(n),r=0;r<l.length;r++){for(var a,h,u=this.getVertexBounds(d=l[r].cell.cell),d=this.graph.getEdgesBetween(n,d,!1),c=[],p=0;p<d.length;p++)this.horizontal?(c.push(new mxPoint(a=s.x+s.width,h=s.y+e)),c.push(new mxPoint(a=s.x+s.width+o,h)),h=u.y+u.height/2):(c.push(new mxPoint(a=s.x+e,h=s.y+s.height)),c.push(new mxPoint(a,h=s.y+s.height+o)),a=u.x+u.width/2),c.push(new mxPoint(a,h)),this.setEdgePoints(d[p],c);r<i/2?o+=this.prefVertEdgeOff:i/2<r&&(o-=this.prefVertEdgeOff),e+=t}},mxUtils.extend(mxRadialTreeLayout,mxCompactTreeLayout),mxRadialTreeLayout.prototype.angleOffset=.5,mxRadialTreeLayout.prototype.rootx=0,mxRadialTreeLayout.prototype.rooty=0,mxRadialTreeLayout.prototype.levelDistance=120,mxRadialTreeLayout.prototype.nodeDistance=10,mxRadialTreeLayout.prototype.autoRadius=!1,mxRadialTreeLayout.prototype.sortEdges=!1,mxRadialTreeLayout.prototype.rowMinX=[],mxRadialTreeLayout.prototype.rowMaxX=[],mxRadialTreeLayout.prototype.rowMinCenX=[],mxRadialTreeLayout.prototype.rowMaxCenX=[],mxRadialTreeLayout.prototype.rowRadi=[],mxRadialTreeLayout.prototype.row=[],mxRadialTreeLayout.prototype.isVertexIgnored=function(t){return mxGraphLayout.prototype.isVertexIgnored.apply(this,arguments)||0==this.graph.getConnections(t).length},mxRadialTreeLayout.prototype.execute=function(t,e){this.parent=t,this.edgeRouting=this.useBoundingBox=!1,mxCompactTreeLayout.prototype.execute.apply(this,arguments);var n=null,i=this.getVertexBounds(this.root);for(h in this.centerX=i.x+i.width/2,this.centerY=i.y+i.height/2,this.visited){var l=this.getVertexBounds(this.visited[h]);(n=null!=n?n:l.clone()).add(l)}this.calcRowDims([this.node],0);var o=0,s=0;for(n=0;n<this.row.length;n++)h=(this.rowMaxX[n]-this.centerX-this.nodeDistance)/this.rowRadi[n],o=Math.max(o,(this.centerX-this.rowMinX[n]-this.nodeDistance)/this.rowRadi[n]),s=Math.max(s,h);for(n=0;n<this.row.length;n++)for(var r=this.centerX-this.nodeDistance-o*this.rowRadi[n],a=this.centerX+this.nodeDistance+s*this.rowRadi[n]-r,h=0;h<this.row[n].length;h++)i=(l=this.row[n])[h],l=this.getVertexBounds(i.cell),i.theta=(l.x+l.width/2-r)/a*Math.PI*2;for(n=this.row.length-2;0<=n;n--)for(l=this.row[n],h=0;h<l.length;h++){for(o=(i=l[h]).child,r=s=0;null!=o;)r+=o.theta,s++,o=o.next;0<s&&((o=r/s)>i.theta&&h<l.length-1?i.theta=Math.min(o,l[h+1].theta-Math.PI/10):o<i.theta&&0<h&&(i.theta=Math.max(o,l[h-1].theta+Math.PI/10)))}for(n=0;n<this.row.length;n++)for(h=0;h<this.row[n].length;h++)i=(l=this.row[n])[h],l=this.getVertexBounds(i.cell),this.setVertexLocation(i.cell,this.centerX-l.width/2+this.rowRadi[n]*Math.cos(i.theta),this.centerY-l.height/2+this.rowRadi[n]*Math.sin(i.theta))},mxRadialTreeLayout.prototype.calcRowDims=function(t,e){if(null!=t&&0!=t.length){this.rowMinX[e]=this.centerX,this.rowMaxX[e]=this.centerX,this.rowMinCenX[e]=this.centerX,this.rowMaxCenX[e]=this.centerX;for(var n=!(this.row[e]=[]),i=0;i<t.length;i++)for(var l=null!=t[i]?t[i].child:null;null!=l;){var o=this.getVertexBounds(l.cell);this.rowMinX[e]=Math.min(o.x,this.rowMinX[e]),this.rowMaxX[e]=Math.max(o.x+o.width,this.rowMaxX[e]),this.rowMinCenX[e]=Math.min(o.x+o.width/2,this.rowMinCenX[e]),this.rowMaxCenX[e]=Math.max(o.x+o.width/2,this.rowMaxCenX[e]),this.rowRadi[e]=o.y-this.getVertexBounds(this.root).y,null!=l.child&&(n=!0),this.row[e].push(l),l=l.next}n&&this.calcRowDims(this.row[e],e+1)}},mxFastOrganicLayout.prototype=new mxGraphLayout,mxFastOrganicLayout.prototype.constructor=mxFastOrganicLayout,mxFastOrganicLayout.prototype.useInputOrigin=!0,mxFastOrganicLayout.prototype.resetEdges=!0,mxFastOrganicLayout.prototype.disableEdgeStyle=!0,mxFastOrganicLayout.prototype.forceConstant=50,mxFastOrganicLayout.prototype.forceConstantSquared=0,mxFastOrganicLayout.prototype.minDistanceLimit=2,mxFastOrganicLayout.prototype.maxDistanceLimit=500,mxFastOrganicLayout.prototype.minDistanceLimitSquared=4,mxFastOrganicLayout.prototype.initialTemp=200,mxFastOrganicLayout.prototype.temperature=0,mxFastOrganicLayout.prototype.maxIterations=0,mxFastOrganicLayout.prototype.iteration=0,mxFastOrganicLayout.prototype.allowedToRun=!0,mxFastOrganicLayout.prototype.isVertexIgnored=function(t){return mxGraphLayout.prototype.isVertexIgnored.apply(this,arguments)||0==this.graph.getConnections(t).length},mxFastOrganicLayout.prototype.execute=function(t){var e=this.graph.getModel();this.vertexArray=[];for(var n=this.graph.getChildVertices(t),i=0;i<n.length;i++)this.isVertexIgnored(n[i])||this.vertexArray.push(n[i]);var l=this.useInputOrigin?this.graph.getBoundingBoxFromGeometry(this.vertexArray):null,o=this.vertexArray.length;for(this.indices=[],this.dispX=[],this.dispY=[],this.cellLocation=[],this.isMoveable=[],this.neighbours=[],this.radius=[],this.radiusSquared=[],this.forceConstant<.001&&(this.forceConstant=.001),this.forceConstantSquared=this.forceConstant*this.forceConstant,i=0;i<this.vertexArray.length;i++){var s=this.vertexArray[i];this.cellLocation[i]=[];var r=mxObjectIdentity.get(s);this.indices[r]=i;var a=this.getVertexBounds(s),h=a.width,u=a.height,d=a.x,c=a.y;this.cellLocation[i][0]=d+h/2,this.cellLocation[i][1]=c+u/2,this.radius[i]=Math.min(h,u),this.radiusSquared[i]=this.radius[i]*this.radius[i]}e.beginUpdate();try{for(i=0;i<o;i++){this.dispX[i]=0,this.dispY[i]=0,this.isMoveable[i]=this.isVertexMovable(this.vertexArray[i]);var p=this.graph.getConnections(this.vertexArray[i],t);for(n=this.graph.getOpposites(p,this.vertexArray[i]),this.neighbours[i]=[],h=0;h<n.length;h++){this.resetEdges&&this.graph.resetEdge(p[h]),this.disableEdgeStyle&&this.setEdgeStyleEnabled(p[h],!1),r=mxObjectIdentity.get(n[h]);var m=this.indices[r];this.neighbours[i][h]=null!=m?m:i}}for(this.temperature=this.initialTemp,0==this.maxIterations&&(this.maxIterations=20*Math.sqrt(o)),this.iteration=0;this.iteration<this.maxIterations;this.iteration++){if(!this.allowedToRun)return;this.calcRepulsion(),this.calcAttraction(),this.calcPositions(),this.reduceTemperature()}for(t=n=null,i=0;i<this.vertexArray.length;i++)this.isVertexMovable(s=this.vertexArray[i])&&null!=(a=this.getVertexBounds(s))&&(this.cellLocation[i][0]-=a.width/2,this.cellLocation[i][1]-=a.height/2,d=this.graph.snap(Math.round(this.cellLocation[i][0])),c=this.graph.snap(Math.round(this.cellLocation[i][1])),this.setVertexLocation(s,d,c),n=null==n?d:Math.min(n,d),t=null==t?c:Math.min(t,c));i=1-(n||0),s=1-(t||0),null!=l&&(i+=l.x,s+=l.y),this.graph.moveCells(this.vertexArray,i,s)}finally{e.endUpdate()}},mxFastOrganicLayout.prototype.calcPositions=function(){for(var t,e,n=0;n<this.vertexArray.length;n++)this.isMoveable[n]&&((e=Math.sqrt(this.dispX[n]*this.dispX[n]+this.dispY[n]*this.dispY[n]))<.001&&(e=.001),t=this.dispX[n]/e*Math.min(e,this.temperature),e=this.dispY[n]/e*Math.min(e,this.temperature),this.dispX[n]=0,this.dispY[n]=0,this.cellLocation[n][0]+=t,this.cellLocation[n][1]+=e)},mxFastOrganicLayout.prototype.calcAttraction=function(){for(var t=0;t<this.vertexArray.length;t++)for(var e=0;e<this.neighbours[t].length;e++){var n,i,l,o,s=this.neighbours[t][e];t!=s&&this.isMoveable[t]&&this.isMoveable[s]&&((i=(l=this.cellLocation[t][0]-this.cellLocation[s][0])*l+(o=this.cellLocation[t][1]-this.cellLocation[s][1])*o-this.radiusSquared[t]-this.radiusSquared[s])<this.minDistanceLimitSquared&&(i=this.minDistanceLimitSquared),o=o/(n=Math.sqrt(i))*(i/=this.forceConstant),this.dispX[t]-=l=l/n*i,this.dispY[t]-=o,this.dispX[s]+=l,this.dispY[s]+=o)}},mxFastOrganicLayout.prototype.calcRepulsion=function(){for(var t,e,n,i,l=this.vertexArray.length,o=0;o<l;o++)for(var s=o;s<l;s++){if(!this.allowedToRun)return;s!=o&&this.isMoveable[o]&&this.isMoveable[s]&&(e=this.cellLocation[o][1]-this.cellLocation[s][1],0==(t=this.cellLocation[o][0]-this.cellLocation[s][0])&&(t=.01+Math.random()),0==e&&(e=.01+Math.random()),(i=(n=Math.sqrt(t*t+e*e))-this.radius[o]-this.radius[s])>this.maxDistanceLimit||(i<this.minDistanceLimit&&(i=this.minDistanceLimit),e=e/n*(i=this.forceConstantSquared/i),this.dispX[o]+=t=t/n*i,this.dispY[o]+=e,this.dispX[s]-=t,this.dispY[s]-=e))}},mxFastOrganicLayout.prototype.reduceTemperature=function(){this.temperature=this.initialTemp*(1-this.iteration/this.maxIterations)},mxCircleLayout.prototype=new mxGraphLayout,mxCircleLayout.prototype.constructor=mxCircleLayout,mxCircleLayout.prototype.radius=null,mxCircleLayout.prototype.moveCircle=!1,mxCircleLayout.prototype.x0=0,mxCircleLayout.prototype.y0=0,mxCircleLayout.prototype.resetEdges=!0,mxCircleLayout.prototype.disableEdgeStyle=!0,mxCircleLayout.prototype.execute=function(t){var e=this.graph.getModel();e.beginUpdate();try{for(var n=0,i=null,l=null,o=[],s=e.getChildCount(t),r=0;r<s;r++){var a,h=e.getChildAt(t,r);this.isVertexIgnored(h)?this.isEdgeIgnored(h)||(this.resetEdges&&this.graph.resetEdge(h),this.disableEdgeStyle&&this.setEdgeStyleEnabled(h,!1)):(o.push(h),a=this.getVertexBounds(h),i=null==i?a.y:Math.min(i,a.y),l=null==l?a.x:Math.min(l,a.x),n=Math.max(n,Math.max(a.width,a.height)))}var u=this.getRadius(o.length,n);this.moveCircle&&(l=this.x0,i=this.y0),this.circle(o,u,l,i)}finally{e.endUpdate()}},mxCircleLayout.prototype.getRadius=function(t,e){return Math.max(t*e/Math.PI,this.radius)},mxCircleLayout.prototype.circle=function(t,e,n,i){for(var l=t.length,o=2*Math.PI/l,s=0;s<l;s++)this.isVertexMovable(t[s])&&this.setVertexLocation(t[s],Math.round(n+e+e*Math.sin(s*o)),Math.round(i+e+e*Math.cos(s*o)))},mxParallelEdgeLayout.prototype=new mxGraphLayout,mxParallelEdgeLayout.prototype.constructor=mxParallelEdgeLayout,mxParallelEdgeLayout.prototype.spacing=20,mxParallelEdgeLayout.prototype.checkOverlap=!1,mxParallelEdgeLayout.prototype.execute=function(t,e){var n=this.findParallels(t,e);this.graph.model.beginUpdate();try{for(var i in n){var l=n[i];1<l.length&&this.layout(l)}}finally{this.graph.model.endUpdate()}},mxParallelEdgeLayout.prototype.findParallels=function(t,e){var n=[],i=mxUtils.bind(this,function(t){var e;this.isEdgeIgnored(t)||null!=(e=this.getEdgeId(t))&&(null==n[e]&&(n[e]=[]),n[e].push(t))});if(null!=e)for(var l=0;l<e.length;l++)i(e[l]);else{var o=this.graph.getModel(),s=o.getChildCount(t);for(l=0;l<s;l++)i(o.getChildAt(t,l))}return n},mxParallelEdgeLayout.prototype.getEdgeId=function(t){var e=(n=this.graph.getView()).getVisibleTerminal(t,!0),n=n.getVisibleTerminal(t,!1),i="";if(null==e||null==n)return null;if(e=mxObjectIdentity.get(e),n=mxObjectIdentity.get(n),this.checkOverlap&&null!=(t=this.graph.view.getState(t))&&null!=t.absolutePoints){i=[];for(var l=0;l<t.absolutePoints.length;l++){var o=t.absolutePoints[l];null!=o&&i.push(o.x,o.y)}i=i.join(",")}return(n<e?n+"-"+e:e+"-"+n)+i},mxParallelEdgeLayout.prototype.layout=function(t){var e=t[0],n=this.graph.getView(),i=(o=this.graph.getModel()).getGeometry(n.getVisibleTerminal(e,!0));if(i==(o=o.getGeometry(n.getVisibleTerminal(e,!1)))){e=i.x+i.width+this.spacing,n=i.y+i.height/2;for(var l=0;l<t.length;l++)this.route(t[l],e,n),e+=this.spacing}else if(null!=i&&null!=o){l=o.x+o.width/2-(e=i.x+i.width/2);var o,s=o.y+o.height/2-(n=i.y+i.height/2);if(0<(o=Math.sqrt(l*l+s*s)))for(e=e+l/2+(i=s*this.spacing/o)*(t.length-1)/2,n=n+s/2-(o=l*this.spacing/o)*(t.length-1)/2,l=0;l<t.length;l++)this.route(t[l],e,n),e-=i,n+=o}},mxParallelEdgeLayout.prototype.route=function(t,e,n){this.graph.isCellMovable(t)&&this.setEdgePoints(t,[new mxPoint(e,n)])},mxCompositeLayout.prototype=new mxGraphLayout,mxCompositeLayout.prototype.constructor=mxCompositeLayout,mxCompositeLayout.prototype.layouts=null,mxCompositeLayout.prototype.master=null,mxCompositeLayout.prototype.moveCell=function(t,e,n){null!=this.master?this.master.moveCell.apply(this.master,arguments):this.layouts[0].moveCell.apply(this.layouts[0],arguments)},mxCompositeLayout.prototype.execute=function(t){var e=this.graph.getModel();e.beginUpdate();try{for(var n=0;n<this.layouts.length;n++)this.layouts[n].execute.apply(this.layouts[n],arguments)}finally{e.endUpdate()}},mxEdgeLabelLayout.prototype=new mxGraphLayout,mxEdgeLabelLayout.prototype.constructor=mxEdgeLabelLayout,mxEdgeLabelLayout.prototype.execute=function(t){for(var e=this.graph.view,n=this.graph.getModel(),i=[],l=[],o=n.getChildCount(t),s=0;s<o;s++){var r=n.getChildAt(t,s),a=e.getState(r);null!=a&&(this.isVertexIgnored(r)?this.isEdgeIgnored(r)||i.push(a):l.push(a))}this.placeLabels(l,i)},mxEdgeLabelLayout.prototype.placeLabels=function(t,e){var n=this.graph.getModel();n.beginUpdate();try{for(var i=0;i<e.length;i++){var l=e[i];if(null!=l&&null!=l.text&&null!=l.text.boundingBox)for(var o=0;o<t.length;o++){var s=t[o];null!=s&&this.avoid(l,s)}}}finally{n.endUpdate()}},mxEdgeLabelLayout.prototype.avoid=function(t,e){var n,i,l=this.graph.getModel(),o=t.text.boundingBox;mxUtils.intersects(o,e)&&(n=-o.y-o.height+e.y,i=-o.y+e.y+e.height,n=Math.abs(n)<Math.abs(i)?n:i,i=-o.x-o.width+e.x,o=-o.x+e.x+e.width,o=Math.abs(i)<Math.abs(o)?i:o,Math.abs(o)<Math.abs(n)?n=0:o=0,null!=(i=l.getGeometry(t.cell))&&(null!=(i=i.clone()).offset?(i.offset.x+=o,i.offset.y+=n):i.offset=new mxPoint(o,n),l.setGeometry(t.cell,i)))},mxGraphAbstractHierarchyCell.prototype.maxRank=-1,mxGraphAbstractHierarchyCell.prototype.minRank=-1,mxGraphAbstractHierarchyCell.prototype.x=null,mxGraphAbstractHierarchyCell.prototype.y=null,mxGraphAbstractHierarchyCell.prototype.width=0,mxGraphAbstractHierarchyCell.prototype.height=0,mxGraphAbstractHierarchyCell.prototype.nextLayerConnectedCells=null,mxGraphAbstractHierarchyCell.prototype.previousLayerConnectedCells=null,mxGraphAbstractHierarchyCell.prototype.temp=null,mxGraphAbstractHierarchyCell.prototype.getNextLayerConnectedCells=function(t){return null},mxGraphAbstractHierarchyCell.prototype.getPreviousLayerConnectedCells=function(t){return null},mxGraphAbstractHierarchyCell.prototype.isEdge=function(){return!1},mxGraphAbstractHierarchyCell.prototype.isVertex=function(){return!1},mxGraphAbstractHierarchyCell.prototype.getGeneralPurposeVariable=function(t){return null},mxGraphAbstractHierarchyCell.prototype.setGeneralPurposeVariable=function(t,e){return null},mxGraphAbstractHierarchyCell.prototype.setX=function(t,e){this.isVertex()?this.x[0]=e:this.isEdge()&&(this.x[t-this.minRank-1]=e)},mxGraphAbstractHierarchyCell.prototype.getX=function(t){return this.isVertex()?this.x[0]:this.isEdge()?this.x[t-this.minRank-1]:0},mxGraphAbstractHierarchyCell.prototype.setY=function(t,e){this.isVertex()?this.y[0]=e:this.isEdge()&&(this.y[t-this.minRank-1]=e)},mxGraphHierarchyNode.prototype=new mxGraphAbstractHierarchyCell,mxGraphHierarchyNode.prototype.constructor=mxGraphHierarchyNode,mxGraphHierarchyNode.prototype.cell=null,mxGraphHierarchyNode.prototype.id=null,mxGraphHierarchyNode.prototype.connectsAsTarget=null,mxGraphHierarchyNode.prototype.connectsAsSource=null,mxGraphHierarchyNode.prototype.hashCode=!1,mxGraphHierarchyNode.prototype.getRankValue=function(t){return this.maxRank},mxGraphHierarchyNode.prototype.getNextLayerConnectedCells=function(t){if(null==this.nextLayerConnectedCells){this.nextLayerConnectedCells=[],this.nextLayerConnectedCells[0]=[];for(var e=0;e<this.connectsAsTarget.length;e++){var n=this.connectsAsTarget[e];this.nextLayerConnectedCells[0].push(-1==n.maxRank||n.maxRank==t+1?n.source:n)}}return this.nextLayerConnectedCells[0]},mxGraphHierarchyNode.prototype.getPreviousLayerConnectedCells=function(t){if(null==this.previousLayerConnectedCells){this.previousLayerConnectedCells=[],this.previousLayerConnectedCells[0]=[];for(var e=0;e<this.connectsAsSource.length;e++){var n=this.connectsAsSource[e];this.previousLayerConnectedCells[0].push(-1==n.minRank||n.minRank==t-1?n.target:n)}}return this.previousLayerConnectedCells[0]},mxGraphHierarchyNode.prototype.isVertex=function(){return!0},mxGraphHierarchyNode.prototype.getGeneralPurposeVariable=function(t){return this.temp[0]},mxGraphHierarchyNode.prototype.setGeneralPurposeVariable=function(t,e){this.temp[0]=e},mxGraphHierarchyNode.prototype.isAncestor=function(t){if(null!=t&&null!=this.hashCode&&null!=t.hashCode&&this.hashCode.length<t.hashCode.length){if(this.hashCode==t.hashCode)return!0;if(null==this.hashCode||null==this.hashCode)return!1;for(var e=0;e<this.hashCode.length;e++)if(this.hashCode[e]!=t.hashCode[e])return!1;return!0}return!1},mxGraphHierarchyNode.prototype.getCoreCell=function(){return this.cell},mxGraphHierarchyEdge.prototype=new mxGraphAbstractHierarchyCell,mxGraphHierarchyEdge.prototype.constructor=mxGraphHierarchyEdge,mxGraphHierarchyEdge.prototype.edges=null,mxGraphHierarchyEdge.prototype.ids=null,mxGraphHierarchyEdge.prototype.source=null,mxGraphHierarchyEdge.prototype.target=null,mxGraphHierarchyEdge.prototype.isReversed=!1,mxGraphHierarchyEdge.prototype.invert=function(t){t=this.source,this.source=this.target,this.target=t,this.isReversed=!this.isReversed},mxGraphHierarchyEdge.prototype.getNextLayerConnectedCells=function(t){if(null==this.nextLayerConnectedCells){this.nextLayerConnectedCells=[];for(var e=0;e<this.temp.length;e++)this.nextLayerConnectedCells[e]=[],this.nextLayerConnectedCells[e].push(e==this.temp.length-1?this.source:this)}return this.nextLayerConnectedCells[t-this.minRank-1]},mxGraphHierarchyEdge.prototype.getPreviousLayerConnectedCells=function(t){if(null==this.previousLayerConnectedCells){this.previousLayerConnectedCells=[];for(var e=0;e<this.temp.length;e++)this.previousLayerConnectedCells[e]=[],this.previousLayerConnectedCells[e].push(0==e?this.target:this)}return this.previousLayerConnectedCells[t-this.minRank-1]},mxGraphHierarchyEdge.prototype.isEdge=function(){return!0},mxGraphHierarchyEdge.prototype.getGeneralPurposeVariable=function(t){return this.temp[t-this.minRank-1]},mxGraphHierarchyEdge.prototype.setGeneralPurposeVariable=function(t,e){this.temp[t-this.minRank-1]=e},mxGraphHierarchyEdge.prototype.getCoreCell=function(){return null!=this.edges&&0<this.edges.length?this.edges[0]:null},mxGraphHierarchyModel.prototype.maxRank=null,mxGraphHierarchyModel.prototype.vertexMapper=null,mxGraphHierarchyModel.prototype.edgeMapper=null,mxGraphHierarchyModel.prototype.ranks=null,mxGraphHierarchyModel.prototype.roots=null,mxGraphHierarchyModel.prototype.parent=null,mxGraphHierarchyModel.prototype.dfsCount=0,mxGraphHierarchyModel.prototype.SOURCESCANSTARTRANK=1e8,mxGraphHierarchyModel.prototype.tightenToSource=!1,mxGraphHierarchyModel.prototype.createInternalCells=function(t,e,n){for(var i=t.getGraph(),l=0;l<e.length;l++){n[l]=new mxGraphHierarchyNode(e[l]),this.vertexMapper.put(e[l],n[l]);var o=t.getEdges(e[l]);n[l].connectsAsSource=[];for(var s=0;s<o.length;s++)if((a=t.getVisibleTerminal(o[s],!1))!=e[l]&&t.graph.model.isVertex(a)&&!t.isVertexIgnored(a)){var r=t.getEdgesBetween(e[l],a,!1),a=t.getEdgesBetween(e[l],a,!0);if(null!=r&&0<r.length&&null==this.edgeMapper.get(r[0])&&2*a.length>=r.length){a=new mxGraphHierarchyEdge(r);for(var h=0;h<r.length;h++){var u=r[h];this.edgeMapper.put(u,a),i.resetEdge(u),t.disableEdgeStyle&&(t.setEdgeStyleEnabled(u,!1),t.setOrthogonalEdge(u,!0))}a.source=n[l],mxUtils.indexOf(n[l].connectsAsSource,a)<0&&n[l].connectsAsSource.push(a)}}n[l].temp[0]=0}},mxGraphHierarchyModel.prototype.initialRank=function(){var t=[];if(null!=this.roots)for(var e=0;e<this.roots.length;e++)null!=(l=this.vertexMapper.get(this.roots[e]))&&t.push(l);var n=this.vertexMapper.getValues();for(e=0;e<n.length;e++)n[e].temp[0]=-1;for(var i=t.slice();0<t.length;){var l,o=(l=t[0]).connectsAsTarget,s=l.connectsAsSource,r=!0,a=this.SOURCESCANSTARTRANK;for(e=0;e<o.length;e++){var h=o[e];if(5270620!=h.temp[0]){r=!1;break}h=h.source,a=Math.min(a,h.temp[0]-1)}if(r){if(l.temp[0]=a,this.maxRank=Math.min(this.maxRank,a),null!=s)for(e=0;e<s.length;e++)(h=s[e]).temp[0]=5270620,-1==(h=h.target).temp[0]&&(t.push(h),h.temp[0]=-2);t.shift()}else if(e=t.shift(),t.push(l),e==l&&1==t.length)break}for(e=0;e<n.length;e++)n[e].temp[0]-=this.maxRank;for(e=0;e<i.length;e++)for(o=(l=i[e]).connectsAsSource,n=t=0;n<o.length;n++)h=(h=o[n]).target,l.temp[0]=Math.max(t,h.temp[0]+1),t=l.temp[0];this.maxRank=this.SOURCESCANSTARTRANK-this.maxRank},mxGraphHierarchyModel.prototype.fixRanks=function(){var t=[];this.ranks=[];for(var e=0;e<this.maxRank+1;e++)t[e]=[],this.ranks[e]=t[e];var n=null;if(null!=this.roots){var i=this.roots;for(n=[],e=0;e<i.length;e++){var l=this.vertexMapper.get(i[e]);n[e]=l}}this.visit(function(e,n,i,l,o){if(0==o&&n.maxRank<0&&n.minRank<0&&(t[n.temp[0]].push(n),n.maxRank=n.temp[0],n.minRank=n.temp[0],n.temp[0]=t[n.maxRank].length-1),null!=e&&null!=i&&1<e.maxRank-n.maxRank)for(i.maxRank=e.maxRank,i.minRank=n.maxRank,i.temp=[],i.x=[],i.y=[],e=i.minRank+1;e<i.maxRank;e++)t[e].push(i),i.setGeneralPurposeVariable(e,t[e].length-1)},n,!1,null)},mxGraphHierarchyModel.prototype.visit=function(t,e,n,i){if(null!=e){for(var l=0;l<e.length;l++){var o=e[l];null!=o&&(null==i&&(i={}),n?(o.hashCode=[],o.hashCode[0]=this.dfsCount,o.hashCode[1]=l,this.extendedDfs(null,o,null,t,i,o.hashCode,l,0)):this.dfs(null,o,null,t,i,0))}this.dfsCount++}},mxGraphHierarchyModel.prototype.dfs=function(t,e,n,i,l,o){if(null!=e){var s=e.id;if(null==l[s])for(i(t,l[s]=e,n,o,0),t=e.connectsAsSource.slice(),n=0;n<t.length;n++)this.dfs(e,(s=t[n]).target,s,i,l,o+1);else i(t,e,n,o,1)}},mxGraphHierarchyModel.prototype.extendedDfs=function(t,e,n,i,l,o,s,r){if(null!=e)if(null==t||null!=e.hashCode&&e.hashCode[0]==t.hashCode[0]||(o=t.hashCode.length+1,e.hashCode=t.hashCode.slice(),e.hashCode[o-1]=s),null==l[s=e.id])for(i(t,l[s]=e,n,r,0),t=e.connectsAsSource.slice(),n=0;n<t.length;n++)this.extendedDfs(e,(s=t[n]).target,s,i,l,e.hashCode,n,r+1);else i(t,e,n,r,1)},mxSwimlaneModel.prototype.maxRank=null,mxSwimlaneModel.prototype.vertexMapper=null,mxSwimlaneModel.prototype.edgeMapper=null,mxSwimlaneModel.prototype.ranks=null,mxSwimlaneModel.prototype.roots=null,mxSwimlaneModel.prototype.parent=null,mxSwimlaneModel.prototype.dfsCount=0,mxSwimlaneModel.prototype.SOURCESCANSTARTRANK=1e8,mxSwimlaneModel.prototype.tightenToSource=!1,mxSwimlaneModel.prototype.ranksPerGroup=null,mxSwimlaneModel.prototype.createInternalCells=function(t,e,n){for(var i=t.getGraph(),l=t.swimlanes,o=0;o<e.length;o++){n[o]=new mxGraphHierarchyNode(e[o]),this.vertexMapper.put(e[o],n[o]),n[o].swimlaneIndex=-1;for(var s=0;s<l.length;s++)if(i.model.getParent(e[o])==l[s]){n[o].swimlaneIndex=s;break}s=t.getEdges(e[o]),n[o].connectsAsSource=[];for(var r=0;r<s.length;r++)if((h=t.getVisibleTerminal(s[r],!1))!=e[o]&&t.graph.model.isVertex(h)&&!t.isVertexIgnored(h)){var a=t.getEdgesBetween(e[o],h,!1),h=t.getEdgesBetween(e[o],h,!0);if(null!=a&&0<a.length&&null==this.edgeMapper.get(a[0])&&2*h.length>=a.length){h=new mxGraphHierarchyEdge(a);for(var u=0;u<a.length;u++){var d=a[u];this.edgeMapper.put(d,h),i.resetEdge(d),t.disableEdgeStyle&&(t.setEdgeStyleEnabled(d,!1),t.setOrthogonalEdge(d,!0))}h.source=n[o],mxUtils.indexOf(n[o].connectsAsSource,h)<0&&n[o].connectsAsSource.push(h)}}n[o].temp[0]=0}},mxSwimlaneModel.prototype.initialRank=function(){this.ranksPerGroup=[];var t=[],e={};if(null!=this.roots)for(var n=0;n<this.roots.length;n++){var i=this.vertexMapper.get(this.roots[n]);this.maxChainDfs(null,i,null,e,0),null!=i&&t.push(i)}for(i=[],e=[],n=this.ranksPerGroup.length-1;0<=n;n--)i[n]=n==this.ranksPerGroup.length-1?0:e[n+1]+1,e[n]=i[n]+this.ranksPerGroup[n];for(this.maxRank=e[0],i=this.vertexMapper.getValues(),n=0;n<i.length;n++)i[n].temp[0]=-1;for(t.slice();0<t.length;){var l=(i=t[0]).connectsAsTarget,o=i.connectsAsSource,s=!0,r=e[0];for(n=0;n<l.length;n++){var a=l[n];if(5270620!=a.temp[0]){s=!1;break}a=a.source,r=Math.min(r,a.temp[0]-1)}if(s){if(r>e[i.swimlaneIndex]&&(r=e[i.swimlaneIndex]),i.temp[0]=r,null!=o)for(n=0;n<o.length;n++)(a=o[n]).temp[0]=5270620,-1==(a=a.target).temp[0]&&(t.push(a),a.temp[0]=-2);t.shift()}else if(n=t.shift(),t.push(i),n==i&&1==t.length)break}},mxSwimlaneModel.prototype.maxChainDfs=function(t,e,n,i,l){if(null!=e&&null==i[t=mxCellPath.create(e.cell)])for(t=(i[t]=e).swimlaneIndex,(null==this.ranksPerGroup[t]||this.ranksPerGroup[t]<l)&&(this.ranksPerGroup[t]=l),t=e.connectsAsSource.slice(),n=0;n<t.length;n++){var o=t[n],s=o.target;e.swimlaneIndex<s.swimlaneIndex?this.maxChainDfs(e,s,o,mxUtils.clone(i,null,!0),0):e.swimlaneIndex==s.swimlaneIndex&&this.maxChainDfs(e,s,o,mxUtils.clone(i,null,!0),l+1)}},mxSwimlaneModel.prototype.fixRanks=function(){var t=[];this.ranks=[];for(var e=0;e<this.maxRank+1;e++)t[e]=[],this.ranks[e]=t[e];var n=null;if(null!=this.roots){var i=this.roots;for(n=[],e=0;e<i.length;e++){var l=this.vertexMapper.get(i[e]);n[e]=l}}this.visit(function(e,n,i,l,o){if(0==o&&n.maxRank<0&&n.minRank<0&&(t[n.temp[0]].push(n),n.maxRank=n.temp[0],n.minRank=n.temp[0],n.temp[0]=t[n.maxRank].length-1),null!=e&&null!=i&&1<e.maxRank-n.maxRank)for(i.maxRank=e.maxRank,i.minRank=n.maxRank,i.temp=[],i.x=[],i.y=[],e=i.minRank+1;e<i.maxRank;e++)t[e].push(i),i.setGeneralPurposeVariable(e,t[e].length-1)},n,!1,null)},mxSwimlaneModel.prototype.visit=function(t,e,n,i){if(null!=e){for(var l=0;l<e.length;l++){var o=e[l];null!=o&&(null==i&&(i={}),n?(o.hashCode=[],o.hashCode[0]=this.dfsCount,o.hashCode[1]=l,this.extendedDfs(null,o,null,t,i,o.hashCode,l,0)):this.dfs(null,o,null,t,i,0))}this.dfsCount++}},mxSwimlaneModel.prototype.dfs=function(t,e,n,i,l,o){if(null!=e){var s=e.id;if(null==l[s])for(i(t,l[s]=e,n,o,0),t=e.connectsAsSource.slice(),n=0;n<t.length;n++)this.dfs(e,(s=t[n]).target,s,i,l,o+1);else i(t,e,n,o,1)}},mxSwimlaneModel.prototype.extendedDfs=function(t,e,n,i,l,o,s,r){if(null!=e)if(null==t||null!=e.hashCode&&e.hashCode[0]==t.hashCode[0]||(o=t.hashCode.length+1,e.hashCode=t.hashCode.slice(),e.hashCode[o-1]=s),null==l[s=e.id]){for(i(t,l[s]=e,n,r,0),t=e.connectsAsSource.slice(),n=e.connectsAsTarget.slice(),s=0;s<t.length;s++){var a=(o=t[s]).target;e.swimlaneIndex<=a.swimlaneIndex&&this.extendedDfs(e,a,o,i,l,e.hashCode,s,r+1)}for(s=0;s<n.length;s++)a=(o=n[s]).source,e.swimlaneIndex<a.swimlaneIndex&&this.extendedDfs(e,a,o,i,l,e.hashCode,s,r+1)}else i(t,e,n,r,1)},mxHierarchicalLayoutStage.prototype.execute=function(t){},mxMedianHybridCrossingReduction.prototype=new mxHierarchicalLayoutStage,mxMedianHybridCrossingReduction.prototype.constructor=mxMedianHybridCrossingReduction,mxMedianHybridCrossingReduction.prototype.layout=null,mxMedianHybridCrossingReduction.prototype.maxIterations=24,mxMedianHybridCrossingReduction.prototype.nestedBestRanks=null,mxMedianHybridCrossingReduction.prototype.currentBestCrossings=0,mxMedianHybridCrossingReduction.prototype.iterationsWithoutImprovement=0,mxMedianHybridCrossingReduction.prototype.maxNoImprovementIterations=2,mxMedianHybridCrossingReduction.prototype.execute=function(t){t=this.layout.getModel(),this.nestedBestRanks=[];for(var e=0;e<t.ranks.length;e++)this.nestedBestRanks[e]=t.ranks[e].slice();var n=0,i=this.calculateCrossings(t);for(e=0;e<this.maxIterations&&n<this.maxNoImprovementIterations;e++){this.weightedMedian(e,t),this.transpose(e,t);var l=this.calculateCrossings(t);if(l<i)for(i=l,l=n=0;l<this.nestedBestRanks.length;l++)for(var o=t.ranks[l],s=0;s<o.length;s++){var r=o[s];this.nestedBestRanks[l][r.getGeneralPurposeVariable(l)]=r}else for(n++,l=0;l<this.nestedBestRanks.length;l++)for(o=t.ranks[l],s=0;s<o.length;s++)(r=o[s]).setGeneralPurposeVariable(l,s);if(0==i)break}for(n=[],i=[],e=0;e<t.maxRank+1;e++)i[e]=[],n[e]=i[e];for(e=0;e<this.nestedBestRanks.length;e++)for(l=0;l<this.nestedBestRanks[e].length;l++)i[e].push(this.nestedBestRanks[e][l]);t.ranks=n},mxMedianHybridCrossingReduction.prototype.calculateCrossings=function(t){for(var e=t.ranks.length,n=0,i=1;i<e;i++)n+=this.calculateRankCrossing(i,t);return n},mxMedianHybridCrossingReduction.prototype.calculateRankCrossing=function(t,e){for(var n=0,i=e.ranks[t],l=e.ranks[t-1],o=[],s=0;s<i.length;s++){for(var r=(a=i[s]).getGeneralPurposeVariable(t),a=a.getPreviousLayerConnectedCells(t),h=[],u=0;u<a.length;u++){var d=a[u].getGeneralPurposeVariable(t-1);h.push(d)}h.sort(function(t,e){return t-e}),o[r]=h}for(i=[],s=0;s<o.length;s++)i=i.concat(o[s]);for(o=1;o<l.length;)o<<=1;for(r=2*o-1,--o,l=[],s=0;s<r;++s)l[s]=0;for(s=0;s<i.length;s++)for(++l[r=i[s]+o];0<r;)r%2&&(n+=l[r+1]),++l[r=r-1>>1];return n},mxMedianHybridCrossingReduction.prototype.transpose=function(t,e){for(var n=!0,i=0;n&&i++<10;)for(var l=1==t%2&&1==i%2,o=(n=!1,0);o<e.ranks.length;o++){for(var s=e.ranks[o],r=[],a=0;a<s.length;a++)r[x=(x=(g=s[a]).getGeneralPurposeVariable(o))<0?a:x]=g;var h=null,u=null,d=null,c=null,p=null;for(a=0;a<s.length-1;a++){if(0==a){for(var m,g=(m=r[a]).getNextLayerConnectedCells(o),x=m.getPreviousLayerConnectedCells(o),y=[],f=[],v=0;v<g.length;v++)y[v]=g[v].getGeneralPurposeVariable(o+1);for(v=0;v<x.length;v++)f[v]=x[v].getGeneralPurposeVariable(o-1)}else g=h,x=u,y=d,f=c,m=p;for(h=(p=r[a+1]).getNextLayerConnectedCells(o),u=p.getPreviousLayerConnectedCells(o),d=[],c=[],v=0;v<h.length;v++)d[v]=h[v].getGeneralPurposeVariable(o+1);for(v=0;v<u.length;v++)c[v]=u[v].getGeneralPurposeVariable(o-1);var b=0,C=0;for(v=0;v<y.length;v++)for(var E=0;E<d.length;E++)y[v]>d[E]&&b++,y[v]<d[E]&&C++;for(v=0;v<f.length;v++)for(E=0;E<c.length;E++)f[v]>c[E]&&b++,f[v]<c[E]&&C++;(C<b||C==b&&l)&&(h=m.getGeneralPurposeVariable(o),m.setGeneralPurposeVariable(o,p.getGeneralPurposeVariable(o)),p.setGeneralPurposeVariable(o,h),h=g,u=x,d=y,c=f,p=m,l||(n=!0))}}},mxMedianHybridCrossingReduction.prototype.weightedMedian=function(t,e){var n=0==t%2;if(n)for(var i=e.maxRank-1;0<=i;i--)this.medianRank(i,n);else for(i=1;i<e.maxRank;i++)this.medianRank(i,n)},mxMedianHybridCrossingReduction.prototype.medianRank=function(t,e){for(var n=this.nestedBestRanks[t].length,i=[],l=[],o=0;o<n;o++){var s,r=this.nestedBestRanks[t][o],a=new MedianCellSorter;a.cell=r,null!=(s=e?r.getNextLayerConnectedCells(t):r.getPreviousLayerConnectedCells(t))&&0!=s.length?(a.medianValue=this.medianValue(s,e?t+1:t-1),i.push(a)):l[r.getGeneralPurposeVariable(t)]=!0}for(i.sort(MedianCellSorter.prototype.compare),o=0;o<n;o++)null==l[o]&&(r=i.shift().cell).setGeneralPurposeVariable(t,o)},mxMedianHybridCrossingReduction.prototype.medianValue=function(t,e){for(var n=[],i=0,l=0;l<t.length;l++){var o=t[l];n[i++]=o.getGeneralPurposeVariable(e)}return n.sort(function(t,e){return t-e}),1==i%2?n[Math.floor(i/2)]:2==i?(n[0]+n[1])/2:(o=n[(l=i/2)-1]-n[0],(n[l-1]*(i=n[i-1]-n[l])+n[l]*o)/(o+i))},MedianCellSorter.prototype.medianValue=0,MedianCellSorter.prototype.cell=!1,MedianCellSorter.prototype.compare=function(t,e){return null!=t&&null!=e?e.medianValue>t.medianValue?-1:e.medianValue<t.medianValue?1:0:0},mxMinimumCycleRemover.prototype=new mxHierarchicalLayoutStage,mxMinimumCycleRemover.prototype.constructor=mxMinimumCycleRemover,mxMinimumCycleRemover.prototype.layout=null,mxMinimumCycleRemover.prototype.execute=function(t){t=this.layout.getModel();for(var e={},n=t.vertexMapper.getValues(),i={},l=0;l<n.length;l++)i[n[l].id]=n[l];if((n=null)!=t.roots){var o=t.roots;for(n=[],l=0;l<o.length;l++)n[l]=t.vertexMapper.get(o[l])}t.visit(function(t,n,l,o,s){n.isAncestor(t)&&(l.invert(),mxUtils.remove(l,t.connectsAsSource),t.connectsAsTarget.push(l),mxUtils.remove(l,n.connectsAsTarget),n.connectsAsSource.push(l)),e[n.id]=n,delete i[n.id]},n,!0,null),l=mxUtils.clone(e,null,!0),t.visit(function(t,n,l,o,s){n.isAncestor(t)&&(l.invert(),mxUtils.remove(l,t.connectsAsSource),n.connectsAsSource.push(l),t.connectsAsTarget.push(l),mxUtils.remove(l,n.connectsAsTarget)),e[n.id]=n,delete i[n.id]},i,!0,l)},mxCoordinateAssignment.prototype=new mxHierarchicalLayoutStage,mxCoordinateAssignment.prototype.constructor=mxCoordinateAssignment,mxCoordinateAssignment.prototype.layout=null,mxCoordinateAssignment.prototype.intraCellSpacing=30,mxCoordinateAssignment.prototype.interRankCellSpacing=100,mxCoordinateAssignment.prototype.parallelEdgeSpacing=10,mxCoordinateAssignment.prototype.maxIterations=8,mxCoordinateAssignment.prototype.prefHozEdgeSep=5,mxCoordinateAssignment.prototype.prefVertEdgeOff=2,mxCoordinateAssignment.prototype.minEdgeJetty=12,mxCoordinateAssignment.prototype.channelBuffer=4,mxCoordinateAssignment.prototype.jettyPositions=null,mxCoordinateAssignment.prototype.orientation=mxConstants.DIRECTION_NORTH,mxCoordinateAssignment.prototype.initialX=null,mxCoordinateAssignment.prototype.limitX=null,mxCoordinateAssignment.prototype.currentXDelta=null,mxCoordinateAssignment.prototype.widestRank=null,mxCoordinateAssignment.prototype.rankTopY=null,mxCoordinateAssignment.prototype.rankBottomY=null,mxCoordinateAssignment.prototype.widestRankValue=null,mxCoordinateAssignment.prototype.rankWidths=null,mxCoordinateAssignment.prototype.rankY=null,mxCoordinateAssignment.prototype.fineTuning=!0,mxCoordinateAssignment.prototype.nextLayerConnectedCache=null,mxCoordinateAssignment.prototype.previousLayerConnectedCache=null,mxCoordinateAssignment.prototype.groupPadding=10,mxCoordinateAssignment.prototype.printStatus=function(){var t=this.layout.getModel();mxLog.show(),mxLog.writeln("======Coord assignment debug=======");for(var e=0;e<t.ranks.length;e++){mxLog.write("Rank ",e," : ");for(var n=t.ranks[e],i=0;i<n.length;i++)mxLog.write(n[i].getGeneralPurposeVariable(e),"  ");mxLog.writeln()}mxLog.writeln("====================================")},mxCoordinateAssignment.prototype.execute=function(t){this.jettyPositions={},t=this.layout.getModel(),this.currentXDelta=0,this.initialCoords(this.layout.getGraph(),t),this.fineTuning&&this.minNode(t);var e=1e8;if(this.fineTuning)for(var n=0;n<this.maxIterations;n++){if(0!=n&&(this.medianPos(n,t),this.minNode(t)),this.currentXDelta<e){for(var i=0;i<t.ranks.length;i++)for(var l=t.ranks[i],o=0;o<l.length;o++){var s=l[o];s.setX(i,s.getGeneralPurposeVariable(i))}e=this.currentXDelta}else for(i=0;i<t.ranks.length;i++)for(l=t.ranks[i],o=0;o<l.length;o++)(s=l[o]).setGeneralPurposeVariable(i,s.getX(i));this.minPath(this.layout.getGraph(),t),this.currentXDelta=0}this.setCellLocations(this.layout.getGraph(),t)},mxCoordinateAssignment.prototype.minNode=function(t){for(var e=[],n=new mxDictionary,i=[],l=0;l<=t.maxRank;l++){i[l]=t.ranks[l];for(var o=0;o<i[l].length;o++)(h=new WeightedCellSorter(s=i[l][o],l)).rankIndex=o,h.visited=!0,e.push(h),n.put(s,h)}for(t=10*e.length,o=0;0<e.length&&o<=t;){l=(s=e.shift()).cell;var s,r=s.weightedValue,a=parseInt(s.rankIndex),h=l.getNextLayerConnectedCells(r),u=l.getPreviousLayerConnectedCells(r),d=h.length,c=u.length,p=this.medianXValue(h,r+1),m=this.medianXValue(u,r-1),g=d+c,x=l.getGeneralPurposeVariable(r);if(g=0<g?(p*d+m*c)/g:x,d=!1,g<x-1?0==a?(l.setGeneralPurposeVariable(r,g),d=!0):(x=(x=(a=i[r][a-1]).getGeneralPurposeVariable(r))+a.width/2+this.intraCellSpacing+l.width/2)<g?(l.setGeneralPurposeVariable(r,g),d=!0):x<l.getGeneralPurposeVariable(r)-1&&(l.setGeneralPurposeVariable(r,x),d=!0):x+1<g&&(a==i[r].length-1?(l.setGeneralPurposeVariable(r,g),d=!0):g<(x=(x=(a=i[r][a+1]).getGeneralPurposeVariable(r))-a.width/2-this.intraCellSpacing-l.width/2)?(l.setGeneralPurposeVariable(r,g),d=!0):x>l.getGeneralPurposeVariable(r)+1&&(l.setGeneralPurposeVariable(r,x),d=!0)),d){for(l=0;l<h.length;l++)null!=(r=n.get(r=h[l]))&&0==r.visited&&(r.visited=!0,e.push(r));for(l=0;l<u.length;l++)null!=(r=n.get(r=u[l]))&&0==r.visited&&(r.visited=!0,e.push(r))}s.visited=!1,o++}},mxCoordinateAssignment.prototype.medianPos=function(t,e){if(0==t%2)for(var n=e.maxRank;0<n;n--)this.rankMedianPosition(n-1,e,n);else for(n=0;n<e.maxRank-1;n++)this.rankMedianPosition(n+1,e,n)},mxCoordinateAssignment.prototype.rankMedianPosition=function(t,e,n){e=e.ranks[t];for(var i=[],l={},o=0;o<e.length;o++){var s=e[o];i[o]=new WeightedCellSorter,i[o].cell=s,i[o].rankIndex=o,l[s.id]=i[o],r=n<t?s.getPreviousLayerConnectedCells(t):s.getNextLayerConnectedCells(t),i[o].weightedValue=this.calculatedWeightedValue(s,r)}for(i.sort(WeightedCellSorter.prototype.compare),o=0;o<i.length;o++){s=i[o].cell;var r,a=0;null!=(r=(n<t?s.getPreviousLayerConnectedCells(t):s.getNextLayerConnectedCells(t)).slice())&&(a=0<(a=r.length)?this.medianXValue(r,n):s.getGeneralPurposeVariable(t));var h=0;r=-1e8;for(var u,d=i[o].rankIndex-1;0<=d;){var c,p=l[e[d].id];null!=p&&(c=p.cell,p.visited?(r=c.getGeneralPurposeVariable(t)+c.width/2+this.intraCellSpacing+h+s.width/2,d=-1):(h+=c.width+this.intraCellSpacing,d--))}for(h=0,c=1e8,d=i[o].rankIndex+1;d<i.length;)null!=(p=l[e[d].id])&&(u=p.cell,p.visited?(c=u.getGeneralPurposeVariable(t)-u.width/2-this.intraCellSpacing-h-s.width/2,d=i.length):(h+=u.width+this.intraCellSpacing,d++));r<=a&&a<=c?s.setGeneralPurposeVariable(t,a):a<r?(s.setGeneralPurposeVariable(t,r),this.currentXDelta+=r-a):c<a&&(s.setGeneralPurposeVariable(t,c),this.currentXDelta+=a-c),i[o].visited=!0}},mxCoordinateAssignment.prototype.calculatedWeightedValue=function(t,e){for(var n=0,i=0;i<e.length;i++){var l=e[i];t.isVertex()&&l.isVertex()?n++:n=t.isEdge()&&l.isEdge()?n+8:n+2}return n},mxCoordinateAssignment.prototype.medianXValue=function(t,e){if(0==t.length)return 0;for(var n=[],i=0;i<t.length;i++)n[i]=t[i].getGeneralPurposeVariable(e);return n.sort(function(t,e){return t-e}),1==t.length%2?n[Math.floor(t.length/2)]:(n[(i=t.length/2)-1]+n[i])/2},mxCoordinateAssignment.prototype.initialCoords=function(t,e){this.calculateWidestRank(t,e);for(var n=this.widestRank;0<=n;n--)n<e.maxRank&&this.rankCoordinates(n,t,e);for(n=this.widestRank+1;n<=e.maxRank;n++)0<n&&this.rankCoordinates(n,t,e)},mxCoordinateAssignment.prototype.rankCoordinates=function(t,e,n){e=n.ranks[t],n=this.initialX+(this.widestRankValue-this.rankWidths[t])/2;for(var i=!1,l=0;l<e.length;l++){var o,s=e[l];s.isVertex()?null!=(o=this.layout.getVertexBounds(s.cell))?this.orientation==mxConstants.DIRECTION_NORTH||this.orientation==mxConstants.DIRECTION_SOUTH?(s.width=o.width,s.height=o.height):(s.width=o.height,s.height=o.width):i=!0:s.isEdge()&&(o=1,null!=s.edges?o=s.edges.length:mxLog.warn("edge.edges is null"),s.width=(o-1)*this.parallelEdgeSpacing),s.setX(t,n+=s.width/2),s.setGeneralPurposeVariable(t,n),n+=s.width/2,n+=this.intraCellSpacing}1==i&&mxLog.warn("At least one cell has no bounds")},mxCoordinateAssignment.prototype.calculateWidestRank=function(t,e){var n=-this.interRankCellSpacing,i=0;this.rankWidths=[],this.rankY=[];for(var l=e.maxRank;0<=l;l--){for(var o=0,s=e.ranks[l],r=this.initialX,a=!1,h=0;h<s.length;h++){var u,d=s[h];d.isVertex()?(null!=(u=this.layout.getVertexBounds(d.cell))?this.orientation==mxConstants.DIRECTION_NORTH||this.orientation==mxConstants.DIRECTION_SOUTH?(d.width=u.width,d.height=u.height):(d.width=u.height,d.height=u.width):a=!0,o=Math.max(o,d.height)):d.isEdge()&&(u=1,null!=d.edges?u=d.edges.length:mxLog.warn("edge.edges is null"),d.width=(u-1)*this.parallelEdgeSpacing),d.setX(l,r+=d.width/2),d.setGeneralPurposeVariable(l,r),r+=d.width/2,(r+=this.intraCellSpacing)>this.widestRankValue&&(this.widestRankValue=r,this.widestRank=l),this.rankWidths[l]=r}for(1==a&&mxLog.warn("At least one cell has no bounds"),this.rankY[l]=n,r=o/2+i/2+this.interRankCellSpacing,i=o,n=this.orientation==mxConstants.DIRECTION_NORTH||this.orientation==mxConstants.DIRECTION_WEST?n+r:n-r,h=0;h<s.length;h++)s[h].setY(l,n)}},mxCoordinateAssignment.prototype.minPath=function(t,e){for(var n=e.edgeMapper.getValues(),i=0;i<n.length;i++){var l=n[i];if(!(l.maxRank-l.minRank-1<1)){for(var o=l.getGeneralPurposeVariable(l.minRank+1),s=!0,r=0,a=l.minRank+2;a<l.maxRank;a++)o!=(h=l.getGeneralPurposeVariable(a))?(s=!1,o=h):r++;if(!s){s=o=0;var h=[],u=[],d=l.getGeneralPurposeVariable(l.minRank+1);for(a=l.minRank+1;a<l.maxRank-1;a++){var c=l.getX(a+1);d==c||this.repositionValid(e,l,a+1,d)?(h[a-l.minRank-1]=d,o++):d=h[a-l.minRank-1]=c}for(d=l.getX(a),a=l.maxRank-1;a>l.minRank+1;a--)d==(c=l.getX(a-1))||this.repositionValid(e,l,a-1,d)?(u[a-l.minRank-2]=d,s++):(u[a-l.minRank-2]=l.getX(a-1),d=c);if(r<s||r<o)if(o<=s)for(a=l.maxRank-2;a>l.minRank;a--)l.setX(a,u[a-l.minRank-1]);else if(s<o)for(a=l.minRank+2;a<l.maxRank;a++)l.setX(a,h[a-l.minRank-2])}}}},mxCoordinateAssignment.prototype.repositionValid=function(t,e,n,i){t=t.ranks[n];for(var l=-1,o=0;o<t.length;o++)if(e==t[o]){l=o;break}if(l<0)return!1;if(i<(o=e.getGeneralPurposeVariable(n))){if(0==l)return!0;if(!((n=(n=(t=t[l-1]).getGeneralPurposeVariable(n))+t.width/2+this.intraCellSpacing+e.width/2)<=i))return!1}else if(o<i){if(l==t.length-1)return!0;if(!(i<=(n=(n=(t=t[l+1]).getGeneralPurposeVariable(n))-t.width/2-this.intraCellSpacing-e.width/2)))return!1}return!0},mxCoordinateAssignment.prototype.setCellLocations=function(t,e){this.rankTopY=[],this.rankBottomY=[];for(var n=0;n<e.ranks.length;n++)this.rankTopY[n]=Number.MAX_VALUE,this.rankBottomY[n]=-Number.MAX_VALUE;var i=e.vertexMapper.getValues();for(n=0;n<i.length;n++)this.setVertexLocation(i[n]);for(this.layout.edgeStyle!=mxHierarchicalEdgeStyle.ORTHOGONAL&&this.layout.edgeStyle!=mxHierarchicalEdgeStyle.POLYLINE&&this.layout.edgeStyle!=mxHierarchicalEdgeStyle.CURVE||this.localEdgeProcessing(e),i=e.edgeMapper.getValues(),n=0;n<i.length;n++)this.setEdgePosition(i[n])},mxCoordinateAssignment.prototype.localEdgeProcessing=function(t){for(var e=0;e<t.ranks.length;e++)for(var n=t.ranks[e],i=0;i<n.length;i++){var l=n[i];if(l.isVertex())for(var o=l.getPreviousLayerConnectedCells(e),s=e-1,r=0;r<2;r++){if(-1<s&&s<t.ranks.length&&null!=o&&0<o.length){for(var a=[],h=0;h<o.length;h++){var u=new WeightedCellSorter(o[h],o[h].getX(s));a.push(u)}a.sort(WeightedCellSorter.prototype.compare);var d=(u=l.x[0]-l.width/2)+l.width,c=o=0;for(s=[],h=0;h<a.length;h++){var p=a[h].cell;if(p.isVertex())for(var m=0==r?l.connectsAsSource:l.connectsAsTarget,g=0;g<m.length;g++)m[g].source!=p&&m[g].target!=p||(o+=m[g].edges.length,c++,s.push(m[g]));else o+=p.edges.length,c++,s.push(p)}for(l.width>(o+1)*this.prefHozEdgeSep+2*this.prefHozEdgeSep&&(u+=this.prefHozEdgeSep,d-=this.prefHozEdgeSep),u+=(a=(d-u)/o)/2,d=this.minEdgeJetty-this.prefVertEdgeOff,h=0;h<s.length;h++)for(c=s[h].edges.length,null==(p=this.jettyPositions[s[h].ids[0]])&&(this.jettyPositions[s[h].ids[0]]=p=[]),h<o/2?d+=this.prefVertEdgeOff:o/2<h&&(d-=this.prefVertEdgeOff),m=0;m<c;m++)p[4*m+2*r]=u,u+=a,p[4*m+2*r+1]=d}o=l.getNextLayerConnectedCells(e),s=e+1}}},mxCoordinateAssignment.prototype.setEdgePosition=function(t){var e=0;if(101207!=t.temp[0]){var n=t.maxRank,i=t.minRank;n==i&&(n=t.source.maxRank,i=t.target.minRank);for(var l=0,o=this.jettyPositions[t.ids[0]],s=(t.isReversed?t.target:t.source).cell,r=this.layout.graph,a=this.orientation==mxConstants.DIRECTION_EAST||this.orientation==mxConstants.DIRECTION_SOUTH,h=0;h<t.edges.length;h++){var u,d,c,p=t.edges[h],m=this.layout.getVisibleTerminal(p,!0),g=[],x=t.isReversed;for(m!=s&&(x=!x),null!=o&&(d=x?(a?this.rankBottomY:this.rankTopY)[i]:(a?this.rankTopY:this.rankBottomY)[n],u=o[4*l+1+(c=x?2:0)],d+=u=x!=a?-u:u,c=o[4*l+c],f=r.model.getTerminal(p,!0),this.layout.isPort(f)&&r.model.getParent(f)==m&&(c=null!=(c=r.view.getState(f))?c.x:m.geometry.x+t.source.width*f.geometry.x),this.orientation==mxConstants.DIRECTION_NORTH||this.orientation==mxConstants.DIRECTION_SOUTH?(g.push(new mxPoint(c,d)),this.layout.edgeStyle==mxHierarchicalEdgeStyle.CURVE&&g.push(new mxPoint(c,d+u))):(g.push(new mxPoint(d,c)),this.layout.edgeStyle==mxHierarchicalEdgeStyle.CURVE&&g.push(new mxPoint(d+u,c)))),c=t.x.length-1,d=u=-1,m=t.maxRank-1,x&&(c=0,u=t.x.length,m=t.minRank+(d=1));t.maxRank!=t.minRank&&c!=u;c+=d){var y,f=t.x[c]+e,v=(this.rankTopY[m]+this.rankBottomY[m+1])/2,b=(this.rankTopY[m-1]+this.rankBottomY[m])/2;x&&(y=v,v=b,b=y),this.orientation==mxConstants.DIRECTION_NORTH||this.orientation==mxConstants.DIRECTION_SOUTH?(g.push(new mxPoint(f,v)),g.push(new mxPoint(f,b))):(g.push(new mxPoint(v,f)),g.push(new mxPoint(b,f))),this.limitX=Math.max(this.limitX,f),m+=d}null!=o&&(d=x?(a?this.rankTopY:this.rankBottomY)[n]:(a?this.rankBottomY:this.rankTopY)[i],u=o[4*l+3-(c=x?2:0)],d-=u=x!=a?-u:u,c=o[4*l+2-c],x=r.model.getTerminal(p,!1),m=this.layout.getVisibleTerminal(p,!1),this.layout.isPort(x)&&r.model.getParent(x)==m&&(c=null!=(c=r.view.getState(x))?c.x:m.geometry.x+t.target.width*x.geometry.x),this.orientation==mxConstants.DIRECTION_NORTH||this.orientation==mxConstants.DIRECTION_SOUTH?(this.layout.edgeStyle==mxHierarchicalEdgeStyle.CURVE&&g.push(new mxPoint(c,d-u)),g.push(new mxPoint(c,d))):(this.layout.edgeStyle==mxHierarchicalEdgeStyle.CURVE&&g.push(new mxPoint(d-u,c)),g.push(new mxPoint(d,c)))),t.isReversed&&this.processReversedEdge(t,p),this.layout.setEdgePoints(p,g),e=0==e?this.parallelEdgeSpacing:0<e?-e:-e+this.parallelEdgeSpacing,l++}t.temp[0]=101207}},mxCoordinateAssignment.prototype.setVertexLocation=function(t){var e=t.cell,n=t.x[0]-t.width/2,i=t.y[0]-t.height/2;this.rankTopY[t.minRank]=Math.min(this.rankTopY[t.minRank],i),this.rankBottomY[t.minRank]=Math.max(this.rankBottomY[t.minRank],i+t.height),this.orientation==mxConstants.DIRECTION_NORTH||this.orientation==mxConstants.DIRECTION_SOUTH?this.layout.setVertexLocation(e,n,i):this.layout.setVertexLocation(e,i,n),this.limitX=Math.max(this.limitX,n+t.width)},mxCoordinateAssignment.prototype.processReversedEdge=function(t,e){},mxSwimlaneOrdering.prototype=new mxHierarchicalLayoutStage,mxSwimlaneOrdering.prototype.constructor=mxSwimlaneOrdering,mxSwimlaneOrdering.prototype.layout=null,mxSwimlaneOrdering.prototype.execute=function(t){t=this.layout.getModel();var e=mxUtils.clone(t.vertexMapper,null,!0),n=null;if(null!=t.roots)for(var i=t.roots,l=(n=[],0);l<i.length;l++)n[l]=t.vertexMapper.get(i[l]);t.visit(function(t,n,i,l,o){l=null!=t&&t.swimlaneIndex==n.swimlaneIndex&&n.isAncestor(t),o=null!=t&&null!=i&&t.swimlaneIndex<n.swimlaneIndex&&i.source==n,l?(i.invert(),mxUtils.remove(i,t.connectsAsSource),n.connectsAsSource.push(i),t.connectsAsTarget.push(i),mxUtils.remove(i,n.connectsAsTarget)):o&&(i.invert(),mxUtils.remove(i,t.connectsAsTarget),n.connectsAsTarget.push(i),t.connectsAsSource.push(i),mxUtils.remove(i,n.connectsAsSource)),t=mxCellPath.create(n.cell),delete e[t]},n,!0,null)};var mxHierarchicalEdgeStyle={ORTHOGONAL:1,POLYLINE:2,STRAIGHT:3,CURVE:4};function mxSwimlaneLayout(t,e,n){mxGraphLayout.call(this,t),this.orientation=null!=e?e:mxConstants.DIRECTION_NORTH,this.deterministic=null==n||n}function mxGraphModel(t){this.currentEdit=this.createUndoableEdit(),null!=t?this.setRoot(t):this.clear()}function mxRootChange(t,e){this.model=t,this.previous=this.root=e}function mxChildChange(t,e,n,i){this.model=t,this.previous=this.parent=e,this.child=n,this.previousIndex=this.index=i}function mxTerminalChange(t,e,n,i){this.model=t,this.cell=e,this.previous=this.terminal=n,this.source=i}function mxValueChange(t,e,n){this.model=t,this.cell=e,this.previous=this.value=n}function mxStyleChange(t,e,n){this.model=t,this.cell=e,this.previous=this.style=n}function mxGeometryChange(t,e,n){this.model=t,this.cell=e,this.previous=this.geometry=n}function mxCollapseChange(t,e,n){this.model=t,this.cell=e,this.previous=this.collapsed=n}function mxVisibleChange(t,e,n){this.model=t,this.cell=e,this.previous=this.visible=n}function mxCellAttributeChange(t,e,n){this.cell=t,this.attribute=e,this.previous=this.value=n}function mxCell(t,e,n){this.value=t,this.setGeometry(e),this.setStyle(n),null!=this.onInit&&this.onInit()}function mxGeometry(t,e,n,i){mxRectangle.call(this,t,e,n,i)}mxHierarchicalLayout.prototype=new mxGraphLayout,mxHierarchicalLayout.prototype.constructor=mxHierarchicalLayout,mxHierarchicalLayout.prototype.roots=null,mxHierarchicalLayout.prototype.resizeParent=!1,mxHierarchicalLayout.prototype.maintainParentLocation=!1,mxHierarchicalLayout.prototype.moveParent=!1,mxHierarchicalLayout.prototype.parentBorder=0,mxHierarchicalLayout.prototype.intraCellSpacing=30,mxHierarchicalLayout.prototype.interRankCellSpacing=100,mxHierarchicalLayout.prototype.interHierarchySpacing=60,mxHierarchicalLayout.prototype.parallelEdgeSpacing=10,mxHierarchicalLayout.prototype.orientation=mxConstants.DIRECTION_NORTH,mxHierarchicalLayout.prototype.fineTuning=!0,mxHierarchicalLayout.prototype.tightenToSource=!0,mxHierarchicalLayout.prototype.disableEdgeStyle=!0,mxHierarchicalLayout.prototype.traverseAncestors=!0,mxHierarchicalLayout.prototype.model=null,mxHierarchicalLayout.prototype.edgesCache=null,mxHierarchicalLayout.prototype.edgeSourceTermCache=null,mxHierarchicalLayout.prototype.edgesTargetTermCache=null,mxHierarchicalLayout.prototype.edgeStyle=mxHierarchicalEdgeStyle.POLYLINE,mxHierarchicalLayout.prototype.getModel=function(){return this.model},mxHierarchicalLayout.prototype.execute=function(t,e){this.parent=t;var n,i=this.graph.model;if(this.edgesCache=new mxDictionary,this.edgeSourceTermCache=new mxDictionary,this.edgesTargetTermCache=new mxDictionary,null!=(e=null==e||e instanceof Array?e:[e])||null!=t){if(this.parentY=this.parentX=null,t==this.root||null==i.isVertex(t)||!this.maintainParentLocation||null!=(n=this.graph.getCellGeometry(t))&&(this.parentX=n.x,this.parentY=n.y),null!=e){for(var l=[],o=0;o<e.length;o++)(null==t||i.isAncestor(t,e[o]))&&i.isVertex(e[o])&&l.push(e[o]);this.roots=l}i.beginUpdate();try{this.run(t),this.resizeParent&&!this.graph.isCellCollapsed(t)&&this.graph.updateGroupBounds([t],this.parentBorder,this.moveParent),null!=this.parentX&&null!=this.parentY&&null!=(n=this.graph.getCellGeometry(t))&&((n=n.clone()).x=this.parentX,n.y=this.parentY,i.setGeometry(t,n))}finally{i.endUpdate()}}},mxHierarchicalLayout.prototype.findRoots=function(t,e){var n=[];if(null!=t&&null!=e){var i,l=this.graph.model,o=null,s=-1e5;for(i in e){var r=e[i];if(l.isVertex(r)&&this.graph.isCellVisible(r)){for(var a=this.getEdges(r),h=0,u=0,d=0;d<a.length;d++)this.getVisibleTerminal(a[d],!0)==r?h++:u++;0==u&&0<h&&n.push(r),s<(a=h-u)&&(s=a,o=r)}}0==n.length&&null!=o&&n.push(o)}return n},mxHierarchicalLayout.prototype.getEdges=function(t){if(null!=(n=this.edgesCache.get(t)))return n;for(var e=this.graph.model,n=[],i=this.graph.isCellCollapsed(t),l=e.getChildCount(t),o=0;o<l;o++){var s=e.getChildAt(t,o);!this.isPort(s)&&!i&&this.graph.isCellVisible(s)||(n=n.concat(e.getEdges(s,!0,!0)))}for(n=n.concat(e.getEdges(t,!0,!0)),e=[],o=0;o<n.length;o++)((i=this.getVisibleTerminal(n[o],!0))==(l=this.getVisibleTerminal(n[o],!1))||i!=l&&(l==t&&(null==this.parent||this.isAncestor(this.parent,i,this.traverseAncestors))||i==t&&(null==this.parent||this.isAncestor(this.parent,l,this.traverseAncestors))))&&e.push(n[o]);return this.edgesCache.put(t,e),e},mxHierarchicalLayout.prototype.getVisibleTerminal=function(t,e){var n=this.edgesTargetTermCache,i=(n=e?this.edgeSourceTermCache:n).get(t);if(null!=i)return i;var l=null!=(i=this.graph.view.getState(t))?i.getVisibleTerminal(e):this.graph.view.getVisibleTerminal(t,e);return null!=(l=null==l?null!=i?i.getVisibleTerminal(e):this.graph.view.getVisibleTerminal(t,e):l)&&(this.isPort(l)&&(l=this.graph.model.getParent(l)),n.put(t,l)),l},mxHierarchicalLayout.prototype.run=function(t){var e=[],n=[];if(null==this.roots&&null!=t){var i={};this.filterDescendants(t,i),this.roots=[];var l,o=!0;for(l in i)if(null!=i[l]){o=!1;break}for(;!o;){var s=this.findRoots(t,i);for(o=0;o<s.length;o++){var r={};e.push(r),this.traverse(s[o],!0,null,n,r,e,i)}for(o=0;o<s.length;o++)this.roots.push(s[o]);for(l in o=!0,i)if(null!=i[l]){o=!1;break}}}else for(o=0;o<this.roots.length;o++)e.push(r={}),this.traverse(this.roots[o],!0,null,n,r,e,null);for(o=n=0;o<e.length;o++){for(l in i=[],r=e[o])i.push(r[l]);this.model=new mxGraphHierarchyModel(this,i,this.roots,t,this.tightenToSource),this.cycleStage(t),this.layeringStage(),this.crossingStage(t),n=this.placementStage(n,t)}},mxHierarchicalLayout.prototype.filterDescendants=function(t,e){var n=this.graph.model;if(n.isVertex(t)&&t!=this.parent&&this.graph.isCellVisible(t)&&(e[mxObjectIdentity.get(t)]=t),this.traverseAncestors||t==this.parent&&this.graph.isCellVisible(t))for(var i=n.getChildCount(t),l=0;l<i;l++){var o=n.getChildAt(t,l);this.isPort(o)||this.filterDescendants(o,e)}},mxHierarchicalLayout.prototype.isPort=function(t){return null!=t&&null!=t.geometry&&t.geometry.relative},mxHierarchicalLayout.prototype.getEdgesBetween=function(t,e,n){n=null!=n&&n;for(var i=this.getEdges(t),l=[],o=0;o<i.length;o++){var s=this.getVisibleTerminal(i[o],!0),r=this.getVisibleTerminal(i[o],!1);(s==t&&r==e||!n&&s==e&&r==t)&&l.push(i[o])}return l},mxHierarchicalLayout.prototype.traverse=function(t,e,n,i,l,o,s){if(null!=t&&null!=i)if(null!=i[a=mxObjectIdentity.get(t)]||null!=s&&null==s[a]){if(null==l[a])for(n=0;n<o.length;n++)if(null!=(e=o[n])[a]){for(r in e)l[r]=e[r];o.splice(n,1);break}}else{null==l[a]&&(l[a]=t),null==i[a]&&(i[a]=t),null!==s&&delete s[a];var r=this.getEdges(t),a=[];for(n=0;n<r.length;n++)a[n]=this.getVisibleTerminal(r[n],!0)==t;for(n=0;n<r.length;n++)if(!e||a[n]){t=this.getVisibleTerminal(r[n],!a[n]);for(var h,u=1,d=0;d<r.length;d++)d!=n&&this.getVisibleTerminal(r[d],!(h=a[d]))==t&&(h?u++:u--);0<=u&&(l=this.traverse(t,e,r[n],i,l,o,s))}}return l},mxHierarchicalLayout.prototype.cycleStage=function(t){new mxMinimumCycleRemover(this).execute(t)},mxHierarchicalLayout.prototype.layeringStage=function(){this.model.initialRank(),this.model.fixRanks()},mxHierarchicalLayout.prototype.crossingStage=function(t){new mxMedianHybridCrossingReduction(this).execute(t)},mxHierarchicalLayout.prototype.placementStage=function(t,e){return(t=new mxCoordinateAssignment(this,this.intraCellSpacing,this.interRankCellSpacing,this.orientation,t,this.parallelEdgeSpacing)).fineTuning=this.fineTuning,t.execute(e),t.limitX+this.interHierarchySpacing},mxSwimlaneLayout.prototype=new mxGraphLayout,mxSwimlaneLayout.prototype.constructor=mxSwimlaneLayout,mxSwimlaneLayout.prototype.roots=null,mxSwimlaneLayout.prototype.swimlanes=null,mxSwimlaneLayout.prototype.dummyVertexWidth=50,mxSwimlaneLayout.prototype.resizeParent=!1,mxSwimlaneLayout.prototype.maintainParentLocation=!1,mxSwimlaneLayout.prototype.moveParent=!1,mxSwimlaneLayout.prototype.parentBorder=30,mxSwimlaneLayout.prototype.intraCellSpacing=30,mxSwimlaneLayout.prototype.interRankCellSpacing=100,mxSwimlaneLayout.prototype.interHierarchySpacing=60,mxSwimlaneLayout.prototype.parallelEdgeSpacing=10,mxSwimlaneLayout.prototype.orientation=mxConstants.DIRECTION_NORTH,mxSwimlaneLayout.prototype.fineTuning=!0,mxSwimlaneLayout.prototype.tightenToSource=!0,mxSwimlaneLayout.prototype.disableEdgeStyle=!0,mxSwimlaneLayout.prototype.traverseAncestors=!0,mxSwimlaneLayout.prototype.model=null,mxSwimlaneLayout.prototype.edgesCache=null,mxHierarchicalLayout.prototype.edgeSourceTermCache=null,mxHierarchicalLayout.prototype.edgesTargetTermCache=null,mxHierarchicalLayout.prototype.edgeStyle=mxHierarchicalEdgeStyle.POLYLINE,mxSwimlaneLayout.prototype.getModel=function(){return this.model},mxSwimlaneLayout.prototype.execute=function(t,e){this.parent=t;var n,i=this.graph.model;if(this.edgesCache=new mxDictionary,this.edgeSourceTermCache=new mxDictionary,this.edgesTargetTermCache=new mxDictionary,!(null==e||e.length<1)){null==t&&(t=i.getParent(e[0])),this.parentY=this.parentX=null,t==this.root||null==i.isVertex(t)||!this.maintainParentLocation||null!=(n=this.graph.getCellGeometry(t))&&(this.parentX=n.x,this.parentY=n.y),this.swimlanes=e;for(var l=[],o=0;o<e.length;o++){var s=this.graph.getChildCells(e[o]);null!=s&&0!=s.length||(s=this.graph.insertVertex(e[o],null,null,0,0,this.dummyVertexWidth,0),l.push(s))}i.beginUpdate();try{this.run(t),this.resizeParent&&!this.graph.isCellCollapsed(t)&&this.graph.updateGroupBounds([t],this.parentBorder,this.moveParent),null!=this.parentX&&null!=this.parentY&&null!=(n=this.graph.getCellGeometry(t))&&((n=n.clone()).x=this.parentX,n.y=this.parentY,i.setGeometry(t,n)),this.graph.removeCells(l)}finally{i.endUpdate()}}},mxSwimlaneLayout.prototype.updateGroupBounds=function(){var t,e,n,i,l=[],o=this.model;for(h in o.edgeMapper)for(var s=o.edgeMapper[h],r=0;r<s.edges.length;r++)l.push(s.edges[r]);for(l=this.graph.getBoundingBoxFromGeometry(l,!0),o=[],r=0;r<this.swimlanes.length;r++){var a,h,u=this.swimlanes[r];null!=(h=this.graph.getCellGeometry(u))&&(a=this.graph.getChildCells(u),s=this.graph.isSwimlane(u)?this.graph.getStartSize(u):new mxRectangle,u=this.graph.getBoundingBoxFromGeometry(a),s=(o[r]=u).y+h.y-s.height-this.parentBorder,h=u.y+h.y+u.height,null==l?l=new mxRectangle(0,s,0,h-s):(l.y=Math.min(l.y,s),l.height=Math.max(l.y+l.height,h)-l.y))}for(r=0;r<this.swimlanes.length;r++)null!=(h=this.graph.getCellGeometry(u=this.swimlanes[r]))&&(a=this.graph.getChildCells(u),s=this.graph.isSwimlane(u)?this.graph.getStartSize(u):new mxRectangle,t=h.clone(),i=l.y-this.parentBorder,t.x+=n=o[r].x-(e=s.width+(0==r?this.parentBorder:this.interRankCellSpacing/2)),t.y=i,t.width=o[r].width+e+this.interRankCellSpacing/2,t.height=l.height+s.height+2*this.parentBorder,this.graph.model.setGeometry(u,t),this.graph.moveCells(a,-n,h.y-i))},mxSwimlaneLayout.prototype.findRoots=function(t,e){var n=[];if(null!=t&&null!=e){var i,l=this.graph.model,o=null,s=-1e5;for(i in e){var r=e[i];if(null!=r&&l.isVertex(r)&&this.graph.isCellVisible(r)&&l.isAncestor(t,r)){for(var a=this.getEdges(r),h=0,u=0,d=0;d<a.length;d++){var c=this.getVisibleTerminal(a[d],!0);c==r?(c=this.getVisibleTerminal(a[d],!1),l.isAncestor(t,c)&&h++):l.isAncestor(t,c)&&u++}0==u&&0<h&&n.push(r),s<(a=h-u)&&(s=a,o=r)}}0==n.length&&null!=o&&n.push(o)}return n},mxSwimlaneLayout.prototype.getEdges=function(t){if(null!=(n=this.edgesCache.get(t)))return n;for(var e=this.graph.model,n=[],i=this.graph.isCellCollapsed(t),l=e.getChildCount(t),o=0;o<l;o++){var s=e.getChildAt(t,o);!this.isPort(s)&&!i&&this.graph.isCellVisible(s)||(n=n.concat(e.getEdges(s,!0,!0)))}for(n=n.concat(e.getEdges(t,!0,!0)),e=[],o=0;o<n.length;o++)((i=this.getVisibleTerminal(n[o],!0))==(l=this.getVisibleTerminal(n[o],!1))||i!=l&&(l==t&&(null==this.parent||this.graph.isValidAncestor(i,this.parent,this.traverseAncestors))||i==t&&(null==this.parent||this.graph.isValidAncestor(l,this.parent,this.traverseAncestors))))&&e.push(n[o]);return this.edgesCache.put(t,e),e},mxSwimlaneLayout.prototype.getVisibleTerminal=function(t,e){var n=this.edgesTargetTermCache,i=(n=e?this.edgeSourceTermCache:n).get(t);if(null!=i)return i;var l=null!=(i=this.graph.view.getState(t))?i.getVisibleTerminal(e):this.graph.view.getVisibleTerminal(t,e);return null!=(l=null==l?null!=i?i.getVisibleTerminal(e):this.graph.view.getVisibleTerminal(t,e):l)&&(this.isPort(l)&&(l=this.graph.model.getParent(l)),n.put(t,l)),l},mxSwimlaneLayout.prototype.run=function(t){var e=[],n={};if(null!=this.swimlanes&&0<this.swimlanes.length&&null!=t){for(var i={},l=0;l<this.swimlanes.length;l++)this.filterDescendants(this.swimlanes[l],i);var o;for(o in this.roots=[],l=!0,i)if(null!=i[o]){l=!1;break}for(var s=0;!l&&s<this.swimlanes.length;){var r=this.findRoots(this.swimlanes[s],i);if(0==r.length)s++;else{for(l=0;l<r.length;l++){var a={};e.push(a),this.traverse(r[l],!0,null,n,a,e,i,s)}for(l=0;l<r.length;l++)this.roots.push(r[l]);for(o in l=!0,i)if(null!=i[o]){l=!1;break}}}}else for(l=0;l<this.roots.length;l++)e.push(a={}),this.traverse(this.roots[l],!0,null,n,a,e,null);for(o in e=[],n)e.push(n[o]);this.model=new mxSwimlaneModel(this,e,this.roots,t,this.tightenToSource),this.cycleStage(t),this.layeringStage(),this.crossingStage(t),this.placementStage(0,t)},mxSwimlaneLayout.prototype.filterDescendants=function(t,e){var n=this.graph.model;if(n.isVertex(t)&&t!=this.parent&&n.getParent(t)!=this.parent&&this.graph.isCellVisible(t)&&(e[mxObjectIdentity.get(t)]=t),this.traverseAncestors||t==this.parent&&this.graph.isCellVisible(t))for(var i=n.getChildCount(t),l=0;l<i;l++){var o=n.getChildAt(t,l);this.isPort(o)||this.filterDescendants(o,e)}},mxSwimlaneLayout.prototype.isPort=function(t){return!!t.geometry.relative},mxSwimlaneLayout.prototype.getEdgesBetween=function(t,e,n){n=null!=n&&n;for(var i=this.getEdges(t),l=[],o=0;o<i.length;o++){var s=this.getVisibleTerminal(i[o],!0),r=this.getVisibleTerminal(i[o],!1);(s==t&&r==e||!n&&s==e&&r==t)&&l.push(i[o])}return l},mxSwimlaneLayout.prototype.traverse=function(t,e,n,i,l,o,s,r){if(null!=t&&null!=i)if(null!=i[h=mxObjectIdentity.get(t)]||null!=s&&null==s[h]){if(null==l[h])for(n=0;n<o.length;n++)if(null!=(t=o[n])[h]){for(a in t)l[a]=t[a];o.splice(n,1);break}}else{null==l[h]&&(l[h]=t),null==i[h]&&(i[h]=t),null!==s&&delete s[h];var a=this.getEdges(t),h=this.graph.model;for(n=0;n<a.length;n++){var u=this.getVisibleTerminal(a[n],!0),d=u==t;d&&(u=this.getVisibleTerminal(a[n],!1));for(var c=0;c<this.swimlanes.length&&!h.isAncestor(this.swimlanes[c],u);)c++;c>=this.swimlanes.length||!(r<c||(!e||d)&&c==r)||(l=this.traverse(u,e,a[n],i,l,o,s,c))}}return l},mxSwimlaneLayout.prototype.cycleStage=function(t){new mxSwimlaneOrdering(this).execute(t)},mxSwimlaneLayout.prototype.layeringStage=function(){this.model.initialRank(),this.model.fixRanks()},mxSwimlaneLayout.prototype.crossingStage=function(t){new mxMedianHybridCrossingReduction(this).execute(t)},mxSwimlaneLayout.prototype.placementStage=function(t,e){return(t=new mxCoordinateAssignment(this,this.intraCellSpacing,this.interRankCellSpacing,this.orientation,t,this.parallelEdgeSpacing)).fineTuning=this.fineTuning,t.execute(e),t.limitX+this.interHierarchySpacing},mxGraphModel.prototype=new mxEventSource,mxGraphModel.prototype.constructor=mxGraphModel,mxGraphModel.prototype.root=null,mxGraphModel.prototype.cells=null,mxGraphModel.prototype.maintainEdgeParent=!0,mxGraphModel.prototype.ignoreRelativeEdgeParent=!0,mxGraphModel.prototype.createIds=!0,mxGraphModel.prototype.prefix="",mxGraphModel.prototype.postfix="",mxGraphModel.prototype.nextId=0,mxGraphModel.prototype.currentEdit=null,mxGraphModel.prototype.updateLevel=0,mxGraphModel.prototype.endingUpdate=!1,mxGraphModel.prototype.clear=function(){this.setRoot(this.createRoot())},mxGraphModel.prototype.isCreateIds=function(){return this.createIds},mxGraphModel.prototype.setCreateIds=function(t){this.createIds=t},mxGraphModel.prototype.createRoot=function(){var t=new mxCell;return t.insert(new mxCell),t},mxGraphModel.prototype.getCell=function(t){return null!=this.cells?this.cells[t]:null},mxGraphModel.prototype.filterCells=function(t,e){var n=null;if(null!=t){n=[];for(var i=0;i<t.length;i++)e(t[i])&&n.push(t[i])}return n},mxGraphModel.prototype.getDescendants=function(t){return this.filterDescendants(null,t)},mxGraphModel.prototype.filterDescendants=function(t,e){var n=[];e=e||this.getRoot(),null!=t&&!t(e)||n.push(e);for(var i=this.getChildCount(e),l=0;l<i;l++){var o=this.getChildAt(e,l);n=n.concat(this.filterDescendants(t,o))}return n},mxGraphModel.prototype.getRoot=function(t){var e=t||this.root;if(null!=t)for(;null!=t;)e=t,t=this.getParent(t);return e},mxGraphModel.prototype.setRoot=function(t){return this.execute(new mxRootChange(this,t)),t},mxGraphModel.prototype.rootChanged=function(t){var e=this.root;return this.root=t,this.nextId=0,this.cells=null,this.cellAdded(t),e},mxGraphModel.prototype.isRoot=function(t){return null!=t&&this.root==t},mxGraphModel.prototype.isLayer=function(t){return this.isRoot(this.getParent(t))},mxGraphModel.prototype.isAncestor=function(t,e){for(;null!=e&&e!=t;)e=this.getParent(e);return e==t},mxGraphModel.prototype.contains=function(t){return this.isAncestor(this.root,t)},mxGraphModel.prototype.getParent=function(t){return null!=t?t.getParent():null},mxGraphModel.prototype.add=function(t,e,n){var i;return e!=t&&null!=t&&null!=e&&(null==n&&(n=this.getChildCount(t)),i=t!=this.getParent(e),this.execute(new mxChildChange(this,t,e,n)),this.maintainEdgeParent&&i&&this.updateEdgeParents(e)),e},mxGraphModel.prototype.cellAdded=function(t){if(null!=t){if(null==t.getId()&&this.createIds&&t.setId(this.createId(t)),null!=t.getId()&&(e=this.getCell(t.getId()))!=t){for(;null!=e;)t.setId(this.createId(t)),e=this.getCell(t.getId());null==this.cells&&(this.cells={}),this.cells[t.getId()]=t}mxUtils.isNumeric(t.getId())&&(this.nextId=Math.max(this.nextId,t.getId()));for(var e=this.getChildCount(t),n=0;n<e;n++)this.cellAdded(this.getChildAt(t,n))}},mxGraphModel.prototype.createId=function(t){return t=this.nextId,this.nextId++,this.prefix+t+this.postfix},mxGraphModel.prototype.updateEdgeParents=function(t,e){e=e||this.getRoot(t);for(var n=this.getChildCount(t),i=0;i<n;i++){var l=this.getChildAt(t,i);this.updateEdgeParents(l,e)}for(l=this.getEdgeCount(t),n=[],i=0;i<l;i++)n.push(this.getEdgeAt(t,i));for(i=0;i<n.length;i++)this.isAncestor(e,l=n[i])&&this.updateEdgeParent(l,e)},mxGraphModel.prototype.updateEdgeParent=function(t,e){for(var n,i,l=this.getTerminal(t,!0),o=this.getTerminal(t,!1);null!=l&&!this.isEdge(l)&&null!=l.geometry&&l.geometry.relative;)l=this.getParent(l);for(;null!=o&&this.ignoreRelativeEdgeParent&&!this.isEdge(o)&&null!=o.geometry&&o.geometry.relative;)o=this.getParent(o);this.isAncestor(e,l)&&this.isAncestor(e,o)&&null!=(l=l==o?this.getParent(l):this.getNearestCommonAncestor(l,o))&&(this.getParent(l)!=this.root||this.isAncestor(l,t))&&this.getParent(t)!=l&&(null!=(o=this.getGeometry(t))&&(i=this.getOrigin(this.getParent(t)),e=(n=this.getOrigin(l)).x-i.x,i=n.y-i.y,(o=o.clone()).translate(-e,-i),this.setGeometry(t,o)),this.add(l,t,this.getChildCount(l)))},mxGraphModel.prototype.getOrigin=function(t){var e;return null!=t?(e=this.getOrigin(this.getParent(t)),this.isEdge(t)||null!=(t=this.getGeometry(t))&&(e.x+=t.x,e.y+=t.y)):e=new mxPoint,e},mxGraphModel.prototype.getNearestCommonAncestor=function(t,e){if(null!=t&&null!=e&&null!=(i=mxCellPath.create(e))&&0<i.length){var n,i,l=t,o=mxCellPath.create(l);for(i.length<o.length&&(l=e,n=o,o=i,i=n);null!=l;){if(n=this.getParent(l),0==i.indexOf(o+mxCellPath.PATH_SEPARATOR)&&null!=n)return l;o=mxCellPath.getParentPath(o),l=n}}return null},mxGraphModel.prototype.remove=function(t){return t==this.root?this.setRoot(null):null!=this.getParent(t)&&this.execute(new mxChildChange(this,null,t)),t},mxGraphModel.prototype.cellRemoved=function(t){if(null!=t&&null!=this.cells){for(var e=this.getChildCount(t)-1;0<=e;e--)this.cellRemoved(this.getChildAt(t,e));null!=this.cells&&null!=t.getId()&&delete this.cells[t.getId()]}},mxGraphModel.prototype.parentForCellChanged=function(t,e,n){var i=this.getParent(t);return null!=e?e==i&&i.getIndex(t)==n||e.insert(t,n):null!=i&&(n=i.getIndex(t),i.remove(n)),e=this.contains(e),n=this.contains(i),e&&!n?this.cellAdded(t):n&&!e&&this.cellRemoved(t),i},mxGraphModel.prototype.getChildCount=function(t){return null!=t?t.getChildCount():0},mxGraphModel.prototype.getChildAt=function(t,e){return null!=t?t.getChildAt(e):null},mxGraphModel.prototype.getChildren=function(t){return null!=t?t.children:null},mxGraphModel.prototype.getChildVertices=function(t){return this.getChildCells(t,!0,!1)},mxGraphModel.prototype.getChildEdges=function(t){return this.getChildCells(t,!1,!0)},mxGraphModel.prototype.getChildCells=function(t,e,n){e=null!=e&&e,n=null!=n&&n;for(var i=this.getChildCount(t),l=[],o=0;o<i;o++){var s=this.getChildAt(t,o);(!n&&!e||n&&this.isEdge(s)||e&&this.isVertex(s))&&l.push(s)}return l},mxGraphModel.prototype.getTerminal=function(t,e){return null!=t?t.getTerminal(e):null},mxGraphModel.prototype.setTerminal=function(t,e,n){var i=e!=this.getTerminal(t,n);return this.execute(new mxTerminalChange(this,t,e,n)),this.maintainEdgeParent&&i&&this.updateEdgeParent(t,this.getRoot()),e},mxGraphModel.prototype.setTerminals=function(t,e,n){this.beginUpdate();try{this.setTerminal(t,e,!0),this.setTerminal(t,n,!1)}finally{this.endUpdate()}},mxGraphModel.prototype.terminalForCellChanged=function(t,e,n){var i=this.getTerminal(t,n);return null!=e?e.insertEdge(t,n):null!=i&&i.removeEdge(t,n),i},mxGraphModel.prototype.getEdgeCount=function(t){return null!=t?t.getEdgeCount():0},mxGraphModel.prototype.getEdgeAt=function(t,e){return null!=t?t.getEdgeAt(e):null},mxGraphModel.prototype.getDirectedEdgeCount=function(t,e,n){for(var i=0,l=this.getEdgeCount(t),o=0;o<l;o++){var s=this.getEdgeAt(t,o);s!=n&&this.getTerminal(s,e)==t&&i++}return i},mxGraphModel.prototype.getConnections=function(t){return this.getEdges(t,!0,!0,!1)},mxGraphModel.prototype.getIncomingEdges=function(t){return this.getEdges(t,!0,!1,!1)},mxGraphModel.prototype.getOutgoingEdges=function(t){return this.getEdges(t,!1,!0,!1)},mxGraphModel.prototype.getEdges=function(t,e,n,i){e=null==e||e,n=null==n||n,i=null==i||i;for(var l=this.getEdgeCount(t),o=[],s=0;s<l;s++){var r=this.getEdgeAt(t,s),a=this.getTerminal(r,!0),h=this.getTerminal(r,!1);(i&&a==h||a!=h&&(e&&h==t||n&&a==t))&&o.push(r)}return o},mxGraphModel.prototype.getEdgesBetween=function(t,e,n){n=null!=n&&n;var i=this.getEdgeCount(t),l=this.getEdgeCount(e),o=t,s=i;for(l<i&&(s=l,o=e),i=[],l=0;l<s;l++){var r=this.getEdgeAt(o,l),a=this.getTerminal(r,!0),h=this.getTerminal(r,!1);(a==t&&h==e||!n&&h==t&&a==e)&&i.push(r)}return i},mxGraphModel.prototype.getOpposites=function(t,e,n,i){n=null==n||n,i=null==i||i;var l=[];if(null!=t)for(var o=0;o<t.length;o++){var s=this.getTerminal(t[o],!0),r=this.getTerminal(t[o],!1);s==e&&null!=r&&r!=e&&i?l.push(r):r==e&&null!=s&&s!=e&&n&&l.push(s)}return l},mxGraphModel.prototype.getTopmostCells=function(t){for(var e=new mxDictionary,n=[],i=0;i<t.length;i++)e.put(t[i],!0);for(i=0;i<t.length;i++){for(var l=t[i],o=!0,s=this.getParent(l);null!=s;){if(e.get(s)){o=!1;break}s=this.getParent(s)}o&&n.push(l)}return n},mxGraphModel.prototype.isVertex=function(t){return null!=t&&t.isVertex()},mxGraphModel.prototype.isEdge=function(t){return null!=t&&t.isEdge()},mxGraphModel.prototype.isConnectable=function(t){return null!=t&&t.isConnectable()},mxGraphModel.prototype.getValue=function(t){return null!=t?t.getValue():null},mxGraphModel.prototype.setValue=function(t,e){return this.execute(new mxValueChange(this,t,e)),e},mxGraphModel.prototype.valueForCellChanged=function(t,e){return t.valueChanged(e)},mxGraphModel.prototype.getGeometry=function(t){return null!=t?t.getGeometry():null},mxGraphModel.prototype.setGeometry=function(t,e){return e!=this.getGeometry(t)&&this.execute(new mxGeometryChange(this,t,e)),e},mxGraphModel.prototype.geometryForCellChanged=function(t,e){var n=this.getGeometry(t);return t.setGeometry(e),n},mxGraphModel.prototype.getStyle=function(t){return null!=t?t.getStyle():null},mxGraphModel.prototype.setStyle=function(t,e){return e!=this.getStyle(t)&&this.execute(new mxStyleChange(this,t,e)),e},mxGraphModel.prototype.styleForCellChanged=function(t,e){var n=this.getStyle(t);return t.setStyle(e),n},mxGraphModel.prototype.isCollapsed=function(t){return null!=t&&t.isCollapsed()},mxGraphModel.prototype.setCollapsed=function(t,e){return e!=this.isCollapsed(t)&&this.execute(new mxCollapseChange(this,t,e)),e},mxGraphModel.prototype.collapsedStateForCellChanged=function(t,e){var n=this.isCollapsed(t);return t.setCollapsed(e),n},mxGraphModel.prototype.isVisible=function(t){return null!=t&&t.isVisible()},mxGraphModel.prototype.setVisible=function(t,e){return e!=this.isVisible(t)&&this.execute(new mxVisibleChange(this,t,e)),e},mxGraphModel.prototype.visibleStateForCellChanged=function(t,e){var n=this.isVisible(t);return t.setVisible(e),n},mxGraphModel.prototype.execute=function(t){t.execute(),this.beginUpdate(),this.currentEdit.add(t),this.fireEvent(new mxEventObject(mxEvent.EXECUTE,"change",t)),this.fireEvent(new mxEventObject(mxEvent.EXECUTED,"change",t)),this.endUpdate()},mxGraphModel.prototype.beginUpdate=function(){this.updateLevel++,this.fireEvent(new mxEventObject(mxEvent.BEGIN_UPDATE)),1==this.updateLevel&&this.fireEvent(new mxEventObject(mxEvent.START_EDIT))},mxGraphModel.prototype.endUpdate=function(){if(this.updateLevel--,0==this.updateLevel&&this.fireEvent(new mxEventObject(mxEvent.END_EDIT)),!this.endingUpdate){this.endingUpdate=0==this.updateLevel,this.fireEvent(new mxEventObject(mxEvent.END_UPDATE,"edit",this.currentEdit));try{var t;this.endingUpdate&&!this.currentEdit.isEmpty()&&(this.fireEvent(new mxEventObject(mxEvent.BEFORE_UNDO,"edit",this.currentEdit)),t=this.currentEdit,this.currentEdit=this.createUndoableEdit(),t.notify(),this.fireEvent(new mxEventObject(mxEvent.UNDO,"edit",t)))}finally{this.endingUpdate=!1}}},mxGraphModel.prototype.createUndoableEdit=function(t){var e=new mxUndoableEdit(this,null==t||t);return e.notify=function(){e.source.fireEvent(new mxEventObject(mxEvent.CHANGE,"edit",e,"changes",e.changes)),e.source.fireEvent(new mxEventObject(mxEvent.NOTIFY,"edit",e,"changes",e.changes))},e},mxGraphModel.prototype.mergeChildren=function(t,e,n){n=null==n||n,this.beginUpdate();try{var i,l={};for(i in this.mergeChildrenImpl(t,e,n,l),l){var o=l[i],s=this.getTerminal(o,!0);null!=s&&(s=l[mxCellPath.create(s)],this.setTerminal(o,s,!0)),null!=(s=this.getTerminal(o,!1))&&(s=l[mxCellPath.create(s)],this.setTerminal(o,s,!1))}}finally{this.endUpdate()}},mxGraphModel.prototype.mergeChildrenImpl=function(t,e,n,i){this.beginUpdate();try{for(var l=t.getChildCount(),o=0;o<l;o++){var s,r,a,h=t.getChildAt(o);"function"==typeof h.getId&&(null==(r=null==(s=h.getId())||this.isEdge(h)&&n?null:this.getCell(s))&&((a=h.clone()).setId(s),a.setTerminal(h.getTerminal(!0),!0),a.setTerminal(h.getTerminal(!1),!1),r=e.insert(a),this.cellAdded(r)),i[mxCellPath.create(h)]=r,this.mergeChildrenImpl(h,r,n,i))}}finally{this.endUpdate()}},mxGraphModel.prototype.getParents=function(t){var e=[];if(null!=t)for(var n=new mxDictionary,i=0;i<t.length;i++){var l=this.getParent(t[i]);null==l||n.get(l)||(n.put(l,!0),e.push(l))}return e},mxGraphModel.prototype.cloneCell=function(t,e){return null!=t?this.cloneCells([t],e)[0]:null},mxGraphModel.prototype.cloneCells=function(t,e,n){e=null==e||e,n=null!=n?n:{};for(var i=[],l=0;l<t.length;l++)i.push(null!=t[l]?this.cloneCellImpl(t[l],n,e):null);for(l=0;l<i.length;l++)null!=i[l]&&this.restoreClone(i[l],t[l],n);return i},mxGraphModel.prototype.cloneCellImpl=function(t,e,n){var i=mxObjectIdentity.get(t),l=e[i];if(null==l&&(l=this.cellCloned(t),e[i]=l,n))for(n=this.getChildCount(t),i=0;i<n;i++){var o=this.cloneCellImpl(this.getChildAt(t,i),e,!0);l.insert(o)}return l},mxGraphModel.prototype.cellCloned=function(t){return t.clone()},mxGraphModel.prototype.restoreClone=function(t,e,n){null==(i=this.getTerminal(e,!0))||null!=(i=n[mxObjectIdentity.get(i)])&&i.insertEdge(t,!0),null==(i=this.getTerminal(e,!1))||null!=(i=n[mxObjectIdentity.get(i)])&&i.insertEdge(t,!1);for(var i=this.getChildCount(t),l=0;l<i;l++)this.restoreClone(this.getChildAt(t,l),this.getChildAt(e,l),n)},mxRootChange.prototype.execute=function(){this.root=this.previous,this.previous=this.model.rootChanged(this.previous)},mxChildChange.prototype.execute=function(){var t,e;null!=this.child&&(e=null!=(t=this.model.getParent(this.child))?t.getIndex(this.child):0,null==this.previous&&this.connect(this.child,!1),t=this.model.parentForCellChanged(this.child,this.previous,this.previousIndex),null!=this.previous&&this.connect(this.child,!0),this.parent=this.previous,this.previous=t,this.index=this.previousIndex,this.previousIndex=e)},mxChildChange.prototype.connect=function(t,e){e=null==e||e;var n=t.getTerminal(!0),i=t.getTerminal(!1);for(null!=n&&this.model.terminalForCellChanged(t,e?n:null,!0),null!=i&&this.model.terminalForCellChanged(t,e?i:null,!1),t.setTerminal(n,!0),t.setTerminal(i,!1),n=this.model.getChildCount(t),i=0;i<n;i++)this.connect(this.model.getChildAt(t,i),e)},mxTerminalChange.prototype.execute=function(){null!=this.cell&&(this.terminal=this.previous,this.previous=this.model.terminalForCellChanged(this.cell,this.previous,this.source))},mxValueChange.prototype.execute=function(){null!=this.cell&&(this.value=this.previous,this.previous=this.model.valueForCellChanged(this.cell,this.previous))},mxStyleChange.prototype.execute=function(){null!=this.cell&&(this.style=this.previous,this.previous=this.model.styleForCellChanged(this.cell,this.previous))},mxGeometryChange.prototype.execute=function(){null!=this.cell&&(this.geometry=this.previous,this.previous=this.model.geometryForCellChanged(this.cell,this.previous))},mxCollapseChange.prototype.execute=function(){null!=this.cell&&(this.collapsed=this.previous,this.previous=this.model.collapsedStateForCellChanged(this.cell,this.previous))},mxVisibleChange.prototype.execute=function(){null!=this.cell&&(this.visible=this.previous,this.previous=this.model.visibleStateForCellChanged(this.cell,this.previous))},mxCellAttributeChange.prototype.execute=function(){var t;null!=this.cell&&(t=this.cell.getAttribute(this.attribute),null==this.previous?this.cell.value.removeAttribute(this.attribute):this.cell.setAttribute(this.attribute,this.previous),this.previous=t)},mxCell.prototype.id=null,mxCell.prototype.value=null,mxCell.prototype.geometry=null,mxCell.prototype.style=null,mxCell.prototype.vertex=!1,mxCell.prototype.edge=!1,mxCell.prototype.connectable=!0,mxCell.prototype.visible=!0,mxCell.prototype.collapsed=!1,mxCell.prototype.parent=null,mxCell.prototype.source=null,mxCell.prototype.target=null,mxCell.prototype.children=null,mxCell.prototype.edges=null,mxCell.prototype.mxTransient="id value parent source target children edges".split(" "),mxCell.prototype.getId=function(){return this.id},mxCell.prototype.setId=function(t){this.id=t},mxCell.prototype.getValue=function(){return this.value},mxCell.prototype.setValue=function(t){this.value=t},mxCell.prototype.valueChanged=function(t){var e=this.getValue();return this.setValue(t),e},mxCell.prototype.getGeometry=function(){return this.geometry},mxCell.prototype.setGeometry=function(t){this.geometry=t},mxCell.prototype.getStyle=function(){return this.style},mxCell.prototype.setStyle=function(t){this.style=t},mxCell.prototype.isVertex=function(){return 0!=this.vertex},mxCell.prototype.setVertex=function(t){this.vertex=t},mxCell.prototype.isEdge=function(){return 0!=this.edge},mxCell.prototype.setEdge=function(t){this.edge=t},mxCell.prototype.isConnectable=function(){return 0!=this.connectable},mxCell.prototype.setConnectable=function(t){this.connectable=t},mxCell.prototype.isVisible=function(){return 0!=this.visible},mxCell.prototype.setVisible=function(t){this.visible=t},mxCell.prototype.isCollapsed=function(){return 0!=this.collapsed},mxCell.prototype.setCollapsed=function(t){this.collapsed=t},mxCell.prototype.getParent=function(){return this.parent},mxCell.prototype.setParent=function(t){this.parent=t},mxCell.prototype.getTerminal=function(t){return t?this.source:this.target},mxCell.prototype.setTerminal=function(t,e){return e?this.source=t:this.target=t,t},mxCell.prototype.getChildCount=function(){return null==this.children?0:this.children.length},mxCell.prototype.getIndex=function(t){return mxUtils.indexOf(this.children,t)},mxCell.prototype.getChildAt=function(t){return null==this.children?null:this.children[t]},mxCell.prototype.insert=function(t,e){return null!=t&&(null==e&&(e=this.getChildCount(),t.getParent()==this&&e--),t.removeFromParent(),t.setParent(this),null==this.children?(this.children=[],this.children.push(t)):this.children.splice(e,0,t)),t},mxCell.prototype.remove=function(t){var e=null;return null!=this.children&&0<=t&&null!=(e=this.getChildAt(t))&&(this.children.splice(t,1),e.setParent(null)),e},mxCell.prototype.removeFromParent=function(){var t;null!=this.parent&&(t=this.parent.getIndex(this),this.parent.remove(t))},mxCell.prototype.getEdgeCount=function(){return null==this.edges?0:this.edges.length},mxCell.prototype.getEdgeIndex=function(t){return mxUtils.indexOf(this.edges,t)},mxCell.prototype.getEdgeAt=function(t){return null==this.edges?null:this.edges[t]},mxCell.prototype.insertEdge=function(t,e){return null!=t&&(t.removeFromTerminal(e),t.setTerminal(this,e),null==this.edges||t.getTerminal(!e)!=this||mxUtils.indexOf(this.edges,t)<0)&&(null==this.edges&&(this.edges=[]),this.edges.push(t)),t},mxCell.prototype.removeEdge=function(t,e){var n;return null!=t&&(t.getTerminal(!e)==this||null==this.edges||0<=(n=this.getEdgeIndex(t))&&this.edges.splice(n,1),t.setTerminal(null,e)),t},mxCell.prototype.removeFromTerminal=function(t){var e=this.getTerminal(t);null!=e&&e.removeEdge(this,t)},mxCell.prototype.hasAttribute=function(t){var e=this.getValue();return null!=e&&e.nodeType==mxConstants.NODETYPE_ELEMENT&&e.hasAttribute?e.hasAttribute(t):null!=e.getAttribute(t)},mxCell.prototype.getAttribute=function(t,e){var n=this.getValue();return null!=(n=null!=n&&n.nodeType==mxConstants.NODETYPE_ELEMENT?n.getAttribute(t):null)?n:e},mxCell.prototype.setAttribute=function(t,e){var n=this.getValue();null!=n&&n.nodeType==mxConstants.NODETYPE_ELEMENT&&n.setAttribute(t,e)},mxCell.prototype.clone=function(){var t=mxUtils.clone(this,this.mxTransient);return t.setValue(this.cloneValue()),t},mxCell.prototype.cloneValue=function(t){return null!=(t=null!=t?t:this.getValue())&&("function"==typeof t.clone?t=t.clone():isNaN(t.nodeType)||(t=t.cloneNode(!0))),t},mxGeometry.prototype=new mxRectangle,mxGeometry.prototype.constructor=mxGeometry,mxGeometry.prototype.TRANSLATE_CONTROL_POINTS=!0,mxGeometry.prototype.alternateBounds=null,mxGeometry.prototype.sourcePoint=null,mxGeometry.prototype.targetPoint=null,mxGeometry.prototype.points=null,mxGeometry.prototype.offset=null,mxGeometry.prototype.relative=!1,mxGeometry.prototype.swap=function(){var t;null!=this.alternateBounds&&(t=new mxRectangle(this.x,this.y,this.width,this.height),this.x=this.alternateBounds.x,this.y=this.alternateBounds.y,this.width=this.alternateBounds.width,this.height=this.alternateBounds.height,this.alternateBounds=t)},mxGeometry.prototype.getTerminalPoint=function(t){return t?this.sourcePoint:this.targetPoint},mxGeometry.prototype.setTerminalPoint=function(t,e){return e?this.sourcePoint=t:this.targetPoint=t,t},mxGeometry.prototype.rotate=function(t,e){var n,i=mxUtils.toRadians(t),l=Math.cos(i);if(i=Math.sin(i),this.relative||(n=new mxPoint(this.getCenterX(),this.getCenterY()),n=mxUtils.getRotatedPoint(n,l,i,e),this.x=Math.round(n.x-this.width/2),this.y=Math.round(n.y-this.height/2)),null!=this.sourcePoint&&(n=mxUtils.getRotatedPoint(this.sourcePoint,l,i,e),this.sourcePoint.x=Math.round(n.x),this.sourcePoint.y=Math.round(n.y)),null!=this.targetPoint&&(n=mxUtils.getRotatedPoint(this.targetPoint,l,i,e),this.targetPoint.x=Math.round(n.x),this.targetPoint.y=Math.round(n.y)),null!=this.points)for(var o=0;o<this.points.length;o++)null!=this.points[o]&&(n=mxUtils.getRotatedPoint(this.points[o],l,i,e),this.points[o].x=Math.round(n.x),this.points[o].y=Math.round(n.y))},mxGeometry.prototype.translate=function(t,e){if(t=parseFloat(t),e=parseFloat(e),this.relative||(this.x=parseFloat(this.x)+t,this.y=parseFloat(this.y)+e),null!=this.sourcePoint&&(this.sourcePoint.x=parseFloat(this.sourcePoint.x)+t,this.sourcePoint.y=parseFloat(this.sourcePoint.y)+e),null!=this.targetPoint&&(this.targetPoint.x=parseFloat(this.targetPoint.x)+t,this.targetPoint.y=parseFloat(this.targetPoint.y)+e),this.TRANSLATE_CONTROL_POINTS&&null!=this.points)for(var n=0;n<this.points.length;n++)null!=this.points[n]&&(this.points[n].x=parseFloat(this.points[n].x)+t,this.points[n].y=parseFloat(this.points[n].y)+e)},mxGeometry.prototype.scale=function(t,e,n){if(t=parseFloat(t),e=parseFloat(e),null!=this.sourcePoint&&(this.sourcePoint.x=parseFloat(this.sourcePoint.x)*t,this.sourcePoint.y=parseFloat(this.sourcePoint.y)*e),null!=this.targetPoint&&(this.targetPoint.x=parseFloat(this.targetPoint.x)*t,this.targetPoint.y=parseFloat(this.targetPoint.y)*e),null!=this.points)for(var i=0;i<this.points.length;i++)null!=this.points[i]&&(this.points[i].x=parseFloat(this.points[i].x)*t,this.points[i].y=parseFloat(this.points[i].y)*e);this.relative||(this.x=parseFloat(this.x)*t,this.y=parseFloat(this.y)*e,n&&(e=t=Math.min(t,e)),this.width=parseFloat(this.width)*t,this.height=parseFloat(this.height)*e)},mxGeometry.prototype.equals=function(t){return mxRectangle.prototype.equals.apply(this,arguments)&&this.relative==t.relative&&(null==this.sourcePoint&&null==t.sourcePoint||null!=this.sourcePoint&&this.sourcePoint.equals(t.sourcePoint))&&(null==this.targetPoint&&null==t.targetPoint||null!=this.targetPoint&&this.targetPoint.equals(t.targetPoint))&&(null==this.points&&null==t.points||null!=this.points&&mxUtils.equalPoints(this.points,t.points))&&(null==this.alternateBounds&&null==t.alternateBounds||null!=this.alternateBounds&&this.alternateBounds.equals(t.alternateBounds))&&(null==this.offset&&null==t.offset||null!=this.offset&&this.offset.equals(t.offset))};var mxCellPath={PATH_SEPARATOR:".",create:function(t){var e="";if(null!=t)for(var n=t.getParent();null!=n;)e=n.getIndex(t)+mxCellPath.PATH_SEPARATOR+e,n=(t=n).getParent();return 1<(t=e.length)?e.substring(0,t-1):e},getParentPath:function(t){if(null!=t){var e=t.lastIndexOf(mxCellPath.PATH_SEPARATOR);if(0<=e)return t.substring(0,e);if(0<t.length)return""}return null},resolve:function(t,e){var n=t;if(null!=e)for(var i=e.split(mxCellPath.PATH_SEPARATOR),l=0;l<i.length;l++)n=n.getChildAt(parseInt(i[l]));return n},compare:function(t,e){for(var n=Math.min(t.length,e.length),i=0,l=0;l<n;l++)if(t[l]!=e[l]){i=0==t[l].length||0==e[l].length?t[l]==e[l]?0:t[l]>e[l]?1:-1:(n=parseInt(t[l]))==(l=parseInt(e[l]))?0:l<n?1:-1;break}return 0==i&&(n=t.length)!=(l=e.length)&&(i=l<n?1:-1),i}},mxPerimeter={RectanglePerimeter:function(t,e,n,i){e=t.getCenterX();var l=t.getCenterY(),o=Math.atan2(n.y-l,n.x-e),s=new mxPoint(0,0),r=Math.PI,a=Math.PI/2-o,h=Math.atan2(t.height,t.width);return o<-r+h||r-h<o?(s.x=t.x,s.y=l-t.width*Math.tan(o)/2):o<-h?(s.y=t.y,s.x=e-t.height*Math.tan(a)/2):o<h?(s.x=t.x+t.width,s.y=l+t.width*Math.tan(o)/2):(s.y=t.y+t.height,s.x=e+t.height*Math.tan(a)/2),i&&(n.x>=t.x&&n.x<=t.x+t.width?s.x=n.x:n.y>=t.y&&n.y<=t.y+t.height&&(s.y=n.y),n.x<t.x?s.x=t.x:n.x>t.x+t.width&&(s.x=t.x+t.width),n.y<t.y?s.y=t.y:n.y>t.y+t.height&&(s.y=t.y+t.height)),s},EllipsePerimeter:function(t,e,n,i){var l=t.x,o=t.y,s=t.width/2,r=t.height/2,a=l+s,h=o+r;e=n.x,n=n.y;var u=parseInt(e-a),d=parseInt(n-h);if(0==u&&0!=d)return new mxPoint(a,h+r*d/Math.abs(d));if(0==u&&0==d)return new mxPoint(e,n);if(i){if(o<=n&&n<=o+t.height)return t=n-h,t=Math.sqrt(s*s*(1-t*t/(r*r)))||0,new mxPoint(a+(t=e<=l?-t:t),n);if(l<=e&&e<=l+t.width)return t=e-a,t=Math.sqrt(r*r*(1-t*t/(s*s)))||0,new mxPoint(e,h+(t=n<=o?-t:t))}return h-=(l=d/u)*a,a=(-(t=-2*a*(o=s*s*l*l+r*r))-(r=Math.sqrt(t*t-4*o*(s*s*l*l*a*a+r*r*a*a-s*s*r*r))))/(2*o),r=l*(s=(-t+r)/(2*o))+h,h=l*a+h,n=Math.sqrt(Math.pow(s-e,2)+Math.pow(r-n,2))<Math.sqrt(Math.pow(a-e,2)+Math.pow(h-n,2))?(e=s,r):(e=a,h),new mxPoint(e,n)},RhombusPerimeter:function(t,e,n,i){var l=t.y,o=t.width,s=(e=t.x)+o/2,r=l+(t=t.height)/2,a=n.x;if(n=n.y,s==a)return new mxPoint(s,n<r?l:l+t);if(r==n)return new mxPoint(a<s?e:e+o,r);var h=s,u=r;return i&&(e<=a&&a<=e+o?h=a:l<=n&&n<=l+t&&(u=n)),mxUtils.intersection(a,n,h,u,s,n<r?l:l+t,a<s?e:e+o,r)},TrianglePerimeter:function(t,e,n,i){var l=(e=null!=e?e.style[mxConstants.STYLE_DIRECTION]:null)==mxConstants.DIRECTION_NORTH||e==mxConstants.DIRECTION_SOUTH,o=t.x,s=t.y,r=t.width,a=t.height;t=o+r/2;var h=s+a/2,u=new mxPoint(o,s),d=new mxPoint(o+r,h),c=new mxPoint(o,s+a);e==mxConstants.DIRECTION_NORTH?(u=c,d=new mxPoint(t,s),c=new mxPoint(o+r,s+a)):e==mxConstants.DIRECTION_SOUTH?(d=new mxPoint(t,s+a),c=new mxPoint(o+r,s)):e==mxConstants.DIRECTION_WEST&&(u=new mxPoint(o+r,s),d=new mxPoint(o,h),c=new mxPoint(o+r,s+a));var p=n.x-t,m=n.y-h;return p=l?Math.atan2(p,m):Math.atan2(m,p),m=l?Math.atan2(r,a):Math.atan2(a,r),null==(n=(e==mxConstants.DIRECTION_NORTH||e==mxConstants.DIRECTION_WEST?-m<p&&p<m:p<-Math.PI+m||p>Math.PI-m)?i&&(l&&n.x>=u.x&&n.x<=c.x||!l&&n.y>=u.y&&n.y<=c.y)?l?new mxPoint(n.x,u.y):new mxPoint(u.x,n.y):e==mxConstants.DIRECTION_NORTH?new mxPoint(o+r/2+a*Math.tan(p)/2,s+a):e==mxConstants.DIRECTION_SOUTH?new mxPoint(o+r/2-a*Math.tan(p)/2,s):e==mxConstants.DIRECTION_WEST?new mxPoint(o+r,s+a/2+r*Math.tan(p)/2):new mxPoint(o,s+a/2-r*Math.tan(p)/2):(i&&(i=new mxPoint(t,h),n.y>=s&&n.y<=s+a?(i.x=l?t:e==mxConstants.DIRECTION_WEST?o+r:o,i.y=n.y):n.x>=o&&n.x<=o+r&&(i.x=n.x,i.y=l?e==mxConstants.DIRECTION_NORTH?s+a:s:h),t=i.x,h=i.y),l&&n.x<=o+r/2||!l&&n.y<=s+a/2?mxUtils.intersection(n.x,n.y,t,h,u.x,u.y,d.x,d.y):mxUtils.intersection(n.x,n.y,t,h,d.x,d.y,c.x,c.y)))?new mxPoint(t,h):n},HexagonPerimeter:function(t,e,n,i){var l=t.x,o=t.y,s=t.width,r=t.height,a=t.getCenterX();t=t.getCenterY();var h=n.x,u=n.y,d=-Math.atan2(u-t,h-a),c=Math.PI,p=Math.PI/2;new mxPoint(a,t);var m=(e=null!=e?mxUtils.getValue(e.style,mxConstants.STYLE_DIRECTION,mxConstants.DIRECTION_EAST):mxConstants.DIRECTION_EAST)==mxConstants.DIRECTION_NORTH||e==mxConstants.DIRECTION_SOUTH;e=new mxPoint;var g=new mxPoint;if(i=!(h<l&&u<o||h<l&&o+r<u||l+s<h&&u<o||l+s<h&&o+r<u)&&i){if(m){if(h==a){if(u<=o)return new mxPoint(a,o);if(o+r<=u)return new mxPoint(a,o+r)}else if(h<l){if(u==o+r/4)return new mxPoint(l,o+r/4);if(u==o+3*r/4)return new mxPoint(l,o+3*r/4)}else if(l+s<h){if(u==o+r/4)return new mxPoint(l+s,o+r/4);if(u==o+3*r/4)return new mxPoint(l+s,o+3*r/4)}else if(h==l){if(u<t)return new mxPoint(l,o+r/4);if(t<u)return new mxPoint(l,o+3*r/4)}else if(h==l+s){if(u<t)return new mxPoint(l+s,o+r/4);if(t<u)return new mxPoint(l+s,o+3*r/4)}if(u==o)return new mxPoint(a,o);if(u==o+r)return new mxPoint(a,o+r);h<a?o+r/4<u&&u<o+3*r/4?(e=new mxPoint(l,o),g=new mxPoint(l,o+r)):u<o+r/4?(e=new mxPoint(l-Math.floor(.5*s),o+Math.floor(.5*r)),g=new mxPoint(l+s,o-Math.floor(.25*r))):o+3*r/4<u&&(e=new mxPoint(l-Math.floor(.5*s),o+Math.floor(.5*r)),g=new mxPoint(l+s,o+Math.floor(1.25*r))):a<h&&(o+r/4<u&&u<o+3*r/4?(e=new mxPoint(l+s,o),g=new mxPoint(l+s,o+r)):u<o+r/4?(e=new mxPoint(l,o-Math.floor(.25*r)),g=new mxPoint(l+Math.floor(1.5*s),o+Math.floor(.5*r))):o+3*r/4<u&&(e=new mxPoint(l+Math.floor(1.5*s),o+Math.floor(.5*r)),g=new mxPoint(l,o+Math.floor(1.25*r))))}else{if(u==t){if(h<=l)return new mxPoint(l,o+r/2);if(l+s<=h)return new mxPoint(l+s,o+r/2)}else if(u<o){if(h==l+s/4)return new mxPoint(l+s/4,o);if(h==l+3*s/4)return new mxPoint(l+3*s/4,o)}else if(o+r<u){if(h==l+s/4)return new mxPoint(l+s/4,o+r);if(h==l+3*s/4)return new mxPoint(l+3*s/4,o+r)}else if(u==o){if(h<a)return new mxPoint(l+s/4,o);if(a<h)return new mxPoint(l+3*s/4,o)}else if(u==o+r){if(h<a)return new mxPoint(l+s/4,o+r);if(t<u)return new mxPoint(l+3*s/4,o+r)}if(h==l)return new mxPoint(l,t);if(h==l+s)return new mxPoint(l+s,t);u<t?l+s/4<h&&h<l+3*s/4?(e=new mxPoint(l,o),g=new mxPoint(l+s,o)):h<l+s/4?(e=new mxPoint(l-Math.floor(.25*s),o+r),g=new mxPoint(l+Math.floor(.5*s),o-Math.floor(.5*r))):l+3*s/4<h&&(e=new mxPoint(l+Math.floor(.5*s),o-Math.floor(.5*r)),g=new mxPoint(l+Math.floor(1.25*s),o+r)):t<u&&(l+s/4<h&&h<l+3*s/4?(e=new mxPoint(l,o+r),g=new mxPoint(l+s,o+r)):h<l+s/4?(e=new mxPoint(l-Math.floor(.25*s),o),g=new mxPoint(l+Math.floor(.5*s),o+Math.floor(1.5*r))):l+3*s/4<h&&(e=new mxPoint(l+Math.floor(.5*s),o+Math.floor(1.5*r)),g=new mxPoint(l+Math.floor(1.25*s),o)))}i=a,d=t,l<=h&&h<=l+s?(i=h,d=u<t?o+r:o):o<=u&&u<=o+r&&(d=u,i=h<a?l+s:l),n=mxUtils.intersection(i,d,n.x,n.y,e.x,e.y,g.x,g.y)}else{if(m){if(d==(h=Math.atan2(r/4,s/2)))return new mxPoint(l+s,o+Math.floor(.25*r));if(d==p)return new mxPoint(l+Math.floor(.5*s),o);if(d==c-h)return new mxPoint(l,o+Math.floor(.25*r));if(d==-h)return new mxPoint(l+s,o+Math.floor(.75*r));if(d==-p)return new mxPoint(l+Math.floor(.5*s),o+r);if(d==-c+h)return new mxPoint(l,o+Math.floor(.75*r));d<h&&-h<d?(e=new mxPoint(l+s,o),g=new mxPoint(l+s,o+r)):h<d&&d<p?(e=new mxPoint(l,o-Math.floor(.25*r)),g=new mxPoint(l+Math.floor(1.5*s),o+Math.floor(.5*r))):p<d&&d<c-h?(e=new mxPoint(l-Math.floor(.5*s),o+Math.floor(.5*r)),g=new mxPoint(l+s,o-Math.floor(.25*r))):c-h<d&&d<=c||d<-c+h&&-c<=d?(e=new mxPoint(l,o),g=new mxPoint(l,o+r)):d<-h&&-p<d?(e=new mxPoint(l+Math.floor(1.5*s),o+Math.floor(.5*r)),g=new mxPoint(l,o+Math.floor(1.25*r))):d<-p&&-c+h<d&&(e=new mxPoint(l-Math.floor(.5*s),o+Math.floor(.5*r)),g=new mxPoint(l+s,o+Math.floor(1.25*r)))}else{if(d==(h=Math.atan2(r/2,s/4)))return new mxPoint(l+Math.floor(.75*s),o);if(d==c-h)return new mxPoint(l+Math.floor(.25*s),o);if(d==c||d==-c)return new mxPoint(l,o+Math.floor(.5*r));if(0==d)return new mxPoint(l+s,o+Math.floor(.5*r));if(d==-h)return new mxPoint(l+Math.floor(.75*s),o+r);if(d==-c+h)return new mxPoint(l+Math.floor(.25*s),o+r);0<d&&d<h?(e=new mxPoint(l+Math.floor(.5*s),o-Math.floor(.5*r)),g=new mxPoint(l+Math.floor(1.25*s),o+r)):h<d&&d<c-h?(e=new mxPoint(l,o),g=new mxPoint(l+s,o)):c-h<d&&d<c?(e=new mxPoint(l-Math.floor(.25*s),o+r),g=new mxPoint(l+Math.floor(.5*s),o-Math.floor(.5*r))):d<0&&-h<d?(e=new mxPoint(l+Math.floor(.5*s),o+Math.floor(1.5*r)),g=new mxPoint(l+Math.floor(1.25*s),o)):d<-h&&-c+h<d?(e=new mxPoint(l,o+r),g=new mxPoint(l+s,o+r)):d<-c+h&&-c<d&&(e=new mxPoint(l-Math.floor(.25*s),o),g=new mxPoint(l+Math.floor(.5*s),o+Math.floor(1.5*r)))}n=mxUtils.intersection(a,t,n.x,n.y,e.x,e.y,g.x,g.y)}return null==n?new mxPoint(a,t):n}};function mxPrintPreview(t,e,n,i,l,o,s,r,a){this.graph=t,this.scale=null!=e?e:1/t.pageScale,this.border=null!=i?i:0,this.pageFormat=mxRectangle.fromRectangle(null!=n?n:t.pageFormat),this.title=null!=r?r:"Printer-friendly version",this.x0=null!=l?l:0,this.y0=null!=o?o:0,this.borderColor=s,this.pageSelector=null==a||a}function mxCellState(t,e,n){this.view=t,this.cell=e,this.style=null!=n?n:{},this.origin=new mxPoint,this.absoluteOffset=new mxPoint}function mxGraphSelectionModel(t){this.graph=t,this.cells=[]}function mxStylesheet(){this.styles={},this.putDefaultVertexStyle(this.createDefaultVertexStyle()),this.putDefaultEdgeStyle(this.createDefaultEdgeStyle())}function mxSelectionChange(t,e,n){this.selectionModel=t,this.added=null!=e?e.slice():null,this.removed=null!=n?n.slice():null}function mxCellEditor(t){this.graph=t,this.zoomHandler=mxUtils.bind(this,function(){this.graph.isEditing()&&this.resize()}),this.graph.view.addListener(mxEvent.SCALE,this.zoomHandler),this.graph.view.addListener(mxEvent.SCALE_AND_TRANSLATE,this.zoomHandler),this.changeHandler=mxUtils.bind(this,function(t){null!=this.editingCell&&null==this.graph.getView().getState(this.editingCell)&&this.stopEditing(!0)}),this.graph.getModel().addListener(mxEvent.CHANGE,this.changeHandler)}function mxCellRenderer(){}mxPrintPreview.prototype.graph=null,mxPrintPreview.prototype.pageFormat=null,mxPrintPreview.prototype.scale=null,mxPrintPreview.prototype.border=0,mxPrintPreview.prototype.marginTop=0,mxPrintPreview.prototype.marginBottom=0,mxPrintPreview.prototype.x0=0,mxPrintPreview.prototype.y0=0,mxPrintPreview.prototype.autoOrigin=!0,mxPrintPreview.prototype.printOverlays=!1,mxPrintPreview.prototype.printControls=!1,mxPrintPreview.prototype.printBackgroundImage=!1,mxPrintPreview.prototype.backgroundColor="#ffffff",mxPrintPreview.prototype.borderColor=null,mxPrintPreview.prototype.title=null,mxPrintPreview.prototype.pageSelector=null,mxPrintPreview.prototype.wnd=null,mxPrintPreview.prototype.targetWindow=null,mxPrintPreview.prototype.pageCount=0,mxPrintPreview.prototype.clipping=!0,mxPrintPreview.prototype.getWindow=function(){return this.wnd},mxPrintPreview.prototype.getDoctype=function(){var t="";return 8==document.documentMode?t='<meta http-equiv="X-UA-Compatible" content="IE=8">':8<document.documentMode&&(t='\x3c!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge"><![endif]--\x3e'),t},mxPrintPreview.prototype.appendGraph=function(t,e,n,i,l,o){this.graph=t,this.scale=null!=e?e:1/t.pageScale,this.x0=n,this.y0=i,this.open(null,null,l,o)},mxPrintPreview.prototype.open=function(t,e,n,i){var l=this.graph.cellRenderer.initializeOverlay,o=null;try{this.printOverlays&&(this.graph.cellRenderer.initializeOverlay=function(t,e){e.init(t.view.getDrawPane())}),this.printControls&&(this.graph.cellRenderer.initControl=function(t,e,n,i){e.dialect=t.view.graph.dialect,e.init(t.view.getDrawPane())}),this.wnd=null!=e?e:this.wnd;var s=!1;null==this.wnd&&(s=!0,this.wnd=window.open());var r,a=this.wnd.document;s&&(null!=(r=this.getDoctype())&&0<r.length&&a.writeln(r),"CSS1Compat"===document.compatMode&&a.writeln("<!DOCTYPE html>"),a.writeln("<html>"),a.writeln("<head>"),this.writeHead(a,t),a.writeln("</head>"),a.writeln('<body class="mxPage">'));var h=this.graph.getGraphBounds().clone(),u=this.graph.getView().getScale(),d=u/this.scale,c=this.graph.getView().getTranslate();this.autoOrigin||(this.x0-=c.x*this.scale,this.y0-=c.y*this.scale,h.width+=h.x,h.height+=h.y,h.x=0,this.border=h.y=0);var p=this.pageFormat.width-2*this.border,m=this.pageFormat.height-2*this.border;this.pageFormat.height+=this.marginTop+this.marginBottom,h.width/=d,h.height/=d;var g=Math.max(1,Math.ceil((h.width+this.x0)/p)),x=Math.max(1,Math.ceil((h.height+this.y0)/m));this.pageCount=g*x;var y=mxUtils.bind(this,function(){var t,e;this.pageSelector&&(1<x||1<g)&&(t=this.createPageSelector(x,g),a.body.appendChild(t),(mxClient.IS_IE&&null==a.documentMode||5==a.documentMode||8==a.documentMode||7==a.documentMode)&&(t.style.position="absolute",e=function(){t.style.top=(a.body.scrollTop||a.documentElement.scrollTop)+10+"px"},mxEvent.addListener(this.wnd,"scroll",function(t){e()}),mxEvent.addListener(this.wnd,"resize",function(t){e()})))}),f=mxUtils.bind(this,function(t,e){var i;null!=this.borderColor&&(t.style.borderColor=this.borderColor,t.style.borderStyle="solid",t.style.borderWidth="1px"),t.style.background=this.backgroundColor,(n||e)&&(t.style.pageBreakAfter="always"),s&&(mxClient.IS_IE||11<=document.documentMode||mxClient.IS_EDGE)?(a.writeln(t.outerHTML),t.parentNode.removeChild(t)):mxClient.IS_IE||11<=document.documentMode||mxClient.IS_EDGE?((i=a.createElement("div")).innerHTML=t.outerHTML,i=i.getElementsByTagName("div")[0],a.body.appendChild(i),t.parentNode.removeChild(t)):(t.parentNode.removeChild(t),a.body.appendChild(t)),(n||e)&&this.addPageBreak(a)}),v=this.getCoverPages(this.pageFormat.width,this.pageFormat.height);if(null!=v)for(var b=0;b<v.length;b++)f(v[b],!0);var C=this.getAppendices(this.pageFormat.width,this.pageFormat.height);for(b=0;b<x;b++){var E=b*m/this.scale-this.y0/this.scale+(h.y-c.y*u)/u;for(t=0;t<g;t++){if(null==this.wnd)return null;var S=t*p/this.scale-this.x0/this.scale+(h.x-c.x*u)/u,w=b*g+t+1,T=new mxRectangle(S,E,p,m);(o=this.renderPage(this.pageFormat.width,this.pageFormat.height,0,0,mxUtils.bind(this,function(t){this.addGraphFragment(-S,-E,this.scale,w,t,T),this.printBackgroundImage&&this.insertBackgroundImage(t,-S,-E)}),w)).setAttribute("id","mxPage-"+w),f(o,null!=C||b<x-1||t<g-1)}}if(null!=C)for(b=0;b<C.length;b++)f(C[b],b<C.length-1);s&&!i&&(this.closeDocument(),y()),this.wnd.focus()}catch(t){null!=o&&null!=o.parentNode&&o.parentNode.removeChild(o)}finally{this.graph.cellRenderer.initializeOverlay=l}return this.wnd},mxPrintPreview.prototype.addPageBreak=function(t){var e=t.createElement("hr");e.className="mxPageBreak",t.body.appendChild(e)},mxPrintPreview.prototype.closeDocument=function(){try{var t;null!=this.wnd&&null!=this.wnd.document&&(this.writePostfix(t=this.wnd.document),t.writeln("</body>"),t.writeln("</html>"),t.close(),mxEvent.release(t.body))}catch(t){}},mxPrintPreview.prototype.writeHead=function(t,e){null!=this.title&&t.writeln("<title>"+this.title+"</title>"),t.writeln('<style type="text/css">'),t.writeln("@media print {"),t.writeln("  * { -webkit-print-color-adjust: exact; }"),t.writeln("  table.mxPageSelector { display: none; }"),t.writeln("  hr.mxPageBreak { display: none; }"),t.writeln("}"),t.writeln("@media screen {"),t.writeln("  table.mxPageSelector { position: fixed; right: 10px; top: 10px;font-family: Arial; font-size:10pt; border: solid 1px darkgray;background: white; border-collapse:collapse; }"),t.writeln("  table.mxPageSelector td { border: solid 1px gray; padding:4px; }"),t.writeln("  body.mxPage { background: gray; }"),t.writeln("}"),null!=e&&t.writeln(e),t.writeln("</style>")},mxPrintPreview.prototype.writePostfix=function(t){},mxPrintPreview.prototype.createPageSelector=function(t,e){var n=this.wnd.document,i=n.createElement("table");i.className="mxPageSelector",i.setAttribute("border","0");for(var l=n.createElement("tbody"),o=0;o<t;o++){for(var s=n.createElement("tr"),r=0;r<e;r++){var a=o*e+r+1,h=n.createElement("td"),u=n.createElement("a");u.setAttribute("href","#mxPage-"+a),!mxClient.IS_NS||mxClient.IS_SF||mxClient.IS_GC||u.setAttribute("onclick","var page = document.getElementById('mxPage-"+a+"');page.scrollIntoView(true);event.preventDefault();"),mxUtils.write(u,a,n),h.appendChild(u),s.appendChild(h)}l.appendChild(s)}return i.appendChild(l),i},mxPrintPreview.prototype.renderPage=function(t,e,n,i,l,o){o=this.wnd.document;var s=document.createElement("div"),r=null;try{var a,h;r=0!=n||0!=i?(s.style.position="relative",s.style.width=t+"px",s.style.height=e+"px",s.style.pageBreakInside="avoid",(a=document.createElement("div")).style.position="relative",a.style.top=this.border+"px",a.style.left=this.border+"px",a.style.width=t-2*this.border+"px",a.style.height=e-2*this.border+"px",a.style.overflow="hidden",(h=document.createElement("div")).style.position="relative",h.style.marginLeft=n+"px",h.style.marginTop=i+"px",8==o.documentMode&&(a.style.position="absolute",h.style.position="absolute"),10==o.documentMode&&(h.style.width="100%",h.style.height="100%"),a.appendChild(h),s.appendChild(a),document.body.appendChild(s),h):(s.style.width=t+"px",s.style.height=e+"px",s.style.overflow="hidden",s.style.pageBreakInside="avoid",8==o.documentMode&&(s.style.position="relative"),(a=document.createElement("div")).style.width=t-2*this.border+"px",a.style.height=e-2*this.border+"px",a.style.overflow="hidden",!mxClient.IS_IE||null!=o.documentMode&&5!=o.documentMode&&8!=o.documentMode&&7!=o.documentMode?(a.style.top=this.border+"px",a.style.left=this.border+"px"):(a.style.marginTop=this.border+"px",a.style.marginLeft=this.border+"px"),s.appendChild(a),document.body.appendChild(s),a)}catch(t){throw s.parentNode.removeChild(s),t}return l(r),s},mxPrintPreview.prototype.getRoot=function(){var t=this.graph.view.currentRoot;return null==t?this.graph.getModel().getRoot():t},mxPrintPreview.prototype.useCssTransforms=function(){return!mxClient.NO_FO&&!mxClient.IS_SF},mxPrintPreview.prototype.addGraphFragment=function(t,e,n,i,l,o){var s=this.graph.getView();i=this.graph.container,this.graph.container=l;var r,a=s.getCanvas(),h=s.getBackgroundPane(),u=s.getDrawPane(),d=s.getOverlayPane(),c=n;this.graph.dialect==mxConstants.DIALECT_SVG?(s.createSvg(),this.useCssTransforms()&&((r=s.getDrawPane().parentNode).getAttribute("transform"),r.setAttribute("transformOrigin","0 0"),r.setAttribute("transform","scale("+n+","+n+")translate("+t+","+e+")"),n=1,e=t=0)):s.createHtml(),r=s.isEventsEnabled(),s.setEventsEnabled(!1);var p=this.graph.isEnabled();this.graph.setEnabled(!1);var m=s.getTranslate();s.translate=new mxPoint(t,e);var g,x=this.graph.cellRenderer.redraw,y=s.states;t=s.scale,this.clipping&&(g=new mxRectangle((o.x+m.x)*t,(o.y+m.y)*t,o.width*t/c,o.height*t/c),this.graph.cellRenderer.redraw=function(t,e,n){if(null!=t){var i=y.get(t.cell);if(null!=i&&null!=(i=s.getBoundingBox(i,!1))&&0<i.width&&0<i.height&&!mxUtils.intersects(g,i))return}x.apply(this,arguments)}),t=null;try{var f=[this.getRoot()];t=new mxTemporaryCellStates(s,n,f,null,mxUtils.bind(this,function(t){return this.getLinkForCellState(t)}))}finally{if(mxClient.IS_IE)s.overlayPane.innerHTML="",s.canvas.style.overflow="hidden",s.canvas.style.position="relative",s.canvas.style.top=this.marginTop+"px",s.canvas.style.width=o.width+"px",s.canvas.style.height=o.height+"px";else for(n=l.firstChild;null!=n;)f=n.nextSibling,"svg"==(e=n.nodeName.toLowerCase())?(n.style.overflow="hidden",n.style.position="relative",n.style.top=this.marginTop+"px",n.setAttribute("width",o.width),n.setAttribute("height",o.height),n.style.width="",n.style.height=""):"default"!=n.style.cursor&&"div"!=e&&n.parentNode.removeChild(n),n=f;this.printBackgroundImage&&0<(l=l.getElementsByTagName("svg")).length&&(l[0].style.position="absolute"),s.overlayPane.parentNode.removeChild(s.overlayPane),this.graph.setEnabled(p),this.graph.container=i,this.graph.cellRenderer.redraw=x,s.canvas=a,s.backgroundPane=h,s.drawPane=u,s.overlayPane=d,s.translate=m,t.destroy(),s.setEventsEnabled(r)}},mxPrintPreview.prototype.getLinkForCellState=function(t){return this.graph.getLinkForCell(t.cell)},mxPrintPreview.prototype.insertBackgroundImage=function(t,e,n){var i,l=this.graph.backgroundImage;null!=l&&((i=document.createElement("img")).style.position="absolute",i.style.marginLeft=Math.round(e*this.scale)+"px",i.style.marginTop=Math.round(n*this.scale)+"px",i.setAttribute("width",Math.round(this.scale*l.width)),i.setAttribute("height",Math.round(this.scale*l.height)),i.src=l.src,t.insertBefore(i,t.firstChild))},mxPrintPreview.prototype.getCoverPages=function(){return null},mxPrintPreview.prototype.getAppendices=function(){return null},mxPrintPreview.prototype.print=function(t){null!=(t=this.open(t))&&t.print()},mxPrintPreview.prototype.close=function(){null!=this.wnd&&(this.wnd.close(),this.wnd=null)},mxCellState.prototype=new mxRectangle,mxCellState.prototype.constructor=mxCellState,mxCellState.prototype.view=null,mxCellState.prototype.cell=null,mxCellState.prototype.style=null,mxCellState.prototype.invalidStyle=!1,mxCellState.prototype.invalid=!0,mxCellState.prototype.origin=null,mxCellState.prototype.absolutePoints=null,mxCellState.prototype.absoluteOffset=null,mxCellState.prototype.visibleSourceState=null,mxCellState.prototype.visibleTargetState=null,mxCellState.prototype.terminalDistance=0,mxCellState.prototype.length=0,mxCellState.prototype.segments=null,mxCellState.prototype.shape=null,mxCellState.prototype.text=null,mxCellState.prototype.unscaledWidth=null,mxCellState.prototype.unscaledHeight=null,mxCellState.prototype.getPerimeterBounds=function(t,e){var n;return t=t||0,e=null!=e?e:new mxRectangle(this.x,this.y,this.width,this.height),null!=this.shape&&null!=this.shape.stencil&&"fixed"==this.shape.stencil.aspect&&(n=this.shape.stencil.computeAspect(this.style,e.x,e.y,e.width,e.height),e.x=n.x,e.y=n.y,e.width=this.shape.stencil.w0*n.width,e.height=this.shape.stencil.h0*n.height),0!=t&&e.grow(t),e},mxCellState.prototype.setAbsoluteTerminalPoint=function(t,e){e?(null==this.absolutePoints&&(this.absolutePoints=[]),0==this.absolutePoints.length?this.absolutePoints.push(t):this.absolutePoints[0]=t):null==this.absolutePoints?(this.absolutePoints=[],this.absolutePoints.push(null),this.absolutePoints.push(t)):1==this.absolutePoints.length?this.absolutePoints.push(t):this.absolutePoints[this.absolutePoints.length-1]=t},mxCellState.prototype.setCursor=function(t){null!=this.shape&&this.shape.setCursor(t),null!=this.text&&this.text.setCursor(t)},mxCellState.prototype.getVisibleTerminal=function(t){return null!=(t=this.getVisibleTerminalState(t))?t.cell:null},mxCellState.prototype.getVisibleTerminalState=function(t){return t?this.visibleSourceState:this.visibleTargetState},mxCellState.prototype.setVisibleTerminalState=function(t,e){e?this.visibleSourceState=t:this.visibleTargetState=t},mxCellState.prototype.getCellBounds=function(){return this.cellBounds},mxCellState.prototype.getPaintBounds=function(){return this.paintBounds},mxCellState.prototype.updateCachedBounds=function(){var t=this.view.translate,e=this.view.scale;this.cellBounds=new mxRectangle(this.x/e-t.x,this.y/e-t.y,this.width/e,this.height/e),this.paintBounds=mxRectangle.fromRectangle(this.cellBounds),null!=this.shape&&this.shape.isPaintBoundsInverted()&&this.paintBounds.rotate90()},mxCellState.prototype.setState=function(t){this.view=t.view,this.cell=t.cell,this.style=t.style,this.absolutePoints=t.absolutePoints,this.origin=t.origin,this.absoluteOffset=t.absoluteOffset,this.boundingBox=t.boundingBox,this.terminalDistance=t.terminalDistance,this.segments=t.segments,this.length=t.length,this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this.unscaledWidth=t.unscaledWidth,this.unscaledHeight=t.unscaledHeight},mxCellState.prototype.clone=function(){var t=new mxCellState(this.view,this.cell,this.style);if(null!=this.absolutePoints){t.absolutePoints=[];for(var e=0;e<this.absolutePoints.length;e++)t.absolutePoints[e]=this.absolutePoints[e].clone()}return null!=this.origin&&(t.origin=this.origin.clone()),null!=this.absoluteOffset&&(t.absoluteOffset=this.absoluteOffset.clone()),null!=this.boundingBox&&(t.boundingBox=this.boundingBox.clone()),t.terminalDistance=this.terminalDistance,t.segments=this.segments,t.length=this.length,t.x=this.x,t.y=this.y,t.width=this.width,t.height=this.height,t.unscaledWidth=this.unscaledWidth,t.unscaledHeight=this.unscaledHeight,t},mxCellState.prototype.destroy=function(){this.view.graph.cellRenderer.destroy(this)},mxGraphSelectionModel.prototype=new mxEventSource,mxGraphSelectionModel.prototype.constructor=mxGraphSelectionModel,mxGraphSelectionModel.prototype.doneResource="none"!=mxClient.language?"done":"",mxStylesheet.prototype.createDefaultVertexStyle=function(){var t={};return t[mxConstants.STYLE_SHAPE]=mxConstants.SHAPE_RECTANGLE,t[mxConstants.STYLE_PERIMETER]=mxPerimeter.RectanglePerimeter,t[mxConstants.STYLE_VERTICAL_ALIGN]=mxConstants.ALIGN_MIDDLE,t[mxConstants.STYLE_ALIGN]=mxConstants.ALIGN_CENTER,t[mxConstants.STYLE_FILLCOLOR]="#C3D9FF",t[mxConstants.STYLE_STROKECOLOR]="#6482B9",t[mxConstants.STYLE_FONTCOLOR]="#774400",t},mxStylesheet.prototype.createDefaultEdgeStyle=function(){var t={};return t[mxConstants.STYLE_SHAPE]=mxConstants.SHAPE_CONNECTOR,t[mxConstants.STYLE_ENDARROW]=mxConstants.ARROW_CLASSIC,t[mxConstants.STYLE_VERTICAL_ALIGN]=mxConstants.ALIGN_MIDDLE,t[mxConstants.STYLE_ALIGN]=mxConstants.ALIGN_CENTER,t[mxConstants.STYLE_STROKECOLOR]="#6482B9",t[mxConstants.STYLE_FONTCOLOR]="#446299",t},mxStylesheet.prototype.putDefaultVertexStyle=function(t){this.putCellStyle("defaultVertex",t)},mxStylesheet.prototype.putDefaultEdgeStyle=function(t){this.putCellStyle("defaultEdge",t)},mxStylesheet.prototype.getDefaultVertexStyle=function(){return this.styles.defaultVertex},mxStylesheet.prototype.getDefaultEdgeStyle=function(){return this.styles.defaultEdge},mxStylesheet.prototype.putCellStyle=function(t,e){this.styles[t]=e},mxStylesheet.prototype.getCellStyle=function(t,e){var n=e;if(null!=t&&0<t.length)for(var i=t.split(";"),l=(n=null!=n&&";"!=t.charAt(0)?mxUtils.clone(n):{},0);l<i.length;l++){var o=(s=i[l]).indexOf("=");if(0<=o){var s,r=s.substring(0,o);(s=s.substring(o+1))==mxConstants.NONE?delete n[r]:n[r]=mxUtils.isNumeric(s)?parseFloat(s):s}else if(null!=(s=this.styles[s]))for(r in s)n[r]=s[r]}return n},mxGraphSelectionModel.prototype.updatingSelectionResource="none"!=mxClient.language?"updatingSelection":"",mxGraphSelectionModel.prototype.graph=null,mxGraphSelectionModel.prototype.singleSelection=!1,mxGraphSelectionModel.prototype.isSingleSelection=function(){return this.singleSelection},mxGraphSelectionModel.prototype.setSingleSelection=function(t){this.singleSelection=t},mxGraphSelectionModel.prototype.isSelected=function(t){return null!=t&&0<=mxUtils.indexOf(this.cells,t)},mxGraphSelectionModel.prototype.isEmpty=function(){return 0==this.cells.length},mxGraphSelectionModel.prototype.clear=function(){this.changeSelection(null,this.cells)},mxGraphSelectionModel.prototype.setCell=function(t){null!=t&&this.setCells([t])},mxGraphSelectionModel.prototype.setCells=function(t){if(null!=t){this.singleSelection&&(t=[this.getFirstSelectableCell(t)]);for(var e=[],n=0;n<t.length;n++)this.graph.isCellSelectable(t[n])&&e.push(t[n]);this.changeSelection(e,this.cells)}},mxGraphSelectionModel.prototype.getFirstSelectableCell=function(t){if(null!=t)for(var e=0;e<t.length;e++)if(this.graph.isCellSelectable(t[e]))return t[e];return null},mxGraphSelectionModel.prototype.addCell=function(t){null!=t&&this.addCells([t])},mxGraphSelectionModel.prototype.addCells=function(t){if(null!=t){var e=null;this.singleSelection&&(e=this.cells,t=[this.getFirstSelectableCell(t)]);for(var n=[],i=0;i<t.length;i++)!this.isSelected(t[i])&&this.graph.isCellSelectable(t[i])&&n.push(t[i]);this.changeSelection(n,e)}},mxGraphSelectionModel.prototype.removeCell=function(t){null!=t&&this.removeCells([t])},mxGraphSelectionModel.prototype.removeCells=function(t){if(null!=t){for(var e=[],n=0;n<t.length;n++)this.isSelected(t[n])&&e.push(t[n]);this.changeSelection(null,e)}},mxGraphSelectionModel.prototype.changeSelection=function(t,e){(null!=t&&0<t.length&&null!=t[0]||null!=e&&0<e.length&&null!=e[0])&&((t=new mxSelectionChange(this,t,e)).execute(),(e=new mxUndoableEdit(this,!1)).add(t),this.fireEvent(new mxEventObject(mxEvent.UNDO,"edit",e)))},mxGraphSelectionModel.prototype.cellAdded=function(t){null==t||this.isSelected(t)||this.cells.push(t)},mxGraphSelectionModel.prototype.cellRemoved=function(t){null!=t&&0<=(t=mxUtils.indexOf(this.cells,t))&&this.cells.splice(t,1)},mxSelectionChange.prototype.execute=function(){var t=mxLog.enter("mxSelectionChange.execute");if(window.status=mxResources.get(this.selectionModel.updatingSelectionResource)||this.selectionModel.updatingSelectionResource,null!=this.removed)for(var e=0;e<this.removed.length;e++)this.selectionModel.cellRemoved(this.removed[e]);if(null!=this.added)for(e=0;e<this.added.length;e++)this.selectionModel.cellAdded(this.added[e]);e=this.added,this.added=this.removed,this.removed=e,window.status=mxResources.get(this.selectionModel.doneResource)||this.selectionModel.doneResource,mxLog.leave("mxSelectionChange.execute",t),this.selectionModel.fireEvent(new mxEventObject(mxEvent.CHANGE,"added",this.added,"removed",this.removed))},mxCellEditor.prototype.graph=null,mxCellEditor.prototype.textarea=null,mxCellEditor.prototype.editingCell=null,mxCellEditor.prototype.trigger=null,mxCellEditor.prototype.modified=!1,mxCellEditor.prototype.autoSize=!0,mxCellEditor.prototype.selectText=!0,mxCellEditor.prototype.emptyLabelText=mxClient.IS_FF?"<br>":"",mxCellEditor.prototype.escapeCancelsEditing=!0,mxCellEditor.prototype.textNode="",mxCellEditor.prototype.zIndex=5,mxCellEditor.prototype.minResize=new mxRectangle(0,20),mxCellEditor.prototype.wordWrapPadding=mxClient.IS_IE11?0:1,mxCellEditor.prototype.blurEnabled=!1,mxCellEditor.prototype.initialValue=null,mxCellEditor.prototype.align=null,mxCellEditor.prototype.init=function(){this.textarea=document.createElement("div"),this.textarea.className="mxCellEditor mxPlainTextEditor",this.textarea.contentEditable=!0,mxClient.IS_GC&&(this.textarea.style.minHeight="1em"),this.textarea.style.position=this.isLegacyEditor()?"absolute":"relative",this.installListeners(this.textarea)},mxCellEditor.prototype.applyValue=function(t,e){this.graph.labelChanged(t.cell,e,this.trigger)},mxCellEditor.prototype.setAlign=function(t){null!=this.textarea&&(this.textarea.style.textAlign=t),this.align=t,this.resize()},mxCellEditor.prototype.getInitialValue=function(t,e){return e=mxUtils.htmlEntities(this.graph.getEditingValue(t.cell,e),!1),(e=8!=document.documentMode&&9!=document.documentMode&&10!=document.documentMode?mxUtils.replaceTrailingNewlines(e,"<div><br></div>"):e).replace(/\n/g,"<br>")},mxCellEditor.prototype.getCurrentValue=function(t){return mxUtils.extractTextWithWhitespace(this.textarea.childNodes)},mxCellEditor.prototype.isCancelEditingKeyEvent=function(t){return this.escapeCancelsEditing||mxEvent.isShiftDown(t)||mxEvent.isControlDown(t)||mxEvent.isMetaDown(t)},mxCellEditor.prototype.installListeners=function(t){mxEvent.addListener(t,"dragstart",mxUtils.bind(this,function(t){this.graph.stopEditing(!1),mxEvent.consume(t)})),mxEvent.addListener(t,"blur",mxUtils.bind(this,function(t){this.blurEnabled&&this.focusLost(t)})),mxEvent.addListener(t,"keydown",mxUtils.bind(this,function(t){mxEvent.isConsumed(t)||(this.isStopEditingEvent(t)?(this.graph.stopEditing(!1),mxEvent.consume(t)):27==t.keyCode&&(this.graph.stopEditing(this.isCancelEditingKeyEvent(t)),mxEvent.consume(t)))}));var e=mxUtils.bind(this,function(e){null!=this.editingCell&&this.clearOnChange&&t.innerHTML==this.getEmptyLabelText()&&(!mxClient.IS_FF||8!=e.keyCode&&46!=e.keyCode)&&(this.clearOnChange=!1,t.innerHTML="")});mxEvent.addListener(t,"keypress",e),mxEvent.addListener(t,"paste",e),e=mxUtils.bind(this,function(t){null!=this.editingCell&&(0==this.textarea.innerHTML.length||"<br>"==this.textarea.innerHTML?(this.textarea.innerHTML=this.getEmptyLabelText(),this.clearOnChange=0<this.textarea.innerHTML.length):this.clearOnChange=!1)}),mxEvent.addListener(t,mxClient.IS_IE11||mxClient.IS_IE?"keyup":"input",e),mxEvent.addListener(t,"cut",e),mxEvent.addListener(t,"paste",e),e=mxClient.IS_IE11||mxClient.IS_IE?"keydown":"input";var n=mxUtils.bind(this,function(t){null!=this.editingCell&&this.autoSize&&!mxEvent.isConsumed(t)&&(null!=this.resizeThread&&window.clearTimeout(this.resizeThread),this.resizeThread=window.setTimeout(mxUtils.bind(this,function(){this.resizeThread=null,this.resize()}),0))});mxEvent.addListener(t,e,n),mxEvent.addListener(window,"resize",n),9<=document.documentMode?(mxEvent.addListener(t,"DOMNodeRemoved",n),mxEvent.addListener(t,"DOMNodeInserted",n)):(mxEvent.addListener(t,"cut",n),mxEvent.addListener(t,"paste",n))},mxCellEditor.prototype.isStopEditingEvent=function(t){return 113==t.keyCode||this.graph.isEnterStopsCellEditing()&&13==t.keyCode&&!mxEvent.isControlDown(t)&&!mxEvent.isShiftDown(t)},mxCellEditor.prototype.isEventSource=function(t){return mxEvent.getSource(t)==this.textarea},mxCellEditor.prototype.resize=function(){var t,e,n,i,l,o,s,r,a,h,u=this.graph.getView().getState(this.editingCell);null==u?this.stopEditing(!0):null!=this.textarea&&(h=this.graph.getModel().isEdge(u.cell),t=this.graph.getView().scale,n=null,this.autoSize&&"fill"!=u.style[mxConstants.STYLE_OVERFLOW]?(e=mxUtils.getValue(u.style,mxConstants.STYLE_LABEL_WIDTH,null),null==(n=null!=u.text&&null==this.align?u.text.margin:null)&&(n=mxUtils.getAlignmentAsPoint(this.align||mxUtils.getValue(u.style,mxConstants.STYLE_ALIGN,mxConstants.ALIGN_CENTER),mxUtils.getValue(u.style,mxConstants.STYLE_VERTICAL_ALIGN,mxConstants.ALIGN_MIDDLE))),h?(this.bounds=new mxRectangle(u.absoluteOffset.x,u.absoluteOffset.y,0,0),null!=e&&(e=(parseFloat(e)+2)*t,this.bounds.width=e,this.bounds.x+=n.x*e)):(h=mxRectangle.fromRectangle(u),r=mxUtils.getValue(u.style,mxConstants.STYLE_LABEL_POSITION,mxConstants.ALIGN_CENTER),a=mxUtils.getValue(u.style,mxConstants.STYLE_VERTICAL_LABEL_POSITION,mxConstants.ALIGN_MIDDLE),h=null!=u.shape&&r==mxConstants.ALIGN_CENTER&&a==mxConstants.ALIGN_MIDDLE?u.shape.getLabelBounds(h):h,null!=e&&(h.width=parseFloat(e)*t),u.view.graph.cellRenderer.legacySpacing&&("width"==u.style[mxConstants.STYLE_OVERFLOW]||"block"==u.style[mxConstants.STYLE_OVERFLOW])||(r=parseInt(u.style[mxConstants.STYLE_SPACING]||2)*t,i=(parseInt(u.style[mxConstants.STYLE_SPACING_TOP]||0)+mxText.prototype.baseSpacingTop)*t+r,l=(parseInt(u.style[mxConstants.STYLE_SPACING_RIGHT]||0)+mxText.prototype.baseSpacingRight)*t+r,o=(parseInt(u.style[mxConstants.STYLE_SPACING_BOTTOM]||0)+mxText.prototype.baseSpacingBottom)*t+r,s=(parseInt(u.style[mxConstants.STYLE_SPACING_LEFT]||0)+mxText.prototype.baseSpacingLeft)*t+r,r=mxUtils.getValue(u.style,mxConstants.STYLE_LABEL_POSITION,mxConstants.ALIGN_CENTER),a=mxUtils.getValue(u.style,mxConstants.STYLE_VERTICAL_LABEL_POSITION,mxConstants.ALIGN_MIDDLE),h=new mxRectangle(h.x+s,h.y+i,h.width-(r==mxConstants.ALIGN_CENTER&&null==e?s+l:0),h.height-(a==mxConstants.ALIGN_MIDDLE?i+o:0))),this.bounds=new mxRectangle(h.x+u.absoluteOffset.x,h.y+u.absoluteOffset.y,h.width,h.height)),this.graph.isWrapping(u.cell)&&(2<=this.bounds.width||2<=this.bounds.height)&&this.textarea.innerHTML!=this.getEmptyLabelText()?(this.textarea.style.wordWrap=mxConstants.WORD_WRAP,this.textarea.style.whiteSpace="normal",e=Math.round(this.bounds.width/t)+this.wordWrapPadding,"relative"!=this.textarea.style.position?(this.textarea.style.width=e+"px",this.textarea.scrollWidth>e&&(this.textarea.style.width=this.textarea.scrollWidth+"px")):"block"==u.style[mxConstants.STYLE_OVERFLOW]||"width"==u.style[mxConstants.STYLE_OVERFLOW]?(-.5!=n.y&&"width"!=u.style[mxConstants.STYLE_OVERFLOW]||(this.textarea.style.maxHeight=this.bounds.height+"px"),this.textarea.style.width=e+"px"):this.textarea.style.maxWidth=e+"px"):(this.textarea.style.whiteSpace="nowrap",this.textarea.style.width=""),8==document.documentMode&&(this.textarea.style.zoom="1",this.textarea.style.height="auto"),8==document.documentMode?(u=this.textarea.scrollWidth,e=this.textarea.scrollHeight,this.textarea.style.left=Math.max(0,Math.ceil((this.bounds.x-n.x*(this.bounds.width-(u+1)*t)+u*(t-1)*0+2*(n.x+.5))/t))+"px",this.textarea.style.top=Math.max(0,Math.ceil((this.bounds.y-n.y*(this.bounds.height-(e+.5)*t)+e*(t-1)*0+ +Math.abs(n.y+.5))/t))+"px",this.textarea.style.width=Math.round(u*t)+"px",this.textarea.style.height=Math.round(e*t)+"px"):(this.textarea.style.left=Math.max(0,Math.round(this.bounds.x-n.x*(this.bounds.width-2))+1)+"px",this.textarea.style.top=Math.max(0,Math.round(this.bounds.y-n.y*(this.bounds.height-4)+(-1==n.y?3:0))+1)+"px")):(this.bounds=this.getEditorBounds(u),this.textarea.style.width=Math.round(this.bounds.width/t)+"px",this.textarea.style.height=Math.round(this.bounds.height/t)+"px",8==document.documentMode?(this.textarea.style.left=Math.round(this.bounds.x)+"px",this.textarea.style.top=Math.round(this.bounds.y)+"px"):(this.textarea.style.left=Math.max(0,Math.round(this.bounds.x+1))+"px",this.textarea.style.top=Math.max(0,Math.round(this.bounds.y+1))+"px"),this.graph.isWrapping(u.cell)&&(2<=this.bounds.width||2<=this.bounds.height)&&this.textarea.innerHTML!=this.getEmptyLabelText()?(this.textarea.style.wordWrap=mxConstants.WORD_WRAP,this.textarea.style.whiteSpace="normal","fill"!=u.style[mxConstants.STYLE_OVERFLOW]&&(this.textarea.style.width=Math.round(this.bounds.width/t)+this.wordWrapPadding+"px")):(this.textarea.style.whiteSpace="nowrap","fill"!=u.style[mxConstants.STYLE_OVERFLOW]&&(this.textarea.style.width=""))),mxUtils.setPrefixedStyle(this.textarea.style,"transformOrigin","0px 0px"),mxUtils.setPrefixedStyle(this.textarea.style,"transform","scale("+t+","+t+")"+(null==n?"":" translate("+100*n.x+"%,"+100*n.y+"%)")))},mxCellEditor.prototype.focusLost=function(){this.stopEditing(!this.graph.isInvokesStopCellEditing())},mxCellEditor.prototype.getBackgroundColor=function(t){return null},mxCellEditor.prototype.isLegacyEditor=function(){var t,e=!1;return mxClient.IS_SVG&&(null==(t=this.graph.view.getDrawPane().ownerSVGElement)||null!=(t=mxUtils.getCurrentStyle(t))&&(e="absolute"==t.position)),!e},mxCellEditor.prototype.startEditing=function(t,e){this.stopEditing(!0),(this.align=null)==this.textarea&&this.init(),null!=this.graph.tooltipHandler&&this.graph.tooltipHandler.hideTooltip();var n=this.graph.getView().getState(t);if(null!=n){this.graph.getView();var i=mxUtils.getValue(n.style,mxConstants.STYLE_FONTSIZE,mxConstants.DEFAULT_FONTSIZE),l=mxUtils.getValue(n.style,mxConstants.STYLE_FONTFAMILY,mxConstants.DEFAULT_FONTFAMILY),o=mxUtils.getValue(n.style,mxConstants.STYLE_FONTCOLOR,"black"),s=mxUtils.getValue(n.style,mxConstants.STYLE_ALIGN,mxConstants.ALIGN_LEFT),r=(mxUtils.getValue(n.style,mxConstants.STYLE_FONTSTYLE,0)&mxConstants.FONT_BOLD)==mxConstants.FONT_BOLD,a=(mxUtils.getValue(n.style,mxConstants.STYLE_FONTSTYLE,0)&mxConstants.FONT_ITALIC)==mxConstants.FONT_ITALIC,h=[];(mxUtils.getValue(n.style,mxConstants.STYLE_FONTSTYLE,0)&mxConstants.FONT_UNDERLINE)==mxConstants.FONT_UNDERLINE&&h.push("underline"),(mxUtils.getValue(n.style,mxConstants.STYLE_FONTSTYLE,0)&mxConstants.FONT_STRIKETHROUGH)==mxConstants.FONT_STRIKETHROUGH&&h.push("line-through"),this.textarea.style.lineHeight=mxConstants.ABSOLUTE_LINE_HEIGHT?Math.round(i*mxConstants.LINE_HEIGHT)+"px":mxConstants.LINE_HEIGHT,this.textarea.style.backgroundColor=this.getBackgroundColor(n),this.textarea.style.textDecoration=h.join(" "),this.textarea.style.fontWeight=r?"bold":"normal",this.textarea.style.fontStyle=a?"italic":"",this.textarea.style.fontSize=Math.round(i)+"px",this.textarea.style.zIndex=this.zIndex,this.textarea.style.fontFamily=l,this.textarea.style.textAlign=s,this.textarea.style.outline="none",this.textarea.style.color=o,(i=this.textDirection=mxUtils.getValue(n.style,mxConstants.STYLE_TEXT_DIRECTION,mxConstants.DEFAULT_TEXT_DIRECTION))==mxConstants.TEXT_DIRECTION_AUTO&&(null==n||null==n.text||n.text.dialect==mxConstants.DIALECT_STRICTHTML||mxUtils.isNode(n.text.value)||(i=n.text.getAutoDirection())),i==mxConstants.TEXT_DIRECTION_LTR||i==mxConstants.TEXT_DIRECTION_RTL?this.textarea.setAttribute("dir",i):this.textarea.removeAttribute("dir"),this.textarea.innerHTML=this.getInitialValue(n,e)||"",this.initialValue=this.textarea.innerHTML,0==this.textarea.innerHTML.length||"<br>"==this.textarea.innerHTML?(this.textarea.innerHTML=this.getEmptyLabelText(),this.clearOnChange=!0):this.clearOnChange=this.textarea.innerHTML==this.getEmptyLabelText(),this.graph.container.appendChild(this.textarea),this.editingCell=t,this.trigger=e,(this.textNode=null)!=n.text&&this.isHideLabel(n)&&(this.textNode=n.text.node,this.textNode.style.visibility="hidden"),this.autoSize&&(this.graph.model.isEdge(n.cell)||"fill"!=n.style[mxConstants.STYLE_OVERFLOW])&&window.setTimeout(mxUtils.bind(this,function(){this.resize()}),0),this.resize();try{this.textarea.focus(),this.isSelectText()&&0<this.textarea.innerHTML.length&&(this.textarea.innerHTML!=this.getEmptyLabelText()||!this.clearOnChange)&&document.execCommand("selectAll",!1,null)}catch(t){}}},mxCellEditor.prototype.isSelectText=function(){return this.selectText},mxCellEditor.prototype.clearSelection=function(){var t=null;window.getSelection?t=window.getSelection():document.selection&&(t=document.selection),null!=t&&(t.empty?t.empty():t.removeAllRanges&&t.removeAllRanges())},mxCellEditor.prototype.stopEditing=function(t){if(null!=this.editingCell){null!=this.textNode&&(this.textNode.style.visibility="visible",this.textNode=null),t=t?null:this.graph.view.getState(this.editingCell);var e=this.initialValue;if(this.bounds=this.trigger=this.editingCell=this.initialValue=null,this.textarea.blur(),this.clearSelection(),null!=this.textarea.parentNode&&this.textarea.parentNode.removeChild(this.textarea),this.clearOnChange&&this.textarea.innerHTML==this.getEmptyLabelText()&&(this.textarea.innerHTML="",this.clearOnChange=!1),null!=t&&(this.textarea.innerHTML!=e||null!=this.align)){this.prepareTextarea(),e=this.getCurrentValue(t),this.graph.getModel().beginUpdate();try{null!=e&&this.applyValue(t,e),null!=this.align&&this.graph.setCellStyles(mxConstants.STYLE_ALIGN,this.align,[t.cell])}finally{this.graph.getModel().endUpdate()}}mxEvent.release(this.textarea),this.align=this.textarea=null}},mxCellEditor.prototype.prepareTextarea=function(){null!=this.textarea.lastChild&&"BR"==this.textarea.lastChild.nodeName&&this.textarea.removeChild(this.textarea.lastChild)},mxCellEditor.prototype.isHideLabel=function(t){return!0},mxCellEditor.prototype.getMinimumSize=function(t){var e=this.graph.getView().scale;return new mxRectangle(0,0,null==t.text?30:t.text.size*e+20,"left"==this.textarea.style.textAlign?120:40)},mxCellEditor.prototype.getEditorBounds=function(t){var e,n,i,l,o=this.graph.getModel().isEdge(t.cell),s=this.graph.getView().scale,r=(a=this.getMinimumSize(t)).width,a=a.height;return!o&&t.view.graph.cellRenderer.legacySpacing&&"fill"==t.style[mxConstants.STYLE_OVERFLOW]?s=t.shape.getLabelBounds(mxRectangle.fromRectangle(t)):(n=parseInt(t.style[mxConstants.STYLE_SPACING]||0)*s,e=(parseInt(t.style[mxConstants.STYLE_SPACING_TOP]||0)+mxText.prototype.baseSpacingTop)*s+n,i=(parseInt(t.style[mxConstants.STYLE_SPACING_RIGHT]||0)+mxText.prototype.baseSpacingRight)*s+n,l=(parseInt(t.style[mxConstants.STYLE_SPACING_BOTTOM]||0)+mxText.prototype.baseSpacingBottom)*s+n,n=(parseInt(t.style[mxConstants.STYLE_SPACING_LEFT]||0)+mxText.prototype.baseSpacingLeft)*s+n,s=new mxRectangle(t.x,t.y,Math.max(r,t.width-n-i),Math.max(a,t.height-e-l)),i=mxUtils.getValue(t.style,mxConstants.STYLE_LABEL_POSITION,mxConstants.ALIGN_CENTER),l=mxUtils.getValue(t.style,mxConstants.STYLE_VERTICAL_LABEL_POSITION,mxConstants.ALIGN_MIDDLE),s=null!=t.shape&&i==mxConstants.ALIGN_CENTER&&l==mxConstants.ALIGN_MIDDLE?t.shape.getLabelBounds(s):s,o?(s.x=t.absoluteOffset.x,s.y=t.absoluteOffset.y,null!=t.text&&null!=t.text.boundingBox&&(0<t.text.boundingBox.x&&(s.x=t.text.boundingBox.x),0<t.text.boundingBox.y&&(s.y=t.text.boundingBox.y))):null!=t.text&&null!=t.text.boundingBox&&(s.x=Math.min(s.x,t.text.boundingBox.x),s.y=Math.min(s.y,t.text.boundingBox.y)),s.x+=n,s.y+=e,null!=t.text&&null!=t.text.boundingBox&&(o?(s.width=Math.max(r,t.text.boundingBox.width),s.height=Math.max(a,t.text.boundingBox.height)):(s.width=Math.max(s.width,t.text.boundingBox.width),s.height=Math.max(s.height,t.text.boundingBox.height))),this.graph.getModel().isVertex(t.cell)&&((o=mxUtils.getValue(t.style,mxConstants.STYLE_LABEL_POSITION,mxConstants.ALIGN_CENTER))==mxConstants.ALIGN_LEFT?s.x-=t.width:o==mxConstants.ALIGN_RIGHT&&(s.x+=t.width),(o=mxUtils.getValue(t.style,mxConstants.STYLE_VERTICAL_LABEL_POSITION,mxConstants.ALIGN_MIDDLE))==mxConstants.ALIGN_TOP?s.y-=t.height:o==mxConstants.ALIGN_BOTTOM&&(s.y+=t.height))),new mxRectangle(Math.round(s.x),Math.round(s.y),Math.round(s.width),Math.round(s.height))},mxCellEditor.prototype.getEmptyLabelText=function(t){return this.emptyLabelText},mxCellEditor.prototype.getEditingCell=function(){return this.editingCell},mxCellEditor.prototype.destroy=function(){null!=this.textarea&&(mxEvent.release(this.textarea),null!=this.textarea.parentNode&&this.textarea.parentNode.removeChild(this.textarea),this.textarea=null),null!=this.changeHandler&&(this.graph.getModel().removeListener(this.changeHandler),this.changeHandler=null),this.zoomHandler&&(this.graph.view.removeListener(this.zoomHandler),this.zoomHandler=null)},mxCellRenderer.defaultShapes={},mxCellRenderer.prototype.defaultEdgeShape=mxConnector,mxCellRenderer.prototype.defaultVertexShape=mxRectangleShape,mxCellRenderer.prototype.defaultTextShape=mxText,mxCellRenderer.prototype.legacyControlPosition=!0,mxCellRenderer.prototype.legacySpacing=!0,mxCellRenderer.prototype.antiAlias=!0,mxCellRenderer.prototype.minSvgStrokeWidth=1,mxCellRenderer.prototype.forceControlClickHandler=!1,mxCellRenderer.registerShape=function(t,e){mxCellRenderer.defaultShapes[t]=e},mxCellRenderer.registerShape(mxConstants.SHAPE_RECTANGLE,mxRectangleShape),mxCellRenderer.registerShape(mxConstants.SHAPE_ELLIPSE,mxEllipse),mxCellRenderer.registerShape(mxConstants.SHAPE_RHOMBUS,mxRhombus),mxCellRenderer.registerShape(mxConstants.SHAPE_CYLINDER,mxCylinder),mxCellRenderer.registerShape(mxConstants.SHAPE_CONNECTOR,mxConnector),mxCellRenderer.registerShape(mxConstants.SHAPE_ACTOR,mxActor),mxCellRenderer.registerShape(mxConstants.SHAPE_TRIANGLE,mxTriangle),mxCellRenderer.registerShape(mxConstants.SHAPE_HEXAGON,mxHexagon),mxCellRenderer.registerShape(mxConstants.SHAPE_CLOUD,mxCloud),mxCellRenderer.registerShape(mxConstants.SHAPE_LINE,mxLine),mxCellRenderer.registerShape(mxConstants.SHAPE_ARROW,mxArrow),mxCellRenderer.registerShape(mxConstants.SHAPE_ARROW_CONNECTOR,mxArrowConnector),mxCellRenderer.registerShape(mxConstants.SHAPE_DOUBLE_ELLIPSE,mxDoubleEllipse),mxCellRenderer.registerShape(mxConstants.SHAPE_SWIMLANE,mxSwimlane),mxCellRenderer.registerShape(mxConstants.SHAPE_IMAGE,mxImageShape),mxCellRenderer.registerShape(mxConstants.SHAPE_LABEL,mxLabel),mxCellRenderer.prototype.initializeShape=function(t){t.shape.dialect=t.view.graph.dialect,this.configureShape(t),t.shape.init(t.view.getDrawPane())},mxCellRenderer.prototype.createShape=function(t){var e=null;return null!=t.style&&(e=null!=(e=null==mxCellRenderer.defaultShapes[e=t.style[mxConstants.STYLE_SHAPE]]?mxStencilRegistry.getStencil(e):null)?new mxShape(e):new(this.getShapeConstructor(t))),e},mxCellRenderer.prototype.createIndicatorShape=function(t){t.shape.indicatorShape=this.getShape(t.view.graph.getIndicatorShape(t))},mxCellRenderer.prototype.getShape=function(t){return null!=t?mxCellRenderer.defaultShapes[t]:null},mxCellRenderer.prototype.getShapeConstructor=function(t){var e=this.getShape(t.style[mxConstants.STYLE_SHAPE]);return null==e?t.view.graph.getModel().isEdge(t.cell)?this.defaultEdgeShape:this.defaultVertexShape:e},mxCellRenderer.prototype.configureShape=function(t){t.shape.apply(t),t.shape.image=t.view.graph.getImage(t),t.shape.indicatorColor=t.view.graph.getIndicatorColor(t),t.shape.indicatorStrokeColor=t.style[mxConstants.STYLE_INDICATOR_STROKECOLOR],t.shape.indicatorGradientColor=t.view.graph.getIndicatorGradientColor(t),t.shape.indicatorDirection=t.style[mxConstants.STYLE_INDICATOR_DIRECTION],t.shape.indicatorImage=t.view.graph.getIndicatorImage(t),this.postConfigureShape(t)},mxCellRenderer.prototype.postConfigureShape=function(t){null!=t.shape&&(this.resolveColor(t,"indicatorGradientColor",mxConstants.STYLE_GRADIENTCOLOR),this.resolveColor(t,"indicatorColor",mxConstants.STYLE_FILLCOLOR),this.resolveColor(t,"gradient",mxConstants.STYLE_GRADIENTCOLOR),this.resolveColor(t,"stroke",mxConstants.STYLE_STROKECOLOR),this.resolveColor(t,"fill",mxConstants.STYLE_FILLCOLOR))},mxCellRenderer.prototype.checkPlaceholderStyles=function(t){if(null!=t.style)for(var e=["inherit","swimlane","indicated"],n=[mxConstants.STYLE_FILLCOLOR,mxConstants.STYLE_STROKECOLOR,mxConstants.STYLE_GRADIENTCOLOR,mxConstants.STYLE_FONTCOLOR],i=0;i<n.length;i++)if(0<=mxUtils.indexOf(e,t.style[n[i]]))return!0;return!1},mxCellRenderer.prototype.resolveColor=function(t,e,n){var i,l,o,s=n==mxConstants.STYLE_FONTCOLOR?t.text:t.shape;null!=s&&(i=t.view.graph,o=null,"inherit"==(l=s[e])?o=i.model.getParent(t.cell):"swimlane"==l?(s[e]=n==mxConstants.STYLE_STROKECOLOR||n==mxConstants.STYLE_FONTCOLOR?"#000000":"#ffffff",o=null!=i.model.getTerminal(t.cell,!1)?i.model.getTerminal(t.cell,!1):t.cell,o=i.getSwimlane(o),n=i.swimlaneIndicatorColorAttribute):"indicated"==l&&null!=t.shape?s[e]=t.shape.indicatorColor:n!=mxConstants.STYLE_FILLCOLOR&&l==mxConstants.STYLE_FILLCOLOR&&null!=t.shape?s[e]=t.style[mxConstants.STYLE_FILLCOLOR]:n!=mxConstants.STYLE_STROKECOLOR&&l==mxConstants.STYLE_STROKECOLOR&&null!=t.shape&&(s[e]=t.style[mxConstants.STYLE_STROKECOLOR]),null!=o&&(t=i.getView().getState(o),(s[e]=null)!=t&&(s[e]=null!=(i=n==mxConstants.STYLE_FONTCOLOR?t.text:t.shape)&&"indicatorColor"!=e?i[e]:t.style[n])))},mxCellRenderer.prototype.getLabelValue=function(t){return t.view.graph.getLabel(t.cell)},mxCellRenderer.prototype.createLabel=function(t,e){var n,i,l,o=t.view.graph;o.getModel().isEdge(t.cell),(0<t.style[mxConstants.STYLE_FONTSIZE]||null==t.style[mxConstants.STYLE_FONTSIZE])&&(n=o.isHtmlLabel(t.cell)||null!=e&&mxUtils.isNode(e),t.text=new this.defaultTextShape(e,new mxRectangle,t.style[mxConstants.STYLE_ALIGN]||mxConstants.ALIGN_CENTER,o.getVerticalAlign(t),t.style[mxConstants.STYLE_FONTCOLOR],t.style[mxConstants.STYLE_FONTFAMILY],t.style[mxConstants.STYLE_FONTSIZE],t.style[mxConstants.STYLE_FONTSTYLE],t.style[mxConstants.STYLE_SPACING],t.style[mxConstants.STYLE_SPACING_TOP],t.style[mxConstants.STYLE_SPACING_RIGHT],t.style[mxConstants.STYLE_SPACING_BOTTOM],t.style[mxConstants.STYLE_SPACING_LEFT],t.style[mxConstants.STYLE_HORIZONTAL],t.style[mxConstants.STYLE_LABEL_BACKGROUNDCOLOR],t.style[mxConstants.STYLE_LABEL_BORDERCOLOR],o.isWrapping(t.cell)&&o.isHtmlLabel(t.cell),o.isLabelClipped(t.cell),t.style[mxConstants.STYLE_OVERFLOW],t.style[mxConstants.STYLE_LABEL_PADDING],mxUtils.getValue(t.style,mxConstants.STYLE_TEXT_DIRECTION,mxConstants.DEFAULT_TEXT_DIRECTION)),t.text.opacity=mxUtils.getValue(t.style,mxConstants.STYLE_TEXT_OPACITY,100),t.text.dialect=n?mxConstants.DIALECT_STRICTHTML:t.view.graph.dialect,t.text.style=t.style,t.text.state=t,this.initializeLabel(t,t.text),i=!1,l=function(e){var n=t;return(mxClient.IS_TOUCH||i)&&(n=mxEvent.getClientX(e),e=mxEvent.getClientY(e),e=mxUtils.convertPoint(o.container,n,e),n=o.view.getState(o.getCellAt(e.x,e.y))),n},mxEvent.addGestureListeners(t.text.node,mxUtils.bind(this,function(e){this.isLabelEvent(t,e)&&(o.fireMouseEvent(mxEvent.MOUSE_DOWN,new mxMouseEvent(e,t)),i=o.dialect!=mxConstants.DIALECT_SVG&&"IMG"==mxEvent.getSource(e).nodeName)}),mxUtils.bind(this,function(e){this.isLabelEvent(t,e)&&o.fireMouseEvent(mxEvent.MOUSE_MOVE,new mxMouseEvent(e,l(e)))}),mxUtils.bind(this,function(e){this.isLabelEvent(t,e)&&(o.fireMouseEvent(mxEvent.MOUSE_UP,new mxMouseEvent(e,l(e))),i=!1)})),o.nativeDblClickEnabled&&mxEvent.addListener(t.text.node,"dblclick",mxUtils.bind(this,function(e){this.isLabelEvent(t,e)&&(o.dblClick(e,t.cell),mxEvent.consume(e))})))},mxCellRenderer.prototype.initializeLabel=function(t,e){e.init(mxClient.IS_SVG&&mxClient.NO_FO&&e.dialect!=mxConstants.DIALECT_SVG?t.view.graph.container:t.view.getDrawPane())},mxCellRenderer.prototype.createCellOverlays=function(t){var e=t.view.graph.getCellOverlays(t.cell),n=null;if(null!=e){n=new mxDictionary;for(var i=0;i<e.length;i++){var l=null!=t.overlays?t.overlays.remove(e[i]):null;null==l&&((l=new mxImageShape(new mxRectangle,e[i].image.src)).dialect=t.view.graph.dialect,l.preserveImageAspect=!1,l.overlay=e[i],this.initializeOverlay(t,l),this.installCellOverlayListeners(t,e[i],l),null!=e[i].cursor&&(l.node.style.cursor=e[i].cursor)),n.put(e[i],l)}}null!=t.overlays&&t.overlays.visit(function(t,e){e.destroy()}),t.overlays=n},mxCellRenderer.prototype.initializeOverlay=function(t,e){e.init(t.view.getOverlayPane())},mxCellRenderer.prototype.installCellOverlayListeners=function(t,e,n){var i=t.view.graph;mxEvent.addListener(n.node,"click",function(n){i.isEditing()&&i.stopEditing(!i.isInvokesStopCellEditing()),e.fireEvent(new mxEventObject(mxEvent.CLICK,"event",n,"cell",t.cell))}),mxEvent.addGestureListeners(n.node,function(t){mxEvent.consume(t)},function(e){i.fireMouseEvent(mxEvent.MOUSE_MOVE,new mxMouseEvent(e,t))}),mxClient.IS_TOUCH&&mxEvent.addListener(n.node,"touchend",function(n){e.fireEvent(new mxEventObject(mxEvent.CLICK,"event",n,"cell",t.cell))})},mxCellRenderer.prototype.createControl=function(t){var e,n=t.view.graph,i=n.getFoldingImage(t);n.foldingEnabled&&null!=i?null==t.control&&(e=new mxRectangle(0,0,i.width,i.height),t.control=new mxImageShape(e,i.src),t.control.preserveImageAspect=!1,t.control.dialect=n.dialect,this.initControl(t,t.control,!0,this.createControlClickHandler(t))):null!=t.control&&(t.control.destroy(),t.control=null)},mxCellRenderer.prototype.createControlClickHandler=function(t){var e=t.view.graph;return mxUtils.bind(this,function(n){var i;(this.forceControlClickHandler||e.isEnabled())&&(i=!e.isCellCollapsed(t.cell),e.foldCells(i,!1,[t.cell],null,n),mxEvent.consume(n))})},mxCellRenderer.prototype.initControl=function(t,e,n,i){var l,o=t.view.graph;return o.isHtmlLabel(t.cell)&&mxClient.NO_FO&&o.dialect==mxConstants.DIALECT_SVG?(e.dialect=mxConstants.DIALECT_PREFERHTML,e.init(o.container),e.node.style.zIndex=1):e.init(t.view.getOverlayPane()),e=e.innerNode||e.node,null==i||mxClient.IS_IOS||(o.isEnabled()&&(e.style.cursor="pointer"),mxEvent.addListener(e,"click",i)),n&&(l=null,mxEvent.addGestureListeners(e,function(e){l=new mxPoint(mxEvent.getClientX(e),mxEvent.getClientY(e)),o.fireMouseEvent(mxEvent.MOUSE_DOWN,new mxMouseEvent(e,t)),mxEvent.consume(e)},function(e){o.fireMouseEvent(mxEvent.MOUSE_MOVE,new mxMouseEvent(e,t))},function(e){o.fireMouseEvent(mxEvent.MOUSE_UP,new mxMouseEvent(e,t)),mxEvent.consume(e)}),null!=i&&mxClient.IS_IOS&&e.addEventListener("touchend",function(t){var e;null!=l&&(e=o.tolerance,Math.abs(l.x-mxEvent.getClientX(t))<e&&Math.abs(l.y-mxEvent.getClientY(t))<e&&(i.call(i,t),mxEvent.consume(t)))},!0)),e},mxCellRenderer.prototype.isShapeEvent=function(t,e){return!0},mxCellRenderer.prototype.isLabelEvent=function(t,e){return!0},mxCellRenderer.prototype.installListeners=function(t){function e(e){var i=t;return(n.dialect!=mxConstants.DIALECT_SVG&&"IMG"==mxEvent.getSource(e).nodeName||mxClient.IS_TOUCH)&&(i=mxEvent.getClientX(e),e=mxEvent.getClientY(e),e=mxUtils.convertPoint(n.container,i,e),i=n.view.getState(n.getCellAt(e.x,e.y))),i}var n=t.view.graph;mxEvent.addGestureListeners(t.shape.node,mxUtils.bind(this,function(e){this.isShapeEvent(t,e)&&n.fireMouseEvent(mxEvent.MOUSE_DOWN,new mxMouseEvent(e,t))}),mxUtils.bind(this,function(i){this.isShapeEvent(t,i)&&n.fireMouseEvent(mxEvent.MOUSE_MOVE,new mxMouseEvent(i,e(i)))}),mxUtils.bind(this,function(i){this.isShapeEvent(t,i)&&n.fireMouseEvent(mxEvent.MOUSE_UP,new mxMouseEvent(i,e(i)))})),n.nativeDblClickEnabled&&mxEvent.addListener(t.shape.node,"dblclick",mxUtils.bind(this,function(e){this.isShapeEvent(t,e)&&(n.dblClick(e,t.cell),mxEvent.consume(e))}))},mxCellRenderer.prototype.redrawLabel=function(t,e){var n,i=t.view.graph,l=this.getLabelValue(t),o=i.isWrapping(t.cell),s=i.isLabelClipped(t.cell),r=t.view.graph.isHtmlLabel(t.cell)||null!=l&&mxUtils.isNode(l)?mxConstants.DIALECT_STRICTHTML:t.view.graph.dialect,a=t.style[mxConstants.STYLE_OVERFLOW]||"visible";null==t.text||t.text.wrap==o&&t.text.clipped==s&&t.text.overflow==a&&t.text.dialect==r||(t.text.destroy(),t.text=null),null==t.text&&null!=l&&(mxUtils.isNode(l)||0<l.length)?this.createLabel(t,l):null==t.text||null!=l&&0!=l.length||(t.text.destroy(),t.text=null),null!=t.text&&(e&&(null!=t.text.lastValue&&this.isTextShapeInvalid(t,t.text)&&(t.text.lastValue=null),t.text.resetStyles(),t.text.apply(t),t.text.valign=i.getVerticalAlign(t)),i=this.getLabelBounds(t),n=this.getTextScale(t),this.resolveColor(t,"color",mxConstants.STYLE_FONTCOLOR),!e&&t.text.value==l&&t.text.isWrapping==o&&t.text.overflow==a&&t.text.isClipping==s&&t.text.scale==n&&t.text.dialect==r&&null!=t.text.bounds&&t.text.bounds.equals(i)||(t.text.dialect=r,t.text.value=l,t.text.bounds=i,t.text.scale=n,t.text.wrap=o,t.text.clipped=s,t.text.overflow=a,l=t.text.node.style.visibility,this.redrawLabelShape(t.text),t.text.node.style.visibility=l))},mxCellRenderer.prototype.isTextShapeInvalid=function(t,e){function n(n,i,l){return"spacingTop"==i||"spacingRight"==i||"spacingBottom"==i||"spacingLeft"==i?parseFloat(e[n])-parseFloat(e.spacing)!=(t.style[i]||l):e[n]!=(t.style[i]||l)}return n("fontStyle",mxConstants.STYLE_FONTSTYLE,mxConstants.DEFAULT_FONTSTYLE)||n("family",mxConstants.STYLE_FONTFAMILY,mxConstants.DEFAULT_FONTFAMILY)||n("size",mxConstants.STYLE_FONTSIZE,mxConstants.DEFAULT_FONTSIZE)||n("color",mxConstants.STYLE_FONTCOLOR,"black")||n("align",mxConstants.STYLE_ALIGN,"")||n("valign",mxConstants.STYLE_VERTICAL_ALIGN,"")||n("spacing",mxConstants.STYLE_SPACING,2)||n("spacingTop",mxConstants.STYLE_SPACING_TOP,0)||n("spacingRight",mxConstants.STYLE_SPACING_RIGHT,0)||n("spacingBottom",mxConstants.STYLE_SPACING_BOTTOM,0)||n("spacingLeft",mxConstants.STYLE_SPACING_LEFT,0)||n("horizontal",mxConstants.STYLE_HORIZONTAL,!0)||n("background",mxConstants.STYLE_LABEL_BACKGROUNDCOLOR)||n("border",mxConstants.STYLE_LABEL_BORDERCOLOR)||n("opacity",mxConstants.STYLE_TEXT_OPACITY,100)||n("textDirection",mxConstants.STYLE_TEXT_DIRECTION,mxConstants.DEFAULT_TEXT_DIRECTION)},mxCellRenderer.prototype.redrawLabelShape=function(t){t.redraw()},mxCellRenderer.prototype.getTextScale=function(t){return t.view.scale},mxCellRenderer.prototype.getLabelBounds=function(t){var e,n=t.view.graph,i=t.view.scale,l=n.getModel().isEdge(t.cell),o=new mxRectangle(t.absoluteOffset.x,t.absoluteOffset.y);return l?(e=t.text.getSpacing(),o.x+=e.x*i,o.y+=e.y*i,null!=(n=n.getCellGeometry(t.cell))&&(o.width=Math.max(0,n.width*i),o.height=Math.max(0,n.height*i))):(t.text.isPaintBoundsInverted()&&(n=o.x,o.x=o.y,o.y=n),o.x+=t.x,o.y+=t.y,o.width=Math.max(1,t.width),o.height=Math.max(1,t.height)),t.text.isPaintBoundsInverted()&&(o.x+=n=(t.width-t.height)/2,o.y-=n,n=o.width,o.width=o.height,o.height=n),null!=t.shape&&(n=mxUtils.getValue(t.style,mxConstants.STYLE_LABEL_POSITION,mxConstants.ALIGN_CENTER),e=mxUtils.getValue(t.style,mxConstants.STYLE_VERTICAL_LABEL_POSITION,mxConstants.ALIGN_MIDDLE),n==mxConstants.ALIGN_CENTER&&e==mxConstants.ALIGN_MIDDLE&&(o=t.shape.getLabelBounds(o))),null!=(n=mxUtils.getValue(t.style,mxConstants.STYLE_LABEL_WIDTH,null))&&(o.width=parseFloat(n)*i),l||this.rotateLabelBounds(t,o),o},mxCellRenderer.prototype.rotateLabelBounds=function(t,e){var n,i,l,o;e.y-=t.text.margin.y*e.height,e.x-=t.text.margin.x*e.width,this.legacySpacing&&("fill"==t.style[mxConstants.STYLE_OVERFLOW]||"width"==t.style[mxConstants.STYLE_OVERFLOW]||"block"==t.style[mxConstants.STYLE_OVERFLOW]&&"1"!=t.style[mxConstants.STYLE_BLOCK_SPACING])||(n=t.view.scale,i=t.text.getSpacing("1"==t.style[mxConstants.STYLE_BLOCK_SPACING]),e.x+=i.x*n,e.y+=i.y*n,i=mxUtils.getValue(t.style,mxConstants.STYLE_LABEL_POSITION,mxConstants.ALIGN_CENTER),l=mxUtils.getValue(t.style,mxConstants.STYLE_VERTICAL_LABEL_POSITION,mxConstants.ALIGN_MIDDLE),o=mxUtils.getValue(t.style,mxConstants.STYLE_LABEL_WIDTH,null),e.width=Math.max(0,e.width-(i==mxConstants.ALIGN_CENTER&&null==o?t.text.spacingLeft*n+t.text.spacingRight*n:0)),e.height=Math.max(0,e.height-(l==mxConstants.ALIGN_MIDDLE?t.text.spacingTop*n+t.text.spacingBottom*n:0))),0!=(l=t.text.getTextRotation())&&null!=t&&t.view.graph.model.isVertex(t.cell)&&(n=t.getCenterX(),i=t.getCenterY(),e.x!=n||e.y!=i)&&(l*=Math.PI/180,n=mxUtils.getRotatedPoint(new mxPoint(e.x,e.y),Math.cos(l),Math.sin(l),new mxPoint(n,i)),e.x=n.x,e.y=n.y)},mxCellRenderer.prototype.redrawCellOverlays=function(t,e){var n,i,l,o;this.createCellOverlays(t),null!=t.overlays&&(n=mxUtils.mod(mxUtils.getValue(t.style,mxConstants.STYLE_ROTATION,0),90),i=mxUtils.toRadians(n),l=Math.cos(i),o=Math.sin(i),t.overlays.visit(function(i,s){var r,a,h=s.overlay.getBounds(t);t.view.graph.getModel().isEdge(t.cell)||null==t.shape||0==n||(r=h.getCenterX(),a=h.getCenterY(),r=(a=mxUtils.getRotatedPoint(new mxPoint(r,a),l,o,new mxPoint(t.getCenterX(),t.getCenterY()))).x,a=a.y,h.x=Math.round(r-h.width/2),h.y=Math.round(a-h.height/2)),!e&&null!=s.bounds&&s.scale==t.view.scale&&s.bounds.equals(h)||(s.bounds=h,s.scale=t.view.scale,s.redraw())}))},mxCellRenderer.prototype.redrawControl=function(t,e){var n,i,l=t.view.graph.getFoldingImage(t);null!=t.control&&null!=l&&(l=this.getControlBounds(t,l.width,l.height),n=this.legacyControlPosition?mxUtils.getValue(t.style,mxConstants.STYLE_ROTATION,0):t.shape.getTextRotation(),i=t.view.scale,!e&&t.control.scale==i&&t.control.bounds.equals(l)&&t.control.rotation==n||(t.control.rotation=n,t.control.bounds=l,t.control.scale=i,t.control.redraw()))},mxCellRenderer.prototype.getControlBounds=function(t,e,n){if(null==t.control)return null;var i,l,o=t.view.scale,s=t.getCenterX(),r=t.getCenterY();return t.view.graph.getModel().isEdge(t.cell)||(s=t.x+e*o,r=t.y+n*o,null==t.shape)||(i=t.shape.getShapeRotation(),this.legacyControlPosition?i=mxUtils.getValue(t.style,mxConstants.STYLE_ROTATION,0):t.shape.isPaintBoundsInverted()&&(s+=l=(t.width-t.height)/2,r-=l),0!=i&&(l=mxUtils.toRadians(i),i=Math.cos(l),l=Math.sin(l),s=(r=mxUtils.getRotatedPoint(new mxPoint(s,r),i,l,new mxPoint(t.getCenterX(),t.getCenterY()))).x,r=r.y)),t.view.graph.getModel().isEdge(t.cell),new mxRectangle(Math.round(s-e/2*o),Math.round(r-n/2*o),Math.round(e*o),Math.round(n*o))},mxCellRenderer.prototype.insertStateAfter=function(t,e,n){for(var i=this.getShapesForState(t),l=0;l<i.length;l++)if(null!=i[l]&&null!=i[l].node){var o=i[l].node.parentNode!=t.view.getDrawPane()&&i[l].node.parentNode!=t.view.getOverlayPane(),s=o?n:e;if(null!=s&&s.nextSibling!=i[l].node)null==s.nextSibling?s.parentNode.appendChild(i[l].node):s.parentNode.insertBefore(i[l].node,s.nextSibling);else if(null==s)if(i[l].node.parentNode==t.view.graph.container){for(s=t.view.canvas;null!=s&&s.parentNode!=t.view.graph.container;)s=s.parentNode;null!=s&&null!=s.nextSibling?s.nextSibling!=i[l].node&&i[l].node.parentNode.insertBefore(i[l].node,s.nextSibling):i[l].node.parentNode.appendChild(i[l].node)}else null!=i[l].node.parentNode&&null!=i[l].node.parentNode.firstChild&&i[l].node.parentNode.firstChild!=i[l].node&&i[l].node.parentNode.insertBefore(i[l].node,i[l].node.parentNode.firstChild);o?n=i[l].node:e=i[l].node}return[e,n]},mxCellRenderer.prototype.getShapesForState=function(t){return[t.shape,t.text,t.control]},mxCellRenderer.prototype.redraw=function(t,e,n){e=this.redrawShape(t,e,n),null==t.shape||null!=n&&!n||(this.redrawLabel(t,e),this.redrawCellOverlays(t,e),this.redrawControl(t,e))},mxCellRenderer.prototype.redrawShape=function(t,e,n){var i=t.view.graph.model,l=!1;return null!=t.shape&&null!=t.shape.style&&null!=t.style&&t.shape.style[mxConstants.STYLE_SHAPE]!=t.style[mxConstants.STYLE_SHAPE]&&(t.shape.destroy(),t.shape=null),null==t.shape&&null!=t.view.graph.container&&t.cell!=t.view.currentRoot&&(i.isVertex(t.cell)||i.isEdge(t.cell))?(t.shape=this.createShape(t),null!=t.shape&&(t.shape.minSvgStrokeWidth=this.minSvgStrokeWidth,t.shape.antiAlias=this.antiAlias,this.createIndicatorShape(t),this.initializeShape(t),this.createCellOverlays(t),this.installListeners(t),t.view.graph.selectionCellsHandler.updateHandler(t))):e||null==t.shape||mxUtils.equalEntries(t.shape.style,t.style)&&!this.checkPlaceholderStyles(t)||(t.shape.resetStyles(),this.configureShape(t),t.view.graph.selectionCellsHandler.updateHandler(t),e=!0),null!=t.shape&&t.shape.indicatorShape!=this.getShape(t.view.graph.getIndicatorShape(t))&&(null!=t.shape.indicator&&(t.shape.indicator.destroy(),t.shape.indicator=null),this.createIndicatorShape(t),null!=t.shape.indicatorShape&&(t.shape.indicator=new t.shape.indicatorShape,t.shape.indicator.dialect=t.shape.dialect,t.shape.indicator.init(t.node),e=!0)),null!=t.shape&&(this.createControl(t),e||this.isShapeInvalid(t,t.shape))&&(null!=t.absolutePoints?(t.shape.points=t.absolutePoints.slice(),t.shape.bounds=null):(t.shape.points=null,t.shape.bounds=new mxRectangle(t.x,t.y,t.width,t.height)),t.shape.scale=t.view.scale,null==n||n?this.doRedrawShape(t):t.shape.updateBoundingBox(),l=!0),l},mxCellRenderer.prototype.doRedrawShape=function(t){t.shape.redraw()},mxCellRenderer.prototype.isShapeInvalid=function(t,e){return null==e.bounds||e.scale!=t.view.scale||null==t.absolutePoints&&!e.bounds.equals(t)||null!=t.absolutePoints&&!mxUtils.equalPoints(e.points,t.absolutePoints)},mxCellRenderer.prototype.destroy=function(t){null!=t.shape&&(null!=t.text&&(t.text.destroy(),t.text=null),null!=t.overlays&&(t.overlays.visit(function(t,e){e.destroy()}),t.overlays=null),null!=t.control&&(t.control.destroy(),t.control=null),t.shape.destroy(),t.shape=null)};var mxEdgeStyle={EntityRelation:function(t,e,n,i,l){var o=t.view,s=o.graph;i=mxUtils.getValue(t.style,mxConstants.STYLE_SEGMENT,mxConstants.ENTITY_SEGMENT)*o.scale;var r,a=(u=t.absolutePoints)[0],h=u[u.length-1],u=!1;if(null!=e&&((r=s.getCellGeometry(e.cell)).relative?u=r.x<=.5:null!=n&&(u=(null!=h?h.x:n.x+n.width)<(null!=a?a:e).x)),null!=a)(e=new mxCellState).x=a.x,e.y=a.y;else{if(null==e)return;var d=mxUtils.getPortConstraints(e,t,!0,mxConstants.DIRECTION_MASK_NONE);d!=mxConstants.DIRECTION_MASK_NONE&&d!=mxConstants.DIRECTION_MASK_WEST+mxConstants.DIRECTION_MASK_EAST&&(u=d==mxConstants.DIRECTION_MASK_WEST)}r=!0,null!=n&&((s=s.getCellGeometry(n.cell)).relative?r=s.x<=.5:null!=e&&(r=(null!=a?a.x:e.x+e.width)<(null!=h?h:n).x)),null!=h?((n=new mxCellState).x=h.x,n.y=h.y):null==n||(d=mxUtils.getPortConstraints(n,t,!1,mxConstants.DIRECTION_MASK_NONE))!=mxConstants.DIRECTION_MASK_NONE&&d!=mxConstants.DIRECTION_MASK_WEST+mxConstants.DIRECTION_MASK_EAST&&(r=d==mxConstants.DIRECTION_MASK_WEST),null!=e&&null!=n&&(t=u?e.x:e.x+e.width,e=o.getRoutingCenterY(e),a=r?n.x:n.x+n.width,n=o.getRoutingCenterY(n),o=new mxPoint(t+(u?-i:i),e),s=new mxPoint(a+(r?-i:i),n),u==r?(i=u?Math.min(t,a)-i:Math.max(t,a)+i,l.push(new mxPoint(i,e)),l.push(new mxPoint(i,n))):(o.x<s.x==u?(i=e+(n-e)/2,l.push(o),l.push(new mxPoint(o.x,i)),l.push(new mxPoint(s.x,i))):l.push(o),l.push(s)))},Loop:function(t,e,n,i,l){var o,s,r,a,h=(n=t.absolutePoints)[n.length-1];if(null!=n[0]&&null!=h){if(null!=i&&0<i.length)for(e=0;e<i.length;e++)n=t.view.transformControlPoint(t,n=i[e]),l.push(new mxPoint(n.x,n.y))}else null!=e&&(a=(h=t.view).graph,null!=(n=null!=i&&0<i.length?i[0]:null)&&(n=h.transformControlPoint(t,n),mxUtils.contains(e,n.x,n.y)&&(n=null)),r=s=o=i=0,a=mxUtils.getValue(t.style,mxConstants.STYLE_SEGMENT,a.gridSize)*h.scale,(t=mxUtils.getValue(t.style,mxConstants.STYLE_DIRECTION,mxConstants.DIRECTION_WEST))==mxConstants.DIRECTION_NORTH||t==mxConstants.DIRECTION_SOUTH?(i=h.getRoutingCenterX(e),o=a):(s=h.getRoutingCenterY(e),r=a),null==n||n.x<e.x||n.x>e.x+e.width?null!=n?(i=n.x,r=Math.max(Math.abs(s-n.y),r)):t==mxConstants.DIRECTION_NORTH?s=e.y-2*o:t==mxConstants.DIRECTION_SOUTH?s=e.y+e.height+2*o:i=t==mxConstants.DIRECTION_EAST?e.x-2*r:e.x+e.width+2*r:null!=n&&(i=h.getRoutingCenterX(e),o=Math.max(Math.abs(i-n.x),r),s=n.y,r=0),l.push(new mxPoint(i-o,s-r)),l.push(new mxPoint(i+o,s+r)))},ElbowConnector:function(t,e,n,i,l){var o,s,r,a=null!=i&&0<i.length?i[0]:null,h=!1,u=!1;null!=e&&null!=n&&(null!=a?(o=Math.min(e.x,n.x),s=Math.max(e.x+e.width,n.x+n.width),u=Math.min(e.y,n.y),r=Math.max(e.y+e.height,n.y+n.height),h=(a=t.view.transformControlPoint(t,a)).y<u||a.y>r,u=a.x<o||a.x>s):(h=(o=Math.max(e.x,n.x))==(s=Math.min(e.x+e.width,n.x+n.width)))||(u=(u=Math.max(e.y,n.y))==(r=Math.min(e.y+e.height,n.y+n.height)))),u||!h&&t.style[mxConstants.STYLE_ELBOW]!=mxConstants.ELBOW_VERTICAL?mxEdgeStyle.SideToSide(t,e,n,i,l):mxEdgeStyle.TopToBottom(t,e,n,i,l)},SideToSide:function(t,e,n,i,l){var o=t.view,s=(r=t.absolutePoints)[0],r=r[r.length-1];null!=(i=null!=i&&0<i.length?i[0]:null)&&(i=o.transformControlPoint(t,i)),null!=s&&((e=new mxCellState).x=s.x,e.y=s.y),null!=r&&((n=new mxCellState).x=r.x,n.y=r.y),null!=e&&null!=n&&(t=Math.max(e.x,n.x),s=Math.min(e.x+e.width,n.x+n.width),t=null!=i?i.x:Math.round(s+(t-s)/2),s=o.getRoutingCenterY(e),o=o.getRoutingCenterY(n),null!=i&&(i.y>=e.y&&i.y<=e.y+e.height&&(s=i.y),i.y>=n.y&&i.y<=n.y+n.height&&(o=i.y)),mxUtils.contains(n,t,s)||mxUtils.contains(e,t,s)||l.push(new mxPoint(t,s)),mxUtils.contains(n,t,o)||mxUtils.contains(e,t,o)||l.push(new mxPoint(t,o)),1==l.length&&(null!=i?mxUtils.contains(n,t,i.y)||mxUtils.contains(e,t,i.y)||l.push(new mxPoint(t,i.y)):(o=Math.max(e.y,n.y),l.push(new mxPoint(t,o+(Math.min(e.y+e.height,n.y+n.height)-o)/2)))))},TopToBottom:function(t,e,n,i,l){var o=t.view,s=(r=t.absolutePoints)[0],r=r[r.length-1];null!=(i=null!=i&&0<i.length?i[0]:null)&&(i=o.transformControlPoint(t,i)),null!=s&&((e=new mxCellState).x=s.x,e.y=s.y),null!=r&&((n=new mxCellState).x=r.x,n.y=r.y),null!=e&&null!=n&&(s=Math.max(e.y,n.y),r=Math.min(e.y+e.height,n.y+n.height),t=o.getRoutingCenterX(e),null!=i&&i.x>=e.x&&i.x<=e.x+e.width&&(t=i.x),s=null!=i?i.y:Math.round(r+(s-r)/2),mxUtils.contains(n,t,s)||mxUtils.contains(e,t,s)||l.push(new mxPoint(t,s)),t=null!=i&&i.x>=n.x&&i.x<=n.x+n.width?i.x:o.getRoutingCenterX(n),mxUtils.contains(n,t,s)||mxUtils.contains(e,t,s)||l.push(new mxPoint(t,s)),1==l.length&&(null!=i&&1==l.length?mxUtils.contains(n,i.x,s)||mxUtils.contains(e,i.x,s)||l.push(new mxPoint(i.x,s)):(o=Math.max(e.x,n.x),l.push(new mxPoint(o+(Math.min(e.x+e.width,n.x+n.width)-o)/2,s)))))},SegmentConnector:function(t,e,n,i,l){function o(e){return e.x=Math.round(e.x*t.view.scale*10)/10,e.y=Math.round(e.y*t.view.scale*10)/10,(null==h||1<=Math.abs(h.x-e.x)||Math.abs(h.y-e.y)>=Math.max(1,t.view.scale))&&(l.push(e),h=e),h}var s=mxEdgeStyle.scalePointArray(t.absolutePoints,t.view.scale),r=mxEdgeStyle.scaleCellState(e,t.view.scale),a=mxEdgeStyle.scaleCellState(n,t.view.scale),h=0<l.length?l[0]:null,u=!0,d=null,c=s[0];null==c&&null!=r?c=new mxPoint(t.view.getRoutingCenterX(r),t.view.getRoutingCenterY(r)):null!=c&&(c=c.clone());var p=s.length-1;if(null!=i&&0<i.length){for(var m=[],g=0;g<i.length;g++)null!=(d=t.view.transformControlPoint(t,i[g],!0))&&m.push(d);if(0==m.length)return;null!=c&&null!=m[0]&&(Math.abs(m[0].x-c.x)<1&&(m[0].x=c.x),Math.abs(m[0].y-c.y)<1&&(m[0].y=c.y));var x=s[p];null!=x&&null!=m[m.length-1]&&(Math.abs(m[m.length-1].x-x.x)<1&&(m[m.length-1].x=x.x),Math.abs(m[m.length-1].y-x.y)<1&&(m[m.length-1].y=x.y));var y=r,f=!1;for(f=d=m[0],null!=(i=s[0])&&(y=null),g=0;g<2;g++){var v=null!=i&&i.x==f.x,b=null!=i&&i.y==f.y,C=null!=y&&f.y>=y.y&&f.y<=y.y+y.height,E=(y=null!=y&&f.x>=y.x&&f.x<=y.x+y.width,f=b||null==i&&C,v||null==i&&y);if(0!=g||!(f&&E||v&&b)){if(null!=i&&!b&&!v&&(C||y)){u=!C;break}if(E||f){u=f,1==g&&(u=0==m.length%2?f:E);break}}y=a,null!=(i=s[p])&&(y=null),f=m[m.length-1],v&&b&&(m=m.slice(1))}for(u&&(null!=s[0]&&s[0].y!=d.y||null==s[0]&&null!=r&&(d.y<r.y||d.y>r.y+r.height))?o(new mxPoint(c.x,d.y)):!u&&(null!=s[0]&&s[0].x!=d.x||null==s[0]&&null!=r&&(d.x<r.x||d.x>r.x+r.width))&&o(new mxPoint(d.x,c.y)),u?c.y=d.y:c.x=d.x,g=0;g<m.length;g++)d=m[g],(u=!u)?c.y=d.y:c.x=d.x,o(c.clone())}else d=c,u=!0;if(null!=(c=null==(c=s[p])&&null!=a?new mxPoint(t.view.getRoutingCenterX(a),t.view.getRoutingCenterY(a)):c)&&null!=d&&(u&&(null!=s[p]&&s[p].y!=d.y||null==s[p]&&null!=a&&(d.y<a.y||d.y>a.y+a.height))?o(new mxPoint(c.x,d.y)):!u&&(null!=s[p]&&s[p].x!=d.x||null==s[p]&&null!=a&&(d.x<a.x||d.x>a.x+a.width))&&o(new mxPoint(d.x,c.y))),null==s[0]&&null!=e)for(;1<l.length&&null!=l[1]&&mxUtils.contains(e,l[1].x,l[1].y);)l.splice(1,1);if(null==s[p]&&null!=n)for(;1<l.length&&null!=l[l.length-1]&&mxUtils.contains(n,l[l.length-1].x,l[l.length-1].y);)l.splice(l.length-1,1);null!=x&&null!=l[l.length-1]&&Math.abs(x.x-l[l.length-1].x)<=1&&Math.abs(x.y-l[l.length-1].y)<=1&&(l.splice(l.length-1,1),null!=l[l.length-1]&&(Math.abs(l[l.length-1].x-x.x)<1&&(l[l.length-1].x=x.x),Math.abs(l[l.length-1].y-x.y)<1&&(l[l.length-1].y=x.y)))},orthBuffer:10,orthPointsFallback:!0,dirVectors:[[-1,0],[0,-1],[1,0],[0,1],[-1,0],[0,-1],[1,0]],wayPoints1:[[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]],routePatterns:[[[513,2308,2081,2562],[513,1090,514,2184,2114,2561],[513,1090,514,2564,2184,2562],[513,2308,2561,1090,514,2568,2308]],[[514,1057,513,2308,2081,2562],[514,2184,2114,2561],[514,2184,2562,1057,513,2564,2184],[514,1057,513,2568,2308,2561]],[[1090,514,1057,513,2308,2081,2562],[2114,2561],[1090,2562,1057,513,2564,2184],[1090,514,1057,513,2308,2561,2568]],[[2081,2562],[1057,513,1090,514,2184,2114,2561],[1057,513,1090,514,2184,2562,2564],[1057,2561,1090,514,2568,2308]]],inlineRoutePatterns:[[null,[2114,2568],null,null],[null,[514,2081,2114,2568],null,null],[null,[2114,2561],null,null],[[2081,2562],[1057,2114,2568],[2184,2562],null]],vertexSeperations:[],limits:[[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0]],LEFT_MASK:32,TOP_MASK:64,RIGHT_MASK:128,BOTTOM_MASK:256,LEFT:1,TOP:2,RIGHT:4,BOTTOM:8,SIDE_MASK:480,CENTER_MASK:512,SOURCE_MASK:1024,TARGET_MASK:2048,VERTEX_MASK:3072,getJettySize:function(t,e){var n=mxUtils.getValue(t.style,e?mxConstants.STYLE_SOURCE_JETTY_SIZE:mxConstants.STYLE_TARGET_JETTY_SIZE,mxUtils.getValue(t.style,mxConstants.STYLE_JETTY_SIZE,mxEdgeStyle.orthBuffer));return"auto"==n?mxUtils.getValue(t.style,e?mxConstants.STYLE_STARTARROW:mxConstants.STYLE_ENDARROW,mxConstants.NONE)!=mxConstants.NONE?(n=mxUtils.getNumber(t.style,e?mxConstants.STYLE_STARTSIZE:mxConstants.STYLE_ENDSIZE,mxConstants.DEFAULT_MARKERSIZE),Math.max(2,Math.ceil((n+mxEdgeStyle.orthBuffer)/mxEdgeStyle.orthBuffer))*mxEdgeStyle.orthBuffer):2*mxEdgeStyle.orthBuffer:n},scalePointArray:function(t,e){var n,i=[];if(null!=t)for(var l=0;l<t.length;l++)null!=t[l]?(n=new mxPoint(Math.round(t[l].x/e*10)/10,Math.round(t[l].y/e*10)/10),i[l]=n):i[l]=null;else i=null;return i},scaleCellState:function(t,e){var n;return null!=t?(n=t.clone()).setRect(Math.round(t.x/e*10)/10,Math.round(t.y/e*10)/10,Math.round(t.width/e*10)/10,Math.round(t.height/e*10)/10):n=null,n},OrthConnector:function(t,e,n,i,l){var o=t.view.graph,s=null!=a&&o.getModel().isEdge(a.cell),r=null!=h&&o.getModel().isEdge(h.cell),a=(o=mxEdgeStyle.scalePointArray(t.absolutePoints,t.view.scale),mxEdgeStyle.scaleCellState(e,t.view.scale)),h=mxEdgeStyle.scaleCellState(n,t.view.scale),u=o[0],d=o[o.length-1],c=(null!=a?a:u).x,p=(null!=a?a:u).y,m=null!=a?a.width:0,g=null!=a?a.height:0,x=(null!=h?h:d).x,y=(null!=h?h:d).y,f=null!=h?h.width:0,v=null!=h?h.height:0,b=(o=mxEdgeStyle.getJettySize(t,!0),mxEdgeStyle.getJettySize(t,!1));null!=a&&h==a&&(o=b=Math.max(o,b));var C,E=b+o,S=!1;if((S=null!=u&&null!=d?(S=d.x-u.x)*S+(C=d.y-u.y)*C<E*E:S)||mxEdgeStyle.orthPointsFallback&&null!=i&&0<i.length||s||r)mxEdgeStyle.SegmentConnector(t,e,n,i,l);else{for(n=[mxConstants.DIRECTION_MASK_ALL,mxConstants.DIRECTION_MASK_ALL],null!=a&&(n[0]=mxUtils.getPortConstraints(a,t,!0,mxConstants.DIRECTION_MASK_ALL),0!=(e=mxUtils.getValue(a.style,mxConstants.STYLE_ROTATION,0))&&(c=(e=mxUtils.getBoundingBox(new mxRectangle(c,p,m,g),e)).x,p=e.y,m=e.width,g=e.height)),null!=h&&(n[1]=mxUtils.getPortConstraints(h,t,!1,mxConstants.DIRECTION_MASK_ALL),0!=(e=mxUtils.getValue(h.style,mxConstants.STYLE_ROTATION,0))&&(x=(e=mxUtils.getBoundingBox(new mxRectangle(x,y,f,v),e)).x,y=e.y,f=e.width,v=e.height)),e=[0,0],c=[[c,p,m,g],[x,y,f,v]],b=[o,b],S=0;S<2;S++)mxEdgeStyle.limits[S][1]=c[S][0]-b[S],mxEdgeStyle.limits[S][2]=c[S][1]-b[S],mxEdgeStyle.limits[S][4]=c[S][0]+c[S][2]+b[S],mxEdgeStyle.limits[S][8]=c[S][1]+c[S][3]+b[S];for(C=(b=c[0][1]+c[0][3]/2)-(p=c[1][1]+c[1][3]/2),(S=c[0][0]+c[0][2]/2-(c[1][0]+c[1][2]/2))<(b=0)?b=C<0?2:1:C<=0&&(b=0==S?2:3),(p=null)!=a&&(p=u),a=[[.5,.5],[.5,.5]],S=0;S<2;S++)null!=p&&(a[S][0]=(p.x-c[S][0])/c[S][2],Math.abs(p.x-c[S][0])<=1?e[S]=mxConstants.DIRECTION_MASK_WEST:Math.abs(p.x-c[S][0]-c[S][2])<=1&&(e[S]=mxConstants.DIRECTION_MASK_EAST),a[S][1]=(p.y-c[S][1])/c[S][3],Math.abs(p.y-c[S][1])<=1?e[S]=mxConstants.DIRECTION_MASK_NORTH:Math.abs(p.y-c[S][1]-c[S][3])<=1&&(e[S]=mxConstants.DIRECTION_MASK_SOUTH)),p=null!=h?d:null;for(S=c[0][1]-(c[1][1]+c[1][3]),d=c[0][0]-(c[1][0]+c[1][2]),p=c[1][1]-(c[0][1]+c[0][3]),m=c[1][0]-(c[0][0]+c[0][2]),mxEdgeStyle.vertexSeperations[1]=Math.max(d-E,0),mxEdgeStyle.vertexSeperations[2]=Math.max(S-E,0),mxEdgeStyle.vertexSeperations[4]=Math.max(p-E,0),mxEdgeStyle.vertexSeperations[3]=Math.max(m-E,0),E=[],u=[],(h=[])[0]=m<=d?mxConstants.DIRECTION_MASK_WEST:mxConstants.DIRECTION_MASK_EAST,u[0]=p<=S?mxConstants.DIRECTION_MASK_NORTH:mxConstants.DIRECTION_MASK_SOUTH,h[1]=mxUtils.reversePortConstraints(h[0]),u[1]=mxUtils.reversePortConstraints(u[0]),d=m<=d?d:m,p=p<=S?S:p,g=!(m=[[0,0],[0,0]]),S=0;S<2;S++)0==e[S]&&(0==(h[S]&n[S])&&(h[S]=mxUtils.reversePortConstraints(h[S])),0==(u[S]&n[S])&&(u[S]=mxUtils.reversePortConstraints(u[S])),m[S][0]=u[S],m[S][1]=h[S]);for(0<p&&0<d&&(0<(h[0]&n[0])&&0<(u[1]&n[1])?(m[0][0]=h[0],m[0][1]=u[0],m[1][0]=u[1],m[1][1]=h[1],g=!0):0<(u[0]&n[0])&&0<(h[1]&n[1])&&(m[0][0]=u[0],m[0][1]=h[0],m[1][0]=h[1],m[1][1]=u[1],g=!0)),0<p&&!g&&(m[0][0]=u[0],m[0][1]=h[0],m[1][0]=u[1],m[1][1]=h[1],g=!0),0<d&&!g&&(m[0][0]=h[0],m[0][1]=u[0],m[1][0]=h[1],m[1][1]=u[1]),S=0;S<2;S++)0==e[S]&&(0==(m[S][0]&n[S])&&(m[S][0]=m[S][1]),E[S]=m[S][0]&n[S],E[S]|=(m[S][1]&n[S])<<8,E[S]|=(m[1-S][S]&n[S])<<16,E[S]|=(m[1-S][1-S]&n[S])<<24,0==(15&E[S])&&(E[S]<<=8),0==(3840&E[S])&&(E[S]=15&E[S]|E[S]>>8),0==(983040&E[S])&&(E[S]=65535&E[S]|(251658240&E[S])>>8),e[S]=15&E[S],n[S]==mxConstants.DIRECTION_MASK_WEST||n[S]==mxConstants.DIRECTION_MASK_NORTH||n[S]==mxConstants.DIRECTION_MASK_EAST||n[S]==mxConstants.DIRECTION_MASK_SOUTH)&&(e[S]=n[S]);switch(n=e[0]==mxConstants.DIRECTION_MASK_EAST?3:e[0],E=e[1]==mxConstants.DIRECTION_MASK_EAST?3:e[1],(n-=b)<1&&(n+=4),(E-=b)<1&&(E+=4),n=mxEdgeStyle.routePatterns[n-1][E-1],mxEdgeStyle.wayPoints1[0][0]=c[0][0],mxEdgeStyle.wayPoints1[0][1]=c[0][1],e[0]){case mxConstants.DIRECTION_MASK_WEST:mxEdgeStyle.wayPoints1[0][0]-=o,mxEdgeStyle.wayPoints1[0][1]+=a[0][1]*c[0][3];break;case mxConstants.DIRECTION_MASK_SOUTH:mxEdgeStyle.wayPoints1[0][0]+=a[0][0]*c[0][2],mxEdgeStyle.wayPoints1[0][1]+=c[0][3]+o;break;case mxConstants.DIRECTION_MASK_EAST:mxEdgeStyle.wayPoints1[0][0]+=c[0][2]+o,mxEdgeStyle.wayPoints1[0][1]+=a[0][1]*c[0][3];break;case mxConstants.DIRECTION_MASK_NORTH:mxEdgeStyle.wayPoints1[0][0]+=a[0][0]*c[0][2],mxEdgeStyle.wayPoints1[0][1]-=o}for(h=E=(o=0)<(e[0]&(mxConstants.DIRECTION_MASK_EAST|mxConstants.DIRECTION_MASK_WEST))?0:1,S=0;S<n.length;S++)g=(u=15&n[S])==mxConstants.DIRECTION_MASK_EAST?3:u,4<(g+=b)&&(g-=4),d=mxEdgeStyle.dirVectors[g-1],(u=0<g%2?0:1)!=E&&(mxEdgeStyle.wayPoints1[++o][0]=mxEdgeStyle.wayPoints1[o-1][0],mxEdgeStyle.wayPoints1[o][1]=mxEdgeStyle.wayPoints1[o-1][1]),x=0<(n[S]&mxEdgeStyle.TARGET_MASK),p=(n[S]&mxEdgeStyle.SIDE_MASK)>>5,15<(p<<=b)&&(p>>=4),m=0<(n[S]&mxEdgeStyle.CENTER_MASK),((y=0<(n[S]&mxEdgeStyle.SOURCE_MASK))||x)&&p<9?(g=y?0:1,p=m&&0==u?c[g][0]+a[g][0]*c[g][2]:m?c[g][1]+a[g][1]*c[g][3]:mxEdgeStyle.limits[g][p],0==u?0<(p=(p-mxEdgeStyle.wayPoints1[o][0])*d[0])&&(mxEdgeStyle.wayPoints1[o][0]+=d[0]*p):0<(p=(p-mxEdgeStyle.wayPoints1[o][1])*d[1])&&(mxEdgeStyle.wayPoints1[o][1]+=d[1]*p)):m&&(mxEdgeStyle.wayPoints1[o][0]+=d[0]*Math.abs(mxEdgeStyle.vertexSeperations[g]/2),mxEdgeStyle.wayPoints1[o][1]+=d[1]*Math.abs(mxEdgeStyle.vertexSeperations[g]/2)),0<o&&mxEdgeStyle.wayPoints1[o][u]==mxEdgeStyle.wayPoints1[o-1][u]?o--:E=u;for(S=0;S<=o&&(S!=o||((0<(e[1]&(mxConstants.DIRECTION_MASK_EAST|mxConstants.DIRECTION_MASK_WEST))?0:1)==h?0:1)==(o+1)%2);S++)l.push(new mxPoint(Math.round(mxEdgeStyle.wayPoints1[S][0]*t.view.scale*10)/10,Math.round(mxEdgeStyle.wayPoints1[S][1]*t.view.scale*10)/10));for(t=1;t<l.length;)null==l[t-1]||null==l[t]||l[t-1].x!=l[t].x||l[t-1].y!=l[t].y?t++:l.splice(t,1)}},getRoutePattern:function(t,e,n,i){var l=t[0]==mxConstants.DIRECTION_MASK_EAST?3:t[0];return t=t[1]==mxConstants.DIRECTION_MASK_EAST?3:t[1],(l-=e)<1&&(l+=4),(t-=e)<1&&(t+=4),e=routePatterns[l-1][t-1],0!=n&&0!=i||null==inlineRoutePatterns[l-1][t-1]?e:inlineRoutePatterns[l-1][t-1]}},mxStyleRegistry={values:[],putValue:function(t,e){mxStyleRegistry.values[t]=e},getValue:function(t){return mxStyleRegistry.values[t]},getName:function(t){for(var e in mxStyleRegistry.values)if(mxStyleRegistry.values[e]==t)return e;return null}},t;function mxGraphView(t){this.graph=t,this.translate=new mxPoint,this.graphBounds=new mxRectangle,this.states=new mxDictionary}function mxCurrentRootChange(t,e){if(this.view=t,this.previous=this.root=e,this.isUp=null==e,!this.isUp)for(var n=this.view.currentRoot,i=this.view.graph.getModel();null!=n;){if(n==e){this.isUp=!0;break}n=i.getParent(n)}}function mxGraph(t,e,n,i){this.mouseListeners=null,this.renderHint=n,this.dialect=mxClient.IS_SVG?mxConstants.DIALECT_SVG:n==mxConstants.RENDERING_HINT_FASTEST?mxConstants.DIALECT_STRICTHTML:n==mxConstants.RENDERING_HINT_FASTER?mxConstants.DIALECT_PREFERHTML:mxConstants.DIALECT_MIXEDHTML,this.model=null!=e?e:new mxGraphModel,this.multiplicities=[],this.imageBundles=[],this.cellRenderer=this.createCellRenderer(),this.setSelectionModel(this.createSelectionModel()),this.setStylesheet(null!=i?i:this.createStylesheet()),this.view=this.createGraphView(),this.graphModelChangeListener=mxUtils.bind(this,function(t,e){this.graphModelChanged(e.getProperty("edit").changes)}),this.model.addListener(mxEvent.CHANGE,this.graphModelChangeListener),this.createHandlers(),null!=t&&this.init(t),this.view.revalidate()}function mxCellOverlay(t,e,n,i,l,o){this.image=t,this.tooltip=e,this.align=null!=n?n:this.align,this.verticalAlign=null!=i?i:this.verticalAlign,this.offset=null!=l?l:new mxPoint,this.cursor=null!=o?o:"help"}function mxOutline(t,e){this.source=t,null!=e&&this.init(e)}function mxMultiplicity(t,e,n,i,l,o,s,r,a,h){this.source=t,this.type=e,this.attr=n,this.value=i,this.min=null!=l?l:0,this.max=null!=o?o:"n",this.validNeighbors=s,this.countError=mxResources.get(r)||r,this.typeError=mxResources.get(a)||a,this.validNeighborsAllowed=null==h||h}function mxLayoutManager(t){this.undoHandler=mxUtils.bind(this,function(t,e){this.isEnabled()&&this.beforeUndo(e.getProperty("edit"))}),this.moveHandler=mxUtils.bind(this,function(t,e){this.isEnabled()&&this.cellsMoved(e.getProperty("cells"),e.getProperty("event"))}),this.resizeHandler=mxUtils.bind(this,function(t,e){this.isEnabled()&&this.cellsResized(e.getProperty("cells"),e.getProperty("bounds"),e.getProperty("previous"))}),this.setGraph(t)}function mxSwimlaneManager(t,e,n,i){this.horizontal=null==e||e,this.addEnabled=null==n||n,this.resizeEnabled=null==i||i,this.addHandler=mxUtils.bind(this,function(t,e){this.isEnabled()&&this.isAddEnabled()&&this.cellsAdded(e.getProperty("cells"))}),this.resizeHandler=mxUtils.bind(this,function(t,e){this.isEnabled()&&this.isResizeEnabled()&&this.cellsResized(e.getProperty("cells"))}),this.setGraph(t)}function mxTemporaryCellStates(t,e,n,i,l,o){e=null!=e?e:1,this.view=t,this.oldValidateCellState=t.validateCellState,this.oldBounds=t.getGraphBounds(),this.oldStates=t.getStates(),this.oldScale=t.getScale(),this.oldDoRedrawShape=t.graph.cellRenderer.doRedrawShape;var s=this;if(null!=l&&(t.graph.cellRenderer.doRedrawShape=function(e){var n=e.shape.paint;e.shape.paint=function(t){var i=l(e);null!=i&&t.setLink(i,null!=o?o(e):null),n.apply(this,arguments),null!=i&&t.setLink(null)},s.oldDoRedrawShape.apply(t.graph.cellRenderer,arguments),e.shape.paint=n}),t.validateCellState=function(e,n){return null==e||null==i||i(e)?s.oldValidateCellState.apply(t,arguments):null},t.setStates(new mxDictionary),t.setScale(e),null!=n){t.resetValidationState(),e=null;for(var r=0;r<n.length;r++){var a=t.getBoundingBox(t.validateCellState(t.validateCell(n[r])));null==e?e=a:e.add(a)}t.setGraphBounds(e||new mxRectangle)}}function mxCellStatePreview(t){this.deltas=new mxDictionary,this.graph=t}function mxConnectionConstraint(t,e,n,i,l){this.point=t,this.perimeter=null==e||e,this.name=n,this.dx=i||0,this.dy=l||0}function mxGraphHandler(t){this.graph=t,this.graph.addMouseListener(this),this.panHandler=mxUtils.bind(this,function(){this.suspended||(this.updatePreview(),this.updateHint())}),this.graph.addListener(mxEvent.PAN,this.panHandler),this.escapeHandler=mxUtils.bind(this,function(t,e){this.reset()}),this.graph.addListener(mxEvent.ESCAPE,this.escapeHandler),this.refreshHandler=mxUtils.bind(this,function(t,e){this.refreshThread&&window.clearTimeout(this.refreshThread),this.refreshThread=window.setTimeout(mxUtils.bind(this,function(){var t,e;(this.refreshThread=null)==this.first||this.suspended||(t=this.currentDx,e=this.currentDy,this.currentDy=this.currentDx=0,this.updatePreview(),this.bounds=this.graph.getView().getBounds(this.cells),this.pBounds=this.getPreviewBounds(this.cells),null!=this.pBounds||this.livePreviewUsed?(this.currentDx=t,this.currentDy=e,this.updatePreview(),this.updateHint(),this.livePreviewUsed&&(this.setHandlesVisibleForCells(this.graph.selectionCellsHandler.getHandledSelectionCells(),!1,!0),this.updatePreview())):this.reset())}),0)}),this.graph.getModel().addListener(mxEvent.CHANGE,this.refreshHandler),this.graph.addListener(mxEvent.REFRESH,this.refreshHandler),this.keyHandler=mxUtils.bind(this,function(t){null==this.graph.container||"hidden"==this.graph.container.style.visibility||null==this.first||this.suspended||(t=this.graph.isCloneEvent(t)&&this.graph.isCellsCloneable()&&this.isCloneEnabled())!=this.cloning&&(this.cloning=t,this.checkPreview(),this.updatePreview())}),mxEvent.addListener(document,"keydown",this.keyHandler),mxEvent.addListener(document,"keyup",this.keyHandler)}function mxPanningHandler(t){null!=t&&(this.graph=t,this.graph.addMouseListener(this),this.forcePanningHandler=mxUtils.bind(this,function(t,e){var n=e.getProperty("eventName");e=e.getProperty("event"),n==mxEvent.MOUSE_DOWN&&this.isForcePanningEvent(e)&&(this.start(e),this.active=!0,this.fireEvent(new mxEventObject(mxEvent.PAN_START,"event",e)),e.consume())}),this.graph.addListener(mxEvent.FIRE_MOUSE_EVENT,this.forcePanningHandler),this.gestureHandler=mxUtils.bind(this,function(t,e){this.isPinchEnabled()&&(e=e.getProperty("event"),mxEvent.isConsumed(e)||"gesturestart"!=e.type?"gestureend"==e.type&&null!=this.initialScale&&(this.initialScale=null):(this.initialScale=this.graph.view.scale,this.active||null==this.mouseDownEvent||(this.start(this.mouseDownEvent),this.mouseDownEvent=null)),null!=this.initialScale&&this.zoomGraph(e))}),this.graph.addListener(mxEvent.GESTURE,this.gestureHandler),this.mouseUpListener=mxUtils.bind(this,function(){this.active&&this.reset()}),mxEvent.addListener(document,"mouseup",this.mouseUpListener),mxEvent.addListener(document,"mouseleave",this.mouseUpListener))}function mxPopupMenuHandler(t,e){null!=t&&(this.graph=t,this.factoryMethod=e,this.graph.addMouseListener(this),this.gestureHandler=mxUtils.bind(this,function(t,e){this.inTolerance=!1}),this.graph.addListener(mxEvent.GESTURE,this.gestureHandler),this.init())}function mxCellMarker(t,e,n,i){mxEventSource.call(this),null!=t&&(this.graph=t,this.validColor=null!=e?e:mxConstants.DEFAULT_VALID_COLOR,this.invalidColor=null!=n?n:mxConstants.DEFAULT_INVALID_COLOR,this.hotspot=null!=i?i:mxConstants.DEFAULT_HOTSPOT,this.highlight=new mxCellHighlight(t))}function mxSelectionCellsHandler(t){mxEventSource.call(this),this.graph=t,this.handlers=new mxDictionary,this.graph.addMouseListener(this),this.refreshHandler=mxUtils.bind(this,function(t,e){this.isEnabled()&&this.refresh()}),this.graph.getSelectionModel().addListener(mxEvent.CHANGE,this.refreshHandler),this.graph.getModel().addListener(mxEvent.CHANGE,this.refreshHandler),this.graph.getView().addListener(mxEvent.SCALE,this.refreshHandler),this.graph.getView().addListener(mxEvent.TRANSLATE,this.refreshHandler),this.graph.getView().addListener(mxEvent.SCALE_AND_TRANSLATE,this.refreshHandler),this.graph.getView().addListener(mxEvent.DOWN,this.refreshHandler),this.graph.getView().addListener(mxEvent.UP,this.refreshHandler)}function mxConnectionHandler(t,e){mxEventSource.call(this),null!=t&&(this.graph=t,this.factoryMethod=e,this.init(),this.escapeHandler=mxUtils.bind(this,function(t,e){this.reset()}),this.graph.addListener(mxEvent.ESCAPE,this.escapeHandler))}function mxConstraintHandler(t){this.graph=t,this.resetHandler=mxUtils.bind(this,function(t,e){null!=this.currentFocus&&null==this.graph.view.getState(this.currentFocus.cell)?this.reset():this.redraw()}),this.graph.model.addListener(mxEvent.CHANGE,this.resetHandler),this.graph.view.addListener(mxEvent.SCALE_AND_TRANSLATE,this.resetHandler),this.graph.view.addListener(mxEvent.TRANSLATE,this.resetHandler),this.graph.view.addListener(mxEvent.SCALE,this.resetHandler),this.graph.addListener(mxEvent.ROOT,this.resetHandler)}function mxRubberband(t){null!=t&&(this.graph=t,this.graph.addMouseListener(this),this.forceRubberbandHandler=mxUtils.bind(this,function(t,e){var n=e.getProperty("eventName"),i=e.getProperty("event");n==mxEvent.MOUSE_DOWN&&this.isForceRubberbandEvent(i)&&(n=mxUtils.getOffset(this.graph.container),(e=mxUtils.getScrollOrigin(this.graph.container)).x-=n.x,e.y-=n.y,this.start(i.getX()+e.x,i.getY()+e.y),i.consume(!1))}),this.graph.addListener(mxEvent.FIRE_MOUSE_EVENT,this.forceRubberbandHandler),this.panHandler=mxUtils.bind(this,function(){this.repaint()}),this.graph.addListener(mxEvent.PAN,this.panHandler),this.gestureHandler=mxUtils.bind(this,function(t,e){null!=this.first&&this.reset()}),this.graph.addListener(mxEvent.GESTURE,this.gestureHandler),mxClient.IS_IE&&mxEvent.addListener(window,"unload",mxUtils.bind(this,function(){this.destroy()})))}function mxHandle(t,e,n,i){this.graph=t.view.graph,this.state=t,this.cursor=null!=e?e:this.cursor,this.image=null!=n?n:this.image,this.shape=null!=i?i:null,this.init()}function mxVertexHandler(t){null!=t&&(this.state=t,this.init(),this.escapeHandler=mxUtils.bind(this,function(t,e){this.livePreview&&null!=this.index&&(this.state.view.graph.cellRenderer.redraw(this.state,!0),this.state.view.invalidate(this.state.cell),this.state.invalid=!1,this.state.view.validate()),this.reset()}),this.state.view.graph.addListener(mxEvent.ESCAPE,this.escapeHandler))}function mxEdgeHandler(t){null!=t&&null!=t.shape&&(this.state=t,this.init(),this.escapeHandler=mxUtils.bind(this,function(e,n){var i=null!=this.index;this.reset(),i&&this.graph.cellRenderer.redraw(this.state,!1,t.view.isRendering())}),this.state.view.graph.addListener(mxEvent.ESCAPE,this.escapeHandler))}function mxElbowEdgeHandler(t){mxEdgeHandler.call(this,t)}function mxEdgeSegmentHandler(t){mxEdgeHandler.call(this,t)}function mxKeyHandler(t,e){null!=t&&(this.graph=t,this.target=e||document.documentElement,this.normalKeys=[],this.shiftKeys=[],this.controlKeys=[],this.controlShiftKeys=[],this.keydownHandler=mxUtils.bind(this,function(t){this.keyDown(t)}),mxEvent.addListener(this.target,"keydown",this.keydownHandler),mxClient.IS_IE&&mxEvent.addListener(window,"unload",mxUtils.bind(this,function(){this.destroy()})))}function mxTooltipHandler(t,e){null!=t&&(this.graph=t,this.delay=e||500,this.graph.addMouseListener(this))}function mxCellTracker(t,e,n){mxCellMarker.call(this,t,e),this.graph.addMouseListener(this),null!=n&&(this.getCell=n),mxClient.IS_IE&&mxEvent.addListener(window,"unload",mxUtils.bind(this,function(){this.destroy()}))}function mxCellHighlight(t,e,n,i){null!=t&&(this.graph=t,this.highlightColor=null!=e?e:mxConstants.DEFAULT_VALID_COLOR,this.strokeWidth=null!=n?n:mxConstants.HIGHLIGHT_STROKEWIDTH,this.dashed=null!=i&&i,this.opacity=mxConstants.HIGHLIGHT_OPACITY,this.repaintHandler=mxUtils.bind(this,function(){var t;null!=this.state&&(null==(t=this.graph.view.getState(this.state.cell))?this.hide():(this.state=t,this.repaint()))}),this.graph.getView().addListener(mxEvent.SCALE,this.repaintHandler),this.graph.getView().addListener(mxEvent.TRANSLATE,this.repaintHandler),this.graph.getView().addListener(mxEvent.SCALE_AND_TRANSLATE,this.repaintHandler),this.graph.getModel().addListener(mxEvent.CHANGE,this.repaintHandler),this.resetHandler=mxUtils.bind(this,function(){this.hide()}),this.graph.getView().addListener(mxEvent.DOWN,this.resetHandler),this.graph.getView().addListener(mxEvent.UP,this.resetHandler))}function mxCodec(t){this.document=t||mxUtils.createXmlDocument(),this.objects=[]}function mxObjectCodec(t,e,n,i){for(var l in this.template=t,this.exclude=null!=e?e:[],this.idrefs=null!=n?n:[],this.mapping=null!=i?i:[],this.reverse={},this.mapping)this.reverse[this.mapping[l]]=l}mxStyleRegistry.putValue(mxConstants.EDGESTYLE_ELBOW,mxEdgeStyle.ElbowConnector),mxStyleRegistry.putValue(mxConstants.EDGESTYLE_ENTITY_RELATION,mxEdgeStyle.EntityRelation),mxStyleRegistry.putValue(mxConstants.EDGESTYLE_LOOP,mxEdgeStyle.Loop),mxStyleRegistry.putValue(mxConstants.EDGESTYLE_SIDETOSIDE,mxEdgeStyle.SideToSide),mxStyleRegistry.putValue(mxConstants.EDGESTYLE_TOPTOBOTTOM,mxEdgeStyle.TopToBottom),mxStyleRegistry.putValue(mxConstants.EDGESTYLE_ORTHOGONAL,mxEdgeStyle.OrthConnector),mxStyleRegistry.putValue(mxConstants.EDGESTYLE_SEGMENT,mxEdgeStyle.SegmentConnector),mxStyleRegistry.putValue(mxConstants.PERIMETER_ELLIPSE,mxPerimeter.EllipsePerimeter),mxStyleRegistry.putValue(mxConstants.PERIMETER_RECTANGLE,mxPerimeter.RectanglePerimeter),mxStyleRegistry.putValue(mxConstants.PERIMETER_RHOMBUS,mxPerimeter.RhombusPerimeter),mxStyleRegistry.putValue(mxConstants.PERIMETER_TRIANGLE,mxPerimeter.TrianglePerimeter),mxStyleRegistry.putValue(mxConstants.PERIMETER_HEXAGON,mxPerimeter.HexagonPerimeter),mxGraphView.prototype=new mxEventSource,mxGraphView.prototype.constructor=mxGraphView,mxGraphView.prototype.EMPTY_POINT=new mxPoint,mxGraphView.prototype.doneResource="none"!=mxClient.language?"done":"",mxGraphView.prototype.updatingDocumentResource="none"!=mxClient.language?"updatingDocument":"",mxGraphView.prototype.allowEval=!1,mxGraphView.prototype.captureDocumentGesture=!0,mxGraphView.prototype.rendering=!0,mxGraphView.prototype.graph=null,mxGraphView.prototype.currentRoot=null,mxGraphView.prototype.graphBounds=null,mxGraphView.prototype.scale=1,mxGraphView.prototype.translate=null,mxGraphView.prototype.states=null,mxGraphView.prototype.updateStyle=!1,mxGraphView.prototype.lastNode=null,mxGraphView.prototype.lastHtmlNode=null,mxGraphView.prototype.lastForegroundNode=null,mxGraphView.prototype.lastForegroundHtmlNode=null,mxGraphView.prototype.getGraphBounds=function(){return this.graphBounds},mxGraphView.prototype.setGraphBounds=function(t){this.graphBounds=t},mxGraphView.prototype.getBounds=function(t){var e,n=null;if(null!=t&&0<t.length)for(var i=this.graph.getModel(),l=0;l<t.length;l++)!i.isVertex(t[l])&&!i.isEdge(t[l])||null!=(e=this.getState(t[l]))&&(null==n?n=mxRectangle.fromRectangle(e):n.add(e));return n},mxGraphView.prototype.setCurrentRoot=function(t){var e,n;return this.currentRoot!=t&&((e=new mxCurrentRootChange(this,t)).execute(),(n=new mxUndoableEdit(this,!0)).add(e),this.fireEvent(new mxEventObject(mxEvent.UNDO,"edit",n)),this.graph.sizeDidChange()),t},mxGraphView.prototype.scaleAndTranslate=function(t,e,n){var i=this.scale,l=new mxPoint(this.translate.x,this.translate.y);this.scale==t&&this.translate.x==e&&this.translate.y==n||(this.scale=t,this.translate.x=e,this.translate.y=n,this.isEventsEnabled()&&this.viewStateChanged()),this.fireEvent(new mxEventObject(mxEvent.SCALE_AND_TRANSLATE,"scale",t,"previousScale",i,"translate",this.translate,"previousTranslate",l))},mxGraphView.prototype.getScale=function(){return this.scale},mxGraphView.prototype.setScale=function(t){var e=this.scale;this.scale!=t&&(this.scale=t,this.isEventsEnabled()&&this.viewStateChanged()),this.fireEvent(new mxEventObject(mxEvent.SCALE,"scale",t,"previousScale",e))},mxGraphView.prototype.getTranslate=function(){return this.translate},mxGraphView.prototype.setTranslate=function(t,e){var n=new mxPoint(this.translate.x,this.translate.y);this.translate.x==t&&this.translate.y==e||(this.translate.x=t,this.translate.y=e,this.isEventsEnabled()&&this.viewStateChanged()),this.fireEvent(new mxEventObject(mxEvent.TRANSLATE,"translate",this.translate,"previousTranslate",n))},mxGraphView.prototype.viewStateChanged=function(){this.revalidate(),this.graph.sizeDidChange()},mxGraphView.prototype.refresh=function(){null!=this.currentRoot&&this.clear(),this.revalidate()},mxGraphView.prototype.revalidate=function(){this.invalidate(),this.validate()},mxGraphView.prototype.clear=function(t,e,n){var i=this.graph.getModel();if(t=t||i.getRoot(),e=null!=e&&e,n=null==n||n,this.removeState(t),n&&(e||t!=this.currentRoot)){n=i.getChildCount(t);for(var l=0;l<n;l++)this.clear(i.getChildAt(t,l),e)}else this.invalidate(t)},mxGraphView.prototype.invalidate=function(t,e,n){var i=this.graph.getModel();if(t=t||i.getRoot(),e=null==e||e,n=null==n||n,null!=(o=this.getState(t))&&(o.invalid=!0),!t.invalidating){if(t.invalidating=!0,e)for(var l=i.getChildCount(t),o=0;o<l;o++){var s=i.getChildAt(t,o);this.invalidate(s,e,n)}if(n)for(l=i.getEdgeCount(t),o=0;o<l;o++)this.invalidate(i.getEdgeAt(t,o),e,n);delete t.invalidating}},mxGraphView.prototype.validate=function(t){var e=mxLog.enter("mxGraphView.validate");window.status=mxResources.get(this.updatingDocumentResource)||this.updatingDocumentResource,this.resetValidationState();var n=null;null==this.canvas||null!=this.textDiv||8!=document.documentMode||mxClient.IS_EM||(this.placeholder=document.createElement("div"),this.placeholder.style.position="absolute",this.placeholder.style.width=this.canvas.clientWidth+"px",this.placeholder.style.height=this.canvas.clientHeight+"px",this.canvas.parentNode.appendChild(this.placeholder),n=this.drawPane.style.display,this.canvas.style.display="none",this.textDiv=document.createElement("div"),this.textDiv.style.position="absolute",this.textDiv.style.whiteSpace="nowrap",this.textDiv.style.visibility="hidden",this.textDiv.style.display="inline-block",this.textDiv.style.zoom="1",document.body.appendChild(this.textDiv)),t=this.getBoundingBox(this.validateCellState(this.validateCell(t||(null!=this.currentRoot?this.currentRoot:this.graph.getModel().getRoot())))),this.setGraphBounds(null!=t?t:this.getEmptyBounds()),this.validateBackground(),null!=n&&(this.canvas.style.display=n,this.textDiv.parentNode.removeChild(this.textDiv),null!=this.placeholder&&this.placeholder.parentNode.removeChild(this.placeholder),this.textDiv=null),this.resetValidationState(),window.status=mxResources.get(this.doneResource)||this.doneResource,mxLog.leave("mxGraphView.validate",e)},mxGraphView.prototype.getEmptyBounds=function(){return new mxRectangle(this.translate.x*this.scale,this.translate.y*this.scale)},mxGraphView.prototype.getBoundingBox=function(t,e){e=null==e||e;var n=null;if(null!=t&&(null!=t.shape&&null!=t.shape.boundingBox&&(n=t.shape.boundingBox.clone()),null!=t.text&&null!=t.text.boundingBox&&(null!=n?n.add(t.text.boundingBox):n=t.text.boundingBox.clone()),e))for(var i=this.graph.getModel(),l=i.getChildCount(t.cell),o=0;o<l;o++){var s=this.getBoundingBox(this.getState(i.getChildAt(t.cell,o)));null!=s&&(null==n?n=s:n.add(s))}return n},mxGraphView.prototype.createBackgroundPageShape=function(t){return new mxRectangleShape(t,"white","black")},mxGraphView.prototype.validateBackground=function(){this.validateBackgroundImage(),this.validateBackgroundPage()},mxGraphView.prototype.validateBackgroundImage=function(){var t,e=this.graph.getBackgroundImage();null!=e?(null!=this.backgroundImage&&this.backgroundImage.image==e.src||(null!=this.backgroundImage&&this.backgroundImage.destroy(),t=new mxRectangle(0,0,1,1),this.backgroundImage=new mxImageShape(t,e.src),this.backgroundImage.dialect=this.graph.dialect,this.backgroundImage.init(this.backgroundPane),this.backgroundImage.redraw(),8!=document.documentMode||mxClient.IS_EM||mxEvent.addGestureListeners(this.backgroundImage.node,mxUtils.bind(this,function(t){this.graph.fireMouseEvent(mxEvent.MOUSE_DOWN,new mxMouseEvent(t))}),mxUtils.bind(this,function(t){this.graph.fireMouseEvent(mxEvent.MOUSE_MOVE,new mxMouseEvent(t))}),mxUtils.bind(this,function(t){this.graph.fireMouseEvent(mxEvent.MOUSE_UP,new mxMouseEvent(t))}))),this.redrawBackgroundImage(this.backgroundImage,e)):null!=this.backgroundImage&&(this.backgroundImage.destroy(),this.backgroundImage=null)},mxGraphView.prototype.validateBackgroundPage=function(){var t;this.graph.pageVisible?(t=this.getBackgroundPageBounds(),null==this.backgroundPageShape?(this.backgroundPageShape=this.createBackgroundPageShape(t),this.backgroundPageShape.scale=this.scale,this.backgroundPageShape.isShadow=!0,this.backgroundPageShape.dialect=this.graph.dialect,this.backgroundPageShape.init(this.backgroundPane),this.backgroundPageShape.redraw(),this.graph.nativeDblClickEnabled&&mxEvent.addListener(this.backgroundPageShape.node,"dblclick",mxUtils.bind(this,function(t){this.graph.dblClick(t)})),mxEvent.addGestureListeners(this.backgroundPageShape.node,mxUtils.bind(this,function(t){this.graph.fireMouseEvent(mxEvent.MOUSE_DOWN,new mxMouseEvent(t))}),mxUtils.bind(this,function(t){null!=this.graph.tooltipHandler&&this.graph.tooltipHandler.isHideOnHover()&&this.graph.tooltipHandler.hide(),this.graph.isMouseDown&&!mxEvent.isConsumed(t)&&this.graph.fireMouseEvent(mxEvent.MOUSE_MOVE,new mxMouseEvent(t))}),mxUtils.bind(this,function(t){this.graph.fireMouseEvent(mxEvent.MOUSE_UP,new mxMouseEvent(t))}))):(this.backgroundPageShape.scale=this.scale,this.backgroundPageShape.bounds=t,this.backgroundPageShape.redraw())):null!=this.backgroundPageShape&&(this.backgroundPageShape.destroy(),this.backgroundPageShape=null)},mxGraphView.prototype.getBackgroundPageBounds=function(){var t=this.graph.pageFormat,e=this.scale*this.graph.pageScale;return new mxRectangle(this.scale*this.translate.x,this.scale*this.translate.y,t.width*e,t.height*e)},mxGraphView.prototype.redrawBackgroundImage=function(t,e){t.scale=this.scale,t.bounds.x=this.scale*this.translate.x,t.bounds.y=this.scale*this.translate.y,t.bounds.width=this.scale*e.width,t.bounds.height=this.scale*e.height,t.redraw()},mxGraphView.prototype.validateCell=function(t,e){if(null!=t)if(e=(null==e||e)&&this.graph.isCellVisible(t),null==this.getState(t,e)||e)for(var n=this.graph.getModel(),i=n.getChildCount(t),l=0;l<i;l++)this.validateCell(n.getChildAt(t,l),e&&(!this.isCellCollapsed(t)||t==this.currentRoot));else this.removeState(t);return t},mxGraphView.prototype.validateCellState=function(t,e){e=null==e||e;var n=null;if(null!=t&&null!=(n=this.getState(t))){var i=this.graph.getModel();if(n.invalid&&(n.invalid=!1,null!=n.style&&!n.invalidStyle||(n.style=this.graph.getCellStyle(n.cell),n.invalidStyle=!1),t!=this.currentRoot&&this.validateCellState(i.getParent(t),!1),n.setVisibleTerminalState(this.validateCellState(this.getVisibleTerminal(t,!0),!1),!0),n.setVisibleTerminalState(this.validateCellState(this.getVisibleTerminal(t,!1),!1),!1),this.updateCellState(n),t==this.currentRoot||n.invalid||(this.graph.cellRenderer.redraw(n,!1,this.isRendering()),n.updateCachedBounds())),e&&!n.invalid){null!=n.shape&&this.stateValidated(n);for(var l=i.getChildCount(t),o=0;o<l;o++)this.validateCellState(i.getChildAt(t,o))}}return n},mxGraphView.prototype.updateCellState=function(t){var e,n,i,l;t.absoluteOffset.x=0,t.absoluteOffset.y=0,t.origin.x=0,t.origin.y=0,t.length=0,t.cell!=this.currentRoot&&(e=this.graph.getModel(),null!=(n=this.getState(e.getParent(t.cell)))&&n.cell!=this.currentRoot&&(t.origin.x+=n.origin.x,t.origin.y+=n.origin.y),null!=(i=this.graph.getChildOffsetForCell(t.cell))&&(t.origin.x+=i.x,t.origin.y+=i.y),null!=(l=this.graph.getCellGeometry(t.cell))&&(e.isEdge(t.cell)||(i=null!=l.offset?l.offset:this.EMPTY_POINT,l.relative&&null!=n?e.isEdge(n.cell)?null!=(i=this.getPoint(n,l))&&(t.origin.x+=i.x/this.scale-n.origin.x-this.translate.x,t.origin.y+=i.y/this.scale-n.origin.y-this.translate.y):(t.origin.x+=l.x*n.unscaledWidth+i.x,t.origin.y+=l.y*n.unscaledHeight+i.y):(t.absoluteOffset.x=this.scale*i.x,t.absoluteOffset.y=this.scale*i.y,t.origin.x+=l.x,t.origin.y+=l.y)),t.x=this.scale*(this.translate.x+t.origin.x),t.y=this.scale*(this.translate.y+t.origin.y),t.width=this.scale*l.width,t.unscaledWidth=l.width,t.height=this.scale*l.height,t.unscaledHeight=l.height,e.isVertex(t.cell)&&this.updateVertexState(t,l),e.isEdge(t.cell)&&this.updateEdgeState(t,l))),t.updateCachedBounds()},mxGraphView.prototype.isCellCollapsed=function(t){return this.graph.isCellCollapsed(t)},mxGraphView.prototype.updateVertexState=function(t,e){var n,i=this.graph.getModel(),l=this.getState(i.getParent(t.cell));!e.relative||null==l||i.isEdge(l.cell)||0!=(n=mxUtils.toRadians(l.style[mxConstants.STYLE_ROTATION]||"0"))&&(i=Math.cos(n),n=Math.sin(n),e=new mxPoint(t.getCenterX(),t.getCenterY()),l=new mxPoint(l.getCenterX(),l.getCenterY()),l=mxUtils.getRotatedPoint(e,i,n,l),t.x=l.x-t.width/2,t.y=l.y-t.height/2),this.updateVertexLabelOffset(t)},mxGraphView.prototype.updateEdgeState=function(t,e){var n=t.getVisibleTerminalState(!0),i=t.getVisibleTerminalState(!1);null!=this.graph.model.getTerminal(t.cell,!0)&&null==n||null==n&&null==e.getTerminalPoint(!0)||null!=this.graph.model.getTerminal(t.cell,!1)&&null==i||null==i&&null==e.getTerminalPoint(!1)?this.clear(t.cell,!0):(this.updateFixedTerminalPoints(t,n,i),this.updatePoints(t,e.points,n,i),this.updateFloatingTerminalPoints(t,n,i),n=t.absolutePoints,t.cell!=this.currentRoot&&(null==n||n.length<2||null==n[0]||null==n[n.length-1])?this.clear(t.cell,!0):(this.updateEdgeBounds(t),this.updateEdgeLabelOffset(t)))},mxGraphView.prototype.updateVertexLabelOffset=function(t){var e,n,i=mxUtils.getValue(t.style,mxConstants.STYLE_LABEL_POSITION,mxConstants.ALIGN_CENTER);i==mxConstants.ALIGN_LEFT?(i=null!=(i=mxUtils.getValue(t.style,mxConstants.STYLE_LABEL_WIDTH,null))?i*this.scale:t.width,t.absoluteOffset.x-=i):i==mxConstants.ALIGN_RIGHT?t.absoluteOffset.x+=t.width:i==mxConstants.ALIGN_CENTER&&null!=(i=mxUtils.getValue(t.style,mxConstants.STYLE_LABEL_WIDTH,null))&&(n=0,(e=mxUtils.getValue(t.style,mxConstants.STYLE_ALIGN,mxConstants.ALIGN_CENTER))==mxConstants.ALIGN_CENTER?n=.5:e==mxConstants.ALIGN_RIGHT&&(n=1),0!=n&&(t.absoluteOffset.x-=(i*this.scale-t.width)*n)),(i=mxUtils.getValue(t.style,mxConstants.STYLE_VERTICAL_LABEL_POSITION,mxConstants.ALIGN_MIDDLE))==mxConstants.ALIGN_TOP?t.absoluteOffset.y-=t.height:i==mxConstants.ALIGN_BOTTOM&&(t.absoluteOffset.y+=t.height)},mxGraphView.prototype.resetValidationState=function(){this.lastForegroundHtmlNode=this.lastForegroundNode=this.lastHtmlNode=this.lastNode=null},mxGraphView.prototype.stateValidated=function(t){var e=this.graph.getModel().isEdge(t.cell)&&this.graph.keepEdgesInForeground||this.graph.getModel().isVertex(t.cell)&&this.graph.keepEdgesInBackground;t=this.graph.cellRenderer.insertStateAfter(t,e&&this.lastForegroundNode||this.lastNode,e&&this.lastForegroundHtmlNode||this.lastHtmlNode),e?(this.lastForegroundHtmlNode=t[1],this.lastForegroundNode=t[0]):(this.lastHtmlNode=t[1],this.lastNode=t[0])},mxGraphView.prototype.updateFixedTerminalPoints=function(t,e,n){this.updateFixedTerminalPoint(t,e,!0,this.graph.getConnectionConstraint(t,e,!0)),this.updateFixedTerminalPoint(t,n,!1,this.graph.getConnectionConstraint(t,n,!1))},mxGraphView.prototype.updateFixedTerminalPoint=function(t,e,n,i){t.setAbsoluteTerminalPoint(this.getFixedTerminalPoint(t,e,n,i),n)},mxGraphView.prototype.getFixedTerminalPoint=function(t,e,n,i){var l,o=null;return null==(o=null!=i?this.graph.getConnectionPoint(e,i,!1):o)&&null==e&&(e=this.scale,i=this.translate,l=t.origin,null!=(o=this.graph.getCellGeometry(t.cell).getTerminalPoint(n))&&(o=new mxPoint(e*(i.x+o.x+l.x),e*(i.y+o.y+l.y)))),o},mxGraphView.prototype.updateBoundsFromStencil=function(t){var e,n=null;return null!=t&&null!=t.shape&&null!=t.shape.stencil&&"fixed"==t.shape.stencil.aspect&&(n=mxRectangle.fromRectangle(t),e=t.shape.stencil.computeAspect(t.style,t.x,t.y,t.width,t.height),t.setRect(e.x,e.y,t.shape.stencil.w0*e.width,t.shape.stencil.h0*e.height)),n},mxGraphView.prototype.updatePoints=function(t,e,n,i){if(null!=t){var l=[];l.push(t.absolutePoints[0]);var o=this.getEdgeStyle(t,e,n,i);if(null!=o){n=this.getTerminalPort(t,n,!0),i=this.getTerminalPort(t,i,!1);var s=this.updateBoundsFromStencil(n),r=this.updateBoundsFromStencil(i);o(t,n,i,e,l),null!=s&&n.setRect(s.x,s.y,s.width,s.height),null!=r&&i.setRect(r.x,r.y,r.width,r.height)}else if(null!=e)for(o=0;o<e.length;o++)null!=e[o]&&(n=mxUtils.clone(e[o]),l.push(this.transformControlPoint(t,n)));l.push((e=t.absolutePoints)[e.length-1]),t.absolutePoints=l}},mxGraphView.prototype.transformControlPoint=function(t,e,n){return null!=t&&null!=e?new mxPoint((n=n?1:this.scale)*(e.x+this.translate.x+(t=t.origin).x),n*(e.y+this.translate.y+t.y)):null},mxGraphView.prototype.isLoopStyleEnabled=function(t,e,n,i){var l=this.graph.getConnectionConstraint(t,n,!0),o=this.graph.getConnectionConstraint(t,i,!1);return!(!(null==e||e.length<2)||mxUtils.getValue(t.style,mxConstants.STYLE_ORTHOGONAL_LOOP,!1)&&(null!=l&&null!=l.point||null!=o&&null!=o.point))&&null!=n&&n==i},mxGraphView.prototype.getEdgeStyle=function(t,e,n,i){return"function"==typeof(t="string"==typeof(t=this.isLoopStyleEnabled(t,e,n,i)?mxUtils.getValue(t.style,mxConstants.STYLE_LOOP,this.graph.defaultLoopStyle):mxUtils.getValue(t.style,mxConstants.STYLE_NOEDGESTYLE,!1)?null:t.style[mxConstants.STYLE_EDGE])?e=null==(e=mxStyleRegistry.getValue(t))&&this.isAllowEval()?mxUtils.eval(t):e:t)?t:null},mxGraphView.prototype.updateFloatingTerminalPoints=function(t,e,n){var i=t.absolutePoints,l=i[0];null==i[i.length-1]&&null!=n&&this.updateFloatingTerminalPoint(t,n,e,!1),null==l&&null!=e&&this.updateFloatingTerminalPoint(t,e,n,!0)},mxGraphView.prototype.updateFloatingTerminalPoint=function(t,e,n,i){t.setAbsoluteTerminalPoint(this.getFloatingTerminalPoint(t,e,n,i),i)},mxGraphView.prototype.getFloatingTerminalPoint=function(t,e,n,i){e=this.getTerminalPort(t,e,i);var l=this.getNextPoint(t,n,i),o=this.graph.isOrthogonal(t);n=mxUtils.toRadians(Number(e.style[mxConstants.STYLE_ROTATION]||"0"));var s,r,a=new mxPoint(e.getCenterX(),e.getCenterY());return 0!=n&&(s=Math.cos(-n),r=Math.sin(-n),l=mxUtils.getRotatedPoint(l,s,r,a)),s=parseFloat(t.style[mxConstants.STYLE_PERIMETER_SPACING]||0),s+=parseFloat(t.style[i?mxConstants.STYLE_SOURCE_PERIMETER_SPACING:mxConstants.STYLE_TARGET_PERIMETER_SPACING]||0),t=this.getPerimeterPoint(e,l,0==n&&o,s),0!=n&&(s=Math.cos(n),r=Math.sin(n),t=mxUtils.getRotatedPoint(t,s,r,a)),t},mxGraphView.prototype.getTerminalPort=function(t,e,n){return null!=(t=mxUtils.getValue(t.style,n?mxConstants.STYLE_SOURCE_PORT:mxConstants.STYLE_TARGET_PORT))&&null!=(t=this.getState(this.graph.getModel().getCell(t)))&&(e=t),e},mxGraphView.prototype.getPerimeterPoint=function(t,e,n,i){var l,o,s=null;return null!=t&&(null!=(l=this.getPerimeterFunction(t))&&null!=e&&(0<(i=this.getPerimeterBounds(t,i)).width||0<i.height)&&(s=new mxPoint(e.x,e.y),o=e=!1,this.graph.model.isVertex(t.cell)&&(e=1==mxUtils.getValue(t.style,mxConstants.STYLE_FLIPH,0),o=1==mxUtils.getValue(t.style,mxConstants.STYLE_FLIPV,0),null!=t.shape&&null!=t.shape.stencil&&(e=1==mxUtils.getValue(t.style,"stencilFlipH",0)||e,o=1==mxUtils.getValue(t.style,"stencilFlipV",0)||o),e&&(s.x=2*i.getCenterX()-s.x),o&&(s.y=2*i.getCenterY()-s.y)),null!=(s=l(i,t,s,n))&&(e&&(s.x=2*i.getCenterX()-s.x),o&&(s.y=2*i.getCenterY()-s.y))),null==s&&(s=this.getPoint(t))),s},mxGraphView.prototype.getRoutingCenterX=function(t){var e=null!=t.style&&parseFloat(t.style[mxConstants.STYLE_ROUTING_CENTER_X])||0;return t.getCenterX()+e*t.width},mxGraphView.prototype.getRoutingCenterY=function(t){var e=null!=t.style&&parseFloat(t.style[mxConstants.STYLE_ROUTING_CENTER_Y])||0;return t.getCenterY()+e*t.height},mxGraphView.prototype.getPerimeterBounds=function(t,e){return e=null!=e?e:0,null!=t&&(e+=parseFloat(t.style[mxConstants.STYLE_PERIMETER_SPACING]||0)),t.getPerimeterBounds(e*this.scale)},mxGraphView.prototype.getPerimeterFunction=function(t){var e;return"function"==typeof(t="string"==typeof(t=t.style[mxConstants.STYLE_PERIMETER])?e=null==(e=mxStyleRegistry.getValue(t))&&this.isAllowEval()?mxUtils.eval(t):e:t)?t:null},mxGraphView.prototype.getNextPoint=function(t,e,n){var i=null;return null!=(t=t.absolutePoints)&&2<=t.length&&(i=t.length,i=t[n?Math.min(1,i-1):Math.max(0,i-2)]),null==i&&null!=e?new mxPoint(e.getCenterX(),e.getCenterY()):i},mxGraphView.prototype.getVisibleTerminal=function(t,e){for(var n=this.graph.getModel(),i=n.getTerminal(t,e),l=i;null!=i&&i!=this.currentRoot;)this.graph.isCellVisible(l)&&!this.isCellCollapsed(i)||(l=i),i=n.getParent(i);return null==l||n.contains(l)&&n.getParent(l)!=n.getRoot()&&l!=this.currentRoot?l:null},mxGraphView.prototype.updateEdgeBounds=function(t){var e,n=t.absolutePoints;(s=n[0]).x!=(l=n[n.length-1]).x||s.y!=l.y?(e=l.x-s.x,i=l.y-s.y,t.terminalDistance=Math.sqrt(e*e+i*i)):t.terminalDistance=0;var i,l=0,o=[];if(null!=(i=s)){for(var s,r=i.y,a=s=i.x,h=r,u=1;u<n.length;u++){var d=n[u];null!=d&&(e=i.x-d.x,i=i.y-d.y,e=Math.sqrt(e*e+i*i),o.push(e),l+=e,i=d,s=Math.min(i.x,s),r=Math.min(i.y,r),a=Math.max(i.x,a),h=Math.max(i.y,h))}t.length=l,t.segments=o,t.x=s,t.y=r,t.width=Math.max(1,a-s),t.height=Math.max(1,h-r)}},mxGraphView.prototype.getPoint=function(t,e){var n=t.getCenterX(),i=t.getCenterY();if(null==t.segments||null!=e&&!e.relative)null!=e&&null!=(l=e.offset)&&(n+=l.x,i+=l.y);else{for(var l,o=t.absolutePoints.length,s=Math.round((.5+(null!=e?e.x/2:0))*t.length),r=t.segments[0],a=0,h=1;s>=Math.round(a+r)&&h<o-1;)a+=r,r=t.segments[h++];o=0==r?0:(s-a)/r,s=t.absolutePoints[h-1],h=t.absolutePoints[h],null!=s&&null!=h&&(a=n=i=0,null!=e&&(i=e.y,null!=(l=e.offset)&&(n=l.x,a=l.y)),l=h.x-s.x,h=h.y-s.y,n=s.x+l*o+((0==r?0:h/r)*i+n)*this.scale,i=s.y+h*o-((0==r?0:l/r)*i-a)*this.scale)}return new mxPoint(n,i)},mxGraphView.prototype.getRelativePoint=function(t,e,n){if(null!=(l=this.graph.getModel().getGeometry(t.cell))){var i=t.absolutePoints.length;if(l.relative&&1<i){for(var l=t.length,o=t.segments,s=t.absolutePoints[0],r=t.absolutePoints[1],a=mxUtils.ptSegDistSq(s.x,s.y,r.x,r.y,e,n),h=0,u=0,d=0,c=2;c<i;c++)(s=mxUtils.ptSegDistSq((s=r).x,s.y,(r=t.absolutePoints[c]).x,r.y,e,n))<=a&&(a=s,u=c-1,h=d+=o[c-2]);return i=o[u],a=(r=t.absolutePoints[u+1]).x,o=(a=(t=(s=t.absolutePoints[u]).x-a)-(e-a))*t+(o=(u=s.y-(o=r.y))-(n-o))*u,i<(t=Math.sqrt(o<=0?0:o*o/(t*t+u*u)))&&(t=i),i=Math.sqrt(mxUtils.ptSegDistSq(s.x,s.y,r.x,r.y,e,n)),new mxPoint((l/2-h-t)/l*-2,(i=-1==mxUtils.relativeCcw(s.x,s.y,r.x,r.y,e,n)?-i:i)/this.scale)}}return new mxPoint},mxGraphView.prototype.updateEdgeLabelOffset=function(t){var e,n,i,l,o,s=t.absolutePoints;t.absoluteOffset.x=t.getCenterX(),t.absoluteOffset.y=t.getCenterY(),null!=s&&0<s.length&&null!=t.segments&&((o=this.graph.getCellGeometry(t.cell)).relative?null!=(e=this.getPoint(t,o))&&(t.absoluteOffset=e):(n=s[s.length-1],null!=(e=s[0])&&null!=n&&(s=n.x-e.x,i=n.y-e.y,l=n=0,null!=(o=o.offset)&&(n=o.x,l=o.y),o=e.y+i/2+l*this.scale,t.absoluteOffset.x=e.x+s/2+n*this.scale,t.absoluteOffset.y=o)))},mxGraphView.prototype.getState=function(t,e){e=e||!1;var n=null;return null!=t&&(n=this.states.get(t),e&&(null==n||this.updateStyle)&&this.graph.isCellVisible(t)&&(null==n?(n=this.createState(t),this.states.put(t,n)):n.style=this.graph.getCellStyle(t))),n},mxGraphView.prototype.isRendering=function(){return this.rendering},mxGraphView.prototype.setRendering=function(t){this.rendering=t},mxGraphView.prototype.isAllowEval=function(){return this.allowEval},mxGraphView.prototype.setAllowEval=function(t){this.allowEval=t},mxGraphView.prototype.getStates=function(){return this.states},mxGraphView.prototype.setStates=function(t){this.states=t},mxGraphView.prototype.getCellStates=function(t){if(null==t)return this.states;for(var e=[],n=0;n<t.length;n++){var i=this.getState(t[n]);null!=i&&e.push(i)}return e},mxGraphView.prototype.removeState=function(t){var e=null;return null!=t&&null!=(e=this.states.remove(t))&&(this.graph.cellRenderer.destroy(e),e.invalid=!0,e.destroy()),e},mxGraphView.prototype.createState=function(t){return new mxCellState(this,t,this.graph.getCellStyle(t))},mxGraphView.prototype.getCanvas=function(){return this.canvas},mxGraphView.prototype.getBackgroundPane=function(){return this.backgroundPane},mxGraphView.prototype.getDrawPane=function(){return this.drawPane},mxGraphView.prototype.getOverlayPane=function(){return this.overlayPane},mxGraphView.prototype.getDecoratorPane=function(){return this.decoratorPane},mxGraphView.prototype.isContainerEvent=function(t){return(t=mxEvent.getSource(t))==this.graph.container||t.parentNode==this.backgroundPane||null!=t.parentNode&&t.parentNode.parentNode==this.backgroundPane||t==this.canvas.parentNode||t==this.canvas||t==this.backgroundPane||t==this.drawPane||t==this.overlayPane||t==this.decoratorPane},mxGraphView.prototype.isScrollEvent=function(t){var e=mxUtils.getOffset(this.graph.container);t=new mxPoint(t.clientX-e.x,t.clientY-e.y);var n=this.graph.container.clientWidth;return n<(e=this.graph.container.offsetWidth)&&t.x>n+2&&t.x<=e||(n=this.graph.container.clientHeight)<(e=this.graph.container.offsetHeight)&&t.y>n+2&&t.y<=e},mxGraphView.prototype.init=function(){this.installListeners(),this.graph.dialect==mxConstants.DIALECT_SVG?this.createSvg():this.createHtml()},mxGraphView.prototype.installListeners=function(){var t,e=this.graph,n=e.container;null!=n&&(mxClient.IS_TOUCH&&(mxEvent.addListener(n,"gesturestart",mxUtils.bind(this,function(t){e.fireGestureEvent(t),mxEvent.consume(t)})),mxEvent.addListener(n,"gesturechange",mxUtils.bind(this,function(t){e.fireGestureEvent(t),mxEvent.consume(t)})),mxEvent.addListener(n,"gestureend",mxUtils.bind(this,function(t){e.fireGestureEvent(t),mxEvent.consume(t)}))),t=null,mxEvent.addGestureListeners(n,mxUtils.bind(this,function(n){!this.isContainerEvent(n)||(mxClient.IS_IE||mxClient.IS_IE11||mxClient.IS_GC||mxClient.IS_OP||mxClient.IS_SF)&&this.isScrollEvent(n)||(e.fireMouseEvent(mxEvent.MOUSE_DOWN,new mxMouseEvent(n)),t=n.pointerId)}),mxUtils.bind(this,function(n){!this.isContainerEvent(n)||null!=t&&n.pointerId!=t||e.fireMouseEvent(mxEvent.MOUSE_MOVE,new mxMouseEvent(n))}),mxUtils.bind(this,function(n){this.isContainerEvent(n)&&e.fireMouseEvent(mxEvent.MOUSE_UP,new mxMouseEvent(n)),t=null})),mxEvent.addListener(n,"dblclick",mxUtils.bind(this,function(t){this.isContainerEvent(t)&&e.dblClick(t)})),e.addMouseListener({mouseDown:function(t,n){e.popupMenuHandler.hideMenu()},mouseMove:function(){},mouseUp:function(){}}),this.moveHandler=mxUtils.bind(this,function(t){var i;null!=e.tooltipHandler&&e.tooltipHandler.isHideOnHover()&&e.tooltipHandler.hide(),this.captureDocumentGesture&&e.isMouseDown&&null!=e.container&&!this.isContainerEvent(t)&&"none"!=e.container.style.display&&"hidden"!=e.container.style.visibility&&!mxEvent.isConsumed(t)&&e.fireMouseEvent(mxEvent.MOUSE_MOVE,new mxMouseEvent(t,(i=t,t=null,mxClient.IS_TOUCH&&(t=mxEvent.getClientX(i),i=mxEvent.getClientY(i),i=mxUtils.convertPoint(n,t,i),t=e.view.getState(e.getCellAt(i.x,i.y))),t)))}),this.endHandler=mxUtils.bind(this,function(t){this.captureDocumentGesture&&e.isMouseDown&&null!=e.container&&!this.isContainerEvent(t)&&"none"!=e.container.style.display&&"hidden"!=e.container.style.visibility&&e.fireMouseEvent(mxEvent.MOUSE_UP,new mxMouseEvent(t))}),mxEvent.addGestureListeners(document,null,this.moveHandler,this.endHandler))},mxGraphView.prototype.createHtml=function(){var t=this.graph.container;null!=t&&(this.canvas=this.createHtmlPane("100%","100%"),this.canvas.style.overflow="hidden",this.backgroundPane=this.createHtmlPane("1px","1px"),this.drawPane=this.createHtmlPane("1px","1px"),this.overlayPane=this.createHtmlPane("1px","1px"),this.decoratorPane=this.createHtmlPane("1px","1px"),this.canvas.appendChild(this.backgroundPane),this.canvas.appendChild(this.drawPane),this.canvas.appendChild(this.overlayPane),this.canvas.appendChild(this.decoratorPane),t.appendChild(this.canvas),this.updateContainerStyle(t))},mxGraphView.prototype.updateHtmlCanvasSize=function(t,e){var n;null!=this.graph.container&&(n=this.graph.container.offsetHeight,this.canvas.style.width=this.graph.container.offsetWidth<t?t+"px":"100%",this.canvas.style.height=n<e?e+"px":"100%")},mxGraphView.prototype.createHtmlPane=function(t,e){var n=document.createElement("DIV");return null!=t&&null!=e?(n.style.position="absolute",n.style.left="0px",n.style.top="0px",n.style.width=t,n.style.height=e):n.style.position="relative",n},mxGraphView.prototype.createSvg=function(){var t=this.graph.container;this.canvas=document.createElementNS(mxConstants.NS_SVG,"g"),this.backgroundPane=document.createElementNS(mxConstants.NS_SVG,"g"),this.canvas.appendChild(this.backgroundPane),this.drawPane=document.createElementNS(mxConstants.NS_SVG,"g"),this.canvas.appendChild(this.drawPane),this.overlayPane=document.createElementNS(mxConstants.NS_SVG,"g"),this.canvas.appendChild(this.overlayPane),this.decoratorPane=document.createElementNS(mxConstants.NS_SVG,"g"),this.canvas.appendChild(this.decoratorPane);var e=document.createElementNS(mxConstants.NS_SVG,"svg");e.style.left="0px",e.style.top="0px",e.style.width="100%",e.style.height="100%",e.style.display="block",e.appendChild(this.canvas),(mxClient.IS_IE||mxClient.IS_IE11)&&(e.style.overflow="hidden"),null!=t&&(t.appendChild(e),this.updateContainerStyle(t))},mxGraphView.prototype.updateContainerStyle=function(t){var e=mxUtils.getCurrentStyle(t);null!=e&&"static"==e.position&&(t.style.position="relative"),mxClient.IS_POINTER&&(t.style.touchAction="none")},mxGraphView.prototype.destroy=function(){var t=null!=this.canvas?this.canvas.ownerSVGElement:null;null!=(t=null==t?this.canvas:t)&&null!=t.parentNode&&(this.clear(this.currentRoot,!0),mxEvent.removeGestureListeners(document,null,this.moveHandler,this.endHandler),mxEvent.release(this.graph.container),t.parentNode.removeChild(t),this.decoratorPane=this.overlayPane=this.drawPane=this.backgroundPane=this.canvas=this.endHandler=this.moveHandler=null)},mxCurrentRootChange.prototype.execute=function(){var t=this.view.currentRoot;this.view.currentRoot=this.previous,this.previous=t,null!=(t=this.view.graph.getTranslateForRoot(this.view.currentRoot))&&(this.view.translate=new mxPoint(-t.x,-t.y)),this.isUp?(this.view.clear(this.view.currentRoot,!0),this.view.validate()):this.view.refresh(),this.view.fireEvent(new mxEventObject(this.isUp?mxEvent.UP:mxEvent.DOWN,"root",this.view.currentRoot,"previous",this.previous)),this.isUp=!this.isUp},mxLoadResources?mxResources.add(mxClient.basePath+"/resources/graph"):mxClient.defaultBundles.push(mxClient.basePath+"/resources/graph"),mxGraph.prototype=new mxEventSource,mxGraph.prototype.constructor=mxGraph,mxGraph.prototype.mouseListeners=null,mxGraph.prototype.isMouseDown=!1,mxGraph.prototype.model=null,mxGraph.prototype.view=null,mxGraph.prototype.stylesheet=null,mxGraph.prototype.selectionModel=null,mxGraph.prototype.cellEditor=null,mxGraph.prototype.cellRenderer=null,mxGraph.prototype.multiplicities=null,mxGraph.prototype.renderHint=null,mxGraph.prototype.dialect=null,mxGraph.prototype.gridSize=10,mxGraph.prototype.gridEnabled=!0,mxGraph.prototype.portsEnabled=!0,mxGraph.prototype.nativeDblClickEnabled=!0,mxGraph.prototype.doubleTapEnabled=!0,mxGraph.prototype.doubleTapTimeout=500,mxGraph.prototype.doubleTapTolerance=25,mxGraph.prototype.lastTouchY=0,mxGraph.prototype.lastTouchY=0,mxGraph.prototype.lastTouchTime=0,mxGraph.prototype.tapAndHoldEnabled=!0,mxGraph.prototype.tapAndHoldDelay=500,mxGraph.prototype.tapAndHoldInProgress=!1,mxGraph.prototype.tapAndHoldValid=!1,mxGraph.prototype.initialTouchX=0,mxGraph.prototype.initialTouchY=0,mxGraph.prototype.tolerance=4,mxGraph.prototype.defaultOverlap=.5,mxGraph.prototype.defaultParent=null,mxGraph.prototype.alternateEdgeStyle=null,mxGraph.prototype.backgroundImage=null,mxGraph.prototype.pageVisible=!1,mxGraph.prototype.pageBreaksVisible=!1,mxGraph.prototype.pageBreakColor="gray",mxGraph.prototype.pageBreakDashed=!0,mxGraph.prototype.minPageBreakDist=20,mxGraph.prototype.preferPageSize=!1,mxGraph.prototype.pageFormat=mxConstants.PAGE_FORMAT_A4_PORTRAIT,mxGraph.prototype.pageScale=1.5,mxGraph.prototype.enabled=!0,mxGraph.prototype.escapeEnabled=!0,mxGraph.prototype.invokesStopCellEditing=!0,mxGraph.prototype.enterStopsCellEditing=!1,mxGraph.prototype.useScrollbarsForPanning=!0,mxGraph.prototype.exportEnabled=!0,mxGraph.prototype.importEnabled=!0,mxGraph.prototype.cellsLocked=!1,mxGraph.prototype.cellsCloneable=!0,mxGraph.prototype.foldingEnabled=!0,mxGraph.prototype.cellsEditable=!0,mxGraph.prototype.cellsDeletable=!0,mxGraph.prototype.cellsMovable=!0,mxGraph.prototype.edgeLabelsMovable=!0,mxGraph.prototype.vertexLabelsMovable=!1,mxGraph.prototype.dropEnabled=!1,mxGraph.prototype.splitEnabled=!0,mxGraph.prototype.cellsResizable=!0,mxGraph.prototype.cellsBendable=!0,mxGraph.prototype.cellsSelectable=!0,mxGraph.prototype.cellsDisconnectable=!0,mxGraph.prototype.autoSizeCells=!1,mxGraph.prototype.autoSizeCellsOnAdd=!1,mxGraph.prototype.autoScroll=!0,mxGraph.prototype.ignoreScrollbars=!1,mxGraph.prototype.translateToScrollPosition=!1,mxGraph.prototype.timerAutoScroll=!1,mxGraph.prototype.allowAutoPanning=!1,mxGraph.prototype.autoExtend=!0,mxGraph.prototype.maximumGraphBounds=null,mxGraph.prototype.minimumGraphSize=null,mxGraph.prototype.minimumContainerSize=null,mxGraph.prototype.maximumContainerSize=null,mxGraph.prototype.resizeContainer=!1,mxGraph.prototype.border=0,mxGraph.prototype.keepEdgesInForeground=!1,mxGraph.prototype.keepEdgesInBackground=!1,mxGraph.prototype.allowNegativeCoordinates=!0,mxGraph.prototype.constrainChildren=!0,mxGraph.prototype.constrainRelativeChildren=!1,mxGraph.prototype.extendParents=!0,mxGraph.prototype.extendParentsOnAdd=!0,mxGraph.prototype.extendParentsOnMove=!1,mxGraph.prototype.recursiveResize=!1,mxGraph.prototype.collapseToPreferredSize=!0,mxGraph.prototype.zoomFactor=1.2,mxGraph.prototype.keepSelectionVisibleOnZoom=!1,mxGraph.prototype.centerZoom=!0,mxGraph.prototype.resetViewOnRootChange=!0,mxGraph.prototype.resetEdgesOnResize=!1,mxGraph.prototype.resetEdgesOnMove=!1,mxGraph.prototype.resetEdgesOnConnect=!0,mxGraph.prototype.allowLoops=!1,mxGraph.prototype.defaultLoopStyle=mxEdgeStyle.Loop,mxGraph.prototype.multigraph=!0,mxGraph.prototype.connectableEdges=!1,mxGraph.prototype.allowDanglingEdges=!0,mxGraph.prototype.cloneInvalidEdges=!1,mxGraph.prototype.disconnectOnMove=!0,mxGraph.prototype.labelsVisible=!0,mxGraph.prototype.htmlLabels=!1,mxGraph.prototype.swimlaneSelectionEnabled=!0,mxGraph.prototype.swimlaneNesting=!0,mxGraph.prototype.swimlaneIndicatorColorAttribute=mxConstants.STYLE_FILLCOLOR,mxGraph.prototype.imageBundles=null,mxGraph.prototype.minFitScale=.1,mxGraph.prototype.maxFitScale=8,mxGraph.prototype.panDx=0,mxGraph.prototype.panDy=0,mxGraph.prototype.collapsedImage=new mxImage(mxClient.imageBasePath+"/collapsed.gif",9,9),mxGraph.prototype.expandedImage=new mxImage(mxClient.imageBasePath+"/expanded.gif",9,9),mxGraph.prototype.warningImage=new mxImage(mxClient.imageBasePath+"/warning"+(mxClient.IS_MAC?".png":".gif"),16,16),mxGraph.prototype.alreadyConnectedResource="none"!=mxClient.language?"alreadyConnected":"",mxGraph.prototype.containsValidationErrorsResource="none"!=mxClient.language?"containsValidationErrors":"",mxGraph.prototype.collapseExpandResource="none"!=mxClient.language?"collapse-expand":"",mxGraph.prototype.init=function(t){this.container=t,this.cellEditor=this.createCellEditor(),this.view.init(),this.sizeDidChange(),mxEvent.addListener(t,"mouseleave",mxUtils.bind(this,function(t){null!=this.tooltipHandler&&null!=this.tooltipHandler.div&&this.tooltipHandler.div!=t.relatedTarget&&this.tooltipHandler.hide()})),mxClient.IS_IE&&(mxEvent.addListener(window,"unload",mxUtils.bind(this,function(){this.destroy()})),mxEvent.addListener(t,"selectstart",mxUtils.bind(this,function(t){return this.isEditing()||!this.isMouseDown&&!mxEvent.isShiftDown(t)})))},mxGraph.prototype.createHandlers=function(){this.tooltipHandler=this.createTooltipHandler(),this.tooltipHandler.setEnabled(!1),this.selectionCellsHandler=this.createSelectionCellsHandler(),this.connectionHandler=this.createConnectionHandler(),this.connectionHandler.setEnabled(!1),this.graphHandler=this.createGraphHandler(),this.panningHandler=this.createPanningHandler(),this.panningHandler.panningEnabled=!1,this.popupMenuHandler=this.createPopupMenuHandler()},mxGraph.prototype.createTooltipHandler=function(){return new mxTooltipHandler(this)},mxGraph.prototype.createSelectionCellsHandler=function(){return new mxSelectionCellsHandler(this)},mxGraph.prototype.createConnectionHandler=function(){return new mxConnectionHandler(this)},mxGraph.prototype.createGraphHandler=function(){return new mxGraphHandler(this)},mxGraph.prototype.createPanningHandler=function(){return new mxPanningHandler(this)},mxGraph.prototype.createPopupMenuHandler=function(){return new mxPopupMenuHandler(this)},mxGraph.prototype.createSelectionModel=function(){return new mxGraphSelectionModel(this)},mxGraph.prototype.createStylesheet=function(){return new mxStylesheet},mxGraph.prototype.createGraphView=function(){return new mxGraphView(this)},mxGraph.prototype.createCellRenderer=function(){return new mxCellRenderer},mxGraph.prototype.createCellEditor=function(){return new mxCellEditor(this)},mxGraph.prototype.getModel=function(){return this.model},mxGraph.prototype.getView=function(){return this.view},mxGraph.prototype.getStylesheet=function(){return this.stylesheet},mxGraph.prototype.setStylesheet=function(t){this.stylesheet=t},mxGraph.prototype.getSelectionModel=function(){return this.selectionModel},mxGraph.prototype.setSelectionModel=function(t){this.selectionModel=t},mxGraph.prototype.getSelectionCellsForChanges=function(t,e){for(var n=new mxDictionary,i=[],l=mxUtils.bind(this,function(t){if(!n.get(t)&&this.model.contains(t))if(this.model.isEdge(t)||this.model.isVertex(t))n.put(t,!0),i.push(t);else for(var e=this.model.getChildCount(t),o=0;o<e;o++)l(this.model.getChildAt(t,o))}),o=0;o<t.length;o++){var s,r=t[o];r.constructor==mxRootChange||null!=e&&e(r)||(s=null,r instanceof mxChildChange?s=r.child:null!=r.cell&&r.cell instanceof mxCell&&(s=r.cell),null!=s&&l(s))}return i},mxGraph.prototype.graphModelChanged=function(t){for(var e=0;e<t.length;e++)this.processChange(t[e]);this.updateSelection(),this.view.validate(),this.sizeDidChange()},mxGraph.prototype.updateSelection=function(){for(var t=this.getSelectionCells(),e=[],n=0;n<t.length;n++)if(this.model.contains(t[n])&&this.isCellVisible(t[n]))for(var i=this.model.getParent(t[n]);null!=i&&i!=this.view.currentRoot;){if(this.isCellCollapsed(i)||!this.isCellVisible(i)){e.push(t[n]);break}i=this.model.getParent(i)}else e.push(t[n]);this.removeSelectionCells(e)},mxGraph.prototype.processChange=function(t){var e;t instanceof mxRootChange?(this.clearSelection(),this.setDefaultParent(null),this.removeStateForCell(t.previous),this.resetViewOnRootChange&&(this.view.scale=1,this.view.translate.x=0,this.view.translate.y=0),this.fireEvent(new mxEventObject(mxEvent.ROOT))):t instanceof mxChildChange?(e=this.model.getParent(t.child),this.view.invalidate(t.child,!0,!0),this.model.contains(e)&&!this.isCellCollapsed(e)||(this.view.invalidate(t.child,!0,!0),this.removeStateForCell(t.child),this.view.currentRoot==t.child&&this.home()),e!=t.previous&&(null!=e&&this.view.invalidate(e,!1,!1),null!=t.previous&&this.view.invalidate(t.previous,!1,!1))):t instanceof mxTerminalChange||t instanceof mxGeometryChange?(t instanceof mxTerminalChange||null==t.previous&&null!=t.geometry||null!=t.previous&&!t.previous.equals(t.geometry))&&this.view.invalidate(t.cell):t instanceof mxValueChange?this.view.invalidate(t.cell,!1,!1):t instanceof mxStyleChange?(this.view.invalidate(t.cell,!0,!0),null!=(t=this.view.getState(t.cell))&&(t.invalidStyle=!0)):null!=t.cell&&t.cell instanceof mxCell&&this.removeStateForCell(t.cell)},mxGraph.prototype.removeStateForCell=function(t){for(var e=this.model.getChildCount(t),n=0;n<e;n++)this.removeStateForCell(this.model.getChildAt(t,n));this.view.invalidate(t,!1,!0),this.view.removeState(t)},mxGraph.prototype.addCellOverlay=function(t,e){null==t.overlays&&(t.overlays=[]),t.overlays.push(e);var n=this.view.getState(t);return null!=n&&this.cellRenderer.redraw(n),this.fireEvent(new mxEventObject(mxEvent.ADD_OVERLAY,"cell",t,"overlay",e)),e},mxGraph.prototype.getCellOverlays=function(t){return t.overlays},mxGraph.prototype.removeCellOverlay=function(t,e){var n;return null==e?this.removeCellOverlays(t):0<=(n=mxUtils.indexOf(t.overlays,e))?(t.overlays.splice(n,1),0==t.overlays.length&&(t.overlays=null),null!=(n=this.view.getState(t))&&this.cellRenderer.redraw(n),this.fireEvent(new mxEventObject(mxEvent.REMOVE_OVERLAY,"cell",t,"overlay",e))):e=null,e},mxGraph.prototype.removeCellOverlays=function(t){var e=t.overlays;if(null!=e){t.overlays=null;var n=this.view.getState(t);for(null!=n&&this.cellRenderer.redraw(n),n=0;n<e.length;n++)this.fireEvent(new mxEventObject(mxEvent.REMOVE_OVERLAY,"cell",t,"overlay",e[n]))}return e},mxGraph.prototype.clearCellOverlays=function(t){t=null!=t?t:this.model.getRoot(),this.removeCellOverlays(t);for(var e=this.model.getChildCount(t),n=0;n<e;n++){var i=this.model.getChildAt(t,n);this.clearCellOverlays(i)}},mxGraph.prototype.setCellWarning=function(t,e,n,i){return null!=e&&0<e.length?(e=new mxCellOverlay(n=null!=n?n:this.warningImage,"<font color=red>"+e+"</font>"),i&&e.addListener(mxEvent.CLICK,mxUtils.bind(this,function(e,n){this.isEnabled()&&this.setSelectionCell(t)})),this.addCellOverlay(t,e)):(this.removeCellOverlays(t),null)},mxGraph.prototype.startEditing=function(t){this.startEditingAtCell(null,t)},mxGraph.prototype.startEditingAtCell=function(t,e){null!=e&&mxEvent.isMultiTouchEvent(e)||(null==t&&(null==(t=this.getSelectionCell())||this.isCellEditable(t)||(t=null)),null!=t&&(this.fireEvent(new mxEventObject(mxEvent.START_EDITING,"cell",t,"event",e)),this.cellEditor.startEditing(t,e),this.fireEvent(new mxEventObject(mxEvent.EDITING_STARTED,"cell",t,"event",e))))},mxGraph.prototype.getEditingValue=function(t,e){return this.convertValueToString(t)},mxGraph.prototype.stopEditing=function(t){this.cellEditor.stopEditing(t),this.fireEvent(new mxEventObject(mxEvent.EDITING_STOPPED,"cancel",t))},mxGraph.prototype.labelChanged=function(t,e,n){this.model.beginUpdate();try{var i=t.value;this.cellLabelChanged(t,e,this.isAutoSizeCell(t)),this.fireEvent(new mxEventObject(mxEvent.LABEL_CHANGED,"cell",t,"value",e,"old",i,"event",n))}finally{this.model.endUpdate()}return t},mxGraph.prototype.cellLabelChanged=function(t,e,n){this.model.beginUpdate();try{this.model.setValue(t,e),n&&this.cellSizeUpdated(t,!1)}finally{this.model.endUpdate()}},mxGraph.prototype.escape=function(t){this.fireEvent(new mxEventObject(mxEvent.ESCAPE,"event",t))},mxGraph.prototype.click=function(t){var e,n=t.getEvent(),i=t.getCell(),l=new mxEventObject(mxEvent.CLICK,"event",n,"cell",i);if(t.isConsumed()&&l.consume(),this.fireEvent(l),this.isEnabled()&&!mxEvent.isConsumed(n)&&!l.isConsumed()){if(null!=i)this.isTransparentClickEvent(n)&&(e=!1,null!=(t=this.getCellAt(t.graphX,t.graphY,null,null,null,mxUtils.bind(this,function(t){var n=this.isCellSelected(t.cell);return!(e=e||n)||n||t.cell!=i&&this.model.isAncestor(t.cell,i)})))&&(i=t));else if(this.isSwimlaneSelectionEnabled()&&!(null==(i=this.getSwimlaneAt(t.getGraphX(),t.getGraphY()))||this.isToggleEvent(n)&&mxEvent.isAltDown(n))){for(l=i,t=[];null!=l;){l=this.model.getParent(l);var o=this.view.getState(l);this.isSwimlane(l)&&null!=o&&t.push(l)}if(0<t.length)for((t=t.reverse()).splice(0,0,i),t.push(i),l=0;l<t.length-1;l++)this.isCellSelected(t[l])&&(i=t[this.isToggleEvent(n)?l:l+1])}null!=i?this.selectCellForEvent(i,n):this.isToggleEvent(n)||this.clearSelection()}},mxGraph.prototype.isSiblingSelected=function(t){for(var e=this.model,n=e.getParent(t),i=e.getChildCount(n),l=0;l<i;l++){var o=e.getChildAt(n,l);if(t!=o&&this.isCellSelected(o))return!0}return!1},mxGraph.prototype.dblClick=function(t,e){var n=new mxEventObject(mxEvent.DOUBLE_CLICK,"event",t,"cell",e);this.fireEvent(n),!this.isEnabled()||mxEvent.isConsumed(t)||n.isConsumed()||null==e||!this.isCellEditable(e)||this.isEditing(e)||(this.startEditingAtCell(e,t),mxEvent.consume(t))},mxGraph.prototype.tapAndHold=function(t){var e=t.getEvent(),n=new mxEventObject(mxEvent.TAP_AND_HOLD,"event",e,"cell",t.getCell());this.fireEvent(n),n.isConsumed()&&(this.panningHandler.panningTrigger=!1),!this.isEnabled()||mxEvent.isConsumed(e)||n.isConsumed()||!this.connectionHandler.isEnabled()||null!=(e=this.view.getState(this.connectionHandler.marker.getCell(t)))&&(this.connectionHandler.marker.currentColor=this.connectionHandler.marker.validColor,this.connectionHandler.marker.markedState=e,this.connectionHandler.marker.mark(),this.connectionHandler.first=new mxPoint(t.getGraphX(),t.getGraphY()),this.connectionHandler.edgeState=this.connectionHandler.createEdgeState(t),this.connectionHandler.previous=e,this.connectionHandler.fireEvent(new mxEventObject(mxEvent.START,"state",this.connectionHandler.previous)))},mxGraph.prototype.scrollPointToVisible=function(t,e,n,i){var l,o,s;this.timerAutoScroll||!this.ignoreScrollbars&&!mxUtils.hasScrollbars(this.container)?this.allowAutoPanning&&!this.panningHandler.isActive()&&(null==this.panningManager&&(this.panningManager=this.createPanningManager()),this.panningManager.panTo(t+this.panDx,e+this.panDy)):(i=null!=i?i:20,t>=(l=this.container).scrollLeft&&e>=l.scrollTop&&t<=l.scrollLeft+l.clientWidth&&e<=l.scrollTop+l.clientHeight&&((o=l.scrollLeft+l.clientWidth-t)<i?(t=l.scrollLeft,l.scrollLeft+=i-o,n&&t==l.scrollLeft&&(this.dialect==mxConstants.DIALECT_SVG?(t=this.view.getDrawPane().ownerSVGElement,s=this.container.scrollWidth+i-o):(s=Math.max(l.clientWidth,l.scrollWidth)+i-o,t=this.view.getCanvas()),t.style.width=s+"px",l.scrollLeft+=i-o)):(o=t-l.scrollLeft)<i&&(l.scrollLeft-=i-o),(o=l.scrollTop+l.clientHeight-e)<i?(t=l.scrollTop,l.scrollTop+=i-o,t==l.scrollTop&&n&&(this.dialect==mxConstants.DIALECT_SVG?(t=this.view.getDrawPane().ownerSVGElement,e=this.container.scrollHeight+i-o):(e=Math.max(l.clientHeight,l.scrollHeight)+i-o,t=this.view.getCanvas()),t.style.height=e+"px",l.scrollTop+=i-o)):(o=e-l.scrollTop)<i&&(l.scrollTop-=i-o)))},mxGraph.prototype.createPanningManager=function(){return new mxPanningManager(this)},mxGraph.prototype.getBorderSizes=function(){var t=mxUtils.getCurrentStyle(this.container);return new mxRectangle(mxUtils.parseCssNumber(t.paddingLeft)+("none"!=t.borderLeftStyle?mxUtils.parseCssNumber(t.borderLeftWidth):0),mxUtils.parseCssNumber(t.paddingTop)+("none"!=t.borderTopStyle?mxUtils.parseCssNumber(t.borderTopWidth):0),mxUtils.parseCssNumber(t.paddingRight)+("none"!=t.borderRightStyle?mxUtils.parseCssNumber(t.borderRightWidth):0),mxUtils.parseCssNumber(t.paddingBottom)+("none"!=t.borderBottomStyle?mxUtils.parseCssNumber(t.borderBottomWidth):0))},mxGraph.prototype.getPreferredPageSize=function(t,e,n){t=this.view.translate;var i=this.pageFormat,l=this.pageScale;return i=new mxRectangle(0,0,Math.ceil(i.width*l),Math.ceil(i.height*l)),new mxRectangle(0,0,(this.pageBreaksVisible?Math.ceil(e/i.width):1)*i.width+2+t.x,(this.pageBreaksVisible?Math.ceil(n/i.height):1)*i.height+2+t.y)},mxGraph.prototype.fit=function(t,e,n,i,l,o,s){if(null!=this.container){t=null!=t?t:this.getBorder(),e=null!=e&&e,n=null!=n?n:0,i=null==i||i,l=null!=l&&l,o=null!=o&&o;var r=this.getBorderSizes(),a=this.container.offsetWidth-r.x-r.width-1,h=null!=s?s:this.container.offsetHeight-r.y-r.height-1;if(0<(s=this.view.getGraphBounds()).width&&0<s.height){e&&null!=s.x&&null!=s.y&&((s=s.clone()).width+=s.x,s.height+=s.y,s.x=0,s.y=0);var u=s.width/(r=this.view.scale),d=s.height/r;null!=this.backgroundImage&&(u=Math.max(u,this.backgroundImage.width-s.x/r),d=Math.max(d,this.backgroundImage.height-s.y/r));var c=(e?t:2*t)+n+1;if(a-=c,h-=c,l=l?h/d:o?a/u:Math.min(a/u,h/d),null!=this.minFitScale&&(l=Math.max(l,this.minFitScale)),null!=this.maxFitScale&&(l=Math.min(l,this.maxFitScale)),!i)return l;e?this.view.scale!=l&&this.view.setScale(l):mxUtils.hasScrollbars(this.container)?(this.view.setScale(l),null!=(t=this.getGraphBounds()).x&&(this.container.scrollLeft=t.x),null!=t.y&&(this.container.scrollTop=t.y)):this.view.scaleAndTranslate(l,null!=s.x?Math.floor(this.view.translate.x-s.x/r+t/l+n/2):t,null!=s.y?Math.floor(this.view.translate.y-s.y/r+t/l+n/2):t)}}return this.view.scale},mxGraph.prototype.sizeDidChange=function(){var t,e,n,i=this.getGraphBounds();null!=this.container&&(e=this.getBorder(),t=Math.max(0,i.x)+i.width+2*e,e=Math.max(0,i.y)+i.height+2*e,null!=this.minimumContainerSize&&(t=Math.max(t,this.minimumContainerSize.width),e=Math.max(e,this.minimumContainerSize.height)),this.resizeContainer&&this.doResizeContainer(t,e),!(this.preferPageSize||!mxClient.IS_IE&&this.pageVisible)||null!=(n=this.getPreferredPageSize(i,Math.max(1,t),Math.max(1,e)))&&(t=n.width*this.view.scale,e=n.height*this.view.scale),null!=this.minimumGraphSize&&(t=Math.max(t,this.minimumGraphSize.width*this.view.scale),e=Math.max(e,this.minimumGraphSize.height*this.view.scale)),t=Math.ceil(t),e=Math.ceil(e),this.dialect==mxConstants.DIALECT_SVG?null!=(n=this.view.getDrawPane().ownerSVGElement)&&(n.style.minWidth=Math.max(1,t)+"px",n.style.minHeight=Math.max(1,e)+"px",n.style.width="100%",n.style.height="100%"):(this.view.canvas.style.minWidth=Math.max(1,t)+"px",this.view.canvas.style.minHeight=Math.max(1,e)+"px"),this.updatePageBreaks(this.pageBreaksVisible,t,e)),this.fireEvent(new mxEventObject(mxEvent.SIZE,"bounds",i))},mxGraph.prototype.doResizeContainer=function(t,e){null!=this.maximumContainerSize&&(t=Math.min(this.maximumContainerSize.width,t),e=Math.min(this.maximumContainerSize.height,e)),this.container.style.width=Math.ceil(t)+"px",this.container.style.height=Math.ceil(e)+"px"},mxGraph.prototype.updatePageBreaks=function(t,e,n){n=this.view.translate;var i=this.pageFormat,l=(e=this.view.scale)*this.pageScale,o=new mxRectangle(0,0,i.width*l,i.height*l);(i=mxRectangle.fromRectangle(this.getGraphBounds())).width=Math.max(1,i.width),i.height=Math.max(1,i.height),o.x=Math.floor((i.x-n.x*e)/o.width)*o.width+n.x*e,o.y=Math.floor((i.y-n.y*e)/o.height)*o.height+n.y*e,i.width=Math.ceil((i.width+(i.x-o.x))/o.width)*o.width,i.height=Math.ceil((i.height+(i.y-o.y))/o.height)*o.height;var s=(t=t&&Math.min(o.width,o.height)>this.minPageBreakDist)?Math.ceil(i.height/o.height)+1:0,r=t?Math.ceil(i.width/o.width)+1:0,a=(r-1)*o.width,h=(s-1)*o.height;null==this.horizontalPageBreaks&&0<s&&(this.horizontalPageBreaks=[]),null==this.verticalPageBreaks&&0<r&&(this.verticalPageBreaks=[]),(t=mxUtils.bind(this,function(t){if(null!=t){for(var e=t==this.horizontalPageBreaks?s:r,n=0;n<=e;n++){var i=t==this.horizontalPageBreaks?[new mxPoint(Math.round(o.x),Math.round(o.y+n*o.height)),new mxPoint(Math.round(o.x+a),Math.round(o.y+n*o.height))]:[new mxPoint(Math.round(o.x+n*o.width),Math.round(o.y)),new mxPoint(Math.round(o.x+n*o.width),Math.round(o.y+h))];null!=t[n]?(t[n].points=i,t[n].redraw()):((i=new mxPolyline(i,this.pageBreakColor)).dialect=this.dialect,i.pointerEvents=!1,i.isDashed=this.pageBreakDashed,i.init(this.view.backgroundPane),i.redraw(),t[n]=i)}for(n=e;n<t.length;n++)t[n].destroy();t.splice(e,t.length-e)}}))(this.horizontalPageBreaks),t(this.verticalPageBreaks)},mxGraph.prototype.getCurrentCellStyle=function(t,e){return null!=(e=e?null:this.view.getState(t))?e.style:this.getCellStyle(t)},mxGraph.prototype.getCellStyle=function(t){var e=this.model.getStyle(t);return t=this.model.isEdge(t)?this.stylesheet.getDefaultEdgeStyle():this.stylesheet.getDefaultVertexStyle(),null==(t=null!=e?this.postProcessCellStyle(this.stylesheet.getCellStyle(e,t)):t)?{}:t},mxGraph.prototype.postProcessCellStyle=function(t){var e,n;return null!=t&&(null!=(n=this.getImageFromBundles(e=t[mxConstants.STYLE_IMAGE]))?t[mxConstants.STYLE_IMAGE]=n:n=e,null!=n&&"data:image/"==n.substring(0,11)&&("data:image/svg+xml,<"==n.substring(0,20)?n=n.substring(0,19)+encodeURIComponent(n.substring(19)):"data:image/svg+xml,%3C"==n.substring(0,22)||0<(e=n.indexOf(","))&&";base64,"!=n.substring(e-7,e+1)&&(n=n.substring(0,e)+";base64,"+n.substring(e+1)),t[mxConstants.STYLE_IMAGE]=n)),t},mxGraph.prototype.setCellStyle=function(t,e){if(null!=(e=e||this.getSelectionCells())){this.model.beginUpdate();try{for(var n=0;n<e.length;n++)this.model.setStyle(e[n],t)}finally{this.model.endUpdate()}}},mxGraph.prototype.toggleCellStyle=function(t,e,n){return n=n||this.getSelectionCell(),this.toggleCellStyles(t,e,[n])},mxGraph.prototype.toggleCellStyles=function(t,e,n){e=null!=e&&e;var i=null;return null!=(n=n||this.getSelectionCells())&&0<n.length&&(i=this.getCurrentCellStyle(n[0]),i=mxUtils.getValue(i,t,e)?0:1,this.setCellStyles(t,i,n)),i},mxGraph.prototype.setCellStyles=function(t,e,n){n=n||this.getSelectionCells(),mxUtils.setCellStyles(this.model,n,t,e)},mxGraph.prototype.toggleCellStyleFlags=function(t,e,n){this.setCellStyleFlags(t,e,null,n)},mxGraph.prototype.setCellStyleFlags=function(t,e,n,i){null!=(i=i||this.getSelectionCells())&&0<i.length&&(null==n&&(n=this.getCurrentCellStyle(i[0]),n=(parseInt(n[t]||0)&e)!=e),mxUtils.setCellStyleFlags(this.model,i,t,e,n))},mxGraph.prototype.getOriginForCell=function(t){t=this.model.getParent(t);for(var e=new mxPoint;null!=t;){var n=this.getCellGeometry(t);null==n||n.relative||(e.x+=n.x,e.y+=n.y),t=this.model.getParent(t)}return e},mxGraph.prototype.alignCells=function(t,e,n){if(null!=(e=null==e?this.getSelectionCells():e)&&1<e.length){if(null==n)for(var i=0;i<e.length;i++){var l=this.getOriginForCell(e[i]),o=this.getCellGeometry(e[i]);if(!this.model.isEdge(e[i])&&null!=o&&!o.relative)if(null==n){if(t==mxConstants.ALIGN_CENTER){n=l.x+o.x+o.width/2;break}if(t==mxConstants.ALIGN_RIGHT)n=l.x+o.x+o.width;else if(t==mxConstants.ALIGN_TOP)n=l.y+o.y;else{if(t==mxConstants.ALIGN_MIDDLE){n=l.y+o.y+o.height/2;break}n=t==mxConstants.ALIGN_BOTTOM?l.y+o.y+o.height:l.x+o.x}}else n=t==mxConstants.ALIGN_RIGHT?Math.max(n,l.x+o.x+o.width):t==mxConstants.ALIGN_TOP?Math.min(n,l.y+o.y):t==mxConstants.ALIGN_BOTTOM?Math.max(n,l.y+o.y+o.height):Math.min(n,l.x+o.x)}if(null!=n){e=mxUtils.sortCells(e),this.model.beginUpdate();try{for(i=0;i<e.length;i++)l=this.getOriginForCell(e[i]),o=this.getCellGeometry(e[i]),this.model.isEdge(e[i])||null==o||o.relative||(o=o.clone(),t==mxConstants.ALIGN_CENTER?o.x=n-l.x-o.width/2:t==mxConstants.ALIGN_RIGHT?o.x=n-l.x-o.width:t==mxConstants.ALIGN_TOP?o.y=n-l.y:t==mxConstants.ALIGN_MIDDLE?o.y=n-l.y-o.height/2:t==mxConstants.ALIGN_BOTTOM?o.y=n-l.y-o.height:o.x=n-l.x,this.resizeCell(e[i],o));this.fireEvent(new mxEventObject(mxEvent.ALIGN_CELLS,"align",t,"cells",e))}finally{this.model.endUpdate()}}}return e},mxGraph.prototype.flipEdge=function(t){if(null!=t&&null!=this.alternateEdgeStyle){this.model.beginUpdate();try{var e=this.model.getStyle(t);this.model.setStyle(t,null==e||0==e.length?this.alternateEdgeStyle:null),this.resetEdge(t),this.fireEvent(new mxEventObject(mxEvent.FLIP_EDGE,"edge",t))}finally{this.model.endUpdate()}}return t},mxGraph.prototype.addImageBundle=function(t){this.imageBundles.push(t)},mxGraph.prototype.removeImageBundle=function(t){for(var e=[],n=0;n<this.imageBundles.length;n++)this.imageBundles[n]!=t&&e.push(this.imageBundles[n]);this.imageBundles=e},mxGraph.prototype.getImageFromBundles=function(t){if(null!=t)for(var e=0;e<this.imageBundles.length;e++){var n=this.imageBundles[e].getImage(t);if(null!=n)return n}return null},mxGraph.prototype.orderCells=function(t,e){null==e&&(e=mxUtils.sortCells(this.getSelectionCells(),!0)),this.model.beginUpdate();try{this.cellsOrdered(e,t),this.fireEvent(new mxEventObject(mxEvent.ORDER_CELLS,"back",t,"cells",e))}finally{this.model.endUpdate()}return e},mxGraph.prototype.cellsOrdered=function(t,e){if(null!=t){this.model.beginUpdate();try{for(var n=0;n<t.length;n++){var i=this.model.getParent(t[n]);this.model.add(i,t[n],e?n:this.model.getChildCount(i)-1)}this.fireEvent(new mxEventObject(mxEvent.CELLS_ORDERED,"back",e,"cells",t))}finally{this.model.endUpdate()}}},mxGraph.prototype.groupCells=function(t,e,n){null==n&&(n=mxUtils.sortCells(this.getSelectionCells(),!0)),n=this.getCellsForGroup(n),null==t&&(t=this.createGroupCell(n));var i=this.getBoundsForGroup(t,n,e);if(1<n.length&&null!=i){var l=this.model.getParent(t);null==l&&(l=this.model.getParent(n[0])),this.model.beginUpdate();try{null==this.getCellGeometry(t)&&this.model.setGeometry(t,new mxGeometry);var o=this.model.getChildCount(l);this.cellsAdded([t],l,o,null,null,!1,!1,!1),o=this.model.getChildCount(t),this.cellsAdded(n,t,o,null,null,!1,!1,!1),this.cellsMoved(n,-i.x,-i.y,!1,!1,!1),this.cellsResized([t],[i],!1),this.fireEvent(new mxEventObject(mxEvent.GROUP_CELLS,"group",t,"border",e,"cells",n))}finally{this.model.endUpdate()}}return t},mxGraph.prototype.getCellsForGroup=function(t){var e=[];if(null!=t&&0<t.length){var n=this.model.getParent(t[0]);e.push(t[0]);for(var i=1;i<t.length;i++)this.model.getParent(t[i])==n&&e.push(t[i])}return e},mxGraph.prototype.getBoundsForGroup=function(t,e,n){return null!=(e=this.getBoundingBoxFromGeometry(e,!0))&&(this.isSwimlane(t)&&(t=this.getStartSize(t),e.x-=t.width,e.y-=t.height,e.width+=t.width,e.height+=t.height),null!=n&&(e.x-=n,e.y-=n,e.width+=2*n,e.height+=2*n)),e},mxGraph.prototype.createGroupCell=function(t){return(t=new mxCell("")).setVertex(!0),t.setConnectable(!1),t},mxGraph.prototype.ungroupCells=function(t){var e=[];if(null!=(t=null==t?this.getCellsForUngroup():t)&&0<t.length){this.model.beginUpdate();try{for(var n=0;n<t.length;n++)if(null!=(i=this.model.getChildren(t[n]))&&0<i.length){var i=i.slice(),l=this.model.getParent(t[n]),o=this.model.getChildCount(l);this.cellsAdded(i,l,o,null,null,!0),e=e.concat(i);for(var s=0;s<i.length;s++){var r=this.view.getState(i[s]),a=this.getCellGeometry(i[s]);null!=r&&null!=a&&a.relative&&((a=a.clone()).x=r.origin.x,a.y=r.origin.y,a.relative=!1,this.model.setGeometry(i[s],a))}}this.removeCellsAfterUngroup(t),this.fireEvent(new mxEventObject(mxEvent.UNGROUP_CELLS,"cells",t))}finally{this.model.endUpdate()}}return e},mxGraph.prototype.getCellsForUngroup=function(){for(var t=this.getSelectionCells(),e=[],n=0;n<t.length;n++)this.model.isVertex(t[n])&&0<this.model.getChildCount(t[n])&&e.push(t[n]);return e},mxGraph.prototype.removeCellsAfterUngroup=function(t){this.cellsRemoved(this.addAllEdges(t))},mxGraph.prototype.removeCellsFromParent=function(t){null==t&&(t=this.getSelectionCells()),this.model.beginUpdate();try{var e=this.getDefaultParent(),n=this.model.getChildCount(e);this.cellsAdded(t,e,n,null,null,!0),this.fireEvent(new mxEventObject(mxEvent.REMOVE_CELLS_FROM_PARENT,"cells",t))}finally{this.model.endUpdate()}return t},mxGraph.prototype.updateGroupBounds=function(t,e,n,i,l,o,s){null==t&&(t=this.getSelectionCells()),e=null!=e?e:0,n=null!=n&&n,i=null!=i?i:0,l=null!=l?l:0,o=null!=o?o:0,s=null!=s?s:0,this.model.beginUpdate();try{for(var r=t.length-1;0<=r;r--){var a,h,u,d=this.getCellGeometry(t[r]);null==d||null!=(a=this.getChildCells(t[r]))&&0<a.length&&null!=(h=this.getBoundingBoxFromGeometry(a,!0))&&0<h.width&&0<h.height&&(u=this.isSwimlane(t[r])?this.getActualStartSize(t[r],!0):new mxRectangle,d=d.clone(),n&&(d.x=Math.round(d.x+h.x-e-u.x-s),d.y=Math.round(d.y+h.y-e-u.y-i)),d.width=Math.round(h.width+2*e+u.x+s+l+u.width),d.height=Math.round(h.height+2*e+u.y+i+o+u.height),this.model.setGeometry(t[r],d),this.moveCells(a,e+u.x-h.x+s,e+u.y-h.y+i))}}finally{this.model.endUpdate()}return t},mxGraph.prototype.getBoundingBox=function(t){var e,n=null;if(null!=t&&0<t.length)for(var i=0;i<t.length;i++)!this.model.isVertex(t[i])&&!this.model.isEdge(t[i])||null!=(e=this.view.getBoundingBox(this.view.getState(t[i]),!0))&&(null==n?n=mxRectangle.fromRectangle(e):n.add(e));return n},mxGraph.prototype.cloneCell=function(t,e,n,i){return this.cloneCells([t],e,n,i)[0]},mxGraph.prototype.cloneCells=function(t,e,n,i){e=null==e||e;var l=null;if(null!=t){for(var o=new mxDictionary,s=(l=[],0);s<t.length;s++)o.put(t[s],!0),l.push(t[s]);if(0<l.length){var r=this.view.scale,a=this.view.translate;for(l=this.model.cloneCells(t,!0,n),s=0;s<t.length;s++)if(!e&&this.model.isEdge(l[s])&&null!=this.getEdgeValidationError(l[s],this.model.getTerminal(l[s],!0),this.model.getTerminal(l[s],!1)))l[s]=null;else{var h=this.model.getGeometry(l[s]);if(null!=h){var u=this.view.getState(t[s]),d=this.view.getState(this.model.getParent(t[s]));if(null!=u&&null!=d)if(n=i?0:d.origin.x,d=i?0:d.origin.y,this.model.isEdge(l[s])){if(null!=(u=u.absolutePoints)){for(var c=this.model.getTerminal(t[s],!0);null!=c&&!o.get(c);)c=this.model.getParent(c);for(null==c&&null!=u[0]&&h.setTerminalPoint(new mxPoint(u[0].x/r-a.x,u[0].y/r-a.y),!0),c=this.model.getTerminal(t[s],!1);null!=c&&!o.get(c);)c=this.model.getParent(c);var p=u.length-1;if(null==c&&null!=u[p]&&h.setTerminalPoint(new mxPoint(u[p].x/r-a.x,u[p].y/r-a.y),!1),null!=(h=h.points))for(u=0;u<h.length;u++)h[u].x+=n,h[u].y+=d}}else h.translate(n,d)}}}else l=[]}return l},mxGraph.prototype.insertVertex=function(t,e,n,i,l,o,s,r,a){return e=this.createVertex(t,e,n,i,l,o,s,r,a),this.addCell(e,t)},mxGraph.prototype.createVertex=function(t,e,n,i,l,o,s,r,a){return(t=new mxGeometry(i,l,o,s)).relative=null!=a&&a,(n=new mxCell(n,t,r)).setId(e),n.setVertex(!0),n.setConnectable(!0),n},mxGraph.prototype.insertEdge=function(t,e,n,i,l,o){return e=this.createEdge(t,e,n,i,l,o),this.addEdge(e,t,i,l)},mxGraph.prototype.createEdge=function(t,e,n,i,l,o){return(t=new mxCell(n,new mxGeometry,o)).setId(e),t.setEdge(!0),t.geometry.relative=!0,t},mxGraph.prototype.addEdge=function(t,e,n,i,l){return this.addCell(t,e,l,n,i)},mxGraph.prototype.addCell=function(t,e,n,i,l){return this.addCells([t],e,n,i,l)[0]},mxGraph.prototype.addCells=function(t,e,n,i,l,o){null==e&&(e=this.getDefaultParent()),null==n&&(n=this.model.getChildCount(e)),this.model.beginUpdate();try{this.cellsAdded(t,e,n,i,l,null!=o&&o,!0),this.fireEvent(new mxEventObject(mxEvent.ADD_CELLS,"cells",t,"parent",e,"index",n,"source",i,"target",l))}finally{this.model.endUpdate()}return t},mxGraph.prototype.cellsAdded=function(t,e,n,i,l,o,s,r){if(null!=t&&null!=e&&null!=n){this.model.beginUpdate();try{for(var a,h,u,d,c,p,m=null!=(x=o?this.view.getState(e):null)?x.origin:null,g=new mxPoint(0,0),x=0;x<t.length;x++)null==t[x]?n--:(a=this.model.getParent(t[x]),null!=m&&t[x]!=e&&e!=a&&(u=null!=(h=this.view.getState(a))?h.origin:g,null!=(p=this.model.getGeometry(t[x]))&&(d=u.x-m.x,c=u.y-m.y,(p=p.clone()).translate(d,c),p.relative||!this.model.isVertex(t[x])||this.isAllowNegativeCoordinates()||(p.x=Math.max(0,p.x),p.y=Math.max(0,p.y)),this.model.setGeometry(t[x],p))),e==a&&n+x>this.model.getChildCount(e)&&n--,this.model.add(e,t[x],n+x),this.autoSizeCellsOnAdd&&this.autoSizeCell(t[x],!0),(null==r||r)&&this.isExtendParentsOnAdd(t[x])&&this.isExtendParent(t[x])&&this.extendParent(t[x]),null!=s&&!s||this.constrainChild(t[x]),null!=i&&this.cellConnected(t[x],i,!0),null!=l&&this.cellConnected(t[x],l,!1));this.fireEvent(new mxEventObject(mxEvent.CELLS_ADDED,"cells",t,"parent",e,"index",n,"source",i,"target",l,"absolute",o))}finally{this.model.endUpdate()}}},mxGraph.prototype.autoSizeCell=function(t,e){if(null==e||e)for(var n=this.model.getChildCount(t),i=0;i<n;i++)this.autoSizeCell(this.model.getChildAt(t,i));this.getModel().isVertex(t)&&this.isAutoSizeCell(t)&&this.updateCellSize(t)},mxGraph.prototype.removeCells=function(t,e){if(e=null==e||e,null==t&&(t=this.getDeletableCells(this.getSelectionCells())),e)t=this.getDeletableCells(this.addAllEdges(t));else{t=t.slice();for(var n=this.getDeletableCells(this.getAllEdges(t)),i=new mxDictionary,l=0;l<t.length;l++)i.put(t[l],!0);for(l=0;l<n.length;l++)null!=this.view.getState(n[l])||i.get(n[l])||(i.put(n[l],!0),t.push(n[l]))}this.model.beginUpdate();try{this.cellsRemoved(t),this.fireEvent(new mxEventObject(mxEvent.REMOVE_CELLS,"cells",t,"includeEdges",e))}finally{this.model.endUpdate()}return t},mxGraph.prototype.cellsRemoved=function(t){if(null!=t&&0<t.length){var e=this.view.scale,n=this.view.translate;this.model.beginUpdate();try{for(var i=new mxDictionary,l=0;l<t.length;l++)i.put(t[l],!0);for(l=0;l<t.length;l++){for(var o=this.getAllEdges([t[l]]),s=mxUtils.bind(this,function(i,o){var s=this.model.getGeometry(i);if(null!=s){for(var r=this.model.getTerminal(i,o),a=!1,h=r;null!=h;){if(t[l]==h){a=!0;break}h=this.model.getParent(h)}a&&(s=s.clone(),null!=(a=this.view.getState(i))&&null!=a.absolutePoints?s.setTerminalPoint(new mxPoint((r=a.absolutePoints)[h=o?0:r.length-1].x/e-n.x-a.origin.x,r[h].y/e-n.y-a.origin.y),o):null!=(r=this.view.getState(r))&&s.setTerminalPoint(new mxPoint(r.getCenterX()/e-n.x,r.getCenterY()/e-n.y),o),this.model.setGeometry(i,s),this.model.setTerminal(i,null,o))}}),r=0;r<o.length;r++)i.get(o[r])||(i.put(o[r],!0),s(o[r],!0),s(o[r],!1));this.model.remove(t[l])}this.fireEvent(new mxEventObject(mxEvent.CELLS_REMOVED,"cells",t))}finally{this.model.endUpdate()}}},mxGraph.prototype.splitEdge=function(t,e,n,i,l,o,s,r){i=i||0,l=l||0,r=null!=r?r:this.model.getParent(t),o=this.model.getTerminal(t,!0),this.model.beginUpdate();try{var a,h,u,d,c;null==n&&(n=this.cloneCell(t),a=this.view.getState(t),null!=(h=this.getCellGeometry(n))&&null!=h.points&&null!=a&&(c=mxUtils.findNearestSegment(a,(i+(u=this.view.translate).x)*(d=this.view.scale),(l+u.y)*d),h.points=h.points.slice(0,c),null!=(h=this.getCellGeometry(t))&&null!=h.points&&((h=h.clone()).points=h.points.slice(c),this.model.setGeometry(t,h)))),this.cellsMoved(e,i,l,!1,!1),this.cellsAdded(e,r,this.model.getChildCount(r),null,null,!0),this.cellsAdded([n],r,this.model.getChildCount(r),o,e[0],!1),this.cellConnected(t,e[0],!0),this.fireEvent(new mxEventObject(mxEvent.SPLIT_EDGE,"edge",t,"cells",e,"newEdge",n,"dx",i,"dy",l))}finally{this.model.endUpdate()}return n},mxGraph.prototype.toggleCells=function(t,e,n){null==e&&(e=this.getSelectionCells()),n&&(e=this.addAllEdges(e)),this.model.beginUpdate();try{this.cellsToggled(e,t),this.fireEvent(new mxEventObject(mxEvent.TOGGLE_CELLS,"show",t,"cells",e,"includeEdges",n))}finally{this.model.endUpdate()}return e},mxGraph.prototype.cellsToggled=function(t,e){if(null!=t&&0<t.length){this.model.beginUpdate();try{for(var n=0;n<t.length;n++)this.model.setVisible(t[n],e)}finally{this.model.endUpdate()}}},mxGraph.prototype.foldCells=function(t,e,n,i,l){e=null!=e&&e,null==n&&(n=this.getFoldableCells(this.getSelectionCells(),t)),this.stopEditing(!1),this.model.beginUpdate();try{this.cellsFolded(n,t,e,i),this.fireEvent(new mxEventObject(mxEvent.FOLD_CELLS,"collapse",t,"recurse",e,"cells",n))}finally{this.model.endUpdate()}return n},mxGraph.prototype.cellsFolded=function(t,e,n,i){if(null!=t&&0<t.length){this.model.beginUpdate();try{for(var l,o=0;o<t.length;o++)i&&!this.isCellFoldable(t[o],e)||e==this.isCellCollapsed(t[o])||(this.model.setCollapsed(t[o],e),this.swapBounds(t[o],e),this.isExtendParent(t[o])&&this.extendParent(t[o]),n&&(l=this.model.getChildren(t[o]),this.cellsFolded(l,e,n)),this.constrainChild(t[o]));this.fireEvent(new mxEventObject(mxEvent.CELLS_FOLDED,"cells",t,"collapse",e,"recurse",n))}finally{this.model.endUpdate()}}},mxGraph.prototype.swapBounds=function(t,e){var n;null==t||null!=(n=this.model.getGeometry(t))&&(n=n.clone(),this.updateAlternateBounds(t,n,e),n.swap(),this.model.setGeometry(t,n))},mxGraph.prototype.updateAlternateBounds=function(t,e,n){var i,l;null!=t&&null!=e&&(n=this.getCurrentCellStyle(t),null==e.alternateBounds&&(i=e,!this.collapseToPreferredSize||null!=(t=this.getPreferredSizeForCell(t))&&(i=t,0<(t=mxUtils.getValue(n,mxConstants.STYLE_STARTSIZE))&&(i.height=Math.max(i.height,t))),e.alternateBounds=new mxRectangle(0,0,i.width,i.height)),null!=e.alternateBounds&&(e.alternateBounds.x=e.x,e.alternateBounds.y=e.y,0!=(l=mxUtils.toRadians(n[mxConstants.STYLE_ROTATION]||0))&&(n=e.alternateBounds.getCenterX()-e.getCenterX(),i=e.alternateBounds.getCenterY()-e.getCenterY(),t=Math.cos(l),l=Math.sin(l),e.alternateBounds.x+=t*n-l*i-n,e.alternateBounds.y+=l*n+t*i-i)))},mxGraph.prototype.addAllEdges=function(t){var e=t.slice();return mxUtils.removeDuplicates(e.concat(this.getAllEdges(t)))},mxGraph.prototype.getAllEdges=function(t){var e=[];if(null!=t)for(var n=0;n<t.length;n++){for(var i=this.model.getEdgeCount(t[n]),l=0;l<i;l++)e.push(this.model.getEdgeAt(t[n],l));i=this.model.getChildren(t[n]),e=e.concat(this.getAllEdges(i))}return e},mxGraph.prototype.updateCellSize=function(t,e){e=null!=e&&e,this.model.beginUpdate();try{this.cellSizeUpdated(t,e),this.fireEvent(new mxEventObject(mxEvent.UPDATE_CELL_SIZE,"cell",t,"ignoreChildren",e))}finally{this.model.endUpdate()}return t},mxGraph.prototype.cellSizeUpdated=function(t,e){if(null!=t){this.model.beginUpdate();try{var n,i,l,o,s,r,a,h,u,d,c=this.getPreferredSizeForCell(t),p=this.model.getGeometry(t);null!=c&&null!=p&&(n=this.isCellCollapsed(t),p=p.clone(),this.isSwimlane(t)?(i=this.getCellStyle(t),null==(l=this.model.getStyle(t))&&(l=""),mxUtils.getValue(i,mxConstants.STYLE_HORIZONTAL,!0)?(l=mxUtils.setStyle(l,mxConstants.STYLE_STARTSIZE,c.height+8),n&&(p.height=c.height+8),p.width=c.width):(l=mxUtils.setStyle(l,mxConstants.STYLE_STARTSIZE,c.width+8),n&&(p.width=c.width+8),p.height=c.height),this.model.setStyle(t,l)):((s=(o=this.view.createState(t)).style[mxConstants.STYLE_ALIGN]||mxConstants.ALIGN_CENTER)==mxConstants.ALIGN_RIGHT?p.x+=p.width-c.width:s==mxConstants.ALIGN_CENTER&&(p.x+=Math.round((p.width-c.width)/2)),(r=this.getVerticalAlign(o))==mxConstants.ALIGN_BOTTOM?p.y+=p.height-c.height:r==mxConstants.ALIGN_MIDDLE&&(p.y+=Math.round((p.height-c.height)/2)),p.width=c.width,p.height=c.height),e||n||null!=(a=this.view.getBounds(this.model.getChildren(t)))&&(d=(a.y+a.height)/(u=this.view.scale)-p.y-(h=this.view.translate).y,p.width=Math.max(p.width,(a.x+a.width)/u-p.x-h.x),p.height=Math.max(p.height,d)),this.cellsResized([t],[p],!1))}finally{this.model.endUpdate()}}},mxGraph.prototype.getPreferredSizeForCell=function(t,e){var n,i,l,o,s=null;return null!=t&&(i=(n=this.view.createState(t)).style,this.model.isEdge(t)||(l=i[mxConstants.STYLE_FONTSIZE]||mxConstants.DEFAULT_FONTSIZE,s=o=0,null==this.getImage(n)&&null==i[mxConstants.STYLE_IMAGE]||i[mxConstants.STYLE_SHAPE]!=mxConstants.SHAPE_LABEL||(i[mxConstants.STYLE_VERTICAL_ALIGN]==mxConstants.ALIGN_MIDDLE&&(o+=parseFloat(i[mxConstants.STYLE_IMAGE_WIDTH])||mxLabel.prototype.imageSize),i[mxConstants.STYLE_ALIGN]!=mxConstants.ALIGN_CENTER&&(s+=parseFloat(i[mxConstants.STYLE_IMAGE_HEIGHT])||mxLabel.prototype.imageSize)),o=(o=(o+=2*(i[mxConstants.STYLE_SPACING]||0))+(i[mxConstants.STYLE_SPACING_LEFT]||0))+(i[mxConstants.STYLE_SPACING_RIGHT]||0),s=(s=(s+=2*(i[mxConstants.STYLE_SPACING]||0))+(i[mxConstants.STYLE_SPACING_TOP]||0))+(i[mxConstants.STYLE_SPACING_BOTTOM]||0),null!=(t=this.getFoldingImage(n))&&(o+=t.width+8),s=null!=(t=this.cellRenderer.getLabelValue(n))&&0<t.length?(t=(t=this.isHtmlLabel(n.cell)?t:mxUtils.htmlEntities(t,!1)).replace(/\n/g,"<br>"),n=(l=mxUtils.getSizeForString(t,l,i[mxConstants.STYLE_FONTFAMILY],e,i[mxConstants.STYLE_FONTSTYLE])).width+o,s=l.height+s,mxUtils.getValue(i,mxConstants.STYLE_HORIZONTAL,!0)||(i=s,s=n,n=i),this.gridEnabled&&(n=this.snap(n+this.gridSize/2),s=this.snap(s+this.gridSize/2)),new mxRectangle(0,0,n,s)):new mxRectangle(0,0,i=4*this.gridSize,i))),s},mxGraph.prototype.resizeCell=function(t,e,n){return this.resizeCells([t],[e],n)[0]},mxGraph.prototype.resizeCells=function(t,e,n){n=null!=n?n:this.isRecursiveResize(),this.model.beginUpdate();try{var i=this.cellsResized(t,e,n);this.fireEvent(new mxEventObject(mxEvent.RESIZE_CELLS,"cells",t,"bounds",e,"previous",i))}finally{this.model.endUpdate()}return t},mxGraph.prototype.cellsResized=function(t,e,n){n=null!=n&&n;var i=[];if(null!=t&&null!=e&&t.length==e.length){this.model.beginUpdate();try{for(var l=0;l<t.length;l++)i.push(this.cellResized(t[l],e[l],!1,n)),this.isExtendParent(t[l])&&this.extendParent(t[l]),this.constrainChild(t[l]);this.resetEdgesOnResize&&this.resetEdges(t),this.fireEvent(new mxEventObject(mxEvent.CELLS_RESIZED,"cells",t,"bounds",e,"previous",i))}finally{this.model.endUpdate()}}return i},mxGraph.prototype.cellResized=function(t,e,n,i){var l=this.model.getGeometry(t);if(null!=l&&(l.x!=e.x||l.y!=e.y||l.width!=e.width||l.height!=e.height)){var o=l.clone();!n&&o.relative?null!=(n=o.offset)&&(n.x+=e.x-o.x,n.y+=e.y-o.y):(o.x=e.x,o.y=e.y),o.width=e.width,o.height=e.height,o.relative||!this.model.isVertex(t)||this.isAllowNegativeCoordinates()||(o.x=Math.max(0,o.x),o.y=Math.max(0,o.y)),this.model.beginUpdate();try{i&&this.resizeChildCells(t,o),this.model.setGeometry(t,o),this.constrainChildCells(t)}finally{this.model.endUpdate()}}return l},mxGraph.prototype.resizeChildCells=function(t,e){for(var n=0!=(i=this.model.getGeometry(t)).width?e.width/i.width:1,i=0!=i.height?e.height/i.height:1,l=this.model.getChildCount(t),o=0;o<l;o++)this.scaleCell(this.model.getChildAt(t,o),n,i,!0)},mxGraph.prototype.constrainChildCells=function(t){for(var e=this.model.getChildCount(t),n=0;n<e;n++)this.constrainChild(this.model.getChildAt(t,n))},mxGraph.prototype.scaleCell=function(t,e,n,i){var l,o,s,r,a,h=this.model.getGeometry(t);null!=h&&(l=this.getCurrentCellStyle(t),o=(h=h.clone()).x,s=h.y,r=h.width,a=h.height,h.scale(e,n,"fixed"==l[mxConstants.STYLE_ASPECT]),"1"==l[mxConstants.STYLE_RESIZE_WIDTH]?h.width=r*e:"0"==l[mxConstants.STYLE_RESIZE_WIDTH]&&(h.width=r),"1"==l[mxConstants.STYLE_RESIZE_HEIGHT]?h.height=a*n:"0"==l[mxConstants.STYLE_RESIZE_HEIGHT]&&(h.height=a),this.isCellMovable(t)||(h.x=o,h.y=s),this.isCellResizable(t)||(h.width=r,h.height=a),this.model.isVertex(t)?this.cellResized(t,h,!0,i):this.model.setGeometry(t,h))},mxGraph.prototype.extendParent=function(t){var e,n;null!=t&&(e=this.model.getParent(t),n=this.getCellGeometry(e),null==e||null==n||this.isCellCollapsed(e)||null!=(t=this.getCellGeometry(t))&&!t.relative&&(n.width<t.x+t.width||n.height<t.y+t.height)&&((n=n.clone()).width=Math.max(n.width,t.x+t.width),n.height=Math.max(n.height,t.y+t.height),this.cellsResized([e],[n],!1)))},mxGraph.prototype.importCells=function(t,e,n,i,l,o){return this.moveCells(t,e,n,!0,i,l,o)},mxGraph.prototype.moveCells=function(t,e,n,i,l,o,s){if(e=null!=e?e:0,n=null!=n?n:0,i=null!=i&&i,null!=t&&(0!=e||0!=n||i||null!=l)){var r=t=this.model.getTopmostCells(t);this.model.beginUpdate();try{for(var a=new mxDictionary,h=0;h<t.length;h++)a.put(t[h],!0);var u=mxUtils.bind(this,function(t){for(;null!=t;){if(a.get(t))return!0;t=this.model.getParent(t)}return!1}),d=[];for(h=0;h<t.length;h++){var c=this.getCellGeometry(t[h]),p=this.model.getParent(t[h]);null!=c&&c.relative&&this.model.isEdge(p)&&(u(this.model.getTerminal(p,!0))||u(this.model.getTerminal(p,!1)))||d.push(t[h])}t=d,i&&(t=this.cloneCells(t,this.isCloneInvalidEdges(),s),null==l&&(l=this.getDefaultParent()));var m=this.isAllowNegativeCoordinates();if(null!=l&&this.setAllowNegativeCoordinates(!0),this.cellsMoved(t,e,n,!i&&this.isDisconnectOnMove()&&this.isAllowDanglingEdges(),null==l,this.isExtendParentsOnMove()&&null==l),this.setAllowNegativeCoordinates(m),null!=l){var g=this.model.getChildCount(l);if(this.cellsAdded(t,l,g,null,null,!0),i)for(h=0;h<t.length;h++)c=this.getCellGeometry(t[h]),p=this.model.getParent(r[h]),null!=c&&c.relative&&this.model.isEdge(p)&&this.model.contains(p)&&this.model.add(p,t[h])}this.fireEvent(new mxEventObject(mxEvent.MOVE_CELLS,"cells",t,"dx",e,"dy",n,"clone",i,"target",l,"event",o))}finally{this.model.endUpdate()}}return t},mxGraph.prototype.cellsMoved=function(t,e,n,i,l,o){if(null!=t&&(0!=e||0!=n)){o=null!=o&&o,this.model.beginUpdate();try{i&&this.disconnectGraph(t);for(var s=0;s<t.length;s++)this.translateCell(t[s],e,n),o&&this.isExtendParent(t[s])?this.extendParent(t[s]):l&&this.constrainChild(t[s]);this.resetEdgesOnMove&&this.resetEdges(t),this.fireEvent(new mxEventObject(mxEvent.CELLS_MOVED,"cells",t,"dx",e,"dy",n,"disconnect",i))}finally{this.model.endUpdate()}}},mxGraph.prototype.translateCell=function(t,e,n){var i,l,o=this.model.getGeometry(t);null!=o&&(e=parseFloat(e),n=parseFloat(n),(o=o.clone()).translate(e,n),o.relative||!this.model.isVertex(t)||this.isAllowNegativeCoordinates()||(o.x=Math.max(0,parseFloat(o.x)),o.y=Math.max(0,parseFloat(o.y))),o.relative&&!this.model.isEdge(t)&&(i=this.model.getParent(t),l=0,this.model.isVertex(i)&&(i=this.getCurrentCellStyle(i),l=mxUtils.getValue(i,mxConstants.STYLE_ROTATION,0)),0!=l&&(l=mxUtils.toRadians(-l),i=Math.cos(l),l=Math.sin(l),e=(n=mxUtils.getRotatedPoint(new mxPoint(e,n),i,l,new mxPoint(0,0))).x,n=n.y),null==o.offset?o.offset=new mxPoint(Math.round(e),Math.round(n)):(o.offset.x=Math.round(parseFloat(o.offset.x+e)),o.offset.y=Math.round(parseFloat(o.offset.y+n)))),this.model.setGeometry(t,o))},mxGraph.prototype.getCellContainmentArea=function(t){if(null!=t&&!this.model.isEdge(t)){var e=this.model.getParent(t);if(null!=e&&e!=this.getDefaultParent()&&null!=(a=this.model.getGeometry(e))){var n,i,l,o,s=t=0,r=a.width,a=a.height;return this.isSwimlane(e)&&(n=this.getStartSize(e),l=this.getCurrentCellStyle(e),e=mxUtils.getValue(l,mxConstants.STYLE_DIRECTION,mxConstants.DIRECTION_EAST),i=1==mxUtils.getValue(l,mxConstants.STYLE_FLIPH,0),l=1==mxUtils.getValue(l,mxConstants.STYLE_FLIPV,0),e!=mxConstants.DIRECTION_SOUTH&&e!=mxConstants.DIRECTION_NORTH||(o=n.width,n.width=n.height,n.height=o),(e==mxConstants.DIRECTION_EAST&&!l||e==mxConstants.DIRECTION_NORTH&&!i||e==mxConstants.DIRECTION_WEST&&l||e==mxConstants.DIRECTION_SOUTH&&i)&&(t=n.width,s=n.height),r-=n.width,a-=n.height),new mxRectangle(t,s,r,a)}}return null},mxGraph.prototype.getMaximumGraphBounds=function(){return this.maximumGraphBounds},mxGraph.prototype.constrainChild=function(t,e){if(null!=t){var n=this.getCellGeometry(t);if(null!=n&&(this.isConstrainRelativeChildren()||!n.relative)){var i=this.model.getParent(t);this.getCellGeometry(i);var l=this.getMaximumGraphBounds();if(null!=l&&null!=(i=this.getBoundingBoxFromGeometry([i],!1))&&((l=mxRectangle.fromRectangle(l)).x-=i.x,l.y-=i.y),this.isConstrainChild(t)&&null!=(i=this.getCellContainmentArea(t))&&(0<(o=this.getOverlap(t))&&((i=mxRectangle.fromRectangle(i)).x-=i.width*o,i.y-=i.height*o,i.width+=2*i.width*o,i.height+=2*i.height*o),null==l?l=i:(l=mxRectangle.fromRectangle(l)).intersect(i)),null!=l){if(i=[t],!this.isCellCollapsed(t))for(var o=this.model.getDescendants(t),s=0;s<o.length;s++)this.isCellVisible(o[s])&&i.push(o[s]);null!=(i=this.getBoundingBoxFromGeometry(i,!1))&&(o=0,(n=n.clone()).width>l.width&&(n.width-=o=n.width-l.width),i.x+i.width>l.x+l.width&&(o-=i.x+i.width-l.x-l.width-o),s=0,n.height>l.height&&(n.height-=s=n.height-l.height),i.y+i.height>l.y+l.height&&(s-=i.y+i.height-l.y-l.height-s),i.x<l.x&&(o-=i.x-l.x),i.y<l.y&&(s-=i.y-l.y),0==o&&0==s||(n.relative?(null==n.offset&&(n.offset=new mxPoint),n.offset.x+=o,n.offset.y+=s):(n.x+=o,n.y+=s)),this.model.setGeometry(t,n))}}}},mxGraph.prototype.resetEdges=function(t){if(null!=t){for(var e=new mxDictionary,n=0;n<t.length;n++)e.put(t[n],!0);this.model.beginUpdate();try{for(n=0;n<t.length;n++){var i=this.model.getEdges(t[n]);if(null!=i)for(var l=0;l<i.length;l++){var o=this.view.getState(i[l]),s=null!=o?o.getVisibleTerminal(!0):this.view.getVisibleTerminal(i[l],!0),r=null!=o?o.getVisibleTerminal(!1):this.view.getVisibleTerminal(i[l],!1);e.get(s)&&e.get(r)||this.resetEdge(i[l])}this.resetEdges(this.model.getChildren(t[n]))}}finally{this.model.endUpdate()}}},mxGraph.prototype.resetEdge=function(t){var e=this.model.getGeometry(t);return null!=e&&null!=e.points&&0<e.points.length&&((e=e.clone()).points=[],this.model.setGeometry(t,e)),t},mxGraph.prototype.getOutlineConstraint=function(t,e,n){if(null==e.shape)return null;n=this.view.getPerimeterBounds(e);var i=e.style[mxConstants.STYLE_DIRECTION];i!=mxConstants.DIRECTION_NORTH&&i!=mxConstants.DIRECTION_SOUTH||(n.x+=n.width/2-n.height/2,n.y+=n.height/2-n.width/2,l=n.width,n.width=n.height,n.height=l);var l,o=mxUtils.toRadians(e.shape.getShapeRotation());0!=o&&(l=Math.cos(-o),o=Math.sin(-o),a=new mxPoint(n.getCenterX(),n.getCenterY()),t=mxUtils.getRotatedPoint(t,l,o,a));var s,r,a=o=1,h=0,u=0;return this.getModel().isVertex(e.cell)&&(s=e.style[mxConstants.STYLE_FLIPH],r=e.style[mxConstants.STYLE_FLIPV],null!=e.shape&&null!=e.shape.stencil&&(s=1==mxUtils.getValue(e.style,"stencilFlipH",0)||s,r=1==mxUtils.getValue(e.style,"stencilFlipV",0)||r),i!=mxConstants.DIRECTION_NORTH&&i!=mxConstants.DIRECTION_SOUTH||(l=s,s=r,r=l),s&&(o=-1,h=-n.width),r&&(a=-1,u=-n.height)),t=new mxPoint((t.x-n.x)*o-h+n.x,(t.y-n.y)*a-u+n.y),new mxConnectionConstraint(new mxPoint(0==n.width?0:Math.round(1e3*(t.x-n.x)/n.width)/1e3,0==n.height?0:Math.round(1e3*(t.y-n.y)/n.height)/1e3),!1)},mxGraph.prototype.getAllConnectionConstraints=function(t,e){return null!=t&&null!=t.shape&&null!=t.shape.stencil?t.shape.stencil.constraints:null},mxGraph.prototype.getConnectionConstraint=function(t,e,n){var i;(e=null)==(l=t.style[n?mxConstants.STYLE_EXIT_X:mxConstants.STYLE_ENTRY_X])||null!=(i=t.style[n?mxConstants.STYLE_EXIT_Y:mxConstants.STYLE_ENTRY_Y])&&(e=new mxPoint(parseFloat(l),parseFloat(i)));var l=!1,o=i=0;return null!=e&&(l=mxUtils.getValue(t.style,n?mxConstants.STYLE_EXIT_PERIMETER:mxConstants.STYLE_ENTRY_PERIMETER,!0),i=parseFloat(t.style[n?mxConstants.STYLE_EXIT_DX:mxConstants.STYLE_ENTRY_DX]),o=parseFloat(t.style[n?mxConstants.STYLE_EXIT_DY:mxConstants.STYLE_ENTRY_DY]),i=isFinite(i)?i:0,o=isFinite(o)?o:0),new mxConnectionConstraint(e,l,null,i,o)},mxGraph.prototype.setConnectionConstraint=function(t,e,n,i){if(null!=i){this.model.beginUpdate();try{null==i||null==i.point?(this.setCellStyles(n?mxConstants.STYLE_EXIT_X:mxConstants.STYLE_ENTRY_X,null,[t]),this.setCellStyles(n?mxConstants.STYLE_EXIT_Y:mxConstants.STYLE_ENTRY_Y,null,[t]),this.setCellStyles(n?mxConstants.STYLE_EXIT_DX:mxConstants.STYLE_ENTRY_DX,null,[t]),this.setCellStyles(n?mxConstants.STYLE_EXIT_DY:mxConstants.STYLE_ENTRY_DY,null,[t]),this.setCellStyles(n?mxConstants.STYLE_EXIT_PERIMETER:mxConstants.STYLE_ENTRY_PERIMETER,null,[t])):null!=i.point&&(this.setCellStyles(n?mxConstants.STYLE_EXIT_X:mxConstants.STYLE_ENTRY_X,i.point.x,[t]),this.setCellStyles(n?mxConstants.STYLE_EXIT_Y:mxConstants.STYLE_ENTRY_Y,i.point.y,[t]),this.setCellStyles(n?mxConstants.STYLE_EXIT_DX:mxConstants.STYLE_ENTRY_DX,i.dx,[t]),this.setCellStyles(n?mxConstants.STYLE_EXIT_DY:mxConstants.STYLE_ENTRY_DY,i.dy,[t]),this.setCellStyles(n?mxConstants.STYLE_EXIT_PERIMETER:mxConstants.STYLE_ENTRY_PERIMETER,i.perimeter?null:"0",[t]))}finally{this.model.endUpdate()}}},mxGraph.prototype.getConnectionPoint=function(t,e,n){n=null==n||n;var i,l,o,s,r,a=null;return null!=t&&null!=e.point&&(l=new mxPoint((i=this.view.getPerimeterBounds(t)).getCenterX(),i.getCenterY()),s=0,null!=(o=t.style[mxConstants.STYLE_DIRECTION])&&1==mxUtils.getValue(t.style,mxConstants.STYLE_ANCHOR_POINT_DIRECTION,1)&&(o==mxConstants.DIRECTION_NORTH?s+=270:o==mxConstants.DIRECTION_WEST?s+=180:o==mxConstants.DIRECTION_SOUTH&&(s+=90),o!=mxConstants.DIRECTION_NORTH&&o!=mxConstants.DIRECTION_SOUTH||i.rotate90()),a=new mxPoint(i.x+e.point.x*i.width+e.dx*(a=this.view.scale),i.y+e.point.y*i.height+e.dy*a),r=t.style[mxConstants.STYLE_ROTATION]||0,e.perimeter?(0!=s&&(o=i=0,90==s?o=1:180==s?i=-1:270==s&&(o=-1),a=mxUtils.getRotatedPoint(a,i,o,l)),a=this.view.getPerimeterPoint(t,a,!1)):(r+=s,this.getModel().isVertex(t.cell)&&(s=1==t.style[mxConstants.STYLE_FLIPH],e=1==t.style[mxConstants.STYLE_FLIPV],null!=t.shape&&null!=t.shape.stencil&&(s=1==mxUtils.getValue(t.style,"stencilFlipH",0)||s,e=1==mxUtils.getValue(t.style,"stencilFlipV",0)||e),o!=mxConstants.DIRECTION_NORTH&&o!=mxConstants.DIRECTION_SOUTH||(t=s,s=e,e=t),s&&(a.x=2*i.getCenterX()-a.x),e&&(a.y=2*i.getCenterY()-a.y))),0!=r&&null!=a&&(t=mxUtils.toRadians(r),i=Math.cos(t),o=Math.sin(t),a=mxUtils.getRotatedPoint(a,i,o,l))),n&&null!=a&&(a.x=Math.round(a.x),a.y=Math.round(a.y)),a},mxGraph.prototype.connectCell=function(t,e,n,i){this.model.beginUpdate();try{var l=this.model.getTerminal(t,n);this.cellConnected(t,e,n,i),this.fireEvent(new mxEventObject(mxEvent.CONNECT_CELL,"edge",t,"terminal",e,"source",n,"previous",l))}finally{this.model.endUpdate()}return t},mxGraph.prototype.cellConnected=function(t,e,n,i){if(null!=t){this.model.beginUpdate();try{var l=this.model.getTerminal(t,n);this.setConnectionConstraint(t,e,n,i),this.isPortsEnabled()&&(i=null,this.isPort(e)&&(i=e.getId(),e=this.getTerminalForPort(e,n)),this.setCellStyles(n?mxConstants.STYLE_SOURCE_PORT:mxConstants.STYLE_TARGET_PORT,i,[t])),this.model.setTerminal(t,e,n),this.resetEdgesOnConnect&&this.resetEdge(t),this.fireEvent(new mxEventObject(mxEvent.CELL_CONNECTED,"edge",t,"terminal",e,"source",n,"previous",l))}finally{this.model.endUpdate()}}},mxGraph.prototype.disconnectGraph=function(t){if(null!=t){this.model.beginUpdate();try{for(var e=this.view.scale,n=this.view.translate,i=new mxDictionary,l=0;l<t.length;l++)i.put(t[l],!0);for(l=0;l<t.length;l++)if(this.model.isEdge(t[l])&&null!=(r=this.model.getGeometry(t[l]))){var o=this.view.getState(t[l]),s=this.view.getState(this.model.getParent(t[l]));if(null!=o&&null!=s){var r=r.clone(),a=-s.origin.x,h=-s.origin.y,u=o.absolutePoints,d=this.model.getTerminal(t[l],!0);if(null!=d&&this.isCellDisconnectable(t[l],d,!0)){for(;null!=d&&!i.get(d);)d=this.model.getParent(d);null==d&&(r.setTerminalPoint(new mxPoint(u[0].x/e-n.x+a,u[0].y/e-n.y+h),!0),this.model.setTerminal(t[l],null,!0))}var c,p=this.model.getTerminal(t[l],!1);if(null!=p&&this.isCellDisconnectable(t[l],p,!1)){for(;null!=p&&!i.get(p);)p=this.model.getParent(p);null==p&&(r.setTerminalPoint(new mxPoint(u[c=u.length-1].x/e-n.x+a,u[c].y/e-n.y+h),!1),this.model.setTerminal(t[l],null,!1))}this.model.setGeometry(t[l],r)}}}finally{this.model.endUpdate()}}},mxGraph.prototype.getCurrentRoot=function(){return this.view.currentRoot},mxGraph.prototype.getTranslateForRoot=function(t){return null},mxGraph.prototype.isPort=function(t){return!1},mxGraph.prototype.getTerminalForPort=function(t,e){return this.model.getParent(t)},mxGraph.prototype.getChildOffsetForCell=function(t){return null},mxGraph.prototype.enterGroup=function(t){null!=(t=t||this.getSelectionCell())&&this.isValidRoot(t)&&(this.view.setCurrentRoot(t),this.clearSelection())},mxGraph.prototype.exitGroup=function(){var t=this.model.getRoot(),e=this.getCurrentRoot();if(null!=e){for(var n=this.model.getParent(e);n!=t&&!this.isValidRoot(n)&&this.model.getParent(n)!=t;)n=this.model.getParent(n);n==t||this.model.getParent(n)==t?this.view.setCurrentRoot(null):this.view.setCurrentRoot(n),null!=this.view.getState(e)&&this.setSelectionCell(e)}},mxGraph.prototype.home=function(){var t=this.getCurrentRoot();null!=t&&(this.view.setCurrentRoot(null),null!=this.view.getState(t)&&this.setSelectionCell(t))},mxGraph.prototype.isValidRoot=function(t){return null!=t},mxGraph.prototype.getGraphBounds=function(){return this.view.getGraphBounds()},mxGraph.prototype.getCellBounds=function(t,e,n){var i=[t];if(e&&(i=i.concat(this.model.getEdges(t))),i=this.view.getBounds(i),n){n=this.model.getChildCount(t);for(var l=0;l<n;l++){var o=this.getCellBounds(this.model.getChildAt(t,l),e,!0);null!=i?i.add(o):i=o}}return i},mxGraph.prototype.getBoundingBoxFromGeometry=function(t,e){e=null!=e&&e;var n=null;if(null!=t)for(var i=0;i<t.length;i++)if(e||this.model.isVertex(t[i])){var l=this.getCellGeometry(t[i]);if(null!=l){var o=null;if(this.model.isEdge(t[i])){if(o=function(t){null!=t&&(null==s?s=new mxRectangle(t.x,t.y,0,0):s.add(new mxRectangle(t.x,t.y,0,0)))},null==this.model.getTerminal(t[i],!0)&&o(l.getTerminalPoint(!0)),null==this.model.getTerminal(t[i],!1)&&o(l.getTerminalPoint(!1)),null!=(l=l.points)&&0<l.length)for(var s=new mxRectangle(l[0].x,l[0].y,0,0),r=1;r<l.length;r++)o(l[r]);o=s}else r=this.model.getParent(t[i]),l.relative?this.model.isVertex(r)&&r!=this.view.currentRoot&&null!=(s=this.getBoundingBoxFromGeometry([r],!1))&&(o=new mxRectangle(l.x*s.width,l.y*s.height,l.width,l.height),0<=mxUtils.indexOf(t,r)&&(o.x+=s.x,o.y+=s.y)):(o=mxRectangle.fromRectangle(l),this.model.isVertex(r)&&0<=mxUtils.indexOf(t,r)&&null!=(s=this.getBoundingBoxFromGeometry([r],!1))&&(o.x+=s.x,o.y+=s.y)),null!=o&&null!=l.offset&&(o.x+=l.offset.x,o.y+=l.offset.y),l=this.getCurrentCellStyle(t[i]),null!=o&&0!=(l=mxUtils.getValue(l,mxConstants.STYLE_ROTATION,0))&&(o=mxUtils.getBoundingBox(o,l));null!=o&&(null==n?n=mxRectangle.fromRectangle(o):n.add(o))}}return n},mxGraph.prototype.refresh=function(t){this.view.clear(t,null==t),this.view.validate(),this.sizeDidChange(),this.fireEvent(new mxEventObject(mxEvent.REFRESH))},mxGraph.prototype.snap=function(t){return this.gridEnabled?Math.round(t/this.gridSize)*this.gridSize:t},mxGraph.prototype.snapDelta=function(t,e,n,i,l){var o=this.view.translate,s=this.view.scale;return!n&&this.gridEnabled?(n=this.gridSize*s*.5,i||(i=e.x-(this.snap(e.x/s-o.x)+o.x)*s,t.x=Math.abs(t.x-i)<n?0:this.snap(t.x/s)*s-i),l||(e=e.y-(this.snap(e.y/s-o.y)+o.y)*s,t.y=Math.abs(t.y-e)<n?0:this.snap(t.y/s)*s-e)):(n=.5*s,i||(i=e.x-(Math.round(e.x/s-o.x)+o.x)*s,t.x=Math.abs(t.x-i)<n?0:Math.round(t.x/s)*s-i),l||(e=e.y-(Math.round(e.y/s-o.y)+o.y)*s,t.y=Math.abs(t.y-e)<n?0:Math.round(t.y/s)*s-e)),t},mxGraph.prototype.panGraph=function(t,e){if(this.useScrollbarsForPanning&&mxUtils.hasScrollbars(this.container))this.container.scrollLeft=-t,this.container.scrollTop=-e;else{var n=this.view.getCanvas();if(this.dialect==mxConstants.DIALECT_SVG)if(0==t&&0==e){if(mxClient.IS_IE?n.setAttribute("transform","translate("+t+","+e+")"):n.removeAttribute("transform"),null!=this.shiftPreview1){for(var i=this.shiftPreview1.firstChild;null!=i;){var l=i.nextSibling;this.container.appendChild(i),i=l}for(null!=this.shiftPreview1.parentNode&&this.shiftPreview1.parentNode.removeChild(this.shiftPreview1),this.shiftPreview1=null,this.container.appendChild(n.parentNode),i=this.shiftPreview2.firstChild;null!=i;)l=i.nextSibling,this.container.appendChild(i),i=l;null!=this.shiftPreview2.parentNode&&this.shiftPreview2.parentNode.removeChild(this.shiftPreview2),this.shiftPreview2=null}}else{if(n.setAttribute("transform","translate("+t+","+e+")"),null==this.shiftPreview1){this.shiftPreview1=document.createElement("div"),this.shiftPreview1.style.position="absolute",this.shiftPreview1.style.overflow="visible",this.shiftPreview2=document.createElement("div"),this.shiftPreview2.style.position="absolute",this.shiftPreview2.style.overflow="visible";var o=this.shiftPreview1;for(i=this.container.firstChild;null!=i;)l=i.nextSibling,i!=n.parentNode?o.appendChild(i):o=this.shiftPreview2,i=l;null!=this.shiftPreview1.firstChild&&this.container.insertBefore(this.shiftPreview1,n.parentNode),null!=this.shiftPreview2.firstChild&&this.container.appendChild(this.shiftPreview2)}this.shiftPreview1.style.left=t+"px",this.shiftPreview1.style.top=e+"px",this.shiftPreview2.style.left=t+"px",this.shiftPreview2.style.top=e+"px"}else n.style.left=t+"px",n.style.top=e+"px";this.panDx=t,this.panDy=e,this.fireEvent(new mxEventObject(mxEvent.PAN))}},mxGraph.prototype.zoomIn=function(){this.zoom(this.zoomFactor)},mxGraph.prototype.zoomOut=function(){this.zoom(1/this.zoomFactor)},mxGraph.prototype.zoomActual=function(){1==this.view.scale?this.view.setTranslate(0,0):(this.view.translate.x=0,this.view.translate.y=0,this.view.setScale(1))},mxGraph.prototype.zoomTo=function(t,e){this.zoom(t/this.view.scale,e)},mxGraph.prototype.center=function(t,e,n,i){t=null==t||t,e=null==e||e,n=null!=n?n:.5,i=null!=i?i:.5;var l=mxUtils.hasScrollbars(this.container),o=2*this.getBorder(),s=this.container.clientWidth-o,r=(o=this.container.clientHeight-o,this.getGraphBounds()),a=this.view.translate,h=this.view.scale,u=t?s-r.width:0,d=e?o-r.height:0;l?(r.x-=a.x,r.y-=a.y,s<(t=this.container.scrollWidth)&&(u=0),o<(e=this.container.scrollHeight)&&(d=0),this.view.setTranslate(Math.floor(u/2-r.x),Math.floor(d/2-r.y)),this.container.scrollLeft=(t-s)/2,this.container.scrollTop=(e-o)/2):this.view.setTranslate(t?Math.floor(a.x-r.x/h+u*n/h):a.x,e?Math.floor(a.y-r.y/h+d*i/h):a.y)},mxGraph.prototype.zoom=function(t,e){e=null!=e?e:this.centerZoom;var n,i,l,o,s,r=Math.round(this.view.scale*t*100)/100,a=this.view.getState(this.getSelectionCell());t=r/this.view.scale,this.keepSelectionVisibleOnZoom&&null!=a?(a=new mxRectangle(a.x*t,a.y*t,a.width*t,a.height*t),this.view.scale=r,this.scrollRectToVisible(a)||(this.view.revalidate(),this.view.setScale(r))):(a=mxUtils.hasScrollbars(this.container),e&&!a?(a=this.container.offsetWidth,n=this.container.offsetHeight,1<t?(a*=-(i=(t-1)/(2*r)),n*=-i):(a*=i=(1/t-1)/(2*this.view.scale),n*=i),this.view.scaleAndTranslate(r,this.view.translate.x+a,this.view.translate.y+n)):(i=this.view.translate.x,l=this.view.translate.y,o=this.container.scrollLeft,s=this.container.scrollTop,this.view.setScale(r),a&&(n=a=0,e&&(a=this.container.offsetWidth*(t-1)/2,n=this.container.offsetHeight*(t-1)/2),this.container.scrollLeft=(this.view.translate.x-i)*this.view.scale+Math.round(o*t+a),this.container.scrollTop=(this.view.translate.y-l)*this.view.scale+Math.round(s*t+n))))},mxGraph.prototype.zoomToRect=function(t){var e=this.container.clientWidth/t.width/(this.container.clientHeight/t.height);t.x=Math.max(0,t.x),t.y=Math.max(0,t.y);var n=Math.min(this.container.scrollWidth,t.x+t.width),i=Math.min(this.container.scrollHeight,t.y+t.height);t.width=n-t.x,t.height=i-t.y,e<1?(n=((e=t.height/e)-t.height)/2,t.height=e,t.y-=Math.min(t.y,n),i=Math.min(this.container.scrollHeight,t.y+t.height),t.height=i-t.y):(n=((e*=t.width)-t.width)/2,t.width=e,t.x-=Math.min(t.x,n),n=Math.min(this.container.scrollWidth,t.x+t.width),t.width=n-t.x),n=this.view.scale*(e=this.container.clientWidth/t.width),mxUtils.hasScrollbars(this.container)?(this.view.setScale(n),this.container.scrollLeft=Math.round(t.x*e),this.container.scrollTop=Math.round(t.y*e)):this.view.scaleAndTranslate(n,this.view.translate.x-t.x/this.view.scale,this.view.translate.y-t.y/this.view.scale)},mxGraph.prototype.scrollCellToVisible=function(t,e){var n=-this.view.translate.x,i=-this.view.translate.y;null!=(t=this.view.getState(t))&&(n=new mxRectangle(n+t.x,i+t.y,t.width,t.height),e&&null!=this.container&&(i=this.container.clientWidth,t=this.container.clientHeight,n.x=n.getCenterX()-i/2,n.width=i,n.y=n.getCenterY()-t/2,n.height=t),i=new mxPoint(this.view.translate.x,this.view.translate.y),this.scrollRectToVisible(n)&&(n=new mxPoint(this.view.translate.x,this.view.translate.y),this.view.translate.x=i.x,this.view.translate.y=i.y,this.view.setTranslate(n.x,n.y)))},mxGraph.prototype.scrollRectToVisible=function(t){var e,n,i,l,o,s,r,a=!1;return null!=t&&(e=this.container.offsetWidth,l=this.container.offsetHeight,n=Math.min(e,t.width),i=Math.min(l,t.height),mxUtils.hasScrollbars(this.container)?(e=this.container,t.x+=this.view.translate.x,t.y+=this.view.translate.y,o=e.scrollLeft-t.x,l=Math.max(o-e.scrollLeft,0),0<o?e.scrollLeft-=o+2:0<(o=t.x+n-e.scrollLeft-e.clientWidth)&&(e.scrollLeft+=o+2),n=e.scrollTop-t.y,o=Math.max(0,n-e.scrollTop),0<n?e.scrollTop-=n+2:0<(n=t.y+i-e.scrollTop-e.clientHeight)&&(e.scrollTop+=n+2),this.useScrollbarsForPanning||0==l&&0==o||this.view.setTranslate(l,o)):(s=-this.view.translate.y,r=this.view.scale,t.x+n>(o=-this.view.translate.x)+e&&(this.view.translate.x-=(t.x+n-e-o)/r,a=!0),t.y+i>s+l&&(this.view.translate.y-=(t.y+i-l-s)/r,a=!0),t.x<o&&(this.view.translate.x+=(o-t.x)/r,a=!0),t.y<s&&(this.view.translate.y+=(s-t.y)/r,a=!0),a&&(this.view.refresh(),null!=this.selectionCellsHandler&&this.selectionCellsHandler.refresh()))),a},mxGraph.prototype.getCellGeometry=function(t){return this.model.getGeometry(t)},mxGraph.prototype.isCellVisible=function(t){return this.model.isVisible(t)},mxGraph.prototype.isCellCollapsed=function(t){return this.model.isCollapsed(t)},mxGraph.prototype.isCellConnectable=function(t){return this.model.isConnectable(t)},mxGraph.prototype.isOrthogonal=function(t){var e=t.style[mxConstants.STYLE_ORTHOGONAL];return null!=e?e:(t=this.view.getEdgeStyle(t))==mxEdgeStyle.SegmentConnector||t==mxEdgeStyle.ElbowConnector||t==mxEdgeStyle.SideToSide||t==mxEdgeStyle.TopToBottom||t==mxEdgeStyle.EntityRelation||t==mxEdgeStyle.OrthConnector},mxGraph.prototype.isLoop=function(t){var e=t.getVisibleTerminalState(!0);return t=t.getVisibleTerminalState(!1),null!=e&&e==t},mxGraph.prototype.isCloneEvent=function(t){return mxEvent.isControlDown(t)},mxGraph.prototype.isTransparentClickEvent=function(t){return!1},mxGraph.prototype.isToggleEvent=function(t){return mxClient.IS_MAC?mxEvent.isMetaDown(t):mxEvent.isControlDown(t)},mxGraph.prototype.isGridEnabledEvent=function(t){return null!=t&&!mxEvent.isAltDown(t)},mxGraph.prototype.isConstrainedEvent=function(t){return mxEvent.isShiftDown(t)},mxGraph.prototype.isIgnoreTerminalEvent=function(t){return!1},mxGraph.prototype.validationAlert=function(t){mxUtils.alert(t)},mxGraph.prototype.isEdgeValid=function(t,e,n){return null==this.getEdgeValidationError(t,e,n)},mxGraph.prototype.getEdgeValidationError=function(t,e,n){if(null!=t&&!this.isAllowDanglingEdges()&&(null==e||null==n))return"";if(null!=t&&null==this.model.getTerminal(t,!0)&&null==this.model.getTerminal(t,!1))return null;if(!this.allowLoops&&e==n&&null!=e||!this.isValidConnection(e,n))return"";if(null==e||null==n)return this.allowDanglingEdges?null:"";var i="";this.multigraph||(1<(l=this.model.getEdgesBetween(e,n,!0)).length||1==l.length&&l[0]!=t)&&(i+=(mxResources.get(this.alreadyConnectedResource)||this.alreadyConnectedResource)+"\n");var l=this.model.getDirectedEdgeCount(e,!0,t),o=this.model.getDirectedEdgeCount(n,!1,t);if(null!=this.multiplicities)for(var s=0;s<this.multiplicities.length;s++){var r=this.multiplicities[s].check(this,t,e,n,l,o);null!=r&&(i+=r)}return null!=(r=this.validateEdge(t,e,n))&&(i+=r),0<i.length?i:null},mxGraph.prototype.validateEdge=function(t,e,n){return null},mxGraph.prototype.validateGraph=function(t,e){t=null!=t?t:this.model.getRoot(),e=null!=e?e:{};for(var n=!0,i=this.model.getChildCount(t),l=0;l<i;l++){var o=this.model.getChildAt(t,l),s=e;this.isValidRoot(o)&&(s={}),null!=(s=this.validateGraph(o,s))?this.setCellWarning(o,s.replace(/\n/g,"<br>")):this.setCellWarning(o,null),n=n&&null==s}return i="",this.isCellCollapsed(t)&&!n&&(i+=(mxResources.get(this.containsValidationErrorsResource)||this.containsValidationErrorsResource)+"\n"),i=this.model.isEdge(t)?i+(this.getEdgeValidationError(t,this.model.getTerminal(t,!0),this.model.getTerminal(t,!1))||""):i+(this.getCellValidationError(t)||""),null!=(l=this.validateCell(t,e))&&(i+=l),null==this.model.getParent(t)&&this.view.validate(),0<i.length||!n?i:null},mxGraph.prototype.getCellValidationError=function(t){var e=this.model.getDirectedEdgeCount(t,!0),n=this.model.getDirectedEdgeCount(t,!1);t=this.model.getValue(t);var i="";if(null!=this.multiplicities)for(var l=0;l<this.multiplicities.length;l++){var o=this.multiplicities[l];(o.source&&mxUtils.isNode(t,o.type,o.attr,o.value)&&(e>o.max||e<o.min)||!o.source&&mxUtils.isNode(t,o.type,o.attr,o.value)&&(n>o.max||n<o.min))&&(i+=o.countError+"\n")}return 0<i.length?i:null},mxGraph.prototype.validateCell=function(t,e){return null},mxGraph.prototype.getBackgroundImage=function(){return this.backgroundImage},mxGraph.prototype.setBackgroundImage=function(t){this.backgroundImage=t},mxGraph.prototype.getFoldingImage=function(t){if(null!=t&&this.foldingEnabled&&!this.getModel().isEdge(t.cell)){var e=this.isCellCollapsed(t.cell);if(this.isCellFoldable(t.cell,!e))return e?this.collapsedImage:this.expandedImage}return null},mxGraph.prototype.convertValueToString=function(t){if(null!=(t=this.model.getValue(t))){if(mxUtils.isNode(t))return t.nodeName;if("function"==typeof t.toString)return t.toString()}return""},mxGraph.prototype.getLabel=function(t){var e,n="";return this.labelsVisible&&null!=t&&(e=this.getCurrentCellStyle(t),mxUtils.getValue(e,mxConstants.STYLE_NOLABEL,!1)||(n=this.convertValueToString(t))),n},mxGraph.prototype.isHtmlLabel=function(t){return this.isHtmlLabels()},mxGraph.prototype.isHtmlLabels=function(){return this.htmlLabels},mxGraph.prototype.setHtmlLabels=function(t){this.htmlLabels=t},mxGraph.prototype.isWrapping=function(t){return"wrap"==this.getCurrentCellStyle(t)[mxConstants.STYLE_WHITE_SPACE]},mxGraph.prototype.isLabelClipped=function(t){return"hidden"==this.getCurrentCellStyle(t)[mxConstants.STYLE_OVERFLOW]},mxGraph.prototype.getTooltip=function(t,e,n,i){var l=null;return null!=t&&(null==t.control||e!=t.control.node&&e.parentNode!=t.control.node||(l=mxUtils.htmlEntities(mxResources.get(l=this.collapseExpandResource)||l).replace(/\\n/g,"<br>")),null==l&&null!=t.overlays&&t.overlays.visit(function(t,n){null!=l||e!=n.node&&e.parentNode!=n.node||(l=n.overlay.toString())}),null==l&&null!=(n=this.selectionCellsHandler.getHandler(t.cell))&&"function"==typeof n.getTooltipForNode&&(l=n.getTooltipForNode(e)),null==l&&(l=this.getTooltipForCell(t.cell))),l},mxGraph.prototype.getTooltipForCell=function(t){return null!=t&&null!=t.getTooltip?t.getTooltip():this.convertValueToString(t)},mxGraph.prototype.getLinkForCell=function(t){return null},mxGraph.prototype.getLinkTargetForCell=function(t){return null},mxGraph.prototype.getCursorForMouseEvent=function(t){return this.getCursorForCell(t.getCell())},mxGraph.prototype.getCursorForCell=function(t){return null},mxGraph.prototype.getStartSize=function(t,e){var n=new mxRectangle;return t=this.getCurrentCellStyle(t,e),e=parseInt(mxUtils.getValue(t,mxConstants.STYLE_STARTSIZE,mxConstants.DEFAULT_STARTSIZE)),mxUtils.getValue(t,mxConstants.STYLE_HORIZONTAL,!0)?n.height=e:n.width=e,n},mxGraph.prototype.getSwimlaneDirection=function(t){var e=mxUtils.getValue(t,mxConstants.STYLE_DIRECTION,mxConstants.DIRECTION_EAST),n=1==mxUtils.getValue(t,mxConstants.STYLE_FLIPH,0),i=1==mxUtils.getValue(t,mxConstants.STYLE_FLIPV,0);return t=mxUtils.getValue(t,mxConstants.STYLE_HORIZONTAL,!0)?0:3,e==mxConstants.DIRECTION_NORTH?t--:e==mxConstants.DIRECTION_WEST?t+=2:e==mxConstants.DIRECTION_SOUTH&&(t+=1),e=mxUtils.mod(t,2),n&&1==e&&(t+=2),i&&0==e&&(t+=2),[mxConstants.DIRECTION_NORTH,mxConstants.DIRECTION_EAST,mxConstants.DIRECTION_SOUTH,mxConstants.DIRECTION_WEST][mxUtils.mod(t,4)]},mxGraph.prototype.getActualStartSize=function(t,e){var n=new mxRectangle;return this.isSwimlane(t,e)&&(t=this.getCurrentCellStyle(t,e),e=parseInt(mxUtils.getValue(t,mxConstants.STYLE_STARTSIZE,mxConstants.DEFAULT_STARTSIZE)),(t=this.getSwimlaneDirection(t))==mxConstants.DIRECTION_NORTH?n.y=e:t==mxConstants.DIRECTION_WEST?n.x=e:t==mxConstants.DIRECTION_SOUTH?n.height=e:n.width=e),n},mxGraph.prototype.getImage=function(t){return null!=t&&null!=t.style?t.style[mxConstants.STYLE_IMAGE]:null},mxGraph.prototype.isTransparentState=function(t){var e,n=!1;return null!=t&&(n=mxUtils.getValue(t.style,mxConstants.STYLE_STROKECOLOR,mxConstants.NONE),e=mxUtils.getValue(t.style,mxConstants.STYLE_FILLCOLOR,mxConstants.NONE),n=n==mxConstants.NONE&&e==mxConstants.NONE&&null==this.getImage(t)),n},mxGraph.prototype.getVerticalAlign=function(t){return null!=t&&null!=t.style?t.style[mxConstants.STYLE_VERTICAL_ALIGN]||mxConstants.ALIGN_MIDDLE:null},mxGraph.prototype.getIndicatorColor=function(t){return null!=t&&null!=t.style?t.style[mxConstants.STYLE_INDICATOR_COLOR]:null},mxGraph.prototype.getIndicatorGradientColor=function(t){return null!=t&&null!=t.style?t.style[mxConstants.STYLE_INDICATOR_GRADIENTCOLOR]:null},mxGraph.prototype.getIndicatorShape=function(t){return null!=t&&null!=t.style?t.style[mxConstants.STYLE_INDICATOR_SHAPE]:null},mxGraph.prototype.getIndicatorImage=function(t){return null!=t&&null!=t.style?t.style[mxConstants.STYLE_INDICATOR_IMAGE]:null},mxGraph.prototype.getBorder=function(){return this.border},mxGraph.prototype.setBorder=function(t){this.border=t},mxGraph.prototype.isSwimlane=function(t,e){return null!=t&&this.model.getParent(t)!=this.model.getRoot()&&!this.model.isEdge(t)&&this.getCurrentCellStyle(t,e)[mxConstants.STYLE_SHAPE]==mxConstants.SHAPE_SWIMLANE},mxGraph.prototype.isResizeContainer=function(){return this.resizeContainer},mxGraph.prototype.setResizeContainer=function(t){this.resizeContainer=t},mxGraph.prototype.isEnabled=function(){return this.enabled},mxGraph.prototype.setEnabled=function(t){this.enabled=t},mxGraph.prototype.isEscapeEnabled=function(){return this.escapeEnabled},mxGraph.prototype.setEscapeEnabled=function(t){this.escapeEnabled=t},mxGraph.prototype.isInvokesStopCellEditing=function(){return this.invokesStopCellEditing},mxGraph.prototype.setInvokesStopCellEditing=function(t){this.invokesStopCellEditing=t},mxGraph.prototype.isEnterStopsCellEditing=function(){return this.enterStopsCellEditing},mxGraph.prototype.setEnterStopsCellEditing=function(t){this.enterStopsCellEditing=t},mxGraph.prototype.isCellLocked=function(t){var e=this.model.getGeometry(t);return this.isCellsLocked()||null!=e&&this.model.isVertex(t)&&e.relative},mxGraph.prototype.isCellsLocked=function(){return this.cellsLocked},mxGraph.prototype.setCellsLocked=function(t){this.cellsLocked=t},mxGraph.prototype.getCloneableCells=function(t){return this.model.filterCells(t,mxUtils.bind(this,function(t){return this.isCellCloneable(t)}))},mxGraph.prototype.isCellCloneable=function(t){return t=this.getCurrentCellStyle(t),this.isCellsCloneable()&&0!=t[mxConstants.STYLE_CLONEABLE]},mxGraph.prototype.isCellsCloneable=function(){return this.cellsCloneable},mxGraph.prototype.setCellsCloneable=function(t){this.cellsCloneable=t},mxGraph.prototype.getExportableCells=function(t){return this.model.filterCells(t,mxUtils.bind(this,function(t){return this.canExportCell(t)}))},mxGraph.prototype.canExportCell=function(t){return this.exportEnabled},mxGraph.prototype.getImportableCells=function(t){return this.model.filterCells(t,mxUtils.bind(this,function(t){return this.canImportCell(t)}))},mxGraph.prototype.canImportCell=function(t){return this.importEnabled},mxGraph.prototype.isCellSelectable=function(t){return this.isCellsSelectable()},mxGraph.prototype.isCellsSelectable=function(){return this.cellsSelectable},mxGraph.prototype.setCellsSelectable=function(t){this.cellsSelectable=t},mxGraph.prototype.getDeletableCells=function(t){return this.model.filterCells(t,mxUtils.bind(this,function(t){return this.isCellDeletable(t)}))},mxGraph.prototype.isCellDeletable=function(t){return t=this.getCurrentCellStyle(t),this.isCellsDeletable()&&0!=t[mxConstants.STYLE_DELETABLE]},mxGraph.prototype.isCellsDeletable=function(){return this.cellsDeletable},mxGraph.prototype.setCellsDeletable=function(t){this.cellsDeletable=t},mxGraph.prototype.isLabelMovable=function(t){return!this.isCellLocked(t)&&(this.model.isEdge(t)&&this.edgeLabelsMovable||this.model.isVertex(t)&&this.vertexLabelsMovable)},mxGraph.prototype.isCellRotatable=function(t){return 0!=this.getCurrentCellStyle(t)[mxConstants.STYLE_ROTATABLE]},mxGraph.prototype.getMovableCells=function(t){return this.model.filterCells(t,mxUtils.bind(this,function(t){return this.isCellMovable(t)}))},mxGraph.prototype.isCellMovable=function(t){var e=this.getCurrentCellStyle(t);return this.isCellsMovable()&&!this.isCellLocked(t)&&0!=e[mxConstants.STYLE_MOVABLE]},mxGraph.prototype.isCellsMovable=function(){return this.cellsMovable},mxGraph.prototype.setCellsMovable=function(t){this.cellsMovable=t},mxGraph.prototype.isGridEnabled=function(){return this.gridEnabled},mxGraph.prototype.setGridEnabled=function(t){this.gridEnabled=t},mxGraph.prototype.isPortsEnabled=function(){return this.portsEnabled},mxGraph.prototype.setPortsEnabled=function(t){this.portsEnabled=t},mxGraph.prototype.getGridSize=function(){return this.gridSize},mxGraph.prototype.setGridSize=function(t){this.gridSize=t},mxGraph.prototype.getTolerance=function(){return this.tolerance},mxGraph.prototype.setTolerance=function(t){this.tolerance=t},mxGraph.prototype.isVertexLabelsMovable=function(){return this.vertexLabelsMovable},mxGraph.prototype.setVertexLabelsMovable=function(t){this.vertexLabelsMovable=t},mxGraph.prototype.isEdgeLabelsMovable=function(){return this.edgeLabelsMovable},mxGraph.prototype.setEdgeLabelsMovable=function(t){this.edgeLabelsMovable=t},mxGraph.prototype.isSwimlaneNesting=function(){return this.swimlaneNesting},mxGraph.prototype.setSwimlaneNesting=function(t){this.swimlaneNesting=t},mxGraph.prototype.isSwimlaneSelectionEnabled=function(){return this.swimlaneSelectionEnabled},mxGraph.prototype.setSwimlaneSelectionEnabled=function(t){this.swimlaneSelectionEnabled=t},mxGraph.prototype.isMultigraph=function(){return this.multigraph},mxGraph.prototype.setMultigraph=function(t){this.multigraph=t},mxGraph.prototype.isAllowLoops=function(){return this.allowLoops},mxGraph.prototype.setAllowDanglingEdges=function(t){this.allowDanglingEdges=t},mxGraph.prototype.isAllowDanglingEdges=function(){return this.allowDanglingEdges},mxGraph.prototype.setConnectableEdges=function(t){this.connectableEdges=t},mxGraph.prototype.isConnectableEdges=function(){return this.connectableEdges},mxGraph.prototype.setCloneInvalidEdges=function(t){this.cloneInvalidEdges=t},mxGraph.prototype.isCloneInvalidEdges=function(){return this.cloneInvalidEdges},mxGraph.prototype.setAllowLoops=function(t){this.allowLoops=t},mxGraph.prototype.isDisconnectOnMove=function(){return this.disconnectOnMove},mxGraph.prototype.setDisconnectOnMove=function(t){this.disconnectOnMove=t},mxGraph.prototype.isDropEnabled=function(){return this.dropEnabled},mxGraph.prototype.setDropEnabled=function(t){this.dropEnabled=t},mxGraph.prototype.isSplitEnabled=function(){return this.splitEnabled},mxGraph.prototype.setSplitEnabled=function(t){this.splitEnabled=t},mxGraph.prototype.isCellResizable=function(t){var e=this.getCurrentCellStyle(t);return this.isCellsResizable()&&!this.isCellLocked(t)&&"0"!=mxUtils.getValue(e,mxConstants.STYLE_RESIZABLE,"1")},mxGraph.prototype.isCellsResizable=function(){return this.cellsResizable},mxGraph.prototype.setCellsResizable=function(t){this.cellsResizable=t},mxGraph.prototype.isTerminalPointMovable=function(t,e){return!0},mxGraph.prototype.isCellBendable=function(t){var e=this.getCurrentCellStyle(t);return this.isCellsBendable()&&!this.isCellLocked(t)&&0!=e[mxConstants.STYLE_BENDABLE]},mxGraph.prototype.isCellsBendable=function(){return this.cellsBendable},mxGraph.prototype.setCellsBendable=function(t){this.cellsBendable=t},mxGraph.prototype.isCellEditable=function(t){var e=this.getCurrentCellStyle(t);return this.isCellsEditable()&&!this.isCellLocked(t)&&0!=e[mxConstants.STYLE_EDITABLE]},mxGraph.prototype.isCellsEditable=function(){return this.cellsEditable},mxGraph.prototype.setCellsEditable=function(t){this.cellsEditable=t},mxGraph.prototype.isCellDisconnectable=function(t,e,n){return this.isCellsDisconnectable()&&!this.isCellLocked(t)},mxGraph.prototype.isCellsDisconnectable=function(){return this.cellsDisconnectable},mxGraph.prototype.setCellsDisconnectable=function(t){this.cellsDisconnectable=t},mxGraph.prototype.isValidSource=function(t){return null==t&&this.allowDanglingEdges||null!=t&&(!this.model.isEdge(t)||this.connectableEdges)&&this.isCellConnectable(t)},mxGraph.prototype.isValidTarget=function(t){return this.isValidSource(t)},mxGraph.prototype.isValidConnection=function(t,e){return this.isValidSource(t)&&this.isValidTarget(e)},mxGraph.prototype.setConnectable=function(t){this.connectionHandler.setEnabled(t)},mxGraph.prototype.isConnectable=function(){return this.connectionHandler.isEnabled()},mxGraph.prototype.setTooltips=function(t){this.tooltipHandler.setEnabled(t)},mxGraph.prototype.setPanning=function(t){this.panningHandler.panningEnabled=t},mxGraph.prototype.isEditing=function(t){if(null==this.cellEditor)return!1;var e=this.cellEditor.getEditingCell();return null==t?null!=e:t==e},mxGraph.prototype.isAutoSizeCell=function(t){return t=this.getCurrentCellStyle(t),this.isAutoSizeCells()||1==t[mxConstants.STYLE_AUTOSIZE]},mxGraph.prototype.isAutoSizeCells=function(){return this.autoSizeCells},mxGraph.prototype.setAutoSizeCells=function(t){this.autoSizeCells=t},mxGraph.prototype.isExtendParent=function(t){return!this.getModel().isEdge(t)&&this.isExtendParents()},mxGraph.prototype.isExtendParents=function(){return this.extendParents},mxGraph.prototype.setExtendParents=function(t){this.extendParents=t},mxGraph.prototype.isExtendParentsOnAdd=function(t){return this.extendParentsOnAdd},mxGraph.prototype.setExtendParentsOnAdd=function(t){this.extendParentsOnAdd=t},mxGraph.prototype.isExtendParentsOnMove=function(){return this.extendParentsOnMove},mxGraph.prototype.setExtendParentsOnMove=function(t){this.extendParentsOnMove=t},mxGraph.prototype.isRecursiveResize=function(t){return this.recursiveResize},mxGraph.prototype.setRecursiveResize=function(t){this.recursiveResize=t},mxGraph.prototype.isConstrainChild=function(t){return this.isConstrainChildren()&&!this.getModel().isEdge(this.getModel().getParent(t))},mxGraph.prototype.isConstrainChildren=function(){return this.constrainChildren},mxGraph.prototype.setConstrainChildren=function(t){this.constrainChildren=t},mxGraph.prototype.isConstrainRelativeChildren=function(){return this.constrainRelativeChildren},mxGraph.prototype.setConstrainRelativeChildren=function(t){this.constrainRelativeChildren=t},mxGraph.prototype.isAllowNegativeCoordinates=function(){return this.allowNegativeCoordinates},mxGraph.prototype.setAllowNegativeCoordinates=function(t){this.allowNegativeCoordinates=t},mxGraph.prototype.getOverlap=function(t){return this.isAllowOverlapParent(t)?this.defaultOverlap:0},mxGraph.prototype.isAllowOverlapParent=function(t){return!1},mxGraph.prototype.getFoldableCells=function(t,e){return this.model.filterCells(t,mxUtils.bind(this,function(t){return this.isCellFoldable(t,e)}))},mxGraph.prototype.isCellFoldable=function(t,e){var n=this.getCurrentCellStyle(t);return 0<this.model.getChildCount(t)&&0!=n[mxConstants.STYLE_FOLDABLE]},mxGraph.prototype.isValidDropTarget=function(t,e,n){return null!=t&&(this.isSplitEnabled()&&this.isSplitTarget(t,e,n)||!this.model.isEdge(t)&&(this.isSwimlane(t)||0<this.model.getChildCount(t)&&!this.isCellCollapsed(t)))},mxGraph.prototype.isSplitTarget=function(t,e,n){return!(!this.model.isEdge(t)||null==e||1!=e.length||!this.isCellConnectable(e[0])||null!=this.getEdgeValidationError(t,this.model.getTerminal(t,!0),e[0])||(n=this.model.getTerminal(t,!0),t=this.model.getTerminal(t,!1),this.model.isAncestor(e[0],n)||this.model.isAncestor(e[0],t)))},mxGraph.prototype.getDropTarget=function(t,e,n,i){if(!this.isSwimlaneNesting())for(var l=0;l<t.length;l++)if(this.isSwimlane(t[l]))return null;if((l=mxUtils.convertPoint(this.container,mxEvent.getClientX(e),mxEvent.getClientY(e))).x-=this.panDx,l.y-=this.panDy,l=this.getSwimlaneAt(l.x,l.y),null==n)n=l;else if(null!=l){for(var o=this.model.getParent(l);null!=o&&this.isSwimlane(o)&&o!=n;)o=this.model.getParent(o);o==n&&(n=l)}for(;null!=n&&!this.isValidDropTarget(n,t,e)&&!this.model.isLayer(n);)n=this.model.getParent(n);if(null==i||!i)for(var s=n;null!=s&&mxUtils.indexOf(t,s)<0;)s=this.model.getParent(s);return this.model.isLayer(n)||null!=s?null:n},mxGraph.prototype.getDefaultParent=function(){var t=this.getCurrentRoot();return null==t&&null==(t=this.defaultParent)&&(t=this.model.getRoot(),t=this.model.getChildAt(t,0)),t},mxGraph.prototype.setDefaultParent=function(t){this.defaultParent=t},mxGraph.prototype.getSwimlane=function(t){for(;null!=t&&!this.isSwimlane(t);)t=this.model.getParent(t);return t},mxGraph.prototype.getSwimlaneAt=function(t,e,n){if(null==n&&null==(n=this.getCurrentRoot())&&(n=this.model.getRoot()),null!=n)for(var i=this.model.getChildCount(n),l=0;l<i;l++){var o=this.model.getChildAt(n,l);if(null!=o){var s=this.getSwimlaneAt(t,e,o);if(null!=s)return s;if(this.isCellVisible(o)&&this.isSwimlane(o)&&(s=this.view.getState(o),this.intersects(s,t,e)))return o}}return null},mxGraph.prototype.getCellAt=function(t,e,n,i,l,o){if(i=null==i||i,l=null==l||l,null==n&&null==(n=this.getCurrentRoot())&&(n=this.getModel().getRoot()),null!=n)for(var s=this.model.getChildCount(n)-1;0<=s;s--){var r=this.model.getChildAt(n,s),a=this.getCellAt(t,e,r,i,l,o);if(null!=a)return a;if(this.isCellVisible(r)&&(l&&this.model.isEdge(r)||i&&this.model.isVertex(r))&&null!=(a=this.view.getState(r))&&(null==o||!o(a,t,e))&&this.intersects(a,t,e))return r}return null},mxGraph.prototype.intersects=function(t,e,n){if(null!=t){var i=t.absolutePoints;if(null!=i){t=this.tolerance*this.tolerance;for(var l=i[0],o=1;o<i.length;o++){var s=i[o];if(mxUtils.ptSegDistSq(l.x,l.y,s.x,s.y,e,n)<=t)return!0;l=s}}else if(0!=(l=mxUtils.toRadians(mxUtils.getValue(t.style,mxConstants.STYLE_ROTATION)||0))&&(i=Math.cos(-l),l=Math.sin(-l),o=new mxPoint(t.getCenterX(),t.getCenterY()),e=(l=mxUtils.getRotatedPoint(new mxPoint(e,n),i,l,o)).x,n=l.y),mxUtils.contains(t,e,n))return!0}return!1},mxGraph.prototype.hitsSwimlaneContent=function(t,e,n){var i=this.getView().getState(t);if(t=this.getStartSize(t),null!=i){var l=this.getView().getScale();if(e-=i.x,n-=i.y,0<t.width&&0<e&&e>t.width*l||0<t.height&&0<n&&n>t.height*l)return!0}return!1},mxGraph.prototype.getChildVertices=function(t){return this.getChildCells(t,!0,!1)},mxGraph.prototype.getChildEdges=function(t){return this.getChildCells(t,!1,!0)},mxGraph.prototype.getChildCells=function(t,e,n){for(t=null!=t?t:this.getDefaultParent(),t=this.model.getChildCells(t,null!=e&&e,null!=n&&n),e=[],n=0;n<t.length;n++)this.isCellVisible(t[n])&&e.push(t[n]);return e},mxGraph.prototype.getConnections=function(t,e){return this.getEdges(t,e,!0,!0,!1)},mxGraph.prototype.getIncomingEdges=function(t,e){return this.getEdges(t,e,!0,!1,!1)},mxGraph.prototype.getOutgoingEdges=function(t,e){return this.getEdges(t,e,!1,!0,!1)},mxGraph.prototype.getEdges=function(t,e,n,i,l,o){n=null==n||n,i=null==i||i,l=null==l||l,o=null!=o&&o;for(var s=[],r=this.isCellCollapsed(t),a=this.model.getChildCount(t),h=0;h<a;h++){var u=this.model.getChildAt(t,h);!r&&this.isCellVisible(u)||(s=s.concat(this.model.getEdges(u,n,i)))}for(s=s.concat(this.model.getEdges(t,n,i)),r=[],h=0;h<s.length;h++)a=null!=(u=this.view.getState(s[h]))?u.getVisibleTerminal(!0):this.view.getVisibleTerminal(s[h],!0),u=null!=u?u.getVisibleTerminal(!1):this.view.getVisibleTerminal(s[h],!1),(l&&a==u||a!=u&&(n&&u==t&&(null==e||this.isValidAncestor(a,e,o))||i&&a==t&&(null==e||this.isValidAncestor(u,e,o))))&&r.push(s[h]);return r},mxGraph.prototype.isValidAncestor=function(t,e,n){return n?this.model.isAncestor(e,t):this.model.getParent(t)==e},mxGraph.prototype.getOpposites=function(t,e,n,i){n=null==n||n,i=null==i||i;var l=[],o=new mxDictionary;if(null!=t)for(var s=0;s<t.length;s++){var r=null!=(a=this.view.getState(t[s]))?a.getVisibleTerminal(!0):this.view.getVisibleTerminal(t[s],!0),a=null!=a?a.getVisibleTerminal(!1):this.view.getVisibleTerminal(t[s],!1);r==e&&null!=a&&a!=e&&i?o.get(a)||(o.put(a,!0),l.push(a)):a==e&&null!=r&&r!=e&&n&&!o.get(r)&&(o.put(r,!0),l.push(r))}return l},mxGraph.prototype.getEdgesBetween=function(t,e,n){n=null!=n&&n;for(var i=this.getEdges(t),l=[],o=0;o<i.length;o++){var s=null!=(r=this.view.getState(i[o]))?r.getVisibleTerminal(!0):this.view.getVisibleTerminal(i[o],!0),r=null!=r?r.getVisibleTerminal(!1):this.view.getVisibleTerminal(i[o],!1);(s==t&&r==e||!n&&s==e&&r==t)&&l.push(i[o])}return l},mxGraph.prototype.getPointForEvent=function(t,e){var n=mxUtils.convertPoint(this.container,mxEvent.getClientX(t),mxEvent.getClientY(t)),i=this.view.scale;return n.x=this.snap(n.x/i-(t=this.view.translate).x-(e=0!=e?this.gridSize/2:0)),n.y=this.snap(n.y/i-t.y-e),n},mxGraph.prototype.getCells=function(t,e,n,i,l,o,s,r,a){if(o=null!=o?o:[],0<n||0<i||null!=s){var h=this.getModel(),u=t+n,d=e+i;if(null==l&&null==(l=this.getCurrentRoot())&&(l=h.getRoot()),null!=l)for(var c=h.getChildCount(l),p=0;p<c;p++){var m,g=h.getChildAt(l,p),x=this.view.getState(g);null==x||!this.isCellVisible(g)||null!=r&&r(x)||(0!=(m=mxUtils.getValue(x.style,mxConstants.STYLE_ROTATION)||0)&&(x=mxUtils.getBoundingBox(x,m)),(m=null!=s&&h.isVertex(g)&&mxUtils.intersects(s,x)||null==s&&(h.isEdge(g)||h.isVertex(g))&&x.x>=t&&x.y+x.height<=d&&x.y>=e&&x.x+x.width<=u)&&o.push(g),m&&!a||this.getCells(t,e,n,i,g,o,s,r,a))}}return o},mxGraph.prototype.getCellsBeyond=function(t,e,n,i,l){var o=[];if((i||l)&&null!=(n=null==n?this.getDefaultParent():n))for(var s=this.model.getChildCount(n),r=0;r<s;r++){var a=this.model.getChildAt(n,r),h=this.view.getState(a);this.isCellVisible(a)&&null!=h&&(!i||h.x>=t)&&(!l||h.y>=e)&&o.push(a)}return o},mxGraph.prototype.findTreeRoots=function(t,e,n){e=null!=e&&e,n=null!=n&&n;var i=[];if(null!=t){for(var l=this.getModel(),o=l.getChildCount(t),s=null,r=0,a=0;a<o;a++){var h=l.getChildAt(t,a);if(this.model.isVertex(h)&&this.isCellVisible(h)){for(var u=this.getConnections(h,e?t:null),d=0,c=0,p=0;p<u.length;p++)this.view.getVisibleTerminal(u[p],!0)==h?d++:c++;(n&&0==d&&0<c||!n&&0==c&&0<d)&&i.push(h),r<(u=n?c-d:d-c)&&(r=u,s=h)}}0==i.length&&null!=s&&i.push(s)}return i},mxGraph.prototype.traverse=function(t,e,n,i,l,o){if(null!=n&&null!=t&&(e=null==e||e,o=null!=o&&o,l=l||new mxDictionary,null==i||!l.get(i))&&(l.put(i,!0),null==(i=n(t,i))||i)&&0<(i=this.model.getEdgeCount(t)))for(var s=0;s<i;s++){var r=this.model.getEdgeAt(t,s),a=this.model.getTerminal(r,!0)==t;e&&!o!=a||(a=this.model.getTerminal(r,!a),this.traverse(a,e,n,r,l,o))}},mxGraph.prototype.isCellSelected=function(t){return this.getSelectionModel().isSelected(t)},mxGraph.prototype.isSelectionEmpty=function(){return this.getSelectionModel().isEmpty()},mxGraph.prototype.clearSelection=function(){return this.getSelectionModel().clear()},mxGraph.prototype.getSelectionCount=function(){return this.getSelectionModel().cells.length},mxGraph.prototype.getSelectionCell=function(){return this.getSelectionModel().cells[0]},mxGraph.prototype.getSelectionCells=function(){return this.getSelectionModel().cells.slice()},mxGraph.prototype.setSelectionCell=function(t){this.getSelectionModel().setCell(t)},mxGraph.prototype.setSelectionCells=function(t){this.getSelectionModel().setCells(t)},mxGraph.prototype.addSelectionCell=function(t){this.getSelectionModel().addCell(t)},mxGraph.prototype.addSelectionCells=function(t){this.getSelectionModel().addCells(t)},mxGraph.prototype.removeSelectionCell=function(t){this.getSelectionModel().removeCell(t)},mxGraph.prototype.removeSelectionCells=function(t){this.getSelectionModel().removeCells(t)},mxGraph.prototype.selectRegion=function(t,e){return t=this.getCells(t.x,t.y,t.width,t.height),this.selectCellsForEvent(t,e),t},mxGraph.prototype.selectNextCell=function(){this.selectCell(!0)},mxGraph.prototype.selectPreviousCell=function(){this.selectCell()},mxGraph.prototype.selectParentCell=function(){this.selectCell(!1,!0)},mxGraph.prototype.selectChildCell=function(){this.selectCell(!1,!1,!0)},mxGraph.prototype.selectCell=function(t,e,n){var i=0<(l=this.selectionModel).cells.length?l.cells[0]:null;1<l.cells.length&&l.clear();var l=null!=i?this.model.getParent(i):this.getDefaultParent(),o=this.model.getChildCount(l);null==i&&0<o?(t=this.model.getChildAt(l,0),this.setSelectionCell(t)):null!=i&&!e||null==this.view.getState(l)||null==this.model.getGeometry(l)?null!=i&&n?0<this.model.getChildCount(i)&&(t=this.model.getChildAt(i,0),this.setSelectionCell(t)):0<o&&(e=l.getIndex(i),t=this.model.getChildAt(l,t?++e%o:--e<0?o-1:e),this.setSelectionCell(t)):this.getCurrentRoot()!=l&&this.setSelectionCell(l)},mxGraph.prototype.selectAll=function(t,e){t=t||this.getDefaultParent(),null!=(e=e?this.model.filterDescendants(mxUtils.bind(this,function(e){return e!=t&&null!=this.view.getState(e)}),t):this.model.getChildren(t))&&this.setSelectionCells(e)},mxGraph.prototype.selectVertices=function(t,e){this.selectCells(!0,!1,t,e)},mxGraph.prototype.selectEdges=function(t){this.selectCells(!1,!0,t)},mxGraph.prototype.selectCells=function(t,e,n,i){n=n||this.getDefaultParent();var l=mxUtils.bind(this,function(n){return null!=this.view.getState(n)&&((i||0==this.model.getChildCount(n))&&this.model.isVertex(n)&&t&&!this.model.isEdge(this.model.getParent(n))||this.model.isEdge(n)&&e)});null!=(n=this.model.filterDescendants(l,n))&&this.setSelectionCells(n)},mxGraph.prototype.selectCellForEvent=function(t,e){var n=this.isCellSelected(t);this.isToggleEvent(e)?n?this.removeSelectionCell(t):this.addSelectionCell(t):n&&1==this.getSelectionCount()||this.setSelectionCell(t)},mxGraph.prototype.selectCellsForEvent=function(t,e){this.isToggleEvent(e)?this.addSelectionCells(t):this.setSelectionCells(t)},mxGraph.prototype.createHandler=function(t){var e,n,i=null;return null!=t?this.model.isEdge(t.cell)?(i=t.getVisibleTerminalState(!0),e=t.getVisibleTerminalState(!1),n=this.getCellGeometry(t.cell),i=this.view.getEdgeStyle(t,null!=n?n.points:null,i,e),this.createEdgeHandler(t,i)):this.createVertexHandler(t):i},mxGraph.prototype.createVertexHandler=function(t){return new mxVertexHandler(t)},mxGraph.prototype.createEdgeHandler=function(t,e){return e==mxEdgeStyle.Loop||e==mxEdgeStyle.ElbowConnector||e==mxEdgeStyle.SideToSide||e==mxEdgeStyle.TopToBottom?this.createElbowEdgeHandler(t):e==mxEdgeStyle.SegmentConnector||e==mxEdgeStyle.OrthConnector?this.createEdgeSegmentHandler(t):new mxEdgeHandler(t)},mxGraph.prototype.createEdgeSegmentHandler=function(t){return new mxEdgeSegmentHandler(t)},mxGraph.prototype.createElbowEdgeHandler=function(t){return new mxElbowEdgeHandler(t)},mxGraph.prototype.addMouseListener=function(t){null==this.mouseListeners&&(this.mouseListeners=[]),this.mouseListeners.push(t)},mxGraph.prototype.removeMouseListener=function(t){if(null!=this.mouseListeners)for(var e=0;e<this.mouseListeners.length;e++)if(this.mouseListeners[e]==t){this.mouseListeners.splice(e,1);break}},mxGraph.prototype.updateMouseEvent=function(t,e){var n;return null!=t.graphX&&null!=t.graphY||(n=mxUtils.convertPoint(this.container,t.getX(),t.getY()),t.graphX=n.x-this.panDx,t.graphY=n.y-this.panDy,null==t.getCell()&&this.isMouseDown&&e==mxEvent.MOUSE_MOVE&&(t.state=this.view.getState(this.getCellAt(n.x,n.y,null,null,null,function(t){return null==t.shape||t.shape.paintBackground!=mxRectangleShape.prototype.paintBackground||"1"==mxUtils.getValue(t.style,mxConstants.STYLE_POINTER_EVENTS,"1")||null!=t.shape.fill&&t.shape.fill!=mxConstants.NONE})))),t},mxGraph.prototype.getStateForTouchEvent=function(t){var e=mxEvent.getClientX(t);return t=mxEvent.getClientY(t),e=mxUtils.convertPoint(this.container,e,t),this.view.getState(this.getCellAt(e.x,e.y))},mxGraph.prototype.isEventIgnored=function(t,e,n){var i=mxEvent.isMouseEvent(e.getEvent()),l=!1;return e.getEvent()==this.lastEvent?l=!0:this.lastEvent=e.getEvent(),null!=this.eventSource&&t!=mxEvent.MOUSE_MOVE?(mxEvent.removeGestureListeners(this.eventSource,null,this.mouseMoveRedirect,this.mouseUpRedirect),this.eventSource=this.mouseUpRedirect=this.mouseMoveRedirect=null):mxClient.IS_GC||null==this.eventSource||e.getSource()==this.eventSource?!mxClient.IS_TOUCH||t!=mxEvent.MOUSE_DOWN||i||mxEvent.isPenEvent(e.getEvent())||(this.eventSource=e.getSource(),this.mouseMoveRedirect=mxUtils.bind(this,function(t){this.fireMouseEvent(mxEvent.MOUSE_MOVE,new mxMouseEvent(t,this.getStateForTouchEvent(t)))}),this.mouseUpRedirect=mxUtils.bind(this,function(t){this.fireMouseEvent(mxEvent.MOUSE_UP,new mxMouseEvent(t,this.getStateForTouchEvent(t)))}),mxEvent.addGestureListeners(this.eventSource,null,this.mouseMoveRedirect,this.mouseUpRedirect)):l=!0,this.isSyntheticEventIgnored(t,e,n)&&(l=!0),!mxEvent.isPopupTrigger(this.lastEvent)&&t!=mxEvent.MOUSE_MOVE&&2==this.lastEvent.detail||(t==mxEvent.MOUSE_UP&&this.isMouseDown?this.isMouseDown=!1:t!=mxEvent.MOUSE_DOWN||this.isMouseDown?!l&&((!mxClient.IS_FF||t!=mxEvent.MOUSE_MOVE)&&this.isMouseDown&&this.isMouseTrigger!=i||t==mxEvent.MOUSE_DOWN&&this.isMouseDown||t==mxEvent.MOUSE_UP&&!this.isMouseDown)&&(l=!0):(this.isMouseDown=!0,this.isMouseTrigger=i),l||t!=mxEvent.MOUSE_DOWN||(this.lastMouseX=e.getX(),this.lastMouseY=e.getY()),l)},mxGraph.prototype.isSyntheticEventIgnored=function(t,e,n){return n=!1,e=mxEvent.isMouseEvent(e.getEvent()),this.ignoreMouseEvents&&e&&t!=mxEvent.MOUSE_MOVE?(this.ignoreMouseEvents=t!=mxEvent.MOUSE_UP,n=!0):mxClient.IS_FF&&!e&&t==mxEvent.MOUSE_UP&&(this.ignoreMouseEvents=!0),n},mxGraph.prototype.isEventSourceIgnored=function(t,e){var n=e.getSource(),i=null!=n.nodeName?n.nodeName.toLowerCase():"";return e=!mxEvent.isMouseEvent(e.getEvent())||mxEvent.isLeftMouseButton(e.getEvent()),t==mxEvent.MOUSE_DOWN&&e&&("select"==i||"option"==i||"input"==i&&"checkbox"!=n.type&&"radio"!=n.type&&"button"!=n.type&&"submit"!=n.type&&"file"!=n.type)},mxGraph.prototype.getEventState=function(t){return t},mxGraph.prototype.fireMouseEvent=function(t,e,n){if(this.isEventSourceIgnored(t,e))null!=this.tooltipHandler&&this.tooltipHandler.hide();else{if(null==n&&(n=this),e=this.updateMouseEvent(e,t),!this.nativeDblClickEnabled&&!mxEvent.isPopupTrigger(e.getEvent())||this.doubleTapEnabled&&mxClient.IS_TOUCH&&(mxEvent.isTouchEvent(e.getEvent())||mxEvent.isPenEvent(e.getEvent()))){var i=(new Date).getTime();if(t==mxEvent.MOUSE_DOWN)if(null!=this.lastTouchEvent&&this.lastTouchEvent!=e.getEvent()&&i-this.lastTouchTime<this.doubleTapTimeout&&Math.abs(this.lastTouchX-e.getX())<this.doubleTapTolerance&&Math.abs(this.lastTouchY-e.getY())<this.doubleTapTolerance&&this.doubleClickCounter<2){if(this.doubleClickCounter++,i=!1,t==mxEvent.MOUSE_UP?e.getCell()==this.lastTouchCell&&null!=this.lastTouchCell&&(this.lastTouchTime=0,i=this.lastTouchCell,this.lastTouchCell=null,this.dblClick(e.getEvent(),i),i=!0):(this.fireDoubleClick=!0,this.lastTouchTime=0),i)return void mxEvent.consume(e.getEvent())}else null!=this.lastTouchEvent&&this.lastTouchEvent==e.getEvent()||(this.lastTouchCell=e.getCell(),this.lastTouchX=e.getX(),this.lastTouchY=e.getY(),this.lastTouchTime=i,this.lastTouchEvent=e.getEvent(),this.doubleClickCounter=0);else if((this.isMouseDown||t==mxEvent.MOUSE_UP)&&this.fireDoubleClick)return this.fireDoubleClick=!1,i=this.lastTouchCell,this.lastTouchCell=null,this.isMouseDown=!1,void((null!=i||(mxEvent.isTouchEvent(e.getEvent())||mxEvent.isPenEvent(e.getEvent()))&&(mxClient.IS_GC||mxClient.IS_SF))&&Math.abs(this.lastTouchX-e.getX())<this.doubleTapTolerance&&Math.abs(this.lastTouchY-e.getY())<this.doubleTapTolerance?this.dblClick(e.getEvent(),i):mxEvent.consume(e.getEvent()))}if(!this.isEventIgnored(t,e,n)){if(e.state=this.getEventState(e.getState()),this.fireEvent(new mxEventObject(mxEvent.FIRE_MOUSE_EVENT,"eventName",t,"event",e)),mxClient.IS_OP||mxClient.IS_SF||mxClient.IS_GC||mxClient.IS_IE11||mxClient.IS_IE&&mxClient.IS_SVG||e.getEvent().target!=this.container){var l;if(t==mxEvent.MOUSE_MOVE&&this.isMouseDown&&this.autoScroll&&!mxEvent.isMultiTouchEvent(e.getEvent)?this.scrollPointToVisible(e.getGraphX(),e.getGraphY(),this.autoExtend):t==mxEvent.MOUSE_UP&&this.ignoreScrollbars&&this.translateToScrollPosition&&(0!=this.container.scrollLeft||0!=this.container.scrollTop)&&(this.view.setTranslate((l=this.view.translate).x-this.container.scrollLeft/(i=this.view.scale),l.y-this.container.scrollTop/i),this.container.scrollLeft=0,this.container.scrollTop=0),null!=this.mouseListeners)for(i=[n,e],e.getEvent().preventDefault||(e.getEvent().returnValue=!0),l=0;l<this.mouseListeners.length;l++){var o=this.mouseListeners[l];t==mxEvent.MOUSE_DOWN?o.mouseDown.apply(o,i):t==mxEvent.MOUSE_MOVE?o.mouseMove.apply(o,i):t==mxEvent.MOUSE_UP&&o.mouseUp.apply(o,i)}t==mxEvent.MOUSE_UP&&this.click(e)}(mxEvent.isTouchEvent(e.getEvent())||mxEvent.isPenEvent(e.getEvent()))&&t==mxEvent.MOUSE_DOWN&&this.tapAndHoldEnabled&&!this.tapAndHoldInProgress?(this.tapAndHoldInProgress=!0,this.initialTouchX=e.getGraphX(),this.initialTouchY=e.getGraphY(),this.tapAndHoldThread&&window.clearTimeout(this.tapAndHoldThread),this.tapAndHoldThread=window.setTimeout(mxUtils.bind(this,function(){this.tapAndHoldValid&&this.tapAndHold(e),this.tapAndHoldValid=this.tapAndHoldInProgress=!1}),this.tapAndHoldDelay),this.tapAndHoldValid=!0):t==mxEvent.MOUSE_UP?this.tapAndHoldValid=this.tapAndHoldInProgress=!1:this.tapAndHoldValid&&(this.tapAndHoldValid=Math.abs(this.initialTouchX-e.getGraphX())<this.tolerance&&Math.abs(this.initialTouchY-e.getGraphY())<this.tolerance),t==mxEvent.MOUSE_DOWN&&this.isEditing()&&!this.cellEditor.isEventSource(e.getEvent())&&this.stopEditing(!this.isInvokesStopCellEditing()),this.consumeMouseEvent(t,e,n)}}},mxGraph.prototype.consumeMouseEvent=function(t,e,n){t==mxEvent.MOUSE_DOWN&&mxEvent.isTouchEvent(e.getEvent())&&e.consume(!1)},mxGraph.prototype.fireGestureEvent=function(t,e){this.lastTouchTime=0,this.fireEvent(new mxEventObject(mxEvent.GESTURE,"event",t,"cell",e))},mxGraph.prototype.destroy=function(){this.destroyed||(this.destroyed=!0,null!=this.tooltipHandler&&this.tooltipHandler.destroy(),null!=this.selectionCellsHandler&&this.selectionCellsHandler.destroy(),null!=this.panningHandler&&this.panningHandler.destroy(),null!=this.popupMenuHandler&&this.popupMenuHandler.destroy(),null!=this.connectionHandler&&this.connectionHandler.destroy(),null!=this.graphHandler&&this.graphHandler.destroy(),null!=this.cellEditor&&this.cellEditor.destroy(),null!=this.view&&this.view.destroy(),null!=this.model&&null!=this.graphModelChangeListener&&(this.model.removeListener(this.graphModelChangeListener),this.graphModelChangeListener=null),this.container=null)},mxCellOverlay.prototype=new mxEventSource,mxCellOverlay.prototype.constructor=mxCellOverlay,mxCellOverlay.prototype.image=null,mxCellOverlay.prototype.tooltip=null,mxCellOverlay.prototype.align=mxConstants.ALIGN_RIGHT,mxCellOverlay.prototype.verticalAlign=mxConstants.ALIGN_BOTTOM,mxCellOverlay.prototype.offset=null,mxCellOverlay.prototype.cursor=null,mxCellOverlay.prototype.defaultOverlap=.5,mxCellOverlay.prototype.getBounds=function(t){var e,n=t.view.graph.getModel().isEdge(t.cell),i=t.view.scale,l=this.image.width,o=this.image.height;return n?n=1==(n=t.absolutePoints).length%2?n[Math.floor(n.length/2)]:new mxPoint((t=n[(e=n.length/2)-1]).x+((n=n[e]).x-t.x)/2,t.y+(n.y-t.y)/2):((n=new mxPoint).x=this.align==mxConstants.ALIGN_LEFT?t.x:this.align==mxConstants.ALIGN_CENTER?t.x+t.width/2:t.x+t.width,n.y=this.verticalAlign==mxConstants.ALIGN_TOP?t.y:this.verticalAlign==mxConstants.ALIGN_MIDDLE?t.y+t.height/2:t.y+t.height),new mxRectangle(Math.round(n.x-(l*this.defaultOverlap-this.offset.x)*i),Math.round(n.y-(o*this.defaultOverlap-this.offset.y)*i),l*i,o*i)},mxCellOverlay.prototype.toString=function(){return this.tooltip},mxOutline.prototype.source=null,mxOutline.prototype.outline=null,mxOutline.prototype.graphRenderHint=mxConstants.RENDERING_HINT_FASTER,mxOutline.prototype.enabled=!0,mxOutline.prototype.showViewport=!0,mxOutline.prototype.border=10,mxOutline.prototype.sizerSize=8,mxOutline.prototype.labelsVisible=!1,mxOutline.prototype.updateOnPan=!1,mxOutline.prototype.sizerImage=null,mxOutline.prototype.minScale=1e-4,mxOutline.prototype.suspended=!1,mxOutline.prototype.createGraph=function(t){return(t=new mxGraph(t,this.source.getModel(),this.graphRenderHint,this.source.getStylesheet())).foldingEnabled=!1,t.autoScroll=!1,t},mxOutline.prototype.init=function(t){this.outline=this.createGraph(t);var e=this.outline.graphModelChanged;this.outline.graphModelChanged=mxUtils.bind(this,function(t){this.suspended||null==this.outline||e.apply(this.outline,arguments)}),mxClient.IS_SVG&&((t=this.outline.getView().getCanvas().parentNode).setAttribute("shape-rendering","optimizeSpeed"),t.setAttribute("image-rendering","optimizeSpeed")),this.outline.labelsVisible=this.labelsVisible,this.outline.setEnabled(!1),this.updateHandler=mxUtils.bind(this,function(t,e){this.suspended||this.active||this.update()}),this.source.getModel().addListener(mxEvent.CHANGE,this.updateHandler),this.outline.addMouseListener(this),(t=this.source.getView()).addListener(mxEvent.SCALE,this.updateHandler),t.addListener(mxEvent.TRANSLATE,this.updateHandler),t.addListener(mxEvent.SCALE_AND_TRANSLATE,this.updateHandler),t.addListener(mxEvent.DOWN,this.updateHandler),t.addListener(mxEvent.UP,this.updateHandler),mxEvent.addListener(this.source.container,"scroll",this.updateHandler),this.panHandler=mxUtils.bind(this,function(t){this.updateOnPan&&this.updateHandler.apply(this,arguments)}),this.source.addListener(mxEvent.PAN,this.panHandler),this.refreshHandler=mxUtils.bind(this,function(t){this.outline.setStylesheet(this.source.getStylesheet()),this.outline.refresh()}),this.source.addListener(mxEvent.REFRESH,this.refreshHandler),this.bounds=new mxRectangle(0,0,0,0),this.selectionBorder=new mxRectangleShape(this.bounds,null,mxConstants.OUTLINE_COLOR,mxConstants.OUTLINE_STROKEWIDTH),this.selectionBorder.dialect=this.outline.dialect,this.selectionBorder.init(this.outline.getView().getOverlayPane()),t=mxUtils.bind(this,function(t){var e=mxEvent.getSource(t),n=mxUtils.bind(this,function(t){this.outline.fireMouseEvent(mxEvent.MOUSE_MOVE,new mxMouseEvent(t))}),i=mxUtils.bind(this,function(t){mxEvent.removeGestureListeners(e,null,n,i),this.outline.fireMouseEvent(mxEvent.MOUSE_UP,new mxMouseEvent(t))});mxEvent.addGestureListeners(e,null,n,i),this.outline.fireMouseEvent(mxEvent.MOUSE_DOWN,new mxMouseEvent(t))}),mxEvent.addGestureListeners(this.selectionBorder.node,t),this.sizer=this.createSizer(),this.sizer.init(this.outline.getView().getOverlayPane()),this.enabled&&(this.sizer.node.style.cursor="nwse-resize"),mxEvent.addGestureListeners(this.sizer.node,t),this.selectionBorder.node.style.display=this.showViewport?"":"none",this.sizer.node.style.display=this.selectionBorder.node.style.display,this.selectionBorder.node.style.cursor="move",this.update(!1)},mxOutline.prototype.isEnabled=function(){return this.enabled},mxOutline.prototype.setEnabled=function(t){this.enabled=t},mxOutline.prototype.setZoomEnabled=function(t){this.sizer.node.style.visibility=t?"visible":"hidden"},mxOutline.prototype.refresh=function(){this.update(!0)},mxOutline.prototype.createSizer=function(){var t=null!=this.sizerImage?new mxImageShape(new mxRectangle(0,0,this.sizerImage.width,this.sizerImage.height),this.sizerImage.src):new mxRectangleShape(new mxRectangle(0,0,this.sizerSize,this.sizerSize),mxConstants.OUTLINE_HANDLE_FILLCOLOR,mxConstants.OUTLINE_HANDLE_STROKECOLOR);return t.dialect=this.outline.dialect,t},mxOutline.prototype.getSourceContainerSize=function(){return new mxRectangle(0,0,this.source.container.scrollWidth,this.source.container.scrollHeight)},mxOutline.prototype.getOutlineOffset=function(t){return null},mxOutline.prototype.getSourceGraphBounds=function(){return this.source.getGraphBounds()},mxOutline.prototype.update=function(t){var e,n,i,l,o,s,r;null!=this.source&&null!=this.source.container&&null!=this.outline&&null!=this.outline.container&&(e=this.source.view.scale,i=new mxRectangle((i=this.getSourceGraphBounds()).x/e+this.source.panDx,i.y/e+this.source.panDy,i.width/e,i.height/e),l=new mxRectangle(0,0,this.source.container.clientWidth/e,this.source.container.clientHeight/e),(n=i.clone()).add(l),l=this.getSourceContainerSize(),e=Math.min(Math.max(0,this.outline.container.clientWidth-this.border)/Math.max(l.width/e,n.width),Math.max(0,this.outline.container.clientHeight-this.border)/Math.max(l.height/e,n.height)),0<(l=isNaN(e)?this.minScale:Math.max(this.minScale,e))&&(this.outline.getView().scale!=l&&(this.outline.getView().scale=l,t=!0),(e=this.outline.getView()).currentRoot!=this.source.getView().currentRoot&&e.setCurrentRoot(this.source.getView().currentRoot),o=(n=this.source.view.translate).x+this.source.panDx,s=n.y+this.source.panDy,null!=(l=this.getOutlineOffset(l))&&(o+=l.x,s+=l.y),i.x<0&&(o-=i.x),i.y<0&&(s-=i.y),e.translate.x==o&&e.translate.y==s||(e.translate.x=o,e.translate.y=s,t=!0),i=e.translate,o=(l=this.source.getView().scale)/e.scale,this.bounds=new mxRectangle((i.x-n.x-this.source.panDx)/(s=1/e.scale),(i.y-n.y-this.source.panDy)/s,(r=this.source.container).clientWidth/o,r.clientHeight/o),this.bounds.x+=this.source.container.scrollLeft*e.scale/l,this.bounds.y+=this.source.container.scrollTop*e.scale/l,(i=this.selectionBorder.bounds).x==this.bounds.x&&i.y==this.bounds.y&&i.width==this.bounds.width&&i.height==this.bounds.height||(this.selectionBorder.bounds=this.bounds,this.selectionBorder.redraw()),e=new mxRectangle(this.bounds.x+this.bounds.width-(i=this.sizer.bounds).width/2,this.bounds.y+this.bounds.height-i.height/2,i.width,i.height),i.x==e.x&&i.y==e.y&&i.width==e.width&&i.height==e.height||(this.sizer.bounds=e,"hidden"!=this.sizer.node.style.visibility&&this.sizer.redraw()),t&&this.outline.view.revalidate()))},mxOutline.prototype.mouseDown=function(t,e){var n;this.enabled&&this.showViewport&&(n=mxEvent.isMouseEvent(e.getEvent())?0:this.source.tolerance,n=this.source.allowHandleBoundsCheck&&(mxClient.IS_IE||0<n)?new mxRectangle(e.getGraphX()-n,e.getGraphY()-n,2*n,2*n):null,this.zoom=e.isSource(this.sizer)||null!=n&&mxUtils.intersects(shape.bounds,n),this.startX=e.getX(),this.startY=e.getY(),this.active=!0,this.source.useScrollbarsForPanning&&mxUtils.hasScrollbars(this.source.container)?(this.dx0=this.source.container.scrollLeft,this.dy0=this.source.container.scrollTop):this.dy0=this.dx0=0),e.consume()},mxOutline.prototype.mouseMove=function(t,e){var n,i,l,o;this.active&&(this.selectionBorder.node.style.display=this.showViewport?"":"none",this.sizer.node.style.display=this.selectionBorder.node.style.display,n=(o=this.getTranslateForEvent(e)).x,i=o.y,this.zoom?(i=n/((o=this.source.container).clientWidth/o.clientHeight),o=new mxRectangle(this.bounds.x,this.bounds.y,Math.max(1,this.bounds.width+n),Math.max(1,this.bounds.height+i)),this.selectionBorder.bounds=o,this.selectionBorder.redraw()):(l=this.outline.getView().scale,o=new mxRectangle(this.bounds.x+n,this.bounds.y+i,this.bounds.width,this.bounds.height),this.selectionBorder.bounds=o,this.selectionBorder.redraw(),n=n/l*this.source.getView().scale,i=i/l*this.source.getView().scale,this.source.panGraph(-n-this.dx0,-i-this.dy0)),this.sizer.bounds=new mxRectangle(o.x+o.width-(n=this.sizer.bounds).width/2,o.y+o.height-n.height/2,n.width,n.height),"hidden"!=this.sizer.node.style.visibility&&this.sizer.redraw(),e.consume())},mxOutline.prototype.getTranslateForEvent=function(t){return new mxPoint(t.getX()-this.startX,t.getY()-this.startY)},mxOutline.prototype.mouseUp=function(t,e){var n,i,l;this.active&&(n=(i=this.getTranslateForEvent(e)).x,i=i.y,(0<Math.abs(n)||0<Math.abs(i))&&(this.zoom?(i=this.selectionBorder.bounds.width,l=this.source.getView().scale,this.source.zoomTo(Math.max(this.minScale,l-n*l/i),!1)):this.source.useScrollbarsForPanning&&mxUtils.hasScrollbars(this.source.container)||(this.source.panGraph(0,0),n/=this.outline.getView().scale,i/=this.outline.getView().scale,l=this.source.getView().translate,this.source.getView().setTranslate(l.x-n,l.y-i)),this.update(),e.consume()),this.index=null,this.active=!1)},mxOutline.prototype.destroy=function(){null!=this.source&&(this.source.removeListener(this.panHandler),this.source.removeListener(this.refreshHandler),this.source.getModel().removeListener(this.updateHandler),this.source.getView().removeListener(this.updateHandler),mxEvent.removeListener(this.source.container,"scroll",this.updateHandler),this.source=null),null!=this.outline&&(this.outline.removeMouseListener(this),this.outline.destroy(),this.outline=null),null!=this.selectionBorder&&(this.selectionBorder.destroy(),this.selectionBorder=null),null!=this.sizer&&(this.sizer.destroy(),this.sizer=null)},mxMultiplicity.prototype.type=null,mxMultiplicity.prototype.attr=null,mxMultiplicity.prototype.value=null,mxMultiplicity.prototype.source=null,mxMultiplicity.prototype.min=null,mxMultiplicity.prototype.max=null,mxMultiplicity.prototype.validNeighbors=null,mxMultiplicity.prototype.validNeighborsAllowed=!0,mxMultiplicity.prototype.countError=null,mxMultiplicity.prototype.typeError=null,mxMultiplicity.prototype.check=function(t,e,n,i,l,o){var s="";return(this.source&&this.checkTerminal(t,n,e)||!this.source&&this.checkTerminal(t,i,e))&&(null!=this.countError&&(this.source&&(0==this.max||l>=this.max)||!this.source&&(0==this.max||o>=this.max))&&(s+=this.countError+"\n"),null!=this.validNeighbors&&null!=this.typeError&&0<this.validNeighbors.length&&(this.checkNeighbors(t,e,n,i)||(s+=this.typeError+"\n"))),0<s.length?s:null},mxMultiplicity.prototype.checkNeighbors=function(t,e,n,i){e=t.model.getValue(n),i=t.model.getValue(i),n=!this.validNeighborsAllowed;for(var l=this.validNeighbors,o=0;o<l.length;o++){if(this.source&&this.checkType(t,i,l[o])){n=this.validNeighborsAllowed;break}if(!this.source&&this.checkType(t,e,l[o])){n=this.validNeighborsAllowed;break}}return n},mxMultiplicity.prototype.checkTerminal=function(t,e,n){return e=t.model.getValue(e),this.checkType(t,e,this.type,this.attr,this.value)},mxMultiplicity.prototype.checkType=function(t,e,n,i,l){return null!=e&&(isNaN(e.nodeType)?e==n:mxUtils.isNode(e,n,i,l))},mxLayoutManager.prototype=new mxEventSource,mxLayoutManager.prototype.constructor=mxLayoutManager,mxLayoutManager.prototype.graph=null,mxLayoutManager.prototype.bubbling=!0,mxLayoutManager.prototype.enabled=!0,mxLayoutManager.prototype.undoHandler=null,mxLayoutManager.prototype.moveHandler=null,mxLayoutManager.prototype.resizeHandler=null,mxLayoutManager.prototype.isEnabled=function(){return this.enabled},mxLayoutManager.prototype.setEnabled=function(t){this.enabled=t},mxLayoutManager.prototype.isBubbling=function(){return this.bubbling},mxLayoutManager.prototype.setBubbling=function(t){this.bubbling=t},mxLayoutManager.prototype.getGraph=function(){return this.graph},mxLayoutManager.prototype.setGraph=function(t){null!=this.graph&&(this.graph.getModel().removeListener(this.undoHandler),this.graph.removeListener(this.moveHandler),this.graph.removeListener(this.resizeHandler)),this.graph=t,null!=this.graph&&(this.graph.getModel().addListener(mxEvent.BEFORE_UNDO,this.undoHandler),this.graph.addListener(mxEvent.MOVE_CELLS,this.moveHandler),this.graph.addListener(mxEvent.RESIZE_CELLS,this.resizeHandler))},mxLayoutManager.prototype.hasLayout=function(t){return this.getLayout(t,mxEvent.LAYOUT_CELLS)},mxLayoutManager.prototype.getLayout=function(t,e){return null},mxLayoutManager.prototype.beforeUndo=function(t){this.executeLayoutForCells(this.getCellsForChanges(t.changes))},mxLayoutManager.prototype.cellsMoved=function(t,e){if(null!=t&&null!=e)for(var n=mxUtils.convertPoint(this.getGraph().container,mxEvent.getClientX(e),mxEvent.getClientY(e)),i=this.getGraph().getModel(),l=0;l<t.length;l++){var o=this.getLayout(i.getParent(t[l]),mxEvent.MOVE_CELLS);null!=o&&o.moveCell(t[l],n.x,n.y)}},mxLayoutManager.prototype.cellsResized=function(t,e,n){if(null!=t&&null!=e)for(var i=this.getGraph().getModel(),l=0;l<t.length;l++){var o=this.getLayout(i.getParent(t[l]),mxEvent.RESIZE_CELLS);null!=o&&o.resizeCell(t[l],e[l],n[l])}},mxLayoutManager.prototype.getCellsForChanges=function(t){for(var e=[],n=0;n<t.length;n++){var i=t[n];if(i instanceof mxRootChange)return[];e=e.concat(this.getCellsForChange(i))}return e},mxLayoutManager.prototype.getCellsForChange=function(t){return t instanceof mxChildChange?this.addCellsWithLayout(t.child,this.addCellsWithLayout(t.previous)):t instanceof mxTerminalChange||t instanceof mxGeometryChange||t instanceof mxVisibleChange||t instanceof mxStyleChange?this.addCellsWithLayout(t.cell):[]},mxLayoutManager.prototype.addCellsWithLayout=function(t,e){return this.addDescendantsWithLayout(t,this.addAncestorsWithLayout(t,e))},mxLayoutManager.prototype.addAncestorsWithLayout=function(t,e){var n;return e=null!=e?e:[],null!=t&&(null!=this.hasLayout(t)&&e.push(t),this.isBubbling())&&(n=this.getGraph().getModel(),this.addAncestorsWithLayout(n.getParent(t),e)),e},mxLayoutManager.prototype.addDescendantsWithLayout=function(t,e){if(e=null!=e?e:[],null!=t&&this.hasLayout(t))for(var n=this.getGraph().getModel(),i=0;i<n.getChildCount(t);i++){var l=n.getChildAt(t,i);this.hasLayout(l)&&(e.push(l),this.addDescendantsWithLayout(l,e))}return e},mxLayoutManager.prototype.executeLayoutForCells=function(t){t=mxUtils.sortCells(t,!1),this.layoutCells(t,!0),this.layoutCells(t.reverse(),!1)},mxLayoutManager.prototype.layoutCells=function(t,e){if(0<t.length){var n=this.getGraph().getModel();n.beginUpdate();try{for(var i=null,l=0;l<t.length;l++)t[l]!=n.getRoot()&&t[l]!=i&&(this.executeLayout(t[l],e),i=t[l]);this.fireEvent(new mxEventObject(mxEvent.LAYOUT_CELLS,"cells",t))}finally{n.endUpdate()}}},mxLayoutManager.prototype.executeLayout=function(t,e){null!=(e=this.getLayout(t,e?mxEvent.BEGIN_UPDATE:mxEvent.END_UPDATE))&&e.execute(t)},mxLayoutManager.prototype.destroy=function(){this.setGraph(null)},mxSwimlaneManager.prototype=new mxEventSource,mxSwimlaneManager.prototype.constructor=mxSwimlaneManager,mxSwimlaneManager.prototype.graph=null,mxSwimlaneManager.prototype.enabled=!0,mxSwimlaneManager.prototype.horizontal=!0,mxSwimlaneManager.prototype.addEnabled=!0,mxSwimlaneManager.prototype.resizeEnabled=!0,mxSwimlaneManager.prototype.addHandler=null,mxSwimlaneManager.prototype.resizeHandler=null,mxSwimlaneManager.prototype.isEnabled=function(){return this.enabled},mxSwimlaneManager.prototype.setEnabled=function(t){this.enabled=t},mxSwimlaneManager.prototype.isHorizontal=function(){return this.horizontal},mxSwimlaneManager.prototype.setHorizontal=function(t){this.horizontal=t},mxSwimlaneManager.prototype.isAddEnabled=function(){return this.addEnabled},mxSwimlaneManager.prototype.setAddEnabled=function(t){this.addEnabled=t},mxSwimlaneManager.prototype.isResizeEnabled=function(){return this.resizeEnabled},mxSwimlaneManager.prototype.setResizeEnabled=function(t){this.resizeEnabled=t},mxSwimlaneManager.prototype.getGraph=function(){return this.graph},mxSwimlaneManager.prototype.setGraph=function(t){null!=this.graph&&(this.graph.removeListener(this.addHandler),this.graph.removeListener(this.resizeHandler)),this.graph=t,null!=this.graph&&(this.graph.addListener(mxEvent.ADD_CELLS,this.addHandler),this.graph.addListener(mxEvent.CELLS_RESIZED,this.resizeHandler))},mxSwimlaneManager.prototype.isSwimlaneIgnored=function(t){return!this.getGraph().isSwimlane(t)},mxSwimlaneManager.prototype.isCellHorizontal=function(t){return this.graph.isSwimlane(t)?(t=this.graph.getCellStyle(t),1==mxUtils.getValue(t,mxConstants.STYLE_HORIZONTAL,1)):!this.isHorizontal()},mxSwimlaneManager.prototype.cellsAdded=function(t){if(null!=t){var e=this.getGraph().getModel();e.beginUpdate();try{for(var n=0;n<t.length;n++)this.isSwimlaneIgnored(t[n])||this.swimlaneAdded(t[n])}finally{e.endUpdate()}}},mxSwimlaneManager.prototype.swimlaneAdded=function(t){for(var e=this.getGraph().getModel(),n=e.getParent(t),i=e.getChildCount(n),l=null,o=0;o<i;o++){var s=e.getChildAt(n,o);if(s!=t&&!this.isSwimlaneIgnored(s)&&null!=(l=e.getGeometry(s)))break}null!=l&&(e=null!=n?this.isCellHorizontal(n):this.horizontal,this.resizeSwimlane(t,l.width,l.height,e))},mxSwimlaneManager.prototype.cellsResized=function(t){if(null!=t){var e=this.getGraph().getModel();e.beginUpdate();try{for(var n=0;n<t.length;n++)if(!this.isSwimlaneIgnored(t[n])){var i=e.getGeometry(t[n]);if(null!=i){for(var l=new mxRectangle(0,0,i.width,i.height),o=s=t[n];null!=o;){var s=o,r=(o=e.getParent(o),this.graph.isSwimlane(o)?this.graph.getStartSize(o):new mxRectangle);l.width+=r.width,l.height+=r.height}var a=null!=o?this.isCellHorizontal(o):this.horizontal;this.resizeSwimlane(s,l.width,l.height,a)}}}finally{e.endUpdate()}}},mxSwimlaneManager.prototype.resizeSwimlane=function(t,e,n,i){var l=this.getGraph().getModel();l.beginUpdate();try{var o,s=this.isCellHorizontal(t);this.isSwimlaneIgnored(t)||null!=(o=l.getGeometry(t))&&(i&&o.height!=n||!i&&o.width!=e)&&(o=o.clone(),i?o.height=n:o.width=e,l.setGeometry(t,o));var r=this.graph.isSwimlane(t)?this.graph.getStartSize(t):new mxRectangle;e-=r.width,n-=r.height;var a=l.getChildCount(t);for(i=0;i<a;i++){var h=l.getChildAt(t,i);this.resizeSwimlane(h,e,n,s)}}finally{l.endUpdate()}},mxSwimlaneManager.prototype.destroy=function(){this.setGraph(null)},mxTemporaryCellStates.prototype.view=null,mxTemporaryCellStates.prototype.oldStates=null,mxTemporaryCellStates.prototype.oldBounds=null,mxTemporaryCellStates.prototype.oldScale=null,mxTemporaryCellStates.prototype.destroy=function(){this.view.setScale(this.oldScale),this.view.setStates(this.oldStates),this.view.setGraphBounds(this.oldBounds),this.view.validateCellState=this.oldValidateCellState,this.view.graph.cellRenderer.doRedrawShape=this.oldDoRedrawShape},mxCellStatePreview.prototype.graph=null,mxCellStatePreview.prototype.deltas=null,mxCellStatePreview.prototype.count=0,mxCellStatePreview.prototype.isEmpty=function(){return 0==this.count},mxCellStatePreview.prototype.moveState=function(t,e,n,i,l){i=null==i||i,l=null==l||l;var o=this.deltas.get(t.cell);return null==o?(o={point:new mxPoint(e,n),state:t},this.deltas.put(t.cell,o),this.count++):i?(o.point.x+=e,o.point.y+=n):(o.point.x=e,o.point.y=n),l&&this.addEdges(t),o.point},mxCellStatePreview.prototype.show=function(t){this.deltas.visit(mxUtils.bind(this,function(t,e){this.translateState(e.state,e.point.x,e.point.y)})),this.deltas.visit(mxUtils.bind(this,function(e,n){this.revalidateState(n.state,n.point.x,n.point.y,t)}))},mxCellStatePreview.prototype.translateState=function(t,e,n){if(null!=t){var i=this.graph.getModel();i.isVertex(t.cell)&&(t.view.updateCellState(t),l=i.getGeometry(t.cell),0==e&&0==n||null==l||l.relative&&null==this.deltas.get(t.cell)||(t.x+=e,t.y+=n));for(var l=i.getChildCount(t.cell),o=0;o<l;o++)this.translateState(t.view.getState(i.getChildAt(t.cell,o)),e,n)}},mxCellStatePreview.prototype.revalidateState=function(t,e,n,i){if(null!=t){var l=this.graph.getModel();l.isEdge(t.cell)&&t.view.updateCellState(t);var o=this.graph.getCellGeometry(t.cell),s=t.view.getState(l.getParent(t.cell));for(0==e&&0==n||null==o||!o.relative||!l.isVertex(t.cell)||null!=s&&!l.isVertex(s.cell)&&null==this.deltas.get(t.cell)||(t.x+=e,t.y+=n),this.graph.cellRenderer.redraw(t),null!=i&&i(t),o=l.getChildCount(t.cell),s=0;s<o;s++)this.revalidateState(this.graph.view.getState(l.getChildAt(t.cell,s)),e,n,i)}},mxCellStatePreview.prototype.addEdges=function(t){for(var e=this.graph.getModel(),n=e.getEdgeCount(t.cell),i=0;i<n;i++){var l=t.view.getState(e.getEdgeAt(t.cell,i));null!=l&&this.moveState(l,0,0)}},mxConnectionConstraint.prototype.point=null,mxConnectionConstraint.prototype.perimeter=null,mxConnectionConstraint.prototype.name=null,mxConnectionConstraint.prototype.dx=null,mxConnectionConstraint.prototype.dy=null,mxGraphHandler.prototype.graph=null,mxGraphHandler.prototype.maxCells=mxClient.IS_IE?20:50,mxGraphHandler.prototype.enabled=!0,mxGraphHandler.prototype.highlightEnabled=!0,mxGraphHandler.prototype.cloneEnabled=!0,mxGraphHandler.prototype.moveEnabled=!0,mxGraphHandler.prototype.guidesEnabled=!1,mxGraphHandler.prototype.handlesVisible=!0,mxGraphHandler.prototype.guide=null,mxGraphHandler.prototype.currentDx=null,mxGraphHandler.prototype.currentDy=null,mxGraphHandler.prototype.updateCursor=!0,mxGraphHandler.prototype.selectEnabled=!0,mxGraphHandler.prototype.removeCellsFromParent=!0,mxGraphHandler.prototype.removeEmptyParents=!1,mxGraphHandler.prototype.connectOnDrop=!1,mxGraphHandler.prototype.scrollOnMove=!0,mxGraphHandler.prototype.minimumSize=6,mxGraphHandler.prototype.previewColor="black",mxGraphHandler.prototype.htmlPreview=!1,mxGraphHandler.prototype.shape=null,mxGraphHandler.prototype.scaleGrid=!1,mxGraphHandler.prototype.rotationEnabled=!0,mxGraphHandler.prototype.maxLivePreview=0,mxGraphHandler.prototype.allowLivePreview=mxClient.IS_SVG,mxGraphHandler.prototype.isEnabled=function(){return this.enabled},mxGraphHandler.prototype.setEnabled=function(t){this.enabled=t},mxGraphHandler.prototype.isCloneEnabled=function(){return this.cloneEnabled},mxGraphHandler.prototype.setCloneEnabled=function(t){this.cloneEnabled=t},mxGraphHandler.prototype.isMoveEnabled=function(){return this.moveEnabled},mxGraphHandler.prototype.setMoveEnabled=function(t){this.moveEnabled=t},mxGraphHandler.prototype.isSelectEnabled=function(){return this.selectEnabled},mxGraphHandler.prototype.setSelectEnabled=function(t){this.selectEnabled=t},mxGraphHandler.prototype.isRemoveCellsFromParent=function(){return this.removeCellsFromParent},mxGraphHandler.prototype.setRemoveCellsFromParent=function(t){this.removeCellsFromParent=t},mxGraphHandler.prototype.isPropagateSelectionCell=function(t,e,n){var i=this.graph.model.getParent(t);return e?(e=this.graph.model.isEdge(t)?null:this.graph.getCellGeometry(t),!this.graph.isSiblingSelected(t)&&(null!=e&&e.relative||!this.graph.isSwimlane(i))):(!this.graph.isToggleEvent(n.getEvent())||!this.graph.isSiblingSelected(t)&&!this.graph.isCellSelected(t)&&!this.graph.isSwimlane(i)||this.graph.isCellSelected(i))&&(this.graph.isToggleEvent(n.getEvent())||!this.graph.isCellSelected(i))},mxGraphHandler.prototype.getInitialCellForEvent=function(t){var e=t.getState();if(!(this.graph.isToggleEvent(t.getEvent())&&mxEvent.isAltDown(t.getEvent())||null==e||this.graph.isCellSelected(e.cell)))for(var n=this.graph.model,i=this.graph.view.getState(n.getParent(e.cell));null!=i&&!this.graph.isCellSelected(i.cell)&&(n.isVertex(i.cell)||n.isEdge(i.cell))&&this.isPropagateSelectionCell(e.cell,!0,t);)e=i,i=this.graph.view.getState(this.graph.getModel().getParent(e.cell));return null!=e?e.cell:null},mxGraphHandler.prototype.isDelayedSelection=function(t,e){if(!this.graph.isToggleEvent(e.getEvent())||!mxEvent.isAltDown(e.getEvent()))for(;null!=t;){if(this.graph.selectionCellsHandler.isHandled(t))return this.graph.cellEditor.getEditingCell()!=t;t=this.graph.model.getParent(t)}return this.graph.isToggleEvent(e.getEvent())&&!mxEvent.isAltDown(e.getEvent())},mxGraphHandler.prototype.selectDelayed=function(t){var e;this.graph.popupMenuHandler.isPopupTrigger(t)||(null==(e=t.getCell())&&(e=this.cell),this.selectCellForEvent(e,t))},mxGraphHandler.prototype.selectCellForEvent=function(t,e){if(null!=(n=this.graph.view.getState(t))){if(!(e.isSource(n.control)||this.graph.isToggleEvent(e.getEvent())&&mxEvent.isAltDown(e.getEvent())))for(var n,i=(n=this.graph.getModel()).getParent(t);null!=this.graph.view.getState(i)&&(n.isVertex(i)||n.isEdge(i)&&!this.graph.isToggleEvent(e.getEvent()))&&this.isPropagateSelectionCell(t,!1,e);)i=n.getParent(t=i);this.graph.selectCellForEvent(t,e.getEvent())}return t},mxGraphHandler.prototype.consumeMouseEvent=function(t,e){e.consume()},mxGraphHandler.prototype.mouseDown=function(t,e){var n,i,l;!e.isConsumed()&&this.isEnabled()&&this.graph.isEnabled()&&null!=e.getState()&&!mxEvent.isMultiTouchEvent(e.getEvent())&&(n=this.getInitialCellForEvent(e),this.delayedSelection=this.isDelayedSelection(n,e),this.cell=null,this.isSelectEnabled()&&!this.delayedSelection&&this.graph.selectCellForEvent(n,e.getEvent()),this.isMoveEnabled()&&(l=(i=this.graph.model).getGeometry(n),this.graph.isCellMovable(n)&&(!i.isEdge(n)||1<this.graph.getSelectionCount()||null!=l.points&&0<l.points.length||null==i.getTerminal(n,!0)||null==i.getTerminal(n,!1)||this.graph.allowDanglingEdges||this.graph.isCloneEvent(e.getEvent())&&this.graph.isCellsCloneable())?this.start(n,e.getX(),e.getY()):this.delayedSelection&&(this.cell=n),this.cellWasClicked=!0,this.consumeMouseEvent(mxEvent.MOUSE_DOWN,e)))},mxGraphHandler.prototype.getGuideStates=function(){var t=this.graph.getDefaultParent(),e=this.graph.getModel(),n=mxUtils.bind(this,function(t){return null!=this.graph.view.getState(t)&&e.isVertex(t)&&null!=e.getGeometry(t)&&!e.getGeometry(t).relative});return this.graph.view.getCellStates(e.filterDescendants(n,t))},mxGraphHandler.prototype.getCells=function(t){return!this.delayedSelection&&this.graph.isCellMovable(t)?[t]:this.graph.getMovableCells(this.graph.getSelectionCells())},mxGraphHandler.prototype.getPreviewBounds=function(t){return null!=(t=this.getBoundingBox(t))&&(t.width=Math.max(0,t.width-1),t.height=Math.max(0,t.height-1),t.width<this.minimumSize?(t.x-=(this.minimumSize-t.width)/2,t.width=this.minimumSize):(t.x=Math.round(t.x),t.width=Math.ceil(t.width)),t.height<this.minimumSize?(t.y-=(this.minimumSize-t.height)/2,t.height=this.minimumSize):(t.y=Math.round(t.y),t.height=Math.ceil(t.height))),t},mxGraphHandler.prototype.getBoundingBox=function(t){var e,n,i=null;if(null!=t&&0<t.length)for(var l=this.graph.getModel(),o=0;o<t.length;o++)!l.isVertex(t[o])&&!l.isEdge(t[o])||null!=(e=this.graph.view.getState(t[o]))&&(n=e,l.isVertex(t[o])&&null!=e.shape&&null!=e.shape.boundingBox&&(n=e.shape.boundingBox),null==i?i=mxRectangle.fromRectangle(n):i.add(n));return i},mxGraphHandler.prototype.createPreviewShape=function(t){return(t=new mxRectangleShape(t,null,this.previewColor)).isDashed=!0,this.htmlPreview?(t.dialect=mxConstants.DIALECT_STRICTHTML,t.init(this.graph.container)):(t.dialect=mxConstants.DIALECT_SVG,t.init(this.graph.getView().getOverlayPane()),t.pointerEvents=!1,mxClient.IS_IOS&&(t.getSvgScreenOffset=function(){return 0})),t},mxGraphHandler.prototype.start=function(t,e,n,i){for(this.cell=t,this.first=mxUtils.convertPoint(this.graph.container,e,n),this.cells=null!=i?i:this.getCells(this.cell),this.bounds=this.graph.getView().getBounds(this.cells),this.pBounds=this.getPreviewBounds(this.cells),this.allCells=new mxDictionary,this.cloning=!1,e=this.cellCount=0;e<this.cells.length;e++)this.cellCount+=this.addStates(this.cells[e],this.allCells);if(this.guidesEnabled){this.guide=new mxGuide(this.graph,this.getGuideStates());var l=this.graph.model.getParent(t),o=this.graph.model.getChildCount(l)<2,s=new mxDictionary;for(t=this.graph.getOpposites(this.graph.getEdges(this.cell),this.cell),e=0;e<t.length;e++)null==(n=this.graph.view.getState(t[e]))||s.get(n)||s.put(n,!0);this.guide.isStateIgnored=mxUtils.bind(this,function(t){var e=this.graph.model.getParent(t.cell);return null!=t.cell&&(!this.cloning&&this.isCellMoving(t.cell)||t.cell!=(this.target||l)&&!o&&!s.get(t)&&(null==this.target||2<=this.graph.model.getChildCount(this.target))&&e!=(this.target||l))})}},mxGraphHandler.prototype.addStates=function(t,e){var n=0;if(null!=(i=this.graph.view.getState(t))&&null==e.get(t)){e.put(t,i),n++;for(var i=this.graph.model.getChildCount(t),l=0;l<i;l++)n+=this.addStates(this.graph.model.getChildAt(t,l),e)}return n},mxGraphHandler.prototype.isCellMoving=function(t){return null!=this.allCells.get(t)},mxGraphHandler.prototype.useGuidesForEvent=function(t){return null==this.guide||this.guide.isEnabledForEvent(t.getEvent())&&!this.graph.isConstrainedEvent(t.getEvent())},mxGraphHandler.prototype.snap=function(t){var e=this.scaleGrid?this.graph.view.scale:1;return t.x=this.graph.snap(t.x/e)*e,t.y=this.graph.snap(t.y/e)*e,t},mxGraphHandler.prototype.getDelta=function(t){return new mxPoint((t=mxUtils.convertPoint(this.graph.container,t.getX(),t.getY())).x-this.first.x-this.graph.panDx,t.y-this.first.y-this.graph.panDy)},mxGraphHandler.prototype.updateHint=function(t){},mxGraphHandler.prototype.removeHint=function(){},mxGraphHandler.prototype.roundLength=function(t){return Math.round(100*t)/100},mxGraphHandler.prototype.isValidDropTarget=function(t,e){return this.graph.model.getParent(this.cell)!=t},mxGraphHandler.prototype.checkPreview=function(){this.livePreviewActive&&this.cloning?(this.resetLivePreview(),this.livePreviewActive=!1):this.maxLivePreview>=this.cellCount&&!this.livePreviewActive&&this.allowLivePreview?this.cloning&&this.livePreviewActive||(this.livePreviewUsed=this.livePreviewActive=!0):this.livePreviewUsed||null!=this.shape||(this.shape=this.createPreviewShape(this.bounds))},mxGraphHandler.prototype.mouseMove=function(t,e){var n,i,l,o,s,r,a,h,u=this.graph;e.isConsumed()||!u.isMouseDown||null==this.cell||null==this.first||null==this.bounds||this.suspended?!this.isMoveEnabled()&&!this.isCloneEnabled()||!this.updateCursor||e.isConsumed()||null==e.getState()&&null==e.sourceState||u.isMouseDown||null!=(n=null==(n=u.getCursorForMouseEvent(e))&&u.isEnabled()&&u.isCellMovable(e.getCell())?u.getModel().isEdge(e.getCell())?mxConstants.CURSOR_MOVABLE_EDGE:mxConstants.CURSOR_MOVABLE_VERTEX:n)&&null!=e.sourceState&&e.sourceState.setCursor(n):mxEvent.isMultiTouchEvent(e.getEvent())?this.reset():(n=this.getDelta(e),i=u.tolerance,(null!=this.shape||this.livePreviewActive||Math.abs(n.x)>i||Math.abs(n.y)>i)&&(null==this.highlight&&(this.highlight=new mxCellHighlight(this.graph,mxConstants.DROP_TARGET_COLOR,3)),i=u.isCloneEvent(e.getEvent())&&u.isCellsCloneable()&&this.isCloneEnabled(),l=u.isGridEnabledEvent(e.getEvent()),o=e.getCell(),s=!0,r=null,this.cloning=i,u.isDropEnabled()&&this.highlightEnabled&&(r=u.getDropTarget(this.cells,e.getEvent(),o,i)),h=!1,null!=(a=u.getView().getState(r))&&(i||this.isValidDropTarget(r,e))?(this.target!=r&&(this.target=r,this.setHighlightColor(mxConstants.DROP_TARGET_COLOR)),h=!0):(this.target=null,this.connectOnDrop&&null!=o&&1==this.cells.length&&u.getModel().isVertex(o)&&u.isCellConnectable(o)&&null!=(a=u.getView().getState(o))&&(o=null==u.getEdgeValidationError(null,this.cell,o)?mxConstants.VALID_COLOR:mxConstants.INVALID_CONNECT_TARGET_COLOR,this.setHighlightColor(o),h=!0)),null!=a&&h?this.highlight.highlight(a):this.highlight.hide(),null!=this.guide&&this.useGuidesForEvent(e)?(n=this.guide.move(this.bounds,n,l,i),s=!1):n=this.graph.snapDelta(n,this.bounds,!l,!1,!1),null!=this.guide&&s&&this.guide.hide(),u.isConstrainedEvent(e.getEvent())&&(Math.abs(n.x)>Math.abs(n.y)?n.y=0:n.x=0),this.checkPreview(),this.currentDx==n.x&&this.currentDy==n.y||(this.currentDx=n.x,this.currentDy=n.y,this.updatePreview())),this.updateHint(e),this.consumeMouseEvent(mxEvent.MOUSE_MOVE,e),mxEvent.consume(e.getEvent()))},mxGraphHandler.prototype.updatePreview=function(t){this.livePreviewUsed&&!t?null!=this.cells&&(this.setHandlesVisibleForCells(this.graph.selectionCellsHandler.getHandledSelectionCells(),!1),this.updateLivePreview(this.currentDx,this.currentDy)):this.updatePreviewShape()},mxGraphHandler.prototype.updatePreviewShape=function(){null!=this.shape&&null!=this.pBounds&&(this.shape.bounds=new mxRectangle(Math.round(this.pBounds.x+this.currentDx),Math.round(this.pBounds.y+this.currentDy),this.pBounds.width,this.pBounds.height),this.shape.redraw())},mxGraphHandler.prototype.updateLivePreview=function(t,e){if(!this.suspended){var n=[];if(null!=this.allCells&&this.allCells.visit(mxUtils.bind(this,function(i,l){var o=this.graph.view.getState(l.cell);o!=l&&(l.destroy(),null!=o?this.allCells.put(l.cell,o):this.allCells.remove(l.cell),l=o),null!=l&&(o=l.clone(),n.push([l,o]),null!=l.shape&&(null==l.shape.originalPointerEvents&&(l.shape.originalPointerEvents=l.shape.pointerEvents),l.shape.pointerEvents=!1,null!=l.text&&(null==l.text.originalPointerEvents&&(l.text.originalPointerEvents=l.text.pointerEvents),l.text.pointerEvents=!1)),this.graph.model.isVertex(l.cell))&&(l.x+=t,l.y+=e,this.cloning?null!=l.text&&(l.text.updateBoundingBox(),null!=l.text.boundingBox&&(l.text.boundingBox.x+=t,l.text.boundingBox.y+=e),null!=l.text.unrotatedBoundingBox&&(l.text.unrotatedBoundingBox.x+=t,l.text.unrotatedBoundingBox.y+=e)):(l.view.graph.cellRenderer.redraw(l,!0),l.view.invalidate(l.cell),l.invalid=!1,null!=l.control&&null!=l.control.node&&(l.control.node.style.visibility="hidden")))})),0==n.length)this.reset();else{for(var i=this.graph.view.scale,l=0;l<n.length;l++){var o=n[l][0];if(this.graph.model.isEdge(o.cell)){var s=[];if(null!=(a=this.graph.getCellGeometry(o.cell))&&null!=a.points)for(var r=0;r<a.points.length;r++)null!=a.points[r]&&s.push(new mxPoint(a.points[r].x+t/i,a.points[r].y+e/i));var a=o.visibleSourceState,h=(r=o.visibleTargetState,n[l][1].absolutePoints);null!=a&&this.isCellMoving(a.cell)?o.view.updateFixedTerminalPoint(o,a,!0,this.graph.getConnectionConstraint(o,a,!0)):(o.setAbsoluteTerminalPoint(new mxPoint((a=h[0]).x+t,a.y+e),!0),a=null),null!=r&&this.isCellMoving(r.cell)?o.view.updateFixedTerminalPoint(o,r,!1,this.graph.getConnectionConstraint(o,r,!1)):(o.setAbsoluteTerminalPoint(new mxPoint((r=h[h.length-1]).x+t,r.y+e),!1),r=null),o.view.updatePoints(o,s,a,r),o.view.updateFloatingTerminalPoints(o,a,r),o.view.updateEdgeLabelOffset(o),o.invalid=!1,this.cloning||o.view.graph.cellRenderer.redraw(o,!0)}}this.graph.view.validate(),this.redrawHandles(n),this.resetPreviewStates(n)}}},mxGraphHandler.prototype.redrawHandles=function(t){for(var e=0;e<t.length;e++){var n=this.graph.selectionCellsHandler.getHandler(t[e][0].cell);null!=n&&n.redraw(!0)}},mxGraphHandler.prototype.resetPreviewStates=function(t){for(var e=0;e<t.length;e++)t[e][0].setState(t[e][1])},mxGraphHandler.prototype.suspend=function(){this.suspended||(this.livePreviewUsed&&this.updateLivePreview(0,0),null!=this.shape&&(this.shape.node.style.visibility="hidden"),null!=this.guide&&this.guide.setVisible(!1),this.suspended=!0)},mxGraphHandler.prototype.resume=function(){this.suspended&&(this.suspended=null,this.livePreviewUsed&&(this.livePreviewActive=!0),null!=this.shape&&(this.shape.node.style.visibility="visible"),null!=this.guide&&this.guide.setVisible(!0))},mxGraphHandler.prototype.resetLivePreview=function(){null!=this.allCells&&(this.allCells.visit(mxUtils.bind(this,function(t,e){null!=e.shape&&null!=e.shape.originalPointerEvents&&(e.shape.pointerEvents=e.shape.originalPointerEvents,e.shape.originalPointerEvents=null,(e.shape.bounds=null)!=e.text&&(e.text.pointerEvents=e.text.originalPointerEvents,e.text.originalPointerEvents=null)),null!=e.control&&null!=e.control.node&&"hidden"==e.control.node.style.visibility&&(e.control.node.style.visibility=""),this.cloning||null!=e.text&&e.text.updateBoundingBox(),e.view.invalidate(e.cell)})),this.graph.view.validate())},mxGraphHandler.prototype.setHandlesVisibleForCells=function(t,e,n){if(n||this.handlesVisible!=e)for(this.handlesVisible=e,n=0;n<t.length;n++){var i=this.graph.selectionCellsHandler.getHandler(t[n]);null!=i&&(i.setHandlesVisible(e),e&&i.redraw())}},mxGraphHandler.prototype.setHighlightColor=function(t){null!=this.highlight&&this.highlight.setHighlightColor(t)};mxGraphHandler.prototype.mouseUp=function(t,e){var n,i,l,o,s;e.isConsumed()||(this.livePreviewUsed&&this.resetLivePreview(),null==this.cell||null==this.first||null==this.shape&&!this.livePreviewUsed||null==this.currentDx||null==this.currentDy?this.isSelectEnabled()&&this.delayedSelection&&null!=this.cell&&this.selectDelayed(e):(n=this.graph,i=e.getCell(),this.connectOnDrop&&null==this.target&&null!=i&&n.getModel().isVertex(i)&&n.isCellConnectable(i)&&n.isEdgeValid(null,this.cell,i)?n.connectionHandler.connect(this.cell,i,e.getEvent()):(i=n.isCloneEvent(e.getEvent())&&n.isCellsCloneable()&&this.isCloneEnabled(),o=n.getView().scale,l=this.roundLength(this.currentDx/o),o=this.roundLength(this.currentDy/o),s=this.target,n.isSplitEnabled()&&n.isSplitTarget(s,this.cells,e.getEvent())?n.splitEdge(s,this.cells,null,l,o,e.getGraphX(),e.getGraphY()):this.moveCells(this.cells,l,o,i,this.target,e.getEvent())))),this.cellWasClicked&&this.consumeMouseEvent(mxEvent.MOUSE_UP,e),this.reset()},mxGraphHandler.prototype.reset=function(){this.livePreviewUsed&&(this.resetLivePreview(),this.setHandlesVisibleForCells(this.graph.selectionCellsHandler.getHandledSelectionCells(),!0)),this.destroyShapes(),this.removeHint(),this.delayedSelection=!1,this.livePreviewUsed=this.livePreviewActive=null,this.cellWasClicked=!1,this.cellCount=this.currentDy=this.currentDx=this.suspended=null,this.cloning=!1,this.cell=this.cells=this.first=this.target=this.guides=this.pBounds=this.allCells=null},mxGraphHandler.prototype.shouldRemoveCellsFromParent=function(t,e,n){if(this.graph.getModel().isVertex(t)&&null!=(t=this.graph.getView().getState(t))){n=mxUtils.convertPoint(this.graph.container,mxEvent.getClientX(n),mxEvent.getClientY(n));var i,l=mxUtils.toRadians(mxUtils.getValue(t.style,mxConstants.STYLE_ROTATION)||0);return 0!=l&&(e=Math.cos(-l),l=Math.sin(-l),i=new mxPoint(t.getCenterX(),t.getCenterY()),n=mxUtils.getRotatedPoint(n,e,l,i)),!mxUtils.contains(t,n.x,n.y)}return!1},mxGraphHandler.prototype.moveCells=function(t,e,n,i,l,o){i&&(t=this.graph.getCloneableCells(t));var s=this.graph.getModel().getParent(this.cell);null==l&&this.isRemoveCellsFromParent()&&this.shouldRemoveCellsFromParent(s,t,o)&&(l=this.graph.getDefaultParent()),i=i&&!this.graph.isCellLocked(l||this.graph.getDefaultParent()),this.graph.getModel().beginUpdate();try{if(s=[],!i&&null!=l&&this.removeEmptyParents){for(var r=new mxDictionary,a=0;a<t.length;a++)r.put(t[a],!0);for(a=0;a<t.length;a++){var h=this.graph.model.getParent(t[a]);null==h||r.get(h)||(r.put(h,!0),s.push(h))}}for(t=this.graph.moveCells(t,e,n,i,l,o),e=[],a=0;a<s.length;a++)this.shouldRemoveParent(s[a])&&e.push(s[a]);this.graph.removeCells(e,!1)}finally{this.graph.getModel().endUpdate()}i&&this.graph.setSelectionCells(t),this.isSelectEnabled()&&this.scrollOnMove&&this.graph.scrollCellToVisible(t[0])},mxGraphHandler.prototype.shouldRemoveParent=function(t){return null!=(t=this.graph.view.getState(t))&&(this.graph.model.isEdge(t.cell)||this.graph.model.isVertex(t.cell))&&this.graph.isCellDeletable(t.cell)&&0==this.graph.model.getChildCount(t.cell)&&this.graph.isTransparentState(t)},mxGraphHandler.prototype.destroyShapes=function(){null!=this.shape&&(this.shape.destroy(),this.shape=null),null!=this.guide&&(this.guide.destroy(),this.guide=null),null!=this.highlight&&(this.highlight.destroy(),this.highlight=null)},mxGraphHandler.prototype.destroy=function(){this.graph.removeMouseListener(this),this.graph.removeListener(this.panHandler),null!=this.escapeHandler&&(this.graph.removeListener(this.escapeHandler),this.escapeHandler=null),null!=this.refreshHandler&&(this.graph.getModel().removeListener(this.refreshHandler),this.graph.removeListener(this.refreshHandler),this.refreshHandler=null),mxEvent.removeListener(document,"keydown",this.keyHandler),mxEvent.removeListener(document,"keyup",this.keyHandler),this.destroyShapes(),this.removeHint()},mxPanningHandler.prototype=new mxEventSource,mxPanningHandler.prototype.constructor=mxPanningHandler,mxPanningHandler.prototype.graph=null,mxPanningHandler.prototype.useLeftButtonForPanning=!1,mxPanningHandler.prototype.usePopupTrigger=!0,mxPanningHandler.prototype.ignoreCell=!1,mxPanningHandler.prototype.previewEnabled=!0,mxPanningHandler.prototype.useGrid=!1,mxPanningHandler.prototype.panningEnabled=!0,mxPanningHandler.prototype.pinchEnabled=!0,mxPanningHandler.prototype.maxScale=8,mxPanningHandler.prototype.minScale=.01,mxPanningHandler.prototype.dx=null,mxPanningHandler.prototype.dy=null,mxPanningHandler.prototype.startX=0,mxPanningHandler.prototype.startY=0,mxPanningHandler.prototype.isActive=function(){return this.active||null!=this.initialScale},mxPanningHandler.prototype.isPanningEnabled=function(){return this.panningEnabled},mxPanningHandler.prototype.setPanningEnabled=function(t){this.panningEnabled=t},mxPanningHandler.prototype.isPinchEnabled=function(){return this.pinchEnabled},mxPanningHandler.prototype.setPinchEnabled=function(t){this.pinchEnabled=t},mxPanningHandler.prototype.isPanningTrigger=function(t){var e=t.getEvent();return this.useLeftButtonForPanning&&null==t.getState()&&mxEvent.isLeftMouseButton(e)||mxEvent.isControlDown(e)&&mxEvent.isShiftDown(e)||this.usePopupTrigger&&mxEvent.isPopupTrigger(e)},mxPanningHandler.prototype.isForcePanningEvent=function(t){return this.ignoreCell||mxEvent.isMultiTouchEvent(t.getEvent())},mxPanningHandler.prototype.mouseDown=function(t,e){!(this.mouseDownEvent=e).isConsumed()&&this.isPanningEnabled()&&!this.active&&this.isPanningTrigger(e)&&(this.start(e),this.consumePanningTrigger(e))},mxPanningHandler.prototype.start=function(t){this.dx0=-this.graph.container.scrollLeft,this.dy0=-this.graph.container.scrollTop,this.startX=t.getX(),this.startY=t.getY(),this.dy=this.dx=null,this.panningTrigger=!0},mxPanningHandler.prototype.consumePanningTrigger=function(t){t.consume()},mxPanningHandler.prototype.mouseMove=function(t,e){var n;this.dx=e.getX()-this.startX,this.dy=e.getY()-this.startY,this.active?(this.previewEnabled&&(this.useGrid&&(this.dx=this.graph.snap(this.dx),this.dy=this.graph.snap(this.dy)),this.graph.panGraph(this.dx+this.dx0,this.dy+this.dy0)),this.fireEvent(new mxEventObject(mxEvent.PAN,"event",e))):this.panningTrigger&&(n=this.active,this.active=Math.abs(this.dx)>this.graph.tolerance||Math.abs(this.dy)>this.graph.tolerance,!n&&this.active&&this.fireEvent(new mxEventObject(mxEvent.PAN_START,"event",e))),(this.active||this.panningTrigger)&&e.consume()},mxPanningHandler.prototype.mouseUp=function(t,e){var n,i;this.active&&(null!=this.dx&&null!=this.dy&&(this.graph.useScrollbarsForPanning&&mxUtils.hasScrollbars(this.graph.container)||(n=this.graph.getView().scale,i=this.graph.getView().translate,this.graph.panGraph(0,0),this.panGraph(i.x+this.dx/n,i.y+this.dy/n)),e.consume()),this.fireEvent(new mxEventObject(mxEvent.PAN_END,"event",e))),this.reset()},mxPanningHandler.prototype.zoomGraph=function(t){var e=Math.round(this.initialScale*t.scale*100)/100;null!=this.minScale&&(e=Math.max(this.minScale,e)),null!=this.maxScale&&(e=Math.min(this.maxScale,e)),this.graph.view.scale!=e&&(this.graph.zoomTo(e),mxEvent.consume(t))},mxPanningHandler.prototype.reset=function(){this.panningTrigger=this.graph.isMouseDown=!1,this.mouseDownEvent=null,this.active=!1,this.dy=this.dx=null},mxPanningHandler.prototype.panGraph=function(t,e){this.graph.getView().setTranslate(t,e)},mxPanningHandler.prototype.destroy=function(){this.graph.removeMouseListener(this),this.graph.removeListener(this.forcePanningHandler),this.graph.removeListener(this.gestureHandler),mxEvent.removeListener(document,"mouseup",this.mouseUpListener),mxEvent.removeListener(document,"mouseleave",this.mouseUpListener)},mxPopupMenuHandler.prototype=new mxPopupMenu,mxPopupMenuHandler.prototype.constructor=mxPopupMenuHandler,mxPopupMenuHandler.prototype.graph=null,mxPopupMenuHandler.prototype.selectOnPopup=!0,mxPopupMenuHandler.prototype.clearSelectionOnBackground=!0,mxPopupMenuHandler.prototype.triggerX=null,mxPopupMenuHandler.prototype.triggerY=null,mxPopupMenuHandler.prototype.screenX=null,mxPopupMenuHandler.prototype.screenY=null,mxPopupMenuHandler.prototype.init=function(){mxPopupMenu.prototype.init.apply(this),mxEvent.addGestureListeners(this.div,mxUtils.bind(this,function(t){this.graph.tooltipHandler.hide()}))},mxPopupMenuHandler.prototype.isSelectOnPopup=function(t){return this.selectOnPopup},mxPopupMenuHandler.prototype.mouseDown=function(t,e){this.isEnabled()&&!mxEvent.isMultiTouchEvent(e.getEvent())&&(this.hideMenu(),this.triggerX=e.getGraphX(),this.triggerY=e.getGraphY(),this.screenX=mxEvent.getMainEvent(e.getEvent()).screenX,this.screenY=mxEvent.getMainEvent(e.getEvent()).screenY,this.popupTrigger=this.isPopupTrigger(e),this.inTolerance=!0)},mxPopupMenuHandler.prototype.mouseMove=function(t,e){this.inTolerance&&null!=this.screenX&&null!=this.screenY&&(Math.abs(mxEvent.getMainEvent(e.getEvent()).screenX-this.screenX)>this.graph.tolerance||Math.abs(mxEvent.getMainEvent(e.getEvent()).screenY-this.screenY)>this.graph.tolerance)&&(this.inTolerance=!1)},mxPopupMenuHandler.prototype.mouseUp=function(t,e){var n,i;this.popupTrigger&&this.inTolerance&&null!=this.triggerX&&null!=this.triggerY&&(n=this.getCellForPopupEvent(e),this.graph.isEnabled()&&this.isSelectOnPopup(e)&&null!=n&&!this.graph.isCellSelected(n)?this.graph.setSelectionCell(n):this.clearSelectionOnBackground&&null==n&&this.graph.clearSelection(),this.graph.tooltipHandler.hide(),i=mxUtils.getScrollOrigin(),this.popup(e.getX()+i.x+1,e.getY()+i.y+1,n,e.getEvent()),e.consume()),this.inTolerance=this.popupTrigger=!1},mxPopupMenuHandler.prototype.getCellForPopupEvent=function(t){return t.getCell()},mxPopupMenuHandler.prototype.destroy=function(){this.graph.removeMouseListener(this),this.graph.removeListener(this.gestureHandler),mxPopupMenu.prototype.destroy.apply(this)},mxUtils.extend(mxCellMarker,mxEventSource),mxCellMarker.prototype.graph=null,mxCellMarker.prototype.enabled=!0,mxCellMarker.prototype.hotspot=mxConstants.DEFAULT_HOTSPOT,mxCellMarker.prototype.hotspotEnabled=!1,mxCellMarker.prototype.validColor=null,mxCellMarker.prototype.invalidColor=null,mxCellMarker.prototype.currentColor=null,mxCellMarker.prototype.validState=null,mxCellMarker.prototype.markedState=null,mxCellMarker.prototype.setEnabled=function(t){this.enabled=t},mxCellMarker.prototype.isEnabled=function(){return this.enabled},mxCellMarker.prototype.setHotspot=function(t){this.hotspot=t},mxCellMarker.prototype.getHotspot=function(){return this.hotspot},mxCellMarker.prototype.setHotspotEnabled=function(t){this.hotspotEnabled=t},mxCellMarker.prototype.isHotspotEnabled=function(){return this.hotspotEnabled},mxCellMarker.prototype.hasValidState=function(){return null!=this.validState},mxCellMarker.prototype.getValidState=function(){return this.validState},mxCellMarker.prototype.getMarkedState=function(){return this.markedState},mxCellMarker.prototype.reset=function(){(this.validState=null)!=this.markedState&&(this.markedState=null,this.unmark())},mxCellMarker.prototype.process=function(t){var e=null;return this.isEnabled()&&(e=this.getState(t),this.setCurrentState(e,t)),e},mxCellMarker.prototype.setCurrentState=function(t,e,n){var i=null!=t&&this.isValidState(t);n=null!=n?n:this.getMarkerColor(e.getEvent(),t,i),this.validState=i?t:null,t==this.markedState&&n==this.currentColor||(this.currentColor=n,null!=t&&null!=this.currentColor?(this.markedState=t,this.mark()):null!=this.markedState&&(this.markedState=null,this.unmark()))},mxCellMarker.prototype.markCell=function(t,e){null!=(t=this.graph.getView().getState(t))&&(this.currentColor=null!=e?e:this.validColor,this.markedState=t,this.mark())},mxCellMarker.prototype.mark=function(){this.highlight.setHighlightColor(this.currentColor),this.highlight.highlight(this.markedState),this.fireEvent(new mxEventObject(mxEvent.MARK,"state",this.markedState))},mxCellMarker.prototype.unmark=function(){this.mark()},mxCellMarker.prototype.isValidState=function(t){return!0},mxCellMarker.prototype.getMarkerColor=function(t,e,n){return n?this.validColor:this.invalidColor},mxCellMarker.prototype.getState=function(t){var e=this.graph.getView(),n=this.getCell(t);return null!=(e=this.getStateToMark(e.getState(n)))&&this.intersects(e,t)?e:null},mxCellMarker.prototype.getCell=function(t){return t.getCell()},mxCellMarker.prototype.getStateToMark=function(t){return t},mxCellMarker.prototype.intersects=function(t,e){return!this.hotspotEnabled||mxUtils.intersectsHotspot(t,e.getGraphX(),e.getGraphY(),this.hotspot,mxConstants.MIN_HOTSPOT_SIZE,mxConstants.MAX_HOTSPOT_SIZE)},mxCellMarker.prototype.destroy=function(){this.graph.getView().removeListener(this.resetHandler),this.graph.getModel().removeListener(this.resetHandler),this.highlight.destroy()},mxUtils.extend(mxSelectionCellsHandler,mxEventSource),mxSelectionCellsHandler.prototype.graph=null,mxSelectionCellsHandler.prototype.enabled=!0,mxSelectionCellsHandler.prototype.refreshHandler=null,mxSelectionCellsHandler.prototype.maxHandlers=100,mxSelectionCellsHandler.prototype.handlers=null,mxSelectionCellsHandler.prototype.isEnabled=function(){return this.enabled},mxSelectionCellsHandler.prototype.setEnabled=function(t){this.enabled=t},mxSelectionCellsHandler.prototype.getHandler=function(t){return this.handlers.get(t)},mxSelectionCellsHandler.prototype.isHandled=function(t){return null!=this.getHandler(t)},mxSelectionCellsHandler.prototype.reset=function(){this.handlers.visit(function(t,e){e.reset.apply(e)})},mxSelectionCellsHandler.prototype.getHandledSelectionCells=function(){return this.graph.getSelectionCells()},mxSelectionCellsHandler.prototype.refresh=function(){var t=this.handlers;this.handlers=new mxDictionary;for(var e=mxUtils.sortCells(this.getHandledSelectionCells(),!1),n=0;n<e.length;n++){var i,l=this.graph.view.getState(e[n]);null!=l&&(null!=(i=t.remove(e[n]))&&(i.state!=l?(i.destroy(),i=null):this.isHandlerActive(i)||(null!=i.refresh&&i.refresh(),i.redraw())),null!=i&&this.handlers.put(e[n],i))}for(t.visit(mxUtils.bind(this,function(t,e){this.fireEvent(new mxEventObject(mxEvent.REMOVE,"state",e.state)),e.destroy()})),n=0;n<e.length;n++)null!=(l=this.graph.view.getState(e[n]))&&(null==(i=this.handlers.get(e[n]))?(i=this.graph.createHandler(l),this.fireEvent(new mxEventObject(mxEvent.ADD,"state",l)),this.handlers.put(e[n],i)):i.updateParentHighlight())},mxSelectionCellsHandler.prototype.isHandlerActive=function(t){return null!=t.index},mxSelectionCellsHandler.prototype.updateHandler=function(t){var e,n,i,l=this.handlers.remove(t.cell);null!=l&&(e=l.index,n=l.startX,i=l.startY,l.destroy(),null!=(l=this.graph.createHandler(t))&&(this.handlers.put(t.cell,l),null!=e&&null!=n&&null!=i&&l.start(n,i,e)))},mxSelectionCellsHandler.prototype.mouseDown=function(t,e){var n;this.graph.isEnabled()&&this.isEnabled()&&(n=[t,e],this.handlers.visit(function(t,e){e.mouseDown.apply(e,n)}))},mxSelectionCellsHandler.prototype.mouseMove=function(t,e){var n;this.graph.isEnabled()&&this.isEnabled()&&(n=[t,e],this.handlers.visit(function(t,e){e.mouseMove.apply(e,n)}))},mxSelectionCellsHandler.prototype.mouseUp=function(t,e){var n;this.graph.isEnabled()&&this.isEnabled()&&(n=[t,e],this.handlers.visit(function(t,e){e.mouseUp.apply(e,n)}))},mxSelectionCellsHandler.prototype.destroy=function(){this.graph.removeMouseListener(this),null!=this.refreshHandler&&(this.graph.getSelectionModel().removeListener(this.refreshHandler),this.graph.getModel().removeListener(this.refreshHandler),this.graph.getView().removeListener(this.refreshHandler),this.refreshHandler=null)},mxUtils.extend(mxConnectionHandler,mxEventSource),mxConnectionHandler.prototype.graph=null,mxConnectionHandler.prototype.factoryMethod=!0,mxConnectionHandler.prototype.moveIconFront=!1,mxConnectionHandler.prototype.moveIconBack=!1,mxConnectionHandler.prototype.connectImage=null,mxConnectionHandler.prototype.targetConnectImage=!1,mxConnectionHandler.prototype.enabled=!0,mxConnectionHandler.prototype.select=!0,mxConnectionHandler.prototype.createTarget=!1,mxConnectionHandler.prototype.marker=null,mxConnectionHandler.prototype.constraintHandler=null,mxConnectionHandler.prototype.error=null,mxConnectionHandler.prototype.waypointsEnabled=!1,mxConnectionHandler.prototype.ignoreMouseDown=!1,mxConnectionHandler.prototype.first=null,mxConnectionHandler.prototype.connectIconOffset=new mxPoint(0,mxConstants.TOOLTIP_VERTICAL_OFFSET),mxConnectionHandler.prototype.edgeState=null,mxConnectionHandler.prototype.changeHandler=null,mxConnectionHandler.prototype.drillHandler=null,mxConnectionHandler.prototype.mouseDownCounter=0,mxConnectionHandler.prototype.movePreviewAway=!1,mxConnectionHandler.prototype.outlineConnect=!1,mxConnectionHandler.prototype.livePreview=!1,mxConnectionHandler.prototype.cursor=null,mxConnectionHandler.prototype.insertBeforeSource=!1,mxConnectionHandler.prototype.isEnabled=function(){return this.enabled},mxConnectionHandler.prototype.setEnabled=function(t){this.enabled=t},mxConnectionHandler.prototype.isInsertBefore=function(t,e,n,i,l){return this.insertBeforeSource&&e!=n},mxConnectionHandler.prototype.isCreateTarget=function(t){return this.createTarget},mxConnectionHandler.prototype.setCreateTarget=function(t){this.createTarget=t},mxConnectionHandler.prototype.createShape=function(){var t=this.livePreview&&null!=this.edgeState?this.graph.cellRenderer.createShape(this.edgeState):new mxPolyline([],mxConstants.INVALID_COLOR);return t.dialect=mxConstants.DIALECT_SVG,t.scale=this.graph.view.scale,t.pointerEvents=!1,t.isDashed=!0,t.init(this.graph.getView().getOverlayPane()),mxEvent.redirectMouseEvents(t.node,this.graph,null),t},mxConnectionHandler.prototype.init=function(){this.graph.addMouseListener(this),this.marker=this.createMarker(),this.constraintHandler=new mxConstraintHandler(this.graph),this.changeHandler=mxUtils.bind(this,function(t){null!=this.iconState&&(this.iconState=this.graph.getView().getState(this.iconState.cell)),null!=this.iconState?(this.redrawIcons(this.icons,this.iconState),this.constraintHandler.reset()):null!=this.previous&&null==this.graph.view.getState(this.previous.cell)&&this.reset()}),this.graph.getModel().addListener(mxEvent.CHANGE,this.changeHandler),this.graph.getView().addListener(mxEvent.SCALE,this.changeHandler),this.graph.getView().addListener(mxEvent.TRANSLATE,this.changeHandler),this.graph.getView().addListener(mxEvent.SCALE_AND_TRANSLATE,this.changeHandler),this.drillHandler=mxUtils.bind(this,function(t){this.reset()}),this.graph.addListener(mxEvent.START_EDITING,this.drillHandler),this.graph.getView().addListener(mxEvent.DOWN,this.drillHandler),this.graph.getView().addListener(mxEvent.UP,this.drillHandler)},mxConnectionHandler.prototype.isConnectableCell=function(t){return!0},mxConnectionHandler.prototype.createMarker=function(){var t=new mxCellMarker(this.graph);return t.hotspotEnabled=!0,t.getCell=mxUtils.bind(this,function(e){var n,i=mxCellMarker.prototype.getCell.apply(t,arguments);return(this.error=null)==(i=null==i&&null!=this.currentPoint?this.graph.getCellAt(this.currentPoint.x,this.currentPoint.y):i)||this.graph.isCellConnectable(i)||(n=this.graph.getModel().getParent(i),this.graph.getModel().isVertex(n)&&this.graph.isCellConnectable(n)&&(i=n)),null!=(i=this.graph.isSwimlane(i)&&null!=this.currentPoint&&this.graph.hitsSwimlaneContent(i,this.currentPoint.x,this.currentPoint.y)||!this.isConnectableCell(i)?null:i)?this.isConnecting()?null!=this.previous&&(this.error=this.validateConnection(this.previous.cell,i),null!=this.error&&0==this.error.length&&(i=null,this.isCreateTarget(e.getEvent())&&(this.error=null))):this.isValidSource(i,e)||(i=null):!this.isConnecting()||this.isCreateTarget(e.getEvent())||this.graph.allowDanglingEdges||(this.error=""),i}),t.isValidState=mxUtils.bind(this,function(e){return this.isConnecting()?null==this.error:mxCellMarker.prototype.isValidState.apply(t,arguments)}),t.getMarkerColor=mxUtils.bind(this,function(e,n,i){return null==this.connectImage||this.isConnecting()?mxCellMarker.prototype.getMarkerColor.apply(t,arguments):null}),t.intersects=mxUtils.bind(this,function(e,n){return!(null==this.connectImage&&!this.isConnecting())||mxCellMarker.prototype.intersects.apply(t,arguments)}),t},mxConnectionHandler.prototype.start=function(t,e,n,i){this.previous=t,this.first=new mxPoint(e,n),this.edgeState=null!=i?i:this.createEdgeState(null),this.marker.currentColor=this.marker.validColor,this.marker.markedState=t,this.marker.mark(),this.fireEvent(new mxEventObject(mxEvent.START,"state",this.previous))},mxConnectionHandler.prototype.isConnecting=function(){return null!=this.first&&null!=this.shape},mxConnectionHandler.prototype.isValidSource=function(t,e){return this.graph.isValidSource(t)},mxConnectionHandler.prototype.isValidTarget=function(t){return!0},mxConnectionHandler.prototype.validateConnection=function(t,e){return this.isValidTarget(e)?this.graph.getEdgeValidationError(null,t,e):""},mxConnectionHandler.prototype.getConnectImage=function(t){return this.connectImage},mxConnectionHandler.prototype.isMoveIconToFrontForState=function(t){return null!=t.text&&t.text.node.parentNode==this.graph.container||this.moveIconFront},mxConnectionHandler.prototype.createIcons=function(t){if(null==(l=this.getConnectImage(t))||null==t)return null;this.iconState=t;var e=[],n=new mxImageShape(new mxRectangle(0,0,l.width,l.height),l.src,null,null,0);n.preserveImageAspect=!1,this.isMoveIconToFrontForState(t)?(n.dialect=mxConstants.DIALECT_STRICTHTML,n.init(this.graph.container)):(n.dialect=mxConstants.DIALECT_SVG,n.init(this.graph.getView().getOverlayPane()),this.moveIconBack&&null!=n.node.previousSibling&&n.node.parentNode.insertBefore(n.node,n.node.parentNode.firstChild)),n.node.style.cursor=mxConstants.CURSOR_CONNECT;var i=mxUtils.bind(this,function(){return null!=this.currentState?this.currentState:t}),l=mxUtils.bind(this,function(t){mxEvent.isConsumed(t)||(this.icon=n,this.graph.fireMouseEvent(mxEvent.MOUSE_DOWN,new mxMouseEvent(t,i())))});return mxEvent.redirectMouseEvents(n.node,this.graph,i,l),e.push(n),this.redrawIcons(e,this.iconState),e},mxConnectionHandler.prototype.redrawIcons=function(t,e){null!=t&&null!=t[0]&&null!=e&&(e=this.getIconPosition(t[0],e),t[0].bounds.x=e.x,t[0].bounds.y=e.y,t[0].redraw())},mxConnectionHandler.prototype.getIconPosition=function(t,e){var n,i=this.graph.getView().scale,l=e.getCenterX(),o=e.getCenterY();return this.graph.isSwimlane(e.cell)&&(l=0!=(n=this.graph.getStartSize(e.cell)).width?e.x+n.width*i/2:l,o=0!=n.height?e.y+n.height*i/2:o,0!=(n=mxUtils.toRadians(mxUtils.getValue(e.style,mxConstants.STYLE_ROTATION)||0))&&(i=Math.cos(n),n=Math.sin(n),e=new mxPoint(e.getCenterX(),e.getCenterY()),l=(o=mxUtils.getRotatedPoint(new mxPoint(l,o),i,n,e)).x,o=o.y)),new mxPoint(l-t.bounds.width/2,o-t.bounds.height/2)},mxConnectionHandler.prototype.destroyIcons=function(){if(null!=this.icons){for(var t=0;t<this.icons.length;t++)this.icons[t].destroy();this.iconState=this.selectedIcon=this.icon=this.icons=null}},mxConnectionHandler.prototype.isStartEvent=function(t){return null!=this.constraintHandler.currentFocus&&null!=this.constraintHandler.currentConstraint||null!=this.previous&&null==this.error&&(null==this.icons||null!=this.icons&&null!=this.icon)},mxConnectionHandler.prototype.mouseDown=function(t,e){var n;this.mouseDownCounter++,this.isEnabled()&&this.graph.isEnabled()&&!e.isConsumed()&&!this.isConnecting()&&this.isStartEvent(e)&&(null!=this.constraintHandler.currentConstraint&&null!=this.constraintHandler.currentFocus&&null!=this.constraintHandler.currentPoint?(this.sourceConstraint=this.constraintHandler.currentConstraint,this.previous=this.constraintHandler.currentFocus,this.first=this.constraintHandler.currentPoint.clone()):this.first=new mxPoint(e.getGraphX(),e.getGraphY()),this.edgeState=this.createEdgeState(e),this.mouseDownCounter=1,this.waypointsEnabled&&null==this.shape&&(this.waypoints=null,this.shape=this.createShape(),null!=this.edgeState&&this.shape.apply(this.edgeState)),null==this.previous&&null!=this.edgeState&&(n=this.graph.getPointForEvent(e.getEvent()),this.edgeState.cell.geometry.setTerminalPoint(n,!0)),this.fireEvent(new mxEventObject(mxEvent.START,"state",this.previous)),e.consume()),this.selectedIcon=this.icon,this.icon=null},mxConnectionHandler.prototype.isImmediateConnectSource=function(t){return!this.graph.isCellMovable(t.cell)},mxConnectionHandler.prototype.createEdgeState=function(t){return null},mxConnectionHandler.prototype.isOutlineConnectEvent=function(t){var e=mxUtils.getOffset(this.graph.container),n=t.getEvent(),i=mxEvent.getClientX(n),l=(n=mxEvent.getClientY(n),document.documentElement),o=this.currentPoint.x-this.graph.container.scrollLeft+e.x-((window.pageXOffset||l.scrollLeft)-(l.clientLeft||0));return e=this.currentPoint.y-this.graph.container.scrollTop+e.y-((window.pageYOffset||l.scrollTop)-(l.clientTop||0)),this.outlineConnect&&!mxEvent.isShiftDown(t.getEvent())&&(t.isSource(this.marker.highlight.shape)||mxEvent.isAltDown(t.getEvent())&&null!=t.getState()||this.marker.highlight.isHighlightAt(i,n)||(o!=i||e!=n)&&null==t.getState()&&this.marker.highlight.isHighlightAt(o,e))},mxConnectionHandler.prototype.updateCurrentState=function(t,e){var n;this.constraintHandler.update(t,null==this.first,!1,null==this.first||t.isSource(this.marker.highlight.shape)?null:e),null!=this.constraintHandler.currentFocus&&null!=this.constraintHandler.currentConstraint?(null!=this.marker.highlight&&null!=this.marker.highlight.state&&this.marker.highlight.state.cell==this.constraintHandler.currentFocus.cell?"transparent"!=this.marker.highlight.shape.stroke&&(this.marker.highlight.shape.stroke="transparent",this.marker.highlight.repaint()):this.marker.markCell(this.constraintHandler.currentFocus.cell,"transparent"),null!=this.previous&&(this.error=this.validateConnection(this.previous.cell,this.constraintHandler.currentFocus.cell),null==this.error&&(this.currentState=this.constraintHandler.currentFocus),null==this.error&&(null==this.currentState||this.isCellEnabled(this.currentState.cell))||this.constraintHandler.reset())):(this.graph.isIgnoreTerminalEvent(t.getEvent())?(this.marker.reset(),this.currentState=null):(this.marker.process(t),this.currentState=this.marker.getValidState()),null==this.currentState||this.isCellEnabled(this.currentState.cell)||(this.constraintHandler.reset(),this.marker.reset(),this.currentState=null),n=this.isOutlineConnectEvent(t),null!=this.currentState&&n&&(t.isSource(this.marker.highlight.shape)&&(e=new mxPoint(t.getGraphX(),t.getGraphY())),n=this.graph.getOutlineConstraint(e,this.currentState,t),this.constraintHandler.setFocus(t,this.currentState,!1),this.constraintHandler.currentConstraint=n,this.constraintHandler.currentPoint=e),this.outlineConnect&&null!=this.marker.highlight&&null!=this.marker.highlight.shape&&(n=this.graph.view.scale,null!=this.constraintHandler.currentConstraint&&null!=this.constraintHandler.currentFocus?(this.marker.highlight.shape.stroke=mxConstants.OUTLINE_HIGHLIGHT_COLOR,this.marker.highlight.shape.strokewidth=mxConstants.OUTLINE_HIGHLIGHT_STROKEWIDTH/n/n,this.marker.highlight.repaint()):this.marker.hasValidState()&&(this.graph.isCellConnectable(t.getCell())&&this.marker.getValidState()!=t.getState()?(this.marker.highlight.shape.stroke="transparent",this.currentState=null):this.marker.highlight.shape.stroke=mxConstants.DEFAULT_VALID_COLOR,this.marker.highlight.shape.strokewidth=mxConstants.HIGHLIGHT_STROKEWIDTH/n/n,this.marker.highlight.repaint())))},mxConnectionHandler.prototype.isCellEnabled=function(t){return!0},mxConnectionHandler.prototype.convertWaypoint=function(t){var e=this.graph.getView().getScale(),n=this.graph.getView().getTranslate();t.x=t.x/e-n.x,t.y=t.y/e-n.y},mxConnectionHandler.prototype.snapToPreview=function(t,e){var n,i;mxEvent.isAltDown(t.getEvent())||null==this.previous||(n=this.graph.gridSize*this.graph.view.scale/2,i=null!=this.sourceConstraint?this.first:new mxPoint(this.previous.getCenterX(),this.previous.getCenterY()),Math.abs(i.x-t.getGraphX())<n&&(e.x=i.x),Math.abs(i.y-t.getGraphY())<n&&(e.y=i.y))},mxConnectionHandler.prototype.mouseMove=function(t,e){if(e.isConsumed()||!this.ignoreMouseDown&&null==this.first&&this.graph.isMouseDown)this.constraintHandler.reset();else{this.isEnabled()||null==this.currentState||(this.destroyIcons(),this.currentState=null);var n=(l=this.graph.getView()).scale,i=l.translate,l=new mxPoint(e.getGraphX(),e.getGraphY());if(this.error=null,this.graph.isGridEnabledEvent(e.getEvent())&&(l=new mxPoint((this.graph.snap(l.x/n-i.x)+i.x)*n,(this.graph.snap(l.y/n-i.y)+i.y)*n)),this.snapToPreview(e,l),this.currentPoint=l,(null!=this.first||this.isEnabled()&&this.graph.isEnabled())&&(null!=this.shape||null==this.first||Math.abs(e.getGraphX()-this.first.x)>this.graph.tolerance||Math.abs(e.getGraphY()-this.first.y)>this.graph.tolerance)&&this.updateCurrentState(e,l),null!=this.first){var o,s,r=null;if(n=l,null!=this.constraintHandler.currentConstraint&&null!=this.constraintHandler.currentFocus&&null!=this.constraintHandler.currentPoint?(r=this.constraintHandler.currentConstraint,n=this.constraintHandler.currentPoint.clone()):null!=this.previous&&!this.graph.isIgnoreTerminalEvent(e.getEvent())&&mxEvent.isShiftDown(e.getEvent())&&(Math.abs(this.previous.getCenterX()-l.x)<Math.abs(this.previous.getCenterY()-l.y)?l.x=this.previous.getCenterX():l.y=this.previous.getCenterY()),i=this.first,null!=this.selectedIcon&&(o=this.selectedIcon.bounds.width,s=this.selectedIcon.bounds.height,null!=this.currentState&&this.targetConnectImage?(o=this.getIconPosition(this.selectedIcon,this.currentState),this.selectedIcon.bounds.x=o.x,this.selectedIcon.bounds.y=o.y):(o=new mxRectangle(e.getGraphX()+this.connectIconOffset.x,e.getGraphY()+this.connectIconOffset.y,o,s),this.selectedIcon.bounds=o),this.selectedIcon.redraw()),null!=this.edgeState?(this.updateEdgeState(n,r),n=this.edgeState.absolutePoints[this.edgeState.absolutePoints.length-1],i=this.edgeState.absolutePoints[0]):(null!=this.currentState&&null==this.constraintHandler.currentConstraint&&null!=(o=this.getTargetPerimeterPoint(this.currentState,e))&&(n=o),null==this.sourceConstraint&&null!=this.previous&&null!=(o=this.getSourcePerimeterPoint(this.previous,null!=this.waypoints&&0<this.waypoints.length?this.waypoints[0]:n,e))&&(i=o)),null==this.currentState&&this.movePreviewAway){if(o=i,null!=this.edgeState&&2<=this.edgeState.absolutePoints.length&&null!=(r=this.edgeState.absolutePoints[this.edgeState.absolutePoints.length-2])&&(o=r),r=n.x-o.x,o=n.y-o.y,0==(s=Math.sqrt(r*r+o*o)))return;this.originalPoint=n.clone(),n.x-=4*r/s,n.y-=4*o/s}else this.originalPoint=null;null==this.shape&&(r=Math.abs(e.getGraphX()-this.first.x),o=Math.abs(e.getGraphY()-this.first.y),r>this.graph.tolerance||o>this.graph.tolerance)&&(this.shape=this.createShape(),null!=this.edgeState&&this.shape.apply(this.edgeState),this.updateCurrentState(e,l)),null!=this.shape&&(null!=this.edgeState?this.shape.points=this.edgeState.absolutePoints:(l=[i],(l=null!=this.waypoints?l.concat(this.waypoints):l).push(n),this.shape.points=l),this.drawPreview()),null!=this.cursor&&(this.graph.container.style.cursor=this.cursor),mxEvent.consume(e.getEvent()),e.consume()}else this.isEnabled()&&this.graph.isEnabled()?this.previous!=this.currentState&&null==this.edgeState?(this.destroyIcons(),null!=this.currentState&&null==this.error&&null==this.constraintHandler.currentConstraint&&(this.icons=this.createIcons(this.currentState),null==this.icons&&(this.currentState.setCursor(mxConstants.CURSOR_CONNECT),e.consume())),this.previous=this.currentState):this.previous!=this.currentState||null==this.currentState||null!=this.icons||this.graph.isMouseDown||e.consume():this.constraintHandler.reset();if(!this.graph.isMouseDown&&null!=this.currentState&&null!=this.icons){for(l=!1,n=e.getSource(),i=0;i<this.icons.length&&!l;i++)l=n==this.icons[i].node||n.parentNode==this.icons[i].node;l||this.updateIcons(this.currentState,this.icons,e)}}},mxConnectionHandler.prototype.updateEdgeState=function(t,e){null!=this.sourceConstraint&&null!=this.sourceConstraint.point&&(this.edgeState.style[mxConstants.STYLE_EXIT_X]=this.sourceConstraint.point.x,this.edgeState.style[mxConstants.STYLE_EXIT_Y]=this.sourceConstraint.point.y),null!=e&&null!=e.point?(this.edgeState.style[mxConstants.STYLE_ENTRY_X]=e.point.x,this.edgeState.style[mxConstants.STYLE_ENTRY_Y]=e.point.y):(delete this.edgeState.style[mxConstants.STYLE_ENTRY_X],delete this.edgeState.style[mxConstants.STYLE_ENTRY_Y]),this.edgeState.absolutePoints=[null,null!=this.currentState?null:t],this.graph.view.updateFixedTerminalPoint(this.edgeState,this.previous,!0,this.sourceConstraint),null!=this.currentState&&(null==e&&(e=this.graph.getConnectionConstraint(this.edgeState,this.previous,!1)),this.edgeState.setAbsoluteTerminalPoint(null,!1),this.graph.view.updateFixedTerminalPoint(this.edgeState,this.currentState,!1,e));var n=null;if(null!=this.waypoints){n=[];for(var i=0;i<this.waypoints.length;i++){var l=this.waypoints[i].clone();this.convertWaypoint(l),n[i]=l}}this.graph.view.updatePoints(this.edgeState,n,this.previous,this.currentState),this.graph.view.updateFloatingTerminalPoints(this.edgeState,this.previous,this.currentState)},mxConnectionHandler.prototype.getTargetPerimeterPoint=function(t,e){var n,i=null,l=t.view,o=l.getPerimeterFunction(t);return null!=o?(n=null!=this.waypoints&&0<this.waypoints.length?this.waypoints[this.waypoints.length-1]:new mxPoint(this.previous.getCenterX(),this.previous.getCenterY()),null!=(l=o(l.getPerimeterBounds(t),this.edgeState,n,!1))&&(i=l)):i=new mxPoint(t.getCenterX(),t.getCenterY()),i},mxConnectionHandler.prototype.getSourcePerimeterPoint=function(t,e,n){n=null;var i,l,o=t.view,s=o.getPerimeterFunction(t),r=new mxPoint(t.getCenterX(),t.getCenterY());return null!=s?(i=mxUtils.getValue(t.style,mxConstants.STYLE_ROTATION,0),l=Math.PI/180*-i,0!=i&&(e=mxUtils.getRotatedPoint(new mxPoint(e.x,e.y),Math.cos(l),Math.sin(l),r)),null!=(t=s(o.getPerimeterBounds(t),t,e,!1))&&(n=t=0!=i?mxUtils.getRotatedPoint(new mxPoint(t.x,t.y),Math.cos(-l),Math.sin(-l),r):t)):n=r,n},mxConnectionHandler.prototype.updateIcons=function(t,e,n){},mxConnectionHandler.prototype.isStopEvent=function(t){return null!=t.getState()},mxConnectionHandler.prototype.addWaypointForEvent=function(t){var e=mxUtils.convertPoint(this.graph.container,t.getX(),t.getY()),n=Math.abs(e.x-this.first.x);e=Math.abs(e.y-this.first.y),(null!=this.waypoints||1<this.mouseDownCounter&&(n>this.graph.tolerance||e>this.graph.tolerance))&&(null==this.waypoints&&(this.waypoints=[]),n=this.graph.view.scale,e=new mxPoint(this.graph.snap(t.getGraphX()/n)*n,this.graph.snap(t.getGraphY()/n)*n),this.waypoints.push(e))},mxConnectionHandler.prototype.checkConstraints=function(t,e){return null==t||null==e||null==t.point||null==e.point||!t.point.equals(e.point)||t.dx!=e.dx||t.dy!=e.dy||t.perimeter!=e.perimeter},mxConnectionHandler.prototype.mouseUp=function(t,e){if(!e.isConsumed()&&this.isConnecting()){if(this.waypointsEnabled&&!this.isStopEvent(e))return this.addWaypointForEvent(e),void e.consume();var n=null!=this.previous?this.previous.cell:null,i=null;null==(i=null!=this.constraintHandler.currentConstraint&&null!=this.constraintHandler.currentFocus?this.constraintHandler.currentFocus.cell:i)&&null!=this.currentState&&(i=this.currentState.cell),null!=this.error||null!=n&&null!=i&&n==i&&!this.checkConstraints(this.sourceConstraint,this.constraintHandler.currentConstraint)?(null!=this.previous&&null!=this.marker.validState&&this.previous.cell==this.marker.validState.cell&&this.graph.selectCellForEvent(this.marker.source,e.getEvent()),null!=this.error&&0<this.error.length&&this.graph.validationAlert(this.error)):this.connect(n,i,e.getEvent(),e.getCell()),this.destroyIcons(),e.consume()}null!=this.first&&this.reset()},mxConnectionHandler.prototype.reset=function(){null!=this.shape&&(this.shape.destroy(),this.shape=null),null!=this.cursor&&null!=this.graph.container&&(this.graph.container.style.cursor=""),this.destroyIcons(),this.marker.reset(),this.constraintHandler.reset(),this.sourceConstraint=this.error=this.previous=this.edgeState=this.currentPoint=this.originalPoint=null,this.mouseDownCounter=0,this.first=null,this.fireEvent(new mxEventObject(mxEvent.RESET))},mxConnectionHandler.prototype.drawPreview=function(){this.updatePreview(null==this.error),this.shape.redraw()},mxConnectionHandler.prototype.updatePreview=function(t){this.shape.strokewidth=this.getEdgeWidth(t),this.shape.stroke=this.getEdgeColor(t)},mxConnectionHandler.prototype.getEdgeColor=function(t){return t?mxConstants.VALID_COLOR:mxConstants.INVALID_COLOR},mxConnectionHandler.prototype.getEdgeWidth=function(t){return t?3:1},mxConnectionHandler.prototype.connect=function(t,e,n,i){if(null!=e||this.isCreateTarget(n)||this.graph.allowDanglingEdges){var l,o,s=this.graph.getModel(),r=!1,a=null;s.beginUpdate();try{null!=t&&null==e&&!this.graph.isIgnoreTerminalEvent(n)&&this.isCreateTarget(n)&&null!=(e=this.createTargetVertex(n,t))&&(i=this.graph.getDropTarget([e],n,i),r=!0,null!=i&&this.graph.getModel().isEdge(i)?i=this.graph.getDefaultParent():null!=(l=this.graph.getView().getState(i))&&((o=s.getGeometry(e)).x-=l.origin.x,o.y-=l.origin.y),this.graph.addCell(e,i));var h=this.graph.getDefaultParent();null!=t&&null!=e&&s.getParent(t)==s.getParent(e)&&s.getParent(s.getParent(t))!=s.getRoot()&&(h=s.getParent(t),null!=t.geometry&&t.geometry.relative&&null!=e.geometry&&e.geometry.relative&&(h=s.getParent(h)));var u=l=null;if(null!=this.edgeState&&(l=this.edgeState.cell.value,u=this.edgeState.cell.style),null!=(a=this.insertEdge(h,null,l,t,e,u))){if(this.graph.setConnectionConstraint(a,t,!0,this.sourceConstraint),this.graph.setConnectionConstraint(a,e,!1,this.constraintHandler.currentConstraint),null!=this.edgeState&&s.setGeometry(a,this.edgeState.cell.geometry),h=s.getParent(t),this.isInsertBefore(a,t,e,n,i)){for(o=t;null!=o.parent&&null!=o.geometry&&o.geometry.relative&&o.parent!=a.parent;)o=this.graph.model.getParent(o);null!=o&&null!=o.parent&&o.parent==a.parent&&s.add(h,a,o.parent.getIndex(o))}var d,c=s.getGeometry(a);if(null==c&&((c=new mxGeometry).relative=!0,s.setGeometry(a,c)),null!=this.waypoints&&0<this.waypoints.length){var p=this.graph.view.scale,m=this.graph.view.translate;for(c.points=[],t=0;t<this.waypoints.length;t++){var g=this.waypoints[t];c.points.push(new mxPoint(g.x/p-m.x,g.y/p-m.y))}}null==e&&(d=this.graph.view.translate,p=this.graph.view.scale,(g=null!=this.originalPoint?new mxPoint(this.originalPoint.x/p-d.x,this.originalPoint.y/p-d.y):new mxPoint(this.currentPoint.x/p-d.x,this.currentPoint.y/p-d.y)).x-=this.graph.panDx/this.graph.view.scale,g.y-=this.graph.panDy/this.graph.view.scale,c.setTerminalPoint(g,!1)),this.fireEvent(new mxEventObject(mxEvent.CONNECT,"cell",a,"terminal",e,"event",n,"target",i,"terminalInserted",r))}}catch(t){mxLog.show(),mxLog.debug(t.message)}finally{s.endUpdate()}this.select&&this.selectCells(a,r?e:null)}},mxConnectionHandler.prototype.selectCells=function(t,e){this.graph.setSelectionCell(t)},mxConnectionHandler.prototype.insertEdge=function(t,e,n,i,l,o){return null==this.factoryMethod?this.graph.insertEdge(t,e,n,i,l,o):(e=this.createEdge(n,i,l,o),this.graph.addEdge(e,t,i,l))},mxConnectionHandler.prototype.createTargetVertex=function(t,e){for(var n=this.graph.getCellGeometry(e);null!=n&&n.relative;)e=this.graph.getModel().getParent(e),n=this.graph.getCellGeometry(e);var i,l,o,s,r,a=this.graph.cloneCell(e);return null!=(n=this.graph.getModel().getGeometry(a))&&(l=new mxPoint(this.currentPoint.x/(i=this.graph.view.scale)-(r=this.graph.view.translate).x,this.currentPoint.y/i-r.y),n.x=Math.round(l.x-n.width/2-this.graph.panDx/i),n.y=Math.round(l.y-n.height/2-this.graph.panDy/i),0<(l=this.getAlignmentTolerance())&&null!=(o=this.graph.view.getState(e))&&(s=o.x/i-r.x,r=o.y/i-r.y,Math.abs(s-n.x)<=l&&(n.x=Math.round(s)),Math.abs(r-n.y)<=l&&(n.y=Math.round(r)))),a},mxConnectionHandler.prototype.getAlignmentTolerance=function(t){return this.graph.isGridEnabled()?this.graph.gridSize/2:this.graph.tolerance},mxConnectionHandler.prototype.createEdge=function(t,e,n,i){var l=null;return null==(l=null!=this.factoryMethod?this.factoryMethod(e,n,i):l)&&((l=new mxCell(t||"")).setEdge(!0),l.setStyle(i),(t=new mxGeometry).relative=!0,l.setGeometry(t)),l},mxConnectionHandler.prototype.destroy=function(){this.graph.removeMouseListener(this),null!=this.shape&&(this.shape.destroy(),this.shape=null),null!=this.marker&&(this.marker.destroy(),this.marker=null),null!=this.constraintHandler&&(this.constraintHandler.destroy(),this.constraintHandler=null),null!=this.changeHandler&&(this.graph.getModel().removeListener(this.changeHandler),this.graph.getView().removeListener(this.changeHandler),this.changeHandler=null),null!=this.drillHandler&&(this.graph.removeListener(this.drillHandler),this.graph.getView().removeListener(this.drillHandler),this.drillHandler=null),null!=this.escapeHandler&&(this.graph.removeListener(this.escapeHandler),this.escapeHandler=null)},mxConstraintHandler.prototype.pointImage=new mxImage(mxClient.imageBasePath+"/point.gif",5,5),mxConstraintHandler.prototype.graph=null,mxConstraintHandler.prototype.enabled=!0,mxConstraintHandler.prototype.highlightColor=mxConstants.DEFAULT_VALID_COLOR,mxConstraintHandler.prototype.isEnabled=function(){return this.enabled},mxConstraintHandler.prototype.setEnabled=function(t){this.enabled=t},mxConstraintHandler.prototype.reset=function(){if(null!=this.focusIcons){for(var t=0;t<this.focusIcons.length;t++)this.focusIcons[t].destroy();this.focusIcons=null}null!=this.focusHighlight&&(this.focusHighlight.destroy(),this.focusHighlight=null),this.focusPoints=this.currentFocus=this.currentPoint=this.currentFocusArea=this.currentConstraint=null},mxConstraintHandler.prototype.getTolerance=function(t){return this.graph.getTolerance()},mxConstraintHandler.prototype.getImageForConstraint=function(t,e,n){return this.pointImage},mxConstraintHandler.prototype.isEventIgnored=function(t,e){return!1},mxConstraintHandler.prototype.isStateIgnored=function(t,e){return!1},mxConstraintHandler.prototype.destroyIcons=function(){if(null!=this.focusIcons){for(var t=0;t<this.focusIcons.length;t++)this.focusIcons[t].destroy();this.focusPoints=this.focusIcons=null}},mxConstraintHandler.prototype.destroyFocusHighlight=function(){null!=this.focusHighlight&&(this.focusHighlight.destroy(),this.focusHighlight=null)},mxConstraintHandler.prototype.isKeepFocusEvent=function(t){return mxEvent.isShiftDown(t.getEvent())},mxConstraintHandler.prototype.getCellForEvent=function(t,e){var n=t.getCell();return null==(n=null!=n||null==e||t.getGraphX()==e.x&&t.getGraphY()==e.y?n:this.graph.getCellAt(e.x,e.y))||this.graph.isCellConnectable(n)||(e=this.graph.getModel().getParent(n),this.graph.getModel().isVertex(e)&&this.graph.isCellConnectable(e)&&(n=e)),this.graph.isCellLocked(n)?null:n},mxConstraintHandler.prototype.update=function(t,e,n,i){if(this.isEnabled()&&!this.isEventIgnored(t)){null==this.mouseleaveHandler&&null!=this.graph.container&&(this.mouseleaveHandler=mxUtils.bind(this,function(){this.reset()}),mxEvent.addListener(this.graph.container,"mouseleave",this.resetHandler));var l=this.getTolerance(t),o=new mxRectangle((o=null!=i?i.x:t.getGraphX())-l,(r=null!=i?i.y:t.getGraphY())-l,2*l,2*l),s=(l=new mxRectangle(t.getGraphX()-l,t.getGraphY()-l,2*l,2*l),this.graph.view.getState(this.getCellForEvent(t,i)));if(this.isKeepFocusEvent(t)||null!=this.currentFocusArea&&null!=this.currentFocus&&null==s&&this.graph.getModel().isVertex(this.currentFocus.cell)&&mxUtils.intersects(this.currentFocusArea,l)||s==this.currentFocus||(this.currentFocus=this.currentFocusArea=null,this.setFocus(t,s,e)),(t=this.currentPoint=this.currentConstraint=null)!=this.focusIcons&&null!=this.constraints&&(null==s||this.currentFocus==s))for(var r=l.getCenterX(),a=l.getCenterY(),h=0;h<this.focusIcons.length;h++){var u,d=r-this.focusIcons[h].bounds.getCenterX(),c=a-this.focusIcons[h].bounds.getCenterY();d=d*d+c*c,(this.intersects(this.focusIcons[h],l,e,n)||null!=i&&this.intersects(this.focusIcons[h],o,e,n))&&(null==t||d<t)&&(this.currentConstraint=this.constraints[h],this.currentPoint=this.focusPoints[h],t=d,(d=this.focusIcons[h].bounds.clone()).grow(mxConstants.HIGHLIGHT_SIZE+1),--d.width,--d.height,null==this.focusHighlight&&((c=this.createHighlightShape()).dialect=mxConstants.DIALECT_SVG,c.pointerEvents=!1,c.init(this.graph.getView().getOverlayPane()),this.focusHighlight=c,u=mxUtils.bind(this,function(){return null!=this.currentFocus?this.currentFocus:s}),mxEvent.redirectMouseEvents(c.node,this.graph,u)),this.focusHighlight.bounds=d,this.focusHighlight.redraw())}null==this.currentConstraint&&this.destroyFocusHighlight()}else this.currentPoint=this.currentFocus=this.currentConstraint=null},mxConstraintHandler.prototype.redraw=function(){if(null!=this.currentFocus&&null!=this.constraints&&null!=this.focusIcons){var t=this.graph.view.getState(this.currentFocus.cell);this.currentFocus=t,this.currentFocusArea=new mxRectangle(t.x,t.y,t.width,t.height);for(var e=0;e<this.constraints.length;e++){var n=this.graph.getConnectionPoint(t,this.constraints[e]),i=this.getImageForConstraint(t,this.constraints[e],n);i=new mxRectangle(Math.round(n.x-i.width/2),Math.round(n.y-i.height/2),i.width,i.height),this.focusIcons[e].bounds=i,this.focusIcons[e].redraw(),this.currentFocusArea.add(this.focusIcons[e].bounds),this.focusPoints[e]=n}}},mxConstraintHandler.prototype.setFocus=function(t,e,n){if(this.constraints=null!=e&&!this.isStateIgnored(e,n)&&this.graph.isCellConnectable(e.cell)?this.isEnabled()&&this.graph.getAllConnectionConstraints(e,n)||[]:null,null!=this.constraints){if(this.currentFocus=e,this.currentFocusArea=new mxRectangle(e.x,e.y,e.width,e.height),null!=this.focusIcons){for(n=0;n<this.focusIcons.length;n++)this.focusIcons[n].destroy();this.focusPoints=this.focusIcons=null}for(this.focusPoints=[],this.focusIcons=[],n=0;n<this.constraints.length;n++){var i=this.graph.getConnectionPoint(e,this.constraints[n]),l=this.getImageForConstraint(e,this.constraints[n],i),o=l.src;(o=new mxImageShape(l=new mxRectangle(Math.round(i.x-l.width/2),Math.round(i.y-l.height/2),l.width,l.height),o)).dialect=this.graph.dialect!=mxConstants.DIALECT_SVG?mxConstants.DIALECT_MIXEDHTML:mxConstants.DIALECT_SVG,o.preserveImageAspect=!1,o.init(this.graph.getView().getDecoratorPane()),null!=o.node.previousSibling&&o.node.parentNode.insertBefore(o.node,o.node.parentNode.firstChild),l=mxUtils.bind(this,function(){return null!=this.currentFocus?this.currentFocus:e}),o.redraw(),mxEvent.redirectMouseEvents(o.node,this.graph,l),this.currentFocusArea.add(o.bounds),this.focusIcons.push(o),this.focusPoints.push(i)}this.currentFocusArea.grow(this.getTolerance(t))}else this.destroyIcons(),this.destroyFocusHighlight()},mxConstraintHandler.prototype.createHighlightShape=function(){var t=new mxRectangleShape(null,this.highlightColor,this.highlightColor,mxConstants.HIGHLIGHT_STROKEWIDTH);return t.opacity=mxConstants.HIGHLIGHT_OPACITY,t},mxConstraintHandler.prototype.intersects=function(t,e,n,i){return mxUtils.intersects(t.bounds,e)},mxConstraintHandler.prototype.destroy=function(){this.reset(),null!=this.resetHandler&&(this.graph.model.removeListener(this.resetHandler),this.graph.view.removeListener(this.resetHandler),this.graph.removeListener(this.resetHandler),this.resetHandler=null),null!=this.mouseleaveHandler&&null!=this.graph.container&&(mxEvent.removeListener(this.graph.container,"mouseleave",this.mouseleaveHandler),this.mouseleaveHandler=null)},mxRubberband.prototype.defaultOpacity=20,mxRubberband.prototype.enabled=!0,mxRubberband.prototype.div=null,mxRubberband.prototype.sharedDiv=null,mxRubberband.prototype.currentX=0,mxRubberband.prototype.currentY=0,mxRubberband.prototype.fadeOut=!1,mxRubberband.prototype.isEnabled=function(){return this.enabled},mxRubberband.prototype.setEnabled=function(t){this.enabled=t},mxRubberband.prototype.isForceRubberbandEvent=function(t){return mxEvent.isAltDown(t.getEvent())},mxRubberband.prototype.mouseDown=function(t,e){var n,i;!e.isConsumed()&&this.isEnabled()&&this.graph.isEnabled()&&null==e.getState()&&!mxEvent.isMultiTouchEvent(e.getEvent())&&(n=mxUtils.getOffset(this.graph.container),(i=mxUtils.getScrollOrigin(this.graph.container)).x-=n.x,i.y-=n.y,this.start(e.getX()+i.x,e.getY()+i.y),e.consume(!1))},mxRubberband.prototype.start=function(t,e){function n(t){t=new mxMouseEvent(t);var e=mxUtils.convertPoint(i,t.getX(),t.getY());return t.graphX=e.x,t.graphY=e.y,t}this.first=new mxPoint(t,e);var i=this.graph.container;this.dragHandler=mxUtils.bind(this,function(t){this.mouseMove(this.graph,n(t))}),this.dropHandler=mxUtils.bind(this,function(t){this.mouseUp(this.graph,n(t))}),mxClient.IS_FF&&mxEvent.addGestureListeners(document,null,this.dragHandler,this.dropHandler)},mxRubberband.prototype.mouseMove=function(t,e){var n,i,l,o;e.isConsumed()||null==this.first||(i=mxUtils.getScrollOrigin(this.graph.container),n=mxUtils.getOffset(this.graph.container),i.x-=n.x,i.y-=n.y,n=e.getX()+i.x,i=e.getY()+i.y,l=this.first.y-i,o=this.graph.tolerance,(null!=this.div||Math.abs(this.first.x-n)>o||Math.abs(l)>o)&&(null==this.div&&(this.div=this.createShape()),mxUtils.clearSelection(),this.update(n,i),e.consume()))},mxRubberband.prototype.createShape=function(){null==this.sharedDiv&&(this.sharedDiv=document.createElement("div"),this.sharedDiv.className="mxRubberband",mxUtils.setOpacity(this.sharedDiv,this.defaultOpacity)),this.graph.container.appendChild(this.sharedDiv);var t=this.sharedDiv;return mxClient.IS_SVG&&(!mxClient.IS_IE||10<=document.documentMode)&&this.fadeOut&&(this.sharedDiv=null),t},mxRubberband.prototype.isActive=function(t,e){return null!=this.div&&"none"!=this.div.style.display},mxRubberband.prototype.mouseUp=function(t,e){var n=this.isActive();this.reset(),n&&(this.execute(e.getEvent()),e.consume())},mxRubberband.prototype.execute=function(t){var e=new mxRectangle(this.x,this.y,this.width,this.height);this.graph.selectRegion(e,t)},mxRubberband.prototype.reset=function(){var t;null!=this.div&&(mxClient.IS_SVG&&(!mxClient.IS_IE||10<=document.documentMode)&&this.fadeOut?(mxUtils.setPrefixedStyle((t=this.div).style,"transition","all 0.2s linear"),t.style.pointerEvents="none",t.style.opacity=0,window.setTimeout(function(){t.parentNode.removeChild(t)},200)):this.div.parentNode.removeChild(this.div)),mxEvent.removeGestureListeners(document,null,this.dragHandler,this.dropHandler),this.dropHandler=this.dragHandler=null,this.currentY=this.currentX=0,this.div=this.first=null},mxRubberband.prototype.update=function(t,e){this.currentX=t,this.currentY=e,this.repaint()},mxRubberband.prototype.repaint=function(){var t,e;null!=this.div&&(t=this.currentX-this.graph.panDx,e=this.currentY-this.graph.panDy,this.x=Math.min(this.first.x,t),this.y=Math.min(this.first.y,e),this.width=Math.max(this.first.x,t)-this.x,this.height=Math.max(this.first.y,e)-this.y,this.div.style.left=this.x+0+"px",this.div.style.top=this.y+0+"px",this.div.style.width=Math.max(1,this.width)+"px",this.div.style.height=Math.max(1,this.height)+"px")},mxRubberband.prototype.destroy=function(){this.destroyed||(this.destroyed=!0,this.graph.removeMouseListener(this),this.graph.removeListener(this.forceRubberbandHandler),this.graph.removeListener(this.panHandler),this.reset(),null!=this.sharedDiv&&(this.sharedDiv=null))},mxHandle.prototype.cursor="default",mxHandle.prototype.image=null,mxHandle.prototype.ignoreGrid=!1,mxHandle.prototype.getPosition=function(t){},mxHandle.prototype.setPosition=function(t,e,n){},mxHandle.prototype.execute=function(t){},mxHandle.prototype.copyStyle=function(t){this.graph.setCellStyles(t,this.state.style[t],[this.state.cell])},mxHandle.prototype.processEvent=function(t){var e=this.graph.view.scale,n=this.graph.view.translate;n=new mxPoint(t.getGraphX()/e-n.x,t.getGraphY()/e-n.y),null!=this.shape&&null!=this.shape.bounds&&(n.x-=this.shape.bounds.width/e/4,n.y-=this.shape.bounds.height/e/4),e=-mxUtils.toRadians(this.getRotation());var i=-mxUtils.toRadians(this.getTotalRotation())-e;n=this.flipPoint(this.rotatePoint(this.snapPoint(this.rotatePoint(n,e),this.ignoreGrid||!this.graph.isGridEnabledEvent(t.getEvent())),i)),this.setPosition(this.state.getPaintBounds(),n,t),this.redraw()},mxHandle.prototype.positionChanged=function(){null!=this.state.text&&this.state.text.apply(this.state),null!=this.state.shape&&this.state.shape.apply(this.state),this.graph.cellRenderer.redraw(this.state,!0)},mxHandle.prototype.getRotation=function(){return null!=this.state.shape?this.state.shape.getRotation():0},mxHandle.prototype.getTotalRotation=function(){return null!=this.state.shape?this.state.shape.getShapeRotation():0},mxHandle.prototype.init=function(){var t=this.isHtmlRequired();null!=this.image?(this.shape=new mxImageShape(new mxRectangle(0,0,this.image.width,this.image.height),this.image.src),this.shape.preserveImageAspect=!1):null==this.shape&&(this.shape=this.createShape(t)),this.initShape(t)},mxHandle.prototype.createShape=function(t){return new mxRectangleShape(new mxRectangle(0,0,mxConstants.HANDLE_SIZE,mxConstants.HANDLE_SIZE),mxConstants.HANDLE_FILLCOLOR,mxConstants.HANDLE_STROKECOLOR)},mxHandle.prototype.initShape=function(t){t&&this.shape.isHtmlAllowed()?(this.shape.dialect=mxConstants.DIALECT_STRICTHTML,this.shape.init(this.graph.container)):(this.shape.dialect=this.graph.dialect!=mxConstants.DIALECT_SVG?mxConstants.DIALECT_MIXEDHTML:mxConstants.DIALECT_SVG,null!=this.cursor&&this.shape.init(this.graph.getView().getOverlayPane())),mxEvent.redirectMouseEvents(this.shape.node,this.graph,this.state),this.shape.node.style.cursor=this.cursor},mxHandle.prototype.redraw=function(){var t,e,n;null==this.shape||null==this.state.shape||null!=(t=this.getPosition(this.state.getPaintBounds()))&&(e=mxUtils.toRadians(this.getTotalRotation()),t=this.rotatePoint(this.flipPoint(t),e),e=this.graph.view.scale,n=this.graph.view.translate,this.shape.bounds.x=Math.floor((t.x+n.x)*e-this.shape.bounds.width/2),this.shape.bounds.y=Math.floor((t.y+n.y)*e-this.shape.bounds.height/2),this.shape.redraw())},mxHandle.prototype.isHtmlRequired=function(){return null!=this.state.text&&this.state.text.node.parentNode==this.graph.container},mxHandle.prototype.rotatePoint=function(t,e){var n=new mxPoint((n=this.state.getCellBounds()).getCenterX(),n.getCenterY());return mxUtils.getRotatedPoint(t,Math.cos(e),Math.sin(e),n)},mxHandle.prototype.flipPoint=function(t){var e;return null!=this.state.shape&&(e=this.state.getCellBounds(),this.state.shape.flipH&&(t.x=2*e.x+e.width-t.x),this.state.shape.flipV&&(t.y=2*e.y+e.height-t.y)),t},mxHandle.prototype.snapPoint=function(t,e){return e||(t.x=this.graph.snap(t.x),t.y=this.graph.snap(t.y)),t},mxHandle.prototype.setVisible=function(t){null!=this.shape&&null!=this.shape.node&&(this.shape.node.style.display=t?"":"none")},mxHandle.prototype.reset=function(){this.setVisible(!0),this.state.style=this.graph.getCellStyle(this.state.cell),this.positionChanged()},mxHandle.prototype.destroy=function(){null!=this.shape&&(this.shape.destroy(),this.shape=null)},mxVertexHandler.prototype.graph=null,mxVertexHandler.prototype.state=null,mxVertexHandler.prototype.singleSizer=!1,mxVertexHandler.prototype.index=null,mxVertexHandler.prototype.allowHandleBoundsCheck=!0,mxVertexHandler.prototype.handleImage=null,mxVertexHandler.prototype.handlesVisible=!0,mxVertexHandler.prototype.tolerance=0,mxVertexHandler.prototype.rotationEnabled=!1,mxVertexHandler.prototype.parentHighlightEnabled=!1,mxVertexHandler.prototype.rotationRaster=!0,mxVertexHandler.prototype.rotationCursor="crosshair",mxVertexHandler.prototype.livePreview=!1,mxVertexHandler.prototype.movePreviewToFront=!1,mxVertexHandler.prototype.manageSizers=!1,mxVertexHandler.prototype.constrainGroupByChildren=!1,mxVertexHandler.prototype.rotationHandleVSpacing=-16,mxVertexHandler.prototype.horizontalOffset=0,mxVertexHandler.prototype.verticalOffset=0,mxVertexHandler.prototype.init=function(){var t,e;this.graph=this.state.view.graph,this.selectionBounds=this.getSelectionBounds(this.state),this.bounds=new mxRectangle(this.selectionBounds.x,this.selectionBounds.y,this.selectionBounds.width,this.selectionBounds.height),this.selectionBorder=this.createSelectionShape(this.bounds),this.selectionBorder.dialect=mxConstants.DIALECT_SVG,this.selectionBorder.pointerEvents=!1,this.selectionBorder.rotation=Number(this.state.style[mxConstants.STYLE_ROTATION]||"0"),this.selectionBorder.init(this.graph.getView().getOverlayPane()),mxEvent.redirectMouseEvents(this.selectionBorder.node,this.graph,this.state),this.graph.isCellMovable(this.state.cell)&&this.selectionBorder.setCursor(mxConstants.CURSOR_MOVABLE_VERTEX),(mxGraphHandler.prototype.maxCells<=0||this.graph.getSelectionCount()<mxGraphHandler.prototype.maxCells)&&(t=this.graph.isCellResizable(this.state.cell),this.sizers=[],t||this.graph.isLabelMovable(this.state.cell)&&2<=this.state.width&&2<=this.state.height?(e=0,t&&(this.singleSizer||(this.sizers.push(this.createSizer("nw-resize",e++)),this.sizers.push(this.createSizer("n-resize",e++)),this.sizers.push(this.createSizer("ne-resize",e++)),this.sizers.push(this.createSizer("w-resize",e++)),this.sizers.push(this.createSizer("e-resize",e++)),this.sizers.push(this.createSizer("sw-resize",e++)),this.sizers.push(this.createSizer("s-resize",e++))),this.sizers.push(this.createSizer("se-resize",e++))),null==(t=this.graph.model.getGeometry(this.state.cell))||t.relative||this.graph.isSwimlane(this.state.cell)||!this.graph.isLabelMovable(this.state.cell)||(this.labelShape=this.createSizer(mxConstants.CURSOR_LABEL_HANDLE,mxEvent.LABEL_HANDLE,mxConstants.LABEL_HANDLE_SIZE,mxConstants.LABEL_HANDLE_FILLCOLOR),this.sizers.push(this.labelShape))):this.graph.isCellMovable(this.state.cell)&&!this.graph.isCellResizable(this.state.cell)&&this.state.width<2&&this.state.height<2&&(this.labelShape=this.createSizer(mxConstants.CURSOR_MOVABLE_VERTEX,mxEvent.LABEL_HANDLE,null,mxConstants.LABEL_HANDLE_FILLCOLOR),this.sizers.push(this.labelShape))),this.isRotationHandleVisible()&&(this.rotationShape=this.createSizer(this.rotationCursor,mxEvent.ROTATION_HANDLE,mxConstants.HANDLE_SIZE+3,mxConstants.HANDLE_FILLCOLOR),this.sizers.push(this.rotationShape)),this.customHandles=this.createCustomHandles(),this.redraw(),this.constrainGroupByChildren&&this.updateMinBounds()},mxVertexHandler.prototype.isRotationHandleVisible=function(){return this.graph.isEnabled()&&this.rotationEnabled&&this.graph.isCellRotatable(this.state.cell)&&(mxGraphHandler.prototype.maxCells<=0||this.graph.getSelectionCount()<mxGraphHandler.prototype.maxCells)},mxVertexHandler.prototype.isConstrainedEvent=function(t){return mxEvent.isShiftDown(t.getEvent())||"fixed"==this.state.style[mxConstants.STYLE_ASPECT]},mxVertexHandler.prototype.isCenteredEvent=function(t,e){return!1},mxVertexHandler.prototype.createCustomHandles=function(){return null},mxVertexHandler.prototype.updateMinBounds=function(){var t,e=this.graph.getChildCells(this.state.cell);0<e.length&&(this.minBounds=this.graph.view.getBounds(e),null!=this.minBounds)&&(e=this.state.view.scale,t=this.state.view.translate,this.minBounds.x-=this.state.x,this.minBounds.y-=this.state.y,this.minBounds.x/=e,this.minBounds.y/=e,this.minBounds.width/=e,this.minBounds.height/=e,this.x0=this.state.x/e-t.x,this.y0=this.state.y/e-t.y)},mxVertexHandler.prototype.getSelectionBounds=function(t){return new mxRectangle(Math.round(t.x),Math.round(t.y),Math.round(t.width),Math.round(t.height))},mxVertexHandler.prototype.createParentHighlightShape=function(t){return this.createSelectionShape(t)},mxVertexHandler.prototype.createSelectionShape=function(t){return(t=new mxRectangleShape(mxRectangle.fromRectangle(t),null,this.getSelectionColor())).strokewidth=this.getSelectionStrokeWidth(),t.isDashed=this.isSelectionDashed(),t},mxVertexHandler.prototype.getSelectionColor=function(){return mxConstants.VERTEX_SELECTION_COLOR},mxVertexHandler.prototype.getSelectionStrokeWidth=function(){return mxConstants.VERTEX_SELECTION_STROKEWIDTH},mxVertexHandler.prototype.isSelectionDashed=function(){return mxConstants.VERTEX_SELECTION_DASHED},mxVertexHandler.prototype.createSizer=function(t,e,n,i){return n=new mxRectangle(0,0,n=n||mxConstants.HANDLE_SIZE,n),(i=this.createSizerShape(n,e,i)).isHtmlAllowed()&&null!=this.state.text&&this.state.text.node.parentNode==this.graph.container?(--i.bounds.height,--i.bounds.width,i.dialect=mxConstants.DIALECT_STRICTHTML,i.init(this.graph.container)):(i.dialect=this.graph.dialect!=mxConstants.DIALECT_SVG?mxConstants.DIALECT_MIXEDHTML:mxConstants.DIALECT_SVG,i.init(this.graph.getView().getOverlayPane())),mxEvent.redirectMouseEvents(i.node,this.graph,this.state),this.graph.isEnabled()&&i.setCursor(t),this.isSizerVisible(e)||(i.visible=!1),i},mxVertexHandler.prototype.isSizerVisible=function(t){return!0},mxVertexHandler.prototype.createSizerShape=function(t,e,n){return null!=this.handleImage?((t=new mxImageShape(t=new mxRectangle(t.x,t.y,this.handleImage.width,this.handleImage.height),this.handleImage.src)).preserveImageAspect=!1,t):new(e==mxEvent.ROTATION_HANDLE?mxEllipse:mxRectangleShape)(t,n||mxConstants.HANDLE_FILLCOLOR,mxConstants.HANDLE_STROKECOLOR)},mxVertexHandler.prototype.moveSizerTo=function(t,e,n){null!=t&&(t.bounds.x=Math.floor(e-t.bounds.width/2),t.bounds.y=Math.floor(n-t.bounds.height/2),null!=t.node&&"none"!=t.node.style.display&&t.redraw())},mxVertexHandler.prototype.getHandleForEvent=function(t){var e=mxEvent.isMouseEvent(t.getEvent())?1:this.tolerance,n=this.allowHandleBoundsCheck&&(mxClient.IS_IE||0<e)?new mxRectangle(t.getGraphX()-e,t.getGraphY()-e,2*e,2*e):null;if((e=mxUtils.bind(this,function(e){var i=null!=(i=null!=e&&e.constructor!=mxImageShape&&this.allowHandleBoundsCheck?e.strokewidth+e.svgStrokeTolerance:null)?new mxRectangle(t.getGraphX()-Math.floor(i/2),t.getGraphY()-Math.floor(i/2),i,i):n;return null!=e&&(t.isSource(e)||null!=i&&mxUtils.intersects(e.bounds,i)&&"none"!=e.node.style.display&&"hidden"!=e.node.style.visibility)}))(this.rotationShape))return mxEvent.ROTATION_HANDLE;if(e(this.labelShape))return mxEvent.LABEL_HANDLE;if(null!=this.sizers)for(var i=0;i<this.sizers.length;i++)if(e(this.sizers[i]))return i;if(null!=this.customHandles&&this.isCustomHandleEvent(t))for(i=this.customHandles.length-1;0<=i;i--)if(e(this.customHandles[i].shape))return mxEvent.CUSTOM_HANDLE-i;return null},mxVertexHandler.prototype.isCustomHandleEvent=function(t){return!0},mxVertexHandler.prototype.mouseDown=function(t,e){var n;e.isConsumed()||!this.graph.isEnabled()||null!=(n=this.getHandleForEvent(e))&&(this.start(e.getGraphX(),e.getGraphY(),n),e.consume())},mxVertexHandler.prototype.isLivePreviewBorder=function(){return null!=this.state.shape&&null==this.state.shape.fill&&null==this.state.shape.stroke},mxVertexHandler.prototype.start=function(t,e,n){if(null!=this.selectionBorder)if(this.livePreviewActive=this.livePreview&&0==this.graph.model.getChildCount(this.state.cell),this.inTolerance=!0,this.childOffsetY=this.childOffsetX=0,this.index=n,this.startX=t,this.startY=e,this.index<=mxEvent.CUSTOM_HANDLE&&this.isGhostPreview())this.ghostPreview=this.createGhostPreview();else if(e=(t=this.state.view.graph.model).getParent(this.state.cell),this.state.view.currentRoot!=e&&(t.isVertex(e)||t.isEdge(e))&&(this.parentState=this.state.view.graph.view.getState(e)),this.selectionBorder.node.style.display=n==mxEvent.ROTATION_HANDLE?"inline":"none",this.livePreviewActive&&!this.isLivePreviewBorder()||(this.preview=this.createSelectionShape(this.bounds),mxClient.IS_SVG&&0!=Number(this.state.style[mxConstants.STYLE_ROTATION]||"0")||null==this.state.text||this.state.text.node.parentNode!=this.graph.container?(this.preview.dialect=mxConstants.DIALECT_SVG,this.preview.init(this.graph.view.getOverlayPane())):(this.preview.dialect=mxConstants.DIALECT_STRICTHTML,this.preview.init(this.graph.container))),n==mxEvent.ROTATION_HANDLE&&(t=(e=this.getRotationHandlePosition()).x-this.state.getCenterX(),e=e.y-this.state.getCenterY(),this.startAngle=0!=t?180*Math.atan(e/t)/Math.PI+90:0,this.startDist=Math.sqrt(t*t+e*e)),this.livePreviewActive)for(this.hideSizers(),n==mxEvent.ROTATION_HANDLE?this.rotationShape.node.style.display="":n==mxEvent.LABEL_HANDLE?this.labelShape.node.style.display="":null!=this.sizers&&null!=this.sizers[n]?this.sizers[n].node.style.display="":n<=mxEvent.CUSTOM_HANDLE&&null!=this.customHandles&&this.customHandles[mxEvent.CUSTOM_HANDLE-n].setVisible(!0),n=this.graph.getEdges(this.state.cell),this.edgeHandlers=[],t=0;t<n.length;t++)null!=(e=this.graph.selectionCellsHandler.getHandler(n[t]))&&this.edgeHandlers.push(e)},mxVertexHandler.prototype.createGhostPreview=function(){var t=this.graph.cellRenderer.createShape(this.state);return t.init(this.graph.view.getOverlayPane()),t.scale=this.state.view.scale,t.bounds=this.bounds,t.outline=!0,t},mxVertexHandler.prototype.setHandlesVisible=function(t){if(this.handlesVisible=t,null!=this.sizers)for(var e=0;e<this.sizers.length;e++)this.sizers[e].node.style.display=t?"":"none";if(null!=this.customHandles)for(e=0;e<this.customHandles.length;e++)this.customHandles[e].setVisible(t)},mxVertexHandler.prototype.hideSizers=function(){this.setHandlesVisible(!1)},mxVertexHandler.prototype.checkTolerance=function(t){this.inTolerance&&null!=this.startX&&null!=this.startY&&(mxEvent.isMouseEvent(t.getEvent())||Math.abs(t.getGraphX()-this.startX)>this.graph.tolerance||Math.abs(t.getGraphY()-this.startY)>this.graph.tolerance)&&(this.inTolerance=!1)},mxVertexHandler.prototype.updateHint=function(t){},mxVertexHandler.prototype.removeHint=function(){},mxVertexHandler.prototype.roundAngle=function(t){return Math.round(10*t)/10},mxVertexHandler.prototype.roundLength=function(t){return Math.round(100*t)/100},mxVertexHandler.prototype.mouseMove=function(t,e){e.isConsumed()||null==this.index?this.graph.isMouseDown||null==this.getHandleForEvent(e)||e.consume(!1):(this.checkTolerance(e),this.inTolerance||(this.index<=mxEvent.CUSTOM_HANDLE?null!=this.customHandles&&(this.customHandles[mxEvent.CUSTOM_HANDLE-this.index].processEvent(e),this.customHandles[mxEvent.CUSTOM_HANDLE-this.index].active=!0,null!=this.ghostPreview?(this.ghostPreview.apply(this.state),this.ghostPreview.strokewidth=this.getSelectionStrokeWidth()/this.ghostPreview.scale/this.ghostPreview.scale,this.ghostPreview.isDashed=this.isSelectionDashed(),this.ghostPreview.stroke=this.getSelectionColor(),this.ghostPreview.redraw(),null!=this.selectionBounds&&(this.selectionBorder.node.style.display="none")):(this.movePreviewToFront&&this.moveToFront(),this.customHandles[mxEvent.CUSTOM_HANDLE-this.index].positionChanged())):this.index==mxEvent.LABEL_HANDLE?this.moveLabel(e):(this.index==mxEvent.ROTATION_HANDLE?this.rotateVertex(e):this.resizeVertex(e),this.updateHint(e))),e.consume())},mxVertexHandler.prototype.isGhostPreview=function(){return 0<this.state.view.graph.model.getChildCount(this.state.cell)},mxVertexHandler.prototype.moveLabel=function(t){var e=new mxPoint(t.getGraphX(),t.getGraphY()),n=this.graph.view.translate,i=this.graph.view.scale;this.graph.isGridEnabledEvent(t.getEvent())&&(e.x=(this.graph.snap(e.x/i-n.x)+n.x)*i,e.y=(this.graph.snap(e.y/i-n.y)+n.y)*i),this.moveSizerTo(this.sizers[null!=this.rotationShape?this.sizers.length-2:this.sizers.length-1],e.x,e.y)},mxVertexHandler.prototype.rotateVertex=function(t){var e=new mxPoint(t.getGraphX(),t.getGraphY()),n=this.state.x+this.state.width/2-e.x,i=this.state.y+this.state.height/2-e.y;this.currentAlpha=0!=n?180*Math.atan(i/n)/Math.PI+90:i<0?180:0,0<n&&(this.currentAlpha-=180),this.currentAlpha-=this.startAngle,this.rotationRaster&&this.graph.isGridEnabledEvent(t.getEvent())?(n=e.x-this.state.getCenterX(),i=e.y-this.state.getCenterY(),t=Math.sqrt(n*n+i*i),raster=t-this.startDist<2?15:t-this.startDist<25?5:1,this.currentAlpha=Math.round(this.currentAlpha/raster)*raster):this.currentAlpha=this.roundAngle(this.currentAlpha),this.selectionBorder.rotation=this.currentAlpha,this.selectionBorder.redraw(),this.livePreviewActive&&this.redrawHandles()},mxVertexHandler.prototype.resizeVertex=function(t){var e=new mxPoint(this.state.getCenterX(),this.state.getCenterY()),n=mxUtils.toRadians(this.state.style[mxConstants.STYLE_ROTATION]||"0"),i=new mxPoint(t.getGraphX(),t.getGraphY()),l=this.graph.view.translate,o=this.graph.view.scale,s=Math.cos(-n),r=Math.sin(-n),a=(i=r*(a=i.x-this.startX)+s*(h=i.y-this.startY),s*a-r*h),h=i;s=this.graph.getCellGeometry(this.state.cell),this.unscaledBounds=this.union(s,a/o,h/o,this.index,this.graph.isGridEnabledEvent(t.getEvent()),1,new mxPoint(0,0),this.isConstrainedEvent(t),this.isCenteredEvent(this.state,t)),s.relative||(null!=(r=this.graph.getMaximumGraphBounds())&&null!=this.parentState&&((r=mxRectangle.fromRectangle(r)).x-=(this.parentState.x-l.x*o)/o,r.y-=(this.parentState.y-l.y*o)/o),!this.graph.isConstrainChild(this.state.cell)||null!=(i=this.graph.getCellContainmentArea(this.state.cell))&&(0<(a=this.graph.getOverlap(this.state.cell))&&((i=mxRectangle.fromRectangle(i)).x-=i.width*a,i.y-=i.height*a,i.width+=2*i.width*a,i.height+=2*i.height*a),null==r?r=i:(r=mxRectangle.fromRectangle(r)).intersect(i)),null!=r&&(this.unscaledBounds.x<r.x&&(this.unscaledBounds.width-=r.x-this.unscaledBounds.x,this.unscaledBounds.x=r.x),this.unscaledBounds.y<r.y&&(this.unscaledBounds.height-=r.y-this.unscaledBounds.y,this.unscaledBounds.y=r.y),this.unscaledBounds.x+this.unscaledBounds.width>r.x+r.width&&(this.unscaledBounds.width-=this.unscaledBounds.x+this.unscaledBounds.width-r.x-r.width),this.unscaledBounds.y+this.unscaledBounds.height>r.y+r.height&&(this.unscaledBounds.height-=this.unscaledBounds.y+this.unscaledBounds.height-r.y-r.height))),i=this.bounds,this.bounds=new mxRectangle((null!=this.parentState?this.parentState.x:l.x*o)+this.unscaledBounds.x*o,(null!=this.parentState?this.parentState.y:l.y*o)+this.unscaledBounds.y*o,this.unscaledBounds.width*o,this.unscaledBounds.height*o),s.relative&&null!=this.parentState&&(this.bounds.x+=this.state.x-this.parentState.x,this.bounds.y+=this.state.y-this.parentState.y),s=Math.cos(n),r=Math.sin(n),e=s*(a=(n=new mxPoint(this.bounds.getCenterX(),this.bounds.getCenterY())).x-e.x)-r*(h=n.y-e.y)-a,n=r*a+s*h-h,l=s*(a=this.bounds.x-this.state.x)-r*(h=this.bounds.y-this.state.y),s=r*a+s*h,this.bounds.x+=e,this.bounds.y+=n,this.unscaledBounds.x=this.roundLength(this.unscaledBounds.x+e/o),this.unscaledBounds.y=this.roundLength(this.unscaledBounds.y+n/o),this.unscaledBounds.width=this.roundLength(this.unscaledBounds.width),this.unscaledBounds.height=this.roundLength(this.unscaledBounds.height),this.graph.isCellCollapsed(this.state.cell)||0==e&&0==n?this.childOffsetY=this.childOffsetX=0:(this.childOffsetX=this.state.x-this.bounds.x+l,this.childOffsetY=this.state.y-this.bounds.y+s),i.equals(this.bounds)||(this.livePreviewActive&&this.updateLivePreview(t),null!=this.preview?this.drawPreview():this.updateParentHighlight())},mxVertexHandler.prototype.updateLivePreview=function(t){var e=this.graph.view.scale,n=this.graph.view.translate;t=this.state.clone(),this.state.x=this.bounds.x,this.state.y=this.bounds.y,this.state.origin=new mxPoint(this.state.x/e-n.x,this.state.y/e-n.y),this.state.width=this.bounds.width,this.state.height=this.bounds.height,new mxPoint((e=this.state.absoluteOffset).x,e.y),this.state.absoluteOffset.x=0,this.state.absoluteOffset.y=0,null!=(e=this.graph.getCellGeometry(this.state.cell))&&(null==(n=e.offset||this.EMPTY_POINT)||e.relative||(this.state.absoluteOffset.x=this.state.view.scale*n.x,this.state.absoluteOffset.y=this.state.view.scale*n.y),this.state.view.updateVertexLabelOffset(this.state)),this.state.view.graph.cellRenderer.redraw(this.state,!0),this.state.view.invalidate(this.state.cell),this.state.invalid=!1,this.state.view.validate(),this.redrawHandles(),this.movePreviewToFront&&this.moveToFront(),null!=this.state.control&&null!=this.state.control.node&&(this.state.control.node.style.visibility="hidden"),this.state.setState(t)},mxVertexHandler.prototype.moveToFront=function(){(null!=this.state.text&&null!=this.state.text.node&&null!=this.state.text.node.nextSibling||null!=this.state.shape&&null!=this.state.shape.node&&null!=this.state.shape.node.nextSibling&&(null==this.state.text||this.state.shape.node.nextSibling!=this.state.text.node))&&(null!=this.state.shape&&null!=this.state.shape.node&&this.state.shape.node.parentNode.appendChild(this.state.shape.node),null!=this.state.text&&null!=this.state.text.node&&this.state.text.node.parentNode.appendChild(this.state.text.node))},mxVertexHandler.prototype.mouseUp=function(t,e){if(null!=this.index&&null!=this.state){var n,i,l,o,s,r,a,h,u,d,c=new mxPoint(e.getGraphX(),e.getGraphY()),p=this.index;(this.index=null)==this.ghostPreview&&(this.state.view.invalidate(this.state.cell,!1,!1),this.state.view.validate()),this.graph.getModel().beginUpdate();try{p<=mxEvent.CUSTOM_HANDLE?null!=this.customHandles&&(n=this.state.view.graph.getCellStyle(this.state.cell),this.customHandles[mxEvent.CUSTOM_HANDLE-p].active=!1,this.customHandles[mxEvent.CUSTOM_HANDLE-p].execute(e),null!=this.customHandles&&null!=this.customHandles[mxEvent.CUSTOM_HANDLE-p]&&(this.state.style=n,this.customHandles[mxEvent.CUSTOM_HANDLE-p].positionChanged())):p==mxEvent.ROTATION_HANDLE?null!=this.currentAlpha?0!=(i=this.currentAlpha-(this.state.style[mxConstants.STYLE_ROTATION]||0))&&this.rotateCell(this.state.cell,i):this.rotateClick():(l=this.graph.isGridEnabledEvent(e.getEvent()),o=mxUtils.toRadians(this.state.style[mxConstants.STYLE_ROTATION]||"0"),s=Math.cos(-o),c=(r=Math.sin(-o))*(a=c.x-this.startX)+s*(h=c.y-this.startY),a=s*a-r*h,h=c,u=this.graph.view.scale,d=this.isRecursiveResize(this.state,e),this.resizeCell(this.state.cell,this.roundLength(a/u),this.roundLength(h/u),p,l,this.isConstrainedEvent(e),d))}finally{this.graph.getModel().endUpdate()}e.consume(),this.reset(),this.redrawHandles()}},mxVertexHandler.prototype.isRecursiveResize=function(t,e){return this.graph.isRecursiveResize(this.state)},mxVertexHandler.prototype.rotateClick=function(){},mxVertexHandler.prototype.rotateCell=function(t,e,n){if(0!=e){var i,l=this.graph.getModel();if((l.isVertex(t)||l.isEdge(t))&&(l.isEdge(t)||(i=(this.graph.getCurrentCellStyle(t)[mxConstants.STYLE_ROTATION]||0)+e,this.graph.setCellStyles(mxConstants.STYLE_ROTATION,i,[t])),null!=(i=this.graph.getCellGeometry(t)))){var o=this.graph.getCellGeometry(n);if(null==o||l.isEdge(n)||((i=i.clone()).rotate(e,new mxPoint(o.width/2,o.height/2)),l.setGeometry(t,i)),l.isVertex(t)&&!i.relative||l.isEdge(t))for(n=l.getChildCount(t),i=0;i<n;i++)this.rotateCell(l.getChildAt(t,i),e,t)}}},mxVertexHandler.prototype.reset=function(){if(null!=this.sizers&&null!=this.index&&null!=this.sizers[this.index]&&"none"==this.sizers[this.index].node.style.display&&(this.sizers[this.index].node.style.display=""),(this.index=this.inTolerance=this.currentAlpha=null)!=this.preview&&(this.preview.destroy(),this.preview=null),null!=this.ghostPreview&&(this.ghostPreview.destroy(),this.ghostPreview=null),this.livePreviewActive&&null!=this.sizers){for(var t=0;t<this.sizers.length;t++)null!=this.sizers[t]&&(this.sizers[t].node.style.display="");null!=this.state.control&&null!=this.state.control.node&&(this.state.control.node.style.visibility="")}if(null!=this.customHandles)for(t=0;t<this.customHandles.length;t++)this.customHandles[t].active?(this.customHandles[t].active=!1,this.customHandles[t].reset()):this.customHandles[t].setVisible(!0);null!=this.selectionBorder&&(this.selectionBorder.node.style.display="inline",this.selectionBounds=this.getSelectionBounds(this.state),this.bounds=new mxRectangle(this.selectionBounds.x,this.selectionBounds.y,this.selectionBounds.width,this.selectionBounds.height),this.drawPreview()),this.removeHint(),this.redrawHandles(),this.edgeHandlers=null,this.handlesVisible=!0,this.livePreviewActive=this.unscaledBounds=null},mxVertexHandler.prototype.resizeCell=function(t,e,n,i,l,o,s){null!=(e=this.graph.model.getGeometry(t))&&(i==mxEvent.LABEL_HANDLE?(i=-mxUtils.toRadians(this.state.style[mxConstants.STYLE_ROTATION]||"0"),s=Math.cos(i),n=Math.sin(i),i=this.graph.view.scale,s=mxUtils.getRotatedPoint(new mxPoint(Math.round((this.labelShape.bounds.getCenterX()-this.startX)/i),Math.round((this.labelShape.bounds.getCenterY()-this.startY)/i)),s,n),null==(e=e.clone()).offset?e.offset=s:(e.offset.x+=s.x,e.offset.y+=s.y),this.graph.model.setGeometry(t,e)):null!=this.unscaledBounds&&(i=this.graph.view.scale,0==this.childOffsetX&&0==this.childOffsetY||this.moveChildren(t,Math.round(this.childOffsetX/i),Math.round(this.childOffsetY/i)),this.graph.resizeCell(t,this.unscaledBounds,s)))},mxVertexHandler.prototype.moveChildren=function(t,e,n){for(var i=this.graph.getModel(),l=i.getChildCount(t),o=0;o<l;o++){var s=i.getChildAt(t,o),r=this.graph.getCellGeometry(s);null!=r&&((r=r.clone()).translate(e,n),i.setGeometry(s,r))}},mxVertexHandler.prototype.union=function(t,e,n,i,l,o,s,r,a){if(l=(null==l||l)&&this.graph.gridEnabled,this.singleSizer)return i=t.x+t.width+e,s=t.y+t.height+n,l&&(i=this.graph.snap(i/o)*o,s=this.graph.snap(s/o)*o),(o=new mxRectangle(t.x,t.y,0,0)).add(new mxRectangle(i,s,0,0)),o;var h=t.width,u=t.height,d=t.x-s.x*o,c=d+h,p=(t=t.y-s.y*o)+u,m=d+h/2,g=t+u/2;return 4<i?(p+=n,p=l?this.graph.snap(p/o)*o:Math.round(p/o)*o):i<3&&(t+=n,t=l?this.graph.snap(t/o)*o:Math.round(t/o)*o),0==i||3==i||5==i?(d+=e,d=l?this.graph.snap(d/o)*o:Math.round(d/o)*o):2!=i&&4!=i&&7!=i||(c+=e,c=l?this.graph.snap(c/o)*o:Math.round(c/o)*o),l=c-d,n=p-t,r&&null!=(r=this.graph.getCellGeometry(this.state.cell))&&(r=r.width/r.height,1==i||2==i||7==i||6==i?l=n*r:n=l/r,0==i&&(d=c-l,t=p-n)),a&&(d+=m-(d+(l+=l-h)/2),t+=g-(t+(n+=n-u)/2)),l<0&&(d+=l,l=Math.abs(l)),n<0&&(t+=n,n=Math.abs(n)),i=new mxRectangle(d+s.x*o,t+s.y*o,l,n),null!=this.minBounds&&(i.width=Math.max(i.width,this.minBounds.x*o+this.minBounds.width*o+Math.max(0,this.x0*o-i.x)),i.height=Math.max(i.height,this.minBounds.y*o+this.minBounds.height*o+Math.max(0,this.y0*o-i.y))),i},mxVertexHandler.prototype.redraw=function(t){this.selectionBounds=this.getSelectionBounds(this.state),this.bounds=new mxRectangle(this.selectionBounds.x,this.selectionBounds.y,this.selectionBounds.width,this.selectionBounds.height),this.drawPreview(),t||this.redrawHandles()},mxVertexHandler.prototype.getHandlePadding=function(){var t=new mxPoint(0,0),e=this.tolerance;return null!=this.sizers&&0<this.sizers.length&&null!=this.sizers[0]&&(this.bounds.width<2*this.sizers[0].bounds.width+2*e||this.bounds.height<2*this.sizers[0].bounds.height+2*e)&&(t.x=this.sizers[0].bounds.width+(e/=2),t.y=this.sizers[0].bounds.height+e),t},mxVertexHandler.prototype.getSizerBounds=function(){return this.bounds},mxVertexHandler.prototype.redrawHandles=function(){var t,e,n,i,l,o,s,r=this.getSizerBounds(),a=this.tolerance;if(this.verticalOffset=this.horizontalOffset=0,null!=this.customHandles)for(var h=0;h<this.customHandles.length;h++){var u=this.customHandles[h].shape.node.style.display;this.customHandles[h].redraw(),this.customHandles[h].shape.node.style.display=u,this.customHandles[h].shape.node.style.visibility=this.handlesVisible&&this.isCustomHandleVisible(this.customHandles[h])?"":"hidden"}if(null!=this.sizers&&0<this.sizers.length&&null!=this.sizers[0]&&(null==this.index&&this.manageSizers&&8<=this.sizers.length&&(h=this.getHandlePadding(),this.horizontalOffset=h.x,this.verticalOffset=h.y,0==this.horizontalOffset&&0==this.verticalOffset||((r=new mxRectangle(r.x,r.y,r.width,r.height)).x-=this.horizontalOffset/2,r.width+=this.horizontalOffset,r.y-=this.verticalOffset/2,r.height+=this.verticalOffset),8<=this.sizers.length&&(r.width<2*this.sizers[0].bounds.width+2*a||r.height<2*this.sizers[0].bounds.height+2*a?(this.sizers[0].node.style.display="none",this.sizers[2].node.style.display="none",this.sizers[5].node.style.display="none",this.sizers[7].node.style.display="none"):this.handlesVisible&&(this.sizers[0].node.style.display="",this.sizers[2].node.style.display="",this.sizers[5].node.style.display="",this.sizers[7].node.style.display=""))),a=r.x+r.width,h=r.y+r.height,this.singleSizer?this.moveSizerTo(this.sizers[0],a,h):(u=r.x+r.width/2,t=r.y+r.height/2,8<=this.sizers.length?(e="nw-resize n-resize ne-resize e-resize se-resize s-resize sw-resize w-resize".split(" "),l=mxUtils.toRadians(this.state.style[mxConstants.STYLE_ROTATION]||"0"),n=Math.cos(l),i=Math.sin(l),l=Math.round(4*l/Math.PI),o=new mxPoint(r.getCenterX(),r.getCenterY()),s=mxUtils.getRotatedPoint(new mxPoint(r.x,r.y),n,i,o),this.moveSizerTo(this.sizers[0],s.x,s.y),this.sizers[0].setCursor(e[mxUtils.mod(0+l,e.length)]),s.x=u,s.y=r.y,s=mxUtils.getRotatedPoint(s,n,i,o),this.moveSizerTo(this.sizers[1],s.x,s.y),this.sizers[1].setCursor(e[mxUtils.mod(1+l,e.length)]),s.x=a,s.y=r.y,s=mxUtils.getRotatedPoint(s,n,i,o),this.moveSizerTo(this.sizers[2],s.x,s.y),this.sizers[2].setCursor(e[mxUtils.mod(2+l,e.length)]),s.x=r.x,s.y=t,s=mxUtils.getRotatedPoint(s,n,i,o),this.moveSizerTo(this.sizers[3],s.x,s.y),this.sizers[3].setCursor(e[mxUtils.mod(7+l,e.length)]),s.x=a,s.y=t,s=mxUtils.getRotatedPoint(s,n,i,o),this.moveSizerTo(this.sizers[4],s.x,s.y),this.sizers[4].setCursor(e[mxUtils.mod(3+l,e.length)]),s.x=r.x,s.y=h,s=mxUtils.getRotatedPoint(s,n,i,o),this.moveSizerTo(this.sizers[5],s.x,s.y),this.sizers[5].setCursor(e[mxUtils.mod(6+l,e.length)]),s.x=u,s.y=h,s=mxUtils.getRotatedPoint(s,n,i,o),this.moveSizerTo(this.sizers[6],s.x,s.y),this.sizers[6].setCursor(e[mxUtils.mod(5+l,e.length)]),s.x=a,s.y=h,s=mxUtils.getRotatedPoint(s,n,i,o),this.moveSizerTo(this.sizers[7],s.x,s.y),this.sizers[7].setCursor(e[mxUtils.mod(4+l,e.length)]),s.x=u+this.state.absoluteOffset.x,s.y=t+this.state.absoluteOffset.y,s=mxUtils.getRotatedPoint(s,n,i,o),this.moveSizerTo(this.sizers[8],s.x,s.y)):2<=this.state.width&&2<=this.state.height?this.moveSizerTo(this.sizers[0],u+this.state.absoluteOffset.x,t+this.state.absoluteOffset.y):this.moveSizerTo(this.sizers[0],this.state.x,this.state.y))),null!=this.rotationShape&&(l=mxUtils.toRadians(null!=this.currentAlpha?this.currentAlpha:this.state.style[mxConstants.STYLE_ROTATION]||"0"),n=Math.cos(l),i=Math.sin(l),o=new mxPoint(this.state.getCenterX(),this.state.getCenterY()),s=mxUtils.getRotatedPoint(this.getRotationHandlePosition(),n,i,o),null!=this.rotationShape.node&&(this.moveSizerTo(this.rotationShape,s.x,s.y),this.rotationShape.node.style.visibility=this.state.view.graph.isEditing()||!this.handlesVisible?"hidden":"")),null!=this.selectionBorder&&(this.selectionBorder.rotation=Number(this.state.style[mxConstants.STYLE_ROTATION]||"0")),null!=this.edgeHandlers)for(h=0;h<this.edgeHandlers.length;h++)this.edgeHandlers[h].redraw()},mxVertexHandler.prototype.isCustomHandleVisible=function(t){return!this.graph.isEditing()&&1==this.state.view.graph.getSelectionCount()},mxVertexHandler.prototype.getRotationHandlePosition=function(){return new mxPoint(this.bounds.x+this.bounds.width/2,this.bounds.y+this.rotationHandleVSpacing)},mxVertexHandler.prototype.isParentHighlightVisible=function(){return!this.graph.isCellSelected(this.graph.model.getParent(this.state.cell))},mxVertexHandler.prototype.updateParentHighlight=function(){var t,e,n;this.isDestroyed()||(t=this.isParentHighlightVisible(),e=this.graph.model.getParent(this.state.cell),n=this.graph.view.getState(e),null!=this.parentHighlight?this.graph.model.isVertex(e)&&t?(t=this.parentHighlight.bounds,null==n||t.x==n.x&&t.y==n.y&&t.width==n.width&&t.height==n.height||(this.parentHighlight.bounds=mxRectangle.fromRectangle(n),this.parentHighlight.redraw())):(null!=n&&n.parentHighlight==this.parentHighlight&&(n.parentHighlight=null),this.parentHighlight.destroy(),this.parentHighlight=null):this.parentHighlightEnabled&&t&&this.graph.model.isVertex(e)&&null!=n&&null==n.parentHighlight&&(this.parentHighlight=this.createParentHighlightShape(n),this.parentHighlight.dialect=mxConstants.DIALECT_SVG,this.parentHighlight.pointerEvents=!1,this.parentHighlight.rotation=Number(n.style[mxConstants.STYLE_ROTATION]||"0"),this.parentHighlight.init(this.graph.getView().getOverlayPane()),this.parentHighlight.redraw(),n.parentHighlight=this.parentHighlight))},mxVertexHandler.prototype.drawPreview=function(){null!=this.preview&&(this.preview.bounds=this.bounds,this.preview.node.parentNode==this.graph.container&&(this.preview.bounds.width=Math.max(0,this.preview.bounds.width-1),this.preview.bounds.height=Math.max(0,this.preview.bounds.height-1)),this.preview.rotation=Number(this.state.style[mxConstants.STYLE_ROTATION]||"0"),this.preview.redraw()),this.selectionBorder.bounds=this.getSelectionBorderBounds(),this.selectionBorder.redraw(),this.updateParentHighlight()},mxVertexHandler.prototype.getSelectionBorderBounds=function(){return this.bounds},mxVertexHandler.prototype.isDestroyed=function(){return null==this.selectionBorder},mxVertexHandler.prototype.destroy=function(){var t;if(null!=this.escapeHandler&&(this.state.view.graph.removeListener(this.escapeHandler),this.escapeHandler=null),null!=this.preview&&(this.preview.destroy(),this.preview=null),null!=this.parentHighlight&&(t=this.graph.model.getParent(this.state.cell),null!=(t=this.graph.view.getState(t))&&t.parentHighlight==this.parentHighlight&&(t.parentHighlight=null),this.parentHighlight.destroy(),this.parentHighlight=null),null!=this.ghostPreview&&(this.ghostPreview.destroy(),this.ghostPreview=null),null!=this.selectionBorder&&(this.selectionBorder.destroy(),this.selectionBorder=null),this.labelShape=null,this.removeHint(),null!=this.sizers){for(t=0;t<this.sizers.length;t++)this.sizers[t].destroy();this.sizers=null}if(null!=this.customHandles){for(t=0;t<this.customHandles.length;t++)this.customHandles[t].destroy();this.customHandles=null}},mxEdgeHandler.prototype.graph=null,mxEdgeHandler.prototype.state=null,mxEdgeHandler.prototype.marker=null,mxEdgeHandler.prototype.constraintHandler=null,mxEdgeHandler.prototype.error=null,mxEdgeHandler.prototype.shape=null,mxEdgeHandler.prototype.bends=null,mxEdgeHandler.prototype.labelShape=null,mxEdgeHandler.prototype.cloneEnabled=!0,mxEdgeHandler.prototype.addEnabled=!1,mxEdgeHandler.prototype.removeEnabled=!1,mxEdgeHandler.prototype.dblClickRemoveEnabled=!1,mxEdgeHandler.prototype.mergeRemoveEnabled=!1,mxEdgeHandler.prototype.straightRemoveEnabled=!1,mxEdgeHandler.prototype.virtualBendsEnabled=!1,mxEdgeHandler.prototype.virtualBendOpacity=20,mxEdgeHandler.prototype.parentHighlightEnabled=!1,mxEdgeHandler.prototype.preferHtml=!1,mxEdgeHandler.prototype.allowHandleBoundsCheck=!0,mxEdgeHandler.prototype.snapToTerminals=!1,mxEdgeHandler.prototype.handleImage=null,mxEdgeHandler.prototype.tolerance=0,mxEdgeHandler.prototype.outlineConnect=!1,mxEdgeHandler.prototype.manageLabelHandle=!1,mxEdgeHandler.prototype.init=function(){var t;this.graph=this.state.view.graph,this.marker=this.createMarker(),this.constraintHandler=new mxConstraintHandler(this.graph),this.points=[],this.abspoints=this.getSelectionPoints(this.state),this.shape=this.createSelectionShape(this.abspoints),this.shape.dialect=this.graph.dialect!=mxConstants.DIALECT_SVG?mxConstants.DIALECT_MIXEDHTML:mxConstants.DIALECT_SVG,this.shape.init(this.graph.getView().getOverlayPane()),this.shape.pointerEvents=!1,this.shape.setCursor(mxConstants.CURSOR_MOVABLE_EDGE),mxEvent.redirectMouseEvents(this.shape.node,this.graph,this.state),this.preferHtml=null!=this.state.text&&this.state.text.node.parentNode==this.graph.container,this.preferHtml||(null!=(t=this.state.getVisibleTerminalState(!0))&&(this.preferHtml=null!=t.text&&t.text.node.parentNode==this.graph.container),this.preferHtml||null!=(t=this.state.getVisibleTerminalState(!1))&&(this.preferHtml=null!=t.text&&t.text.node.parentNode==this.graph.container)),(this.graph.getSelectionCount()<mxGraphHandler.prototype.maxCells||mxGraphHandler.prototype.maxCells<=0)&&(this.bends=this.createBends(),this.isVirtualBendsEnabled()&&(this.virtualBends=this.createVirtualBends())),this.label=new mxPoint(this.state.absoluteOffset.x,this.state.absoluteOffset.y),this.labelShape=this.createLabelHandleShape(),this.initBend(this.labelShape),this.labelShape.setCursor(mxConstants.CURSOR_LABEL_HANDLE),this.customHandles=this.createCustomHandles(),this.updateParentHighlight(),this.redraw()},mxEdgeHandler.prototype.isParentHighlightVisible=mxVertexHandler.prototype.isParentHighlightVisible,mxEdgeHandler.prototype.updateParentHighlight=mxVertexHandler.prototype.updateParentHighlight,mxEdgeHandler.prototype.createCustomHandles=function(){return null},mxEdgeHandler.prototype.isVirtualBendsEnabled=function(t){return this.virtualBendsEnabled&&(null==this.state.style[mxConstants.STYLE_EDGE]||this.state.style[mxConstants.STYLE_EDGE]==mxConstants.NONE||1==this.state.style[mxConstants.STYLE_NOEDGESTYLE])&&"arrow"!=mxUtils.getValue(this.state.style,mxConstants.STYLE_SHAPE,null)},mxEdgeHandler.prototype.isCellEnabled=function(t){return!0},mxEdgeHandler.prototype.isAddPointEvent=function(t){return mxEvent.isShiftDown(t)},mxEdgeHandler.prototype.isRemovePointEvent=function(t){return mxEvent.isShiftDown(t)},mxEdgeHandler.prototype.getSelectionPoints=function(t){return t.absolutePoints},mxEdgeHandler.prototype.createParentHighlightShape=function(t){return(t=new mxRectangleShape(mxRectangle.fromRectangle(t),null,this.getSelectionColor())).strokewidth=this.getSelectionStrokeWidth(),t.isDashed=this.isSelectionDashed(),t},mxEdgeHandler.prototype.createSelectionShape=function(t){return(t=new this.state.shape.constructor).outline=!0,t.apply(this.state),t.isDashed=this.isSelectionDashed(),t.stroke=this.getSelectionColor(),t.isShadow=!1,t},mxEdgeHandler.prototype.getSelectionColor=function(){return mxConstants.EDGE_SELECTION_COLOR},mxEdgeHandler.prototype.getSelectionStrokeWidth=function(){return mxConstants.EDGE_SELECTION_STROKEWIDTH},mxEdgeHandler.prototype.isSelectionDashed=function(){return mxConstants.EDGE_SELECTION_DASHED},mxEdgeHandler.prototype.isConnectableCell=function(t){return!0},mxEdgeHandler.prototype.getCellAt=function(t,e){return this.outlineConnect?null:this.graph.getCellAt(t,e)},mxEdgeHandler.prototype.createMarker=function(){var t=new mxCellMarker(this.graph),e=this;return t.getCell=function(t){var n,i=mxCellMarker.prototype.getCell.apply(this,arguments);return null==(i=i!=e.state.cell&&null!=i||null==e.currentPoint?i:e.graph.getCellAt(e.currentPoint.x,e.currentPoint.y))||this.graph.isCellConnectable(i)||(n=this.graph.getModel().getParent(i),this.graph.getModel().isVertex(n)&&this.graph.isCellConnectable(n)&&(i=n)),n=e.graph.getModel(),(this.graph.isSwimlane(i)&&null!=e.currentPoint&&this.graph.hitsSwimlaneContent(i,e.currentPoint.x,e.currentPoint.y)||!e.isConnectableCell(i)||i==e.state.cell||null!=i&&!e.graph.connectableEdges&&n.isEdge(i)||n.isAncestor(e.state.cell,i))&&(i=null),this.graph.isCellConnectable(i)?i:null},t.isValidState=function(t){var n=e.graph.getModel();return n=null!=(n=e.graph.view.getTerminalPort(t,e.graph.view.getState(n.getTerminal(e.state.cell,!e.isSource)),!e.isSource))?n.cell:null,e.error=e.validateConnection(e.isSource?t.cell:n,e.isSource?n:t.cell),null==e.error},t},mxEdgeHandler.prototype.validateConnection=function(t,e){return this.graph.getEdgeValidationError(this.state.cell,t,e)},mxEdgeHandler.prototype.createBends=function(){for(var t,e=this.state.cell,n=[],i=0;i<this.abspoints.length;i++)this.isHandleVisible(i)&&((t=0==i||i==this.abspoints.length-1)||this.graph.isCellBendable(e))&&mxUtils.bind(this,function(e){var l=this.createHandleShape(e);this.initBend(l,mxUtils.bind(this,mxUtils.bind(this,function(){this.dblClickRemoveEnabled&&this.removePoint(this.state,e)}))),this.isHandleEnabled(i)&&l.setCursor(t?mxConstants.CURSOR_TERMINAL_HANDLE:mxConstants.CURSOR_BEND_HANDLE),n.push(l),t||(this.points.push(new mxPoint(0,0)),l.node.style.visibility="hidden")})(i);return n},mxEdgeHandler.prototype.createVirtualBends=function(){var t=[];if(this.graph.isCellBendable(this.state.cell))for(var e=1;e<this.abspoints.length;e++)mxUtils.bind(this,function(e){this.initBend(e),e.setCursor(mxConstants.CURSOR_VIRTUAL_BEND_HANDLE),t.push(e)})(this.createHandleShape());return t},mxEdgeHandler.prototype.isHandleEnabled=function(t){return!0},mxEdgeHandler.prototype.isHandleVisible=function(t){var e=this.state.getVisibleTerminalState(!0),n=this.state.getVisibleTerminalState(!1),i=this.graph.getCellGeometry(this.state.cell);return(null!=i?this.graph.view.getEdgeStyle(this.state,i.points,e,n):null)!=mxEdgeStyle.EntityRelation||0==t||t==this.abspoints.length-1},mxEdgeHandler.prototype.createHandleShape=function(t){return null!=this.handleImage?((t=new mxImageShape(new mxRectangle(0,0,this.handleImage.width,this.handleImage.height),this.handleImage.src)).preserveImageAspect=!1,t):(t=mxConstants.HANDLE_SIZE,this.preferHtml&&--t,new mxRectangleShape(new mxRectangle(0,0,t,t),mxConstants.HANDLE_FILLCOLOR,mxConstants.HANDLE_STROKECOLOR))},mxEdgeHandler.prototype.createLabelHandleShape=function(){if(null==this.labelHandleImage)return new mxRectangleShape(new mxRectangle(0,0,t=mxConstants.LABEL_HANDLE_SIZE,t),mxConstants.LABEL_HANDLE_FILLCOLOR,mxConstants.HANDLE_STROKECOLOR);var t=new mxImageShape(new mxRectangle(0,0,this.labelHandleImage.width,this.labelHandleImage.height),this.labelHandleImage.src);return t.preserveImageAspect=!1,t},mxEdgeHandler.prototype.initBend=function(t,e){this.preferHtml?(t.dialect=mxConstants.DIALECT_STRICTHTML,t.init(this.graph.container)):(t.dialect=this.graph.dialect!=mxConstants.DIALECT_SVG?mxConstants.DIALECT_MIXEDHTML:mxConstants.DIALECT_SVG,t.init(this.graph.getView().getOverlayPane())),mxEvent.redirectMouseEvents(t.node,this.graph,this.state,null,null,null,e),mxClient.IS_TOUCH&&t.node.setAttribute("pointer-events","none")},mxEdgeHandler.prototype.getHandleForEvent=function(t){var e=null;if(null!=this.state){function n(e){if(null!=e&&null!=e.node&&"none"!=e.node.style.display&&"hidden"!=e.node.style.visibility&&(t.isSource(e)||null!=l&&mxUtils.intersects(e.bounds,l))){var n=(n=t.getGraphX()-e.bounds.getCenterX())*n+(e=t.getGraphY()-e.bounds.getCenterY())*e;if(null==o||n<=o)return o=n,!0}return!1}var i=mxEvent.isMouseEvent(t.getEvent())?1:this.tolerance,l=this.allowHandleBoundsCheck&&(mxClient.IS_IE||0<i)?new mxRectangle(t.getGraphX()-i,t.getGraphY()-i,2*i,2*i):null,o=null;if(null!=this.customHandles&&this.isCustomHandleEvent(t))for(i=this.customHandles.length-1;0<=i;i--)if(n(this.customHandles[i].shape))return mxEvent.CUSTOM_HANDLE-i;if((t.isSource(this.state.text)||n(this.labelShape))&&(e=mxEvent.LABEL_HANDLE),null!=this.bends)for(i=0;i<this.bends.length;i++)n(this.bends[i])&&(e=i);if(null!=this.virtualBends&&this.isAddVirtualBendEvent(t))for(i=0;i<this.virtualBends.length;i++)n(this.virtualBends[i])&&(e=mxEvent.VIRTUAL_HANDLE-i)}return e},mxEdgeHandler.prototype.isAddVirtualBendEvent=function(t){return!0},mxEdgeHandler.prototype.isCustomHandleEvent=function(t){return!0},mxEdgeHandler.prototype.mouseDown=function(t,e){var n,i=this.getHandleForEvent(e);null!=this.bends&&null!=this.bends[i]&&(this.snapPoint=new mxPoint((n=this.bends[i].bounds).getCenterX(),n.getCenterY())),this.addEnabled&&null==i&&this.isAddPointEvent(e.getEvent())?(this.addPoint(this.state,e.getEvent()),e.consume()):null!=i&&!e.isConsumed()&&this.graph.isEnabled()&&(this.removeEnabled&&this.isRemovePointEvent(e.getEvent())?this.removePoint(this.state,i):i==mxEvent.LABEL_HANDLE&&!this.graph.isLabelMovable(e.getCell())||(i<=mxEvent.VIRTUAL_HANDLE&&mxUtils.setOpacity(this.virtualBends[mxEvent.VIRTUAL_HANDLE-i].node,100),this.start(e.getX(),e.getY(),i)),e.consume())},mxEdgeHandler.prototype.start=function(t,e,n){if(this.startX=t,this.startY=e,this.isSource=null!=this.bends&&0==n,this.isTarget=null!=this.bends&&n==this.bends.length-1,this.isLabel=n==mxEvent.LABEL_HANDLE,this.isSource||this.isTarget?(null==(e=this.graph.model.getTerminal(t=this.state.cell,this.isSource))&&this.graph.isTerminalPointMovable(t,this.isSource)||null!=e&&this.graph.isCellDisconnectable(t,e,this.isSource))&&(this.index=n):this.index=n,this.index<=mxEvent.CUSTOM_HANDLE&&this.index>mxEvent.VIRTUAL_HANDLE&&null!=this.customHandles)for(n=0;n<this.customHandles.length;n++)n!=mxEvent.CUSTOM_HANDLE-this.index&&this.customHandles[n].setVisible(!1)},mxEdgeHandler.prototype.clonePreviewState=function(t,e){return this.state.clone()},mxEdgeHandler.prototype.getSnapToTerminalTolerance=function(){return this.graph.gridSize*this.graph.view.scale/2},mxEdgeHandler.prototype.updateHint=function(t,e){},mxEdgeHandler.prototype.removeHint=function(){},mxEdgeHandler.prototype.roundLength=function(t){return Math.round(t)},mxEdgeHandler.prototype.isSnapToTerminalsEvent=function(t){return this.snapToTerminals&&!mxEvent.isAltDown(t.getEvent())},mxEdgeHandler.prototype.getPointForEvent=function(t){var e=this.graph.getView(),n=e.scale,i=new mxPoint(this.roundLength(t.getGraphX()/n)*n,this.roundLength(t.getGraphY()/n)*n),l=this.getSnapToTerminalTolerance(),o=!1,s=!1;if(0<l&&this.isSnapToTerminalsEvent(t)){var r=function(t){null!=t&&a.call(this,new mxPoint(e.getRoutingCenterX(t),e.getRoutingCenterY(t)))},a=function(t){var e;null!=t&&(e=t.x,Math.abs(i.x-e)<l&&(i.x=e,o=!0),t=t.y,Math.abs(i.y-t)<l&&(i.y=t,s=!0))};if(r.call(this,this.state.getVisibleTerminalState(!0)),r.call(this,this.state.getVisibleTerminalState(!1)),null!=this.state.absolutePoints)for(r=0;r<this.state.absolutePoints.length;r++)a.call(this,this.state.absolutePoints[r])}return this.graph.isGridEnabledEvent(t.getEvent())&&(t=e.translate,o||(i.x=(this.graph.snap(i.x/n-t.x)+t.x)*n),s||(i.y=(this.graph.snap(i.y/n-t.y)+t.y)*n)),i},mxEdgeHandler.prototype.getPreviewTerminalState=function(t){return this.constraintHandler.update(t,this.isSource,!0,t.isSource(this.marker.highlight.shape)?null:this.currentPoint),null!=this.constraintHandler.currentFocus&&null!=this.constraintHandler.currentConstraint?(null!=this.marker.highlight&&null!=this.marker.highlight.state&&this.marker.highlight.state.cell==this.constraintHandler.currentFocus.cell?"transparent"!=this.marker.highlight.shape.stroke&&(this.marker.highlight.shape.stroke="transparent",this.marker.highlight.repaint()):this.marker.markCell(this.constraintHandler.currentFocus.cell,"transparent"),t=this.graph.getModel(),t=null!=(t=this.graph.view.getTerminalPort(this.state,this.graph.view.getState(t.getTerminal(this.state.cell,!this.isSource)),!this.isSource))?t.cell:null,this.error=this.validateConnection(this.isSource?this.constraintHandler.currentFocus.cell:t,this.isSource?t:this.constraintHandler.currentFocus.cell),(t=null)==this.error&&(t=this.constraintHandler.currentFocus),null==this.error&&(null==t||this.isCellEnabled(t.cell))||this.constraintHandler.reset(),t):this.graph.isIgnoreTerminalEvent(t.getEvent())?(this.marker.reset(),null):(this.marker.process(t),null==(t=this.marker.getValidState())||this.isCellEnabled(t.cell)||(this.constraintHandler.reset(),this.marker.reset()),this.marker.getValidState())},mxEdgeHandler.prototype.getPreviewPoints=function(t,e){var n=null!=(n=this.graph.getCellGeometry(this.state.cell)).points?n.points.slice():null,i=new mxPoint(t.x,t.y),l=null;if(this.isSource||this.isTarget)this.graph.resetEdgesOnConnect&&(n=null);else if(this.convertPoint(i,!1),null==n)n=[i];else{if(this.index<=mxEvent.VIRTUAL_HANDLE&&n.splice(mxEvent.VIRTUAL_HANDLE-this.index,0,i),!this.isSource&&!this.isTarget){for(var o,s,r=0;r<this.bends.length;r++)r==this.index||null!=(o=this.bends[r])&&mxUtils.contains(o.bounds,t.x,t.y)&&(n.splice(this.index<=mxEvent.VIRTUAL_HANDLE?mxEvent.VIRTUAL_HANDLE-this.index:this.index-1,1),l=n);null!=l||!this.straightRemoveEnabled||null!=e&&mxEvent.isAltDown(e.getEvent())||(r=this.graph.tolerance*this.graph.tolerance,(o=this.state.absolutePoints.slice())[this.index]=t,null!=(e=this.state.getVisibleTerminalState(!0))&&(null!=(s=this.graph.getConnectionConstraint(this.state,e,!0))&&null!=this.graph.getConnectionPoint(e,s)||(o[0]=new mxPoint(e.view.getRoutingCenterX(e),e.view.getRoutingCenterY(e)))),null==(e=this.state.getVisibleTerminalState(!1))||null!=(s=this.graph.getConnectionConstraint(this.state,e,!1))&&null!=this.graph.getConnectionPoint(e,s)||(o[o.length-1]=new mxPoint(e.view.getRoutingCenterX(e),e.view.getRoutingCenterY(e))),0<(s=this.index)&&s<o.length-1&&mxUtils.ptSegDistSq(o[s-1].x,o[s-1].y,o[s+1].x,o[s+1].y,t.x,t.y)<r&&(n.splice(s-1,1),l=n))}null==l&&this.index>mxEvent.VIRTUAL_HANDLE&&(n[this.index-1]=i)}return null!=l?l:n},mxEdgeHandler.prototype.isOutlineConnectEvent=function(t){var e=mxUtils.getOffset(this.graph.container),n=t.getEvent(),i=mxEvent.getClientX(n),l=(n=mxEvent.getClientY(n),document.documentElement),o=this.currentPoint.x-this.graph.container.scrollLeft+e.x-((window.pageXOffset||l.scrollLeft)-(l.clientLeft||0));return e=this.currentPoint.y-this.graph.container.scrollTop+e.y-((window.pageYOffset||l.scrollTop)-(l.clientTop||0)),this.outlineConnect&&!mxEvent.isShiftDown(t.getEvent())&&(t.isSource(this.marker.highlight.shape)||mxEvent.isAltDown(t.getEvent())&&null!=t.getState()||this.marker.highlight.isHighlightAt(i,n)||(o!=i||e!=n)&&null==t.getState()&&this.marker.highlight.isHighlightAt(o,e))},mxEdgeHandler.prototype.updatePreviewState=function(t,e,n,i,l){var o,s=this.isSource?n:this.state.getVisibleTerminalState(!0),r=this.isTarget?n:this.state.getVisibleTerminalState(!1),a=this.graph.getConnectionConstraint(t,s,!0),h=this.graph.getConnectionConstraint(t,r,!1),u=this.constraintHandler.currentConstraint;null==u&&l&&(null!=n?(i.isSource(this.marker.highlight.shape)&&(e=new mxPoint(i.getGraphX(),i.getGraphY())),u=this.graph.getOutlineConstraint(e,n,i),this.constraintHandler.setFocus(i,n,this.isSource),this.constraintHandler.currentConstraint=u,this.constraintHandler.currentPoint=e):u=new mxConnectionConstraint),this.outlineConnect&&null!=this.marker.highlight&&null!=this.marker.highlight.shape&&(o=this.graph.view.scale,null!=this.constraintHandler.currentConstraint&&null!=this.constraintHandler.currentFocus?(this.marker.highlight.shape.stroke=l?mxConstants.OUTLINE_HIGHLIGHT_COLOR:"transparent",this.marker.highlight.shape.strokewidth=mxConstants.OUTLINE_HIGHLIGHT_STROKEWIDTH/o/o,this.marker.highlight.repaint()):this.marker.hasValidState()&&(this.marker.highlight.shape.stroke=this.graph.isCellConnectable(i.getCell())&&this.marker.getValidState()!=i.getState()?"transparent":mxConstants.DEFAULT_VALID_COLOR,this.marker.highlight.shape.strokewidth=mxConstants.HIGHLIGHT_STROKEWIDTH/o/o,this.marker.highlight.repaint())),this.isSource?a=u:this.isTarget&&(h=u),(this.isSource||this.isTarget)&&(null!=u&&null!=u.point?(t.style[this.isSource?mxConstants.STYLE_EXIT_X:mxConstants.STYLE_ENTRY_X]=u.point.x,t.style[this.isSource?mxConstants.STYLE_EXIT_Y:mxConstants.STYLE_ENTRY_Y]=u.point.y):(delete t.style[this.isSource?mxConstants.STYLE_EXIT_X:mxConstants.STYLE_ENTRY_X],delete t.style[this.isSource?mxConstants.STYLE_EXIT_Y:mxConstants.STYLE_ENTRY_Y])),t.setVisibleTerminalState(s,!0),t.setVisibleTerminalState(r,!1),this.isSource&&null==s||t.view.updateFixedTerminalPoint(t,s,!0,a),this.isTarget&&null==r||t.view.updateFixedTerminalPoint(t,r,!1,h),(this.isSource||this.isTarget)&&null==n&&(t.setAbsoluteTerminalPoint(e,this.isSource),null==this.marker.getMarkedState()&&(this.error=this.graph.allowDanglingEdges?null:"")),t.view.updatePoints(t,this.points,s,r),t.view.updateFloatingTerminalPoints(t,s,r)},mxEdgeHandler.prototype.mouseMove=function(t,e){var n,i,l;null!=this.index&&null!=this.marker?(this.currentPoint=this.getPointForEvent(e),this.error=null,!this.graph.isIgnoreTerminalEvent(e.getEvent())&&mxEvent.isShiftDown(e.getEvent())&&null!=this.snapPoint&&(Math.abs(this.snapPoint.x-this.currentPoint.x)<Math.abs(this.snapPoint.y-this.currentPoint.y)?this.currentPoint.x=this.snapPoint.x:this.currentPoint.y=this.snapPoint.y),this.index<=mxEvent.CUSTOM_HANDLE&&this.index>mxEvent.VIRTUAL_HANDLE?null!=this.customHandles&&(this.customHandles[mxEvent.CUSTOM_HANDLE-this.index].processEvent(e),this.customHandles[mxEvent.CUSTOM_HANDLE-this.index].positionChanged(),null!=this.shape&&null!=this.shape.node&&(this.shape.node.style.display="none")):this.isLabel?(this.label.x=this.currentPoint.x,this.label.y=this.currentPoint.y):(this.points=this.getPreviewPoints(this.currentPoint,e),n=this.isSource||this.isTarget?this.getPreviewTerminalState(e):null,null!=this.constraintHandler.currentConstraint&&null!=this.constraintHandler.currentFocus&&null!=this.constraintHandler.currentPoint?this.currentPoint=this.constraintHandler.currentPoint.clone():this.outlineConnect&&((i=!(!this.isSource&&!this.isTarget)&&this.isOutlineConnectEvent(e))?n=this.marker.highlight.state:null!=n&&n!=e.getState()&&this.graph.isCellConnectable(e.getCell())&&null!=this.marker.highlight.shape&&(this.marker.highlight.shape.stroke="transparent",this.marker.highlight.repaint(),n=null)),null==n||this.isCellEnabled(n.cell)||(n=null,this.marker.reset()),l=this.clonePreviewState(this.currentPoint,null!=n?n.cell:null),this.updatePreviewState(l,this.currentPoint,n,e,i),this.setPreviewColor(null==this.error?this.marker.validColor:this.marker.invalidColor),this.abspoints=l.absolutePoints,this.active=!0,this.updateHint(e,this.currentPoint)),this.drawPreview(),mxEvent.consume(e.getEvent()),e.consume()):mxClient.IS_IE&&null!=this.getHandleForEvent(e)&&e.consume(!1)},mxEdgeHandler.prototype.mouseUp=function(t,e){if(null!=this.index&&null!=this.marker){null!=this.shape&&null!=this.shape.node&&(this.shape.node.style.display="");var n=this.state.cell,i=this.index;if(this.index=null,e.getX()!=this.startX||e.getY()!=this.startY){var l=!this.graph.isIgnoreTerminalEvent(e.getEvent())&&this.graph.isCloneEvent(e.getEvent())&&this.cloneEnabled&&this.graph.isCellsCloneable();if(null!=this.error)0<this.error.length&&this.graph.validationAlert(this.error);else if(i<=mxEvent.CUSTOM_HANDLE&&i>mxEvent.VIRTUAL_HANDLE){if(null!=this.customHandles){(o=this.graph.getModel()).beginUpdate();try{this.customHandles[mxEvent.CUSTOM_HANDLE-i].execute(e),null!=this.shape&&null!=this.shape.node&&(this.shape.apply(this.state),this.shape.redraw())}finally{o.endUpdate()}}}else if(this.isLabel)this.moveLabel(this.state,this.label.x,this.label.y);else if(this.isSource||this.isTarget)if((i=null)!=(i=null==(i=null!=this.constraintHandler.currentConstraint&&null!=this.constraintHandler.currentFocus?this.constraintHandler.currentFocus.cell:i)&&this.marker.hasValidState()&&null!=this.marker.highlight&&null!=this.marker.highlight.shape&&"transparent"!=this.marker.highlight.shape.stroke&&"white"!=this.marker.highlight.shape.stroke?this.marker.validState.cell:i)){var o,s,r,a=(o=this.graph.getModel()).getParent(n);o.beginUpdate();try{l&&(s=o.getGeometry(n),l=this.graph.cloneCell(n),o.add(a,l,o.getChildCount(a)),null!=s&&(s=s.clone(),o.setGeometry(l,s)),r=o.getTerminal(n,!this.isSource),this.graph.connectCell(l,r,!this.isSource),n=l),n=this.connect(n,i,this.isSource,l,e)}finally{o.endUpdate()}}else this.graph.isAllowDanglingEdges()&&((o=this.abspoints[this.isSource?0:this.abspoints.length-1]).x=this.roundLength(o.x/this.graph.view.scale-this.graph.view.translate.x),o.y=this.roundLength(o.y/this.graph.view.scale-this.graph.view.translate.y),null!=(s=this.graph.getView().getState(this.graph.getModel().getParent(n)))&&(o.x-=s.origin.x,o.y-=s.origin.y),o.x-=this.graph.panDx/this.graph.view.scale,o.y-=this.graph.panDy/this.graph.view.scale,n=this.changeTerminalPoint(n,o,this.isSource,l));else this.active?n=this.changePoints(n,this.points,l):(this.graph.getView().invalidate(this.state.cell),this.graph.getView().validate(this.state.cell))}else this.graph.isToggleEvent(e.getEvent())&&this.graph.selectCellForEvent(this.state.cell,e.getEvent());null!=this.marker&&(this.reset(),n!=this.state.cell&&this.graph.setSelectionCell(n)),e.consume()}},mxEdgeHandler.prototype.reset=function(){if(this.active&&this.refresh(),this.snapPoint=this.points=this.label=this.index=this.error=null,this.active=this.isTarget=this.isSource=this.isLabel=!1,this.livePreview&&null!=this.sizers)for(var t=0;t<this.sizers.length;t++)null!=this.sizers[t]&&(this.sizers[t].node.style.display="");if(null!=this.marker&&this.marker.reset(),null!=this.constraintHandler&&this.constraintHandler.reset(),null!=this.customHandles)for(t=0;t<this.customHandles.length;t++)this.customHandles[t].reset();this.setPreviewColor(mxConstants.EDGE_SELECTION_COLOR),this.removeHint(),this.redraw()},mxEdgeHandler.prototype.setPreviewColor=function(t){null!=this.shape&&(this.shape.stroke=t)},mxEdgeHandler.prototype.convertPoint=function(t,e){var n=this.graph.getView().getScale(),i=this.graph.getView().getTranslate();return e&&(t.x=this.graph.snap(t.x),t.y=this.graph.snap(t.y)),t.x=Math.round(t.x/n-i.x),t.y=Math.round(t.y/n-i.y),null!=(n=this.graph.getView().getState(this.graph.getModel().getParent(this.state.cell)))&&(t.x-=n.origin.x,t.y-=n.origin.y),t},mxEdgeHandler.prototype.moveLabel=function(t,e,n){var i,l,o,s=this.graph.getModel(),r=s.getGeometry(t.cell);null!=r&&(i=this.graph.getView().scale,(r=r.clone()).relative?(l=this.graph.getView().getRelativePoint(t,e,n),r.x=Math.round(1e4*l.x)/1e4,r.y=Math.round(l.y),r.offset=new mxPoint(0,0),l=this.graph.view.getPoint(t,r),r.offset=new mxPoint(Math.round((e-l.x)/i),Math.round((n-l.y)/i))):(l=(o=t.absolutePoints)[0],o=o[o.length-1],null!=l&&null!=o&&(r.offset=new mxPoint(Math.round((e-(l.x+(o.x-l.x)/2))/i),Math.round((n-(l.y+(o.y-l.y)/2))/i)),r.x=0,r.y=0)),s.setGeometry(t.cell,r))},mxEdgeHandler.prototype.connect=function(t,e,n,i,l){(i=this.graph.getModel()).getParent(t),i.beginUpdate();try{var o=this.constraintHandler.currentConstraint;null==o&&(o=new mxConnectionConstraint),this.graph.connectCell(t,e,n,o)}finally{i.endUpdate()}return t},mxEdgeHandler.prototype.changeTerminalPoint=function(t,e,n,i){var l,o,s=this.graph.getModel();s.beginUpdate();try{i&&(l=s.getParent(t),o=s.getTerminal(t,!n),t=this.graph.cloneCell(t),s.add(l,t,s.getChildCount(l)),s.setTerminal(t,o,!n));var r=s.getGeometry(t);null!=r&&((r=r.clone()).setTerminalPoint(e,n),s.setGeometry(t,r),this.graph.connectCell(t,null,n,new mxConnectionConstraint))}finally{s.endUpdate()}return t},mxEdgeHandler.prototype.changePoints=function(t,e,n){var i,l,o,s=this.graph.getModel();s.beginUpdate();try{n&&(i=s.getParent(t),l=s.getTerminal(t,!0),o=s.getTerminal(t,!1),t=this.graph.cloneCell(t),s.add(i,t,s.getChildCount(i)),s.setTerminal(t,l,!0),s.setTerminal(t,o,!1));var r=s.getGeometry(t);null!=r&&((r=r.clone()).points=e,s.setGeometry(t,r))}finally{s.endUpdate()}return t},mxEdgeHandler.prototype.addPoint=function(t,e){var n=mxUtils.convertPoint(this.graph.container,mxEvent.getClientX(e),mxEvent.getClientY(e)),i=this.graph.isGridEnabledEvent(e);this.convertPoint(n,i),this.addPointAt(t,n.x,n.y),mxEvent.consume(e)},mxEdgeHandler.prototype.addPointAt=function(t,e,n){var i,l,o=this.graph.getCellGeometry(t.cell);e=new mxPoint(e,n),null!=o&&(o=o.clone(),i=new mxPoint((i=this.graph.view.translate).x*(n=this.graph.view.scale),i.y*n),l=this.graph.model.getParent(this.state.cell),this.graph.model.isVertex(l)&&(i=new mxPoint((i=this.graph.view.getState(l)).x,i.y)),n=mxUtils.findNearestSegment(t,e.x*n+i.x,e.y*n+i.y),null==o.points?o.points=[e]:o.points.splice(n,0,e),this.graph.getModel().setGeometry(t.cell,o),this.refresh(),this.redraw())},mxEdgeHandler.prototype.removePoint=function(t,e){var n;0<e&&e<this.abspoints.length-1&&null!=(n=this.graph.getCellGeometry(this.state.cell))&&null!=n.points&&((n=n.clone()).points.splice(e-1,1),this.graph.getModel().setGeometry(t.cell,n),this.refresh(),this.redraw())},mxEdgeHandler.prototype.getHandleFillColor=function(t){t=0==t;var e=this.state.cell,n=this.graph.getModel().getTerminal(e,t),i=mxConstants.HANDLE_FILLCOLOR;return null!=n&&!this.graph.isCellDisconnectable(e,n,t)||null==n&&!this.graph.isTerminalPointMovable(e,t)?i=mxConstants.LOCKED_HANDLE_FILLCOLOR:null!=n&&this.graph.isCellDisconnectable(e,n,t)&&(i=mxConstants.CONNECT_HANDLE_FILLCOLOR),i},mxEdgeHandler.prototype.redraw=function(t){if(null!=this.state){this.abspoints=this.state.absolutePoints.slice();var e=this.graph.getModel().getGeometry(this.state.cell);if(null!=e&&(e=e.points,null!=this.bends&&0<this.bends.length&&null!=e)){null==this.points&&(this.points=[]);for(var n=1;n<this.bends.length-1;n++)null!=this.bends[n]&&null!=this.abspoints[n]&&(this.points[n-1]=e[n-1])}this.drawPreview(),t||this.redrawHandles()}},mxEdgeHandler.prototype.redrawHandles=function(){var t,e,n,i,l=this.state.cell,o=this.labelShape.bounds;if(this.label=new mxPoint(this.state.absoluteOffset.x,this.state.absoluteOffset.y),this.labelShape.bounds=new mxRectangle(Math.round(this.label.x-o.width/2),Math.round(this.label.y-o.height/2),o.width,o.height),o=this.graph.getLabel(l),this.labelShape.visible=null!=o&&0<o.length&&this.graph.isLabelMovable(l),null!=this.bends&&0<this.bends.length&&(t=this.abspoints.length-1,e=(l=this.abspoints[0]).x,n=l.y,o=this.bends[0].bounds,this.bends[0].bounds=new mxRectangle(Math.floor(e-o.width/2),Math.floor(n-o.height/2),o.width,o.height),this.bends[0].fill=this.getHandleFillColor(0),this.bends[0].redraw(),this.manageLabelHandle&&this.checkLabelHandle(this.bends[0].bounds),e=(t=this.abspoints[t]).x,n=t.y,o=this.bends[i=this.bends.length-1].bounds,this.bends[i].bounds=new mxRectangle(Math.floor(e-o.width/2),Math.floor(n-o.height/2),o.width,o.height),this.bends[i].fill=this.getHandleFillColor(i),this.bends[i].redraw(),this.manageLabelHandle&&this.checkLabelHandle(this.bends[i].bounds),this.redrawInnerBends(l,t)),null!=this.abspoints&&null!=this.virtualBends&&0<this.virtualBends.length)for(t=this.abspoints[0],l=0;l<this.virtualBends.length;l++)null!=this.virtualBends[l]&&null!=this.abspoints[l+1]&&(e=this.abspoints[l+1],(o=this.virtualBends[l]).bounds=new mxRectangle(Math.floor(t.x+(e.x-t.x)/2-o.bounds.width/2),Math.floor(t.y+(e.y-t.y)/2-o.bounds.height/2),o.bounds.width,o.bounds.height),o.redraw(),mxUtils.setOpacity(o.node,this.virtualBendOpacity),t=e,this.manageLabelHandle&&this.checkLabelHandle(o.bounds));if(null!=this.labelShape&&this.labelShape.redraw(),null!=this.customHandles)for(l=0;l<this.customHandles.length;l++)o=this.customHandles[l].shape.node.style.display,this.customHandles[l].redraw(),this.customHandles[l].shape.node.style.display=o,this.customHandles[l].shape.node.style.visibility=this.isCustomHandleVisible(this.customHandles[l])?"":"hidden"},mxEdgeHandler.prototype.isCustomHandleVisible=function(t){return!this.graph.isEditing()&&1==this.state.view.graph.getSelectionCount()},mxEdgeHandler.prototype.setHandlesVisible=function(t){if(null!=this.bends)for(var e=0;e<this.bends.length;e++)this.bends[e].node.style.display=t?"":"none";if(null!=this.virtualBends)for(e=0;e<this.virtualBends.length;e++)this.virtualBends[e].node.style.display=t?"":"none";if(null!=this.labelShape&&(this.labelShape.node.style.display=t?"":"none"),null!=this.customHandles)for(e=0;e<this.customHandles.length;e++)this.customHandles[e].setVisible(t)},mxEdgeHandler.prototype.redrawInnerBends=function(t,e){for(var n,i,l,o=1;o<this.bends.length-1;o++)null!=this.bends[o]&&(null!=this.abspoints[o]?(n=this.abspoints[o].x,i=this.abspoints[o].y,l=this.bends[o].bounds,this.bends[o].node.style.visibility="visible",this.bends[o].bounds=new mxRectangle(Math.round(n-l.width/2),Math.round(i-l.height/2),l.width,l.height),this.manageLabelHandle?this.checkLabelHandle(this.bends[o].bounds):null==this.handleImage&&this.labelShape.visible&&mxUtils.intersects(this.bends[o].bounds,this.labelShape.bounds)&&(w=mxConstants.HANDLE_SIZE+3,h=mxConstants.HANDLE_SIZE+3,this.bends[o].bounds=new mxRectangle(Math.round(n-w/2),Math.round(i-h/2),w,h)),this.bends[o].redraw()):(this.bends[o].destroy(),this.bends[o]=null))},mxEdgeHandler.prototype.checkLabelHandle=function(t){var e;null!=this.labelShape&&mxUtils.intersects(t,e=this.labelShape.bounds)&&(e.y=t.getCenterY()<e.getCenterY()?t.y+t.height:t.y-e.height)},mxEdgeHandler.prototype.drawPreview=function(){try{var t,e;this.isLabel&&(t=this.labelShape.bounds,e=new mxRectangle(Math.round(this.label.x-t.width/2),Math.round(this.label.y-t.height/2),t.width,t.height),this.labelShape.bounds.equals(e)||(this.labelShape.bounds=e,this.labelShape.redraw())),null==this.shape||mxUtils.equalPoints(this.shape.points,this.abspoints)||(this.shape.apply(this.state),this.shape.points=this.abspoints.slice(),this.shape.scale=this.state.view.scale,this.shape.isDashed=this.isSelectionDashed(),this.shape.stroke=this.getSelectionColor(),this.shape.strokewidth=this.getSelectionStrokeWidth()/this.shape.scale/this.shape.scale,this.shape.isShadow=!1,this.shape.redraw()),this.updateParentHighlight()}catch(t){}},mxEdgeHandler.prototype.refresh=function(){null!=this.state&&(this.abspoints=this.getSelectionPoints(this.state),this.points=[],null!=this.bends&&(this.destroyBends(this.bends),this.bends=this.createBends()),null!=this.virtualBends&&(this.destroyBends(this.virtualBends),this.virtualBends=this.createVirtualBends()),null!=this.customHandles&&(this.destroyBends(this.customHandles),this.customHandles=this.createCustomHandles()),null!=this.labelShape&&null!=this.labelShape.node&&null!=this.labelShape.node.parentNode&&this.labelShape.node.parentNode.appendChild(this.labelShape.node))},mxEdgeHandler.prototype.isDestroyed=function(){return null==this.shape},mxEdgeHandler.prototype.destroyBends=function(t){if(null!=t)for(var e=0;e<t.length;e++)null!=t[e]&&t[e].destroy()},mxEdgeHandler.prototype.destroy=function(){var t;null!=this.escapeHandler&&(this.state.view.graph.removeListener(this.escapeHandler),this.escapeHandler=null),null!=this.marker&&(this.marker.destroy(),this.marker=null),null!=this.shape&&(this.shape.destroy(),this.shape=null),null!=this.parentHighlight&&(t=this.graph.model.getParent(this.state.cell),null!=(t=this.graph.view.getState(t))&&t.parentHighlight==this.parentHighlight&&(t.parentHighlight=null),this.parentHighlight.destroy(),this.parentHighlight=null),null!=this.labelShape&&(this.labelShape.destroy(),this.labelShape=null),null!=this.constraintHandler&&(this.constraintHandler.destroy(),this.constraintHandler=null),this.destroyBends(this.virtualBends),this.virtualBends=null,this.destroyBends(this.customHandles),this.customHandles=null,this.destroyBends(this.bends),this.bends=null,this.removeHint()},mxUtils.extend(mxElbowEdgeHandler,mxEdgeHandler),mxElbowEdgeHandler.prototype.flipEnabled=!0,mxElbowEdgeHandler.prototype.doubleClickOrientationResource="none"!=mxClient.language?"doubleClickOrientation":"",mxElbowEdgeHandler.prototype.createBends=function(){var t=[],e=this.createHandleShape(0);return this.initBend(e),e.setCursor(mxConstants.CURSOR_TERMINAL_HANDLE),t.push(e),t.push(this.createVirtualBend(mxUtils.bind(this,function(t){!mxEvent.isConsumed(t)&&this.flipEnabled&&(this.graph.flipEdge(this.state.cell,t),mxEvent.consume(t))}))),this.points.push(new mxPoint(0,0)),e=this.createHandleShape(2),this.initBend(e),e.setCursor(mxConstants.CURSOR_TERMINAL_HANDLE),t.push(e),t},mxElbowEdgeHandler.prototype.createVirtualBend=function(t){var e=this.createHandleShape();return this.initBend(e,t),e.setCursor(this.getCursorForBend()),this.graph.isCellBendable(this.state.cell)||(e.node.style.display="none"),e},mxElbowEdgeHandler.prototype.getCursorForBend=function(){return this.state.style[mxConstants.STYLE_EDGE]==mxEdgeStyle.TopToBottom||this.state.style[mxConstants.STYLE_EDGE]==mxConstants.EDGESTYLE_TOPTOBOTTOM||(this.state.style[mxConstants.STYLE_EDGE]==mxEdgeStyle.ElbowConnector||this.state.style[mxConstants.STYLE_EDGE]==mxConstants.EDGESTYLE_ELBOW)&&this.state.style[mxConstants.STYLE_ELBOW]==mxConstants.ELBOW_VERTICAL?"row-resize":"col-resize"},mxElbowEdgeHandler.prototype.getTooltipForNode=function(t){var e=null;return null==this.bends||null==this.bends[1]||t!=this.bends[1].node&&t.parentNode!=this.bends[1].node||(e=mxResources.get(e=this.doubleClickOrientationResource)||e),e},mxElbowEdgeHandler.prototype.convertPoint=function(t,e){var n=this.graph.getView().getScale(),i=this.graph.getView().getTranslate(),l=this.state.origin;return e&&(t.x=this.graph.snap(t.x),t.y=this.graph.snap(t.y)),t.x=Math.round(t.x/n-i.x-l.x),t.y=Math.round(t.y/n-i.y-l.y),t},mxElbowEdgeHandler.prototype.redrawInnerBends=function(t,e){var n=this.graph.getModel().getGeometry(this.state.cell),i=this.state.absolutePoints,l=null;1<i.length?(t=i[1],e=i[i.length-2]):null!=n.points&&0<n.points.length&&(l=i[0]),l=null==l?new mxPoint(t.x+(e.x-t.x)/2,t.y+(e.y-t.y)/2):new mxPoint(this.graph.getView().scale*(l.x+this.graph.getView().translate.x+this.state.origin.x),this.graph.getView().scale*(l.y+this.graph.getView().translate.y+this.state.origin.y)),n=(i=this.bends[1].bounds).width,i=i.height,n=new mxRectangle(Math.round(l.x-n/2),Math.round(l.y-i/2),n,i),this.manageLabelHandle?this.checkLabelHandle(n):null==this.handleImage&&this.labelShape.visible&&mxUtils.intersects(n,this.labelShape.bounds)&&(n=mxConstants.HANDLE_SIZE+3,i=mxConstants.HANDLE_SIZE+3,n=new mxRectangle(Math.floor(l.x-n/2),Math.floor(l.y-i/2),n,i)),this.bends[1].bounds=n,this.bends[1].redraw(),this.manageLabelHandle&&this.checkLabelHandle(this.bends[1].bounds)},mxUtils.extend(mxEdgeSegmentHandler,mxElbowEdgeHandler),mxEdgeSegmentHandler.prototype.getCurrentPoints=function(){var t,e,n=this.state.absolutePoints;return null!=n&&(t=Math.max(1,this.graph.view.scale),(2==n.length||3==n.length&&(Math.abs(n[0].x-n[1].x)<t&&Math.abs(n[1].x-n[2].x)<t||Math.abs(n[0].y-n[1].y)<t&&Math.abs(n[1].y-n[2].y)<t))&&(n=[n[0],new mxPoint(t=n[0].x+(n[n.length-1].x-n[0].x)/2,e=n[0].y+(n[n.length-1].y-n[0].y)/2),new mxPoint(t,e),n[n.length-1]])),n},mxEdgeSegmentHandler.prototype.getPreviewPoints=function(t){if(this.isSource||this.isTarget)return mxElbowEdgeHandler.prototype.getPreviewPoints.apply(this,arguments);var e=this.getCurrentPoints(),n=this.convertPoint(e[0].clone(),!1);t=this.convertPoint(t.clone(),!1);for(var i,l=[],o=1;o<e.length;o++){var s=this.convertPoint(e[o].clone(),!1);o==this.index&&(0==Math.round(n.x-s.x)&&(n.x=t.x,s.x=t.x),0==Math.round(n.y-s.y)&&(n.y=t.y,s.y=t.y)),o<e.length-1&&l.push(s),n=s}return 1==l.length&&(e=this.state.getVisibleTerminalState(!0),n=this.state.getVisibleTerminalState(!1),s=this.state.view.getScale(),i=this.state.view.getTranslate(),o=l[0].x*s+i.x,s=l[0].y*s+i.y,(null!=e&&mxUtils.contains(e,o,s)||null!=n&&mxUtils.contains(n,o,s))&&(l=[t,t])),l},mxEdgeSegmentHandler.prototype.updatePreviewState=function(t,e,n,i){if(mxEdgeHandler.prototype.updatePreviewState.apply(this,arguments),!this.isSource&&!this.isTarget){e=this.convertPoint(e.clone(),!1);for(var l,o=t.absolutePoints,s=o[0],r=o[1],a=[],h=2;h<o.length;h++){var u=o[h];0==Math.round(s.x-r.x)&&0==Math.round(r.x-u.x)||0==Math.round(s.y-r.y)&&0==Math.round(r.y-u.y)||a.push(this.convertPoint(r.clone(),!1)),s=r,r=u}s=this.state.getVisibleTerminalState(!0),r=this.state.getVisibleTerminalState(!1),h=this.state.absolutePoints,0!=a.length||0!=Math.round(o[0].x-o[o.length-1].x)&&0!=Math.round(o[0].y-o[o.length-1].y)?5==o.length&&2==a.length&&null!=s&&null!=r&&null!=h&&0==Math.round(h[0].x-h[h.length-1].x)&&(h=(a=this.graph.getView()).getScale(),u=a.getTranslate(),o=a.getRoutingCenterY(s)/h-u.y,null==(l=this.graph.getConnectionConstraint(t,s,!0))||null!=(l=this.graph.getConnectionPoint(s,l))&&(this.convertPoint(l,!1),o=l.y),a=a.getRoutingCenterY(r)/h-u.y,!(h=this.graph.getConnectionConstraint(t,r,!1))||null!=(l=this.graph.getConnectionPoint(r,h))&&(this.convertPoint(l,!1),a=l.y),a=[new mxPoint(e.x,o),new mxPoint(e.x,a)]):a=[e,e],this.points=a,t.view.updateFixedTerminalPoints(t,s,r),t.view.updatePoints(t,this.points,s,r),t.view.updateFloatingTerminalPoints(t,s,r)}},mxEdgeSegmentHandler.prototype.connect=function(t,e,n,i,l){var o=this.graph.getModel(),s=o.getGeometry(t),r=null;if(null!=s&&null!=s.points&&0<s.points.length)for(var a=this.abspoints,h=a[0],u=a[1],d=(r=[],2);d<a.length;d++){var c=a[d];0==Math.round(h.x-u.x)&&0==Math.round(u.x-c.x)||0==Math.round(h.y-u.y)&&0==Math.round(u.y-c.y)||r.push(this.convertPoint(u.clone(),!1)),h=u,u=c}o.beginUpdate();try{null!=r&&null!=(s=o.getGeometry(t))&&((s=s.clone()).points=r,o.setGeometry(t,s)),t=mxEdgeHandler.prototype.connect.apply(this,arguments)}finally{o.endUpdate()}return t},mxEdgeSegmentHandler.prototype.getTooltipForNode=function(t){return null},mxEdgeSegmentHandler.prototype.start=function(t,e,n){mxEdgeHandler.prototype.start.apply(this,arguments),null==this.bends||null==this.bends[n]||this.isSource||this.isTarget||mxUtils.setOpacity(this.bends[n].node,100)},mxEdgeSegmentHandler.prototype.createBends=function(){var t=[],e=this.createHandleShape(0);this.initBend(e),e.setCursor(mxConstants.CURSOR_TERMINAL_HANDLE),t.push(e);var n=this.getCurrentPoints();if(this.graph.isCellBendable(this.state.cell)){null==this.points&&(this.points=[]);for(var i=0;i<n.length-1;i++){e=this.createVirtualBend(),t.push(e);var l=0==Math.round(n[i].x-n[i+1].x);0==Math.round(n[i].y-n[i+1].y)&&i<n.length-2&&(l=0==Math.round(n[i].x-n[i+2].x)),e.setCursor(l?"col-resize":"row-resize"),this.points.push(new mxPoint(0,0))}}return e=this.createHandleShape(n.length),this.initBend(e),e.setCursor(mxConstants.CURSOR_TERMINAL_HANDLE),t.push(e),t},mxEdgeSegmentHandler.prototype.redraw=function(){this.refresh(),mxEdgeHandler.prototype.redraw.apply(this,arguments)},mxEdgeSegmentHandler.prototype.redrawInnerBends=function(t,e){if(this.graph.isCellBendable(this.state.cell)){var n=this.getCurrentPoints();if(null!=n&&1<n.length){var i,l,o,s=!1;for(4==n.length&&0==Math.round(n[1].x-n[2].x)&&0==Math.round(n[1].y-n[2].y)&&(s=!0,0==Math.round(n[0].y-n[n.length-1].y)?(n[1]=new mxPoint(i=n[0].x+(n[n.length-1].x-n[0].x)/2,n[1].y),n[2]=new mxPoint(i,n[2].y)):(n[1]=new mxPoint(n[1].x,i=n[0].y+(n[n.length-1].y-n[0].y)/2),n[2]=new mxPoint(n[2].x,i))),i=0;i<n.length-1;i++)null!=this.bends[i+1]&&(l=new mxPoint((t=n[i]).x+((e=n[i+1]).x-t.x)/2,t.y+(e.y-t.y)/2),o=this.bends[i+1].bounds,this.bends[i+1].bounds=new mxRectangle(Math.floor(l.x-o.width/2),Math.floor(l.y-o.height/2),o.width,o.height),this.bends[i+1].redraw(),this.manageLabelHandle&&this.checkLabelHandle(this.bends[i+1].bounds));s&&(mxUtils.setOpacity(this.bends[1].node,this.virtualBendOpacity),mxUtils.setOpacity(this.bends[3].node,this.virtualBendOpacity))}}},mxKeyHandler.prototype.graph=null,mxKeyHandler.prototype.target=null,mxKeyHandler.prototype.normalKeys=null,mxKeyHandler.prototype.shiftKeys=null,mxKeyHandler.prototype.controlKeys=null,mxKeyHandler.prototype.controlShiftKeys=null,mxKeyHandler.prototype.enabled=!0,mxKeyHandler.prototype.isEnabled=function(){return this.enabled},mxKeyHandler.prototype.setEnabled=function(t){this.enabled=t},mxKeyHandler.prototype.bindKey=function(t,e){this.normalKeys[t]=e},mxKeyHandler.prototype.bindShiftKey=function(t,e){this.shiftKeys[t]=e},mxKeyHandler.prototype.bindControlKey=function(t,e){this.controlKeys[t]=e},mxKeyHandler.prototype.bindControlShiftKey=function(t,e){this.controlShiftKeys[t]=e},mxKeyHandler.prototype.isControlDown=function(t){return mxEvent.isControlDown(t)},mxKeyHandler.prototype.getFunction=function(t){return null==t||mxEvent.isAltDown(t)?null:(this.isControlDown(t)?mxEvent.isShiftDown(t)?this.controlShiftKeys:this.controlKeys:mxEvent.isShiftDown(t)?this.shiftKeys:this.normalKeys)[t.keyCode]},mxKeyHandler.prototype.isGraphEvent=function(t){var e=mxEvent.getSource(t);return!!(e==this.target||e.parentNode==this.target||null!=this.graph.cellEditor&&this.graph.cellEditor.isEventSource(t))||mxUtils.isAncestorNode(this.graph.container,e)},mxKeyHandler.prototype.keyDown=function(t){var e;this.isEnabledForEvent(t)&&(27==t.keyCode?this.escape(t):this.isEventIgnored(t)||null!=(e=this.getFunction(t))&&(e(t),mxEvent.consume(t)))},mxKeyHandler.prototype.isEnabledForEvent=function(t){return this.graph.isEnabled()&&!mxEvent.isConsumed(t)&&this.isGraphEvent(t)&&this.isEnabled()},mxKeyHandler.prototype.isEventIgnored=function(t){return this.graph.isEditing()},mxKeyHandler.prototype.escape=function(t){this.graph.isEscapeEnabled()&&this.graph.escape(t)},mxKeyHandler.prototype.destroy=function(){null!=this.target&&null!=this.keydownHandler&&(mxEvent.removeListener(this.target,"keydown",this.keydownHandler),this.keydownHandler=null),this.target=null},mxTooltipHandler.prototype.zIndex=10005,mxTooltipHandler.prototype.graph=null,mxTooltipHandler.prototype.delay=null,mxTooltipHandler.prototype.ignoreTouchEvents=!0,mxTooltipHandler.prototype.hideOnHover=!1,mxTooltipHandler.prototype.destroyed=!1,mxTooltipHandler.prototype.enabled=!0,mxTooltipHandler.prototype.isEnabled=function(){return this.enabled},mxTooltipHandler.prototype.setEnabled=function(t){this.enabled=t},mxTooltipHandler.prototype.isHideOnHover=function(){return this.hideOnHover},mxTooltipHandler.prototype.setHideOnHover=function(t){this.hideOnHover=t},mxTooltipHandler.prototype.init=function(){null!=document.body&&(this.div=document.createElement("div"),this.div.className="mxTooltip",this.div.style.visibility="hidden",document.body.appendChild(this.div),mxEvent.addGestureListeners(this.div,mxUtils.bind(this,function(t){"A"!=mxEvent.getSource(t).nodeName&&this.hideTooltip()})))},mxTooltipHandler.prototype.getStateForEvent=function(t){return t.getState()},mxTooltipHandler.prototype.mouseDown=function(t,e){this.reset(e,!1),this.hideTooltip()},mxTooltipHandler.prototype.mouseMove=function(t,e){var n;e.getX()==this.lastX&&e.getY()==this.lastY||(this.reset(e,!0),n=this.getStateForEvent(e),(this.isHideOnHover()||n!=this.state||e.getSource()!=this.node&&(!this.stateSource||null!=n&&this.stateSource==(e.isSource(n.shape)||!e.isSource(n.text))))&&this.hideTooltip()),this.lastX=e.getX(),this.lastY=e.getY()},mxTooltipHandler.prototype.mouseUp=function(t,e){this.reset(e,!0),this.hideTooltip()},mxTooltipHandler.prototype.resetTimer=function(){null!=this.thread&&(window.clearTimeout(this.thread),this.thread=null)},mxTooltipHandler.prototype.reset=function(t,e,n){var i,l,o,s;this.ignoreTouchEvents&&!mxEvent.isMouseEvent(t.getEvent())||(this.resetTimer(),n=null!=n?n:this.getStateForEvent(t),e&&this.isEnabled()&&null!=n&&(null==this.div||"hidden"==this.div.style.visibility)&&(i=t.getSource(),l=t.getX(),o=t.getY(),s=t.isSource(n.shape)||t.isSource(n.text),this.thread=window.setTimeout(mxUtils.bind(this,function(){var t;this.graph.isEditing()||this.graph.popupMenuHandler.isMenuShowing()||this.graph.isMouseDown||(t=this.graph.getTooltip(n,i,l,o),this.show(t,l,o),this.state=n,this.node=i,this.stateSource=s)}),this.delay)))},mxTooltipHandler.prototype.hide=function(){this.resetTimer(),this.hideTooltip()},mxTooltipHandler.prototype.hideTooltip=function(){null!=this.div&&(this.div.style.visibility="hidden",this.div.innerHTML="")},mxTooltipHandler.prototype.show=function(t,e,n){var i;!this.destroyed&&null!=t&&0<t.length&&(null==this.div&&this.init(),i=mxUtils.getScrollOrigin(),this.div.style.zIndex=this.zIndex,this.div.style.left=e+i.x+"px",this.div.style.top=n+mxConstants.TOOLTIP_VERTICAL_OFFSET+i.y+"px",mxUtils.isNode(t)?(this.div.innerHTML="",this.div.appendChild(t)):this.div.innerHTML=t.replace(/\n/g,"<br>"),this.div.style.visibility="",mxUtils.fit(this.div))},mxTooltipHandler.prototype.destroy=function(){this.destroyed||(this.graph.removeMouseListener(this),mxEvent.release(this.div),null!=this.div&&null!=this.div.parentNode&&this.div.parentNode.removeChild(this.div),this.destroyed=!0,this.div=null)},mxUtils.extend(mxCellTracker,mxCellMarker),mxCellTracker.prototype.mouseDown=function(t,e){},mxCellTracker.prototype.mouseMove=function(t,e){this.isEnabled()&&this.process(e)},mxCellTracker.prototype.mouseUp=function(t,e){},mxCellTracker.prototype.destroy=function(){this.destroyed||(this.destroyed=!0,this.graph.removeMouseListener(this),mxCellMarker.prototype.destroy.apply(this))},mxCellHighlight.prototype.keepOnTop=!1,mxCellHighlight.prototype.graph=null,mxCellHighlight.prototype.state=null,mxCellHighlight.prototype.spacing=2,mxCellHighlight.prototype.resetHandler=null,mxCellHighlight.prototype.setHighlightColor=function(t){this.highlightColor=t,null!=this.shape&&(this.shape.stroke=t)},mxCellHighlight.prototype.drawHighlight=function(){this.shape=this.createShape(),this.repaint(),this.keepOnTop||this.shape.node.parentNode.firstChild==this.shape.node||this.shape.node.parentNode.insertBefore(this.shape.node,this.shape.node.parentNode.firstChild)},mxCellHighlight.prototype.createShape=function(){var t=this.graph.cellRenderer.createShape(this.state);return t.svgStrokeTolerance=this.graph.tolerance,t.points=this.state.absolutePoints,t.apply(this.state),t.stroke=this.highlightColor,t.opacity=this.opacity,t.isDashed=this.dashed,t.isShadow=!1,t.dialect=mxConstants.DIALECT_SVG,t.init(this.graph.getView().getOverlayPane()),mxEvent.redirectMouseEvents(t.node,this.graph,this.state),this.graph.dialect!=mxConstants.DIALECT_SVG?t.pointerEvents=!1:t.svgPointerEvents="stroke",t},mxCellHighlight.prototype.getStrokeWidth=function(t){return this.strokeWidth},mxCellHighlight.prototype.repaint=function(){null!=this.state&&null!=this.shape&&(this.shape.scale=this.state.view.scale,this.graph.model.isEdge(this.state.cell)?(this.shape.strokewidth=this.getStrokeWidth(),this.shape.points=this.state.absolutePoints,this.shape.outline=!1):(this.shape.bounds=new mxRectangle(this.state.x-this.spacing,this.state.y-this.spacing,this.state.width+2*this.spacing,this.state.height+2*this.spacing),this.shape.rotation=Number(this.state.style[mxConstants.STYLE_ROTATION]||"0"),this.shape.strokewidth=this.getStrokeWidth()/this.state.view.scale,this.shape.outline=!0),null!=this.state.shape&&this.shape.setCursor(this.state.shape.getCursor()),this.shape.redraw())},mxCellHighlight.prototype.hide=function(){this.highlight(null)},mxCellHighlight.prototype.highlight=function(t){this.state!=t&&(null!=this.shape&&(this.shape.destroy(),this.shape=null),this.state=t,null!=this.state&&this.drawHighlight())},mxCellHighlight.prototype.isHighlightAt=function(t,e){var n=!1;if(null!=this.shape&&null!=document.elementFromPoint)for(var i=document.elementFromPoint(t,e);null!=i;){if(i==this.shape.node){n=!0;break}i=i.parentNode}return n},mxCellHighlight.prototype.destroy=function(){this.graph.getView().removeListener(this.resetHandler),this.graph.getView().removeListener(this.repaintHandler),this.graph.getModel().removeListener(this.repaintHandler),null!=this.shape&&(this.shape.destroy(),this.shape=null)},mxCodecRegistry={codecs:[],aliases:[],register:function(t){var e,n;return null!=t&&(e=t.getName(),mxCodecRegistry.codecs[e]=t,(n=mxUtils.getFunctionName(t.template.constructor))!=e&&mxCodecRegistry.addAlias(n,e)),t},addAlias:function(t,e){mxCodecRegistry.aliases[t]=e},getCodec:function(t){var e=null;if(null!=t){e=mxUtils.getFunctionName(t);var n=mxCodecRegistry.aliases[e];if(null!=n&&(e=n),null==(e=mxCodecRegistry.codecs[e]))try{e=new mxObjectCodec(new t),mxCodecRegistry.register(e)}catch(t){}}return e}},mxCodec.prototype.document=null,mxCodec.prototype.objects=null,mxCodec.prototype.elements=null,mxCodec.prototype.encodeDefaults=!1,mxCodec.prototype.putObject=function(t,e){return this.objects[t]=e},mxCodec.prototype.getObject=function(t){var e=null;return null!=t&&null==(e=this.objects[t])&&null==(e=this.lookup(t))&&null!=(t=this.getElementById(t))&&(e=this.decode(t)),e},mxCodec.prototype.lookup=function(t){return null},mxCodec.prototype.getElementById=function(t){return this.updateElements(),this.elements[t]},mxCodec.prototype.updateElements=function(){null==this.elements&&(this.elements={},null!=this.document.documentElement&&this.addElement(this.document.documentElement))},mxCodec.prototype.addElement=function(t){if(t.nodeType==mxConstants.NODETYPE_ELEMENT){var e=t.getAttribute("id");if(null!=e)if(null==this.elements[e])this.elements[e]=t;else if(this.elements[e]!=t)throw Error(e+": Duplicate ID")}for(t=t.firstChild;null!=t;)this.addElement(t),t=t.nextSibling},mxCodec.prototype.getId=function(t){var e=null;return null!=t&&null==(e=this.reference(t))&&t instanceof mxCell&&null==(e=t.getId())&&0==(e=mxCellPath.create(t)).length&&(e="root"),e},mxCodec.prototype.reference=function(t){return null},mxCodec.prototype.encodeCell=function(t,e,n){if(e.appendChild(this.encode(t)),null==n||n)for(var i=t.getChildCount(),l=0;l<i;l++)this.encodeCell(t.getChildAt(l),e)},mxCodec.prototype.isCellCodec=function(t){return null!=t&&"function"==typeof t.isCellCodec&&t.isCellCodec()},mxCodec.prototype.decodeCell=function(t,e){e=null==e||e;var n=null;if(null!=t&&t.nodeType==mxConstants.NODETYPE_ELEMENT){if(n=mxCodecRegistry.getCodec(t.nodeName),!this.isCellCodec(n))for(var i=t.firstChild;null!=i&&!this.isCellCodec(n);)n=mxCodecRegistry.getCodec(i.nodeName),i=i.nextSibling;n=(n=this.isCellCodec(n)?n:mxCodecRegistry.getCodec(mxCell)).decode(this,t),e&&this.insertIntoGraph(n)}return n},mxCodec.prototype.insertIntoGraph=function(t){var e=t.parent,n=t.getTerminal(!0),i=t.getTerminal(!1);if(t.setTerminal(null,!1),t.setTerminal(null,!0),(t.parent=null)!=e){if(e==t)throw Error(e.id+": Self Reference");e.insert(t)}null!=n&&n.insertEdge(t,!0),null!=i&&i.insertEdge(t,!1)},mxCodec.prototype.setAttribute=function(t,e,n){null!=e&&null!=n&&t.setAttribute(e,n)},mxObjectCodec.allowEval=!1,mxObjectCodec.prototype.template=null,mxObjectCodec.prototype.exclude=null,mxObjectCodec.prototype.idrefs=null,mxObjectCodec.prototype.mapping=null,mxObjectCodec.prototype.reverse=null,mxObjectCodec.prototype.getName=function(){return mxUtils.getFunctionName(this.template.constructor)},mxObjectCodec.prototype.cloneTemplate=function(){return new this.template.constructor},mxObjectCodec.prototype.getFieldName=function(t){var e;return null==t||null!=(e=this.reverse[t])&&(t=e),t},mxObjectCodec.prototype.getAttributeName=function(t){var e;return null==t||null!=(e=this.mapping[t])&&(t=e),t},mxObjectCodec.prototype.isExcluded=function(t,e,n,i){return e==mxObjectIdentity.FIELD_NAME||0<=mxUtils.indexOf(this.exclude,e)},mxObjectCodec.prototype.isReference=function(t,e,n,i){return 0<=mxUtils.indexOf(this.idrefs,e)},mxObjectCodec.prototype.encode=function(t,e){var n=t.document.createElement(this.getName());return e=this.beforeEncode(t,e,n),this.encodeObject(t,e,n),this.afterEncode(t,e,n)},mxObjectCodec.prototype.encodeObject=function(t,e,n){for(var i in t.setAttribute(n,"id",t.getId(e)),e){var l=i;null==(i=e[l])||this.isExcluded(e,l,i,!0)||(mxUtils.isInteger(l)&&(l=null),this.encodeValue(t,e,l,i,n))}},mxObjectCodec.prototype.encodeValue=function(t,e,n,i,l){if(null!=i){if(this.isReference(e,n,i,!0)){var o=t.getId(i);if(null==o)return void mxLog.warn("mxObjectCodec.encode: No ID for "+this.getName()+"."+n+"="+i);i=o}o=this.template[n],null!=n&&!t.encodeDefaults&&o==i||(n=this.getAttributeName(n),this.writeAttribute(t,e,n,i,l))}},mxObjectCodec.prototype.writeAttribute=function(t,e,n,i,l){"object"!=typeof i?this.writePrimitiveAttribute(t,e,n,i,l):this.writeComplexAttribute(t,e,n,i,l)},mxObjectCodec.prototype.writePrimitiveAttribute=function(t,e,n,i,l){i=this.convertAttributeToXml(t,e,n,i,l),null==n?(e=t.document.createElement("add"),"function"==typeof i?e.appendChild(t.document.createTextNode(i)):t.setAttribute(e,"value",i),l.appendChild(e)):"function"!=typeof i&&t.setAttribute(l,n,i)},mxObjectCodec.prototype.writeComplexAttribute=function(t,e,n,i,l){null!=(t=t.encode(i))?(null!=n&&t.setAttribute("as",n),l.appendChild(t)):mxLog.warn("mxObjectCodec.encode: No node for "+this.getName()+"."+n+": "+i)},mxObjectCodec.prototype.convertAttributeToXml=function(t,e,n,i){return this.isBooleanAttribute(t,e,n,i)?1==i?"1":"0":i},mxObjectCodec.prototype.isBooleanAttribute=function(t,e,n,i){return void 0===i.length&&(1==i||0==i)},mxObjectCodec.prototype.convertAttributeFromXml=function(t,e,n){var i=e.value;return this.isNumericAttribute(t,e,n)&&(i=parseFloat(i),isNaN(i)||!isFinite(i))?0:i},mxObjectCodec.prototype.isNumericAttribute=function(t,e,n){return n.constructor==mxGeometry&&("x"==e.name||"y"==e.name||"width"==e.name||"height"==e.name)||n.constructor==mxPoint&&("x"==e.name||"y"==e.name)||mxUtils.isNumeric(e.value)},mxObjectCodec.prototype.beforeEncode=function(t,e,n){return e},mxObjectCodec.prototype.afterEncode=function(t,e,n){return n},mxObjectCodec.prototype.decode=function(t,e,n){var i=e.getAttribute("id"),l=t.objects[i];return null==l&&(l=n||this.cloneTemplate(),null!=i&&t.putObject(i,l)),e=this.beforeDecode(t,e,l),this.decodeNode(t,e,l),this.afterDecode(t,e,l)},mxObjectCodec.prototype.decodeNode=function(t,e,n){null!=e&&(this.decodeAttributes(t,e,n),this.decodeChildren(t,e,n))},mxObjectCodec.prototype.decodeAttributes=function(t,e,n){if(null!=(e=e.attributes))for(var i=0;i<e.length;i++)this.decodeAttribute(t,e[i],n)},mxObjectCodec.prototype.isIgnoredAttribute=function(t,e,n){return"as"==e.nodeName||"id"==e.nodeName},mxObjectCodec.prototype.decodeAttribute=function(t,e,n){if(!this.isIgnoredAttribute(t,e,n)){var i=e.nodeName;e=this.convertAttributeFromXml(t,e,n);var l=this.getFieldName(i);if(this.isReference(n,l,e,!1)){if(null==(t=t.getObject(e)))return void mxLog.warn("mxObjectCodec.decode: No object for "+this.getName()+"."+i+"="+e);e=t}this.isExcluded(n,i,e,!1)||(n[i]=e)}},mxObjectCodec.prototype.decodeChildren=function(t,e,n){for(e=e.firstChild;null!=e;){var i=e.nextSibling;e.nodeType!=mxConstants.NODETYPE_ELEMENT||this.processInclude(t,e,n)||this.decodeChild(t,e,n),e=i}},mxObjectCodec.prototype.decodeChild=function(t,e,n){var i=this.getFieldName(e.getAttribute("as"));if(null==i||!this.isExcluded(n,i,e,!1)){var l=this.getFieldTemplate(n,i,e);"add"==e.nodeName?null==(t=e.getAttribute("value"))&&mxObjectCodec.allowEval&&(t=mxUtils.eval(mxUtils.getTextContent(e))):t=t.decode(e,l);try{this.addObjectValue(n,i,t,l)}catch(t){throw Error(t.message+" for "+e.nodeName)}}},mxObjectCodec.prototype.getFieldTemplate=function(t,e,n){return(t=t[e])instanceof Array&&0<t.length?null:t},mxObjectCodec.prototype.addObjectValue=function(t,e,n,i){null!=n&&n!=i&&(null!=e&&0<e.length?t[e]=n:t.push(n))},mxObjectCodec.prototype.processInclude=function(t,e,n){if("include"!=e.nodeName)return!1;if(null!=(e=e.getAttribute("name")))try{var i=mxUtils.load(e).getDocumentElement();null!=i&&t.decode(i,n)}catch(t){}return!0},mxObjectCodec.prototype.beforeDecode=function(t,e,n){return e},mxObjectCodec.prototype.afterDecode=function(t,e,n){return n},mxCodecRegistry.register((t=new mxObjectCodec(new mxCell,["children","edges","overlays","mxTransient"],["parent","source","target"]),t.isCellCodec=function(){return!0},t.isNumericAttribute=function(t,e,n){return"value"!==e.nodeName&&mxObjectCodec.prototype.isNumericAttribute.apply(this,arguments)},t.isExcluded=function(t,e,n,i){return mxObjectCodec.prototype.isExcluded.apply(this,arguments)||i&&"value"==e&&n.nodeType==mxConstants.NODETYPE_ELEMENT},t.afterEncode=function(t,e,n){var i;return null!=e.value&&e.value.nodeType==mxConstants.NODETYPE_ELEMENT&&(i=n,(n=mxUtils.importNode(t.document,e.value,!0)).appendChild(i),t=i.getAttribute("id"),n.setAttribute("id",t),i.removeAttribute("id")),n},t.beforeDecode=function(t,e,n){var i=e.cloneNode(!0),l=this.getName();if(e.nodeName!=l?(null!=(i=e.getElementsByTagName(l)[0])&&i.parentNode==e?(mxUtils.removeWhitespace(i,!0),mxUtils.removeWhitespace(i,!1),i.parentNode.removeChild(i)):i=null,n.value=e.cloneNode(!0),null!=(e=n.value.getAttribute("id"))&&(n.setId(e),n.value.removeAttribute("id"))):n.setId(e.getAttribute("id")),null!=i)for(e=0;e<this.idrefs.length;e++){var o,s=i.getAttribute(l=this.idrefs[e]);null!=s&&(i.removeAttribute(l),null!=(o=t.objects[s]||t.lookup(s))||null!=(s=t.getElementById(s))&&(o=(mxCodecRegistry.codecs[s.nodeName]||this).decode(t,s)),n[l]=o)}return i},t)),mxCodecRegistry.register(function(){var t=new mxObjectCodec(new mxGraphModel);return t.encodeObject=function(t,e,n){var i=t.document.createElement("root");t.encodeCell(e.getRoot(),i),n.appendChild(i)},t.decodeChild=function(t,e,n){"root"==e.nodeName?this.decodeRoot(t,e,n):mxObjectCodec.prototype.decodeChild.apply(this,arguments)},t.decodeRoot=function(t,e,n){var i=null;for(e=e.firstChild;null!=e;){var l=t.decodeCell(e);null!=l&&null==l.getParent()&&(i=l),e=e.nextSibling}null!=i&&n.setRoot(i)},t}()),mxCodecRegistry.register(function(){var t=new mxObjectCodec(new mxRootChange,["model","previous","root"]);return t.afterEncode=function(t,e,n){return t.encodeCell(e.root,n),n},t.beforeDecode=function(t,e,n){if(null!=e.firstChild&&e.firstChild.nodeType==mxConstants.NODETYPE_ELEMENT){var i=(e=e.cloneNode(!0)).firstChild;for(n.root=t.decodeCell(i,!1),n=i.nextSibling,i.parentNode.removeChild(i),i=n;null!=i;)n=i.nextSibling,t.decodeCell(i),i.parentNode.removeChild(i),i=n}return e},t.afterDecode=function(t,e,n){return n.previous=n.root,n},t}()),mxCodecRegistry.register(function(){var t=new mxObjectCodec(new mxChildChange,["model","child","previousIndex"],["parent","previous"]);return t.isReference=function(t,e,n,i){return!("child"!=e||i&&!t.model.contains(t.previous))||0<=mxUtils.indexOf(this.idrefs,e)},t.isExcluded=function(t,e,n,i){return mxObjectCodec.prototype.isExcluded.apply(this,arguments)||i&&null!=n&&("previous"==e||"parent"==e)&&!t.model.contains(n)},t.afterEncode=function(t,e,n){return this.isReference(e,"child",e.child,!0)?n.setAttribute("child",t.getId(e.child)):t.encodeCell(e.child,n),n},t.beforeDecode=function(t,e,n){if(null!=e.firstChild&&e.firstChild.nodeType==mxConstants.NODETYPE_ELEMENT){var i,l=(e=e.cloneNode(!0)).firstChild;for(n.child=t.decodeCell(l,!1),n=l.nextSibling,l.parentNode.removeChild(l),l=n;null!=l;)n=l.nextSibling,l.nodeType==mxConstants.NODETYPE_ELEMENT&&(i=l.getAttribute("id"),null==t.lookup(i)&&t.decodeCell(l)),l.parentNode.removeChild(l),l=n}else l=e.getAttribute("child"),n.child=t.getObject(l);return e},t.afterDecode=function(t,e,n){return null!=n.child&&(null!=n.child.parent&&null!=n.previous&&n.child.parent!=n.previous&&(n.previous=n.child.parent),n.child.parent=n.previous,n.previous=n.parent,n.previousIndex=n.index),n},t}()),mxCodecRegistry.register(function(){var t=new mxObjectCodec(new mxTerminalChange,["model","previous"],["cell","terminal"]);return t.afterDecode=function(t,e,n){return n.previous=n.terminal,n},t}());var mxGenericChangeCodec=function(t,e){return(t=new mxObjectCodec(t,["model","previous"],["cell"])).afterDecode=function(t,n,i){return mxUtils.isNode(i.cell)&&(i.cell=t.decodeCell(i.cell,!1)),i.previous=i[e],i},t};mxCodecRegistry.register(mxGenericChangeCodec(new mxValueChange,"value")),mxCodecRegistry.register(mxGenericChangeCodec(new mxStyleChange,"style")),mxCodecRegistry.register(mxGenericChangeCodec(new mxGeometryChange,"geometry")),mxCodecRegistry.register(mxGenericChangeCodec(new mxCollapseChange,"collapsed")),mxCodecRegistry.register(mxGenericChangeCodec(new mxVisibleChange,"visible")),mxCodecRegistry.register(mxGenericChangeCodec(new mxCellAttributeChange,"value")),mxCodecRegistry.register(new mxObjectCodec(new mxGraph,"graphListeners eventListeners view container cellRenderer editor selection".split(" "))),mxCodecRegistry.register(function(){var t=new mxObjectCodec(new mxGraphView);return t.encode=function(t,e){return this.encodeCell(t,e,e.graph.getModel().getRoot())},t.encodeCell=function(t,e,n){var i=e.graph.getModel(),l=e.getState(n),o=i.getParent(n);if(null==o||null!=l){var s=i.getChildCount(n),r=e.graph.getCellGeometry(n),a=null;if(o==i.getRoot()?a="layer":null==o?a="graph":i.isEdge(n)?a="edge":0<s&&null!=r?a="group":i.isVertex(n)&&(a="vertex"),null!=a){var h=t.document.createElement(a);if(null!=e.graph.getLabel(n)&&(h.setAttribute("label",e.graph.getLabel(n)),e.graph.isHtmlLabel(n)&&h.setAttribute("html",!0)),null==o){var u=e.getGraphBounds();null!=u&&(h.setAttribute("x",Math.round(u.x)),h.setAttribute("y",Math.round(u.y)),h.setAttribute("width",Math.round(u.width)),h.setAttribute("height",Math.round(u.height))),h.setAttribute("scale",e.scale)}else if(null!=l&&null!=r){for(u in l.style)"function"==typeof(o=l.style[u])&&"object"==typeof o&&(o=mxStyleRegistry.getName(o)),null!=o&&"function"!=typeof o&&"object"!=typeof o&&h.setAttribute(u,o);if(null!=(o=l.absolutePoints)&&0<o.length){for(r=Math.round(o[0].x)+","+Math.round(o[0].y),u=1;u<o.length;u++)r+=" "+Math.round(o[u].x)+","+Math.round(o[u].y);h.setAttribute("points",r)}else h.setAttribute("x",Math.round(l.x)),h.setAttribute("y",Math.round(l.y)),h.setAttribute("width",Math.round(l.width)),h.setAttribute("height",Math.round(l.height));null!=(u=l.absoluteOffset)&&(0!=u.x&&h.setAttribute("dx",Math.round(u.x)),0!=u.y&&h.setAttribute("dy",Math.round(u.y)))}for(u=0;u<s;u++)null!=(l=this.encodeCell(t,e,i.getChildAt(n,u)))&&h.appendChild(l)}}return h},t}());var mxStylesheetCodec=mxCodecRegistry.register(function(){var t=new mxObjectCodec(new mxStylesheet);return t.encode=function(t,e){var n,i=t.document.createElement(this.getName());for(n in e.styles){var l=e.styles[n],o=t.document.createElement("add");if(null!=n){for(var s in o.setAttribute("as",n),l){var r,a=this.getStringValue(s,l[s]);null!=a&&((r=t.document.createElement("add")).setAttribute("value",a),r.setAttribute("as",s),o.appendChild(r))}0<o.childNodes.length&&i.appendChild(o)}}return i},t.getStringValue=function(t,e){var n=typeof e;return"function"==n?e=mxStyleRegistry.getName(e):"object"==n&&(e=null),e},t.decode=function(t,e,n){n=n||new this.template.constructor;var i=e.getAttribute("id");for(null!=i&&(t.objects[i]=n),e=e.firstChild;null!=e;){if(!this.processInclude(t,e,n)&&"add"==e.nodeName&&null!=(i=e.getAttribute("as"))){var l,o,s=e.getAttribute("extend"),r=null!=s?mxUtils.clone(n.styles[s]):null;for(null==r&&(null!=s&&mxLog.warn("mxStylesheetCodec.decode: stylesheet "+s+" not found to extend"),r={}),s=e.firstChild;null!=s;)s.nodeType==mxConstants.NODETYPE_ELEMENT&&(l=s.getAttribute("as"),"add"==s.nodeName?(null!=(o=mxUtils.getTextContent(s))&&0<o.length&&mxStylesheetCodec.allowEval?o=mxUtils.eval(o):(o=s.getAttribute("value"),mxUtils.isNumeric(o)&&(o=parseFloat(o))),null!=o&&(r[l]=o)):"remove"==s.nodeName&&delete r[l]),s=s.nextSibling;n.putCellStyle(i,r)}e=e.nextSibling}return n},t}());function Actions(t){this.editorUi=t,this.actions={},this.init()}function Action(t,e,n,i,l){mxEventSource.call(this),this.label=t,this.funct=this.createFunction(e),this.enabled=null==n||n,this.iconCls=i,this.shortcut=l,this.visible=!0}mxStylesheetCodec.allowEval=!0,mxCodec.prototype.mxDefinitions={Array:Array,Object:Object,mxAbstractCanvas2D:mxAbstractCanvas2D,mxActor:mxActor,mxAnimation:mxAnimation,mxArrow:mxArrow,mxArrowConnector:mxArrowConnector,mxAutoSaveManager:mxAutoSaveManager,mxBasePath:"../src",mxCell:mxCell,mxCellAttributeChange:mxCellAttributeChange,mxCellEditor:mxCellEditor,mxCellHighlight:mxCellHighlight,mxCellMarker:mxCellMarker,mxCellOverlay:mxCellOverlay,mxCellPath:{},mxCellRenderer:mxCellRenderer,mxCellState:mxCellState,mxCellStatePreview:mxCellStatePreview,mxCellTracker:mxCellTracker,mxChildChange:mxChildChange,mxCircleLayout:mxCircleLayout,mxClient:{VERSION:"4.1.1",IS_IE:!1,IS_IE6:!1,IS_IE11:!1,IS_EDGE:!1},mxClipboard:{STEPSIZE:10,insertCount:1,cells:null},mxCloud:mxCloud,mxCodec:mxCodec,mxCodecRegistry:mxCodecRegistry,mxCollapseChange:mxCollapseChange,mxCompactTreeLayout:mxCompactTreeLayout,mxCompositeLayout:mxCompositeLayout,mxConnectionConstraint:mxConnectionConstraint,mxConnectionHandler:mxConnectionHandler,mxConnector:mxConnector,mxConstants:{DEFAULT_HOTSPOT:.3,MIN_HOTSPOT_SIZE:8,MAX_HOTSPOT_SIZE:0,RENDERING_HINT_EXACT:"exact",RENDERING_HINT_FASTER:"faster"},mxConstraintHandler:mxConstraintHandler,mxCoordinateAssignment:mxCoordinateAssignment,mxCurrentRootChange:mxCurrentRootChange,mxCylinder:mxCylinder,mxDefaultToolbarCodec:{},mxDictionary:mxDictionary,mxDivResizer:mxDivResizer,mxDoubleEllipse:mxDoubleEllipse,mxDragSource:mxDragSource,mxEdgeHandler:mxEdgeHandler,mxEdgeLabelLayout:mxEdgeLabelLayout,mxEdgeSegmentHandler:mxEdgeSegmentHandler,mxEdgeStyle:{},mxEffects:{animateChanges:[],cascadeOpacity:[],fadeOut:[]},mxElbowEdgeHandler:mxElbowEdgeHandler,mxEllipse:mxEllipse,mxEvent:{},mxEventObject:mxEventObject,mxEventSource:mxEventSource,mxFastOrganicLayout:mxFastOrganicLayout,mxForceIncludes:!1,mxForm:mxForm,mxGeometry:mxGeometry,mxGeometryChange:mxGeometryChange,mxGraph:mxGraph,mxGraphAbstractHierarchyCell:mxGraphAbstractHierarchyCell,mxGraphHandler:mxGraphHandler,mxGraphHierarchyEdge:mxGraphHierarchyEdge,mxGraphHierarchyModel:mxGraphHierarchyModel,mxGraphHierarchyNode:mxGraphHierarchyNode,mxGraphLayout:mxGraphLayout,mxGraphModel:mxGraphModel,mxGraphSelectionModel:mxGraphSelectionModel,mxGraphView:mxGraphView,mxGuide:mxGuide,mxHandle:mxHandle,mxHexagon:mxHexagon,mxHierarchicalEdgeStyle:{ORTHOGONAL:1,POLYLINE:2,STRAIGHT:3,CURVE:4},mxHierarchicalLayout:mxHierarchicalLayout,mxHierarchicalLayoutStage:mxHierarchicalLayoutStage,mxImage:mxImage,mxImageBundle:mxImageBundle,mxImageExport:mxImageExport,mxImageShape:mxImageShape,mxKeyHandler:mxKeyHandler,mxLabel:mxLabel,mxLanguage:void 0,mxLanguages:["de"],mxLayoutManager:mxLayoutManager,mxLine:mxLine,mxListenerList:[],mxLoadResources:!1,mxLoadStylesheets:!0,mxLog:{consoleName:"Console",TRACE:!1,DEBUG:!0,WARN:!0,buffer:""},mxMarker:{markers:Array(0),addMarker:[],createMarker:[]},mxMedianHybridCrossingReduction:mxMedianHybridCrossingReduction,mxMinimumCycleRemover:mxMinimumCycleRemover,mxMorphing:mxMorphing,mxMouseEvent:mxMouseEvent,mxMultiplicity:mxMultiplicity,mxObjectCodec:mxObjectCodec,mxObjectIdentity:{FIELD_NAME:"mxObjectId",counter:338,get:[],clear:[]},mxOutline:mxOutline,mxPanningHandler:mxPanningHandler,mxPanningManager:mxPanningManager,mxParallelEdgeLayout:mxParallelEdgeLayout,mxPartitionLayout:mxPartitionLayout,mxPerimeter:{RectanglePerimeter:[],EllipsePerimeter:[],RhombusPerimeter:[],TrianglePerimeter:[],HexagonPerimeter:[]},mxPoint:mxPoint,mxPolyline:mxPolyline,mxPopupMenu:mxPopupMenu,mxPopupMenuHandler:mxPopupMenuHandler,mxPrintPreview:mxPrintPreview,mxRadialTreeLayout:mxRadialTreeLayout,mxRectangle:mxRectangle,mxRectangleShape:mxRectangleShape,mxResourceExtension:".txt",mxResources:{resources:{},extension:".txt",resourcesEncoded:!1,loadDefaultBundle:!1,loadSpecialBundle:!0},mxRhombus:mxRhombus,mxRootChange:mxRootChange,mxRubberband:mxRubberband,mxSelectionCellsHandler:mxSelectionCellsHandler,mxSelectionChange:mxSelectionChange,mxShape:mxShape,mxStackLayout:mxStackLayout,mxStencil:mxStencil,mxStencilRegistry:{stencils:{},libraries:{},dynamicLoading:!0,addStencil:[],getStencil:[]},mxStyleChange:mxStyleChange,mxStyleRegistry:{},mxStylesheet:mxStylesheet,mxStylesheetCodec:mxObjectCodec,mxSvgCanvas2D:mxSvgCanvas2D,mxSwimlane:mxSwimlane,mxSwimlaneLayout:mxSwimlaneLayout,mxSwimlaneManager:mxSwimlaneManager,mxSwimlaneModel:mxSwimlaneModel,mxSwimlaneOrdering:mxSwimlaneOrdering,mxTemporaryCellStates:mxTemporaryCellStates,mxTerminalChange:mxTerminalChange,mxText:mxText,mxToolbar:mxToolbar,mxTooltipHandler:mxTooltipHandler,mxTriangle:mxTriangle,mxUndoManager:mxUndoManager,mxUndoableEdit:mxUndoableEdit,mxUrlConverter:{},mxUtils:{errorResource:"error",closeResource:"close",errorImage:"../src/images/error.gif",removeCursors:[],getCurrentStyle:[]},mxValueChange:mxValueChange,mxVertexHandler:mxVertexHandler,mxVisibleChange:mxVisibleChange,mxWindow:mxWindow,mxXmlCanvas2D:mxXmlCanvas2D,mxXmlRequest:mxXmlRequest},mxCodec.prototype.decode=function(t,e){this.updateElements();var n=null,i=null;try{i=this.mxDefinitions[t.nodeName]}catch(t){}return null!=(i=mxCodecRegistry.getCodec(i))?n=i.decode(this,t,e):(n=t.cloneNode(!0)).removeAttribute("as"),n},mxCodec.prototype.encode=function(t){var e,n=null;return null!=t&&null!=t.constructor&&(null!=(e=mxCodecRegistry.getCodec(t.constructor))?n=e.encode(this,t):mxUtils.isNode(t)?n=mxUtils.importNode(this.document,t,!0):mxLog.warn("mxCodec.encode: No codec for "+mxUtils.getFunctionName(t.constructor))),n},Actions.prototype.init=function(){function t(t){l.escape(),null!=(t=l.deleteCells(l.getDeletableCells(l.getSelectionCells()),t))&&l.setSelectionCells(t)}function e(){return Action.prototype.isEnabled.apply(this,arguments)&&l.isEnabled()}var n=this.editorUi,i=n.editor,l=i.graph;this.addAction("new...",function(){l.openLink(n.getUrl())}),this.addAction("open...",function(){window.openNew=!0,window.openKey="open",n.openFile()}),this.addAction("import...",function(){window.openNew=!1,window.openKey="import",window.openFile=new OpenFile(mxUtils.bind(this,function(){n.hideDialog()})),window.openFile.setConsumer(mxUtils.bind(this,function(t,e){try{var n=mxUtils.parseXml(t);i.graph.setSelectionCells(i.graph.importGraphModel(n.documentElement))}catch(t){mxUtils.alert(mxResources.get("invalidOrMissingFile")+": "+t.message)}})),n.showDialog(new OpenDialog(this).container,320,220,!0,!0,function(){window.openFile=null})}).isEnabled=e,this.addAction("save",function(){n.saveFile(!1)},null,null,Editor.ctrlKey+"+S").isEnabled=e,this.addAction("saveAs...",function(){n.saveFile(!0)},null,null,Editor.ctrlKey+"+Shift+S").isEnabled=e,this.addAction("export...",function(){n.showDialog(new ExportDialog(n).container,300,304,!0,!0)}),this.addAction("editDiagram...",function(){var t=new EditDiagramDialog(n);n.showDialog(t.container,620,420,!0,!1),t.init()}),this.addAction("pageSetup...",function(){n.showDialog(new PageSetupDialog(n).container,320,220,!0,!0)}).isEnabled=e,this.addAction("print...",function(){n.showDialog(new PrintDialog(n).container,300,180,!0,!0)},null,"sprite-print",Editor.ctrlKey+"+P"),this.addAction("preview",function(){mxUtils.show(l,null,10,10)}),this.addAction("undo",function(){n.undo()},null,"sprite-undo",Editor.ctrlKey+"+Z"),this.addAction("redo",function(){n.redo()},null,"sprite-redo",mxClient.IS_WIN?Editor.ctrlKey+"+Y":Editor.ctrlKey+"+Shift+Z"),this.addAction("cut",function(){var t=null;try{null!=(t=n.copyXml())&&l.removeCells(t)}catch(t){}null==t&&mxClipboard.cut(l)},null,"sprite-cut",Editor.ctrlKey+"+X"),this.addAction("copy",function(){try{n.copyXml()}catch(e){}try{mxClipboard.copy(l)}catch(e){n.handleError(e)}},null,"sprite-copy",Editor.ctrlKey+"+C"),this.addAction("paste",function(){if(l.isEnabled()&&!l.isCellLocked(l.getDefaultParent())){var t=!1;try{Editor.enableNativeCipboard&&(n.readGraphModelFromClipboard(function(t){if(null!=t){l.getModel().beginUpdate();try{n.pasteXml(t,!0)}finally{l.getModel().endUpdate()}}else mxClipboard.paste(l)}),t=!0)}catch(t){}t||mxClipboard.paste(l)}},!1,"sprite-paste",Editor.ctrlKey+"+V"),this.addAction("pasteHere",function(t){function e(t){if(null!=t){for(var e=!0,n=0;n<t.length&&e;n++)e=e&&l.model.isEdge(t[n]);n=l.view.scale;var i,o=(r=l.view.translate).x,s=r.y,r=null;1!=t.length||!e||null!=(i=l.getCellGeometry(t[0]))&&(r=i.getTerminalPoint(!0)),null!=(r=null!=r?r:l.getBoundingBoxFromGeometry(t,e))&&(e=Math.round(l.snap(l.popupMenuHandler.triggerX/n-o)),n=Math.round(l.snap(l.popupMenuHandler.triggerY/n-s)),l.cellsMoved(t,e-r.x,n-r.y))}}function i(){l.getModel().beginUpdate();try{e(mxClipboard.paste(l))}finally{l.getModel().endUpdate()}}if(l.isEnabled()&&!l.isCellLocked(l.getDefaultParent())){t=!1;try{Editor.enableNativeCipboard&&(n.readGraphModelFromClipboard(function(t){if(null!=t){l.getModel().beginUpdate();try{e(n.pasteXml(t,!0))}finally{l.getModel().endUpdate()}}else i()}),t=!0)}catch(t){}t||i()}}),this.addAction("copySize",function(){var t=l.getSelectionCell();l.isEnabled()&&null!=t&&l.getModel().isVertex(t)&&null!=(t=l.getCellGeometry(t))&&(n.copiedSize=new mxRectangle(t.x,t.y,t.width,t.height))},null,null,"Alt+Shift+X"),this.addAction("pasteSize",function(){if(l.isEnabled()&&!l.isSelectionEmpty()&&null!=n.copiedSize){l.getModel().beginUpdate();try{for(var t,e=l.getSelectionCells(),i=0;i<e.length;i++)!l.getModel().isVertex(e[i])||null!=(t=l.getCellGeometry(e[i]))&&((t=t.clone()).width=n.copiedSize.width,t.height=n.copiedSize.height,l.getModel().setGeometry(e[i],t))}finally{l.getModel().endUpdate()}}},null,null,"Alt+Shift+V"),this.addAction("copyData",function(){var t=l.getSelectionCell()||l.getModel().getRoot();l.isEnabled()&&null!=t&&(null==(t=t.cloneValue())||isNaN(t.nodeType)||(n.copiedValue=t))},null,null,"Alt+Shift+B"),this.addAction("pasteData",function(t){function e(e,n){var o=i.getValue(e);(n=e.cloneValue(n)).removeAttribute("placeholders"),null==o||isNaN(o.nodeType)||n.setAttribute("placeholders",o.getAttribute("placeholders")),null!=t&&(mxEvent.isMetaDown(t)||mxEvent.isControlDown(t))||n.setAttribute("label",l.convertValueToString(e)),i.setValue(e,n)}var i=l.getModel();if(l.isEnabled()&&!l.isSelectionEmpty()&&null!=n.copiedValue){i.beginUpdate();try{var o=l.getSelectionCells();if(0==o.length)e(i.getRoot(),n.copiedValue);else for(var s=0;s<o.length;s++)e(o[s],n.copiedValue)}finally{i.endUpdate()}}},null,null,"Alt+Shift+E"),this.addAction("delete",function(e){t(null!=e&&mxEvent.isControlDown(e))},null,null,"Delete"),this.addAction("deleteAll",function(){t(!0)}),this.addAction("deleteLabels",function(){if(!l.isSelectionEmpty()){l.getModel().beginUpdate();try{for(var t=l.getSelectionCells(),e=0;e<t.length;e++)l.cellLabelChanged(t[e],"")}finally{l.getModel().endUpdate()}}},null,null,Editor.ctrlKey+"+Delete"),this.addAction("duplicate",function(){try{l.setSelectionCells(l.duplicateCells()),l.scrollCellToVisible(l.getSelectionCell())}catch(e){n.handleError(e)}},null,null,Editor.ctrlKey+"+D"),this.put("turn",new Action(mxResources.get("turn")+" / "+mxResources.get("reverse"),function(t){l.turnShapes(l.getSelectionCells(),null!=t&&mxEvent.isShiftDown(t))},null,null,Editor.ctrlKey+"+R")),this.addAction("selectVertices",function(){l.selectVertices(null,!0)},null,null,Editor.ctrlKey+"+Shift+I"),this.addAction("selectEdges",function(){l.selectEdges()},null,null,Editor.ctrlKey+"+Shift+E"),this.addAction("selectAll",function(){l.selectAll(null,!0)},null,null,Editor.ctrlKey+"+A"),this.addAction("selectNone",function(){l.clearSelection()},null,null,Editor.ctrlKey+"+Shift+A"),this.addAction("lockUnlock",function(){if(!l.isSelectionEmpty()){l.getModel().beginUpdate();try{var t=l.isCellMovable(l.getSelectionCell())?1:0;l.toggleCellStyles(mxConstants.STYLE_MOVABLE,t),l.toggleCellStyles(mxConstants.STYLE_RESIZABLE,t),l.toggleCellStyles(mxConstants.STYLE_ROTATABLE,t),l.toggleCellStyles(mxConstants.STYLE_DELETABLE,t),l.toggleCellStyles(mxConstants.STYLE_EDITABLE,t),l.toggleCellStyles("connectable",t)}finally{l.getModel().endUpdate()}}},null,null,Editor.ctrlKey+"+L"),this.addAction("home",function(){l.home()},null,null,"Shift+Home"),this.addAction("exitGroup",function(){l.exitGroup()},null,null,Editor.ctrlKey+"+Shift+Home"),this.addAction("enterGroup",function(){l.enterGroup()},null,null,Editor.ctrlKey+"+Shift+End"),this.addAction("collapse",function(){l.foldCells(!0)},null,null,Editor.ctrlKey+"+Home"),this.addAction("expand",function(){l.foldCells(!1)},null,null,Editor.ctrlKey+"+End"),this.addAction("toFront",function(){l.orderCells(!1)},null,null,Editor.ctrlKey+"+Shift+F"),this.addAction("toBack",function(){l.orderCells(!0)},null,null,Editor.ctrlKey+"+Shift+B"),this.addAction("group",function(){var t;l.isEnabled()&&(1!=(t=mxUtils.sortCells(l.getSelectionCells(),!0)).length||l.isTable(t[0])||l.isTableRow(t[0])?1<(t=l.getCellsForGroup(t)).length&&l.setSelectionCell(l.groupCells(null,0,t)):l.setCellStyles("container","1"))},null,null,Editor.ctrlKey+"+G"),this.addAction("ungroup",function(){if(l.isEnabled()){var t=l.getSelectionCells();l.model.beginUpdate();try{var e=l.ungroupCells();if(null!=t)for(var n=0;n<t.length;n++)l.model.contains(t[n])&&(0==l.model.getChildCount(t[n])&&l.model.isVertex(t[n])&&l.setCellStyles("container","0",[t[n]]),e.push(t[n]))}finally{l.model.endUpdate()}l.setSelectionCells(e)}},null,null,Editor.ctrlKey+"+Shift+U"),this.addAction("removeFromGroup",function(){if(l.isEnabled()){var t=l.getSelectionCells();if(null!=t){for(var e=[],n=0;n<t.length;n++)l.isTableRow(t[n])||l.isTableCell(t[n])||e.push(t[n]);l.removeCellsFromParent(e)}}}),this.addAction("edit",function(){l.isEnabled()&&l.startEditingAtCell()},null,null,"F2/Enter"),this.addAction("editData...",function(){var t=l.getSelectionCell()||l.getModel().getRoot();n.showDataDialog(t)},null,null,Editor.ctrlKey+"+M"),this.addAction("editTooltip...",function(){var t,e,i;l.isEnabled()&&!l.isSelectionEmpty()&&(t=l.getSelectionCell(),e="",!mxUtils.isNode(t.value)||(i=null)!=(i=null==(i=Graph.translateDiagram&&null!=Graph.diagramLanguage&&t.value.hasAttribute("tooltip_"+Graph.diagramLanguage)?t.value.getAttribute("tooltip_"+Graph.diagramLanguage):i)?t.value.getAttribute("tooltip"):i)&&(e=i),e=new TextareaDialog(n,mxResources.get("editTooltip")+":",e,function(e){l.setTooltipForCell(t,e)}),n.showDialog(e.container,320,200,!0,!0),e.init())},null,null,"Alt+Shift+T"),this.addAction("openLink",function(){var t=l.getLinkForCell(l.getSelectionCell());null!=t&&l.openLink(t)}),this.addAction("editLink...",function(){var t,e;l.isEnabled()&&!l.isSelectionEmpty()&&(t=l.getSelectionCell(),e=l.getLinkForCell(t)||"",n.showLinkDialog(e,mxResources.get("apply"),function(e,n,i){e=mxUtils.trim(e),l.setLinkForCell(t,0<e.length?e:null),l.setAttributeForCell(t,"linkTarget",i)},!0,l.getLinkTargetForCell(t)))},null,null,"Alt+Shift+L"),this.put("insertImage",new Action(mxResources.get("image")+"...",function(){l.isEnabled()&&!l.isCellLocked(l.getDefaultParent())&&(l.clearSelection(),n.actions.get("image").funct())})).isEnabled=e,this.put("insertLink",new Action(mxResources.get("link")+"...",function(){l.isEnabled()&&!l.isCellLocked(l.getDefaultParent())&&n.showLinkDialog("",mxResources.get("insert"),function(t,e,n){if(0<(t=mxUtils.trim(t)).length){var i=null,o=l.getLinkTitle(t);null!=e&&0<e.length&&(i=e[0].iconUrl,30<(o=(o=e[0].name||e[0].type).charAt(0).toUpperCase()+o.substring(1)).length&&(o=o.substring(0,30)+"...")),(e=new mxCell(o,new mxGeometry(0,0,100,40),"fontColor=#0000EE;fontStyle=4;rounded=1;overflow=hidden;"+(null!=i?"shape=label;imageWidth=16;imageHeight=16;spacingLeft=26;align=left;image="+i:"spacing=10;"))).vertex=!0,i=l.getCenterInsertPoint(l.getBoundingBoxFromGeometry([e],!0)),e.geometry.x=i.x,e.geometry.y=i.y,l.setAttributeForCell(e,"linkTarget",n),l.setLinkForCell(e,t),l.cellSizeUpdated(e,!0),l.getModel().beginUpdate();try{e=l.addCell(e),l.fireEvent(new mxEventObject("cellsInserted","cells",[e]))}finally{l.getModel().endUpdate()}l.setSelectionCell(e),l.scrollCellToVisible(l.getSelectionCell())}},!0)})).isEnabled=e,this.addAction("link...",mxUtils.bind(this,function(){if(l.isEnabled())if(l.cellEditor.isContentEditing()){var t=l.getSelectedElement(),e=l.getParentByName(t,"A",l.cellEditor.textarea),i="";if(null==e&&null!=t&&null!=t.getElementsByTagName)for(var o=t.getElementsByTagName("a"),s=0;s<o.length&&null==e;s++)o[s].textContent==t.textContent&&(e=o[s]);null!=e&&"A"==e.nodeName&&(i=e.getAttribute("href")||"",l.selectNode(e));var r=l.cellEditor.saveSelection();n.showLinkDialog(i,mxResources.get("apply"),mxUtils.bind(this,function(t){l.cellEditor.restoreSelection(r),null!=t&&l.insertLink(t)}))}else(l.isSelectionEmpty()?this.get("insertLink"):this.get("editLink")).funct()})).isEnabled=e,this.addAction("autosize",function(){var t=l.getSelectionCells();if(null!=t){l.getModel().beginUpdate();try{for(var e=0;e<t.length;e++){var n,i,o=t[e];l.getModel().getChildCount(o)?l.updateGroupBounds([o],20):(n=l.view.getState(o),i=l.getCellGeometry(o),l.getModel().isVertex(o)&&null!=n&&null!=n.text&&null!=i&&l.isWrapping(o)?((i=i.clone()).height=n.text.boundingBox.height/l.view.scale,l.getModel().setGeometry(o,i)):l.updateCellSize(o))}}finally{l.getModel().endUpdate()}}},null,null,Editor.ctrlKey+"+Shift+Y"),this.addAction("formattedText",function(){l.stopEditing();var t=l.getCommonStyle(l.getSelectionCells());t="1"==mxUtils.getValue(t,"html","0")?null:"1",l.getModel().beginUpdate();try{for(var e,i,o,s=l.getSelectionCells(),r=0;r<s.length;r++)state=l.getView().getState(s[r]),null!=state&&("1"==(e=mxUtils.getValue(state.style,"html","0"))&&null==t?(i=l.convertValueToString(state.cell),"0"!=mxUtils.getValue(state.style,"nl2Br","1")&&(i=i.replace(/\n/g,"").replace(/<br\s*.?>/g,"\n")),(o=document.createElement("div")).innerHTML=l.sanitizeHtml(i),i=mxUtils.extractTextWithWhitespace(o.childNodes),l.cellLabelChanged(state.cell,i),l.setCellStyles("html",t,[s[r]])):"0"==e&&"1"==t&&(i=mxUtils.htmlEntities(l.convertValueToString(state.cell),!1),"0"!=mxUtils.getValue(state.style,"nl2Br","1")&&(i=i.replace(/\n/g,"<br/>")),l.cellLabelChanged(state.cell,l.sanitizeHtml(i)),l.setCellStyles("html",t,[s[r]])));n.fireEvent(new mxEventObject("styleChanged","keys",["html"],"values",[null!=t?t:"0"],"cells",s))}finally{l.getModel().endUpdate()}}),this.addAction("wordWrap",function(){var t=l.getView().getState(l.getSelectionCell()),e="wrap";l.stopEditing(),null!=t&&"wrap"==t.style[mxConstants.STYLE_WHITE_SPACE]&&(e=null),l.setCellStyles(mxConstants.STYLE_WHITE_SPACE,e)}),this.addAction("rotation",function(){var t="0",e=l.getView().getState(l.getSelectionCell());null!=e&&(t=e.style[mxConstants.STYLE_ROTATION]||t),t=new FilenameDialog(n,t,mxResources.get("apply"),function(t){null!=t&&0<t.length&&l.setCellStyles(mxConstants.STYLE_ROTATION,t)},mxResources.get("enterValue")+" ("+mxResources.get("rotation")+" 0-360)"),n.showDialog(t.container,375,80,!0,!0),t.init()}),this.addAction("resetView",function(){l.zoomTo(1),n.resetScrollbars()},null,null,"Home"),this.addAction("zoomIn",function(t){l.isFastZoomEnabled()?l.lazyZoom(!0,!0,n.buttonZoomDelay):l.zoomIn()},null,null,Editor.ctrlKey+" + (Numpad) / Alt+Mousewheel"),this.addAction("zoomOut",function(t){l.isFastZoomEnabled()?l.lazyZoom(!1,!0,n.buttonZoomDelay):l.zoomOut()},null,null,Editor.ctrlKey+" - (Numpad) / Alt+Mousewheel"),this.addAction("fitWindow",function(){var t=l.isSelectionEmpty()?l.getGraphBounds():l.getBoundingBox(l.getSelectionCells()),e=l.view.translate,i=l.view.scale;t.x=t.x/i-e.x,t.y=t.y/i-e.y,t.width/=i,t.height/=i,null!=l.backgroundImage&&t.add(new mxRectangle(0,0,l.backgroundImage.width,l.backgroundImage.height)),0==t.width||0==t.height?(l.zoomTo(1),n.resetScrollbars()):(null!=(e=Editor.fitWindowBorders)&&(t.x-=e.x,t.y-=e.y,t.width+=e.width+e.x,t.height+=e.height+e.y),l.fitWindow(t))},null,null,Editor.ctrlKey+"+Shift+H"),this.addAction("fitPage",mxUtils.bind(this,function(){l.pageVisible||this.get("pageView").funct();var t=l.pageFormat,e=l.pageScale;l.zoomTo(Math.floor(20*Math.min((l.container.clientWidth-10)/t.width/e,(l.container.clientHeight-10)/t.height/e))/20),mxUtils.hasScrollbars(l.container)&&(t=l.getPagePadding(),l.container.scrollTop=t.y*l.view.scale-1,l.container.scrollLeft=Math.min(t.x*l.view.scale,(l.container.scrollWidth-l.container.clientWidth)/2)-1)}),null,null,Editor.ctrlKey+"+J"),this.addAction("fitTwoPages",mxUtils.bind(this,function(){l.pageVisible||this.get("pageView").funct();var t=l.pageFormat,e=l.pageScale;l.zoomTo(Math.floor(20*Math.min((l.container.clientWidth-10)/(2*t.width)/e,(l.container.clientHeight-10)/t.height/e))/20),mxUtils.hasScrollbars(l.container)&&(t=l.getPagePadding(),l.container.scrollTop=Math.min(t.y,(l.container.scrollHeight-l.container.clientHeight)/2),l.container.scrollLeft=Math.min(t.x,(l.container.scrollWidth-l.container.clientWidth)/2))}),null,null,Editor.ctrlKey+"+Shift+J"),this.addAction("fitPageWidth",mxUtils.bind(this,function(){var t;l.pageVisible||this.get("pageView").funct(),l.zoomTo(Math.floor(20*(l.container.clientWidth-10)/l.pageFormat.width/l.pageScale)/20),mxUtils.hasScrollbars(l.container)&&(t=l.getPagePadding(),l.container.scrollLeft=Math.min(t.x*l.view.scale,(l.container.scrollWidth-l.container.clientWidth)/2))})),this.put("customZoom",new Action(mxResources.get("custom")+"...",mxUtils.bind(this,function(){var t=new FilenameDialog(this.editorUi,parseInt(100*l.getView().getScale()),mxResources.get("apply"),mxUtils.bind(this,function(t){t=parseInt(t),!isNaN(t)&&0<t&&l.zoomTo(t/100)}),mxResources.get("zoom")+" (%)");this.editorUi.showDialog(t.container,300,80,!0,!0),t.init()}),null,null,Editor.ctrlKey+"+0")),this.addAction("pageScale...",mxUtils.bind(this,function(){var t=new FilenameDialog(this.editorUi,parseInt(100*l.pageScale),mxResources.get("apply"),mxUtils.bind(this,function(t){t=parseInt(t),!isNaN(t)&&0<t&&((t=new ChangePageSetup(n,null,null,null,t/100)).ignoreColor=!0,t.ignoreImage=!0,l.model.execute(t))}),mxResources.get("pageScale")+" (%)");this.editorUi.showDialog(t.container,300,80,!0,!0),t.init()}));var o=null;(o=this.addAction("grid",function(){l.setGridEnabled(!l.isGridEnabled()),n.fireEvent(new mxEventObject("gridEnabledChanged"))},null,null,Editor.ctrlKey+"+Shift+G")).setToggleAction(!0),o.setSelectedCallback(function(){return l.isGridEnabled()}),o.setEnabled(!1),(o=this.addAction("guides",function(){l.graphHandler.guidesEnabled=!l.graphHandler.guidesEnabled,n.fireEvent(new mxEventObject("guidesEnabledChanged"))})).setToggleAction(!0),o.setSelectedCallback(function(){return l.graphHandler.guidesEnabled}),o.setEnabled(!1),(o=this.addAction("tooltips",function(){l.tooltipHandler.setEnabled(!l.tooltipHandler.isEnabled()),n.fireEvent(new mxEventObject("tooltipsEnabledChanged"))})).setToggleAction(!0),o.setSelectedCallback(function(){return l.tooltipHandler.isEnabled()}),(o=this.addAction("collapseExpand",function(){var t=new ChangePageSetup(n);t.ignoreColor=!0,t.ignoreImage=!0,t.foldingEnabled=!l.foldingEnabled,l.model.execute(t)})).setToggleAction(!0),o.setSelectedCallback(function(){return l.foldingEnabled}),o.isEnabled=e,(o=this.addAction("scrollbars",function(){n.setScrollbars(!n.hasScrollbars())})).setToggleAction(!0),o.setSelectedCallback(function(){return l.scrollbars}),(o=this.addAction("pageView",mxUtils.bind(this,function(){n.setPageVisible(!l.pageVisible)}))).setToggleAction(!0),o.setSelectedCallback(function(){return l.pageVisible}),(o=this.addAction("connectionArrows",function(){l.connectionArrowsEnabled=!l.connectionArrowsEnabled,n.fireEvent(new mxEventObject("connectionArrowsChanged"))},null,null,"Alt+Shift+A")).setToggleAction(!0),o.setSelectedCallback(function(){return l.connectionArrowsEnabled}),(o=this.addAction("connectionPoints",function(){l.setConnectable(!l.connectionHandler.isEnabled()),n.fireEvent(new mxEventObject("connectionPointsChanged"))},null,null,"Alt+Shift+P")).setToggleAction(!0),o.setSelectedCallback(function(){return l.connectionHandler.isEnabled()}),(o=this.addAction("copyConnect",function(){l.connectionHandler.setCreateTarget(!l.connectionHandler.isCreateTarget()),n.fireEvent(new mxEventObject("copyConnectChanged"))})).setToggleAction(!0),o.setSelectedCallback(function(){return l.connectionHandler.isCreateTarget()}),o.isEnabled=e,(o=this.addAction("autosave",function(){n.editor.setAutosave(!n.editor.autosave)})).setToggleAction(!0),o.setSelectedCallback(function(){return n.editor.autosave}),o.isEnabled=e,o.visible=!1,this.addAction("help",function(){var t="";mxResources.isLanguageSupported(mxClient.language)&&(t="_"+mxClient.language),l.openLink(RESOURCES_PATH+"/help"+t+".html")});var s=!1;this.put("about",new Action(mxResources.get("about")+" Graph Editor...",function(){s||(n.showDialog(new AboutDialog(n).container,320,280,!0,!0,function(){s=!1}),s=!0)})),(o=mxUtils.bind(this,function(t,e,n,i){return this.addAction(t,function(){if(null!=n&&l.cellEditor.isContentEditing())n();else{l.stopEditing(!1),l.getModel().beginUpdate();try{var t=l.getSelectionCells();l.toggleCellStyleFlags(mxConstants.STYLE_FONTSTYLE,e,t),(e&mxConstants.FONT_BOLD)==mxConstants.FONT_BOLD?l.updateLabelElements(l.getSelectionCells(),function(t){t.style.fontWeight=null,"B"==t.nodeName&&l.replaceElement(t)}):(e&mxConstants.FONT_ITALIC)==mxConstants.FONT_ITALIC?l.updateLabelElements(l.getSelectionCells(),function(t){t.style.fontStyle=null,"I"==t.nodeName&&l.replaceElement(t)}):(e&mxConstants.FONT_UNDERLINE)==mxConstants.FONT_UNDERLINE&&l.updateLabelElements(l.getSelectionCells(),function(t){t.style.textDecoration=null,"U"==t.nodeName&&l.replaceElement(t)});for(var i=0;i<t.length;i++)0==l.model.getChildCount(t[i])&&l.autoSizeCell(t[i],!1)}finally{l.getModel().endUpdate()}}},null,null,i)}))("bold",mxConstants.FONT_BOLD,function(){document.execCommand("bold",!1,null)},Editor.ctrlKey+"+B"),o("italic",mxConstants.FONT_ITALIC,function(){document.execCommand("italic",!1,null)},Editor.ctrlKey+"+I"),o("underline",mxConstants.FONT_UNDERLINE,function(){document.execCommand("underline",!1,null)},Editor.ctrlKey+"+U"),this.addAction("fontColor...",function(){n.menus.pickColor(mxConstants.STYLE_FONTCOLOR,"forecolor","000000")}),this.addAction("strokeColor...",function(){n.menus.pickColor(mxConstants.STYLE_STROKECOLOR)}),this.addAction("fillColor...",function(){n.menus.pickColor(mxConstants.STYLE_FILLCOLOR)}),this.addAction("gradientColor...",function(){n.menus.pickColor(mxConstants.STYLE_GRADIENTCOLOR)}),this.addAction("backgroundColor...",function(){n.menus.pickColor(mxConstants.STYLE_LABEL_BACKGROUNDCOLOR,"backcolor")}),this.addAction("borderColor...",function(){n.menus.pickColor(mxConstants.STYLE_LABEL_BORDERCOLOR)}),this.addAction("vertical",function(){n.menus.toggleStyle(mxConstants.STYLE_HORIZONTAL,!0)}),this.addAction("shadow",function(){n.menus.toggleStyle(mxConstants.STYLE_SHADOW)}),this.addAction("solid",function(){l.getModel().beginUpdate();try{l.setCellStyles(mxConstants.STYLE_DASHED,null),l.setCellStyles(mxConstants.STYLE_DASH_PATTERN,null),n.fireEvent(new mxEventObject("styleChanged","keys",[mxConstants.STYLE_DASHED,mxConstants.STYLE_DASH_PATTERN],"values",[null,null],"cells",l.getSelectionCells()))}finally{l.getModel().endUpdate()}}),this.addAction("dashed",function(){l.getModel().beginUpdate();try{l.setCellStyles(mxConstants.STYLE_DASHED,"1"),l.setCellStyles(mxConstants.STYLE_DASH_PATTERN,null),n.fireEvent(new mxEventObject("styleChanged","keys",[mxConstants.STYLE_DASHED,mxConstants.STYLE_DASH_PATTERN],"values",["1",null],"cells",l.getSelectionCells()))}finally{l.getModel().endUpdate()}}),this.addAction("dotted",function(){l.getModel().beginUpdate();try{l.setCellStyles(mxConstants.STYLE_DASHED,"1"),l.setCellStyles(mxConstants.STYLE_DASH_PATTERN,"1 4"),n.fireEvent(new mxEventObject("styleChanged","keys",[mxConstants.STYLE_DASHED,mxConstants.STYLE_DASH_PATTERN],"values",["1","1 4"],"cells",l.getSelectionCells()))}finally{l.getModel().endUpdate()}}),this.addAction("sharp",function(){l.getModel().beginUpdate();try{l.setCellStyles(mxConstants.STYLE_ROUNDED,"0"),l.setCellStyles(mxConstants.STYLE_CURVED,"0"),n.fireEvent(new mxEventObject("styleChanged","keys",[mxConstants.STYLE_ROUNDED,mxConstants.STYLE_CURVED],"values",["0","0"],"cells",l.getSelectionCells()))}finally{l.getModel().endUpdate()}}),this.addAction("rounded",function(){l.getModel().beginUpdate();try{l.setCellStyles(mxConstants.STYLE_ROUNDED,"1"),l.setCellStyles(mxConstants.STYLE_CURVED,"0"),n.fireEvent(new mxEventObject("styleChanged","keys",[mxConstants.STYLE_ROUNDED,mxConstants.STYLE_CURVED],"values",["1","0"],"cells",l.getSelectionCells()))}finally{l.getModel().endUpdate()}}),this.addAction("toggleRounded",function(){if(!l.isSelectionEmpty()&&l.isEnabled()){l.getModel().beginUpdate();try{var t=l.getSelectionCells(),e=l.getCurrentCellStyle(t[0]),i="1"==mxUtils.getValue(e,mxConstants.STYLE_ROUNDED,"0")?"0":"1";l.setCellStyles(mxConstants.STYLE_ROUNDED,i),l.setCellStyles(mxConstants.STYLE_CURVED,null),n.fireEvent(new mxEventObject("styleChanged","keys",[mxConstants.STYLE_ROUNDED,mxConstants.STYLE_CURVED],"values",[i,"0"],"cells",l.getSelectionCells()))}finally{l.getModel().endUpdate()}}}),this.addAction("curved",function(){l.getModel().beginUpdate();try{l.setCellStyles(mxConstants.STYLE_ROUNDED,"0"),l.setCellStyles(mxConstants.STYLE_CURVED,"1"),n.fireEvent(new mxEventObject("styleChanged","keys",[mxConstants.STYLE_ROUNDED,mxConstants.STYLE_CURVED],"values",["0","1"],"cells",l.getSelectionCells()))}finally{l.getModel().endUpdate()}}),this.addAction("collapsible",function(){var t=l.view.getState(l.getSelectionCell()),e="1";null!=t&&null!=l.getFoldingImage(t)&&(e="0"),l.setCellStyles("collapsible",e),n.fireEvent(new mxEventObject("styleChanged","keys",["collapsible"],"values",[e],"cells",l.getSelectionCells()))}),this.addAction("editStyle...",mxUtils.bind(this,function(){var t,e=l.getSelectionCells();null!=e&&0<e.length&&(t=l.getModel(),t=new TextareaDialog(this.editorUi,mxResources.get("editStyle")+":",t.getStyle(e[0])||"",function(t){null!=t&&l.setCellStyle(mxUtils.trim(t),e)},null,null,400,220),this.editorUi.showDialog(t.container,420,300,!0,!0),t.init())}),null,null,Editor.ctrlKey+"+E"),this.addAction("setAsDefaultStyle",function(){l.isEnabled()&&!l.isSelectionEmpty()&&n.setDefaultStyle(l.getSelectionCell())},null,null,Editor.ctrlKey+"+Shift+D"),this.addAction("clearDefaultStyle",function(){l.isEnabled()&&n.clearDefaultStyle()},null,null,Editor.ctrlKey+"+Shift+R"),this.addAction("addWaypoint",function(){if(null!=(s=l.getSelectionCell())&&l.getModel().isEdge(s)){var t=i.graph.selectionCellsHandler.getHandler(s);if(t instanceof mxEdgeHandler){for(var e=l.view.scale,n=(o=l.view.translate).x,o=o.y,s=l.getModel().getParent(s),r=l.getCellGeometry(s);l.getModel().isVertex(s)&&null!=r;)n+=r.x,o+=r.y,s=l.getModel().getParent(s),r=l.getCellGeometry(s);n=Math.round(l.snap(l.popupMenuHandler.triggerX/e-n)),e=Math.round(l.snap(l.popupMenuHandler.triggerY/e-o)),t.addPointAt(t.state,n,e)}}}),this.addAction("removeWaypoint",function(){var t=n.actions.get("removeWaypoint");null!=t.handler&&t.handler.removePoint(t.handler.state,t.index)}),this.addAction("clearWaypoints",function(){var t=l.getSelectionCells();if(null!=t){t=l.addAllEdges(t),l.getModel().beginUpdate();try{for(var e=0;e<t.length;e++){var n,i=t[e];!l.getModel().isEdge(i)||null!=(n=l.getCellGeometry(i))&&((n=n.clone()).points=null,n.x=0,n.y=0,n.offset=null,l.getModel().setGeometry(i,n))}}finally{l.getModel().endUpdate()}}},null,null,"Alt+Shift+C"),o=this.addAction("subscript",mxUtils.bind(this,function(){l.cellEditor.isContentEditing()&&document.execCommand("subscript",!1,null)}),null,null,Editor.ctrlKey+"+,"),o=this.addAction("superscript",mxUtils.bind(this,function(){l.cellEditor.isContentEditing()&&document.execCommand("superscript",!1,null)}),null,null,Editor.ctrlKey+"+."),o=this.addAction("indent",mxUtils.bind(this,function(){l.cellEditor.isContentEditing()&&document.execCommand("indent",!1,null)}),null,null,"Shift+Tab"),this.addAction("image...",function(){var t,e,i,o;l.isEnabled()&&!l.isCellLocked(l.getDefaultParent())&&(t=mxResources.get("image")+" ("+mxResources.get("url")+"):",i="",null!=(e=l.getView().getState(l.getSelectionCell()))&&(i=e.style[mxConstants.STYLE_IMAGE]||i),o=l.cellEditor.saveSelection(),n.showImageDialog(t,i,function(t,e,n){if(l.cellEditor.isContentEditing())l.cellEditor.restoreSelection(o),l.insertImage(t,e,n);else{var i=l.getSelectionCells();if(null!=t&&(0<t.length||0<i.length)){var s,r=null;l.getModel().beginUpdate();try{0==i.length&&(i=[l.insertVertex(l.getDefaultParent(),null,"",0,0,e,n,"shape=image;imageAspect=0;aspect=fixed;verticalLabelPosition=bottom;verticalAlign=top;")],s=l.getCenterInsertPoint(l.getBoundingBoxFromGeometry(i,!0)),i[0].geometry.x=s.x,i[0].geometry.y=s.y,l.fireEvent(new mxEventObject("cellsInserted","cells",r=i))),l.setCellStyles(mxConstants.STYLE_IMAGE,0<t.length?t:null,i);var a,h,u=l.getCurrentCellStyle(i[0]);"image"!=u[mxConstants.STYLE_SHAPE]&&"label"!=u[mxConstants.STYLE_SHAPE]?l.setCellStyles(mxConstants.STYLE_SHAPE,"image",i):0==t.length&&l.setCellStyles(mxConstants.STYLE_SHAPE,null,i),1==l.getSelectionCount()&&null!=e&&null!=n&&(a=i[0],null!=(h=l.getModel().getGeometry(a))&&((h=h.clone()).width=e,h.height=n,l.getModel().setGeometry(a,h)))}finally{l.getModel().endUpdate()}null!=r&&(l.setSelectionCells(r),l.scrollCellToVisible(r[0]))}}},l.cellEditor.isContentEditing(),!l.cellEditor.isContentEditing()))}).isEnabled=e,(o=this.addAction("layers",mxUtils.bind(this,function(){null==this.layersWindow?(this.layersWindow=new LayersWindow(n,document.body.offsetWidth-280,120,220,196),this.layersWindow.window.addListener("show",function(){n.fireEvent(new mxEventObject("layers"))}),this.layersWindow.window.addListener("hide",function(){n.fireEvent(new mxEventObject("layers"))}),this.layersWindow.window.setVisible(!0),n.fireEvent(new mxEventObject("layers")),this.layersWindow.init()):this.layersWindow.window.setVisible(!this.layersWindow.window.isVisible())}),null,null,Editor.ctrlKey+"+Shift+L")).setToggleAction(!0),o.setSelectedCallback(mxUtils.bind(this,function(){return null!=this.layersWindow&&this.layersWindow.window.isVisible()})),(o=this.addAction("formatPanel",mxUtils.bind(this,function(){n.toggleFormatPanel()}),null,null,Editor.ctrlKey+"+Shift+P")).setToggleAction(!0),o.setSelectedCallback(mxUtils.bind(this,function(){return 0<n.formatWidth})),(o=this.addAction("outline",mxUtils.bind(this,function(){null==this.outlineWindow?(this.outlineWindow=new OutlineWindow(n,document.body.offsetWidth-260,100,180,180),this.outlineWindow.window.addListener("show",function(){n.fireEvent(new mxEventObject("outline"))}),this.outlineWindow.window.addListener("hide",function(){n.fireEvent(new mxEventObject("outline"))}),this.outlineWindow.window.setVisible(!0),n.fireEvent(new mxEventObject("outline"))):this.outlineWindow.window.setVisible(!this.outlineWindow.window.isVisible())}),null,null,Editor.ctrlKey+"+Shift+O")).setToggleAction(!0),o.setSelectedCallback(mxUtils.bind(this,function(){return null!=this.outlineWindow&&this.outlineWindow.window.isVisible()}))},Actions.prototype.addAction=function(t,e,n,i,l){var o="..."==t.substring(t.length-3)?(t=t.substring(0,t.length-3),mxResources.get(t)+"..."):mxResources.get(t);return this.put(t,new Action(o,e,n,i,l))},Actions.prototype.put=function(t,e){return this.actions[t]=e},Actions.prototype.get=function(t){return this.actions[t]},mxUtils.extend(Action,mxEventSource),Action.prototype.createFunction=function(t){return t},Action.prototype.setEnabled=function(t){this.enabled!=t&&(this.enabled=t,this.fireEvent(new mxEventObject("stateChanged")))},Action.prototype.isEnabled=function(){return this.enabled},Action.prototype.setToggleAction=function(t){this.toggleAction=t},Action.prototype.setSelectedCallback=function(t){this.selectedCallback=t},Action.prototype.isSelected=function(){return this.selectedCallback()};var $jscomp=$jscomp||{};$jscomp.scope={},$jscomp.ASSUME_ES5=!1,$jscomp.ASSUME_NO_NATIVE_MAP=!1,$jscomp.ASSUME_NO_NATIVE_SET=!1,$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(t,e,n){t!=Array.prototype&&t!=Object.prototype&&(t[e]=n.value)},$jscomp.getGlobal=function(t){return"undefined"!=typeof window&&window===t||"undefined"==typeof global||null==global?t:global},$jscomp.global=$jscomp.getGlobal(this),$jscomp.polyfill=function(t,e,n,i){if(e){for(n=$jscomp.global,t=t.split("."),i=0;i<t.length-1;i++){var l=t[i];l in n||(n[l]={}),n=n[l]}(e=e(i=n[t=t[t.length-1]]))!=i&&null!=e&&$jscomp.defineProperty(n,t,{configurable:!0,writable:!0,value:e})}},$jscomp.polyfill("Array.prototype.fill",function(t){return t||function(t,e,n){var i=this.length||0;for(e<0&&(e=Math.max(0,i+e)),(null==n||i<n)&&(n=i),(n=Number(n))<0&&(n=Math.max(0,i+n)),e=Number(e||0);e<n;e++)this[e]=t;return this}},"es6","es3");var OpenDialog=function(){var t=document.createElement("iframe");t.style.backgroundColor="transparent",t.allowTransparency="true",t.style.borderStyle="none",t.style.borderWidth="0px",t.style.overflow="hidden",t.frameBorder="0",t.setAttribute("width",(Editor.useLocalStorage?640:320)+"px"),t.setAttribute("height",(Editor.useLocalStorage?480:220)+"px"),t.setAttribute("src",OPEN_FORM),this.container=t},ColorDialog=function(t,e,n,i){function l(){var t=o(0==ColorDialog.recentColors.length?["FFFFFF"]:ColorDialog.recentColors,11,"FFFFFF",!0);return t.style.marginBottom="8px",t}function o(t,e,n,i){e=null!=e?e:12;var o=document.createElement("table");o.style.borderCollapse="collapse",o.setAttribute("cellspacing","0"),o.style.marginBottom="20px",o.style.cellSpacing="0px";var a=document.createElement("tbody");o.appendChild(a);for(var u=t.length/e,d=0;d<u;d++){for(var c=document.createElement("tr"),p=0;p<e;p++)!function(t){var e=document.createElement("td");e.style.border="1px solid black",e.style.padding="0px",e.style.width="16px",e.style.height="16px","none"==(t=null==t?n:t)?e.style.background="url('"+Dialog.prototype.noColorImage+"')":e.style.backgroundColor="#"+t,c.appendChild(e),null!=t&&(e.style.cursor="pointer",mxEvent.addListener(e,"click",function(){"none"==t?(r.fromString("ffffff"),s.value="none"):r.fromString(t)}))}(t[d*e+p]);a.appendChild(c)}return i&&((t=document.createElement("td")).setAttribute("title",mxResources.get("reset")),t.style.border="1px solid black",t.style.padding="0px",t.style.width="16px",t.style.height="16px",t.style.backgroundImage="url('"+Dialog.prototype.closeImage+"')",t.style.backgroundPosition="center center",t.style.backgroundRepeat="no-repeat",t.style.cursor="pointer",c.appendChild(t),mxEvent.addListener(t,"click",function(){ColorDialog.resetRecentColors(),o.parentNode.replaceChild(l(),o)})),h.appendChild(o),o}this.editorUi=t;var s=document.createElement("input");s.style.marginBottom="10px",s.style.width="216px",mxClient.IS_IE&&(s.style.marginTop="10px",document.body.appendChild(s)),this.init=function(){mxClient.IS_TOUCH||s.focus()};var r=new jscolor.color(s);r.pickerOnfocus=!1,r.showPicker();var a=document.createElement("div");jscolor.picker.box.style.position="relative",jscolor.picker.box.style.width="230px",jscolor.picker.box.style.height="100px",jscolor.picker.box.style.paddingBottom="10px",a.appendChild(jscolor.picker.box);var h=document.createElement("center");a.appendChild(s),mxUtils.br(a),l();var u=o(this.presetColors);u.style.marginBottom="8px",(u=o(this.defaultColors)).style.marginBottom="16px",a.appendChild(h),(u=document.createElement("div")).style.textAlign="right",u.style.whiteSpace="nowrap";var d=mxUtils.button(mxResources.get("cancel"),function(){t.hideDialog(),null!=i&&i()});d.className="geBtn",t.editor.cancelFirst&&u.appendChild(d);var c=null!=n?n:this.createApplyFunction();(n=mxUtils.button(mxResources.get("apply"),function(){var e=s.value;/(^#?[a-zA-Z0-9]*$)/.test(e)?("none"!=e&&"#"!=e.charAt(0)&&(e="#"+e),ColorDialog.addRecentColor("none"!=e?e.substring(1):e,12),c(e),t.hideDialog()):t.handleError({message:mxResources.get("invalidInput")})})).className="geBtn gePrimaryBtn",u.appendChild(n),t.editor.cancelFirst||u.appendChild(d),null!=e&&("none"==e?(r.fromString("ffffff"),s.value="none"):r.fromString(e)),a.appendChild(u),this.picker=r,this.colorInput=s,mxEvent.addListener(a,"keydown",function(e){27==e.keyCode&&(t.hideDialog(),null!=i&&i(),mxEvent.consume(e))}),this.container=a};ColorDialog.prototype.presetColors="E6D0DE CDA2BE B5739D E1D5E7 C3ABD0 A680B8 D4E1F5 A9C4EB 7EA6E0 D5E8D4 9AC7BF 67AB9F D5E8D4 B9E0A5 97D077 FFF2CC FFE599 FFD966 FFF4C3 FFCE9F FFB570 F8CECC F19C99 EA6B66".split(" "),ColorDialog.prototype.defaultColors="none FFFFFF E6E6E6 CCCCCC B3B3B3 999999 808080 666666 4D4D4D 333333 1A1A1A 000000 FFCCCC FFE6CC FFFFCC E6FFCC CCFFCC CCFFE6 CCFFFF CCE5FF CCCCFF E5CCFF FFCCFF FFCCE6 FF9999 FFCC99 FFFF99 CCFF99 99FF99 99FFCC 99FFFF 99CCFF 9999FF CC99FF FF99FF FF99CC FF6666 FFB366 FFFF66 B3FF66 66FF66 66FFB3 66FFFF 66B2FF 6666FF B266FF FF66FF FF66B3 FF3333 FF9933 FFFF33 99FF33 33FF33 33FF99 33FFFF 3399FF 3333FF 9933FF FF33FF FF3399 FF0000 FF8000 FFFF00 80FF00 00FF00 00FF80 00FFFF 007FFF 0000FF 7F00FF FF00FF FF0080 CC0000 CC6600 CCCC00 66CC00 00CC00 00CC66 00CCCC 0066CC 0000CC 6600CC CC00CC CC0066 990000 994C00 999900 4D9900 009900 00994D 009999 004C99 000099 4C0099 990099 99004D 660000 663300 666600 336600 006600 006633 006666 003366 000066 330066 660066 660033 330000 331A00 333300 1A3300 003300 00331A 003333 001933 000033 190033 330033 33001A".split(" "),ColorDialog.prototype.createApplyFunction=function(){return mxUtils.bind(this,function(t){var e=this.editorUi.editor.graph;e.getModel().beginUpdate();try{e.setCellStyles(this.currentColorKey,t),this.editorUi.fireEvent(new mxEventObject("styleChanged","keys",[this.currentColorKey],"values",[t],"cells",e.getSelectionCells()))}finally{e.getModel().endUpdate()}})},ColorDialog.recentColors=[],ColorDialog.addRecentColor=function(t,e){null!=t&&(mxUtils.remove(t,ColorDialog.recentColors),ColorDialog.recentColors.splice(0,0,t),ColorDialog.recentColors.length>=e&&ColorDialog.recentColors.pop())},ColorDialog.resetRecentColors=function(){ColorDialog.recentColors=[]};var AboutDialog=function(t){var e=document.createElement("div");e.setAttribute("align","center");var n=document.createElement("h3");mxUtils.write(n,mxResources.get("about")+" GraphEditor"),e.appendChild(n),(n=document.createElement("img")).style.border="0px",n.setAttribute("width","176"),n.setAttribute("width","151"),n.setAttribute("src",IMAGE_PATH+"/logo.png"),e.appendChild(n),mxUtils.br(e),mxUtils.write(e,"Powered by mxGraph "+mxClient.VERSION),mxUtils.br(e),(n=document.createElement("a")).setAttribute("href","http://www.jgraph.com/"),n.setAttribute("target","_blank"),mxUtils.write(n,"www.jgraph.com"),e.appendChild(n),mxUtils.br(e),mxUtils.br(e),(n=mxUtils.button(mxResources.get("close"),function(){t.hideDialog()})).className="geBtn gePrimaryBtn",e.appendChild(n),this.container=e},TextareaDialog=function(t,e,n,i,l,o,s,r,a,h,u,d,c,p){s=null!=s?s:300,r=null!=r?r:120,h=null!=h&&h;var m=document.createElement("table"),g=document.createElement("tbody"),x=document.createElement("tr");(y=document.createElement("td")).style.fontSize="10pt",y.style.width="100px",mxUtils.write(y,e),x.appendChild(y),g.appendChild(x),x=document.createElement("tr");var y=document.createElement("td"),f=document.createElement("textarea");if(u&&f.setAttribute("wrap","off"),f.setAttribute("spellcheck","false"),f.setAttribute("autocorrect","off"),f.setAttribute("autocomplete","off"),f.setAttribute("autocapitalize","off"),mxUtils.write(f,n||""),f.style.resize="none",f.style.width=s+"px",f.style.height=r+"px",this.textarea=f,this.init=function(){f.focus(),f.scrollTop=0},y.appendChild(f),x.appendChild(y),g.appendChild(x),x=document.createElement("tr"),(y=document.createElement("td")).style.paddingTop="14px",y.style.whiteSpace="nowrap",y.setAttribute("align","right"),null!=c&&((e=mxUtils.button(mxResources.get("help"),function(){t.editor.graph.openLink(c)})).className="geBtn",y.appendChild(e)),null!=p)for(e=0;e<p.length;e++)!function(t,e){(t=mxUtils.button(t,function(t){e(t,f)})).className="geBtn",y.appendChild(t)}(p[e][0],p[e][1]);(o=mxUtils.button(o||mxResources.get("cancel"),function(){t.hideDialog(),null!=l&&l()})).className="geBtn",t.editor.cancelFirst&&y.appendChild(o),null!=a&&a(y,f),null!=i&&((a=mxUtils.button(d||mxResources.get("apply"),function(){h||t.hideDialog(),i(f.value)})).className="geBtn gePrimaryBtn",y.appendChild(a)),t.editor.cancelFirst||y.appendChild(o),x.appendChild(y),g.appendChild(x),m.appendChild(g),this.container=m},EditDiagramDialog=function(t){var e=document.createElement("div");e.style.textAlign="right";var n=document.createElement("textarea");n.setAttribute("wrap","off"),n.setAttribute("spellcheck","false"),n.setAttribute("autocorrect","off"),n.setAttribute("autocomplete","off"),n.setAttribute("autocapitalize","off"),n.style.overflow="auto",n.style.resize="none",n.style.width="600px",n.style.height="360px",n.style.marginBottom="16px",n.value=mxUtils.getPrettyXml(t.editor.getGraphXml()),e.appendChild(n),this.init=function(){n.focus()},Graph.fileSupport&&(n.addEventListener("dragover",function(t){t.stopPropagation(),t.preventDefault()},!1),n.addEventListener("drop",function(e){var i;e.stopPropagation(),e.preventDefault(),0<e.dataTransfer.files.length?(e=e.dataTransfer.files[0],(i=new FileReader).onload=function(t){n.value=t.target.result},i.readAsText(e)):n.value=t.extractGraphModelFromEvent(e)},!1));var i=mxUtils.button(mxResources.get("cancel"),function(){t.hideDialog()});i.className="geBtn",t.editor.cancelFirst&&e.appendChild(i);var l,o=document.createElement("select");o.style.width="180px",o.className="geBtn",t.editor.graph.isEnabled()&&((l=document.createElement("option")).setAttribute("value","replace"),mxUtils.write(l,mxResources.get("replaceExistingDrawing")),o.appendChild(l)),(l=document.createElement("option")).setAttribute("value","new"),mxUtils.write(l,mxResources.get("openInNewWindow")),EditDiagramDialog.showNewWindowOption&&o.appendChild(l),t.editor.graph.isEnabled()&&((l=document.createElement("option")).setAttribute("value","import"),mxUtils.write(l,mxResources.get("addToExistingDrawing")),o.appendChild(l)),e.appendChild(o),(l=mxUtils.button(mxResources.get("ok"),function(){var e=Graph.zapGremlins(mxUtils.trim(n.value)),i=null;if("new"==o.value)t.hideDialog(),t.editor.editAsNew(e);else if("replace"==o.value){t.editor.graph.model.beginUpdate();try{t.editor.setGraphXml(mxUtils.parseXml(e).documentElement),t.hideDialog()}catch(e){i=e}finally{t.editor.graph.model.endUpdate()}}else if("import"==o.value){t.editor.graph.model.beginUpdate();try{var l=mxUtils.parseXml(e),s=new mxGraphModel;new mxCodec(l).decode(l.documentElement,s);var r=s.getChildren(s.getChildAt(s.getRoot(),0));t.editor.graph.setSelectionCells(t.editor.graph.importCells(r)),t.hideDialog()}catch(e){i=e}finally{t.editor.graph.model.endUpdate()}}null!=i&&mxUtils.alert(i.message)})).className="geBtn gePrimaryBtn",e.appendChild(l),t.editor.cancelFirst||e.appendChild(i),this.container=e};EditDiagramDialog.showNewWindowOption=!0;var ExportDialog=function(t){function e(){var t=u.value,e=t.lastIndexOf(".");u.value=0<e?t.substring(0,e+1)+d.value:t+"."+d.value,"xml"===d.value?(c.setAttribute("disabled","true"),p.setAttribute("disabled","true"),m.setAttribute("disabled","true"),b.setAttribute("disabled","true")):(c.removeAttribute("disabled"),p.removeAttribute("disabled"),m.removeAttribute("disabled"),b.removeAttribute("disabled")),"png"===d.value||"svg"===d.value||"pdf"===d.value?f.removeAttribute("disabled"):f.setAttribute("disabled","disabled"),"png"===d.value||"jpg"===d.value||"pdf"===d.value?v.removeAttribute("disabled"):v.setAttribute("disabled","disabled"),"png"===d.value?(g.removeAttribute("disabled"),x.removeAttribute("disabled")):(g.setAttribute("disabled","disabled"),x.setAttribute("disabled","disabled"))}function n(){p.style.backgroundColor=p.value*m.value>MAX_AREA||p.value<=0?"red":"",m.style.backgroundColor=p.value*m.value>MAX_AREA||m.value<=0?"red":""}var i=t.editor.graph,l=i.getGraphBounds(),o=i.view.scale,s=Math.ceil(l.width/o),r=Math.ceil(l.height/o),a=(o=document.createElement("table"),document.createElement("tbody"));o.setAttribute("cellpadding",mxClient.IS_SF?"0":"2"),l=document.createElement("tr");var h=document.createElement("td");h.style.fontSize="10pt",h.style.width="100px",mxUtils.write(h,mxResources.get("filename")+":"),l.appendChild(h);var u=document.createElement("input");u.setAttribute("value",t.editor.getOrCreateFilename()),u.style.width="180px",(h=document.createElement("td")).appendChild(u),l.appendChild(h),a.appendChild(l),l=document.createElement("tr"),(h=document.createElement("td")).style.fontSize="10pt",mxUtils.write(h,mxResources.get("format")+":"),l.appendChild(h);var d=document.createElement("select");d.style.width="180px",(h=document.createElement("option")).setAttribute("value","png"),mxUtils.write(h,mxResources.get("formatPng")),d.appendChild(h),h=document.createElement("option"),ExportDialog.showGifOption&&(h.setAttribute("value","gif"),mxUtils.write(h,mxResources.get("formatGif")),d.appendChild(h)),(h=document.createElement("option")).setAttribute("value","jpg"),mxUtils.write(h,mxResources.get("formatJpg")),d.appendChild(h),(h=document.createElement("option")).setAttribute("value","pdf"),mxUtils.write(h,mxResources.get("formatPdf")),d.appendChild(h),(h=document.createElement("option")).setAttribute("value","svg"),mxUtils.write(h,mxResources.get("formatSvg")),d.appendChild(h),ExportDialog.showXmlOption&&((h=document.createElement("option")).setAttribute("value","xml"),mxUtils.write(h,mxResources.get("formatXml")),d.appendChild(h)),(h=document.createElement("td")).appendChild(d),l.appendChild(h),a.appendChild(l),l=document.createElement("tr"),(h=document.createElement("td")).style.fontSize="10pt",mxUtils.write(h,mxResources.get("zoom")+" (%):"),l.appendChild(h);var c=document.createElement("input");c.setAttribute("type","number"),c.setAttribute("value","100"),c.style.width="180px",(h=document.createElement("td")).appendChild(c),l.appendChild(h),a.appendChild(l),l=document.createElement("tr"),(h=document.createElement("td")).style.fontSize="10pt",mxUtils.write(h,mxResources.get("width")+":"),l.appendChild(h);var p=document.createElement("input");p.setAttribute("value",s),p.style.width="180px",(h=document.createElement("td")).appendChild(p),l.appendChild(h),a.appendChild(l),l=document.createElement("tr"),(h=document.createElement("td")).style.fontSize="10pt",mxUtils.write(h,mxResources.get("height")+":"),l.appendChild(h);var m=document.createElement("input");m.setAttribute("value",r),m.style.width="180px",(h=document.createElement("td")).appendChild(m),l.appendChild(h),a.appendChild(l),l=document.createElement("tr"),(h=document.createElement("td")).style.fontSize="10pt",mxUtils.write(h,mxResources.get("dpi")+":"),l.appendChild(h);var g=document.createElement("select");g.style.width="180px",(h=document.createElement("option")).setAttribute("value","100"),mxUtils.write(h,"100dpi"),g.appendChild(h),(h=document.createElement("option")).setAttribute("value","200"),mxUtils.write(h,"200dpi"),g.appendChild(h),(h=document.createElement("option")).setAttribute("value","300"),mxUtils.write(h,"300dpi"),g.appendChild(h),(h=document.createElement("option")).setAttribute("value","400"),mxUtils.write(h,"400dpi"),g.appendChild(h),(h=document.createElement("option")).setAttribute("value","custom"),mxUtils.write(h,mxResources.get("custom")),g.appendChild(h);var x=document.createElement("input");x.style.width="180px",x.style.display="none",x.setAttribute("value","100"),x.setAttribute("type","number"),x.setAttribute("min","50"),x.setAttribute("step","50");var y=!1;mxEvent.addListener(g,"change",function(){"custom"==this.value?(this.style.display="none",x.style.display="",x.focus()):(x.value=this.value,y||(c.value=this.value))}),mxEvent.addListener(x,"change",function(){var t=parseInt(x.value);isNaN(t)||t<=0?x.style.backgroundColor="red":(x.style.backgroundColor="",y||(c.value=t))}),(h=document.createElement("td")).appendChild(g),h.appendChild(x),l.appendChild(h),a.appendChild(l),l=document.createElement("tr"),(h=document.createElement("td")).style.fontSize="10pt",mxUtils.write(h,mxResources.get("background")+":"),l.appendChild(h);var f=document.createElement("input");f.setAttribute("type","checkbox"),f.checked=null==i.background||i.background==mxConstants.NONE,(h=document.createElement("td")).appendChild(f),mxUtils.write(h,mxResources.get("transparent")),l.appendChild(h),a.appendChild(l),l=document.createElement("tr"),(h=document.createElement("td")).style.fontSize="10pt",mxUtils.write(h,mxResources.get("grid")+":"),l.appendChild(h);var v=document.createElement("input");v.setAttribute("type","checkbox"),v.checked=!1,(h=document.createElement("td")).appendChild(v),l.appendChild(h),a.appendChild(l),l=document.createElement("tr"),(h=document.createElement("td")).style.fontSize="10pt",mxUtils.write(h,mxResources.get("borderWidth")+":"),l.appendChild(h);var b=document.createElement("input");b.setAttribute("type","number"),b.setAttribute("value",ExportDialog.lastBorderValue),b.style.width="180px",(h=document.createElement("td")).appendChild(b),l.appendChild(h),a.appendChild(l),o.appendChild(a),mxEvent.addListener(d,"change",e),e(),mxEvent.addListener(c,"change",function(){y=!0;var t=Math.max(0,parseFloat(c.value)||100)/100;c.value=parseFloat((100*t).toFixed(2)),0<s?(p.value=Math.floor(s*t),m.value=Math.floor(r*t)):(c.value="100",p.value=s,m.value=r),n()}),mxEvent.addListener(p,"change",function(){var t=parseInt(p.value)/s;0<t?(c.value=parseFloat((100*t).toFixed(2)),m.value=Math.floor(r*t)):(c.value="100",p.value=s,m.value=r),n()}),mxEvent.addListener(m,"change",function(){var t=parseInt(m.value)/r;0<t?(c.value=parseFloat((100*t).toFixed(2)),p.value=Math.floor(s*t)):(c.value="100",p.value=s,m.value=r),n()}),l=document.createElement("tr"),(h=document.createElement("td")).setAttribute("align","right"),h.style.paddingTop="22px",h.colSpan=2;var C=mxUtils.button(mxResources.get("export"),mxUtils.bind(this,function(){var e,n,l,o,s,r;parseInt(c.value)<=0?mxUtils.alert(mxResources.get("drawingEmpty")):(e=u.value,n=d.value,l=Math.max(0,parseFloat(c.value)||100)/100,o=Math.max(0,parseInt(b.value)),s=i.background,r=Math.max(1,parseInt(x.value)),"svg"!=n&&"png"!=n&&"pdf"!=n||!f.checked?null!=s&&s!=mxConstants.NONE||(s="#ffffff"):s=null,ExportDialog.lastBorderValue=o,ExportDialog.exportFile(t,e,n,s,l,o,r,v.checked))}));C.className="geBtn gePrimaryBtn";var E=mxUtils.button(mxResources.get("cancel"),function(){t.hideDialog()});E.className="geBtn",t.editor.cancelFirst?(h.appendChild(E),h.appendChild(C)):(h.appendChild(C),h.appendChild(E)),l.appendChild(h),a.appendChild(l),o.appendChild(a),this.container=o};ExportDialog.lastBorderValue=0,ExportDialog.showGifOption=!0,ExportDialog.showXmlOption=!0,ExportDialog.exportFile=function(t,e,n,i,l,o,s,r){var a,h,u;r=t.editor.graph,"xml"==n?ExportDialog.saveLocalFile(t,mxUtils.getXml(t.editor.getGraphXml()),e,n):"svg"==n?ExportDialog.saveLocalFile(t,mxUtils.getXml(r.getSvg(i,l,o)),e,n):(a=r.getGraphBounds(),u=(h=mxUtils.createXmlDocument()).createElement("output"),h.appendChild(u),(h=new mxXmlCanvas2D(u)).translate(Math.floor((o/l-a.x)/r.view.scale),Math.floor((o/l-a.y)/r.view.scale)),h.scale(l/r.view.scale),(new mxImageExport).drawState(r.getView().getState(r.model.root),h),u="xml="+encodeURIComponent(mxUtils.getXml(u)),h=Math.ceil(a.width*l/r.view.scale+2*o),l=Math.ceil(a.height*l/r.view.scale+2*o),u.length<=MAX_REQUEST_SIZE&&h*l<MAX_AREA?(t.hideDialog(),new mxXmlRequest(EXPORT_URL,"format="+n+"&filename="+encodeURIComponent(e)+"&bg="+(null!=i?i:"none")+"&w="+h+"&h="+l+"&"+u+"&dpi="+s).simulate(document,"_blank")):mxUtils.alert(mxResources.get("drawingTooLarge")))},ExportDialog.saveLocalFile=function(t,e,n,i){e.length<MAX_REQUEST_SIZE?(t.hideDialog(),new mxXmlRequest(SAVE_URL,"xml="+encodeURIComponent(e)+"&filename="+encodeURIComponent(n)+"&format="+i).simulate(document,"_blank")):(mxUtils.alert(mxResources.get("drawingTooLarge")),mxUtils.popup(xml))};var EditDataDialog=function(t,e){function n(){0<f.value.length?b.removeAttribute("disabled"):b.setAttribute("disabled","disabled")}var i=document.createElement("div"),l=t.editor.graph,o=l.getModel().getValue(e);mxUtils.isNode(o)||((m=mxUtils.createXmlDocument().createElement("object")).setAttribute("label",o||""),o=m);var s={};try{null!=(g=mxUtils.getValue(t.editor.graph.getCurrentCellStyle(e),"metaData",null))&&(s=JSON.parse(g))}catch(n){}var r=new mxForm("properties");function a(t,e){var n=document.createElement("div");n.style.position="relative",n.style.paddingRight="20px",n.style.boxSizing="border-box",n.style.width="100%";var i,l=document.createElement("a"),o=mxUtils.createImage(Dialog.prototype.closeImage);o.style.height="9px",o.style.fontSize="9px",o.style.marginBottom=mxClient.IS_IE11?"-1px":"5px",l.className="geButton",l.setAttribute("title",mxResources.get("delete")),l.style.position="absolute",l.style.top="4px",l.style.right="0px",l.style.margin="0px",l.style.width="9px",l.style.height="9px",l.style.cursor="pointer",l.appendChild(o),i=e,mxEvent.addListener(l,"click",e=function(){for(var t=0,e=0;e<u.length;e++){if(u[e]==i){d[e]=null,r.table.deleteRow(t+(null!=p?1:0));break}null!=d[e]&&t++}}),e=t.parentNode,n.appendChild(t),n.appendChild(l),e.appendChild(n)}r.table.style.width="100%";for(var h=o.attributes,u=[],d=[],c=0,p=null!=EditDataDialog.getDisplayIdForCell?EditDataDialog.getDisplayIdForCell(t,e):null,m=function(t,e,n){u[t]=e,d[t]=r.addTextarea(u[c]+":",n,2),d[t].style.width="100%",0<n.indexOf("\n")&&d[t].setAttribute("rows","2"),a(d[t],e),null!=s[e]&&0==s[e].editable&&d[t].setAttribute("disabled","disabled")},g=[],x=l.getModel().getParent(e)==l.getModel().getRoot(),y=0;y<h.length;y++)!x&&"label"==h[y].nodeName||"placeholders"==h[y].nodeName||g.push({name:h[y].nodeName,value:h[y].nodeValue});for(g.sort(function(t,e){return t.name<e.name?-1:t.name>e.name?1:0}),null!=p&&((h=document.createElement("div")).style.width="100%",h.style.fontSize="11px",h.style.textAlign="center",mxUtils.write(h,p),r.addField(mxResources.get("id")+":",h)),y=0;y<g.length;y++)m(c,g[y].name,g[y].value),c++;(g=document.createElement("div")).style.cssText="position:absolute;left:30px;right:30px;overflow-y:auto;top:30px;bottom:80px;",g.appendChild(r.table),(m=document.createElement("div")).style.boxSizing="border-box",m.style.paddingRight="160px",m.style.whiteSpace="nowrap",m.style.marginTop="6px",m.style.width="100%";var f=document.createElement("input");f.setAttribute("placeholder",mxResources.get("enterPropertyName")),f.setAttribute("type","text"),f.setAttribute("size",mxClient.IS_IE||mxClient.IS_IE11?"36":"40"),f.style.boxSizing="border-box",f.style.marginLeft="2px",f.style.width="100%",m.appendChild(f),g.appendChild(m),i.appendChild(g);var v,b=mxUtils.button(mxResources.get("addProperty"),function(){var t=f.value;if(0<t.length&&"label"!=t&&"placeholders"!=t&&t.indexOf(":")<0)try{var e,n=mxUtils.indexOf(u,t);0<=n&&null!=d[n]?d[n].focus():(o.cloneNode(!1).setAttribute(t,""),0<=n&&(u.splice(n,1),d.splice(n,1)),u.push(t),(e=r.addTextarea(t+":","",2)).style.width="100%",d.push(e),a(e,t),e.focus()),b.setAttribute("disabled","disabled"),f.value=""}catch(t){mxUtils.alert(t)}else mxUtils.alert(mxResources.get("invalidName"))});this.init=function(){(0<d.length?d[0]:f).focus()},b.setAttribute("title",mxResources.get("addProperty")),b.setAttribute("disabled","disabled"),b.style.textOverflow="ellipsis",b.style.position="absolute",b.style.overflow="hidden",b.style.width="144px",b.style.right="0px",b.className="geBtn",m.appendChild(b),(g=mxUtils.button(mxResources.get("cancel"),function(){t.hideDialog.apply(t,arguments)})).className="geBtn",(m=mxUtils.button(mxResources.get("apply"),function(){try{t.hideDialog.apply(t,arguments),o=o.cloneNode(!0);for(var n=!1,i=0;i<u.length;i++)null==d[i]?o.removeAttribute(u[i]):(o.setAttribute(u[i],d[i].value),n=n||"placeholder"==u[i]&&"1"==o.getAttribute("placeholders"));n&&o.removeAttribute("label"),l.getModel().setValue(e,o)}catch(n){mxUtils.alert(n)}})).className="geBtn gePrimaryBtn",mxEvent.addListener(f,"keyup",n),mxEvent.addListener(f,"change",n),(h=document.createElement("div")).style.cssText="position:absolute;left:30px;right:30px;text-align:right;bottom:30px;height:40px;",(t.editor.graph.getModel().isVertex(e)||t.editor.graph.getModel().isEdge(e))&&((x=document.createElement("span")).style.marginRight="10px",(y=document.createElement("input")).setAttribute("type","checkbox"),y.style.marginRight="6px","1"==o.getAttribute("placeholders")&&(y.setAttribute("checked","checked"),y.defaultChecked=!0),mxEvent.addListener(y,"click",function(){"1"==o.getAttribute("placeholders")?o.removeAttribute("placeholders"):o.setAttribute("placeholders","1")}),x.appendChild(y),mxUtils.write(x,mxResources.get("placeholders")),null!=EditDataDialog.placeholderHelpLink&&((y=document.createElement("a")).setAttribute("href",EditDataDialog.placeholderHelpLink),y.setAttribute("title",mxResources.get("help")),y.setAttribute("target","_blank"),y.style.marginLeft="8px",y.style.cursor="help",v=document.createElement("img"),mxUtils.setOpacity(v,50),v.style.height="16px",v.style.width="16px",v.setAttribute("border","0"),v.setAttribute("valign","middle"),v.style.marginTop=mxClient.IS_IE11?"0px":"-4px",v.setAttribute("src",Editor.helpImage),y.appendChild(v),x.appendChild(y)),h.appendChild(x)),t.editor.cancelFirst?(h.appendChild(g),h.appendChild(m)):(h.appendChild(m),h.appendChild(g)),i.appendChild(h),this.container=i};EditDataDialog.getDisplayIdForCell=function(t,e){return null!=t.editor.graph.getModel().getParent(e)?e.getId():null},EditDataDialog.placeholderHelpLink=null;var LinkDialog=function(t,e,n,i){var l=document.createElement("div");mxUtils.write(l,mxResources.get("editLink")+":");var o=document.createElement("div");o.className="geTitle",o.style.backgroundColor="transparent",o.style.borderColor="transparent",o.style.whiteSpace="nowrap",o.style.textOverflow="clip",o.style.cursor="default",o.style.paddingRight="20px";var s=document.createElement("input");s.setAttribute("value",e),s.setAttribute("placeholder","http://www.example.com/"),s.setAttribute("type","text"),s.style.marginTop="6px",s.style.width="400px",s.style.backgroundImage="url('"+Dialog.prototype.clearImage+"')",s.style.backgroundRepeat="no-repeat",s.style.backgroundPosition="100% 50%",s.style.paddingRight="14px",(e=document.createElement("div")).setAttribute("title",mxResources.get("reset")),e.style.position="relative",e.style.left="-16px",e.style.width="12px",e.style.height="14px",e.style.cursor="pointer",e.style.display="inline-block",e.style.top="3px",e.style.background="url("+IMAGE_PATH+"/transparent.gif)",mxEvent.addListener(e,"click",function(){s.value="",s.focus()}),o.appendChild(s),o.appendChild(e),l.appendChild(o),this.init=function(){s.focus(),mxClient.IS_GC||mxClient.IS_FF||5<=document.documentMode?s.select():document.execCommand("selectAll",!1,null)},(o=document.createElement("div")).style.marginTop="18px",o.style.textAlign="right",mxEvent.addListener(s,"keypress",function(e){13==e.keyCode&&(t.hideDialog(),i(s.value))}),(e=mxUtils.button(mxResources.get("cancel"),function(){t.hideDialog()})).className="geBtn",t.editor.cancelFirst&&o.appendChild(e),(n=mxUtils.button(n,function(){t.hideDialog(),i(s.value)})).className="geBtn gePrimaryBtn",o.appendChild(n),t.editor.cancelFirst||o.appendChild(e),l.appendChild(o),this.container=l},OutlineWindow=function(t,e,n,i,l){function o(){h.outline.pageScale=s.pageScale,h.outline.pageFormat=s.pageFormat,h.outline.pageVisible=s.pageVisible,h.outline.background=null==s.background||s.background==mxConstants.NONE?s.defaultPageBackgroundColor:s.background;var t=mxUtils.getCurrentStyle(s.container);r.style.backgroundColor=t.backgroundColor,null!=s.view.backgroundPageShape&&null!=h.outline.view.backgroundPageShape&&(h.outline.view.backgroundPageShape.fill=s.view.backgroundPageShape.fill),h.outline.refresh()}var s=t.editor.graph,r=document.createElement("div");r.style.position="absolute",r.style.width="100%",r.style.height="100%",r.style.border="1px solid whiteSmoke",r.style.overflow="hidden",this.window=new mxWindow(mxResources.get("outline"),r,e,n,i,l,!0,!0),this.window.minimumSize=new mxRectangle(0,0,80,80),this.window.destroyOnClose=!1,this.window.setMaximizable(!1),this.window.setResizable(!0),this.window.setClosable(!0),this.window.setVisible(!0),this.window.setLocation=function(t,e){var n=window.innerHeight||document.body.clientHeight||document.documentElement.clientHeight;t=Math.max(0,Math.min(t,(window.innerWidth||document.body.clientWidth||document.documentElement.clientWidth)-this.table.clientWidth)),e=Math.max(0,Math.min(e,n-this.table.clientHeight-48)),this.getX()==t&&this.getY()==e||mxWindow.prototype.setLocation.apply(this,arguments)};var a=mxUtils.bind(this,function(){var t=this.window.getX(),e=this.window.getY();this.window.setLocation(t,e)});mxEvent.addListener(window,"resize",a);var h=t.createOutline(this.window);this.destroy=function(){mxEvent.removeListener(window,"resize",a),this.window.destroy(),h.destroy()},this.window.addListener(mxEvent.RESIZE,mxUtils.bind(this,function(){h.update(!1),h.outline.sizeDidChange()})),this.window.addListener(mxEvent.SHOW,mxUtils.bind(this,function(){this.window.fit(),h.suspended=!1,h.outline.refresh(),h.update()})),this.window.addListener(mxEvent.HIDE,mxUtils.bind(this,function(){h.suspended=!0})),this.window.addListener(mxEvent.NORMALIZE,mxUtils.bind(this,function(){h.suspended=!1,h.update()})),this.window.addListener(mxEvent.MINIMIZE,mxUtils.bind(this,function(){h.suspended=!0}));var u,d,c=h.createGraph;h.createGraph=function(t){var e=c.apply(this,arguments);e.gridEnabled=!1,e.pageScale=s.pageScale,e.pageFormat=s.pageFormat,e.background=null==s.background||s.background==mxConstants.NONE?s.defaultPageBackgroundColor:s.background,e.pageVisible=s.pageVisible;var n=mxUtils.getCurrentStyle(s.container);return r.style.backgroundColor=n.backgroundColor,e},h.init(r),t.editor.addListener("resetGraphView",o),t.addListener("pageFormatChanged",o),t.addListener("backgroundColorChanged",o),t.addListener("backgroundImageChanged",o),t.addListener("pageViewChanged",function(){o(),h.update(!0)}),h.outline.dialect==mxConstants.DIALECT_SVG&&(u=t.actions.get("zoomIn"),d=t.actions.get("zoomOut"),mxEvent.addMouseWheelListener(function(t,e){var n=!1;for(t=mxEvent.getSource(t);null!=t;){if(h&&h.outline&&t==h.outline.view.canvas.ownerSVGElement){n=!0;break}t=t.parentNode}n&&(e?u:d).funct()}))},LayersWindow=function(t,e,n,i,l){function o(){function e(e,n,i,l){var o=document.createElement("div");o.className="geToolbarContainer",o.style.overflow="hidden",o.style.position="relative",o.style.padding="4px",o.style.height="22px",o.style.display="block",o.style.backgroundColor="white"==Dialog.backdropColor?"whiteSmoke":Dialog.backdropColor,o.style.borderWidth="0px 0px 1px 0px",o.style.borderColor="#c3c3c3",o.style.borderStyle="solid",o.style.whiteSpace="nowrap",o.setAttribute("title",n);var r=document.createElement("div");r.style.display="inline-block",r.style.width="100%",r.style.textOverflow="ellipsis",r.style.overflow="hidden",mxEvent.addListener(o,"dragover",function(t){t.dataTransfer.dropEffect="move",d=e,t.stopPropagation(),t.preventDefault()}),mxEvent.addListener(o,"dragstart",function(t){u=o,mxClient.IS_FF&&t.dataTransfer.setData("Text","<layer/>")}),mxEvent.addListener(o,"dragend",function(t){null!=u&&null!=d&&s.addCell(i,s.model.root,d),d=u=null,t.stopPropagation(),t.preventDefault()});var a=document.createElement("img");a.setAttribute("draggable","false"),a.setAttribute("align","top"),a.setAttribute("border","0"),a.style.padding="4px",a.setAttribute("title",mxResources.get("lockUnlock"));var m=s.getCurrentCellStyle(i);"1"==mxUtils.getValue(m,"locked","0")?a.setAttribute("src",Dialog.prototype.lockedImage):a.setAttribute("src",Dialog.prototype.unlockedImage),s.isEnabled()&&(a.style.cursor="pointer"),mxEvent.addListener(a,"click",function(t){if(s.isEnabled()){var e=null;s.getModel().beginUpdate();try{e="1"==mxUtils.getValue(m,"locked","0")?null:"1",s.setCellStyles("locked",e,[i])}finally{s.getModel().endUpdate()}"1"==e&&s.removeSelectionCells(s.getModel().getDescendants(i)),mxEvent.consume(t)}}),r.appendChild(a),(a=document.createElement("input")).setAttribute("type","checkbox"),a.setAttribute("title",mxResources.get(s.model.isVisible(i)?"hide":"show")),a.style.marginLeft="4px",a.style.marginRight="6px",a.style.marginTop="4px",r.appendChild(a),s.model.isVisible(i)&&(a.setAttribute("checked","checked"),a.defaultChecked=!0),mxEvent.addListener(a,"click",function(t){s.model.setVisible(i,!s.model.isVisible(i)),mxEvent.consume(t)}),mxUtils.write(r,n),o.appendChild(r),s.isEnabled()&&((mxClient.IS_TOUCH||mxClient.IS_POINTER||mxClient.IS_IE&&document.documentMode<10)&&((n=document.createElement("div")).style.display="block",n.style.textAlign="right",n.style.whiteSpace="nowrap",n.style.position="absolute",n.style.right="6px",n.style.top="6px",0<e&&((r=document.createElement("a")).setAttribute("title",mxResources.get("toBack")),r.className="geButton",r.style.cssFloat="none",r.innerHTML="&#9660;",r.style.width="14px",r.style.height="14px",r.style.fontSize="14px",r.style.margin="0px",r.style.marginTop="-1px",n.appendChild(r),mxEvent.addListener(r,"click",function(t){s.isEnabled()&&s.addCell(i,s.model.root,e-1),mxEvent.consume(t)})),0<=e&&e<c-1&&((r=document.createElement("a")).setAttribute("title",mxResources.get("toFront")),r.className="geButton",r.style.cssFloat="none",r.innerHTML="&#9650;",r.style.width="14px",r.style.height="14px",r.style.fontSize="14px",r.style.margin="0px",r.style.marginTop="-1px",n.appendChild(r),mxEvent.addListener(r,"click",function(t){s.isEnabled()&&s.addCell(i,s.model.root,e+1),mxEvent.consume(t)})),o.appendChild(n)),mxClient.IS_SVG&&(!mxClient.IS_IE||10<=document.documentMode)&&(o.setAttribute("draggable","true"),o.style.cursor="move")),mxEvent.addListener(o,"dblclick",function(e){var n=mxEvent.getSource(e).nodeName;"INPUT"!=n&&"IMG"!=n&&(function(e){var n;s.isEnabled()&&null!=e&&(n=s.convertValueToString(e),n=new FilenameDialog(t,n||mxResources.get("background"),mxResources.get("rename"),mxUtils.bind(this,function(t){null!=t&&s.cellLabelChanged(e,t)}),mxResources.get("enterName")),t.showDialog(n.container,300,100,!0,!0),n.init())}(i),mxEvent.consume(e))}),s.getDefaultParent()==i?(o.style.background="white"==Dialog.backdropColor?"#e6eff8":"#505759",o.style.fontWeight=s.isEnabled()?"bold":"",p=i):mxEvent.addListener(o,"click",function(t){s.isEnabled()&&(s.setDefaultParent(l),s.view.setCurrentRoot(null))}),h.appendChild(o)}c=s.model.getChildCount(s.model.root),h.innerHTML="";for(var n=c-1;0<=n;n--)mxUtils.bind(this,function(t){e(n,s.convertValueToString(t)||mxResources.get("background"),t,t)})(s.model.getChildAt(s.model.root,n));var i=s.convertValueToString(p)||mxResources.get("background");g.setAttribute("title",mxResources.get("removeIt",[i])),f.setAttribute("title",mxResources.get("duplicateIt",[i])),y.setAttribute("title",mxResources.get("editData")),s.isSelectionEmpty()&&(x.className="geButton mxDisabled")}var s=t.editor.graph,r=document.createElement("div");r.style.userSelect="none",r.style.background="white"==Dialog.backdropColor?"whiteSmoke":Dialog.backdropColor,r.style.border="1px solid whiteSmoke",r.style.height="100%",r.style.marginBottom="10px",r.style.overflow="auto";var a=EditorUi.compactUi?"26px":"30px",h=document.createElement("div");h.style.backgroundColor="white"==Dialog.backdropColor?"#dcdcdc":Dialog.backdropColor,h.style.position="absolute",h.style.overflow="auto",h.style.left="0px",h.style.right="0px",h.style.top="0px",h.style.bottom=parseInt(a)+7+"px",r.appendChild(h);var u=null,d=null;mxEvent.addListener(r,"dragover",function(t){t.dataTransfer.dropEffect="move",d=0,t.stopPropagation(),t.preventDefault()}),mxEvent.addListener(r,"drop",function(t){t.stopPropagation(),t.preventDefault()});var c=null,p=null,m=document.createElement("div");m.className="geToolbarContainer",m.style.position="absolute",m.style.bottom="0px",m.style.left="0px",m.style.right="0px",m.style.height=a,m.style.overflow="hidden",m.style.padding=EditorUi.compactUi?"4px 0px 3px 0px":"1px",m.style.backgroundColor="white"==Dialog.backdropColor?"whiteSmoke":Dialog.backdropColor,m.style.borderWidth="1px 0px 0px 0px",m.style.borderColor="#c3c3c3",m.style.borderStyle="solid",m.style.display="block",m.style.whiteSpace="nowrap",(a=document.createElement("a")).className="geButton";var g=a.cloneNode();g.innerHTML='<div class="geSprite geSprite-delete" style="display:inline-block;"></div>',mxEvent.addListener(g,"click",function(t){if(s.isEnabled()){s.model.beginUpdate();try{var e=s.model.root.getIndex(p);s.removeCells([p],!1),0==s.model.getChildCount(s.model.root)?(s.model.add(s.model.root,new mxCell),s.setDefaultParent(null)):0<e&&e<=s.model.getChildCount(s.model.root)?s.setDefaultParent(s.model.getChildAt(s.model.root,e-1)):s.setDefaultParent(null)}finally{s.model.endUpdate()}}mxEvent.consume(t)}),s.isEnabled()||(g.className="geButton mxDisabled"),m.appendChild(g);var x=a.cloneNode();x.setAttribute("title",mxUtils.trim(mxResources.get("moveSelectionTo",["..."]))),x.innerHTML='<div class="geSprite geSprite-insert" style="display:inline-block;"></div>',mxEvent.addListener(x,"click",function(e){var n;s.isEnabled()&&!s.isSelectionEmpty()&&(n=mxUtils.getOffset(x),t.showPopupMenu(mxUtils.bind(this,function(t,e){for(var n=c-1;0<=n;n--)mxUtils.bind(this,function(n){var i=t.addItem(s.convertValueToString(n)||mxResources.get("background"),null,mxUtils.bind(this,function(){s.moveCells(s.getSelectionCells(),0,0,!1,n)}),e);1==s.getSelectionCount()&&s.model.isAncestor(n,s.getSelectionCell())&&t.addCheckmark(i,Editor.checkmarkImage)})(s.model.getChildAt(s.model.root,n))}),n.x,n.y+x.offsetHeight,e))}),m.appendChild(x);var y=a.cloneNode();y.innerHTML='<div class="geSprite geSprite-dots" style="display:inline-block;"></div>',y.setAttribute("title",mxResources.get("rename")),mxEvent.addListener(y,"click",function(e){s.isEnabled()&&t.showDataDialog(p),mxEvent.consume(e)}),s.isEnabled()||(y.className="geButton mxDisabled"),m.appendChild(y);var f=a.cloneNode();f.innerHTML='<div class="geSprite geSprite-duplicate" style="display:inline-block;"></div>',mxEvent.addListener(f,"click",function(t){if(s.isEnabled()){t=null,s.model.beginUpdate();try{t=s.cloneCell(p),s.cellLabelChanged(t,mxResources.get("untitledLayer")),t.setVisible(!0),t=s.addCell(t,s.model.root),s.setDefaultParent(t)}finally{s.model.endUpdate()}null==t||s.isCellLocked(t)||s.selectAll(t)}}),s.isEnabled()||(f.className="geButton mxDisabled"),m.appendChild(f),(a=a.cloneNode()).innerHTML='<div class="geSprite geSprite-plus" style="display:inline-block;"></div>',a.setAttribute("title",mxResources.get("addLayer")),mxEvent.addListener(a,"click",function(t){if(s.isEnabled()){s.model.beginUpdate();try{var e=s.addCell(new mxCell(mxResources.get("untitledLayer")),s.model.root);s.setDefaultParent(e)}finally{s.model.endUpdate()}}mxEvent.consume(t)}),s.isEnabled()||(a.className="geButton mxDisabled"),m.appendChild(a),r.appendChild(m),o(),s.model.addListener(mxEvent.CHANGE,o),s.addListener("defaultParentChanged",o),s.selectionModel.addListener(mxEvent.CHANGE,function(){x.className=s.isSelectionEmpty()?"geButton mxDisabled":"geButton"}),this.window=new mxWindow(mxResources.get("layers"),r,e,n,i,l,!0,!0),this.window.minimumSize=new mxRectangle(0,0,120,120),this.window.destroyOnClose=!1,this.window.setMaximizable(!1),this.window.setResizable(!0),this.window.setClosable(!0),this.window.setVisible(!0),this.init=function(){h.scrollTop=h.scrollHeight-h.clientHeight},this.window.addListener(mxEvent.SHOW,mxUtils.bind(this,function(){this.window.fit()})),this.refreshLayers=o,this.window.setLocation=function(t,e){var n=window.innerHeight||document.body.clientHeight||document.documentElement.clientHeight;t=Math.max(0,Math.min(t,(window.innerWidth||document.body.clientWidth||document.documentElement.clientWidth)-this.table.clientWidth)),e=Math.max(0,Math.min(e,n-this.table.clientHeight-48)),this.getX()==t&&this.getY()==e||mxWindow.prototype.setLocation.apply(this,arguments)};var v=mxUtils.bind(this,function(){var t=this.window.getX(),e=this.window.getY();this.window.setLocation(t,e)});mxEvent.addListener(window,"resize",v),this.destroy=function(){mxEvent.removeListener(window,"resize",v),this.window.destroy()}};function Dialog(t,e,n,i,l,o,s,r,a,h,u){var d=n,c=i,p=mxUtils.getDocumentSize();null!=window.innerHeight&&(p.height=window.innerHeight);var m=p.height,g=Math.max(1,Math.round((p.width-n-64)/2)),x=Math.max(1,Math.round((m-i-t.footerHeight)/3));e.style.maxHeight="100%",n=null!=document.body?Math.min(n,document.body.scrollWidth-64):n,i=Math.min(i,m-64),0<t.dialogs.length&&(this.zIndex+=2*t.dialogs.length),null==this.bg&&(this.bg=t.createDiv("background"),this.bg.style.position="absolute",this.bg.style.background=Dialog.backdropColor,this.bg.style.height=m+"px",this.bg.style.right="0px",this.bg.style.zIndex=this.zIndex-2,mxUtils.setOpacity(this.bg,this.bgOpacity)),p=mxUtils.getDocumentScrollOrigin(document),this.bg.style.left=p.x+"px",this.bg.style.top=p.y+"px",g+=p.x,x+=p.y,l&&document.body.appendChild(this.bg);var y,f=t.createDiv(a?"geTransDialog":"geDialog");l=this.getPosition(g,x,n,i),g=l.x,x=l.y,f.style.width=n+"px",f.style.height=i+"px",f.style.left=g+"px",f.style.top=x+"px",f.style.zIndex=this.zIndex,f.appendChild(e),document.body.appendChild(f),!r&&e.clientHeight>f.clientHeight-64&&(e.style.overflowY="auto"),o&&((o=document.createElement("img")).setAttribute("src",Dialog.prototype.closeImage),o.setAttribute("title",mxResources.get("close")),o.className="geDialogClose",o.style.top=x+14+"px",o.style.left=g+n+"px",o.style.zIndex=this.zIndex,mxEvent.addListener(o,"click",mxUtils.bind(this,function(){t.hideDialog(!0)})),document.body.appendChild(o),this.dialogImg=o,!u)&&(y=!1,mxEvent.addGestureListeners(this.bg,mxUtils.bind(this,function(t){y=!0}),null,mxUtils.bind(this,function(e){y&&(t.hideDialog(!0),y=!1)}))),this.resizeListener=mxUtils.bind(this,function(){var l;null==h||null!=(l=h())&&(d=n=l.w,c=i=l.h),l=mxUtils.getDocumentSize(),this.bg.style.height=(m=l.height)+"px",g=Math.max(1,Math.round((l.width-n-64)/2)),x=Math.max(1,Math.round((m-i-t.footerHeight)/3)),n=null!=document.body?Math.min(d,document.body.scrollWidth-64):d,i=Math.min(c,m-64),l=this.getPosition(g,x,n,i),x=l.y,f.style.left=(g=l.x)+"px",f.style.top=x+"px",f.style.width=n+"px",f.style.height=i+"px",!r&&e.clientHeight>f.clientHeight-64&&(e.style.overflowY="auto"),null!=this.dialogImg&&(this.dialogImg.style.top=x+14+"px",this.dialogImg.style.left=+(g+n+38)+"px")}),mxEvent.addListener(window,"resize",this.resizeListener),this.onDialogClose=s,this.container=f,t.editor.fireEvent(new mxEventObject("showDialog"))}Editor=function(t,e,n,i,l){mxEventSource.call(this),this.chromeless=null!=t?t:this.chromeless,this.initStencilRegistry(),this.graph=i||this.createGraph(e,n),this.editable=null!=l?l:!t,this.undoManager=this.createUndoManager(),this.status="",this.getOrCreateFilename=function(){return this.filename||mxResources.get("drawing",[Editor.pageCounter])+".xml"},this.getFilename=function(){return this.filename},this.setStatus=function(t){this.status=t,this.fireEvent(new mxEventObject("statusChanged"))},this.getStatus=function(){return this.status},this.graphChangeListener=function(t,e){null!=(t=null!=e?e.getProperty("edit"):null)&&t.ignoreEdit||this.setModified(!0)},this.graph.getModel().addListener(mxEvent.CHANGE,mxUtils.bind(this,function(){this.graphChangeListener.apply(this,arguments)})),this.graph.resetViewOnRootChange=!1,this.init()},Editor.pageCounter=0,function(){try{for(var t=window;null!=t.opener&&void 0!==t.opener.Editor&&!isNaN(t.opener.Editor.pageCounter)&&t.opener!=t;)t=t.opener;null!=t&&(t.Editor.pageCounter++,Editor.pageCounter=t.Editor.pageCounter)}catch(t){}}(),Editor.useLocalStorage="undefined"!=typeof Storage&&mxClient.IS_IOS,Editor.moveImage=mxClient.IS_SVG?"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyNCAyNCIgd2lkdGg9IjI4cHgiIGhlaWdodD0iMjhweCI+PGc+PC9nPjxnPjxnPjxnPjxwYXRoIHRyYW5zZm9ybT0idHJhbnNsYXRlKDIuNCwyLjQpc2NhbGUoMC44KXJvdGF0ZSg0NSwxMiwxMikiIHN0cm9rZT0iIzI5YjZmMiIgZmlsbD0iIzI5YjZmMiIgZD0iTTE1LDNsMi4zLDIuM2wtMi44OSwyLjg3bDEuNDIsMS40MkwxOC43LDYuN0wyMSw5VjNIMTV6IE0zLDlsMi4zLTIuM2wyLjg3LDIuODlsMS40Mi0xLjQyTDYuNyw1LjNMOSwzSDNWOXogTTksMjEgbC0yLjMtMi4zbDIuODktMi44N2wtMS40Mi0xLjQyTDUuMywxNy4zTDMsMTV2Nkg5eiBNMjEsMTVsLTIuMywyLjNsLTIuODctMi44OWwtMS40MiwxLjQybDIuODksMi44N0wxNSwyMWg2VjE1eiIvPjwvZz48L2c+PC9nPjwvc3ZnPgo=":IMAGE_PATH+"/move.png",Editor.rowMoveImage=mxClient.IS_SVG?"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAcAAAAEBAMAAACw6DhOAAAAGFBMVEUzMzP///9tbW1QUFCKiopBQUF8fHxfX1/IXlmXAAAAFElEQVQImWNgNVdzYBAUFBRggLMAEzYBy29kEPgAAAAASUVORK5CYII=":IMAGE_PATH+"/thumb_horz.png",Editor.lightHelpImage=mxClient.IS_SVG?"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0Ij48cGF0aCBmaWxsPSJub25lIiBkPSJNMCAwaDI0djI0SDB6Ii8+PHBhdGggZD0iTTExIDE4aDJ2LTJoLTJ2MnptMS0xNkM2LjQ4IDIgMiA2LjQ4IDIgMTJzNC40OCAxMCAxMCAxMCAxMC00LjQ4IDEwLTEwUzE3LjUyIDIgMTIgMnptMCAxOGMtNC40MSAwLTgtMy41OS04LThzMy41OS04IDgtOCA4IDMuNTkgOCA4LTMuNTkgOC04IDh6bTAtMTRjLTIuMjEgMC00IDEuNzktNCA0aDJjMC0xLjEuOS0yIDItMnMyIC45IDIgMmMwIDItMyAxLjc1LTMgNWgyYzAtMi4yNSAzLTIuNSAzLTUgMC0yLjIxLTEuNzktNC00LTR6Ii8+PC9zdmc+":IMAGE_PATH+"/help.png",Editor.lightCheckmarkImage=mxClient.IS_SVG?"data:image/gif;base64,R0lGODlhFQAVAMQfAGxsbHx8fIqKioaGhvb29nJycvr6+sDAwJqamltbW5OTk+np6YGBgeTk5Ly8vJiYmP39/fLy8qWlpa6ursjIyOLi4vj4+N/f3+3t7fT09LCwsHZ2dubm5r6+vmZmZv///yH/C1hNUCBEYXRhWE1QPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS4wLWMwNjAgNjEuMTM0Nzc3LCAyMDEwLzAyLzEyLTE3OjMyOjAwICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOnhtcE1NPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvbW0vIiB4bWxuczpzdFJlZj0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL3NUeXBlL1Jlc291cmNlUmVmIyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M1IFdpbmRvd3MiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6OEY4NTZERTQ5QUFBMTFFMUE5MTVDOTM5MUZGMTE3M0QiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6OEY4NTZERTU5QUFBMTFFMUE5MTVDOTM5MUZGMTE3M0QiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo4Rjg1NkRFMjlBQUExMUUxQTkxNUM5MzkxRkYxMTczRCIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo4Rjg1NkRFMzlBQUExMUUxQTkxNUM5MzkxRkYxMTczRCIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PgH//v38+/r5+Pf29fTz8vHw7+7t7Ovq6ejn5uXk4+Lh4N/e3dzb2tnY19bV1NPS0dDPzs3My8rJyMfGxcTDwsHAv769vLu6ubi3trW0s7KxsK+urayrqqmop6alpKOioaCfnp2cm5qZmJeWlZSTkpGQj46NjIuKiYiHhoWEg4KBgH9+fXx7enl4d3Z1dHNycXBvbm1sa2ppaGdmZWRjYmFgX15dXFtaWVhXVlVUU1JRUE9OTUxLSklIR0ZFRENCQUA/Pj08Ozo5ODc2NTQzMjEwLy4tLCsqKSgnJiUkIyIhIB8eHRwbGhkYFxYVFBMSERAPDg0MCwoJCAcGBQQDAgEAACH5BAEAAB8ALAAAAAAVABUAAAVI4CeOZGmeaKqubKtylktSgCOLRyLd3+QJEJnh4VHcMoOfYQXQLBcBD4PA6ngGlIInEHEhPOANRkaIFhq8SuHCE1Hb8Lh8LgsBADs=":IMAGE_PATH+"/checkmark.gif",Editor.darkHelpImage="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAAAP1BMVEUAAAD///////////////////////////////////////////////////////////////////////////////9Du/pqAAAAFXRSTlMAT30qCJRBboyDZyCgRzUUdF46MJlgXETgAAAAeklEQVQY022O2w4DIQhEQUURda/9/28tUO2+7CQS5sgQ4F1RapX78YUwRqQjTU8ILqQfKerTKTvACJ4nLX3krt+8aS82oI8aQC4KavRgtvEW/mDvsICgA03PSGRr79MqX1YPNIxzjyqtw8ZnnRo4t5a5undtJYRywau+ds4Cyza3E6YAAAAASUVORK5CYII=",Editor.darkCheckmarkImage="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABUAAAAVCAMAAACeyVWkAAAARVBMVEUAAACZmZkICAgEBASNjY2Dg4MYGBiTk5N5eXl1dXVmZmZQUFBCQkI3NzceHh4MDAykpKSJiYl+fn5sbGxaWlo/Pz8SEhK96uPlAAAAAXRSTlMAQObYZgAAAE5JREFUGNPFzTcSgDAQQ1HJGUfy/Y9K7V1qeOUfzQifCQZai1XHaz11LFysbDbzgDSSWMZiETz3+b8yNUc/MMsktxuC8XQBSncdLwz+8gCCggGXzBcozAAAAABJRU5ErkJggg==",Editor.maximizeImage="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABUAAAAVBAMAAABbObilAAAAElBMVEUAAAAAAAAAAAAAAAAAAAAAAADgKxmiAAAABXRSTlMA758vX1Pw3BoAAABJSURBVAjXY8AJQkODGBhUQ0MhbAUGBiYY24CBgRnGFmZgMISwgwwDGRhEhVVBbAVmEQYGRwMmBjIAQi/CTIRd6G5AuA3dzYQBAHj0EFdHkvV4AAAAAElFTkSuQmCC",Editor.zoomOutImage="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABUAAAAVBAMAAABbObilAAAAElBMVEUAAAAAAAAsLCxxcXEhISFgYGChjTUxAAAAAXRSTlMAQObYZgAAAEdJREFUCNdjIAMwCQrB2YKCggJQJqMwA7MglK1owMBgqABVApITgLJZXFxgbIQ4Qj3CHIT5ggoIe5kgNkM1KSDYKBKqxPkDAPo5BAZBE54hAAAAAElFTkSuQmCC",Editor.zoomInImage="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABUAAAAVBAMAAABbObilAAAAElBMVEUAAAAAAAAsLCwhISFxcXFgYGBavKaoAAAAAXRSTlMAQObYZgAAAElJREFUCNdjIAMwCQrB2YKCggJQJqMIA4sglK3owMzgqABVwsDMwCgAZTMbG8PYCHGEeoQ5CPMFFRD2MkFshmpSQLBRJFSJ8wcAEqcEM2uhl2MAAAAASUVORK5CYII=",Editor.zoomFitImage="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABUAAAAVBAMAAABbObilAAAAD1BMVEUAAAAAAAAwMDBwcHBgYGC1xl09AAAAAXRSTlMAQObYZgAAAEFJREFUCNdjIAMwCQrB2YKCggJQJqMwA7MglK1owMBgqABVApITwMdGqEeYgzBfUAFhLxPEZqgmBQQbRUKFOH8AAK5OA3lA+FFOAAAAAElFTkSuQmCC",Editor.layersImage="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABUAAAAVCAMAAACeyVWkAAAAaVBMVEUAAAAgICAICAgdHR0PDw8WFhYICAgLCwsXFxcvLy8ODg4uLi4iIiIqKiokJCQYGBgKCgonJycFBQUCAgIqKiocHBwcHBwODg4eHh4cHBwnJycJCQkUFBQqKiojIyMuLi4ZGRkgICAEBATOWYXAAAAAGnRSTlMAD7+fnz8/H7/ff18/77+vr5+fn39/b28fH2xSoKsAAACQSURBVBjTrYxJEsMgDARZZMAY73sgCcn/HxnhKtnk7j6oRq0psfuoyndZ/SuODkHPLzfVT6KeyPePnJ7KrnkRjWMXTn4SMnN8mXe2SSM3ts8L/ZUxxrbAULSYJJULE0Iw9pjpenoICcgcX61mGgTgtCv9Be99pzCoDhNQWQnchD1mup5++CYGcoQexajZbfwAj/0MD8ZOaUgAAAAASUVORK5CYII=",Editor.previousImage="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAABmJLR0QA/wD/AP+gvaeTAAAAh0lEQVQ4je3UsQnCUBCA4U8hpa1NsoEjpHQJS0dxADdwEMuMIJkgA1hYChbGQgMi+JC8q4L/AB/vDu7x74cWWEZhJU44RmA1zujR5GIbXF9YNrjD/Q0bDRY4fEBZ4P4LlgTnCbAf84pUM8/9hY08tMUtEoQ1LpEgrNBFglChFXR6Q6GfwwR6AGKJMF74Vtt3AAAAAElFTkSuQmCC",Editor.nextImage="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAABmJLR0QA/wD/AP+gvaeTAAAAi0lEQVQ4jeXUIQ7CUAwA0MeGxWI2yylwnALJUdBcgYvM7QYLmjOQIAkIPmJZghiIvypoUtX0tfnJL38X5ZfaEgUeUcManFBHgS0SLlhHggk3bCPBhCf2keCQR8wjwYTDp6YiZxJmOU1jGw7vGALescuBxsArNlOwd/CM1VSM/ut1qCIw+uOwiMJ+OF4CQzBCXm3hyAAAAABJRU5ErkJggg==",Editor.editImage=mxClient.IS_SVG?"data:image/gif;base64,R0lGODlhCwALAIABAFdXV////yH5BAEAAAEALAAAAAALAAsAAAIZjB8AiKuc4jvLOGqzrjX6zmkWyChXaUJBAQA7":IMAGE_PATH+"/edit.gif",Editor.zoomOutLargeImage="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAAilBMVEUAAAD////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////2N2iNAAAALXRSTlMA+vTcKMM96GRBHwXxi0YaX1HLrKWhiHpWEOnOr52Vb2xKSDcT19PKv5l/Ngdk8+viAAABJklEQVQ4y4WT2XaDMAxEvWD2nSSUNEnTJN3r//+9Sj7ILAY6L0ijC4ONYVZRpo6cByrz2YKSUGorGTpz71lPVHvT+avoB5wIkU/mxk8veceSuNoLg44IzziXjvpih72wKQnm8yc2UoiP/LAd8jQfe2Xf4Pq+2EyYIvv9wbzHHCgwxDdlBtWZOdqDfTCVgqpygQpsZaojVAVc9UjQxnAJDIBhiQv84tq3gMQCAVTxVoSibXJf8tMuc7e1TB/DCmejBNg/w1Y3c+AM5vv4w7xM59/oXamrHaLVqPQ+OTCnmMZxgz0SdL5zji0/ld6j88qGa5KIiBB6WeJGKfUKwSMKLuXgvl1TW0tm5R9UQL/efSDYsnzxD8CinhBsTTdugJatKpJwf8v+ADb8QmvW7AeAAAAAAElFTkSuQmCC",Editor.zoomInLargeImage="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAAilBMVEUAAAD////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////2N2iNAAAALXRSTlMA+vTcKMM96GRBHwXxi0YaX1HLrKWhiHpWEOnOr52Vb2xKSDcT19PKv5l/Ngdk8+viAAABKElEQVQ4y4WT6WKCMBCENwkBwn2oFKvWqr3L+79es4EkQIDOH2d3Pxk2ABiJlB8JCXjqw4LikHVGLHTm3nM3UeVN5690GBBN0GwyV/3kkrUQR+WeKnREeKpzaXWd77CmJiXGfPIEI4V4yQ9TIW/ntlcMBe731Vts9w5TWG8F5j3mQI4hvrKpdGeYA7CX9qAcl650gVJartxRuhyHVghF8idQAIbFLvCLu28BsQEC6aKtCK6Pyb3JT7PmbmtNH8Ny56CotD/2qOs5cJbuffxgXmCib+xddVU5RNOhkvvkhTlFehzVWCOh3++MYElOhfdovaImnRYVmqDdsuhNp1QrBBE6uGC2+3ZNjGdg5B94oD+9uyVgWT79BwAxEBTWdOu3bWBVgsn/N/AHUD9IC01Oe40AAAAASUVORK5CYII=",Editor.actualSizeLargeImage="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAAilBMVEUAAAD////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////2N2iNAAAALXRSTlMA+vTcKMM96GRBHwXxi0YaX1HLrKWhiHpWEOnOr52Vb2xKSDcT19PKv5l/Ngdk8+viAAABIUlEQVQ4y4WT2XqDIBCFBxDc9yTWNEnTJN3r+79eGT4BEbXnaubMr8dBBaM450dCQp4LWFAascGIRd48eB4cNYE7f6XjgGiCFs5c+dml6CFN6j1V6IQIlHPpdV/usKcmJcV88gQTRXjLD9Mhb+fWq8YG9/uCmTCFjeeDeY85UGKIUGUuqzN42kv7oCouq9oHamlzVR1lVfpAIu1QVRiW+sAv7r4FpAYIZZVsRXB9TP5Dfpo1d1trCgzz1iiptH/sUbdz4CzN9+mLeXHn3+hdddd4RDegsrvzwZwSs2GLPRJidAqCLTlVwaMPqpYMWjTWBB2WRW86pVkhSKyDK2bdt2tmagZG4sBD/evdLQHLEvQfAOKRoLCmG1FAB6uKmby+gz+REDn7O5+EwQAAAABJRU5ErkJggg==",Editor.printLargeImage="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAAXVBMVEUAAAD///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////9RKvvlAAAAHnRSTlMAydnl77qbMLT093H7K4Nd4Ktn082+lYt5bkklEgP44nQSAAAApUlEQVQ4y73P2Q6DIBRF0cOgbRHHzhP//5m9mBAQKjG1cT0Yc7ITAMu1LNQgUZiQ2DYoNQ0sCQb6qgHAfRx48opq3J9AZ6xuF7uOew8Ik1OsCZRS2UAC9V+D9a+QZYxNA45YFQftPtSkATOhw7dAc0vPBwKWiIOjP0JZ0yMuQJ27g36DipOUsqRAM0dR8KD1/ILHaHSE/w8DIx09E3g/BTce6rHUB5sAPKvfF+JdAAAAAElFTkSuQmCC",Editor.layersLargeImage="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAAmVBMVEUAAAD////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////+/v7///+bnZkkAAAAMnRSTlMABPr8ByiD88KsTi/rvJb272mjeUA1CuPe1M/KjVxYHxMP6KZ0S9nYzGRGGRaznpGIbzaGUf0AAAHESURBVDjLbZLZYoIwEEVDgLCjbKIgAlqXqt3m/z+uNwu1rcyDhjl3ktnYL7OY254C0VX3yWFZfzDrOClbbgKxi0YDHjwl4jbnRkXxJS/C1YP3DbBhD1n7Ex4uaAqdVDb3yJ/4J/3nJD2to/ngQz/DfUvzMp4JJ5sSCaF5oXmemgQDfDxzbi+Kq4sU+vNcuAmx94JtyOP2DD4Epz2asWSCz4Z/4fECxyNj9zC9xNLHcdPEO+awDKeSaUu0W4twZQiO2hYVisTR3RCtK/c1X6t4xMEpiGqXqVntEBLolkZZsKY4QtwH6jzq67dEHlJysB1aNOD3XT7n1UkasQN59L4yC2RELMDSeCRtz3yV22Ub3ozIUTknYx8JWqDdQxbUes98cR2kZtUSveF/bAhcedwEWmlxIkpZUy4XOCb6VBjjxHvbwo/1lBAHHi2JCr0NI570QhyHq/DhJoE2lLgyA4RVe6KmZ47O/3b86MCP0HWa73A8/C3SUc5Qc1ajt6fgpXJ+RGpMvDSchepZDOOQRcZVIKcK90x2D7etqtI+56+u6n3sPriO6nfphitR4+O2m3EbM7lh3me1FM1o+LMI887rN+s3/wZdTFlpNVJiOAAAAABJRU5ErkJggg==",Editor.closeLargeImage="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAAUVBMVEUAAAD///////////////////////////////////////////////////////////////////////////////////////////////////////8IN+deAAAAGnRSTlMAuvAIg/dDM/QlOeuFhj0S5s4vKgzjxJRQNiLSey0AAADNSURBVDjLfZLbEoMgDEQjRRRs1XqX///QNmOHJSnjPkHOGR7IEmeoGtJZstnwjqbRfIsmgEdtPCqe9Ynz7ZSc07rE2QiSc+qv8TvjRXA2PDUm3dpe82iJhOEUfxJJo3aCv+jKmRmH4lcCjCjeh9GWOdL/GZZkXH3PYYDrHBnfc4D/RVZf5sjoC1was+Y6HQxwaUxFvq/a0Pv343VCTxfBSRiB+ab3M3eiQZXmMNBJ3Y8pGRZtYQ7DgHMXJEdPLTaN/qBjzJOBc3nmNcbsA16bMR0oLqf+AAAAAElFTkSuQmCC",Editor.editLargeImage="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAAgVBMVEUAAAD///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////9d3yJTAAAAKnRSTlMA+hzi3nRQWyXzkm0h2j3u54gzEgSXjlYoTBgJxL2loGpAOS3Jt7Wxm35Ga7gRAAAA6UlEQVQ4y63Q2XaCMBSF4Q0JBasoQ5DJqbXjfv8HbCK2BZNwo/8FXHx7rcMC7lQu0iX8qU/qtvAWCpoqH8dYzS0SwaV5eK/UAf8X9pd2CWKzuF5Jrftp1owXwnIGLUaL3PYndOHf4kNNXWrXK/m7CHunk7K8LE6YtBpcknwG9GKxnroY+ylBXcx4xKyx/u/EuXi509cP9V7OO1oyHnzrdFTcqLG/4ibBA5pIMr/4xvKzuQDkVy9wW8SgBFD6HDvuzMvrZcC9QlkfMzI7w64m+b4PqBMNHB05lH21PVxJo2/fBXxV4hB38PcD+5AkI4FuETsAAAAASUVORK5CYII=",Editor.previousLargeImage="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAAPFBMVEUAAAD////////////////////////////////////////////////////////////////////////////YSWgTAAAAE3RSTlMA7fci493c0MW8uJ6CZks4MxQHEZL6ewAAAFZJREFUOMvdkskRgDAMA4lDwg2B7b9XOlge/KKvdsa25KFb5XlRvxXC/DNBEv8IFNjBgGdDgXtFgTyhwDXiQAUHCvwa4Uv6mR6UR+1led2mVonvl+tML45qCQNQLIx7AAAAAElFTkSuQmCC",Editor.nextLargeImage="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAAPFBMVEUAAAD////////////////////////////////////////////////////////////////////////////YSWgTAAAAE3RSTlMA7fci493c0MW8uJ6CZks4MxQHEZL6ewAAAFRJREFUOMvd0skRgCAQBVEFwQ0V7fxzNQP6wI05v6pZ/kyj1b7FNgik2gQzzLcAwiUAigHOTwDHK4A1CmB5BJANJG1hQ9qafYcqFlZP3IFc9eVGrR+iIgkDQRUXIAAAAABJRU5ErkJggg==",Editor.refreshLargeImage="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAAolBMVEUAAAD///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////8ELnaCAAAANXRSTlMABfyE2QKU+dfNyyDyoVYKwnTv7N+6rntsYlFNQjEqEw316uSzf2c1JB3GvqebiVw6GAjQB4DQr10AAAE7SURBVDjLvZLXcoMwEABPIgRCx3TT3A3udqL//7UgAdGRcR4yk8k+idsdmgS/QyWEqD/axS2JDV33zlnzLHIzQ2MDq9OeJ3m8l76KKENYlxrmM/b65Ys1+8YxnTEZFIEY0vVhszFWfUGZDJpQTDznTgAe5k4XhQxILB7ruzBQn+kkyDXuHfRtjoYDEvH7J9Lz98dBZXXL94X0Ofco2PFlChKbjVzEdakoSlKjoNoqPYkJ/wUZAYwc+PpLj1Ei7+jdoBWlwQZoJv2H1w3CWgRvo7dd9DP5btgwCWz0M02+oVoxCcIWeY9PNmR6B++m9prMxYEISpCBYBlfy9bc745is7UUULAem1Ww7FfalsiA2uaJsgmWP3pQI9q9/yMLkaaHAp2fxhHff/cNq7dBdHXhGW7l+Mo2zU0Cf8knJ2xA0oJ8enwAAAAASUVORK5CYII=",Editor.backLargeImage="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAAclBMVEUAAAD////////////////+/v7////////////////////////////////////////////+/v7///////////////////////////////////////////////////////////////////////////////8vKLfTAAAAJXRSTlMACh7h9gby3NLIwzwZ55uVJgH57b+8tbCljYV1RRMQ46FrTzQw+vtxOQAAAJ5JREFUOMuF00cWgzAQA1DRDQFCbwFSdf8rZpdVrNH2z3tuMv7mldZQ2WN2yi8x+TT8JvyTkqvwpiKvwsOIrA1fWr+XGTklfj8dOQR+D3KyUF6QufBkJN0hfCazEv6sZBRCJDUcPasGKpu1RLtYE8lkHAPBQLoTsK/SfAyRw5FjAuhCzC2MSj0gJ+66lHatgXdKboD9tfREB5m9/+3iC9jHDYvsGNcUAAAAAElFTkSuQmCC",Editor.fullscreenLargeImage="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAAllBMVEUAAAD////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////AJcWoAAAAMXRSTlMA+wIFxPWPCIb446tnUxmsoIykgxTe29jQnpKBe2MNsZhVTR/KyLuWbFhEPjUq7L9z+bQj+gAAAWxJREFUOMttk4l2gkAMRTODCO4FtQgIbnWpS9v8/881iZFh8R51NO8GJ+gAjMN8zuTRFSw04cIOHQcqFHH6oaQFGxf0jeBjEgB8Y52TpW9Ag4zB5QICWOtHrgwGuFZBcw+gPP0MFS7+iiD5inOmDIQS9sZgTwUzwEzyxhxHVEEU7NdDUXsqUPtqjIgR2IZSCT4upzSeIeOdcMHnfDsx3giPoezfU6MrQGB5//SckLEG2xYscK4GfnUFqaix39zrwooaOD/cXoYuvHKQIc7pzd3HVPusp6t2FAW/RmjMonbl8vwHDeZo/GkleJC7e+p5XA/rAq1X/V10wKag04rBpa2/d0LL4OYYceOEtsG5jyMntI1wS+N1BGcQBl/CoLoPOl9ABrW/BP53e1bwSJHHlkIVchJwmHwyyfJ4kIvEnKtwkxNSEct83KSChT7WiWgDZ3ccZ0BM4tloJow2YUAtifNT3njnyD+y/pMsnP4DN3Y4yl1Gyk0AAAAASUVORK5CYII=",Editor.roughFillStyles=[{val:"auto",dispName:"Auto"},{val:"hachure",dispName:"Hachure"},{val:"solid",dispName:"Solid"},{val:"zigzag",dispName:"ZigZag"},{val:"cross-hatch",dispName:"Cross Hatch"},{val:"dots",dispName:"Dots"},{val:"dashed",dispName:"Dashed"},{val:"zigzag-line",dispName:"ZigZag Line"}],Editor.themes=null,Editor.ctrlKey=mxClient.IS_MAC?"Cmd":"Ctrl",Editor.hintOffset=20,Editor.fitWindowBorders=null,Editor.popupsAllowed=!0,Editor.simpleLabels=!1,Editor.enableNativeCipboard=window==window.top&&!mxClient.IS_FF&&null!=navigator.clipboard,Editor.darkMode=!1,Editor.isDarkMode=function(t){return"dark"==Editor.darkMode},Editor.helpImage=Editor.isDarkMode()&&mxClient.IS_SVG?Editor.darkHelpImage:Editor.lightHelpImage,Editor.checkmarkImage=Editor.isDarkMode()&&mxClient.IS_SVG?Editor.darkCheckmarkImage:Editor.lightCheckmarkImage,mxUtils.extend(Editor,mxEventSource),Editor.prototype.originalNoForeignObject=mxClient.NO_FO,Editor.prototype.transparentImage=mxClient.IS_SVG?"data:image/gif;base64,R0lGODlhMAAwAIAAAP///wAAACH5BAEAAAAALAAAAAAwADAAAAIxhI+py+0Po5y02ouz3rz7D4biSJbmiabqyrbuC8fyTNf2jef6zvf+DwwKh8Si8egpAAA7":IMAGE_PATH+"/transparent.gif",Editor.prototype.extendCanvas=!0,Editor.prototype.chromeless=!1,Editor.prototype.cancelFirst=!0,Editor.prototype.enabled=!0,Editor.prototype.filename=null,Editor.prototype.modified=!1,Editor.prototype.autosave=!0,Editor.prototype.initialTopSpacing=0,Editor.prototype.appName=document.title,Editor.prototype.editBlankUrl=window.location.protocol+"//"+window.location.host+"/",Editor.prototype.defaultGraphOverflow="hidden",Editor.prototype.init=function(){},Editor.prototype.isChromelessView=function(){return this.chromeless},Editor.prototype.setAutosave=function(t){this.autosave=t,this.fireEvent(new mxEventObject("autosaveChanged"))},Editor.prototype.getEditBlankUrl=function(t){return this.editBlankUrl+t},Editor.prototype.editAsNew=function(t,e){var n,i;e=null!=e?"?title="+encodeURIComponent(e):"",null!=urlParams.ui&&(e+=(0<e.length?"&":"?")+"ui="+urlParams.ui),void 0!==window.postMessage&&(null==document.documentMode||10<=document.documentMode)?(n=null,i=mxUtils.bind(this,function(e){"ready"==e.data&&e.source==n&&(mxEvent.removeListener(window,"message",i),n.postMessage(t,"*"))}),mxEvent.addListener(window,"message",i),n=this.graph.openLink(this.getEditBlankUrl(e+(0<e.length?"&":"?")+"client=1"),null,!0)):this.graph.openLink(this.getEditBlankUrl(e)+"#R"+encodeURIComponent(t))},Editor.prototype.createGraph=function(t,e){return(t=new Graph(null,e,null,null,t)).transparentBackground=!1,this.chromeless||(t.isBlankLink=function(t){return!this.isExternalProtocol(t)}),t},Editor.prototype.resetGraph=function(){this.graph.gridEnabled=this.graph.defaultGridEnabled&&(!this.isChromelessView()||"1"==urlParams.grid),this.graph.graphHandler.guidesEnabled=!0,this.graph.setTooltips(!0),this.graph.setConnectable(!0),this.graph.foldingEnabled=!0,this.graph.scrollbars=this.graph.defaultScrollbars,this.graph.pageVisible=this.graph.defaultPageVisible,this.graph.pageBreaksVisible=this.graph.pageVisible,this.graph.preferPageSize=this.graph.pageBreaksVisible,this.graph.background=null,this.graph.pageScale=mxGraph.prototype.pageScale,this.graph.pageFormat=mxGraph.prototype.pageFormat,this.graph.currentScale=1,this.graph.currentTranslate.x=0,this.graph.currentTranslate.y=0,this.updateGraphComponents(),this.graph.view.setScale(1)},Editor.prototype.readGraphState=function(t){null!=(e=t.getAttribute("grid"))&&""!=e||(e=this.graph.defaultGridEnabled?"1":"0"),this.graph.gridEnabled="0"!=e&&(!this.isChromelessView()||"1"==urlParams.grid),this.graph.gridSize=parseFloat(t.getAttribute("gridSize"))||mxGraph.prototype.gridSize,this.graph.graphHandler.guidesEnabled="0"!=t.getAttribute("guides"),this.graph.setTooltips("0"!=t.getAttribute("tooltips")),this.graph.setConnectable("0"!=t.getAttribute("connect")),this.graph.connectionArrowsEnabled="0"!=t.getAttribute("arrows"),this.graph.foldingEnabled="0"!=t.getAttribute("fold"),this.isChromelessView()&&this.graph.foldingEnabled&&(this.graph.foldingEnabled="1"==urlParams.nav,this.graph.cellRenderer.forceControlClickHandler=this.graph.foldingEnabled),e=parseFloat(t.getAttribute("pageScale")),this.graph.pageScale=!isNaN(e)&&0<e?e:mxGraph.prototype.pageScale,this.graph.isLightboxView()||this.graph.isViewer()?this.graph.pageVisible=!1:(e=t.getAttribute("page"),this.graph.pageVisible=null!=e?"0"!=e:this.graph.defaultPageVisible),this.graph.pageBreaksVisible=this.graph.pageVisible,this.graph.preferPageSize=this.graph.pageBreaksVisible;var e=parseFloat(t.getAttribute("pageWidth")),n=parseFloat(t.getAttribute("pageHeight"));isNaN(e)||isNaN(n)||(this.graph.pageFormat=new mxRectangle(0,0,e,n)),t=t.getAttribute("background"),this.graph.background=null!=t&&0<t.length?t:null},Editor.prototype.setGraphXml=function(t){if(null!=t){var e=new mxCodec(t.ownerDocument);if("mxGraphModel"==t.nodeName){this.graph.model.beginUpdate();try{this.graph.model.clear(),this.graph.view.scale=1,this.readGraphState(t),this.updateGraphComponents(),e.decode(t,this.graph.getModel())}finally{this.graph.model.endUpdate()}this.fireEvent(new mxEventObject("resetGraphView"))}else{if("root"!=t.nodeName)throw{message:mxResources.get("cannotOpenFile"),node:t,toString:function(){return this.message}};this.resetGraph();var n=e.document.createElement("mxGraphModel");n.appendChild(t),e.decode(n,this.graph.getModel()),this.updateGraphComponents(),this.fireEvent(new mxEventObject("resetGraphView"))}}else this.resetGraph(),this.graph.model.clear(),this.fireEvent(new mxEventObject("resetGraphView"))},Editor.prototype.getGraphXml=function(t){return t=null==t||t?new mxCodec(mxUtils.createXmlDocument()).encode(this.graph.getModel()):this.graph.encodeCells(mxUtils.sortCells(this.graph.model.getTopmostCells(this.graph.getSelectionCells()))),0==this.graph.view.translate.x&&0==this.graph.view.translate.y||(t.setAttribute("dx",Math.round(100*this.graph.view.translate.x)/100),t.setAttribute("dy",Math.round(100*this.graph.view.translate.y)/100)),t.setAttribute("grid",this.graph.isGridEnabled()?"1":"0"),t.setAttribute("gridSize",this.graph.gridSize),t.setAttribute("guides",this.graph.graphHandler.guidesEnabled?"1":"0"),t.setAttribute("tooltips",this.graph.tooltipHandler.isEnabled()?"1":"0"),t.setAttribute("connect",this.graph.connectionHandler.isEnabled()?"1":"0"),t.setAttribute("arrows",this.graph.connectionArrowsEnabled?"1":"0"),t.setAttribute("fold",this.graph.foldingEnabled?"1":"0"),t.setAttribute("page",this.graph.pageVisible?"1":"0"),t.setAttribute("pageScale",this.graph.pageScale),t.setAttribute("pageWidth",this.graph.pageFormat.width),t.setAttribute("pageHeight",this.graph.pageFormat.height),null!=this.graph.background&&t.setAttribute("background",this.graph.background),t},Editor.prototype.updateGraphComponents=function(){var t=this.graph;null!=t.container&&(t.view.validateBackground(),t.container.style.overflow=t.scrollbars?"auto":this.defaultGraphOverflow,this.fireEvent(new mxEventObject("updateGraphComponents")))},Editor.prototype.setModified=function(t){this.modified=t},Editor.prototype.setFilename=function(t){this.filename=t},Editor.prototype.createUndoManager=function(){var t=this.graph,e=new mxUndoManager;this.undoListener=function(t,n){e.undoableEditHappened(n.getProperty("edit"))};var n=mxUtils.bind(this,function(t,e){this.undoListener.apply(this,arguments)});return t.getModel().addListener(mxEvent.UNDO,n),t.getView().addListener(mxEvent.UNDO,n),n=function(e,n){if(0<(e=t.getSelectionCellsForChanges(n.getProperty("edit").changes,function(t){return!(t instanceof mxChildChange)})).length){t.getModel(),n=[];for(var i=0;i<e.length;i++)null!=t.view.getState(e[i])&&n.push(e[i]);t.setSelectionCells(n)}},e.addListener(mxEvent.UNDO,n),e.addListener(mxEvent.REDO,n),e},Editor.prototype.initStencilRegistry=function(){},Editor.prototype.destroy=function(){null!=this.graph&&(this.graph.destroy(),this.graph=null)},OpenFile=function(t){this.consumer=this.producer=null,this.done=t,this.args=null},OpenFile.prototype.setConsumer=function(t){this.consumer=t,this.execute()},OpenFile.prototype.setData=function(){this.args=arguments,this.execute()},OpenFile.prototype.error=function(t){this.cancel(!0),mxUtils.alert(t)},OpenFile.prototype.execute=function(){null!=this.consumer&&null!=this.args&&(this.cancel(!1),this.consumer.apply(this,this.args))},OpenFile.prototype.cancel=function(t){null!=this.done&&this.done(null==t||t)},Dialog.backdropColor="white",Dialog.prototype.zIndex=mxPopupMenu.prototype.zIndex-1,Dialog.prototype.noColorImage=mxClient.IS_SVG?"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyBpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBXaW5kb3dzIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOkEzRDlBMUUwODYxMTExRTFCMzA4RDdDMjJBMEMxRDM3IiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOkEzRDlBMUUxODYxMTExRTFCMzA4RDdDMjJBMEMxRDM3Ij4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6QTNEOUExREU4NjExMTFFMUIzMDhEN0MyMkEwQzFEMzciIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6QTNEOUExREY4NjExMTFFMUIzMDhEN0MyMkEwQzFEMzciLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz5xh3fmAAAABlBMVEX////MzMw46qqDAAAAGElEQVR42mJggAJGKGAYIIGBth8KAAIMAEUQAIElnLuQAAAAAElFTkSuQmCC":IMAGE_PATH+"/nocolor.png",Dialog.prototype.closeImage=mxClient.IS_SVG?"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAkAAAAJAQMAAADaX5RTAAAABlBMVEV7mr3///+wksspAAAAAnRSTlP/AOW3MEoAAAAdSURBVAgdY9jXwCDDwNDRwHCwgeExmASygSL7GgB12QiqNHZZIwAAAABJRU5ErkJggg==":IMAGE_PATH+"/close.png",Dialog.prototype.clearImage=mxClient.IS_SVG?"data:image/gif;base64,R0lGODlhDQAKAIABAMDAwP///yH/C1hNUCBEYXRhWE1QPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS4wLWMwNjAgNjEuMTM0Nzc3LCAyMDEwLzAyLzEyLTE3OjMyOjAwICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOnhtcE1NPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvbW0vIiB4bWxuczpzdFJlZj0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL3NUeXBlL1Jlc291cmNlUmVmIyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M1IFdpbmRvd3MiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6OUIzOEM1NzI4NjEyMTFFMUEzMkNDMUE3NjZERDE2QjIiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6OUIzOEM1NzM4NjEyMTFFMUEzMkNDMUE3NjZERDE2QjIiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo5QjM4QzU3MDg2MTIxMUUxQTMyQ0MxQTc2NkREMTZCMiIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo5QjM4QzU3MTg2MTIxMUUxQTMyQ0MxQTc2NkREMTZCMiIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PgH//v38+/r5+Pf29fTz8vHw7+7t7Ovq6ejn5uXk4+Lh4N/e3dzb2tnY19bV1NPS0dDPzs3My8rJyMfGxcTDwsHAv769vLu6ubi3trW0s7KxsK+urayrqqmop6alpKOioaCfnp2cm5qZmJeWlZSTkpGQj46NjIuKiYiHhoWEg4KBgH9+fXx7enl4d3Z1dHNycXBvbm1sa2ppaGdmZWRjYmFgX15dXFtaWVhXVlVUU1JRUE9OTUxLSklIR0ZFRENCQUA/Pj08Ozo5ODc2NTQzMjEwLy4tLCsqKSgnJiUkIyIhIB8eHRwbGhkYFxYVFBMSERAPDg0MCwoJCAcGBQQDAgEAACH5BAEAAAEALAAAAAANAAoAAAIXTGCJebD9jEOTqRlttXdrB32PJ2ncyRQAOw==":IMAGE_PATH+"/clear.gif",Dialog.prototype.lockedImage=mxClient.IS_SVG?"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAMAAABhq6zVAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBNYWNpbnRvc2giIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6MzdDMDZCODExNzIxMTFFNUI0RTk5NTg4OTcyMUUyODEiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6MzdDMDZCODIxNzIxMTFFNUI0RTk5NTg4OTcyMUUyODEiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDozN0MwNkI3RjE3MjExMUU1QjRFOTk1ODg5NzIxRTI4MSIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDozN0MwNkI4MDE3MjExMUU1QjRFOTk1ODg5NzIxRTI4MSIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PvqMCFYAAAAVUExURZmZmb+/v7KysqysrMzMzLGxsf///4g8N1cAAAAHdFJOU////////wAaSwNGAAAAPElEQVR42lTMQQ4AIQgEwUa0//9kTQirOweYOgDqAMbZUr10AGlAwx4/BJ2QJ4U0L5brYjovvpv32xZgAHZaATFtMbu4AAAAAElFTkSuQmCC":IMAGE_PATH+"/locked.png",Dialog.prototype.unlockedImage=mxClient.IS_SVG?"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAMAAABhq6zVAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBNYWNpbnRvc2giIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6MzdDMDZCN0QxNzIxMTFFNUI0RTk5NTg4OTcyMUUyODEiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6MzdDMDZCN0UxNzIxMTFFNUI0RTk5NTg4OTcyMUUyODEiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDozN0MwNkI3QjE3MjExMUU1QjRFOTk1ODg5NzIxRTI4MSIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDozN0MwNkI3QzE3MjExMUU1QjRFOTk1ODg5NzIxRTI4MSIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PkKMpVwAAAAYUExURZmZmbKysr+/v6ysrOXl5czMzLGxsf///zHN5lwAAAAIdFJOU/////////8A3oO9WQAAADxJREFUeNpUzFESACAEBNBVsfe/cZJU+8Mzs8CIABCidtfGOndnYsT40HDSiCcbPdoJo10o9aI677cpwACRoAF3dFNlswAAAABJRU5ErkJggg==":IMAGE_PATH+"/unlocked.png",Dialog.prototype.bgOpacity=80,Dialog.prototype.getPosition=function(t,e){return new mxPoint(t,e)},Dialog.prototype.close=function(t,e){if(null!=this.onDialogClose){if(0==this.onDialogClose(t,e))return!1;this.onDialogClose=null}null!=this.dialogImg&&(this.dialogImg.parentNode.removeChild(this.dialogImg),this.dialogImg=null),null!=this.bg&&null!=this.bg.parentNode&&this.bg.parentNode.removeChild(this.bg),mxEvent.removeListener(window,"resize",this.resizeListener),this.container.parentNode.removeChild(this.container)};var ErrorDialog=function(t,e,n,i,l,o,s,r,a,h,u){a=null==a||a;var d,c=document.createElement("div");c.style.textAlign="center",null!=e&&((d=document.createElement("div")).style.padding="0px",d.style.margin="0px",d.style.fontSize="18px",d.style.paddingBottom="16px",d.style.marginBottom="10px",d.style.borderBottom="1px solid #c0c0c0",d.style.color="gray",d.style.whiteSpace="nowrap",d.style.textOverflow="ellipsis",d.style.overflow="hidden",mxUtils.write(d,e),d.setAttribute("title",e),c.appendChild(d)),(e=document.createElement("div")).style.lineHeight="1.2em",e.style.padding="6px",e.innerHTML=n,c.appendChild(e),(n=document.createElement("div")).style.marginTop="12px",n.style.textAlign="center",null!=o&&((e=mxUtils.button(mxResources.get("tryAgain"),function(){t.hideDialog(),o()})).className="geBtn",n.appendChild(e),n.style.textAlign="center"),null!=h&&((h=mxUtils.button(h,function(){null!=u&&u()})).className="geBtn",n.appendChild(h));var p=mxUtils.button(i,function(){a&&t.hideDialog(),null!=l&&l()});p.className="geBtn",n.appendChild(p),null!=s&&((i=mxUtils.button(s,function(){a&&t.hideDialog(),null!=r&&r()})).className="geBtn gePrimaryBtn",n.appendChild(i)),this.init=function(){p.focus()},c.appendChild(n),this.container=c},PrintDialog=function(t,e){this.create(t,e)};PrintDialog.prototype.create=function(t){function e(t){var e=s.checked||a.checked,i=parseInt(c.value)/100;isNaN(i)&&(i=1,c.value="100%"),i*=.75;var l,o=n.pageFormat||mxConstants.PAGE_FORMAT_A4_PORTRAIT,r=1/n.pageScale;e&&(l=s.checked?1:parseInt(h.value),isNaN(l)||(r=mxUtils.getScaleForPageCount(l,n,o))),n.getGraphBounds();var u=l=0;(o=mxRectangle.fromRectangle(o)).width=Math.ceil(o.width*i),o.height=Math.ceil(o.height*i),r*=i,!e&&n.pageVisible?(l-=(i=n.getPageLayout()).x*o.width,u-=i.y*o.height):e=!0,(e=PrintDialog.createPrintPreview(n,r,o,0,l,u,e)).open(),t&&PrintDialog.printPreview(e)}var n=t.editor.graph,i=document.createElement("table");i.style.width="100%",i.style.height="100%";var l=document.createElement("tbody"),o=document.createElement("tr"),s=document.createElement("input");s.setAttribute("type","checkbox"),(d=document.createElement("td")).setAttribute("colspan","2"),d.style.fontSize="10pt",d.appendChild(s);var r=document.createElement("span");mxUtils.write(r," "+mxResources.get("fitPage")),d.appendChild(r),mxEvent.addListener(r,"click",function(t){s.checked=!s.checked,a.checked=!s.checked,mxEvent.consume(t)}),mxEvent.addListener(s,"change",function(){a.checked=!s.checked}),o.appendChild(d),l.appendChild(o),o=o.cloneNode(!1);var a=document.createElement("input");a.setAttribute("type","checkbox"),(d=document.createElement("td")).style.fontSize="10pt",d.appendChild(a),r=document.createElement("span"),mxUtils.write(r," "+mxResources.get("posterPrint")+":"),d.appendChild(r),mxEvent.addListener(r,"click",function(t){a.checked=!a.checked,s.checked=!a.checked,mxEvent.consume(t)}),o.appendChild(d);var h=document.createElement("input");h.setAttribute("value","1"),h.setAttribute("type","number"),h.setAttribute("min","1"),h.setAttribute("size","4"),h.setAttribute("disabled","disabled"),h.style.width="50px",(d=document.createElement("td")).style.fontSize="10pt",d.appendChild(h),mxUtils.write(d," "+mxResources.get("pages")+" (max)"),o.appendChild(d),l.appendChild(o),mxEvent.addListener(a,"change",function(){a.checked?h.removeAttribute("disabled"):h.setAttribute("disabled","disabled"),s.checked=!a.checked}),o=o.cloneNode(!1),d=document.createElement("td"),mxUtils.write(d,mxResources.get("pageScale")+":"),o.appendChild(d);var u,d=document.createElement("td"),c=document.createElement("input");c.setAttribute("value","100 %"),c.setAttribute("size","5"),c.style.width="50px",d.appendChild(c),o.appendChild(d),l.appendChild(o),o=document.createElement("tr"),(d=document.createElement("td")).colSpan=2,d.style.paddingTop="20px",d.setAttribute("align","right"),(r=mxUtils.button(mxResources.get("cancel"),function(){t.hideDialog()})).className="geBtn",t.editor.cancelFirst&&d.appendChild(r),PrintDialog.previewEnabled&&((u=mxUtils.button(mxResources.get("preview"),function(){t.hideDialog(),e(!1)})).className="geBtn",d.appendChild(u)),(u=mxUtils.button(mxResources.get(PrintDialog.previewEnabled?"print":"ok"),function(){t.hideDialog(),e(!0)})).className="geBtn gePrimaryBtn",d.appendChild(u),t.editor.cancelFirst||d.appendChild(r),o.appendChild(d),l.appendChild(o),i.appendChild(l),this.container=i},PrintDialog.printPreview=function(t){try{var e;null!=t.wnd&&(e=function(){t.wnd.focus(),t.wnd.print(),t.wnd.close()},mxClient.IS_GC?window.setTimeout(e,500):e())}catch(t){}},PrintDialog.createPrintPreview=function(t,e,n,i,l,o,s){(e=new mxPrintPreview(t,e,n,i,l,o)).title=mxResources.get("preview"),e.printBackgroundImage=!0,e.autoOrigin=s,null!=(t=t.background)&&""!=t&&t!=mxConstants.NONE||(t="#ffffff"),e.backgroundColor=t;var r=e.writeHead;return e.writeHead=function(t){r.apply(this,arguments),t.writeln('<style type="text/css">'),t.writeln("@media screen {"),t.writeln("  body > div { padding:30px;box-sizing:content-box; }"),t.writeln("}"),t.writeln("</style>")},e},PrintDialog.previewEnabled=!0;var PageSetupDialog=function(t){function e(){null==h||h==mxConstants.NONE?(a.style.backgroundColor="",a.style.backgroundImage="url('"+Dialog.prototype.noColorImage+"')"):(a.style.backgroundColor=h,a.style.backgroundImage="")}function n(){null==p?(c.removeAttribute("title"),c.style.fontSize="",c.innerHTML=mxUtils.htmlEntities(mxResources.get("change"))+"..."):(c.setAttribute("title",p.src),c.style.fontSize="11px",c.innerHTML=mxUtils.htmlEntities(p.src.substring(0,42))+"...")}var i=t.editor.graph,l=document.createElement("table");l.style.width="100%",l.style.height="100%";var o=document.createElement("tbody"),s=document.createElement("tr");(d=document.createElement("td")).style.verticalAlign="top",d.style.fontSize="10pt",mxUtils.write(d,mxResources.get("paperSize")+":"),s.appendChild(d),(d=document.createElement("td")).style.verticalAlign="top",d.style.fontSize="10pt";var r=PageSetupDialog.addPageFormatPanel(d,"pagesetupdialog",i.pageFormat);s.appendChild(d),o.appendChild(s),s=document.createElement("tr"),d=document.createElement("td"),mxUtils.write(d,mxResources.get("background")+":"),s.appendChild(d),(d=document.createElement("td")).style.whiteSpace="nowrap",document.createElement("input").setAttribute("type","text");var a=document.createElement("button");a.style.width="18px",a.style.height="18px",a.style.marginRight="20px",a.style.backgroundPosition="center center",a.style.backgroundRepeat="no-repeat";var h=i.background;e(),mxEvent.addListener(a,"click",function(n){t.pickColor(h||"none",function(t){h=t,e()}),mxEvent.consume(n)}),d.appendChild(a),mxUtils.write(d,mxResources.get("gridSize")+":");var u=document.createElement("input");u.setAttribute("type","number"),u.setAttribute("min","0"),u.style.width="40px",u.style.marginLeft="6px",u.value=i.getGridSize(),d.appendChild(u),mxEvent.addListener(u,"change",function(){var t=parseInt(u.value);u.value=Math.max(1,isNaN(t)?i.getGridSize():t)}),s.appendChild(d),o.appendChild(s),s=document.createElement("tr"),d=document.createElement("td"),mxUtils.write(d,mxResources.get("image")+":"),s.appendChild(d);var d=document.createElement("td"),c=document.createElement("a");c.style.textDecoration="underline",c.style.cursor="pointer",c.style.color="#a0a0a0";var p=i.backgroundImage;mxEvent.addListener(c,"click",function(e){t.showBackgroundImageDialog(function(t,e){e||(p=t,n())},p),mxEvent.consume(e)}),n(),d.appendChild(c),s.appendChild(d),o.appendChild(s),s=document.createElement("tr"),(d=document.createElement("td")).colSpan=2,d.style.paddingTop="16px",d.setAttribute("align","right");var m=mxUtils.button(mxResources.get("cancel"),function(){t.hideDialog()});m.className="geBtn",t.editor.cancelFirst&&d.appendChild(m);var g=mxUtils.button(mxResources.get("apply"),function(){t.hideDialog();var e=parseInt(u.value);isNaN(e)||i.gridSize===e||i.setGridSize(e),(e=new ChangePageSetup(t,h,p,r.get())).ignoreColor=i.background==h,e.ignoreImage=(null!=i.backgroundImage?i.backgroundImage.src:null)===(null!=p?p.src:null),i.pageFormat.width==e.previousFormat.width&&i.pageFormat.height==e.previousFormat.height&&e.ignoreColor&&e.ignoreImage||i.model.execute(e)});g.className="geBtn gePrimaryBtn",d.appendChild(g),t.editor.cancelFirst||d.appendChild(m),s.appendChild(d),o.appendChild(s),l.appendChild(o),this.container=l};PageSetupDialog.addPageFormatPanel=function(t,e,n,i){function l(t,e,i){if(i||d!=document.activeElement&&c!=document.activeElement){for(t=!1,e=0;e<m.length;e++)i=m[e],f?"custom"==i.key&&(r.value=i.key,f=!1):null!=i.format&&("a4"==i.key?826==n.width?(n=mxRectangle.fromRectangle(n)).width=827:826==n.height&&((n=mxRectangle.fromRectangle(n)).height=827):"a5"==i.key&&(584==n.width?(n=mxRectangle.fromRectangle(n)).width=583:584==n.height&&((n=mxRectangle.fromRectangle(n)).height=583)),n.width==i.format.width&&n.height==i.format.height?(r.value=i.key,o.setAttribute("checked","checked"),o.defaultChecked=!0,o.checked=!0,s.removeAttribute("checked"),s.defaultChecked=!1,t=!(s.checked=!1)):n.width==i.format.height&&n.height==i.format.width&&(r.value=i.key,o.removeAttribute("checked"),o.defaultChecked=!1,o.checked=!1,s.setAttribute("checked","checked"),s.defaultChecked=!0,t=s.checked=!0));t?(a.style.display="",u.style.display="none"):(d.value=n.width/100,c.value=n.height/100,o.setAttribute("checked","checked"),r.value="custom",a.style.display="none",u.style.display="")}}e="format-"+e;var o=document.createElement("input");o.setAttribute("name",e),o.setAttribute("type","radio"),o.setAttribute("value","portrait");var s=document.createElement("input");s.setAttribute("name",e),s.setAttribute("type","radio"),s.setAttribute("value","landscape");var r=document.createElement("select");r.style.marginBottom="8px",r.style.width="202px";var a=document.createElement("div");a.style.marginLeft="4px",a.style.width="210px",a.style.height="24px",o.style.marginRight="6px",a.appendChild(o),(e=document.createElement("span")).style.maxWidth="100px",mxUtils.write(e,mxResources.get("portrait")),a.appendChild(e),s.style.marginLeft="10px",s.style.marginRight="6px",a.appendChild(s);var h=document.createElement("span");h.style.width="100px",mxUtils.write(h,mxResources.get("landscape")),a.appendChild(h);var u=document.createElement("div");u.style.marginLeft="4px",u.style.width="210px",u.style.height="24px";var d=document.createElement("input");d.setAttribute("size","7"),d.style.textAlign="right",u.appendChild(d),mxUtils.write(u," in x ");var c=document.createElement("input");c.setAttribute("size","7"),c.style.textAlign="right",u.appendChild(c),mxUtils.write(u," in"),a.style.display="none",u.style.display="none";for(var p={},m=PageSetupDialog.getFormats(),g=0;g<m.length;g++){var x=m[g];p[x.key]=x;var y=document.createElement("option");y.setAttribute("value",x.key),mxUtils.write(y,x.title),r.appendChild(y)}var f=!1;function v(t,e){null!=(t=p[r.value]).format?(d.value=t.format.width/100,c.value=t.format.height/100,u.style.display="none",a.style.display=""):(a.style.display="none",u.style.display=""),t=parseFloat(d.value),(isNaN(t)||t<=0)&&(d.value=n.width/100),t=parseFloat(c.value),(isNaN(t)||t<=0)&&(c.value=n.height/100),t=new mxRectangle(0,0,Math.floor(100*parseFloat(d.value)),Math.floor(100*parseFloat(c.value))),"custom"!=r.value&&s.checked&&(t=new mxRectangle(0,0,t.height,t.width)),e&&f||t.width==b.width&&t.height==b.height||(b=t,null!=i&&i(b))}l(),t.appendChild(r),mxUtils.br(t),t.appendChild(a),t.appendChild(u);var b=n;return mxEvent.addListener(e,"click",function(t){o.checked=!0,v(t),mxEvent.consume(t)}),mxEvent.addListener(h,"click",function(t){s.checked=!0,v(t),mxEvent.consume(t)}),mxEvent.addListener(d,"blur",v),mxEvent.addListener(d,"click",v),mxEvent.addListener(c,"blur",v),mxEvent.addListener(c,"click",v),mxEvent.addListener(s,"change",v),mxEvent.addListener(o,"change",v),mxEvent.addListener(r,"change",function(t){f="custom"==r.value,v(t,!0)}),v(),{set:function(t){n=t,l(null,null,!0)},get:function(){return b},widthInput:d,heightInput:c}},PageSetupDialog.getFormats=function(){return[{key:"letter",title:'US-Letter (8,5" x 11")',format:mxConstants.PAGE_FORMAT_LETTER_PORTRAIT},{key:"legal",title:'US-Legal (8,5" x 14")',format:new mxRectangle(0,0,850,1400)},{key:"tabloid",title:'US-Tabloid (11" x 17")',format:new mxRectangle(0,0,1100,1700)},{key:"executive",title:'US-Executive (7" x 10")',format:new mxRectangle(0,0,700,1e3)},{key:"a0",title:"A0 (841 mm x 1189 mm)",format:new mxRectangle(0,0,3300,4681)},{key:"a1",title:"A1 (594 mm x 841 mm)",format:new mxRectangle(0,0,2339,3300)},{key:"a2",title:"A2 (420 mm x 594 mm)",format:new mxRectangle(0,0,1654,2336)},{key:"a3",title:"A3 (297 mm x 420 mm)",format:new mxRectangle(0,0,1169,1654)},{key:"a4",title:"A4 (210 mm x 297 mm)",format:mxConstants.PAGE_FORMAT_A4_PORTRAIT},{key:"a5",title:"A5 (148 mm x 210 mm)",format:new mxRectangle(0,0,583,827)},{key:"a6",title:"A6 (105 mm x 148 mm)",format:new mxRectangle(0,0,413,583)},{key:"a7",title:"A7 (74 mm x 105 mm)",format:new mxRectangle(0,0,291,413)},{key:"b4",title:"B4 (250 mm x 353 mm)",format:new mxRectangle(0,0,980,1390)},{key:"b5",title:"B5 (176 mm x 250 mm)",format:new mxRectangle(0,0,690,980)},{key:"16-9",title:"16:9 (1600 x 900)",format:new mxRectangle(0,0,900,1600)},{key:"16-10",title:"16:10 (1920 x 1200)",format:new mxRectangle(0,0,1200,1920)},{key:"4-3",title:"4:3 (1600 x 1200)",format:new mxRectangle(0,0,1200,1600)},{key:"custom",title:mxResources.get("custom"),format:null}]};var FilenameDialog=function(t,e,n,i,l,o,s,r,a,h,u,d){a=null==a||a;var c=document.createElement("table"),p=document.createElement("tbody");c.style.marginTop="8px";var m=document.createElement("tr"),g=document.createElement("td");g.style.whiteSpace="nowrap",g.style.fontSize="10pt",g.style.width=u?"80px":"120px",mxUtils.write(g,(l||mxResources.get("filename"))+":"),m.appendChild(g);var x=document.createElement("input");x.setAttribute("value",e||""),x.style.marginLeft="4px",x.style.width=null!=d?d+"px":"180px";var y=mxUtils.button(n,function(){null!=o&&!o(x.value)||(a&&t.hideDialog(),i(x.value))});y.className="geBtn gePrimaryBtn",this.init=function(){var t,e;null==l&&null!=s||(x.focus(),mxClient.IS_GC||mxClient.IS_FF||5<=document.documentMode?x.select():document.execCommand("selectAll",!1,null),Graph.fileSupport&&null!=(t=c.parentNode)&&(e=null,mxEvent.addListener(t,"dragleave",function(t){null!=e&&(e.style.backgroundColor="",e=null),t.stopPropagation(),t.preventDefault()}),mxEvent.addListener(t,"dragover",mxUtils.bind(this,function(t){null==e&&(!mxClient.IS_IE||10<document.documentMode)&&((e=x).style.backgroundColor="#ebf2f9"),t.stopPropagation(),t.preventDefault()})),mxEvent.addListener(t,"drop",mxUtils.bind(this,function(t){null!=e&&(e.style.backgroundColor="",e=null),0<=mxUtils.indexOf(t.dataTransfer.types,"text/uri-list")&&(x.value=decodeURIComponent(t.dataTransfer.getData("text/uri-list")),y.click()),t.stopPropagation(),t.preventDefault()}))))},(g=document.createElement("td")).style.whiteSpace="nowrap",g.appendChild(x),m.appendChild(g),null==l&&null!=s||(p.appendChild(m),null!=u&&(null!=t.editor.diagramFileTypes&&((m=FilenameDialog.createFileTypes(t,x,t.editor.diagramFileTypes)).style.marginLeft="6px",m.style.width="74px",g.appendChild(m),x.style.width=null!=d?d-40+"px":"140px"),g.appendChild(FilenameDialog.createTypeHint(t,x,u)))),null!=s&&(m=document.createElement("tr"),(g=document.createElement("td")).colSpan=2,g.appendChild(s),m.appendChild(g),p.appendChild(m)),m=document.createElement("tr"),(g=document.createElement("td")).colSpan=2,g.style.paddingTop="20px",g.style.whiteSpace="nowrap",g.setAttribute("align","right"),(u=mxUtils.button(mxResources.get("cancel"),function(){t.hideDialog(),null!=h&&h()})).className="geBtn",t.editor.cancelFirst&&g.appendChild(u),null!=r&&((d=mxUtils.button(mxResources.get("help"),function(){t.editor.graph.openLink(r)})).className="geBtn",g.appendChild(d)),mxEvent.addListener(x,"keypress",function(t){13==t.keyCode&&y.click()}),g.appendChild(y),t.editor.cancelFirst||g.appendChild(u),m.appendChild(g),p.appendChild(m),c.appendChild(p),this.container=c};function ChangeGridColor(t,e){this.ui=t,this.color=e}function ChangePageSetup(t,e,n,i,l){this.ui=t,this.previousColor=this.color=e,this.previousImage=this.image=n,this.previousFormat=this.format=i,this.previousPageScale=this.pageScale=l,this.ignoreImage=this.ignoreColor=!1}function TableLayout(t){mxGraphLayout.call(this,t)}function Menubar(t,e){this.editorUi=t,this.container=e}function Menu(t,e){mxEventSource.call(this),this.funct=t,this.enabled=null==e||e}FilenameDialog.filenameHelpLink=null,FilenameDialog.createTypeHint=function(t,e,n){var i=document.createElement("img");function l(){i.setAttribute("src",Editor.helpImage),i.setAttribute("title",mxResources.get("help"));for(var t=0;t<n.length;t++)if(0<n[t].ext.length&&e.value.toLowerCase().substring(e.value.length-n[t].ext.length-1)=="."+n[t].ext){i.setAttribute("src",mxClient.imageBasePath+"/warning.png"),i.setAttribute("title",mxResources.get(n[t].title));break}}return i.style.cssText="vertical-align:top;height:16px;width:16px;margin-left:4px;background-repeat:no-repeat;background-position:center bottom;cursor:pointer;",mxUtils.setOpacity(i,70),mxEvent.addListener(e,"keyup",l),mxEvent.addListener(e,"change",l),mxEvent.addListener(i,"click",function(e){var n=i.getAttribute("title");i.getAttribute("src")==Editor.helpImage?t.editor.graph.openLink(FilenameDialog.filenameHelpLink):""!=n&&t.showError(null,n,mxResources.get("help"),function(){t.editor.graph.openLink(FilenameDialog.filenameHelpLink)},null,mxResources.get("ok"),null,null,null,340,90),mxEvent.consume(e)}),l(),i},FilenameDialog.createFileTypes=function(t,e,n){var i=document.createElement("select");for(t=0;t<n.length;t++){var l=document.createElement("option");l.setAttribute("value",t),mxUtils.write(l,mxResources.get(n[t].description)+" (."+n[t].extension+")"),i.appendChild(l)}return mxEvent.addListener(i,"change",function(t){t=n[i.value].extension;var l=e.value.lastIndexOf(".");0<l?(t=n[i.value].extension,e.value=e.value.substring(0,l+1)+t):e.value=e.value+"."+t,"createEvent"in document?((t=document.createEvent("HTMLEvents")).initEvent("change",!1,!0),e.dispatchEvent(t)):e.fireEvent("onchange")}),t=function(t){if((t=0)<(l=e.value.lastIndexOf(".")))for(var l=e.value.toLowerCase().substring(l+1),o=0;o<n.length;o++)if(l==n[o].extension){t=o;break}i.value=t},mxEvent.addListener(e,"change",t),mxEvent.addListener(e,"keyup",t),t(),i},function(){mxGraphView.prototype.validateBackgroundPage=function(){var t=this.graph;if(null!=t.container&&!t.transparentBackground){if(t.pageVisible){var e=this.getBackgroundPageBounds();if(null==this.backgroundPageShape){for(var n=t.container.firstChild;null!=n&&n.nodeType!=mxConstants.NODETYPE_ELEMENT;)n=n.nextSibling;null!=n&&(this.backgroundPageShape=this.createBackgroundPageShape(e),this.backgroundPageShape.scale=1,this.backgroundPageShape.isShadow=!0,this.backgroundPageShape.dialect=mxConstants.DIALECT_STRICTHTML,this.backgroundPageShape.init(t.container),n.style.position="absolute",t.container.insertBefore(this.backgroundPageShape.node,n),this.backgroundPageShape.redraw(),this.backgroundPageShape.node.className="geBackgroundPage",mxEvent.addListener(this.backgroundPageShape.node,"dblclick",mxUtils.bind(this,function(e){t.dblClick(e)})),mxEvent.addGestureListeners(this.backgroundPageShape.node,mxUtils.bind(this,function(e){t.fireMouseEvent(mxEvent.MOUSE_DOWN,new mxMouseEvent(e))}),mxUtils.bind(this,function(e){null!=t.tooltipHandler&&t.tooltipHandler.isHideOnHover()&&t.tooltipHandler.hide(),t.isMouseDown&&!mxEvent.isConsumed(e)&&t.fireMouseEvent(mxEvent.MOUSE_MOVE,new mxMouseEvent(e))}),mxUtils.bind(this,function(e){t.fireMouseEvent(mxEvent.MOUSE_UP,new mxMouseEvent(e))})))}else this.backgroundPageShape.scale=1,this.backgroundPageShape.bounds=e,this.backgroundPageShape.redraw()}else null!=this.backgroundPageShape&&(this.backgroundPageShape.destroy(),this.backgroundPageShape=null);this.validateBackgroundStyles()}},mxGraphView.prototype.validateBackgroundStyles=function(){var t,e=this.graph,n=null==e.background||e.background==mxConstants.NONE?e.defaultPageBackgroundColor:e.background,i=null!=n&&this.gridColor!=n.toLowerCase()?this.gridColor:"#ffffff",l="none",o="";(e.isGridEnabled()||e.gridVisible)&&(o=10,mxClient.IS_SVG?(l=unescape(encodeURIComponent(this.createSvgGrid(i))),l="url(data:image/svg+xml;base64,"+(l=window.btoa?btoa(l):Base64.encode(l,!0))+")",o=e.gridSize*this.scale*this.gridSteps):l="url("+this.gridImage+")",t=i=0,null!=e.view.backgroundPageShape&&(i=1+(t=this.getBackgroundPageBounds()).x,t=1+t.y),o=-Math.round(o-mxUtils.mod(this.translate.x*this.scale-i,o))+"px "+-Math.round(o-mxUtils.mod(this.translate.y*this.scale-t,o))+"px"),null!=(i=e.view.canvas).ownerSVGElement&&(i=i.ownerSVGElement),null!=e.view.backgroundPageShape?(e.view.backgroundPageShape.node.style.backgroundPosition=o,e.view.backgroundPageShape.node.style.backgroundImage=l,e.view.backgroundPageShape.node.style.backgroundColor=n,e.view.backgroundPageShape.node.style.borderColor=e.defaultPageBorderColor,e.container.className="geDiagramContainer geDiagramBackdrop",i.style.backgroundImage="none",i.style.backgroundColor=""):(e.container.className="geDiagramContainer",i.style.backgroundPosition=o,i.style.backgroundColor=n,i.style.backgroundImage=l)},mxGraphView.prototype.createSvgGrid=function(t){for(var e=this.graph.gridSize*this.scale;e<this.minGridSize;)e*=2;for(var n=this.gridSteps*e,i=[],l=1;l<this.gridSteps;l++){var o=l*e;i.push("M 0 "+o+" L "+n+" "+o+" M "+o+" 0 L "+o+" "+n)}return'<svg width="'+n+'" height="'+n+'" xmlns="'+mxConstants.NS_SVG+'"><defs><pattern id="grid" width="'+n+'" height="'+n+'" patternUnits="userSpaceOnUse"><path d="'+i.join(" ")+'" fill="none" stroke="'+t+'" opacity="0.2" stroke-width="1"/><path d="M '+n+" 0 L 0 0 0 "+n+'" fill="none" stroke="'+t+'" stroke-width="1"/></pattern></defs><rect width="100%" height="100%" fill="url(#grid)"/></svg>'};var t=mxGraph.prototype.panGraph;mxGraph.prototype.panGraph=function(e,n){var i,l;t.apply(this,arguments),null!=this.shiftPreview1&&(null!=(i=this.view.canvas).ownerSVGElement&&(i=i.ownerSVGElement),l=this.gridSize*this.view.scale*this.view.gridSteps,l=-Math.round(l-mxUtils.mod(this.view.translate.x*this.view.scale+e,l))+"px "+-Math.round(l-mxUtils.mod(this.view.translate.y*this.view.scale+n,l))+"px",i.style.backgroundPosition=l)},mxGraph.prototype.updatePageBreaks=function(t,e,n){var i=this.view.scale,l=this.view.translate,o=this.pageFormat,s=i*this.pageScale,r=this.view.getBackgroundPageBounds();e=r.width,n=r.height;var a=new mxRectangle(i*l.x,i*l.y,o.width*s,o.height*s),h=(t=t&&Math.min(a.width,a.height)>this.minPageBreakDist)?Math.ceil(n/a.height)-1:0,u=t?Math.ceil(e/a.width)-1:0,d=r.x+e,c=r.y+n;null==this.horizontalPageBreaks&&0<h&&(this.horizontalPageBreaks=[]),null==this.verticalPageBreaks&&0<u&&(this.verticalPageBreaks=[]),(t=mxUtils.bind(this,function(t){if(null!=t){for(var e=t==this.horizontalPageBreaks?h:u,n=0;n<=e;n++){var i=t==this.horizontalPageBreaks?[new mxPoint(Math.round(r.x),Math.round(r.y+(n+1)*a.height)),new mxPoint(Math.round(d),Math.round(r.y+(n+1)*a.height))]:[new mxPoint(Math.round(r.x+(n+1)*a.width),Math.round(r.y)),new mxPoint(Math.round(r.x+(n+1)*a.width),Math.round(c))];null!=t[n]?(t[n].points=i,t[n].redraw()):((i=new mxPolyline(i,this.pageBreakColor)).dialect=this.dialect,i.isDashed=this.pageBreakDashed,i.pointerEvents=!1,i.init(this.view.backgroundPane),i.redraw(),t[n]=i)}for(n=e;n<t.length;n++)t[n].destroy();t.splice(e,t.length-e)}}))(this.horizontalPageBreaks),t(this.verticalPageBreaks)};var e=mxGraphHandler.prototype.shouldRemoveCellsFromParent;mxGraphHandler.prototype.shouldRemoveCellsFromParent=function(t,n,i){for(var l=0;l<n.length;l++){if(this.graph.isTableCell(n[l])||this.graph.isTableRow(n[l]))return!1;if(this.graph.getModel().isVertex(n[l])){var o=this.graph.getCellGeometry(n[l]);if(null!=o&&o.relative)return!1}}return e.apply(this,arguments)};var n=mxConnectionHandler.prototype.createMarker;mxConnectionHandler.prototype.createMarker=function(){var t=n.apply(this,arguments);return t.intersects=mxUtils.bind(this,function(e,n){return!!this.isConnecting()||mxCellMarker.prototype.intersects.apply(t,arguments)}),t},mxGraphView.prototype.createBackgroundPageShape=function(t){return new mxRectangleShape(t,"#ffffff",this.graph.defaultPageBorderColor)},mxGraphView.prototype.getBackgroundPageBounds=function(){var t=this.getGraphBounds(),e=0<t.width?t.x/this.scale-this.translate.x:0,n=0<t.height?t.y/this.scale-this.translate.y:0,i=(l=this.graph.pageFormat).width*(o=this.graph.pageScale),l=l.height*o,o=Math.floor(Math.min(0,e)/i),s=Math.floor(Math.min(0,n)/l);return new mxRectangle(this.scale*(this.translate.x+o*i),this.scale*(this.translate.y+s*l),this.scale*(Math.ceil(Math.max(1,e+t.width/this.scale)/i)-o)*i,this.scale*(Math.ceil(Math.max(1,n+t.height/this.scale)/l)-s)*l)};var i=mxGraph.prototype.panGraph;mxGraph.prototype.panGraph=function(t,e){i.apply(this,arguments),this.dialect==mxConstants.DIALECT_SVG||null==this.view.backgroundPageShape||this.useScrollbarsForPanning&&mxUtils.hasScrollbars(this.container)||(this.view.backgroundPageShape.node.style.marginLeft=t+"px",this.view.backgroundPageShape.node.style.marginTop=e+"px")};var l=mxPopupMenu.prototype.addItem;mxPopupMenu.prototype.addItem=function(t,e,n,i,o,s){var r=l.apply(this,arguments);return null==s||s||mxEvent.addListener(r,"mousedown",function(t){mxEvent.consume(t)}),r};var o=mxGraphHandler.prototype.isPropagateSelectionCell;mxGraphHandler.prototype.isPropagateSelectionCell=function(t,e,n){var i,l=this.graph.model.getParent(t);return e?(i=this.graph.model.isEdge(t)?null:this.graph.getCellGeometry(t),i=!this.graph.model.isEdge(l)&&!this.graph.isSiblingSelected(t)&&(null!=i&&i.relative||!this.graph.isContainer(l)||this.graph.isPart(t))):(i=o.apply(this,arguments),(this.graph.isTableCell(t)||this.graph.isTableRow(t))&&(this.graph.isTable(i=l)||(i=this.graph.model.getParent(i)),i=!this.graph.selectionCellsHandler.isHandled(i)||this.graph.isCellSelected(i)&&this.graph.isToggleEvent(n.getEvent())||this.graph.isCellSelected(t)&&!this.graph.isToggleEvent(n.getEvent())||this.graph.isTableCell(t)&&this.graph.isCellSelected(l))),i},mxPopupMenuHandler.prototype.getCellForPopupEvent=function(t){t=t.getCell();for(var e=this.graph.getModel(),n=e.getParent(t),i=this.graph.view.getState(n),l=this.graph.isCellSelected(t);null!=i&&(e.isVertex(n)||e.isEdge(n));){var o=this.graph.isCellSelected(n);l=l||o,(o||!l&&(this.graph.isTableCell(t)||this.graph.isTableRow(t)))&&(t=n),n=e.getParent(n)}return t}}(),EditorUi=function(t,e,n){mxEventSource.call(this),this.destroyFunctions=[],this.editor=t||new Editor,this.container=e||document.body;var i=this.editor.graph;if(i.lightbox=n,this.initialDefaultVertexStyle=mxUtils.clone(i.defaultVertexStyle),this.initialDefaultEdgeStyle=mxUtils.clone(i.defaultEdgeStyle),i.useCssTransforms&&(this.lazyZoomDelay=0),mxClient.IS_SVG?mxPopupMenu.prototype.submenuImage="data:image/gif;base64,R0lGODlhCQAJAIAAAP///zMzMyH5BAEAAAAALAAAAAAJAAkAAAIPhI8WebHsHopSOVgb26AAADs=":(new Image).src=mxPopupMenu.prototype.submenuImage,mxClient.IS_SVG||null==mxConnectionHandler.prototype.connectImage||((new Image).src=mxConnectionHandler.prototype.connectImage.src),this.editor.chromeless&&!this.editor.editable&&(this.footerHeight=0,i.isEnabled=function(){return!1},i.panningHandler.isForcePanningEvent=function(t){return!mxEvent.isPopupTrigger(t.getEvent())}),this.actions=new Actions(this),this.menus=this.createMenus(),!i.standalone){var l="rounded shadow glass dashed dashPattern labelBackgroundColor comic sketch fillWeight hachureGap hachureAngle jiggle disableMultiStroke disableMultiStrokeFill fillStyle curveFitting simplification sketchStyle pointerEvents".split(" "),o="shape edgeStyle curved rounded elbow jumpStyle jumpSize comic sketch fillWeight hachureGap hachureAngle jiggle disableMultiStroke disableMultiStrokeFill fillStyle curveFitting simplification sketchStyle".split(" ");this.setDefaultStyle=function(t){try{var e=i.view.getState(t);if(null!=e){var n=t.clone();n.style="";var l=i.getCellStyle(n);for(r in t=[],n=[],e.style)l[r]!=e.style[r]&&(t.push(e.style[r]),n.push(r));for(var o=null!=(s=i.getModel().getStyle(e.cell))?s.split(";"):[],s=0;s<o.length;s++){var r,a,h=o[s],u=h.indexOf("=");0<=u&&(r=h.substring(0,u),a=h.substring(u+1),null!=l[r]&&"none"==a&&(t.push(a),n.push(r)))}i.getModel().isEdge(e.cell)?i.currentEdgeStyle={}:i.currentVertexStyle={},this.fireEvent(new mxEventObject("styleChanged","keys",n,"values",t,"cells",[e.cell]))}}catch(t){this.handleError(t)}},this.clearDefaultStyle=function(){i.currentEdgeStyle=mxUtils.clone(i.defaultEdgeStyle),i.currentVertexStyle=mxUtils.clone(i.defaultVertexStyle),this.fireEvent(new mxEventObject("styleChanged","keys",[],"values",[],"cells",[]))};var s=["fontFamily","fontSource","fontSize","fontColor"];for(e=0;e<s.length;e++)mxUtils.indexOf(l,s[e])<0&&l.push(s[e]);var r="edgeStyle startArrow startFill startSize endArrow endFill endSize".split(" "),a=[["startArrow","startFill","endArrow","endFill"],["startSize","endSize"],["sourcePerimeterSpacing","targetPerimeterSpacing"],["strokeColor","strokeWidth"],["fillColor","gradientColor"],["opacity"],["align"],["html"]];for(e=0;e<a.length;e++)for(n=0;n<a[e].length;n++)l.push(a[e][n]);for(e=0;e<o.length;e++)mxUtils.indexOf(l,o[e])<0&&l.push(o[e]);function h(t,e,n,s,r){s=null!=s?s:i.currentVertexStyle,r=null!=r?r:i.currentEdgeStyle,(n=null!=n?n:i.getModel()).beginUpdate();try{for(var h=0;h<t.length;h++){var u=t[h];if(e)var d=["fontSize","fontFamily","fontColor"];else for(var c=n.getStyle(u),p=null!=c?c.split(";"):[],m=(d=l.slice(),0);m<p.length;m++){var g=p[m],x=g.indexOf("=");if(0<=x){var y=g.substring(0,x),f=mxUtils.indexOf(d,y);0<=f&&d.splice(f,1);for(var v=0;v<a.length;v++){var b=a[v];if(0<=mxUtils.indexOf(b,y))for(var C=0;C<b.length;C++){var E=mxUtils.indexOf(d,b[C]);0<=E&&d.splice(E,1)}}}}var S=n.isEdge(u),w=(v=S?r:s,n.getStyle(u));for(m=0;m<d.length;m++){var T=v[y=d[m]];null==T||"shape"==y&&!S||S&&!(mxUtils.indexOf(o,y)<0)||(w=mxUtils.setStyle(w,y,T))}Editor.simpleLabels&&(w=mxUtils.setStyle(mxUtils.setStyle(w,"html",null),"whiteSpace",null)),n.setStyle(u,w)}}finally{n.endUpdate()}}i.addListener("cellsInserted",function(t,e){h(e.getProperty("cells"))}),i.addListener("textInserted",function(t,e){h(e.getProperty("cells"),!0)}),this.insertHandler=h,this.createDivs(),this.createUi(),this.refresh();var u,d=mxUtils.bind(this,function(t){return null==t&&(t=window.event),i.isEditing()||null!=t&&this.isSelectionAllowed(t)});this.container==document.body&&(this.menubarContainer.onselectstart=d,this.menubarContainer.onmousedown=d,this.toolbarContainer.onselectstart=d,this.toolbarContainer.onmousedown=d,this.diagramContainer.onselectstart=d,this.diagramContainer.onmousedown=d,this.sidebarContainer.onselectstart=d,this.sidebarContainer.onmousedown=d,this.formatContainer.onselectstart=d,this.formatContainer.onmousedown=d,this.footerContainer.onselectstart=d,this.footerContainer.onmousedown=d,null!=this.tabContainer&&(this.tabContainer.onselectstart=d)),!this.editor.chromeless||this.editor.editable?(e=function(t){if(null!=t){var e=mxEvent.getSource(t);if("A"==e.nodeName)for(;null!=e;){if("geHint"==e.className)return!0;e=e.parentNode}}return d(t)},mxClient.IS_IE&&(void 0===document.documentMode||document.documentMode<9)?mxEvent.addListener(this.diagramContainer,"contextmenu",e):this.diagramContainer.oncontextmenu=e):i.panningHandler.usePopupTrigger=!1,i.init(this.diagramContainer),mxClient.IS_SVG&&null!=i.view.getDrawPane()&&null!=(e=i.view.getDrawPane().ownerSVGElement)&&(e.style.position="absolute"),this.hoverIcons=this.createHoverIcons(),null!=i.graphHandler&&(u=i.graphHandler.start,i.graphHandler.start=function(){null!=E.hoverIcons&&E.hoverIcons.reset(),u.apply(this,arguments)}),mxEvent.addListener(this.diagramContainer,"mousemove",mxUtils.bind(this,function(t){var e=mxUtils.getOffset(this.diagramContainer);0<mxEvent.getClientX(t)-e.x-this.diagramContainer.clientWidth||0<mxEvent.getClientY(t)-e.y-this.diagramContainer.clientHeight?this.diagramContainer.setAttribute("title",mxResources.get("panTooltip")):this.diagramContainer.removeAttribute("title")}));var c=!1,p=this.hoverIcons.isResetEvent;this.hoverIcons.isResetEvent=function(t,e){return c||p.apply(this,arguments)},this.keydownHandler=mxUtils.bind(this,function(t){32!=t.which||i.isEditing()?mxEvent.isConsumed(t)||27!=t.keyCode||this.hideDialog(null,!0):(c=!0,this.hoverIcons.reset(),i.container.style.cursor="move",i.isEditing()||mxEvent.getSource(t)!=i.container||mxEvent.consume(t))}),mxEvent.addListener(document,"keydown",this.keydownHandler),this.keyupHandler=mxUtils.bind(this,function(t){i.container.style.cursor="",c=!1}),mxEvent.addListener(document,"keyup",this.keyupHandler);var m=i.panningHandler.isForcePanningEvent;i.panningHandler.isForcePanningEvent=function(t){return m.apply(this,arguments)||c||mxEvent.isMouseEvent(t.getEvent())&&(this.usePopupTrigger||!mxEvent.isPopupTrigger(t.getEvent()))&&(!mxEvent.isControlDown(t.getEvent())&&mxEvent.isRightMouseButton(t.getEvent())||mxEvent.isMiddleMouseButton(t.getEvent()))};var g=i.cellEditor.isStopEditingEvent;i.cellEditor.isStopEditingEvent=function(t){return g.apply(this,arguments)||13==t.keyCode&&(!mxClient.IS_SF&&mxEvent.isControlDown(t)||mxClient.IS_MAC&&mxEvent.isMetaDown(t)||mxClient.IS_SF&&mxEvent.isShiftDown(t))};var x=i.isZoomWheelEvent,y=!(i.isZoomWheelEvent=function(){return c||x.apply(this,arguments)}),f=null,v=null,b=null,C=mxUtils.bind(this,function(){if(null!=this.toolbar&&y!=i.cellEditor.isContentEditing()){for(var t=this.toolbar.container.firstChild,e=[];null!=t;){var n=t.nextSibling;mxUtils.indexOf(this.toolbar.staticElements,t)<0&&(t.parentNode.removeChild(t),e.push(t)),t=n}if(t=this.toolbar.fontMenu,n=this.toolbar.sizeMenu,null==b)this.toolbar.createTextToolbar();else{for(var l=0;l<b.length;l++)this.toolbar.container.appendChild(b[l]);this.toolbar.fontMenu=f,this.toolbar.sizeMenu=v}y=i.cellEditor.isContentEditing(),f=t,v=n,b=e}}),E=this,S=i.cellEditor.startEditing;i.cellEditor.startEditing=function(){var t,e;S.apply(this,arguments),C(),i.cellEditor.isContentEditing()&&(t=!1,e=function(){t||(t=!0,window.setTimeout(function(){var e=i.getSelectedEditingElement();null==e||null!=(e=mxUtils.getCurrentStyle(e))&&null!=E.toolbar&&(E.toolbar.setFontName(Graph.stripQuotes(e.fontFamily)),E.toolbar.setFontSize(parseInt(e.fontSize))),t=!1},0))},mxEvent.addListener(i.cellEditor.textarea,"input",e),mxEvent.addListener(i.cellEditor.textarea,"touchend",e),mxEvent.addListener(i.cellEditor.textarea,"mouseup",e),mxEvent.addListener(i.cellEditor.textarea,"keyup",e),e())};var w=i.cellEditor.stopEditing;if(i.cellEditor.stopEditing=function(t,e){try{w.apply(this,arguments),C()}catch(t){E.handleError(t)}},i.container.setAttribute("tabindex","0"),i.container.style.cursor="default",window.self===window.top&&null!=i.container.parentNode)try{i.container.focus()}catch(t){}var T=i.fireMouseEvent;i.fireMouseEvent=function(t,e,n){t==mxEvent.MOUSE_DOWN&&this.container.focus(),T.apply(this,arguments)},i.popupMenuHandler.autoExpand=!0,null!=this.menus&&(i.popupMenuHandler.factoryMethod=mxUtils.bind(this,function(t,e,n){this.menus.createPopupMenu(t,e,n)})),mxEvent.addGestureListeners(document,mxUtils.bind(this,function(t){i.popupMenuHandler.hideMenu()})),this.keyHandler=this.createKeyHandler(t),this.getKeyHandler=function(){return keyHandler},i.connectionHandler.addListener(mxEvent.CONNECT,function(t,e){t=[e.getProperty("cell")],e.getProperty("terminalInserted")&&t.push(e.getProperty("terminal")),h(t)}),this.addListener("styleChanged",mxUtils.bind(this,function(t,e){var n=e.getProperty("cells"),a=t=!1;if(0<n.length)for(var h=0;h<n.length&&(t=i.getModel().isVertex(n[h])||t,!(a=i.getModel().isEdge(n[h])||a)||!t);h++);else a=t=!0;for(n=e.getProperty("keys"),e=e.getProperty("values"),h=0;h<n.length;h++){var u=0<=mxUtils.indexOf(s,n[h]);("strokeColor"!=n[h]||null!=e[h]&&"none"!=e[h])&&(0<=mxUtils.indexOf(o,n[h])?a||0<=mxUtils.indexOf(r,n[h])?null==e[h]?delete i.currentEdgeStyle[n[h]]:i.currentEdgeStyle[n[h]]=e[h]:t&&0<=mxUtils.indexOf(l,n[h])&&(null==e[h]?delete i.currentVertexStyle[n[h]]:i.currentVertexStyle[n[h]]=e[h]):0<=mxUtils.indexOf(l,n[h])&&((t||u)&&(null==e[h]?delete i.currentVertexStyle[n[h]]:i.currentVertexStyle[n[h]]=e[h]),(a||u||0<=mxUtils.indexOf(r,n[h]))&&(null==e[h]?delete i.currentEdgeStyle[n[h]]:i.currentEdgeStyle[n[h]]=e[h])))}null!=this.toolbar&&(this.toolbar.setFontName(i.currentVertexStyle.fontFamily||Menus.prototype.defaultFont),this.toolbar.setFontSize(i.currentVertexStyle.fontSize||Menus.prototype.defaultFontSize),null!=this.toolbar.edgeStyleMenu&&(this.toolbar.edgeStyleMenu.getElementsByTagName("div")[0].className="orthogonalEdgeStyle"==i.currentEdgeStyle.edgeStyle&&"1"==i.currentEdgeStyle.curved?"geSprite geSprite-curved":"straight"==i.currentEdgeStyle.edgeStyle||"none"==i.currentEdgeStyle.edgeStyle||null==i.currentEdgeStyle.edgeStyle?"geSprite geSprite-straight":"entityRelationEdgeStyle"==i.currentEdgeStyle.edgeStyle?"geSprite geSprite-entity":"elbowEdgeStyle"==i.currentEdgeStyle.edgeStyle?"geSprite geSprite-"+("vertical"==i.currentEdgeStyle.elbow?"verticalelbow":"horizontalelbow"):"isometricEdgeStyle"==i.currentEdgeStyle.edgeStyle?"geSprite geSprite-"+("vertical"==i.currentEdgeStyle.elbow?"verticalisometric":"horizontalisometric"):"geSprite geSprite-orthogonal"),null!=this.toolbar.edgeShapeMenu&&(this.toolbar.edgeShapeMenu.getElementsByTagName("div")[0].className="link"==i.currentEdgeStyle.shape?"geSprite geSprite-linkedge":"flexArrow"==i.currentEdgeStyle.shape?"geSprite geSprite-arrow":"arrow"==i.currentEdgeStyle.shape?"geSprite geSprite-simplearrow":"geSprite geSprite-connection"),null!=this.toolbar.lineStartMenu&&(this.toolbar.lineStartMenu.getElementsByTagName("div")[0].className=this.getCssClassForMarker("start",i.currentEdgeStyle.shape,i.currentEdgeStyle[mxConstants.STYLE_STARTARROW],mxUtils.getValue(i.currentEdgeStyle,"startFill","1"))),null!=this.toolbar.lineEndMenu&&(this.toolbar.lineEndMenu.getElementsByTagName("div")[0].className=this.getCssClassForMarker("end",i.currentEdgeStyle.shape,i.currentEdgeStyle[mxConstants.STYLE_ENDARROW],mxUtils.getValue(i.currentEdgeStyle,"endFill","1"))))})),null!=this.toolbar&&(t=mxUtils.bind(this,function(){var t=i.currentVertexStyle.fontFamily||"Helvetica",e=String(i.currentVertexStyle.fontSize||"12"),n=i.getView().getState(i.getSelectionCell());null!=n&&(e=n.style[mxConstants.STYLE_FONTSIZE]||e,10<(t=n.style[mxConstants.STYLE_FONTFAMILY]||t).length&&(t=t.substring(0,8)+"...")),this.toolbar.setFontName(t),this.toolbar.setFontSize(e)}),i.getSelectionModel().addListener(mxEvent.CHANGE,t),i.getModel().addListener(mxEvent.CHANGE,t)),i.addListener(mxEvent.CELLS_ADDED,function(t,e){t=e.getProperty("cells"),e=e.getProperty("parent"),i.getModel().isLayer(e)&&!i.isCellVisible(e)&&null!=t&&0<t.length&&i.getModel().setVisible(e,!0)}),this.gestureHandler=mxUtils.bind(this,function(t){null!=this.currentMenu&&mxEvent.getSource(t)!=this.currentMenu.div&&this.hideCurrentMenu()}),mxEvent.addGestureListeners(document,this.gestureHandler),this.resizeHandler=mxUtils.bind(this,function(){window.setTimeout(mxUtils.bind(this,function(){null!=this.editor.graph&&this.refresh()}),0)}),mxEvent.addListener(window,"resize",this.resizeHandler),this.orientationChangeHandler=mxUtils.bind(this,function(){this.refresh()}),mxEvent.addListener(window,"orientationchange",this.orientationChangeHandler),mxClient.IS_IOS&&!window.navigator.standalone&&(this.scrollHandler=mxUtils.bind(this,function(){window.scrollTo(0,0)}),mxEvent.addListener(window,"scroll",this.scrollHandler)),this.editor.addListener("resetGraphView",mxUtils.bind(this,function(){this.resetScrollbars()})),this.addListener("gridEnabledChanged",mxUtils.bind(this,function(){i.view.validateBackground()})),this.addListener("backgroundColorChanged",mxUtils.bind(this,function(){i.view.validateBackground()})),i.addListener("gridSizeChanged",mxUtils.bind(this,function(){i.isGridEnabled()&&i.view.validateBackground()})),this.editor.resetGraph()}this.init(),i.standalone||this.open()},mxUtils.extend(EditorUi,mxEventSource),EditorUi.compactUi=!0,EditorUi.prototype.splitSize=mxClient.IS_TOUCH||mxClient.IS_POINTER?12:8,EditorUi.prototype.menubarHeight=30,EditorUi.prototype.formatEnabled=!0,EditorUi.prototype.formatWidth=240,EditorUi.prototype.toolbarHeight=38,EditorUi.prototype.footerHeight=28,EditorUi.prototype.sidebarFooterHeight=34,EditorUi.prototype.hsplitPosition=screen.width<=640?118:"large"!=urlParams["sidebar-entries"]?212:240,EditorUi.prototype.allowAnimation=!0,EditorUi.prototype.lightboxMaxFitScale=2,EditorUi.prototype.lightboxVerticalDivider=4,EditorUi.prototype.hsplitClickEnabled=!1,EditorUi.prototype.init=function(){var t,e,n=this.editor.graph;n.standalone||("0"!=urlParams["shape-picker"]&&this.installShapePicker(),mxEvent.addListener(n.container,"scroll",mxUtils.bind(this,function(){n.tooltipHandler.hide(),null!=n.connectionHandler&&null!=n.connectionHandler.constraintHandler&&n.connectionHandler.constraintHandler.reset()})),n.addListener(mxEvent.ESCAPE,mxUtils.bind(this,function(){n.tooltipHandler.hide();var t=n.getRubberband();null!=t&&t.cancel()})),mxEvent.addListener(n.container,"keydown",mxUtils.bind(this,function(t){this.onKeyDown(t)})),mxEvent.addListener(n.container,"keypress",mxUtils.bind(this,function(t){this.onKeyPress(t)})),this.addUndoListener(),this.addBeforeUnloadListener(),n.getSelectionModel().addListener(mxEvent.CHANGE,mxUtils.bind(this,function(){this.updateActionStates()})),n.getModel().addListener(mxEvent.CHANGE,mxUtils.bind(this,function(){this.updateActionStates()})),t=n.setDefaultParent,(e=this).editor.graph.setDefaultParent=function(){t.apply(this,arguments),e.updateActionStates()},n.editLink=e.actions.get("editLink").funct,this.updateActionStates(),this.initClipboard(),this.initCanvas(),null!=this.format&&this.format.init())},EditorUi.prototype.installShapePicker=function(){var t=this.editor.graph,e=this;t.addListener(mxEvent.FIRE_MOUSE_EVENT,mxUtils.bind(this,function(t,n){"mouseDown"==n.getProperty("eventName")&&e.hideShapePicker()})),t.addListener(mxEvent.ESCAPE,mxUtils.bind(this,function(){e.hideShapePicker(!0)})),t.getSelectionModel().addListener(mxEvent.CHANGE,mxUtils.bind(this,function(){e.hideShapePicker(!0)})),t.getModel().addListener(mxEvent.CHANGE,mxUtils.bind(this,function(){e.hideShapePicker(!0)}));var n=t.popupMenuHandler.isMenuShowing;t.popupMenuHandler.isMenuShowing=function(){return n.apply(this,arguments)||null!=e.shapePicker};var i,l,o=t.dblClick;t.dblClick=function(t,n){var i;this.isEnabled()&&(null!=n||null==e.sidebar||mxEvent.isShiftDown(t)?o.apply(this,arguments):(mxEvent.consume(t),i=mxUtils.convertPoint(this.container,mxEvent.getClientX(t),mxEvent.getClientY(t)),window.setTimeout(mxUtils.bind(this,function(){e.showShapePicker(i.x,i.y)}),30)))},null!=this.hoverIcons&&(i=this.hoverIcons.drag,this.hoverIcons.drag=function(){e.hideShapePicker(),i.apply(this,arguments)},l=this.hoverIcons.execute,this.hoverIcons.execute=function(n,i,o){var s=o.getEvent();this.graph.isCloneEvent(s)||mxEvent.isShiftDown(s)?l.apply(this,arguments):this.graph.connectVertex(n.cell,i,this.graph.defaultEdgeLength,s,null,null,mxUtils.bind(this,function(l,s,r){var a=t.getCompositeParent(n.cell);for(l=t.getCellGeometry(a),o.consume();null!=a&&t.model.isVertex(a)&&null!=l&&l.relative;)cell=a,a=t.model.getParent(cell),l=t.getCellGeometry(a);window.setTimeout(mxUtils.bind(this,function(){e.showShapePicker(o.getGraphX(),o.getGraphY(),a,mxUtils.bind(this,function(t){r(t)}),i)}),30)}),mxUtils.bind(this,function(t){this.graph.selectCellsForConnectVertex(t,s,this)}))})},EditorUi.prototype.showShapePicker=function(t,e,n,i,l){null!=(t=this.createShapePicker(t,e,n,i,l,mxUtils.bind(this,function(){this.hideShapePicker()}),this.getCellsForShapePicker(n)))&&(null!=this.hoverIcons&&this.hoverIcons.reset(),(e=this.editor.graph).popupMenuHandler.hideMenu(),e.tooltipHandler.hideTooltip(),this.hideCurrentMenu(),this.hideShapePicker(),this.shapePickerCallback=i,this.shapePicker=t)},EditorUi.prototype.createShapePicker=function(t,e,n,i,l,o,s){var r=null;if(null!=s&&0<s.length){var a=this,h=this.editor.graph;r=document.createElement("div"),l=h.view.getState(n);var u=null==n||null!=l&&h.isTransparentState(l)?null:h.copyStyle(n);for(n=s.length<6?35*s.length:140,r.className="geToolbarContainer geSidebarContainer geSidebar",r.style.cssText="position:absolute;left:"+t+"px;top:"+e+"px;width:"+n+"px;border-radius:10px;padding:4px;text-align:center;box-shadow:0px 0px 3px 1px #d1d1d1;padding: 6px 0 8px 0;",mxUtils.setPrefixedStyle(r.style,"transform","translate(-22px,-22px)"),null!=h.background&&h.background!=mxConstants.NONE&&(r.style.backgroundColor=h.background),h.container.appendChild(r),n=mxUtils.bind(this,function(n){var l=document.createElement("a");l.className="geItem",l.style.cssText="position:relative;display:inline-block;position:relative;width:30px;height:30px;cursor:pointer;overflow:hidden;padding:3px 0 0 3px;",r.appendChild(l),null!=u&&"1"!=urlParams.sketch?this.sidebar.graph.pasteStyle(u,[n]):a.insertHandler([n],""!=n.value&&"1"!=urlParams.sketch,this.sidebar.graph.model),this.sidebar.createThumb([n],25,25,l,null,!0,!1,n.geometry.width,n.geometry.height),mxEvent.addListener(l,"click",function(){var l=h.cloneCell(n);if(null!=i)i(l);else{l.geometry.x=h.snap(Math.round(t/h.view.scale)-h.view.translate.x-n.geometry.width/2),l.geometry.y=h.snap(Math.round(e/h.view.scale)-h.view.translate.y-n.geometry.height/2),h.model.beginUpdate();try{h.addCell(l)}finally{h.model.endUpdate()}h.setSelectionCell(l),h.scrollCellToVisible(l),h.startEditingAtCell(l),null!=a.hoverIcons&&a.hoverIcons.update(h.view.getState(l))}null!=o&&o()})}),l=0;l<s.length;l++)n(s[l])}return r},EditorUi.prototype.getCellsForShapePicker=function(t){var e=mxUtils.bind(this,function(t,e,n,i){return this.editor.graph.createVertex(null,null,i||"",0,0,e||120,n||60,t,!1)});return[null!=t?this.editor.graph.cloneCell(t):e("text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;",40,20,"Text"),e("whiteSpace=wrap;html=1;"),e("rounded=1;whiteSpace=wrap;html=1;"),e("ellipse;whiteSpace=wrap;html=1;"),e("rhombus;whiteSpace=wrap;html=1;",80,80),e("shape=parallelogram;perimeter=parallelogramPerimeter;whiteSpace=wrap;html=1;fixedSize=1;"),e("shape=trapezoid;perimeter=trapezoidPerimeter;whiteSpace=wrap;html=1;fixedSize=1;",120,60),e("shape=hexagon;perimeter=hexagonPerimeter2;whiteSpace=wrap;html=1;fixedSize=1;",120,80),e("shape=step;perimeter=stepPerimeter;whiteSpace=wrap;html=1;fixedSize=1;",120,80),e("shape=process;whiteSpace=wrap;html=1;backgroundOutline=1;"),e("triangle;whiteSpace=wrap;html=1;",60,80),e("shape=document;whiteSpace=wrap;html=1;boundedLbl=1;",120,80),e("shape=tape;whiteSpace=wrap;html=1;",120,100),e("ellipse;shape=cloud;whiteSpace=wrap;html=1;",120,80),e("shape=cylinder;whiteSpace=wrap;html=1;boundedLbl=1;backgroundOutline=1;",60,80),e("shape=callout;rounded=1;whiteSpace=wrap;html=1;perimeter=calloutPerimeter;",120,80),e("shape=doubleArrow;whiteSpace=wrap;html=1;arrowWidth=0.4;arrowSize=0.3;"),e("shape=singleArrow;whiteSpace=wrap;html=1;arrowWidth=0.4;arrowSize=0.4;",80,60),e("shape=singleArrow;whiteSpace=wrap;html=1;arrowWidth=0.4;arrowSize=0.4;flipH=1;",80,60),e("shape=waypoint;sketch=0;size=6;pointerEvents=1;points=[];fillColor=none;resizable=0;rotatable=0;perimeter=centerPerimeter;snapToPoint=1;",40,40)]},EditorUi.prototype.hideShapePicker=function(t){null!=this.shapePicker&&(this.shapePicker.parentNode.removeChild(this.shapePicker),this.shapePicker=null,t||null==this.shapePickerCallback||this.shapePickerCallback(),this.shapePickerCallback=null)},EditorUi.prototype.onKeyDown=function(t){var e=this.editor.graph;9!=t.which||!e.isEnabled()||mxEvent.isAltDown(t)||e.isEditing()&&mxEvent.isShiftDown(t)||(e.isEditing()?e.stopEditing(!1):e.selectCell(!mxEvent.isShiftDown(t)),mxEvent.consume(t))},EditorUi.prototype.onKeyPress=function(t){var e=this.editor.graph;!this.isImmediateEditingEvent(t)||e.isEditing()||e.isSelectionEmpty()||0===t.which||27===t.which||mxEvent.isAltDown(t)||mxEvent.isControlDown(t)||mxEvent.isMetaDown(t)||(e.escape(),e.startEditing(),!mxClient.IS_FF||null!=(e=e.cellEditor).textarea&&(e.textarea.innerHTML=String.fromCharCode(t.which),(t=document.createRange()).selectNodeContents(e.textarea),t.collapse(!1),(e=window.getSelection()).removeAllRanges(),e.addRange(t)))},EditorUi.prototype.isImmediateEditingEvent=function(t){return!0},EditorUi.prototype.getCssClassForMarker=function(t,e,n,i){return"flexArrow"==e?null!=n&&n!=mxConstants.NONE?"geSprite geSprite-"+t+"blocktrans":"geSprite geSprite-noarrow":"box"==n||"halfCircle"==n?"geSprite geSvgSprite geSprite-"+n+("end"==t?" geFlipSprite":""):n==mxConstants.ARROW_CLASSIC?"1"==i?"geSprite geSprite-"+t+"classic":"geSprite geSprite-"+t+"classictrans":n==mxConstants.ARROW_CLASSIC_THIN?"1"==i?"geSprite geSprite-"+t+"classicthin":"geSprite geSprite-"+t+"classicthintrans":n==mxConstants.ARROW_OPEN?"geSprite geSprite-"+t+"open":n==mxConstants.ARROW_OPEN_THIN?"geSprite geSprite-"+t+"openthin":n==mxConstants.ARROW_BLOCK?"1"==i?"geSprite geSprite-"+t+"block":"geSprite geSprite-"+t+"blocktrans":n==mxConstants.ARROW_BLOCK_THIN?"1"==i?"geSprite geSprite-"+t+"blockthin":"geSprite geSprite-"+t+"blockthintrans":n==mxConstants.ARROW_OVAL?"1"==i?"geSprite geSprite-"+t+"oval":"geSprite geSprite-"+t+"ovaltrans":n==mxConstants.ARROW_DIAMOND?"1"==i?"geSprite geSprite-"+t+"diamond":"geSprite geSprite-"+t+"diamondtrans":n==mxConstants.ARROW_DIAMOND_THIN?"1"==i?"geSprite geSprite-"+t+"thindiamond":"geSprite geSprite-"+t+"thindiamondtrans":"openAsync"==n?"geSprite geSprite-"+t+"openasync":"dash"==n?"geSprite geSprite-"+t+"dash":"cross"==n?"geSprite geSprite-"+t+"cross":"async"==n?"1"==i?"geSprite geSprite-"+t+"async":"geSprite geSprite-"+t+"asynctrans":"circle"==n||"circlePlus"==n?"1"==i||"circle"==n?"geSprite geSprite-"+t+"circle":"geSprite geSprite-"+t+"circleplus":"ERone"==n?"geSprite geSprite-"+t+"erone":"ERmandOne"==n?"geSprite geSprite-"+t+"eronetoone":"ERmany"==n?"geSprite geSprite-"+t+"ermany":"ERoneToMany"==n?"geSprite geSprite-"+t+"eronetomany":"ERzeroToOne"==n?"geSprite geSprite-"+t+"eroneopt":"ERzeroToMany"==n?"geSprite geSprite-"+t+"ermanyopt":"geSprite geSprite-noarrow"},EditorUi.prototype.createMenus=function(){return null},EditorUi.prototype.updatePasteActionStates=function(){var t=this.editor.graph,e=this.actions.get("paste"),n=this.actions.get("pasteHere");e.setEnabled(this.editor.graph.cellEditor.isContentEditing()||(!mxClient.IS_FF&&null!=navigator.clipboard||!mxClipboard.isEmpty())&&t.isEnabled()&&!t.isCellLocked(t.getDefaultParent())),n.setEnabled(e.isEnabled())},EditorUi.prototype.initClipboard=function(){var t=this,e=mxClipboard.cut;mxClipboard.cut=function(n){n.cellEditor.isContentEditing()?document.execCommand("cut",!1,null):e.apply(this,arguments),t.updatePasteActionStates()},mxClipboard.copy=function(e){var n=null;if(e.cellEditor.isContentEditing())document.execCommand("copy",!1,null);else{n=n||e.getSelectionCells(),n=e.getExportableCells(e.model.getTopmostCells(n));for(var i={},l=e.createCellLookup(n),o=e.cloneCells(n,null,i),s=new mxGraphModel,r=s.getChildAt(s.getRoot(),0),a=0;a<o.length;a++){s.add(r,o[a]);var h,u=e.view.getState(n[a]);null==u||null!=(h=e.getCellGeometry(o[a]))&&h.relative&&!s.isEdge(n[a])&&null==l[mxObjectIdentity.get(s.getParent(n[a]))]&&(h.offset=null,h.relative=!1,h.x=u.x/u.view.scale-u.view.translate.x,h.y=u.y/u.view.scale-u.view.translate.y)}e.updateCustomLinks(e.createCellMapping(i,l),o),mxClipboard.insertCount=1,mxClipboard.setCells(o)}return t.updatePasteActionStates(),n};var n=mxClipboard.paste;mxClipboard.paste=function(e){var i=null;return e.cellEditor.isContentEditing()?document.execCommand("paste",!1,null):i=n.apply(this,arguments),t.updatePasteActionStates(),i};var i=this.editor.graph.cellEditor.startEditing;this.editor.graph.cellEditor.startEditing=function(){i.apply(this,arguments),t.updatePasteActionStates()};var l=this.editor.graph.cellEditor.stopEditing;this.editor.graph.cellEditor.stopEditing=function(e,n){l.apply(this,arguments),t.updatePasteActionStates()},this.updatePasteActionStates()},EditorUi.prototype.lazyZoomDelay=20,EditorUi.prototype.wheelZoomDelay=400,EditorUi.prototype.buttonZoomDelay=600,EditorUi.prototype.initCanvas=function(){var t=this.editor.graph;t.timerAutoScroll=!0,t.getPagePadding=function(){return new mxPoint(Math.max(0,Math.round((t.container.offsetWidth-34)/t.view.scale)),Math.max(0,Math.round((t.container.offsetHeight-34)/t.view.scale)))},t.view.getBackgroundPageBounds=function(){var t=this.graph.getPageLayout(),e=this.graph.getPageSize();return new mxRectangle(this.scale*(this.translate.x+t.x*e.width),this.scale*(this.translate.y+t.y*e.height),this.scale*t.width*e.width,this.scale*t.height*e.height)},t.getPreferredPageSize=function(t,e,n){return t=this.getPageLayout(),e=this.getPageSize(),new mxRectangle(0,0,t.width*e.width,t.height*e.height)};var e,n,i=null,l=this;if(this.editor.isChromelessView()){this.chromelessResize=i=mxUtils.bind(this,function(e,n,i,l){var o,s,r,a,h,u,d,c,p;null==t.container||t.isViewer()||(i=null!=i?i:0,l=null!=l?l:0,o=t.pageVisible?t.view.getBackgroundPageBounds():t.getGraphBounds(),s=mxUtils.hasScrollbars(t.container),h=t.view.translate,r=t.view.scale,(a=mxRectangle.fromRectangle(o)).x=a.x/r-h.x,a.y=a.y/r-h.y,a.width/=r,a.height/=r,h=t.container.scrollTop,u=t.container.scrollLeft,c=8<=document.documentMode?20:14,8!=document.documentMode&&9!=document.documentMode||(c+=3),d=t.container.offsetWidth-c,c=t.container.offsetHeight-c,n=(d-(e=e?Math.max(.3,Math.min(n||1,d/a.width)):r)*a.width)/2/e,p=0==this.lightboxVerticalDivider?0:(c-e*a.height)/this.lightboxVerticalDivider/e,s&&(n=Math.max(n,0),p=Math.max(p,0)),s||o.width<d||o.height<c?(t.view.scaleAndTranslate(e,Math.floor(n-a.x),Math.floor(p-a.y)),t.container.scrollTop=h*e/r,t.container.scrollLeft=u*e/r):0==i&&0==l||(o=t.view.translate,t.view.setTranslate(Math.floor(o.x+i/r),Math.floor(o.y+l/r))))}),this.chromelessWindowResize=mxUtils.bind(this,function(){this.chromelessResize(!1)});var o=mxUtils.bind(this,function(){this.chromelessWindowResize(!1)});if(mxEvent.addListener(window,"resize",o),this.destroyFunctions.push(function(){mxEvent.removeListener(window,"resize",o)}),this.editor.addListener("resetGraphView",mxUtils.bind(this,function(){this.chromelessResize(!0)})),this.actions.get("zoomIn").funct=mxUtils.bind(this,function(e){t.zoomIn(),this.chromelessResize(!1)}),this.actions.get("zoomOut").funct=mxUtils.bind(this,function(e){t.zoomOut(),this.chromelessResize(!1)}),"0"!=urlParams.toolbar){var s=JSON.parse(decodeURIComponent(urlParams["toolbar-config"]||"{}"));this.chromelessToolbar=document.createElement("div"),this.chromelessToolbar.style.position="fixed",this.chromelessToolbar.style.overflow="hidden",this.chromelessToolbar.style.boxSizing="border-box",this.chromelessToolbar.style.whiteSpace="nowrap",this.chromelessToolbar.style.backgroundColor="#000000",this.chromelessToolbar.style.padding="10px 10px 8px 10px",this.chromelessToolbar.style.left=t.isViewer()?"0":"50%",mxUtils.setPrefixedStyle(this.chromelessToolbar.style,"borderRadius","20px"),mxUtils.setPrefixedStyle(this.chromelessToolbar.style,"transition","opacity 600ms ease-in-out");var r,a,h,u,d,c=mxUtils.bind(this,function(){var e=mxUtils.getCurrentStyle(t.container);t.isViewer()?this.chromelessToolbar.style.top="0":this.chromelessToolbar.style.bottom=(null!=e?parseInt(e["margin-bottom"]||0):0)+(null!=this.tabContainer?20+parseInt(this.tabContainer.style.height):20)+"px"});this.editor.addListener("resetGraphView",c),c(),c=mxUtils.bind(this,function(t,e,n){var i=document.createElement("span");return i.style.paddingLeft="8px",i.style.paddingRight="8px",i.style.cursor="pointer",mxEvent.addListener(i,"click",t),null!=n&&i.setAttribute("title",n),(t=document.createElement("img")).setAttribute("border","0"),t.setAttribute("src",e),i.appendChild(t),this.chromelessToolbar.appendChild(i),i}),null!=s.backBtn&&c(mxUtils.bind(this,function(t){window.location.href=s.backBtn.url,mxEvent.consume(t)}),Editor.backLargeImage,mxResources.get("back",null,"Back")),this.isPagesEnabled()&&(r=c(mxUtils.bind(this,function(t){this.actions.get("previousPage").funct(),mxEvent.consume(t)}),Editor.previousLargeImage,mxResources.get("previousPage")),(a=document.createElement("div")).style.display="inline-block",a.style.verticalAlign="top",a.style.fontFamily="Helvetica,Arial",a.style.marginTop="8px",a.style.fontSize="14px",a.style.color="#ffffff",this.chromelessToolbar.appendChild(a),h=c(mxUtils.bind(this,function(t){this.actions.get("nextPage").funct(),mxEvent.consume(t)}),Editor.nextLargeImage,mxResources.get("nextPage")),u=mxUtils.bind(this,function(){null!=this.pages&&1<this.pages.length&&null!=this.currentPage&&(a.innerHTML="",mxUtils.write(a,mxUtils.indexOf(this.pages,this.currentPage)+1+" / "+this.pages.length))}),r.style.paddingLeft="0px",r.style.paddingRight="4px",h.style.paddingLeft="4px",h.style.paddingRight="0px",d=mxUtils.bind(this,function(){null!=this.pages&&1<this.pages.length&&null!=this.currentPage?(h.style.display="",r.style.display="",a.style.display="inline-block"):(h.style.display="none",r.style.display="none",a.style.display="none"),u()}),this.editor.addListener("resetGraphView",d),this.editor.addListener("pageSelected",u)),c(mxUtils.bind(this,function(t){this.actions.get("zoomOut").funct(),mxEvent.consume(t)}),Editor.zoomOutLargeImage,mxResources.get("zoomOut")+" (Alt+Mousewheel)"),c(mxUtils.bind(this,function(t){this.actions.get("zoomIn").funct(),mxEvent.consume(t)}),Editor.zoomInLargeImage,mxResources.get("zoomIn")+" (Alt+Mousewheel)"),c(mxUtils.bind(this,function(e){t.isLightboxView()?(1==t.view.scale?this.lightboxFit():t.zoomTo(1),this.chromelessResize(!1)):this.chromelessResize(!0),mxEvent.consume(e)}),Editor.actualSizeLargeImage,mxResources.get("fit"));var p,m,g=null,x=null,y=mxUtils.bind(this,function(t){null!=g&&(window.clearTimeout(g),g=null),null!=x&&(window.clearTimeout(x),x=null),g=window.setTimeout(mxUtils.bind(this,function(){mxUtils.setOpacity(this.chromelessToolbar,0),g=null,x=window.setTimeout(mxUtils.bind(this,function(){this.chromelessToolbar.style.display="none",x=null}),600)}),t||200)}),f=mxUtils.bind(this,function(t){null!=g&&(window.clearTimeout(g),g=null),null!=x&&(window.clearTimeout(x),x=null),this.chromelessToolbar.style.display="",mxUtils.setOpacity(this.chromelessToolbar,t||30)});if("1"==urlParams.layers&&(this.layersDialog=null,p=c(mxUtils.bind(this,function(e){var n;null!=this.layersDialog?(this.layersDialog.parentNode.removeChild(this.layersDialog),this.layersDialog=null):(this.layersDialog=t.createLayersDialog(),mxEvent.addListener(this.layersDialog,"mouseleave",mxUtils.bind(this,function(){this.layersDialog.parentNode.removeChild(this.layersDialog),this.layersDialog=null})),n=p.getBoundingClientRect(),mxUtils.setPrefixedStyle(this.layersDialog.style,"borderRadius","5px"),this.layersDialog.style.position="fixed",this.layersDialog.style.fontFamily="Helvetica,Arial",this.layersDialog.style.backgroundColor="#000000",this.layersDialog.style.width="160px",this.layersDialog.style.padding="4px 2px 4px 2px",this.layersDialog.style.color="#ffffff",mxUtils.setOpacity(this.layersDialog,70),this.layersDialog.style.left=n.left+"px",this.layersDialog.style.bottom=parseInt(this.chromelessToolbar.style.bottom)+this.chromelessToolbar.offsetHeight+4+"px",n=mxUtils.getCurrentStyle(this.editor.graph.container),this.layersDialog.style.zIndex=n.zIndex,document.body.appendChild(this.layersDialog)),mxEvent.consume(e)}),Editor.layersLargeImage,mxResources.get("layers")),(m=t.getModel()).addListener(mxEvent.CHANGE,function(){p.style.display=1<m.getChildCount(m.root)?"":"none"})),"1"!=urlParams.openInSameWin&&this.addChromelessToolbarItems(c),null==this.editor.editButtonLink&&null==this.editor.editButtonFunc||c(mxUtils.bind(this,function(e){null!=this.editor.editButtonFunc?this.editor.editButtonFunc():"_blank"==this.editor.editButtonLink?this.editor.editAsNew(this.getEditBlankXml()):t.openLink(this.editor.editButtonLink,"editWindow"),mxEvent.consume(e)}),Editor.editLargeImage,mxResources.get("edit")),null!=this.lightboxToolbarActions)for(d=0;d<this.lightboxToolbarActions.length;d++){var v=this.lightboxToolbarActions[d];c(v.fn,v.icon,v.tooltip)}null!=s.refreshBtn&&c(mxUtils.bind(this,function(t){s.refreshBtn.url?window.location.href=s.refreshBtn.url:window.location.reload(),mxEvent.consume(t)}),Editor.refreshLargeImage,mxResources.get("refresh",null,"Refresh")),null!=s.fullscreenBtn&&window.self!==window.top&&c(mxUtils.bind(this,function(e){t.openLink(s.fullscreenBtn.url?s.fullscreenBtn.url:window.location.href),mxEvent.consume(e)}),Editor.fullscreenLargeImage,mxResources.get("openInNewWindow",null,"Open in New Window")),(s.closeBtn&&window.self===window.top||t.lightbox&&("1"==urlParams.close||this.container!=document.body))&&c(mxUtils.bind(this,function(t){"1"==urlParams.close||s.closeBtn?window.close():(this.destroy(),mxEvent.consume(t))}),Editor.closeLargeImage,mxResources.get("close")+" (Escape)"),this.chromelessToolbar.style.display="none",t.isViewer()||mxUtils.setPrefixedStyle(this.chromelessToolbar.style,"transform","translate(-50%,0)"),t.container.appendChild(this.chromelessToolbar),mxEvent.addListener(t.container,mxClient.IS_POINTER?"pointermove":"mousemove",mxUtils.bind(this,function(t){mxEvent.isTouchEvent(t)||(mxEvent.isShiftDown(t)||f(30),y())})),mxEvent.addListener(this.chromelessToolbar,mxClient.IS_POINTER?"pointermove":"mousemove",function(t){mxEvent.consume(t)}),mxEvent.addListener(this.chromelessToolbar,"mouseenter",mxUtils.bind(this,function(t){mxEvent.isShiftDown(t)?y():f(100)})),mxEvent.addListener(this.chromelessToolbar,"mousemove",mxUtils.bind(this,function(t){mxEvent.isShiftDown(t)?y():f(100),mxEvent.consume(t)})),mxEvent.addListener(this.chromelessToolbar,"mouseleave",mxUtils.bind(this,function(t){mxEvent.isTouchEvent(t)||f(30)}));var b=t.getTolerance();t.addMouseListener({startX:0,startY:0,scrollLeft:0,scrollTop:0,mouseDown:function(e,n){this.startX=n.getGraphX(),this.startY=n.getGraphY(),this.scrollLeft=t.container.scrollLeft,this.scrollTop=t.container.scrollTop},mouseMove:function(t,e){},mouseUp:function(e,n){mxEvent.isTouchEvent(n.getEvent())&&Math.abs(this.scrollLeft-t.container.scrollLeft)<b&&Math.abs(this.scrollTop-t.container.scrollTop)<b&&Math.abs(this.startX-n.getGraphX())<b&&Math.abs(this.startY-n.getGraphY())<b&&(0<parseFloat(l.chromelessToolbar.style.opacity||0)?y():f(30))}})}this.editor.editable||this.addChromelessClickHandler()}else this.editor.extendCanvas&&(e=t.view.validate,t.view.validate=function(){var t,n;null!=this.graph.container&&mxUtils.hasScrollbars(this.graph.container)&&(t=this.graph.getPagePadding(),n=this.graph.getPageSize(),this.translate.x=t.x-(this.x0||0)*n.width,this.translate.y=t.y-(this.y0||0)*n.height),e.apply(this,arguments)},t.isViewer()||(n=t.sizeDidChange,t.sizeDidChange=function(){var e,i,l,o,s,r;null!=this.container&&mxUtils.hasScrollbars(this.container)?(e=this.getPageLayout(),i=this.getPagePadding(),l=this.getPageSize(),o=Math.ceil(2*i.x+e.width*l.width),s=Math.ceil(2*i.y+e.height*l.height),null!=(r=t.minimumGraphSize)&&r.width==o&&r.height==s||(t.minimumGraphSize=new mxRectangle(0,0,o,s)),o=i.x-e.x*l.width,i=i.y-e.y*l.height,this.autoTranslate||this.view.translate.x==o&&this.view.translate.y==i?n.apply(this,arguments):(this.autoTranslate=!0,this.view.x0=e.x,this.view.y0=e.y,e=t.view.translate.x,l=t.view.translate.y,t.view.setTranslate(o,i),t.container.scrollLeft+=Math.round((o-e)*t.view.scale),t.container.scrollTop+=Math.round((i-l)*t.view.scale),this.autoTranslate=!1)):this.fireEvent(new mxEventObject(mxEvent.SIZE,"bounds",this.getGraphBounds()))}));var C=t.view.getBackgroundPane(),E=t.view.getDrawPane();function S(e){null!=w&&window.clearTimeout(w),window.setTimeout(function(){t.isMouseDown&&!M||(w=window.setTimeout(mxUtils.bind(this,function(){t.isFastZoomEnabled()&&(null!=t.view.backgroundPageShape&&null!=t.view.backgroundPageShape.node&&(mxUtils.setPrefixedStyle(t.view.backgroundPageShape.node.style,"transform-origin",null),mxUtils.setPrefixedStyle(t.view.backgroundPageShape.node.style,"transform",null)),E.style.transformOrigin="",C.style.transformOrigin="",mxClient.IS_SF?(E.style.transform="scale(1)",C.style.transform="scale(1)",window.setTimeout(function(){E.style.transform="",C.style.transform=""},0)):(E.style.transform="",C.style.transform=""),t.view.getDecoratorPane().style.opacity="",t.view.getOverlayPane().style.opacity="");var e=new mxPoint(t.container.scrollLeft,t.container.scrollTop),n=mxUtils.getOffset(t.container),o=t.view.scale,s=0,r=0;null!=T&&(s=t.container.offsetWidth/2-T.x+n.x,r=t.container.offsetHeight/2-T.y+n.y),t.zoom(t.cumulativeZoomFactor),t.view.scale!=o&&(null!=A&&(s+=e.x-A.x,r+=e.y-A.y),null!=i&&l.chromelessResize(!1,null,s*(t.cumulativeZoomFactor-1),r*(t.cumulativeZoomFactor-1)),!mxUtils.hasScrollbars(t.container)||0==s&&0==r||(t.container.scrollLeft-=s*(t.cumulativeZoomFactor-1),t.container.scrollTop-=r*(t.cumulativeZoomFactor-1))),null!=L&&E.setAttribute("filter",L),t.cumulativeZoomFactor=1,L=M=T=A=w=null}),null!=e?e:t.isFastZoomEnabled()?l.wheelZoomDelay:l.lazyZoomDelay))},0)}t.cumulativeZoomFactor=1;var w=null,T=null,A=null,M=null,L=null,P=Date.now();t.lazyZoom=function(e,n,i){var o;(n=n||!t.scrollbars)&&(T=new mxPoint(t.container.offsetLeft+t.container.clientWidth/2,t.container.offsetTop+t.container.clientHeight/2)),Date.now()-P<15||(P=Date.now(),e?this.view.scale*this.cumulativeZoomFactor<=.15?this.cumulativeZoomFactor*=(this.view.scale+.05)/this.view.scale:(this.cumulativeZoomFactor*=this.zoomFactor,this.cumulativeZoomFactor=Math.round(this.view.scale*this.cumulativeZoomFactor*20)/20/this.view.scale):this.view.scale*this.cumulativeZoomFactor<=.15?this.cumulativeZoomFactor*=(this.view.scale-.05)/this.view.scale:(this.cumulativeZoomFactor/=this.zoomFactor,this.cumulativeZoomFactor=Math.round(this.view.scale*this.cumulativeZoomFactor*20)/20/this.view.scale),this.cumulativeZoomFactor=Math.max(.05,Math.min(this.view.scale*this.cumulativeZoomFactor,160))/this.view.scale,t.isFastZoomEnabled()&&(null==L&&""!=E.getAttribute("filter")&&(L=E.getAttribute("filter"),E.removeAttribute("filter")),A=new mxPoint(t.container.scrollLeft,t.container.scrollTop),E.style.transformOrigin=(e=n?t.container.scrollLeft+t.container.clientWidth/2:T.x+t.container.scrollLeft-t.container.offsetLeft)+"px "+(o=n?t.container.scrollTop+t.container.clientHeight/2:T.y+t.container.scrollTop-t.container.offsetTop)+"px",E.style.transform="scale("+this.cumulativeZoomFactor+")",C.style.transformOrigin=e+"px "+o+"px",C.style.transform="scale("+this.cumulativeZoomFactor+")",null!=t.view.backgroundPageShape&&null!=t.view.backgroundPageShape.node&&(mxUtils.setPrefixedStyle((e=t.view.backgroundPageShape.node).style,"transform-origin",(n?t.container.clientWidth/2+t.container.scrollLeft-e.offsetLeft+"px":T.x+t.container.scrollLeft-e.offsetLeft-t.container.offsetLeft+"px")+" "+(n?t.container.clientHeight/2+t.container.scrollTop-e.offsetTop+"px":T.y+t.container.scrollTop-e.offsetTop-t.container.offsetTop+"px")),mxUtils.setPrefixedStyle(e.style,"transform","scale("+this.cumulativeZoomFactor+")")),t.view.getDecoratorPane().style.opacity="0",t.view.getOverlayPane().style.opacity="0",null!=l.hoverIcons&&l.hoverIcons.reset()),S(i))},mxEvent.addGestureListeners(t.container,function(t){null!=w&&window.clearTimeout(w)},null,function(e){1!=t.cumulativeZoomFactor&&S(0)}),mxEvent.addListener(t.container,"scroll",function(e){null==w||t.isMouseDown||1==t.cumulativeZoomFactor||S(0)}),mxEvent.addMouseWheelListener(mxUtils.bind(this,function(e,n,i,l,o){if(null==this.dialogs||0==this.dialogs.length)if(t.scrollbars||i||!t.isScrollWheelEvent(e)){if(i||t.isZoomWheelEvent(e))for(var s=mxEvent.getSource(e);null!=s;){if(s==t.container)return t.tooltipHandler.hideTooltip(),T=null!=l&&null!=o?new mxPoint(l,o):new mxPoint(mxEvent.getClientX(e),mxEvent.getClientY(e)),M=i,t.lazyZoom(n),mxEvent.consume(e),!1;s=s.parentNode}}else i=t.view.getTranslate(),l=40/t.view.scale,mxEvent.isShiftDown(e)?t.view.setTranslate(i.x+(n?-l:l),i.y):t.view.setTranslate(i.x,i.y+(n?l:-l))}),t.container),t.panningHandler.zoomGraph=function(e){t.cumulativeZoomFactor=e.scale,t.lazyZoom(0<e.scale,!0),mxEvent.consume(e)}},EditorUi.prototype.addChromelessToolbarItems=function(t){t(mxUtils.bind(this,function(t){this.actions.get("print").funct(),mxEvent.consume(t)}),Editor.printLargeImage,mxResources.get("print"))},EditorUi.prototype.isPagesEnabled=function(){return this.editor.editable||"1"!=urlParams["hide-pages"]},EditorUi.prototype.createTemporaryGraph=function(t){var e=new Graph(document.createElement("div"));return e.stylesheet.styles=mxUtils.clone(t.styles),e.resetViewOnRootChange=!1,e.setConnectable(!1),e.gridEnabled=!1,e.autoScroll=!1,e.setTooltips(!1),e.setEnabled(!1),e.container.style.visibility="hidden",e.container.style.position="absolute",e.container.style.overflow="hidden",e.container.style.height="1px",e.container.style.width="1px",e},EditorUi.prototype.addChromelessClickHandler=function(){var t=urlParams.highlight;null!=t&&0<t.length&&(t="#"+t),this.editor.graph.addClickHandler(t)},EditorUi.prototype.toggleFormatPanel=function(t){t=null!=t?t:0==this.formatWidth,null!=this.format&&(this.formatWidth=t?240:0,this.formatContainer.style.display=t?"":"none",this.refresh(),this.format.refresh(),this.fireEvent(new mxEventObject("formatWidthChanged")))},EditorUi.prototype.lightboxFit=function(t){var e,n;this.isDiagramEmpty()?this.editor.graph.view.setScale(1):(n=60,null!=(e=urlParams.border)&&(n=parseInt(e)),this.editor.graph.maxFitScale=this.lightboxMaxFitScale,this.editor.graph.fit(n,null,null,null,null,null,t),this.editor.graph.maxFitScale=null)},EditorUi.prototype.isDiagramEmpty=function(){var t=this.editor.graph.getModel();return 1==t.getChildCount(t.root)&&0==t.getChildCount(t.getChildAt(t.root,0))},EditorUi.prototype.isSelectionAllowed=function(t){return"SELECT"==mxEvent.getSource(t).nodeName||"INPUT"==mxEvent.getSource(t).nodeName&&mxUtils.isAncestorNode(this.formatContainer,mxEvent.getSource(t))},EditorUi.prototype.addBeforeUnloadListener=function(){window.onbeforeunload=mxUtils.bind(this,function(){return this.onBeforeUnload()})},EditorUi.prototype.onBeforeUnload=function(){if(this.editor.modified)return mxResources.get("allChangesLost")},EditorUi.prototype.open=function(){try{null!=window.opener&&null!=window.opener.openFile&&window.opener.openFile.setConsumer(mxUtils.bind(this,function(t,e){try{var n=mxUtils.parseXml(t);this.editor.setGraphXml(n.documentElement),this.editor.setModified(!1),this.editor.undoManager.clear(),null!=e&&(this.editor.setFilename(e),this.updateDocumentTitle())}catch(t){mxUtils.alert(mxResources.get("invalidOrMissingFile")+": "+t.message)}}))}catch(t){}this.editor.graph.view.validate(),this.editor.graph.sizeDidChange(),this.editor.fireEvent(new mxEventObject("resetGraphView"))},EditorUi.prototype.showPopupMenu=function(t,e,n,i){this.editor.graph.popupMenuHandler.hideMenu();var l=new mxPopupMenu(t);l.div.className+=" geMenubarMenu",l.smartSeparators=!0,l.showDisabled=!0,l.autoExpand=!0,l.hideMenu=mxUtils.bind(this,function(){mxPopupMenu.prototype.hideMenu.apply(l,arguments),l.destroy()}),l.popup(e,n,null,i),this.setCurrentMenu(l)},EditorUi.prototype.setCurrentMenu=function(t,e){this.currentMenuElt=e,this.currentMenu=t},EditorUi.prototype.resetCurrentMenu=function(){this.currentMenu=this.currentMenuElt=null},EditorUi.prototype.hideCurrentMenu=function(){null!=this.currentMenu&&(this.currentMenu.hideMenu(),this.resetCurrentMenu())},EditorUi.prototype.updateDocumentTitle=function(){var t=this.editor.getOrCreateFilename();null!=this.editor.appName&&(t+=" - "+this.editor.appName),document.title=t},EditorUi.prototype.createHoverIcons=function(){return new HoverIcons(this.editor.graph)},EditorUi.prototype.redo=function(){try{this.editor.graph.isEditing()?document.execCommand("redo",!1,null):this.editor.undoManager.redo()}catch(t){}},EditorUi.prototype.undo=function(){try{var t,e=this.editor.graph;e.isEditing()?(t=e.cellEditor.textarea.innerHTML,document.execCommand("undo",!1,null),t==e.cellEditor.textarea.innerHTML&&(e.stopEditing(!0),this.editor.undoManager.undo())):this.editor.undoManager.undo()}catch(t){}},EditorUi.prototype.canRedo=function(){return this.editor.graph.isEditing()||this.editor.undoManager.canRedo()},EditorUi.prototype.canUndo=function(){return this.editor.graph.isEditing()||this.editor.undoManager.canUndo()},EditorUi.prototype.getEditBlankXml=function(){return mxUtils.getXml(this.editor.getGraphXml())},EditorUi.prototype.getUrl=function(t){var e,n=0<(t=null!=t?t:window.location.pathname).indexOf("?")?1:0;for(e in urlParams)t=0==n?t+"?":t+"&",t+=e+"="+urlParams[e],n++;return t},EditorUi.prototype.setScrollbars=function(t){var e=this.editor.graph,n=e.container.style.overflow;e.scrollbars=t,this.editor.updateGraphComponents(),n!=e.container.style.overflow&&(e.container.scrollTop=0,e.container.scrollLeft=0,e.view.scaleAndTranslate(1,0,0),this.resetScrollbars()),this.fireEvent(new mxEventObject("scrollbarsChanged"))},EditorUi.prototype.hasScrollbars=function(){return this.editor.graph.scrollbars},EditorUi.prototype.resetScrollbars=function(){var t,e,n,i=this.editor.graph;this.editor.extendCanvas?this.editor.isChromelessView()||(mxUtils.hasScrollbars(i.container)?i.pageVisible?(t=i.getPagePadding(),i.container.scrollTop=Math.floor(t.y-this.editor.initialTopSpacing)-1,i.container.scrollLeft=Math.floor(Math.min(t.x,(i.container.scrollWidth-i.container.clientWidth)/2))-1,0<(t=i.getGraphBounds()).width&&0<t.height&&(t.x>i.container.scrollLeft+.9*i.container.clientWidth&&(i.container.scrollLeft=Math.min(t.x+t.width-i.container.clientWidth,t.x-10)),t.y>i.container.scrollTop+.9*i.container.clientHeight&&(i.container.scrollTop=Math.min(t.y+t.height-i.container.clientHeight,t.y-10)))):(t=i.getGraphBounds(),e=Math.max(t.width,i.scrollTileSize.width*i.view.scale),i.container.scrollTop=Math.floor(Math.max(0,t.y-Math.max(20,(i.container.clientHeight-Math.max(t.height,i.scrollTileSize.height*i.view.scale))/4))),i.container.scrollLeft=Math.floor(Math.max(0,t.x-Math.max(0,(i.container.clientWidth-e)/2)))):((t=mxRectangle.fromRectangle(i.pageVisible?i.view.getBackgroundPageBounds():i.getGraphBounds())).x=t.x/(n=i.view.scale)-(e=i.view.translate).x,t.y=t.y/n-e.y,t.width/=n,t.height/=n,i.view.setTranslate(Math.floor(Math.max(0,(i.container.clientWidth-t.width)/2)-t.x+2),Math.floor((i.pageVisible?0:Math.max(0,(i.container.clientHeight-t.height)/4))-t.y+1)))):(i.container.scrollTop=0,i.container.scrollLeft=0,mxUtils.hasScrollbars(i.container)||i.view.setTranslate(0,0))},EditorUi.prototype.setPageVisible=function(t){var e=this.editor.graph,n=mxUtils.hasScrollbars(e.container),i=0,l=0;n&&(i=e.view.translate.x*e.view.scale-e.container.scrollLeft,l=e.view.translate.y*e.view.scale-e.container.scrollTop),e.pageVisible=t,e.pageBreaksVisible=t,e.preferPageSize=t,e.view.validateBackground(),n&&(t=e.getSelectionCells(),e.clearSelection(),e.setSelectionCells(t)),e.sizeDidChange(),n&&(e.container.scrollLeft=e.view.translate.x*e.view.scale-i,e.container.scrollTop=e.view.translate.y*e.view.scale-l),this.fireEvent(new mxEventObject("pageViewChanged"))},ChangeGridColor.prototype.execute=function(){var t=this.ui.editor.graph.view.gridColor;this.ui.setGridColor(this.color),this.color=t},function(){var t=new mxObjectCodec(new ChangeGridColor,["ui"]);mxCodecRegistry.register(t)}(),ChangePageSetup.prototype.execute=function(){var t,e=this.ui.editor.graph;this.ignoreColor||(this.color=this.previousColor,t=e.background,this.ui.setBackgroundColor(this.previousColor),this.previousColor=t),this.ignoreImage||(this.image=this.previousImage,t=e.backgroundImage,this.ui.setBackgroundImage(this.previousImage),this.previousImage=t),null!=this.previousFormat&&(this.format=this.previousFormat,this.previousFormat.width!=(t=e.pageFormat).width||this.previousFormat.height!=t.height)&&(this.ui.setPageFormat(this.previousFormat),this.previousFormat=t),null!=this.foldingEnabled&&this.foldingEnabled!=this.ui.editor.graph.foldingEnabled&&(this.ui.setFoldingEnabled(this.foldingEnabled),this.foldingEnabled=!this.foldingEnabled),null!=this.previousPageScale&&this.previousPageScale!=(e=this.ui.editor.graph.pageScale)&&(this.ui.setPageScale(this.previousPageScale),this.previousPageScale=e)},function(){var t=new mxObjectCodec(new ChangePageSetup,["ui","previousColor","previousImage","previousFormat","previousPageScale"]);t.afterDecode=function(t,e,n){return n.previousColor=n.color,n.previousImage=n.image,n.previousFormat=n.format,n.previousPageScale=n.pageScale,null!=n.foldingEnabled&&(n.foldingEnabled=!n.foldingEnabled),n},mxCodecRegistry.register(t)}(),EditorUi.prototype.setBackgroundColor=function(t){this.editor.graph.background=t,this.editor.graph.view.validateBackground(),this.fireEvent(new mxEventObject("backgroundColorChanged"))},EditorUi.prototype.setFoldingEnabled=function(t){this.editor.graph.foldingEnabled=t,this.editor.graph.view.revalidate(),this.fireEvent(new mxEventObject("foldingEnabledChanged"))},EditorUi.prototype.setPageFormat=function(t){this.editor.graph.pageFormat=t,this.editor.graph.pageVisible?(this.editor.graph.view.validateBackground(),this.editor.graph.sizeDidChange()):this.actions.get("pageView").funct(),this.fireEvent(new mxEventObject("pageFormatChanged"))},EditorUi.prototype.setPageScale=function(t){this.editor.graph.pageScale=t,this.editor.graph.pageVisible?(this.editor.graph.view.validateBackground(),this.editor.graph.sizeDidChange()):this.actions.get("pageView").funct(),this.fireEvent(new mxEventObject("pageScaleChanged"))},EditorUi.prototype.setGridColor=function(t){this.editor.graph.view.gridColor=t,this.editor.graph.view.validateBackground(),this.fireEvent(new mxEventObject("gridColorChanged"))},EditorUi.prototype.addUndoListener=function(){var t=this.actions.get("undo"),e=this.actions.get("redo"),n=this.editor.undoManager,i=mxUtils.bind(this,function(){t.setEnabled(this.canUndo()),e.setEnabled(this.canRedo())});n.addListener(mxEvent.ADD,i),n.addListener(mxEvent.UNDO,i),n.addListener(mxEvent.REDO,i),n.addListener(mxEvent.CLEAR,i);var l=this.editor.graph.cellEditor.startEditing;this.editor.graph.cellEditor.startEditing=function(){l.apply(this,arguments),i()};var o=this.editor.graph.cellEditor.stopEditing;this.editor.graph.cellEditor.stopEditing=function(t,e){o.apply(this,arguments),i()},i()},EditorUi.prototype.updateActionStates=function(){var t=this.editor.graph,e=!t.isSelectionEmpty(),n=!1,i=!1,l=!1,o=t.getSelectionCells();if(null!=o)for(var s=0;s<o.length;s++){var r=o[s];if(t.getModel().isEdge(r)&&(l=!0),t.getModel().isVertex(r)&&(n=!0,0<t.getModel().getChildCount(r)||t.isContainer(r))&&(i=!0),l&&n)break}for(o="cut copy bold italic underline delete duplicate editStyle editTooltip editLink backgroundColor borderColor edit toFront toBack lockUnlock solid dashed pasteSize dotted fillColor gradientColor shadow fontColor formattedText rounded toggleRounded sharp strokeColor".split(" "),s=0;s<o.length;s++)this.actions.get(o[s]).setEnabled(e);this.actions.get("setAsDefaultStyle").setEnabled(1==t.getSelectionCount()),this.actions.get("clearWaypoints").setEnabled(!t.isSelectionEmpty()),this.actions.get("copySize").setEnabled(1==t.getSelectionCount()),this.actions.get("turn").setEnabled(!t.isSelectionEmpty()),this.actions.get("curved").setEnabled(l),this.actions.get("rotation").setEnabled(n),this.actions.get("wordWrap").setEnabled(n),this.actions.get("autosize").setEnabled(n),l=n&&1==t.getSelectionCount(),this.actions.get("group").setEnabled(1<t.getSelectionCount()||l&&!t.isContainer(t.getSelectionCell())),this.actions.get("ungroup").setEnabled(i),this.actions.get("removeFromGroup").setEnabled(l&&t.getModel().isVertex(t.getModel().getParent(t.getSelectionCell()))),t.view.getState(t.getSelectionCell()),this.menus.get("navigation").setEnabled(e||null!=t.view.currentRoot),this.actions.get("collapsible").setEnabled(n&&(t.isContainer(t.getSelectionCell())||0<t.model.getChildCount(t.getSelectionCell()))),this.actions.get("home").setEnabled(null!=t.view.currentRoot),this.actions.get("exitGroup").setEnabled(null!=t.view.currentRoot),this.actions.get("enterGroup").setEnabled(1==t.getSelectionCount()&&t.isValidRoot(t.getSelectionCell())),e=1==t.getSelectionCount()&&t.isCellFoldable(t.getSelectionCell()),this.actions.get("expand").setEnabled(e),this.actions.get("collapse").setEnabled(e),this.actions.get("editLink").setEnabled(1==t.getSelectionCount()),this.actions.get("openLink").setEnabled(1==t.getSelectionCount()&&null!=t.getLinkForCell(t.getSelectionCell())),this.actions.get("guides").setEnabled(t.isEnabled()),this.actions.get("grid").setEnabled(!this.editor.chromeless||this.editor.editable),e=t.isEnabled()&&!t.isCellLocked(t.getDefaultParent()),this.menus.get("layout").setEnabled(e),this.menus.get("insert").setEnabled(e),this.menus.get("direction").setEnabled(e&&n),this.menus.get("align").setEnabled(e&&n&&1<t.getSelectionCount()),this.menus.get("distribute").setEnabled(e&&n&&1<t.getSelectionCount()),this.actions.get("selectVertices").setEnabled(e),this.actions.get("selectEdges").setEnabled(e),this.actions.get("selectAll").setEnabled(e),this.actions.get("selectNone").setEnabled(e),this.updatePasteActionStates()},EditorUi.prototype.zeroOffset=new mxPoint(0,0),EditorUi.prototype.getDiagramContainerOffset=function(){return this.zeroOffset},EditorUi.prototype.refresh=function(t){t=null==t||t;var e=this.container.clientWidth,n=this.container.clientHeight;this.container==document.body&&(e=document.body.clientWidth||document.documentElement.clientWidth,n=document.documentElement.clientHeight);var i=0;mxClient.IS_IOS&&!window.navigator.standalone&&window.innerHeight!=document.documentElement.clientHeight&&(i=document.documentElement.clientHeight-window.innerHeight,window.scrollTo(0,0));var l=Math.max(0,Math.min(this.hsplitPosition,e-this.splitSize-20)),o=0;null!=this.menubar&&(this.menubarContainer.style.height=this.menubarHeight+"px",o+=this.menubarHeight),null!=this.toolbar&&(this.toolbarContainer.style.top=this.menubarHeight+"px",this.toolbarContainer.style.height=this.toolbarHeight+"px",o+=this.toolbarHeight),0<o&&(o+=1),e=0,null!=this.sidebarFooterContainer&&(s=this.footerHeight+i,e=Math.max(0,Math.min(n-o-s,this.sidebarFooterHeight)),this.sidebarFooterContainer.style.width=l+"px",this.sidebarFooterContainer.style.height=e+"px",this.sidebarFooterContainer.style.bottom=s+"px"),n=null!=this.format?this.formatWidth:0,this.sidebarContainer.style.top=o+"px",this.sidebarContainer.style.width=l+"px",this.formatContainer.style.top=o+"px",this.formatContainer.style.width=n+"px",this.formatContainer.style.display=null!=this.format?"":"none";var s=this.getDiagramContainerOffset(),r=null!=this.hsplit.parentNode?l+this.splitSize:0;this.diagramContainer.style.left=r+s.x+"px",this.diagramContainer.style.top=o+s.y+"px",this.footerContainer.style.height=this.footerHeight+"px",this.hsplit.style.top=this.sidebarContainer.style.top,this.hsplit.style.bottom=this.footerHeight+i+"px",this.hsplit.style.left=l+"px",this.footerContainer.style.display=0==this.footerHeight?"none":"",null!=this.tabContainer&&(this.tabContainer.style.left=r+"px"),0<this.footerHeight&&(this.footerContainer.style.bottom=i+"px"),this.diagramContainer.style.right=n+"px",l=0,null!=this.tabContainer&&(this.tabContainer.style.bottom=this.footerHeight+i+"px",this.tabContainer.style.right=this.diagramContainer.style.right,l=this.tabContainer.clientHeight),this.sidebarContainer.style.bottom=this.footerHeight+e+i+"px",this.formatContainer.style.bottom=this.footerHeight+i+"px",this.diagramContainer.style.bottom=this.footerHeight+i+l+"px",t&&this.editor.graph.sizeDidChange()},EditorUi.prototype.createTabContainer=function(){return null},EditorUi.prototype.createDivs=function(){this.menubarContainer=this.createDiv("geMenubarContainer"),this.toolbarContainer=this.createDiv("geToolbarContainer"),this.sidebarContainer=this.createDiv("geSidebarContainer"),this.formatContainer=this.createDiv("geSidebarContainer geFormatContainer"),this.diagramContainer=this.createDiv("geDiagramContainer"),this.footerContainer=this.createDiv("geFooterContainer"),this.hsplit=this.createDiv("geHsplit"),this.hsplit.setAttribute("title",mxResources.get("collapseExpand")),this.menubarContainer.style.top="0px",this.menubarContainer.style.left="0px",this.menubarContainer.style.right="0px",this.toolbarContainer.style.left="0px",this.toolbarContainer.style.right="0px",this.sidebarContainer.style.left="0px",this.formatContainer.style.right="0px",this.formatContainer.style.zIndex="1",this.diagramContainer.style.right=(null!=this.format?this.formatWidth:0)+"px",this.footerContainer.style.left="0px",this.footerContainer.style.right="0px",this.footerContainer.style.bottom="0px",this.footerContainer.style.zIndex=mxPopupMenu.prototype.zIndex-2,this.hsplit.style.width=this.splitSize+"px",(this.sidebarFooterContainer=this.createSidebarFooterContainer())&&(this.sidebarFooterContainer.style.left="0px"),this.editor.chromeless?this.diagramContainer.style.border="none":this.tabContainer=this.createTabContainer()},EditorUi.prototype.createSidebarFooterContainer=function(){return null},EditorUi.prototype.createUi=function(){this.menubar=this.editor.chromeless?null:this.menus.createMenubar(this.createDiv("geMenubar")),null!=this.menubar&&this.menubarContainer.appendChild(this.menubar.container),null!=this.menubar&&(this.statusContainer=this.createStatusContainer(),this.editor.addListener("statusChanged",mxUtils.bind(this,function(){this.setStatusText(this.editor.getStatus())})),this.setStatusText(this.editor.getStatus()),this.menubar.container.appendChild(this.statusContainer),this.container.appendChild(this.menubarContainer)),this.sidebar=this.editor.chromeless?null:this.createSidebar(this.sidebarContainer),null!=this.sidebar&&this.container.appendChild(this.sidebarContainer),this.format=this.editor.chromeless||!this.formatEnabled?null:this.createFormat(this.formatContainer),null!=this.format&&this.container.appendChild(this.formatContainer);var t=this.editor.chromeless?null:this.createFooter();null!=t&&(this.footerContainer.appendChild(t),this.container.appendChild(this.footerContainer)),null!=this.sidebar&&this.sidebarFooterContainer&&this.container.appendChild(this.sidebarFooterContainer),this.container.appendChild(this.diagramContainer),null!=this.container&&null!=this.tabContainer&&this.container.appendChild(this.tabContainer),this.toolbar=this.editor.chromeless?null:this.createToolbar(this.createDiv("geToolbar")),null!=this.toolbar&&(this.toolbarContainer.appendChild(this.toolbar.container),this.container.appendChild(this.toolbarContainer)),null!=this.sidebar&&(this.container.appendChild(this.hsplit),this.addSplitHandler(this.hsplit,!0,0,mxUtils.bind(this,function(t){this.hsplitPosition=t,this.refresh()})))},EditorUi.prototype.createStatusContainer=function(){var t=document.createElement("a");return t.className="geItem geStatus",t},EditorUi.prototype.setStatusText=function(t){this.statusContainer.innerHTML=t},EditorUi.prototype.createToolbar=function(t){return new Toolbar(this,t)},EditorUi.prototype.createSidebar=function(t){return new Sidebar(this,t)},EditorUi.prototype.createFormat=function(t){return new Format(this,t)},EditorUi.prototype.createFooter=function(){return this.createDiv("geFooter")},EditorUi.prototype.createDiv=function(t){var e=document.createElement("div");return e.className=t,e},EditorUi.prototype.addSplitHandler=function(t,e,n,i){function l(t){var l;null!=s&&(l=new mxPoint(mxEvent.getClientX(t),mxEvent.getClientY(t)),i(Math.max(0,r+(e?l.x-s.x:s.y-l.y)-n)),mxEvent.consume(t),r!=u()&&(a=!0,h=null))}function o(t){l(t),s=r=null}var s=null,r=null,a=!0,h=null;mxClient.IS_POINTER&&(t.style.touchAction="none");var u=mxUtils.bind(this,function(){var i=parseInt(e?t.style.left:t.style.bottom);return e?i:i+n-this.footerHeight});mxEvent.addGestureListeners(t,function(t){s=new mxPoint(mxEvent.getClientX(t),mxEvent.getClientY(t)),r=u(),a=!1,mxEvent.consume(t)}),mxEvent.addListener(t,"click",mxUtils.bind(this,function(t){var e;!a&&this.hsplitClickEnabled&&(e=null!=h?h-n:0,h=u(),i(e),mxEvent.consume(t))})),mxEvent.addGestureListeners(document,null,l,o),this.destroyFunctions.push(function(){mxEvent.removeGestureListeners(document,null,l,o)})},EditorUi.prototype.handleError=function(t,e,n,i,l){var o;null!=(t=null!=t&&null!=t.error?t.error:t)||null!=e?(l=mxUtils.htmlEntities(mxResources.get("unknownError")),o=mxResources.get("ok"),e=null!=e?e:mxResources.get("error"),null!=t&&null!=t.message&&(l=mxUtils.htmlEntities(t.message)),this.showError(e,l,o,n,null,null,null,null,null,null,null,null,i?n:null)):null!=n&&n()},EditorUi.prototype.showError=function(t,e,n,i,l,o,s,r,a,h,u,d,c){t=new ErrorDialog(this,t,e,n||mxResources.get("ok"),i,l,o,s,d,r,a),e=Math.ceil(null!=e?e.length/50:1),this.showDialog(t.container,h||340,u||100+20*e,!0,!1,c),t.init()},EditorUi.prototype.showDialog=function(t,e,n,i,l,o,s,r,a,h){this.editor.graph.tooltipHandler.resetTimer(),this.editor.graph.tooltipHandler.hideTooltip(),null==this.dialogs&&(this.dialogs=[]),this.dialog=new Dialog(this,t,e,n,i,l,o,s,r,a,h),this.dialogs.push(this.dialog)},EditorUi.prototype.hideDialog=function(t,e,n){null!=this.dialogs&&0<this.dialogs.length&&(null==n||n==this.dialog.container.firstChild)&&(0==(n=this.dialogs.pop()).close(t,e)?this.dialogs.push(n):(this.dialog=0<this.dialogs.length?this.dialogs[this.dialogs.length-1]:null,this.editor.fireEvent(new mxEventObject("hideDialog")),null==this.dialog&&"hidden"!=this.editor.graph.container.style.visibility&&window.setTimeout(mxUtils.bind(this,function(){this.editor.graph.isEditing()&&null!=this.editor.graph.cellEditor.textarea?this.editor.graph.cellEditor.textarea.focus():(mxUtils.clearSelection(),this.editor.graph.container.focus())}),0)))},EditorUi.prototype.ctrlEnter=function(){var t=this.editor.graph;if(t.isEnabled())try{for(var e=t.getSelectionCells(),n=new mxDictionary,i=[],l=0;l<e.length;l++){var o=t.isTableCell(e[l])?t.model.getParent(e[l]):e[l];null==o||n.get(o)||(n.put(o,!0),i.push(o))}t.setSelectionCells(t.duplicateCells(i,!1))}catch(t){this.handleError(t)}},EditorUi.prototype.pickColor=function(t,e){var n=this.editor.graph,i=n.cellEditor.saveSelection(),l=230+17*(Math.ceil(ColorDialog.prototype.presetColors.length/12)+Math.ceil(ColorDialog.prototype.defaultColors.length/12));t=new ColorDialog(this,t||"none",function(t){n.cellEditor.restoreSelection(i),e(t)},function(){n.cellEditor.restoreSelection(i)}),this.showDialog(t.container,230,l,!0,!1),t.init()},EditorUi.prototype.openFile=function(){window.openFile=new OpenFile(mxUtils.bind(this,function(t){this.hideDialog(t)})),this.showDialog(new OpenDialog(this).container,Editor.useLocalStorage?640:320,Editor.useLocalStorage?480:220,!0,!0,function(){window.openFile=null})},EditorUi.prototype.extractGraphModelFromHtml=function(t){var e=null;try{var n,i=t.indexOf("&lt;mxGraphModel ");0<=i&&i<(n=t.lastIndexOf("&lt;/mxGraphModel&gt;"))&&(e=t.substring(i,n+21).replace(/&gt;/g,">").replace(/&lt;/g,"<").replace(/\\&quot;/g,'"').replace(/\n/g,""))}catch(t){}return e},EditorUi.prototype.readGraphModelFromClipboard=function(t){this.readGraphModelFromClipboardWithType(mxUtils.bind(this,function(e){null!=e?t(e):this.readGraphModelFromClipboardWithType(mxUtils.bind(this,function(e){var n;null!=e&&(n=decodeURIComponent(e),this.isCompatibleString(n)&&(e=n)),t(e)}),"text")}),"html")},EditorUi.prototype.readGraphModelFromClipboardWithType=function(t,e){navigator.clipboard.read().then(mxUtils.bind(this,function(n){null!=n&&0<n.length&&"html"==e&&0<=mxUtils.indexOf(n[0].types,"text/html")?n[0].getType("text/html").then(mxUtils.bind(this,function(e){e.text().then(mxUtils.bind(this,function(e){try{var n=this.parseHtmlData(e),i="text/plain"!=n.getAttribute("data-type")?n.innerHTML:mxUtils.trim(null==n.innerText?mxUtils.getTextContent(n):n.innerText);try{var l=i.lastIndexOf("%3E");0<=l&&l<i.length-3&&(i=i.substring(0,l+3))}catch(e){}try{var o=n.getElementsByTagName("span"),s=null!=o&&0<o.length?mxUtils.trim(decodeURIComponent(o[0].textContent)):decodeURIComponent(i);this.isCompatibleString(s)&&(i=s)}catch(e){}}catch(e){}t(this.isCompatibleString(i)?i:null)})).catch(function(e){t(null)})})).catch(function(e){t(null)}):null!=n&&0<n.length&&"text"==e&&0<=mxUtils.indexOf(n[0].types,"text/plain")?n[0].getType("text/plain").then(function(e){e.text().then(function(e){t(e)}).catch(function(){t(null)})}).catch(function(){t(null)}):t(null)})).catch(function(e){t(null)})},EditorUi.prototype.parseHtmlData=function(t){var e=null;if(null!=t&&0<t.length){var n="<meta "==t.substring(0,6);if((e=document.createElement("div")).innerHTML=(n?'<meta charset="utf-8">':"")+this.editor.graph.sanitizeHtml(t),asHtml=!0,null!=(t=e.getElementsByTagName("style")))for(;0<t.length;)t[0].parentNode.removeChild(t[0]);null!=e.firstChild&&e.firstChild.nodeType==mxConstants.NODETYPE_ELEMENT&&null!=e.firstChild.nextSibling&&e.firstChild.nextSibling.nodeType==mxConstants.NODETYPE_ELEMENT&&"META"==e.firstChild.nodeName&&"A"==e.firstChild.nextSibling.nodeName&&null==e.firstChild.nextSibling.nextSibling&&(t=null==e.firstChild.nextSibling.innerText?mxUtils.getTextContent(e.firstChild.nextSibling):e.firstChild.nextSibling.innerText)==e.firstChild.nextSibling.getAttribute("href")&&(mxUtils.setTextContent(e,t),asHtml=!1),null!=(n=n&&null!=e.firstChild?e.firstChild.nextSibling:e.firstChild)&&null==n.nextSibling&&n.nodeType==mxConstants.NODETYPE_ELEMENT&&"IMG"==n.nodeName?null!=(t=n.getAttribute("src"))&&("data:image/png;base64,"==t.substring(0,22)&&null!=(n=this.extractGraphModelFromPng(t))&&0<n.length&&(t=n),mxUtils.setTextContent(e,t),asHtml=!1):1==(n=e.getElementsByTagName("img")).length&&null!=(t=(n=n[0]).getAttribute("src"))&&n.parentNode==e&&1==e.children.length&&("data:image/png;base64,"==t.substring(0,22)&&null!=(n=this.extractGraphModelFromPng(t))&&0<n.length&&(t=n),mxUtils.setTextContent(e,t),asHtml=!1),asHtml&&Graph.removePasteFormatting(e)}return asHtml||e.setAttribute("data-type","text/plain"),e},EditorUi.prototype.extractGraphModelFromEvent=function(t){var e=null;return null!=t&&null!=(t=null!=t.dataTransfer?t.dataTransfer:t.clipboardData)&&(10==document.documentMode||11==document.documentMode?e=t.getData("Text"):(e=0<=mxUtils.indexOf(t.types,"text/html")?t.getData("text/html"):null,mxUtils.indexOf(t.types,null==e||0==e.length)&&(e=t.getData("text/plain"))),null!=e&&(e=Graph.zapGremlins(mxUtils.trim(e)),null!=(t=this.extractGraphModelFromHtml(e))&&(e=t))),null!=e&&this.isCompatibleString(e)?e:null},EditorUi.prototype.isCompatibleString=function(t){return!1},EditorUi.prototype.saveFile=function(t){t||null==this.editor.filename?(t=new FilenameDialog(this,this.editor.getOrCreateFilename(),mxResources.get("save"),mxUtils.bind(this,function(t){this.save(t)}),null,mxUtils.bind(this,function(t){return null!=t&&0<t.length||(mxUtils.confirm(mxResources.get("invalidName")),!1)})),this.showDialog(t.container,300,100,!0,!0),t.init()):this.save(this.editor.getOrCreateFilename())},EditorUi.prototype.save=function(t){if(null!=t){this.editor.graph.isEditing()&&this.editor.graph.stopEditing();var e=mxUtils.getXml(this.editor.getGraphXml());try{if(Editor.useLocalStorage){if(null!=localStorage.getItem(t)&&!mxUtils.confirm(mxResources.get("replaceIt",[t])))return;localStorage.setItem(t,e),this.editor.setStatus(mxUtils.htmlEntities(mxResources.get("saved"))+" "+new Date)}else{if(!(e.length<MAX_REQUEST_SIZE))return mxUtils.alert(mxResources.get("drawingTooLarge")),void mxUtils.popup(e);new mxXmlRequest(SAVE_URL,"filename="+encodeURIComponent(t)+"&xml="+encodeURIComponent(e)).simulate(document,"_blank")}this.editor.setModified(!1),this.editor.setFilename(t),this.updateDocumentTitle()}catch(t){this.editor.setStatus(mxUtils.htmlEntities(mxResources.get("errorSavingFile")))}}},EditorUi.prototype.executeLayout=function(t,e,n){var i=this.editor.graph;if(i.isEnabled()){i.getModel().beginUpdate();try{t()}catch(t){throw t}finally{this.allowAnimation&&e&&(null==navigator.userAgent||navigator.userAgent.indexOf("Camino")<0)?((t=new mxMorphing(i)).addListener(mxEvent.DONE,mxUtils.bind(this,function(){i.getModel().endUpdate(),null!=n&&n()})),t.startAnimation()):(i.getModel().endUpdate(),null!=n&&n())}}},EditorUi.prototype.showImageDialog=function(t,e,n,i){var l,o=(i=this.editor.graph.cellEditor).saveSelection(),s=mxUtils.prompt(t,e);i.restoreSelection(o),null!=s&&0<s.length?((l=new Image).onload=function(){n(s,l.width,l.height)},l.onerror=function(){n(null),mxUtils.alert(mxResources.get("fileNotFound"))},l.src=s):n(null)},EditorUi.prototype.showLinkDialog=function(t,e,n){t=new LinkDialog(this,t,e,n),this.showDialog(t.container,420,90,!0,!0),t.init()},EditorUi.prototype.showDataDialog=function(t){null!=t&&(t=new EditDataDialog(this,t),this.showDialog(t.container,480,420,!0,!1,null,!1),t.init())},EditorUi.prototype.showBackgroundImageDialog=function(t,e){t=null!=t?t:mxUtils.bind(this,function(t){(t=new ChangePageSetup(this,null,t)).ignoreColor=!0,this.editor.graph.model.execute(t)});var n=mxUtils.prompt(mxResources.get("backgroundImage"),null!=e?e.src:"");null!=n&&0<n.length?((e=new Image).onload=function(){t(new mxImage(n,e.width,e.height),!1)},e.onerror=function(){t(null,!0),mxUtils.alert(mxResources.get("fileNotFound"))},e.src=n):t(null)},EditorUi.prototype.setBackgroundImage=function(t){this.editor.graph.setBackgroundImage(t),this.editor.graph.view.validateBackgroundImage(),this.fireEvent(new mxEventObject("backgroundImageChanged"))},EditorUi.prototype.confirm=function(t,e,n){mxUtils.confirm(t)?null!=e&&e():null!=n&&n()},EditorUi.prototype.createOutline=function(t){var e=new mxOutline(this.editor.graph);return e.border=20,mxEvent.addListener(window,"resize",function(){e.update()}),this.addListener("pageFormatChanged",function(){e.update()}),e},EditorUi.prototype.altShiftActions={67:"clearWaypoints",65:"connectionArrows",76:"editLink",80:"connectionPoints",84:"editTooltip",86:"pasteSize",88:"copySize",66:"copyData",69:"pasteData"},EditorUi.prototype.createKeyHandler=function(t){function e(t,e,n){s.push(function(){if(!i.isSelectionEmpty()&&i.isEnabled())if(e=null!=e?e:1,n){i.getModel().beginUpdate();try{for(var l=i.getSelectionCells(),o=0;o<l.length;o++)i.getModel().isVertex(l[o])&&i.isCellResizable(l[o])&&null!=(r=i.getCellGeometry(l[o]))&&(r=r.clone(),37==t?r.width=Math.max(0,r.width-e):38==t?r.height=Math.max(0,r.height-e):39==t?r.width+=e:40==t&&(r.height+=e),i.getModel().setGeometry(l[o],r))}finally{i.getModel().endUpdate()}}else{var s=i.getSelectionCell(),r=i.model.getParent(s);if(l=null,null!=(l=1==i.getSelectionCount()&&i.model.isVertex(s)&&null!=i.layoutManager&&!i.isCellLocked(s)?i.layoutManager.getLayout(r):l)&&l.constructor==mxStackLayout)l=r.getIndex(s),37==t||38==t?i.model.add(r,s,Math.max(0,l-1)):39!=t&&40!=t||i.model.add(r,s,Math.min(i.model.getChildCount(r),l+1));else{for(l=i.getMovableCells(i.getSelectionCells()),s=[],o=0;o<l.length;o++)r=i.getCurrentCellStyle(l[o]),"1"==mxUtils.getValue(r,"part","0")?(r=i.model.getParent(l[o]),i.model.isVertex(r)&&mxUtils.indexOf(l,r)<0&&s.push(r)):s.push(l[o]);0<s.length&&(l=r=0,37==t?r=-e:38==t?l=-e:39==t?r=e:40==t&&(l=e),i.moveCells(s,r,l))}}}),null!=r&&window.clearTimeout(r),r=window.setTimeout(function(){if(0<s.length){i.getModel().beginUpdate();try{for(var t=0;t<s.length;t++)s[t]();s=[]}finally{i.getModel().endUpdate()}}},200)}var n=this,i=this.editor.graph,l=new mxKeyHandler(i),o=l.isEventIgnored;l.isEventIgnored=function(t){return!(mxEvent.isShiftDown(t)&&9==t.keyCode)&&(!this.isControlDown(t)||mxEvent.isShiftDown(t)||90!=t.keyCode&&89!=t.keyCode&&188!=t.keyCode&&190!=t.keyCode&&85!=t.keyCode)&&(66!=t.keyCode&&73!=t.keyCode||!this.isControlDown(t)||this.graph.cellEditor.isContentEditing()&&!mxClient.IS_FF&&!mxClient.IS_SF)&&o.apply(this,arguments)},l.isEnabledForEvent=function(t){return!mxEvent.isConsumed(t)&&this.isGraphEvent(t)&&this.isEnabled()&&(null==n.dialogs||0==n.dialogs.length)},l.isControlDown=function(t){return mxEvent.isControlDown(t)||mxClient.IS_MAC&&t.metaKey};var s=[],r=null,a={37:mxConstants.DIRECTION_WEST,38:mxConstants.DIRECTION_NORTH,39:mxConstants.DIRECTION_EAST,40:mxConstants.DIRECTION_SOUTH},h=l.getFunction;mxKeyHandler.prototype.getFunction=function(t){if(i.isEnabled()){if(mxEvent.isShiftDown(t)&&mxEvent.isAltDown(t)){var l=n.actions.get(n.altShiftActions[t.keyCode]);if(null!=l)return l.funct}if(9==t.keyCode&&mxEvent.isAltDown(t))return i.cellEditor.isContentEditing()?function(){document.execCommand("outdent",!1,null)}:mxEvent.isShiftDown(t)?function(){i.selectParentCell()}:function(){i.selectChildCell()};if(null!=a[t.keyCode]&&!i.isSelectionEmpty()){if(this.isControlDown(t)||!mxEvent.isShiftDown(t)||!mxEvent.isAltDown(t))return this.isControlDown(t)?function(){e(t.keyCode,mxEvent.isShiftDown(t)?i.gridSize:null,!0)}:function(){e(t.keyCode,mxEvent.isShiftDown(t)?i.gridSize:null)};if(i.model.isVertex(i.getSelectionCell()))return function(){var e=i.connectVertex(i.getSelectionCell(),a[t.keyCode],i.defaultEdgeLength,t,!0);null!=e&&0<e.length&&(1==e.length&&i.model.isEdge(e[0])?i.setSelectionCell(i.model.getTerminal(e[0],!1)):i.setSelectionCell(e[e.length-1]),i.scrollCellToVisible(i.getSelectionCell()),null!=n.hoverIcons&&n.hoverIcons.update(i.view.getState(i.getSelectionCell())))}}}return h.apply(this,arguments)},l.bindAction=mxUtils.bind(this,function(t,e,n,i){var o=this.actions.get(n);null!=o&&(n=function(){o.isEnabled()&&o.funct()},e?i?l.bindControlShiftKey(t,n):l.bindControlKey(t,n):i?l.bindShiftKey(t,n):l.bindKey(t,n))});var u=this,d=l.escape;return l.escape=function(t){d.apply(this,arguments)},l.enter=function(){},l.bindControlShiftKey(36,function(){i.exitGroup()}),l.bindControlShiftKey(35,function(){i.enterGroup()}),l.bindShiftKey(36,function(){i.home()}),l.bindKey(35,function(){i.refresh()}),l.bindAction(107,!0,"zoomIn"),l.bindAction(109,!0,"zoomOut"),l.bindAction(80,!0,"print"),l.bindAction(79,!0,"outline",!0),this.editor.chromeless&&!this.editor.editable||(l.bindControlKey(36,function(){i.isEnabled()&&i.foldCells(!0)}),l.bindControlKey(35,function(){i.isEnabled()&&i.foldCells(!1)}),l.bindControlKey(13,function(){u.ctrlEnter()}),l.bindAction(8,!1,"delete"),l.bindAction(8,!0,"deleteAll"),l.bindAction(8,!1,"deleteLabels",!0),l.bindAction(46,!1,"delete"),l.bindAction(46,!0,"deleteAll"),l.bindAction(46,!1,"deleteLabels",!0),l.bindAction(36,!1,"resetView"),l.bindAction(72,!0,"fitWindow",!0),l.bindAction(74,!0,"fitPage"),l.bindAction(74,!0,"fitTwoPages",!0),l.bindAction(48,!0,"customZoom"),l.bindAction(82,!0,"turn"),l.bindAction(82,!0,"clearDefaultStyle",!0),l.bindAction(83,!0,"save"),l.bindAction(83,!0,"saveAs",!0),l.bindAction(65,!0,"selectAll"),l.bindAction(65,!0,"selectNone",!0),l.bindAction(73,!0,"selectVertices",!0),l.bindAction(69,!0,"selectEdges",!0),l.bindAction(69,!0,"editStyle"),l.bindAction(66,!0,"bold"),l.bindAction(66,!0,"toBack",!0),l.bindAction(70,!0,"toFront",!0),l.bindAction(68,!0,"duplicate"),l.bindAction(68,!0,"setAsDefaultStyle",!0),l.bindAction(90,!0,"undo"),l.bindAction(89,!0,"autosize",!0),l.bindAction(88,!0,"cut"),l.bindAction(67,!0,"copy"),l.bindAction(86,!0,"paste"),l.bindAction(71,!0,"group"),l.bindAction(77,!0,"editData"),l.bindAction(71,!0,"grid",!0),l.bindAction(73,!0,"italic"),l.bindAction(76,!0,"lockUnlock"),l.bindAction(76,!0,"layers",!0),l.bindAction(80,!0,"formatPanel",!0),l.bindAction(85,!0,"underline"),l.bindAction(85,!0,"ungroup",!0),l.bindAction(190,!0,"superscript"),l.bindAction(188,!0,"subscript"),l.bindAction(9,!1,"indent",!0),l.bindKey(13,function(){i.isEnabled()&&i.startEditingAtCell()}),l.bindKey(113,function(){i.isEnabled()&&i.startEditingAtCell()})),mxClient.IS_WIN?l.bindAction(89,!0,"redo"):l.bindAction(90,!0,"redo",!0),l},EditorUi.prototype.destroy=function(){if(null!=this.editor&&(this.editor.destroy(),this.editor=null),null!=this.menubar&&(this.menubar.destroy(),this.menubar=null),null!=this.toolbar&&(this.toolbar.destroy(),this.toolbar=null),null!=this.sidebar&&(this.sidebar.destroy(),this.sidebar=null),null!=this.keyHandler&&(this.keyHandler.destroy(),this.keyHandler=null),null!=this.keydownHandler&&(mxEvent.removeListener(document,"keydown",this.keydownHandler),this.keydownHandler=null),null!=this.keyupHandler&&(mxEvent.removeListener(document,"keyup",this.keyupHandler),this.keyupHandler=null),null!=this.resizeHandler&&(mxEvent.removeListener(window,"resize",this.resizeHandler),this.resizeHandler=null),null!=this.gestureHandler&&(mxEvent.removeGestureListeners(document,this.gestureHandler),this.gestureHandler=null),null!=this.orientationChangeHandler&&(mxEvent.removeListener(window,"orientationchange",this.orientationChangeHandler),this.orientationChangeHandler=null),null!=this.scrollHandler&&(mxEvent.removeListener(window,"scroll",this.scrollHandler),this.scrollHandler=null),null!=this.destroyFunctions){for(var t=0;t<this.destroyFunctions.length;t++)this.destroyFunctions[t]();this.destroyFunctions=null}var e=[this.menubarContainer,this.toolbarContainer,this.sidebarContainer,this.formatContainer,this.diagramContainer,this.footerContainer,this.chromelessToolbar,this.hsplit,this.sidebarFooterContainer,this.layersDialog];for(t=0;t<e.length;t++)null!=e[t]&&null!=e[t].parentNode&&e[t].parentNode.removeChild(e[t])},Format=function(t,e){this.editorUi=t,this.container=e},Format.inactiveTabBackgroundColor="#f1f3f4",Format.prototype.labelIndex=0,Format.prototype.diagramIndex=0,Format.prototype.currentIndex=0,Format.prototype.showCloseButton=!0,Format.prototype.roundableShapes="label rectangle internalStorage corner parallelogram swimlane triangle trapezoid ext step tee process link rhombus offPageConnector loopLimit hexagon manualInput card curlyBracket singleArrow callout doubleArrow flexArrow umlLifeline".split(" "),Format.prototype.init=function(){var t=this.editorUi,e=t.editor,n=e.graph;this.update=mxUtils.bind(this,function(t,e){this.clearSelectionState(),this.refresh()}),n.getSelectionModel().addListener(mxEvent.CHANGE,this.update),n.addListener(mxEvent.EDITING_STARTED,this.update),n.addListener(mxEvent.EDITING_STOPPED,this.update),n.getModel().addListener(mxEvent.CHANGE,this.update),n.getView().addListener("unitChanged",this.update),n.addListener(mxEvent.ROOT,mxUtils.bind(this,function(){this.refresh()})),t.addListener("styleChanged",mxUtils.bind(this,function(t,e){this.refresh()})),e.addListener("autosaveChanged",mxUtils.bind(this,function(){this.refresh()})),this.refresh()},Format.prototype.clearSelectionState=function(){this.selectionState=null},Format.prototype.getSelectionState=function(){return null==this.selectionState&&(this.selectionState=this.createSelectionState()),this.selectionState},Format.prototype.createSelectionState=function(){for(var t=this.editorUi.editor.graph.getSelectionCells(),e=this.initSelectionState(),n=0;n<t.length;n++)this.updateSelectionStateForCell(e,t[n],t,0==n);return e},Format.prototype.initSelectionState=function(){return{vertices:[],edges:[],x:null,y:null,width:null,height:null,style:{},containsImage:!1,containsLabel:!1,fill:!0,glass:!0,rounded:!0,comic:!0,autoSize:!1,image:!0,shadow:!0,lineJumps:!0,resizable:!0,table:!1,cell:!1,row:!1,movable:!0,rotatable:!0,stroke:!0}},Format.prototype.updateSelectionStateForCell=function(t,e,n,i){var l,o;(n=this.editorUi.editor.graph).getModel().isVertex(e)?(t.resizable=t.resizable&&n.isCellResizable(e),t.rotatable=t.rotatable&&n.isCellRotatable(e),t.movable=t.movable&&n.isCellMovable(e)&&!n.isTableRow(e)&&!n.isTableCell(e),t.table=t.table||n.isTable(e),t.cell=t.cell||n.isTableCell(e),t.row=t.row||n.isTableRow(e),t.vertices.push(e),null==(o=n.getCellGeometry(e))||(0<o.width?null==t.width?t.width=o.width:t.width!=o.width&&(t.width=""):t.containsLabel=!0,0<o.height?null==t.height?t.height=o.height:t.height!=o.height&&(t.height=""):t.containsLabel=!0,o.relative&&null==o.offset)||(l=(o.relative?o.offset:o).x,o=(o.relative?o.offset:o).y,null==t.x?t.x=l:t.x!=l&&(t.x=""),null==t.y?t.y=o:t.y!=o&&(t.y=""))):n.getModel().isEdge(e)&&(t.edges.push(e),t.resizable=!1,t.rotatable=!1,t.movable=!1),null!=(e=n.view.getState(e))&&(t.autoSize=t.autoSize||this.isAutoSizeState(e),t.glass=t.glass&&this.isGlassState(e),t.rounded=t.rounded&&this.isRoundedState(e),t.lineJumps=t.lineJumps&&this.isLineJumpState(e),t.image=t.image&&this.isImageState(e),t.shadow=t.shadow&&this.isShadowState(e),t.comic=t.comic&&this.isComicState(e),t.fill=t.fill&&this.isFillState(e),t.stroke=t.stroke&&this.isStrokeState(e),l=mxUtils.getValue(e.style,mxConstants.STYLE_SHAPE,null),t.containsImage=t.containsImage||"image"==l,n.mergeStyle(e.style,t.style,i))},Format.prototype.isComicState=function(t){return t=mxUtils.getValue(t.style,mxConstants.STYLE_SHAPE,null),0<=mxUtils.indexOf("label rectangle internalStorage corner parallelogram note collate swimlane triangle trapezoid ext step tee process link rhombus offPageConnector loopLimit hexagon manualInput singleArrow doubleArrow flexArrow filledEdge card umlLifeline connector folder component sortShape cross umlFrame cube isoCube isoRectangle partialRectangle".split(" "),t)},Format.prototype.isFillState=function(t){return!this.isSpecialColor(t.style[mxConstants.STYLE_FILLCOLOR])&&(t.view.graph.model.isVertex(t.cell)||"arrow"==mxUtils.getValue(t.style,mxConstants.STYLE_SHAPE,null)||"filledEdge"==mxUtils.getValue(t.style,mxConstants.STYLE_SHAPE,null)||"flexArrow"==mxUtils.getValue(t.style,mxConstants.STYLE_SHAPE,null))},Format.prototype.isStrokeState=function(t){return!this.isSpecialColor(t.style[mxConstants.STYLE_STROKECOLOR])},Format.prototype.isSpecialColor=function(t){return 0<=mxUtils.indexOf([mxConstants.STYLE_STROKECOLOR,mxConstants.STYLE_FILLCOLOR,"inherit","swimlane","indicated"],t)},Format.prototype.isGlassState=function(t){return"label"==(t=mxUtils.getValue(t.style,mxConstants.STYLE_SHAPE,null))||"rectangle"==t||"internalStorage"==t||"ext"==t||"umlLifeline"==t||"swimlane"==t||"process"==t},Format.prototype.isRoundedState=function(t){return null!=t.shape?t.shape.isRoundable():0<=mxUtils.indexOf(this.roundableShapes,mxUtils.getValue(t.style,mxConstants.STYLE_SHAPE,null))},Format.prototype.isLineJumpState=function(t){var e=mxUtils.getValue(t.style,mxConstants.STYLE_SHAPE,null);return!mxUtils.getValue(t.style,mxConstants.STYLE_CURVED,!1)&&("connector"==e||"filledEdge"==e)},Format.prototype.isAutoSizeState=function(t){return"1"==mxUtils.getValue(t.style,mxConstants.STYLE_AUTOSIZE,null)},Format.prototype.isImageState=function(t){return"label"==(t=mxUtils.getValue(t.style,mxConstants.STYLE_SHAPE,null))||"image"==t},Format.prototype.isShadowState=function(t){return"image"!=mxUtils.getValue(t.style,mxConstants.STYLE_SHAPE,null)},Format.prototype.clear=function(){if(this.container.innerHTML="",null!=this.panels)for(var t=0;t<this.panels.length;t++)this.panels[t].destroy();this.panels=[]},Format.prototype.refresh=function(){null!=this.pendingRefresh&&(window.clearTimeout(this.pendingRefresh),this.pendingRefresh=null),this.pendingRefresh=window.setTimeout(mxUtils.bind(this,function(){this.immediateRefresh()}))},Format.prototype.immediateRefresh=function(){var t,e,n,i,l,o,s,r,a,h,u,d;"0px"!=this.container.style.width&&(this.clear(),e=(t=this.editorUi).editor.graph,(n=document.createElement("div")).style.whiteSpace="nowrap",n.style.color="rgb(112, 112, 112)",n.style.textAlign="left",n.style.cursor="default",(i=document.createElement("div")).className="geFormatSection",i.style.textAlign="center",i.style.fontWeight="bold",i.style.paddingTop="8px",i.style.fontSize="13px",i.style.borderWidth="0px 0px 1px 1px",i.style.borderStyle="solid",i.style.display="inline-block",i.style.height="25px",i.style.overflow="hidden",i.style.width="100%",this.container.appendChild(n),mxEvent.addListener(i,mxClient.IS_POINTER?"pointerdown":"mousedown",mxUtils.bind(this,function(t){t.preventDefault()})),l=this.getSelectionState().containsLabel,s=o=null,r=mxUtils.bind(this,function(t,n,i){var r=mxUtils.bind(this,function(r){o!=t&&(l?this.labelIndex=i:e.isSelectionEmpty()?this.diagramIndex=i:this.currentIndex=i,null!=o&&(o.style.backgroundColor=Format.inactiveTabBackgroundColor,o.style.borderBottomWidth="1px"),(o=t).style.backgroundColor="",o.style.borderBottomWidth="0px",s!=n&&(null!=s&&(s.style.display="none"),(s=n).style.display=""))});mxEvent.addListener(t,"click",r),mxEvent.addListener(t,mxClient.IS_POINTER?"pointerdown":"mousedown",mxUtils.bind(this,function(t){t.preventDefault()})),i==(l?this.labelIndex:e.isSelectionEmpty()?this.diagramIndex:this.currentIndex)&&r()}),a=0,e.isSelectionEmpty()?(mxUtils.write(i,mxResources.get("diagram")),i.style.borderLeftWidth="0px",n.appendChild(i),h=n.cloneNode(!1),this.panels.push(new DiagramFormatPanel(this,t,h)),this.container.appendChild(h),null!=Editor.styles&&(h.style.display="none",i.style.width=this.showCloseButton?"106px":"50%",i.style.cursor="pointer",i.style.backgroundColor=Format.inactiveTabBackgroundColor,(u=i.cloneNode(!1)).style.borderLeftWidth="1px",u.style.borderRightWidth="1px",u.style.backgroundColor=Format.inactiveTabBackgroundColor,r(i,h,a++),(d=n.cloneNode(!1)).style.display="none",mxUtils.write(u,mxResources.get("style")),n.appendChild(u),this.panels.push(new DiagramStylePanel(this,t,d)),this.container.appendChild(d),r(u,d,a++)),this.showCloseButton&&((u=i.cloneNode(!1)).style.borderLeftWidth="1px",u.style.borderRightWidth="1px",u.style.borderBottomWidth="1px",u.style.backgroundColor=Format.inactiveTabBackgroundColor,u.style.position="absolute",u.style.right="0px",u.style.top="0px",u.style.width="25px",(r=document.createElement("img")).setAttribute("border","0"),r.setAttribute("src",Dialog.prototype.closeImage),r.setAttribute("title",mxResources.get("hide")),r.style.position="absolute",r.style.display="block",r.style.right="0px",r.style.top="8px",r.style.cursor="pointer",r.style.marginTop="1px",r.style.marginRight="6px",r.style.border="1px solid transparent",r.style.padding="1px",r.style.opacity=.5,u.appendChild(r),mxEvent.addListener(r,"click",function(){t.actions.get("formatPanel").funct()}),n.appendChild(u))):e.isEditing()?(mxUtils.write(i,mxResources.get("text")),n.appendChild(i),this.panels.push(new TextFormatPanel(this,t,n))):(i.style.backgroundColor=Format.inactiveTabBackgroundColor,i.style.borderLeftWidth="1px",i.style.cursor="pointer",i.style.width=l?"50%":"33.3%",h=(u=i.cloneNode(!1)).cloneNode(!1),u.style.backgroundColor=Format.inactiveTabBackgroundColor,h.style.backgroundColor=Format.inactiveTabBackgroundColor,l?u.style.borderLeftWidth="0px":(i.style.borderLeftWidth="0px",mxUtils.write(i,mxResources.get("style")),n.appendChild(i),(d=n.cloneNode(!1)).style.display="none",this.panels.push(new StyleFormatPanel(this,t,d)),this.container.appendChild(d),r(i,d,a++)),mxUtils.write(u,mxResources.get("text")),n.appendChild(u),(i=n.cloneNode(!1)).style.display="none",this.panels.push(new TextFormatPanel(this,t,i)),this.container.appendChild(i),mxUtils.write(h,mxResources.get("arrange")),n.appendChild(h),(n=n.cloneNode(!1)).style.display="none",this.panels.push(new ArrangePanel(this,t,n)),this.container.appendChild(n),r(u,i,a++),r(h,n,a++)))},BaseFormatPanel=function(t,e,n){this.format=t,this.editorUi=e,this.container=n,this.listeners=[]},BaseFormatPanel.prototype.buttonBackgroundColor="white",BaseFormatPanel.prototype.getSelectionState=function(){for(var t=this.editorUi.editor.graph,e=t.getSelectionCells(),n=null,i=0;i<e.length;i++){var l=t.view.getState(e[i]);if(null!=l&&null!=(l=mxUtils.getValue(l.style,mxConstants.STYLE_SHAPE,null)))if(null==n)n=l;else if(n!=l)return null}return n},BaseFormatPanel.prototype.installInputHandler=function(t,e,n,i,l,o,s,r){o=null!=o?o:"",r=null!=r&&r;var a=this.editorUi,h=a.editor.graph;i=null!=i?i:1,l=null!=l?l:999;var u=null,d=!1,c=mxUtils.bind(this,function(c){var p=(r?parseFloat:parseInt)(t.value);if(isNaN(p)||e!=mxConstants.STYLE_ROTATION||(p=mxUtils.mod(Math.round(100*p),36e3)/100),p=Math.min(l,Math.max(i,isNaN(p)?n:p)),h.cellEditor.isContentEditing()&&s)d||(d=!0,null!=u&&(h.cellEditor.restoreSelection(u),u=null),s(p),t.value=p+o,d=!1);else if(p!=mxUtils.getValue(this.format.getSelectionState().style,e,n)){h.isEditing()&&h.stopEditing(!0),h.getModel().beginUpdate();try{var m=h.getSelectionCells();h.setCellStyles(e,p,m),e==mxConstants.STYLE_FONTSIZE&&h.updateLabelElements(h.getSelectionCells(),function(t){t.style.fontSize=p+"px",t.removeAttribute("size")});for(var g=0;g<m.length;g++)0==h.model.getChildCount(m[g])&&h.autoSizeCell(m[g],!1);a.fireEvent(new mxEventObject("styleChanged","keys",[e],"values",[p],"cells",m))}finally{h.getModel().endUpdate()}}t.value=p+o,mxEvent.consume(c)});return s&&h.cellEditor.isContentEditing()&&(mxEvent.addListener(t,"mousedown",function(){document.activeElement==h.cellEditor.textarea&&(u=h.cellEditor.saveSelection())}),mxEvent.addListener(t,"touchstart",function(){document.activeElement==h.cellEditor.textarea&&(u=h.cellEditor.saveSelection())})),mxEvent.addListener(t,"change",c),mxEvent.addListener(t,"blur",c),c},BaseFormatPanel.prototype.createPanel=function(){var t=document.createElement("div");return t.className="geFormatSection",t.style.padding="12px 0px 12px 18px",t},BaseFormatPanel.prototype.createTitle=function(t){var e=document.createElement("div");return e.style.padding="0px 0px 6px 0px",e.style.whiteSpace="nowrap",e.style.overflow="hidden",e.style.width="200px",e.style.fontWeight="bold",mxUtils.write(e,t),e},BaseFormatPanel.prototype.createStepper=function(t,e,n,i,l,o,s){n=null!=n?n:1,i=null!=i?i:8,(mxClient.IS_MT||8<=document.documentMode)&&(i+=1);var r=document.createElement("div");mxUtils.setPrefixedStyle(r.style,"borderRadius","3px"),r.style.border="1px solid rgb(192, 192, 192)",r.style.position="absolute";var a=document.createElement("div");a.style.borderBottom="1px solid rgb(192, 192, 192)",a.style.position="relative",a.style.height=i+"px",a.style.width="10px",a.className="geBtnUp",r.appendChild(a);var h,u=a.cloneNode(!1);return u.style.border="none",u.style.height=i+"px",u.className="geBtnDown",r.appendChild(u),mxEvent.addListener(u,"click",function(i){""==t.value&&(t.value=o||"2");var l=(s?parseFloat:parseInt)(t.value);isNaN(l)||(t.value=l-n,null!=e&&e(i)),mxEvent.consume(i)}),mxEvent.addListener(a,"click",function(i){""==t.value&&(t.value=o||"0");var l=(s?parseFloat:parseInt)(t.value);isNaN(l)||(t.value=l+n,null!=e&&e(i)),mxEvent.consume(i)}),l&&(h=null,mxEvent.addGestureListeners(r,function(t){mxEvent.consume(t)},null,function(t){if(null!=h){try{h.select()}catch(t){}h=null,mxEvent.consume(t)}})),r},BaseFormatPanel.prototype.createOption=function(t,e,n,i,l){var o=document.createElement("div");o.style.padding="6px 0px 1px 0px",o.style.whiteSpace="nowrap",o.style.overflow="hidden",o.style.width="200px",o.style.height="18px";var s=document.createElement("input");s.setAttribute("type","checkbox"),s.style.margin="0px 6px 0px 0px",o.appendChild(s);var r=document.createElement("span");function a(t){h||(h=!0,t?(s.setAttribute("checked","checked"),s.defaultChecked=!0,s.checked=!0):(s.removeAttribute("checked"),s.defaultChecked=!1,s.checked=!1),u!=t&&(u=t,e()!=u&&n(u)),h=!1)}mxUtils.write(r,t),o.appendChild(r);var h=!1,u=e();return mxEvent.addListener(o,"click",function(t){"disabled"!=s.getAttribute("disabled")&&((t=mxEvent.getSource(t))!=o&&t!=r||(s.checked=!s.checked),a(s.checked))}),a(u),null!=i&&(i.install(a),this.listeners.push(i)),null!=l&&l(o),o},BaseFormatPanel.prototype.createCellOption=function(t,e,n,i,l,o,s,r,a){var h=this.editorUi,u=h.editor.graph;i=null!=i?"null"==i?null:i:1,l=null!=l?"null"==l?null:l:0;var d=null!=a?u.getCommonStyle(a):this.format.selectionState.style;return this.createOption(t,function(){return mxUtils.getValue(d,e,n)!=l},function(t){if(r&&u.stopEditing(),null!=s)s.funct();else{u.getModel().beginUpdate();try{var n=null!=a?a:u.getSelectionCells();u.setCellStyles(e,t=t?i:l,n),null!=o&&o(n,t),h.fireEvent(new mxEventObject("styleChanged","keys",[e],"values",[t],"cells",n))}finally{u.getModel().endUpdate()}}},{install:function(t){this.listener=function(){t(mxUtils.getValue(d,e,n)!=l)},u.getModel().addListener(mxEvent.CHANGE,this.listener)},destroy:function(){u.getModel().removeListener(this.listener)}})},BaseFormatPanel.prototype.createColorOption=function(t,e,n,i,l,o,s){var r=document.createElement("div");r.style.padding="6px 0px 1px 0px",r.style.whiteSpace="nowrap",r.style.overflow="hidden",r.style.width="200px",r.style.height="18px";var a=document.createElement("input");a.setAttribute("type","checkbox"),a.style.margin="0px 6px 0px 0px",s||r.appendChild(a);var h=document.createElement("span");function u(t,l,r){c||(c=!0,t=/(^#?[a-zA-Z0-9]*$)/.test(t)?t:i,p.innerHTML='<div style="width:36px;height:12px;margin:3px;border:1px solid black;background-color:'+mxUtils.htmlEntities(null!=t&&t!=mxConstants.NONE?t:i)+';"></div>',null!=t&&t!=mxConstants.NONE?(a.setAttribute("checked","checked"),a.defaultChecked=!0,a.checked=!0):(a.removeAttribute("checked"),a.defaultChecked=!1,a.checked=!1),p.style.display=a.checked||s?"":"none",null!=o&&o(t),l||(d=t,(r||s||e()!=d)&&n(d)),c=!1)}mxUtils.write(h,t),r.appendChild(h);var d=e(),c=!1,p=null;return(p=mxUtils.button("",mxUtils.bind(this,function(t){this.editorUi.pickColor(d,function(t){u(t,null,!0)}),mxEvent.consume(t)}))).style.position="absolute",p.style.marginTop="-4px",p.style.right="20px",p.style.height="22px",p.className="geColorBtn",p.style.display=a.checked||s?"":"none",r.appendChild(p),mxEvent.addListener(r,"click",function(t){(t=mxEvent.getSource(t))!=a&&"INPUT"==t.nodeName||(t!=a&&(a.checked=!a.checked),a.checked||null==d||d==mxConstants.NONE||i==mxConstants.NONE||(i=d),u(a.checked?i:mxConstants.NONE))}),u(d,!0),null!=l&&(l.install(u),this.listeners.push(l)),r},BaseFormatPanel.prototype.createCellColorOption=function(t,e,n,i,l){var o=this.editorUi,s=o.editor.graph;return this.createColorOption(t,function(){var t=s.view.getState(s.getSelectionCell());return null!=t?mxUtils.getValue(t.style,e,null):null},function(t){s.getModel().beginUpdate();try{s.setCellStyles(e,t,s.getSelectionCells()),null!=l&&l(t),o.fireEvent(new mxEventObject("styleChanged","keys",[e],"values",[t],"cells",s.getSelectionCells()))}finally{s.getModel().endUpdate()}},n||mxConstants.NONE,{install:function(t){this.listener=function(){var n=s.view.getState(s.getSelectionCell());null!=n&&t(mxUtils.getValue(n.style,e,null))},s.getModel().addListener(mxEvent.CHANGE,this.listener)},destroy:function(){s.getModel().removeListener(this.listener)}},i)},BaseFormatPanel.prototype.addArrow=function(t,e){e=null!=e?e:10;var n=document.createElement("div");n.style.display="inline-block",n.style.padding="6px",n.style.paddingRight="4px";var i=10-e;return 2==i?n.style.paddingTop="6px":0<i?n.style.paddingTop=6-i+"px":n.style.marginTop="-2px",n.style.height=e+"px",n.style.borderLeft="1px solid #a0a0a0",n.innerHTML='<img border="0" src="'+(mxClient.IS_SVG?"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAKCAYAAACNMs+9AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAHBJREFUeNpidHB2ZyAGsACxDRBPIKCuA6TwCBB/h2rABu4A8SYmKCcXiP/iUFgAxL9gCi8A8SwsirZCMQMTkmANEH9E4v+CmsaArvAdyNFI/FlQ92EoBIE+qCRIUz168DBgsU4OqhinQpgHMABAgAEALY4XLIsJ20oAAAAASUVORK5CYII=":IMAGE_PATH+"/dropdown.png")+'" style="margin-bottom:4px;">',mxUtils.setOpacity(n,70),null!=(e=t.getElementsByTagName("div")[0])&&(e.style.paddingRight="6px",e.style.marginLeft="4px",e.style.marginTop="-1px",e.style.display="inline-block",mxUtils.setOpacity(e,60)),mxUtils.setOpacity(t,100),t.style.border="1px solid #a0a0a0",t.style.backgroundColor=this.buttonBackgroundColor,t.style.backgroundImage="none",t.style.width="auto",t.className+=" geColorBtn",mxUtils.setPrefixedStyle(t.style,"borderRadius","3px"),t.appendChild(n),e},BaseFormatPanel.prototype.addUnitInput=function(t,e,n,i,l,o,s,r,a){return s=null!=s?s:0,(e=document.createElement("input")).style.position="absolute",e.style.textAlign="right",e.style.marginTop="-2px",e.style.right=n+12+"px",e.style.width=i+"px",t.appendChild(e),(i=this.createStepper(e,l,o,null,r,null,a)).style.marginTop=s-2+"px",i.style.right=n+"px",t.appendChild(i),e},BaseFormatPanel.prototype.createRelativeOption=function(t,e,n,i,l){n=null!=n?n:44;var o=this.editorUi.editor.graph,s=this.createPanel();s.style.paddingTop="10px",s.style.paddingBottom="10px",mxUtils.write(s,t),s.style.fontWeight="bold",t=mxUtils.bind(this,function(t){var n,l;null!=i?i(a):(n=parseInt(a.value),n=Math.min(100,Math.max(0,isNaN(n)?100:n)),null!=(l=o.view.getState(o.getSelectionCell()))&&n!=mxUtils.getValue(l.style,e,100)&&(o.setCellStyles(e,n=100==n?null:n,o.getSelectionCells()),this.editorUi.fireEvent(new mxEventObject("styleChanged","keys",[e],"values",[n],"cells",o.getSelectionCells()))),a.value=(null!=n?n:"100")+" %"),mxEvent.consume(t)});var r,a=this.addUnitInput(s,"%",20,n,t,10,-14,null!=i);return null!=e&&(r=mxUtils.bind(this,function(t,n,i){!i&&a==document.activeElement||(t=this.format.getSelectionState(),t=parseInt(mxUtils.getValue(t.style,e,100)),a.value=isNaN(t)?"":t+" %")}),mxEvent.addListener(a,"keydown",function(t){13==t.keyCode?(o.container.focus(),mxEvent.consume(t)):27==t.keyCode&&(r(null,null,!0),o.container.focus(),mxEvent.consume(t))}),o.getModel().addListener(mxEvent.CHANGE,r),this.listeners.push({destroy:function(){o.getModel().removeListener(r)}}),r()),mxEvent.addListener(a,"blur",t),mxEvent.addListener(a,"change",t),null!=l&&l(a),s},BaseFormatPanel.prototype.addLabel=function(t,e,n,i){i=null!=i?i:61;var l=document.createElement("div");mxUtils.write(l,e),l.style.position="absolute",l.style.right=n+"px",l.style.width=i+"px",l.style.marginTop="6px",l.style.textAlign="center",t.appendChild(l)},BaseFormatPanel.prototype.addKeyHandler=function(t,e){mxEvent.addListener(t,"keydown",mxUtils.bind(this,function(t){13==t.keyCode?(this.editorUi.editor.graph.container.focus(),mxEvent.consume(t)):27==t.keyCode&&(null!=e&&e(null,null,!0),this.editorUi.editor.graph.container.focus(),mxEvent.consume(t))}))},BaseFormatPanel.prototype.styleButtons=function(t){for(var e=0;e<t.length;e++)mxUtils.setPrefixedStyle(t[e].style,"borderRadius","3px"),mxUtils.setOpacity(t[e],100),t[e].style.border="1px solid #a0a0a0",t[e].style.padding="4px",t[e].style.paddingTop="3px",t[e].style.paddingRight="1px",t[e].style.margin="1px",t[e].style.width="24px",t[e].style.height="20px",t[e].className+=" geColorBtn"},BaseFormatPanel.prototype.destroy=function(){if(null!=this.listeners){for(var t=0;t<this.listeners.length;t++)this.listeners[t].destroy();this.listeners=null}},ArrangePanel=function(t,e,n){BaseFormatPanel.call(this,t,e,n),this.init()},mxUtils.extend(ArrangePanel,BaseFormatPanel),ArrangePanel.prototype.init=function(){var t=this.editorUi.editor.graph,e=this.format.getSelectionState();this.container.appendChild(this.addLayerOps(this.createPanel())),this.addGeometry(this.container),this.addEdgeGeometry(this.container),e.containsLabel&&0!=e.edges.length||this.container.appendChild(this.addAngle(this.createPanel())),e.containsLabel||0!=e.edges.length||"rectangle"==e.style.shape||"label"==e.style.shape||this.container.appendChild(this.addFlip(this.createPanel())),1<e.vertices.length&&(this.container.appendChild(this.addAlign(this.createPanel())),this.container.appendChild(this.addDistribute(this.createPanel()))),(t.isTable(e.vertices[0])||t.isTableRow(e.vertices[0])||t.isTableCell(e.vertices[0]))&&this.container.appendChild(this.addTable(this.createPanel())),this.container.appendChild(this.addGroupOps(this.createPanel())),e.containsLabel&&((t=document.createElement("div")).style.width="100%",t.style.marginTop="0px",t.style.fontWeight="bold",t.style.padding="10px 0 0 18px",mxUtils.write(t,mxResources.get("style")),this.container.appendChild(t),new StyleFormatPanel(this.format,this.editorUi,this.container))},ArrangePanel.prototype.addTable=function(t){var e=this.editorUi,n=e.editor.graph,i=this.format.getSelectionState();t.style.paddingTop="6px",t.style.paddingBottom="10px";var l=document.createElement("div");l.style.marginTop="2px",l.style.marginBottom="8px",l.style.fontWeight="bold",mxUtils.write(l,mxResources.get("table")),t.appendChild(l),(l=document.createElement("div")).style.position="relative",l.style.paddingLeft="0px",l.style.borderWidth="0px",l.className="geToolbarContainer";var o=[e.toolbar.addButton("geSprite-insertcolumnbefore",mxResources.get("insertColumnBefore"),mxUtils.bind(this,function(){try{n.insertTableColumn(i.vertices[0],!0)}catch(t){e.handleError(t)}}),l),e.toolbar.addButton("geSprite-insertcolumnafter",mxResources.get("insertColumnAfter"),mxUtils.bind(this,function(){try{n.insertTableColumn(i.vertices[0],!1)}catch(t){e.handleError(t)}}),l),e.toolbar.addButton("geSprite-deletecolumn",mxResources.get("deleteColumn"),mxUtils.bind(this,function(){try{n.deleteTableColumn(i.vertices[0])}catch(t){e.handleError(t)}}),l),e.toolbar.addButton("geSprite-insertrowbefore",mxResources.get("insertRowBefore"),mxUtils.bind(this,function(){try{n.insertTableRow(i.vertices[0],!0)}catch(t){e.handleError(t)}}),l),e.toolbar.addButton("geSprite-insertrowafter",mxResources.get("insertRowAfter"),mxUtils.bind(this,function(){try{n.insertTableRow(i.vertices[0],!1)}catch(t){e.handleError(t)}}),l),e.toolbar.addButton("geSprite-deleterow",mxResources.get("deleteRow"),mxUtils.bind(this,function(){try{n.deleteTableRow(i.vertices[0])}catch(t){e.handleError(t)}}),l)];return this.styleButtons(o),t.appendChild(l),o[2].style.marginRight="9px",t},ArrangePanel.prototype.addLayerOps=function(t){var e=this.editorUi,n=mxUtils.button(mxResources.get("toFront"),function(t){e.actions.get("toFront").funct()});return n.setAttribute("title",mxResources.get("toFront")+" ("+this.editorUi.actions.get("toFront").shortcut+")"),n.style.width="75px",n.className="btn btn-secondary",n.style.marginRight="2px",t.appendChild(n),(n=mxUtils.button(mxResources.get("toBack"),function(t){e.actions.get("toBack").funct()})).setAttribute("title",mxResources.get("toBack")+" ("+this.editorUi.actions.get("toBack").shortcut+")"),n.style.width="75px",n.className="btn btn-secondary",t.appendChild(n),t},ArrangePanel.prototype.addGroupOps=function(t){var e,n=this.editorUi,i=n.editor.graph,l=i.getSelectionCell(),o=this.format.getSelectionState(),s=0,r=null;return t.style.paddingTop="8px",t.style.paddingBottom="6px",1<i.getSelectionCount()?((r=mxUtils.button(mxResources.get("group"),function(t){n.actions.get("group").funct()})).setAttribute("title",mxResources.get("group")+" ("+this.editorUi.actions.get("group").shortcut+")"),r.style.width="178px",r.className="btn btn-secondary",r.style.marginBottom="2px",t.appendChild(r),s++):!(1!=i.getSelectionCount()||i.getModel().isEdge(l)||i.isSwimlane(l)||i.isTable(l)||o.row||o.cell)&&0<i.getModel().getChildCount(l)&&((r=mxUtils.button(mxResources.get("ungroup"),function(t){n.actions.get("ungroup").funct()})).setAttribute("title",mxResources.get("ungroup")+" ("+this.editorUi.actions.get("ungroup").shortcut+")"),r.style.width="178px",r.className="btn btn-secondary",r.style.marginBottom="2px",t.appendChild(r),s++),0<o.vertices.length&&(0<s&&(mxUtils.br(t),s=0),(r=mxUtils.button(mxResources.get("copySize"),function(t){n.actions.get("copySize").funct(t)})).setAttribute("title",mxResources.get("copySize")+" ("+this.editorUi.actions.get("copySize").shortcut+")"),r.style.width="178px",r.className="btn btn-secondary",r.style.marginBottom="2px",t.appendChild(r),s++,null!=n.copiedSize)&&((e=mxUtils.button(mxResources.get("pasteSize"),function(t){n.actions.get("pasteSize").funct(t)})).setAttribute("title",mxResources.get("pasteSize")+" ("+this.editorUi.actions.get("pasteSize").shortcut+")"),t.appendChild(e),s++,r.style.width="75px",r.className="btn btn-secondary",r.style.marginBottom="2px",e.style.width="75px",e.className="btn btn-secondary",e.style.marginBottom="2px"),0<i.getSelectionCount()&&0<s&&(mxUtils.br(t),s=0),1==i.getSelectionCount()&&i.getModel().isVertex(l)&&!o.row&&!o.cell&&i.getModel().isVertex(i.getModel().getParent(l))?(0<s&&mxUtils.br(t),(r=mxUtils.button(mxResources.get("removeFromGroup"),function(t){n.actions.get("removeFromGroup").funct()})).setAttribute("title",mxResources.get("removeFromGroup")),r.style.width="178px",r.className="btn btn-secondary",r.style.marginBottom="2px",t.appendChild(r),s++):0<i.getSelectionCount()&&(0<s&&mxUtils.br(t),(r=mxUtils.button(mxResources.get("clearWaypoints"),mxUtils.bind(this,function(t){this.editorUi.actions.get("clearWaypoints").funct()}))).setAttribute("title",mxResources.get("clearWaypoints")+" ("+this.editorUi.actions.get("clearWaypoints").shortcut+")"),r.style.width="178px",r.className="btn btn-secondary",r.style.marginBottom="2px",t.appendChild(r),s++),1==i.getSelectionCount()&&(0<s&&mxUtils.br(t),(r=mxUtils.button(mxResources.get("editLink"),mxUtils.bind(this,function(t){this.editorUi.actions.get("editLink").funct()}))).setAttribute("title",mxResources.get("editLink")+" ("+this.editorUi.actions.get("editLink").shortcut+")"),r.className="btn btn-secondary",r.style.width="178px",r.style.marginBottom="2px",t.appendChild(r),s++),0==s&&(t.style.display="none"),t},ArrangePanel.prototype.addAlign=function(t){var e=this.editorUi.editor.graph;t.style.paddingTop="6px",t.style.paddingBottom="12px",t.appendChild(this.createTitle(mxResources.get("align")));var n=document.createElement("div");n.style.position="relative",n.style.paddingLeft="0px",n.style.borderWidth="0px",n.className="geToolbarContainer";var i=this.editorUi.toolbar.addButton("geSprite-alignleft",mxResources.get("left"),function(){e.alignCells(mxConstants.ALIGN_LEFT)},n),l=this.editorUi.toolbar.addButton("geSprite-aligncenter",mxResources.get("center"),function(){e.alignCells(mxConstants.ALIGN_CENTER)},n),o=this.editorUi.toolbar.addButton("geSprite-alignright",mxResources.get("right"),function(){e.alignCells(mxConstants.ALIGN_RIGHT)},n),s=this.editorUi.toolbar.addButton("geSprite-aligntop",mxResources.get("top"),function(){e.alignCells(mxConstants.ALIGN_TOP)},n),r=this.editorUi.toolbar.addButton("geSprite-alignmiddle",mxResources.get("middle"),function(){e.alignCells(mxConstants.ALIGN_MIDDLE)},n),a=this.editorUi.toolbar.addButton("geSprite-alignbottom",mxResources.get("bottom"),function(){e.alignCells(mxConstants.ALIGN_BOTTOM)},n);return this.styleButtons([i,l,o,s,r,a]),o.style.marginRight="6px",t.appendChild(n),t},ArrangePanel.prototype.addFlip=function(t){var e=this.editorUi.editor.graph;t.style.paddingTop="6px",t.style.paddingBottom="10px";var n=document.createElement("div");return n.style.marginTop="2px",n.style.marginBottom="8px",n.style.fontWeight="bold",mxUtils.write(n,mxResources.get("flip")),t.appendChild(n),(n=mxUtils.button(mxResources.get("horizontal"),function(t){e.toggleCellStyles(mxConstants.STYLE_FLIPH,!1)})).setAttribute("title",mxResources.get("horizontal")),n.style.width="75px",n.className="btn btn-secondary",n.style.marginRight="2px",t.appendChild(n),(n=mxUtils.button(mxResources.get("vertical"),function(t){e.toggleCellStyles(mxConstants.STYLE_FLIPV,!1)})).setAttribute("title",mxResources.get("vertical")),n.style.width="75px",n.className="btn btn-secondary",t.appendChild(n),t},ArrangePanel.prototype.addDistribute=function(t){var e=this.editorUi.editor.graph;t.style.paddingTop="6px",t.style.paddingBottom="12px",t.appendChild(this.createTitle(mxResources.get("distribute")));var n=mxUtils.button(mxResources.get("horizontal"),function(t){e.distributeCells(!0)});return n.setAttribute("title",mxResources.get("horizontal")),n.style.width="75px",n.className="btn btn-secondary",n.style.marginRight="2px",t.appendChild(n),(n=mxUtils.button(mxResources.get("vertical"),function(t){e.distributeCells(!1)})).setAttribute("title",mxResources.get("vertical")),n.style.width="75px",n.className="btn btn-secondary",t.appendChild(n),t},ArrangePanel.prototype.addAngle=function(t){var e=this.editorUi,n=e.editor.graph,i=this.format.getSelectionState();t.style.paddingBottom="8px";var l=document.createElement("div");l.style.position="absolute",l.style.width="70px",l.style.marginTop="0px",l.style.fontWeight="bold";var o,s=null,r=null,a=null;return!i.rotatable||i.table||i.row||i.cell?t.style.paddingTop="8px":(mxUtils.write(l,mxResources.get("angle")),t.appendChild(l),s=this.addUnitInput(t,"\xb0",20,44,function(){r.apply(this,arguments)}),mxUtils.br(t),t.style.paddingTop="10px"),i.containsLabel||(l=mxResources.get("reverse"),0<i.vertices.length&&0<i.edges.length?l=mxResources.get("turn")+" / "+l:0<i.vertices.length&&(l=mxResources.get("turn")),(a=mxUtils.button(l,function(t){e.actions.get("turn").funct(t)})).setAttribute("title",l+" ("+this.editorUi.actions.get("turn").shortcut+")"),a.style.width="178px",a.className="btn btn-secondary",t.appendChild(a),null!=s&&(a.style.marginTop="8px")),null!=s&&(o=mxUtils.bind(this,function(t,e,n){!n&&document.activeElement==s||(i=this.format.getSelectionState(),t=parseFloat(mxUtils.getValue(i.style,mxConstants.STYLE_ROTATION,0)),s.value=isNaN(t)?"":t+"\xb0")}),r=this.installInputHandler(s,mxConstants.STYLE_ROTATION,0,0,360,"\xb0",null,!0),this.addKeyHandler(s,o),n.getModel().addListener(mxEvent.CHANGE,o),this.listeners.push({destroy:function(){n.getModel().removeListener(o)}}),o()),t},BaseFormatPanel.prototype.getUnit=function(){switch(this.editorUi.editor.graph.view.unit){case mxConstants.POINTS:return"pt";case mxConstants.INCHES:return'"';case mxConstants.MILLIMETERS:return"mm"}},BaseFormatPanel.prototype.inUnit=function(t){return this.editorUi.editor.graph.view.formatUnitText(t)},BaseFormatPanel.prototype.fromUnit=function(t){switch(this.editorUi.editor.graph.view.unit){case mxConstants.POINTS:return t;case mxConstants.INCHES:return t*mxConstants.PIXELS_PER_INCH;case mxConstants.MILLIMETERS:return t*mxConstants.PIXELS_PER_MM}},BaseFormatPanel.prototype.isFloatUnit=function(){return this.editorUi.editor.graph.view.unit!=mxConstants.POINTS},BaseFormatPanel.prototype.getUnitStep=function(){switch(this.editorUi.editor.graph.view.unit){case mxConstants.POINTS:return 1;case mxConstants.INCHES:return.1;case mxConstants.MILLIMETERS:return.5}},ArrangePanel.prototype.addGeometry=function(t){var e=this,n=this.editorUi,i=n.editor.graph,l=i.getModel(),o=this.format.getSelectionState(),s=this.createPanel();s.style.paddingBottom="8px";var r=document.createElement("div");r.style.position="absolute",r.style.width="50px",r.style.marginTop="0px",r.style.fontWeight="bold",mxUtils.write(r,mxResources.get("size")),s.appendChild(r);var a=this.addUnitInput(s,this.getUnit(),84,44,function(){p.apply(this,arguments)},this.getUnitStep(),null,null,this.isFloatUnit()),h=this.addUnitInput(s,this.getUnit(),20,44,function(){m.apply(this,arguments)},this.getUnitStep(),null,null,this.isFloatUnit()),u=document.createElement("div");u.className="geSprite geSprite-fit",u.setAttribute("title",mxResources.get("autosize")+" ("+this.editorUi.actions.get("autosize").shortcut+")"),u.style.position="relative",u.style.cursor="pointer",u.style.marginTop="-3px",u.style.border="0px",u.style.left="42px",mxUtils.setOpacity(u,50),mxEvent.addListener(u,"mouseenter",function(){mxUtils.setOpacity(u,100)}),mxEvent.addListener(u,"mouseleave",function(){mxUtils.setOpacity(u,50)}),mxEvent.addListener(u,"click",function(){n.actions.get("autosize").funct()}),s.appendChild(u),o.row?(a.style.visibility="hidden",a.nextSibling.style.visibility="hidden"):this.addLabel(s,mxResources.get("width"),84),this.addLabel(s,mxResources.get("height"),20),mxUtils.br(s),(r=document.createElement("div")).style.paddingTop="8px",r.style.paddingRight="20px",r.style.whiteSpace="nowrap",r.style.textAlign="right";var d=this.createCellOption(mxResources.get("constrainProportions"),mxConstants.STYLE_ASPECT,null,"fixed","null");d.style.width="100%",r.appendChild(d),o.cell||o.row?u.style.visibility="hidden":s.appendChild(r);var c=d.getElementsByTagName("input")[0];this.addKeyHandler(a,f),this.addKeyHandler(h,f);var p=this.addGeometryHandler(a,function(t,n,l){return i.isTableCell(l)?(i.setTableColumnWidth(l,n-t.width,!0),!0):void(0<t.width&&(n=Math.max(1,e.fromUnit(n)),c.checked&&(t.height=Math.round(t.height*n*100/t.width)/100),t.width=n))}),m=this.addGeometryHandler(h,function(t,n,l){return i.isTableCell(l)&&(l=i.model.getParent(l)),i.isTableRow(l)?(i.setTableRowHeight(l,n-t.height),!0):void(0<t.height&&(n=Math.max(1,e.fromUnit(n)),c.checked&&(t.width=Math.round(t.width*n*100/t.height)/100),t.height=n))});(o.resizable||o.row||o.cell)&&t.appendChild(s);var g=this.createPanel();g.style.paddingBottom="30px",(r=document.createElement("div")).style.position="absolute",r.style.width="70px",r.style.marginTop="0px",r.style.fontWeight="bold",mxUtils.write(r,mxResources.get("position")),g.appendChild(r);var x=this.addUnitInput(g,this.getUnit(),84,44,function(){b.apply(this,arguments)},this.getUnitStep(),null,null,this.isFloatUnit()),y=this.addUnitInput(g,this.getUnit(),20,44,function(){C.apply(this,arguments)},this.getUnitStep(),null,null,this.isFloatUnit());mxUtils.br(g),this.addLabel(g,mxResources.get("left"),84),this.addLabel(g,mxResources.get("top"),20);var f=mxUtils.bind(this,function(t,e,n){(o=this.format.getSelectionState()).containsLabel||o.vertices.length!=i.getSelectionCount()||null==o.width||null==o.height?s.style.display="none":(s.style.display="",!n&&document.activeElement==a||(a.value=this.inUnit(o.width)+(""==o.width?"":" "+this.getUnit())),!n&&document.activeElement==h||(h.value=this.inUnit(o.height)+(""==o.height?"":" "+this.getUnit()))),o.vertices.length==i.getSelectionCount()&&null!=o.x&&null!=o.y?(g.style.display="",!n&&document.activeElement==x||(x.value=this.inUnit(o.x)+(""==o.x?"":" "+this.getUnit())),!n&&document.activeElement==y||(y.value=this.inUnit(o.y)+(""==o.y?"":" "+this.getUnit()))):g.style.display="none"});this.addKeyHandler(x,f),this.addKeyHandler(y,f),l.addListener(mxEvent.CHANGE,f),this.listeners.push({destroy:function(){l.removeListener(f)}}),f();var v,b=this.addGeometryHandler(x,function(t,n){n=e.fromUnit(n),t.relative?t.offset.x=n:t.x=n}),C=this.addGeometryHandler(y,function(t,n){n=e.fromUnit(n),t.relative?t.offset.y=n:t.y=n});o.movable&&(0!=o.edges.length||1!=o.vertices.length||!l.isEdge(l.getParent(o.vertices[0]))||null!=(v=i.getCellGeometry(o.vertices[0]))&&v.relative&&((r=mxUtils.button(mxResources.get("center"),mxUtils.bind(this,function(t){l.beginUpdate();try{(v=v.clone()).x=0,v.y=0,v.offset=new mxPoint,l.setGeometry(o.vertices[0],v)}finally{l.endUpdate()}}))).setAttribute("title",mxResources.get("center")),r.style.width="202px",r.style.position="absolute",mxUtils.br(g),mxUtils.br(g),g.appendChild(r)),t.appendChild(g))},ArrangePanel.prototype.addGeometryHandler=function(t,e){function n(n){if(""!=t.value){var s=parseFloat(t.value);if(isNaN(s))t.value=l+" "+o.getUnit();else if(s!=l){i.getModel().beginUpdate();try{for(var r,a,h=i.getSelectionCells(),u=0;u<h.length;u++)i.getModel().isVertex(h[u])&&(null==(r=i.getCellGeometry(h[u]))||(r=r.clone(),e(r,s,h[u]))||(null!=(a=i.view.getState(h[u]))&&i.isRecursiveVertexResize(a)&&i.resizeChildCells(h[u],r),i.getModel().setGeometry(h[u],r),i.constrainChildCells(h[u])))}finally{i.getModel().endUpdate()}l=s,t.value=s+" "+o.getUnit()}}mxEvent.consume(n)}var i=this.editorUi.editor.graph,l=null,o=this;return mxEvent.addListener(t,"blur",n),mxEvent.addListener(t,"change",n),mxEvent.addListener(t,"focus",function(){l=t.value}),n},ArrangePanel.prototype.addEdgeGeometryHandler=function(t,e){function n(n){if(""!=t.value){var o=parseFloat(t.value);if(isNaN(o))t.value=l+" pt";else if(o!=l){i.getModel().beginUpdate();try{for(var s,r=i.getSelectionCells(),a=0;a<r.length;a++)!i.getModel().isEdge(r[a])||null!=(s=i.getCellGeometry(r[a]))&&(s=s.clone(),e(s,o),i.getModel().setGeometry(r[a],s))}finally{i.getModel().endUpdate()}l=o,t.value=o+" pt"}}mxEvent.consume(n)}var i=this.editorUi.editor.graph,l=null;return mxEvent.addListener(t,"blur",n),mxEvent.addListener(t,"change",n),mxEvent.addListener(t,"focus",function(){l=t.value}),n},ArrangePanel.prototype.addEdgeGeometry=function(t){function e(t){var e=parseInt(r.value);(e=Math.min(999,Math.max(1,isNaN(e)?1:e)))!=mxUtils.getValue(l.style,"width",mxCellRenderer.defaultShapes.flexArrow.prototype.defaultWidth)&&(i.setCellStyles("width",e,i.getSelectionCells()),n.fireEvent(new mxEventObject("styleChanged","keys",["width"],"values",[e],"cells",i.getSelectionCells()))),r.value=e+" pt",mxEvent.consume(t)}var n=this.editorUi,i=n.editor.graph,l=this.format.getSelectionState(),o=this.createPanel(),s=document.createElement("div");s.style.position="absolute",s.style.width="70px",s.style.marginTop="0px",s.style.fontWeight="bold",mxUtils.write(s,mxResources.get("width")),o.appendChild(s);var r=this.addUnitInput(o,"pt",20,44,function(){e.apply(this,arguments)});mxUtils.br(o),this.addKeyHandler(r,m),mxEvent.addListener(r,"blur",e),mxEvent.addListener(r,"change",e),t.appendChild(o);var a=this.createPanel();a.style.paddingBottom="30px",(s=document.createElement("div")).style.position="absolute",s.style.width="70px",s.style.marginTop="0px",s.style.fontWeight="bold",mxUtils.write(s,"Start"),a.appendChild(s);var h=this.addUnitInput(a,"pt",84,44,function(){g.apply(this,arguments)}),u=this.addUnitInput(a,"pt",20,44,function(){x.apply(this,arguments)});mxUtils.br(a),this.addLabel(a,mxResources.get("left"),84),this.addLabel(a,mxResources.get("top"),20),t.appendChild(a),this.addKeyHandler(h,m),this.addKeyHandler(u,m);var d=this.createPanel();d.style.paddingBottom="30px",(s=document.createElement("div")).style.position="absolute",s.style.width="70px",s.style.marginTop="0px",s.style.fontWeight="bold",mxUtils.write(s,"End"),d.appendChild(s);var c=this.addUnitInput(d,"pt",84,44,function(){y.apply(this,arguments)}),p=this.addUnitInput(d,"pt",20,44,function(){f.apply(this,arguments)});mxUtils.br(d),this.addLabel(d,mxResources.get("left"),84),this.addLabel(d,mxResources.get("top"),20),t.appendChild(d),this.addKeyHandler(c,m),this.addKeyHandler(p,m);var m=mxUtils.bind(this,function(t,e,n){l=this.format.getSelectionState(),t=i.getSelectionCell(),"link"==l.style.shape||"flexArrow"==l.style.shape?(o.style.display="",!n&&document.activeElement==r||(n=mxUtils.getValue(l.style,"width",mxCellRenderer.defaultShapes.flexArrow.prototype.defaultWidth),r.value=n+" pt")):o.style.display="none",1==i.getSelectionCount()&&i.model.isEdge(t)?(null!=(n=i.model.getGeometry(t)).sourcePoint&&null==i.model.getTerminal(t,!0)?(h.value=n.sourcePoint.x,u.value=n.sourcePoint.y):a.style.display="none",null!=n.targetPoint&&null==i.model.getTerminal(t,!1)?(c.value=n.targetPoint.x,p.value=n.targetPoint.y):d.style.display="none"):(a.style.display="none",d.style.display="none")}),g=this.addEdgeGeometryHandler(h,function(t,e){t.sourcePoint.x=e}),x=this.addEdgeGeometryHandler(u,function(t,e){t.sourcePoint.y=e}),y=this.addEdgeGeometryHandler(c,function(t,e){t.targetPoint.x=e}),f=this.addEdgeGeometryHandler(p,function(t,e){t.targetPoint.y=e});i.getModel().addListener(mxEvent.CHANGE,m),this.listeners.push({destroy:function(){i.getModel().removeListener(m)}}),m()},TextFormatPanel=function(t,e,n){BaseFormatPanel.call(this,t,e,n),this.init()},mxUtils.extend(TextFormatPanel,BaseFormatPanel),TextFormatPanel.prototype.init=function(){this.container.style.borderBottom="none",this.addFont(this.container)},TextFormatPanel.prototype.addFont=function(t){function e(t,e){t.style.backgroundImage=e?"linear-gradient(#c5ecff 0px,#87d4fb 100%)":""}var n,i,l=this.editorUi,o=l.editor.graph,s=this.format.getSelectionState(),r=this.createTitle(mxResources.get("font"));r.style.paddingLeft="18px",r.style.paddingTop="10px",r.style.paddingBottom="6px",t.appendChild(r),(r=this.createPanel()).style.paddingTop="2px",r.style.paddingBottom="2px",r.style.position="relative",r.style.marginLeft="-2px",r.style.borderWidth="0px",r.className="geToolbarContainer",o.cellEditor.isContentEditing()&&(n=r.cloneNode(),(i=this.editorUi.toolbar.addMenu(mxResources.get("style"),mxResources.get("style"),!0,"formatBlock",n,null,!0)).style.color="rgb(112, 112, 112)",i.style.whiteSpace="nowrap",i.style.overflow="hidden",i.style.margin="0px",this.addArrow(i),i.style.width="192px",i.style.height="15px",(i=i.getElementsByTagName("div")[0]).style.cssFloat="right",t.appendChild(n)),t.appendChild(r),(n=this.createPanel()).style.marginTop="8px",n.style.borderTop="1px solid #c0c0c0",n.style.paddingTop="6px",n.style.paddingBottom="6px";var a=this.editorUi.toolbar.addMenu("Helvetica",mxResources.get("fontFamily"),!0,"fontFamily",r,null,!0);a.style.color="rgb(112, 112, 112)",a.style.whiteSpace="nowrap",a.style.overflow="hidden",a.style.margin="0px",this.addArrow(a),a.style.width="192px",a.style.height="15px",(i=r.cloneNode(!1)).style.marginLeft="-3px";var h=this.editorUi.toolbar.addItems(["bold","italic","underline"],i,!0);h[0].setAttribute("title",mxResources.get("bold")+" ("+this.editorUi.actions.get("bold").shortcut+")"),h[1].setAttribute("title",mxResources.get("italic")+" ("+this.editorUi.actions.get("italic").shortcut+")"),h[2].setAttribute("title",mxResources.get("underline")+" ("+this.editorUi.actions.get("underline").shortcut+")");var u=this.editorUi.toolbar.addItems(["vertical"],i,!0)[0];t.appendChild(i),this.styleButtons(h),this.styleButtons([u]),(_=r.cloneNode(!1)).style.marginLeft="-3px",_.style.paddingBottom="0px";var d=function(t){return function(){return t()}},c=this.editorUi.toolbar.addButton("geSprite-left",mxResources.get("left"),o.cellEditor.isContentEditing()?function(t){o.cellEditor.alignText(mxConstants.ALIGN_LEFT,t)}:d(this.editorUi.menus.createStyleChangeFunction([mxConstants.STYLE_ALIGN],[mxConstants.ALIGN_LEFT])),_),p=this.editorUi.toolbar.addButton("geSprite-center",mxResources.get("center"),o.cellEditor.isContentEditing()?function(t){o.cellEditor.alignText(mxConstants.ALIGN_CENTER,t)}:d(this.editorUi.menus.createStyleChangeFunction([mxConstants.STYLE_ALIGN],[mxConstants.ALIGN_CENTER])),_),m=this.editorUi.toolbar.addButton("geSprite-right",mxResources.get("right"),o.cellEditor.isContentEditing()?function(t){o.cellEditor.alignText(mxConstants.ALIGN_RIGHT,t)}:d(this.editorUi.menus.createStyleChangeFunction([mxConstants.STYLE_ALIGN],[mxConstants.ALIGN_RIGHT])),_);this.styleButtons([c,p,m]),o.cellEditor.isContentEditing()&&(T=this.editorUi.toolbar.addButton("geSprite-removeformat",mxResources.get("strikethrough"),function(){document.execCommand("strikeThrough",!1,null)},i),this.styleButtons([T]),T.firstChild.style.background="url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCI+PGRlZnM+PHBhdGggaWQ9ImEiIGQ9Ik0wIDBoMjR2MjRIMFYweiIvPjwvZGVmcz48Y2xpcFBhdGggaWQ9ImIiPjx1c2UgeGxpbms6aHJlZj0iI2EiIG92ZXJmbG93PSJ2aXNpYmxlIi8+PC9jbGlwUGF0aD48cGF0aCBjbGlwLXBhdGg9InVybCgjYikiIGZpbGw9IiMwMTAxMDEiIGQ9Ik03LjI0IDguNzVjLS4yNi0uNDgtLjM5LTEuMDMtLjM5LTEuNjcgMC0uNjEuMTMtMS4xNi40LTEuNjcuMjYtLjUuNjMtLjkzIDEuMTEtMS4yOS40OC0uMzUgMS4wNS0uNjMgMS43LS44My42Ni0uMTkgMS4zOS0uMjkgMi4xOC0uMjkuODEgMCAxLjU0LjExIDIuMjEuMzQuNjYuMjIgMS4yMy41NCAxLjY5Ljk0LjQ3LjQuODMuODggMS4wOCAxLjQzLjI1LjU1LjM4IDEuMTUuMzggMS44MWgtMy4wMWMwLS4zMS0uMDUtLjU5LS4xNS0uODUtLjA5LS4yNy0uMjQtLjQ5LS40NC0uNjgtLjItLjE5LS40NS0uMzMtLjc1LS40NC0uMy0uMS0uNjYtLjE2LTEuMDYtLjE2LS4zOSAwLS43NC4wNC0xLjAzLjEzLS4yOS4wOS0uNTMuMjEtLjcyLjM2LS4xOS4xNi0uMzQuMzQtLjQ0LjU1LS4xLjIxLS4xNS40My0uMTUuNjYgMCAuNDguMjUuODguNzQgMS4yMS4zOC4yNS43Ny40OCAxLjQxLjdINy4zOWMtLjA1LS4wOC0uMTEtLjE3LS4xNS0uMjV6TTIxIDEydi0ySDN2Mmg5LjYyYy4xOC4wNy40LjE0LjU1LjIuMzcuMTcuNjYuMzQuODcuNTEuMjEuMTcuMzUuMzYuNDMuNTcuMDcuMi4xMS40My4xMS42OSAwIC4yMy0uMDUuNDUtLjE0LjY2LS4wOS4yLS4yMy4zOC0uNDIuNTMtLjE5LjE1LS40Mi4yNi0uNzEuMzUtLjI5LjA4LS42My4xMy0xLjAxLjEzLS40MyAwLS44My0uMDQtMS4xOC0uMTNzLS42Ni0uMjMtLjkxLS40MmMtLjI1LS4xOS0uNDUtLjQ0LS41OS0uNzUtLjE0LS4zMS0uMjUtLjc2LS4yNS0xLjIxSDYuNGMwIC41NS4wOCAxLjEzLjI0IDEuNTguMTYuNDUuMzcuODUuNjUgMS4yMS4yOC4zNS42LjY2Ljk4LjkyLjM3LjI2Ljc4LjQ4IDEuMjIuNjUuNDQuMTcuOS4zIDEuMzguMzkuNDguMDguOTYuMTMgMS40NC4xMy44IDAgMS41My0uMDkgMi4xOC0uMjhzMS4yMS0uNDUgMS42Ny0uNzljLjQ2LS4zNC44Mi0uNzcgMS4wNy0xLjI3cy4zOC0xLjA3LjM4LTEuNzFjMC0uNi0uMS0xLjE0LS4zMS0xLjYxLS4wNS0uMTEtLjExLS4yMy0uMTctLjMzSDIxeiIvPjwvc3ZnPg==)",T.firstChild.style.backgroundPosition="2px 2px",T.firstChild.style.backgroundSize="18px 18px",this.styleButtons([T]));var g,x,y,f,v,b,C=this.editorUi.toolbar.addButton("geSprite-top",mxResources.get("top"),d(this.editorUi.menus.createStyleChangeFunction([mxConstants.STYLE_VERTICAL_ALIGN],[mxConstants.ALIGN_TOP])),_),E=this.editorUi.toolbar.addButton("geSprite-middle",mxResources.get("middle"),d(this.editorUi.menus.createStyleChangeFunction([mxConstants.STYLE_VERTICAL_ALIGN],[mxConstants.ALIGN_MIDDLE])),_),S=this.editorUi.toolbar.addButton("geSprite-bottom",mxResources.get("bottom"),d(this.editorUi.menus.createStyleChangeFunction([mxConstants.STYLE_VERTICAL_ALIGN],[mxConstants.ALIGN_BOTTOM])),_);this.styleButtons([C,E,S]),t.appendChild(_),o.cellEditor.isContentEditing()?(C.style.display="none",E.style.display="none",S.style.display="none",u.style.display="none",(b=this.editorUi.toolbar.addButton("geSprite-justifyfull",mxResources.get("block"),function(){1==b.style.opacity&&document.execCommand("justifyfull",!1,null)},_)).style.marginRight="9px",b.style.opacity=1,this.styleButtons([b,g=this.editorUi.toolbar.addButton("geSprite-subscript",mxResources.get("subscript")+" ("+Editor.ctrlKey+"+,)",function(){document.execCommand("subscript",!1,null)},_),x=this.editorUi.toolbar.addButton("geSprite-superscript",mxResources.get("superscript")+" ("+Editor.ctrlKey+"+.)",function(){document.execCommand("superscript",!1,null)},_)]),g.style.marginLeft="9px",(d=_.cloneNode(!1)).style.paddingTop="4px",_=[this.editorUi.toolbar.addButton("geSprite-orderedlist",mxResources.get("numberedList"),function(){document.execCommand("insertorderedlist",!1,null)},d),this.editorUi.toolbar.addButton("geSprite-unorderedlist",mxResources.get("bulletedList"),function(){document.execCommand("insertunorderedlist",!1,null)},d),this.editorUi.toolbar.addButton("geSprite-outdent",mxResources.get("decreaseIndent"),function(){document.execCommand("outdent",!1,null)},d),this.editorUi.toolbar.addButton("geSprite-indent",mxResources.get("increaseIndent"),function(){document.execCommand("indent",!1,null)},d),this.editorUi.toolbar.addButton("geSprite-removeformat",mxResources.get("removeFormat"),function(){document.execCommand("removeformat",!1,null)},d),this.editorUi.toolbar.addButton("geSprite-code",mxResources.get("html"),function(){o.cellEditor.toggleViewMode()},d)],this.styleButtons(_),_[_.length-2].style.marginLeft="9px",t.appendChild(d)):(h[2].style.marginRight="9px",m.style.marginRight="9px"),(_=r.cloneNode(!1)).style.marginLeft="0px",_.style.paddingTop="8px",_.style.paddingBottom="4px",_.style.fontWeight="normal",mxUtils.write(_,mxResources.get("position"));var w=document.createElement("select");w.style.position="absolute",w.style.right="20px",w.style.width="97px",w.style.marginTop="-2px";var T="topLeft top topRight left center right bottomLeft bottom bottomRight".split(" "),A={topLeft:[mxConstants.ALIGN_LEFT,mxConstants.ALIGN_TOP,mxConstants.ALIGN_RIGHT,mxConstants.ALIGN_BOTTOM],top:[mxConstants.ALIGN_CENTER,mxConstants.ALIGN_TOP,mxConstants.ALIGN_CENTER,mxConstants.ALIGN_BOTTOM],topRight:[mxConstants.ALIGN_RIGHT,mxConstants.ALIGN_TOP,mxConstants.ALIGN_LEFT,mxConstants.ALIGN_BOTTOM],left:[mxConstants.ALIGN_LEFT,mxConstants.ALIGN_MIDDLE,mxConstants.ALIGN_RIGHT,mxConstants.ALIGN_MIDDLE],center:[mxConstants.ALIGN_CENTER,mxConstants.ALIGN_MIDDLE,mxConstants.ALIGN_CENTER,mxConstants.ALIGN_MIDDLE],right:[mxConstants.ALIGN_RIGHT,mxConstants.ALIGN_MIDDLE,mxConstants.ALIGN_LEFT,mxConstants.ALIGN_MIDDLE],bottomLeft:[mxConstants.ALIGN_LEFT,mxConstants.ALIGN_BOTTOM,mxConstants.ALIGN_RIGHT,mxConstants.ALIGN_TOP],bottom:[mxConstants.ALIGN_CENTER,mxConstants.ALIGN_BOTTOM,mxConstants.ALIGN_CENTER,mxConstants.ALIGN_TOP],bottomRight:[mxConstants.ALIGN_RIGHT,mxConstants.ALIGN_BOTTOM,mxConstants.ALIGN_LEFT,mxConstants.ALIGN_TOP]};for(d=0;d<T.length;d++)(L=document.createElement("option")).setAttribute("value",T[d]),mxUtils.write(L,mxResources.get(T[d])),w.appendChild(L);_.appendChild(w),(T=r.cloneNode(!1)).style.marginLeft="0px",T.style.paddingTop="4px",T.style.paddingBottom="4px",T.style.fontWeight="normal",mxUtils.write(T,mxResources.get("writingDirection"));var M=document.createElement("select");M.style.position="absolute",M.style.right="20px",M.style.width="97px",M.style.marginTop="-2px";var L=["automatic","leftToRight","rightToLeft"],P={automatic:null,leftToRight:mxConstants.TEXT_DIRECTION_LTR,rightToLeft:mxConstants.TEXT_DIRECTION_RTL};for(d=0;d<L.length;d++){var I=document.createElement("option");I.setAttribute("value",L[d]),mxUtils.write(I,mxResources.get(L[d])),M.appendChild(I)}T.appendChild(M),o.isEditing()||(t.appendChild(_),mxEvent.addListener(w,"change",function(t){o.getModel().beginUpdate();try{var e=A[w.value];null!=e&&(o.setCellStyles(mxConstants.STYLE_LABEL_POSITION,e[0],o.getSelectionCells()),o.setCellStyles(mxConstants.STYLE_VERTICAL_LABEL_POSITION,e[1],o.getSelectionCells()),o.setCellStyles(mxConstants.STYLE_ALIGN,e[2],o.getSelectionCells()),o.setCellStyles(mxConstants.STYLE_VERTICAL_ALIGN,e[3],o.getSelectionCells()))}finally{o.getModel().endUpdate()}mxEvent.consume(t)}),t.appendChild(T),mxEvent.addListener(M,"change",function(t){o.setCellStyles(mxConstants.STYLE_TEXT_DIRECTION,P[M.value],o.getSelectionCells()),mxEvent.consume(t)}));var R=document.createElement("input");R.style.textAlign="right",R.style.marginTop="4px",R.style.position="absolute",R.style.right="32px",R.style.width="40px",R.style.height="17px",i.appendChild(R);var O=null,_=this.installInputHandler(R,mxConstants.STYLE_FONTSIZE,Menus.prototype.defaultFontSize,1,999," pt",function(t){if(!window.getSelection||mxClient.IS_IE||mxClient.IS_IE11){if((window.getSelection||document.selection)&&(e=function(t,e){for(;null!=e;){if(e===t)return!0;e=e.parentNode}return!1},l=null,document.selection?l=document.selection.createRange().parentElement():0<(n=window.getSelection()).rangeCount&&(l=n.getRangeAt(0).commonAncestorContainer),null!=l&&e(o.cellEditor.textarea,l)))for(O=t,document.execCommand("fontSize",!1,"4"),l=o.cellEditor.textarea.getElementsByTagName("font"),i=0;i<l.length;i++)if("4"==l[i].getAttribute("size")){l[i].removeAttribute("size"),l[i].style.fontSize=O+"px",window.setTimeout(function(){R.value=O+" pt",O=null},0);break}}else{var e=function(e,i){null!=o.cellEditor.textarea&&e!=o.cellEditor.textarea&&o.cellEditor.textarea.contains(e)&&(i||n.containsNode(e,!0))&&("FONT"==e.nodeName?(e.removeAttribute("size"),e.style.fontSize=t+"px"):mxUtils.getCurrentStyle(e).fontSize!=t+"px"&&(e.style.fontSize=mxUtils.getCurrentStyle(e.parentNode).fontSize!=t+"px"?t+"px":""))},n=window.getSelection(),i=0<n.rangeCount?n.getRangeAt(0).commonAncestorContainer:o.cellEditor.textarea;if(i!=o.cellEditor.textarea&&i.nodeType==mxConstants.NODETYPE_ELEMENT||document.execCommand("fontSize",!1,"1"),null!=(i=i!=o.cellEditor.textarea?i.parentNode:i)&&i.nodeType==mxConstants.NODETYPE_ELEMENT){var l=i.getElementsByTagName("*");for(e(i),i=0;i<l.length;i++)e(l[i])}R.value=t+" pt"}},!0);(_=this.createStepper(R,_,1,10,!0,Menus.prototype.defaultFontSize)).style.display=R.style.display,_.style.marginTop="4px",_.style.right="20px",i.appendChild(_),(i=a.getElementsByTagName("div")[0]).style.cssFloat="right";var D=null,U="#ffffff",N=null,k="#000000",H=o.cellEditor.isContentEditing()?this.createColorOption(mxResources.get("backgroundColor"),function(){return U},function(t){document.execCommand("backcolor",!1,t!=mxConstants.NONE?t:"transparent")},"#ffffff",{install:function(t){D=t},destroy:function(){D=null}},null,!0):this.createCellColorOption(mxResources.get("backgroundColor"),mxConstants.STYLE_LABEL_BACKGROUNDCOLOR,"#ffffff",null,function(t){o.updateLabelElements(o.getSelectionCells(),function(t){t.style.backgroundColor=null})});H.style.fontWeight="bold";var G=this.createCellColorOption(mxResources.get("borderColor"),mxConstants.STYLE_LABEL_BORDERCOLOR,"#000000");G.style.fontWeight="bold",i=1<=s.vertices.length?o.stylesheet.getDefaultVertexStyle():o.stylesheet.getDefaultEdgeStyle(),(i=o.cellEditor.isContentEditing()?this.createColorOption(mxResources.get("fontColor"),function(){return k},function(t){if(mxClient.IS_FF){for(var e=o.cellEditor.textarea.getElementsByTagName("font"),n=[],i=0;i<e.length;i++)n.push({node:e[i],color:e[i].getAttribute("color")});for(document.execCommand("forecolor",!1,t!=mxConstants.NONE?t:"transparent"),t=o.cellEditor.textarea.getElementsByTagName("font"),i=0;i<t.length;i++)if(i>=n.length||t[i]!=n[i].node||t[i]==n[i].node&&t[i].getAttribute("color")!=n[i].color){if(null!=(n=t[i].firstChild)&&"A"==n.nodeName&&null==n.nextSibling&&null!=n.firstChild){for(t[i].parentNode.insertBefore(n,t[i]),e=n.firstChild;null!=e;){var l=e.nextSibling;t[i].appendChild(e),e=l}n.appendChild(t[i])}break}}else document.execCommand("forecolor",!1,t!=mxConstants.NONE?t:"transparent")},null!=i[mxConstants.STYLE_FONTCOLOR]?i[mxConstants.STYLE_FONTCOLOR]:"#000000",{install:function(t){N=t},destroy:function(){N=null}},null,!0):this.createCellColorOption(mxResources.get("fontColor"),mxConstants.STYLE_FONTCOLOR,null!=i[mxConstants.STYLE_FONTCOLOR]?i[mxConstants.STYLE_FONTCOLOR]:"#000000",function(t){H.style.display=t==mxConstants.NONE?"none":"",G.style.display=H.style.display},function(t){o.setCellStyles(mxConstants.STYLE_NOLABEL,t==mxConstants.NONE?"1":null,o.getSelectionCells()),o.updateCellStyles(mxConstants.STYLE_FONTCOLOR,t,o.getSelectionCells()),o.updateLabelElements(o.getSelectionCells(),function(t){t.removeAttribute("color"),t.style.color=null})})).style.fontWeight="bold",n.appendChild(i),n.appendChild(H),o.cellEditor.isContentEditing()||n.appendChild(G),t.appendChild(n),(n=this.createPanel()).style.paddingTop="2px",n.style.paddingBottom="4px",i=o.filterSelectionCells(mxUtils.bind(this,function(t){var e=o.view.getState(t);return null==e||this.format.isAutoSizeState(e)||o.getModel().isEdge(t)||!o.isTableRow(t)&&!o.isTableCell(t)&&!o.isCellResizable(t)})),(_=this.createCellOption(mxResources.get("wordWrap"),mxConstants.STYLE_WHITE_SPACE,null,"wrap","null",null,null,!0,i)).style.fontWeight="bold",0<i.length&&n.appendChild(_),(i=this.createCellOption(mxResources.get("formattedText"),"html",0,null,null,null,l.actions.get("formattedText"))).style.fontWeight="bold",n.appendChild(i),(i=this.createPanel()).style.paddingTop="10px",i.style.paddingBottom="28px",i.style.fontWeight="normal",(_=document.createElement("div")).style.position="absolute",_.style.width="70px",_.style.marginTop="0px",_.style.fontWeight="bold",mxUtils.write(_,mxResources.get("spacing")),i.appendChild(_);var F=this.addUnitInput(i,"pt",91,44,function(){J.apply(this,arguments)}),V=this.addUnitInput(i,"pt",20,44,function(){K.apply(this,arguments)});mxUtils.br(i),this.addLabel(i,mxResources.get("top"),91),this.addLabel(i,mxResources.get("global"),20),mxUtils.br(i),mxUtils.br(i);var B,z,Y,j=this.addUnitInput(i,"pt",162,44,function(){tt.apply(this,arguments)}),W=this.addUnitInput(i,"pt",91,44,function(){$.apply(this,arguments)}),q=this.addUnitInput(i,"pt",20,44,function(){Q.apply(this,arguments)});mxUtils.br(i),this.addLabel(i,mxResources.get("left"),162),this.addLabel(i,mxResources.get("bottom"),91),this.addLabel(i,mxResources.get("right"),20),o.cellEditor.isContentEditing()?(z=B=null,t.appendChild(this.createRelativeOption(mxResources.get("lineheight"),null,null,function(t){var e=""==t.value?120:parseInt(t.value);e=Math.max(0,isNaN(e)?120:e),null!=B&&(o.cellEditor.restoreSelection(B),B=null);for(var n=o.getSelectedElement();null!=n&&n.nodeType!=mxConstants.NODETYPE_ELEMENT;)n=n.parentNode;null!=n&&n==o.cellEditor.textarea&&null!=o.cellEditor.textarea.firstChild&&("P"!=o.cellEditor.textarea.firstChild.nodeName&&(o.cellEditor.textarea.innerHTML="<p>"+o.cellEditor.textarea.innerHTML+"</p>"),n=o.cellEditor.textarea.firstChild),null!=n&&null!=o.cellEditor.textarea&&n!=o.cellEditor.textarea&&o.cellEditor.textarea.contains(n)&&(n.style.lineHeight=e+"%"),t.value=e+" %"},function(t){z=t,mxEvent.addListener(t,"mousedown",function(){document.activeElement==o.cellEditor.textarea&&(B=o.cellEditor.saveSelection())}),mxEvent.addListener(t,"touchstart",function(){document.activeElement==o.cellEditor.textarea&&(B=o.cellEditor.saveSelection())}),t.value="120 %"})),(n=r.cloneNode(!1)).style.paddingLeft="0px",i=this.editorUi.toolbar.addItems(["link","image"],n,!0),_=[this.editorUi.toolbar.addButton("geSprite-horizontalrule",mxResources.get("insertHorizontalRule"),function(){document.execCommand("inserthorizontalrule",!1)},n),this.editorUi.toolbar.addMenuFunctionInContainer(n,"geSprite-table",mxResources.get("table"),!1,mxUtils.bind(this,function(t){this.editorUi.menus.addInsertTableItem(t)}))],this.styleButtons(i),this.styleButtons(_),(i=this.createPanel()).style.paddingTop="10px",i.style.paddingBottom="10px",i.appendChild(this.createTitle(mxResources.get("insert"))),i.appendChild(n),t.appendChild(i),(i=r.cloneNode(!1)).style.paddingLeft="0px",_=[this.editorUi.toolbar.addButton("geSprite-insertcolumnbefore",mxResources.get("insertColumnBefore"),mxUtils.bind(this,function(){try{null!=y&&o.insertColumn(y,null!=f?f.cellIndex:0)}catch(t){this.editorUi.handleError(t)}}),i),this.editorUi.toolbar.addButton("geSprite-insertcolumnafter",mxResources.get("insertColumnAfter"),mxUtils.bind(this,function(){try{null!=y&&o.insertColumn(y,null!=f?f.cellIndex+1:-1)}catch(t){this.editorUi.handleError(t)}}),i),this.editorUi.toolbar.addButton("geSprite-deletecolumn",mxResources.get("deleteColumn"),mxUtils.bind(this,function(){try{null!=y&&null!=f&&o.deleteColumn(y,f.cellIndex)}catch(t){this.editorUi.handleError(t)}}),i),this.editorUi.toolbar.addButton("geSprite-insertrowbefore",mxResources.get("insertRowBefore"),mxUtils.bind(this,function(){try{null!=y&&null!=v&&o.insertRow(y,v.sectionRowIndex)}catch(t){this.editorUi.handleError(t)}}),i),this.editorUi.toolbar.addButton("geSprite-insertrowafter",mxResources.get("insertRowAfter"),mxUtils.bind(this,function(){try{null!=y&&null!=v&&o.insertRow(y,v.sectionRowIndex+1)}catch(t){this.editorUi.handleError(t)}}),i),this.editorUi.toolbar.addButton("geSprite-deleterow",mxResources.get("deleteRow"),mxUtils.bind(this,function(){try{null!=y&&null!=v&&o.deleteRow(y,v.sectionRowIndex)}catch(t){this.editorUi.handleError(t)}}),i)],this.styleButtons(_),_[2].style.marginRight="9px",(n=this.createPanel()).style.paddingTop="10px",n.style.paddingBottom="10px",n.appendChild(this.createTitle(mxResources.get("table"))),n.appendChild(i),(r=r.cloneNode(!1)).style.paddingLeft="0px",_=[this.editorUi.toolbar.addButton("geSprite-strokecolor",mxResources.get("borderColor"),mxUtils.bind(this,function(t){var e;null!=y&&(e=y.style.borderColor.replace(/\brgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/g,function(t,e,n,i){return"#"+("0"+Number(e).toString(16)).substr(-2)+("0"+Number(n).toString(16)).substr(-2)+("0"+Number(i).toString(16)).substr(-2)}),this.editorUi.pickColor(e,function(e){var n=null==f||null!=t&&mxEvent.isShiftDown(t)?y:f;o.processElements(n,function(t){t.style.border=null}),null==e||e==mxConstants.NONE?(n.removeAttribute("border"),n.style.border="",n.style.borderCollapse=""):(n.setAttribute("border","1"),n.style.border="1px solid "+e,n.style.borderCollapse="collapse")}))}),r),this.editorUi.toolbar.addButton("geSprite-fillcolor",mxResources.get("backgroundColor"),mxUtils.bind(this,function(t){var e;null!=y&&(e=y.style.backgroundColor.replace(/\brgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/g,function(t,e,n,i){return"#"+("0"+Number(e).toString(16)).substr(-2)+("0"+Number(n).toString(16)).substr(-2)+("0"+Number(i).toString(16)).substr(-2)}),this.editorUi.pickColor(e,function(e){var n=null==f||null!=t&&mxEvent.isShiftDown(t)?y:f;o.processElements(n,function(t){t.style.backgroundColor=null}),n.style.backgroundColor=null==e||e==mxConstants.NONE?"":e}))}),r),this.editorUi.toolbar.addButton("geSprite-fit",mxResources.get("spacing"),function(){var t;null!=y&&(t=y.getAttribute("cellPadding")||0,t=new FilenameDialog(l,t,mxResources.get("apply"),mxUtils.bind(this,function(t){null!=t&&0<t.length?y.setAttribute("cellPadding",t):y.removeAttribute("cellPadding")}),mxResources.get("spacing")),l.showDialog(t.container,300,80,!0,!0),t.init())},r),this.editorUi.toolbar.addButton("geSprite-left",mxResources.get("left"),function(){null!=y&&y.setAttribute("align","left")},r),this.editorUi.toolbar.addButton("geSprite-center",mxResources.get("center"),function(){null!=y&&y.setAttribute("align","center")},r),this.editorUi.toolbar.addButton("geSprite-right",mxResources.get("right"),function(){null!=y&&y.setAttribute("align","right")},r)],this.styleButtons(_),_[2].style.marginRight="9px",n.appendChild(r),t.appendChild(n),Y=n):(t.appendChild(n),t.appendChild(this.createRelativeOption(mxResources.get("opacity"),mxConstants.STYLE_TEXT_OPACITY)),t.appendChild(i));var X,Z=mxUtils.bind(this,function(t,n,i){s=this.format.getSelectionState(),t=mxUtils.getValue(s.style,mxConstants.STYLE_FONTSTYLE,0),e(h[0],(t&mxConstants.FONT_BOLD)==mxConstants.FONT_BOLD),e(h[1],(t&mxConstants.FONT_ITALIC)==mxConstants.FONT_ITALIC),e(h[2],(t&mxConstants.FONT_UNDERLINE)==mxConstants.FONT_UNDERLINE),a.firstChild.nodeValue=mxUtils.getValue(s.style,mxConstants.STYLE_FONTFAMILY,Menus.prototype.defaultFont),e(u,"0"==mxUtils.getValue(s.style,mxConstants.STYLE_HORIZONTAL,"1")),!i&&document.activeElement==R||(t=parseFloat(mxUtils.getValue(s.style,mxConstants.STYLE_FONTSIZE,Menus.prototype.defaultFontSize)),R.value=isNaN(t)?"":t+" pt"),t=mxUtils.getValue(s.style,mxConstants.STYLE_ALIGN,mxConstants.ALIGN_CENTER),e(c,t==mxConstants.ALIGN_LEFT),e(p,t==mxConstants.ALIGN_CENTER),e(m,t==mxConstants.ALIGN_RIGHT),t=mxUtils.getValue(s.style,mxConstants.STYLE_VERTICAL_ALIGN,mxConstants.ALIGN_MIDDLE),e(C,t==mxConstants.ALIGN_TOP),e(E,t==mxConstants.ALIGN_MIDDLE),e(S,t==mxConstants.ALIGN_BOTTOM),t=mxUtils.getValue(s.style,mxConstants.STYLE_LABEL_POSITION,mxConstants.ALIGN_CENTER),n=mxUtils.getValue(s.style,mxConstants.STYLE_VERTICAL_LABEL_POSITION,mxConstants.ALIGN_MIDDLE),w.value=t==mxConstants.ALIGN_LEFT&&n==mxConstants.ALIGN_TOP?"topLeft":t==mxConstants.ALIGN_CENTER&&n==mxConstants.ALIGN_TOP?"top":t==mxConstants.ALIGN_RIGHT&&n==mxConstants.ALIGN_TOP?"topRight":t==mxConstants.ALIGN_LEFT&&n==mxConstants.ALIGN_BOTTOM?"bottomLeft":t==mxConstants.ALIGN_CENTER&&n==mxConstants.ALIGN_BOTTOM?"bottom":t==mxConstants.ALIGN_RIGHT&&n==mxConstants.ALIGN_BOTTOM?"bottomRight":t==mxConstants.ALIGN_LEFT?"left":t==mxConstants.ALIGN_RIGHT?"right":"center",(t=mxUtils.getValue(s.style,mxConstants.STYLE_TEXT_DIRECTION,mxConstants.DEFAULT_TEXT_DIRECTION))==mxConstants.TEXT_DIRECTION_RTL?M.value="rightToLeft":t==mxConstants.TEXT_DIRECTION_LTR?M.value="leftToRight":t==mxConstants.TEXT_DIRECTION_AUTO&&(M.value="automatic"),!i&&document.activeElement==V||(t=parseFloat(mxUtils.getValue(s.style,mxConstants.STYLE_SPACING,2)),V.value=isNaN(t)?"":t+" pt"),!i&&document.activeElement==F||(t=parseFloat(mxUtils.getValue(s.style,mxConstants.STYLE_SPACING_TOP,0)),F.value=isNaN(t)?"":t+" pt"),!i&&document.activeElement==q||(t=parseFloat(mxUtils.getValue(s.style,mxConstants.STYLE_SPACING_RIGHT,0)),q.value=isNaN(t)?"":t+" pt"),!i&&document.activeElement==W||(t=parseFloat(mxUtils.getValue(s.style,mxConstants.STYLE_SPACING_BOTTOM,0)),W.value=isNaN(t)?"":t+" pt"),!i&&document.activeElement==j||(t=parseFloat(mxUtils.getValue(s.style,mxConstants.STYLE_SPACING_LEFT,0)),j.value=isNaN(t)?"":t+" pt")}),K=this.installInputHandler(V,mxConstants.STYLE_SPACING,2,-999,999," pt"),J=this.installInputHandler(F,mxConstants.STYLE_SPACING_TOP,0,-999,999," pt"),Q=this.installInputHandler(q,mxConstants.STYLE_SPACING_RIGHT,0,-999,999," pt"),$=this.installInputHandler(W,mxConstants.STYLE_SPACING_BOTTOM,0,-999,999," pt"),tt=this.installInputHandler(j,mxConstants.STYLE_SPACING_LEFT,0,-999,999," pt");return this.addKeyHandler(R,Z),this.addKeyHandler(V,Z),this.addKeyHandler(F,Z),this.addKeyHandler(q,Z),this.addKeyHandler(W,Z),this.addKeyHandler(j,Z),o.getModel().addListener(mxEvent.CHANGE,Z),this.listeners.push({destroy:function(){o.getModel().removeListener(Z)}}),Z(),o.cellEditor.isContentEditing()&&(X=!1,r=function(){X||(X=!0,window.setTimeout(function(){var t=o.getSelectedEditingElement();if(null!=t){function n(t){return null!=(t=null!=t?t.fontSize:null)&&"px"==t.substring(t.length-2)?parseFloat(t):mxConstants.DEFAULT_FONTSIZE}function i(t,e,n){return null!=n.style&&null!=e?(e=e.lineHeight,null!=n.style.lineHeight&&"%"==n.style.lineHeight.substring(n.style.lineHeight.length-1)?parseInt(n.style.lineHeight)/100:"px"==e.substring(e.length-2)?parseFloat(e)/t:parseInt(e)):""}var l,r=function(t,e){if(null!=t&&null!=e){if(t==e)return!0;if(t.length>e.length+1)return t.substring(t.length-e.length-1,t.length)=="-"+e}return!1},u=function(e){if(null!=o.getParentByName(t,e,o.cellEditor.textarea))return!0;for(var n=t;null!=n&&1==n.childNodes.length;)if((n=n.childNodes[0]).nodeName==e)return!0;return!1},d=mxUtils.getCurrentStyle(t),C=n(d),E=i(C,d,t),S=t.getElementsByTagName("*");if(0<S.length&&window.getSelection&&!mxClient.IS_IE&&!mxClient.IS_IE11)for(var w=window.getSelection(),T=0;T<S.length;T++)w.containsNode(S[T],!0)&&(temp=mxUtils.getCurrentStyle(S[T]),(l=i(C=Math.max(n(temp),C),temp,S[T]))==E&&!isNaN(l)||(E=""));null!=d&&(e(h[0],"bold"==d.fontWeight||400<d.fontWeight||u("B")||u("STRONG")),e(h[1],"italic"==d.fontStyle||u("I")||u("EM")),e(h[2],u("U")),e(x,u("SUP")),e(g,u("SUB")),o.cellEditor.isTableSelected()?(e(b,r(d.textAlign,"justify")),e(c,r(d.textAlign,"left")),e(p,r(d.textAlign,"center")),e(m,r(d.textAlign,"right"))):(u=o.cellEditor.align||mxUtils.getValue(s.style,mxConstants.STYLE_ALIGN,mxConstants.ALIGN_CENTER),r(d.textAlign,"justify")?(e(b,r(d.textAlign,"justify")),e(c,!1),e(p,!1),e(m,!1)):(e(b,!1),e(c,u==mxConstants.ALIGN_LEFT),e(p,u==mxConstants.ALIGN_CENTER),e(m,u==mxConstants.ALIGN_RIGHT))),y=o.getParentByName(t,"TABLE",o.cellEditor.textarea),v=null==y?null:o.getParentByName(t,"TR",y),f=null==y?null:o.getParentByNames(t,["TD","TH"],y),Y.style.display=null!=y?"":"none",document.activeElement!=R&&("FONT"==t.nodeName&&"4"==t.getAttribute("size")&&null!=O?(t.removeAttribute("size"),t.style.fontSize=O+" pt",O=null):R.value=isNaN(C)?"":C+" pt",l=parseFloat(E),z.value=isNaN(l)?"100 %":Math.round(100*l)+" %"),r=d.color.replace(/\brgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/g,function(t,e,n,i){return"#"+("0"+Number(e).toString(16)).substr(-2)+("0"+Number(n).toString(16)).substr(-2)+("0"+Number(i).toString(16)).substr(-2)}),C=d.backgroundColor.replace(/\brgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/g,function(t,e,n,i){return"#"+("0"+Number(e).toString(16)).substr(-2)+("0"+Number(n).toString(16)).substr(-2)+("0"+Number(i).toString(16)).substr(-2)}),null!=N&&(k="#"==r.charAt(0)?r:"#000000",N(k,!0)),null!=D&&(U="#"==C.charAt(0)?C:null,D(U,!0)),null!=a.firstChild&&(a.firstChild.nodeValue=Graph.stripQuotes(d.fontFamily)))}X=!1},0))},(mxClient.IS_FF||mxClient.IS_EDGE||mxClient.IS_IE||mxClient.IS_IE11)&&mxEvent.addListener(o.cellEditor.textarea,"DOMSubtreeModified",r),mxEvent.addListener(o.cellEditor.textarea,"input",r),mxEvent.addListener(o.cellEditor.textarea,"touchend",r),mxEvent.addListener(o.cellEditor.textarea,"mouseup",r),mxEvent.addListener(o.cellEditor.textarea,"keyup",r),this.listeners.push({destroy:function(){}}),r()),t},StyleFormatPanel=function(t,e,n){BaseFormatPanel.call(this,t,e,n),this.init()},mxUtils.extend(StyleFormatPanel,BaseFormatPanel),StyleFormatPanel.prototype.defaultStrokeColor="black",StyleFormatPanel.prototype.init=function(){var t=this.format.getSelectionState();t.containsLabel||(t.containsImage&&1==t.vertices.length&&"image"==t.style.shape&&null!=t.style.image&&"data:image/svg+xml;"==t.style.image.substring(0,19)&&this.container.appendChild(this.addSvgStyles(this.createPanel())),t.containsImage&&"image"!=t.style.shape||this.container.appendChild(this.addFill(this.createPanel())),this.container.appendChild(this.addStroke(this.createPanel())),this.container.appendChild(this.addLineJumps(this.createPanel())),(t=this.createRelativeOption(mxResources.get("opacity"),mxConstants.STYLE_OPACITY,41)).style.paddingTop="8px",t.style.paddingBottom="8px",this.container.appendChild(t),this.container.appendChild(this.addEffects(this.createPanel()))),null!=(t=this.addEditOps(this.createPanel())).firstChild&&mxUtils.br(t),this.container.appendChild(this.addStyleOps(t))},StyleFormatPanel.prototype.getCssRules=function(t){var e=document.implementation.createHTMLDocument(""),n=document.createElement("style");return mxUtils.setTextContent(n,t),e.body.appendChild(n),n.sheet.cssRules},StyleFormatPanel.prototype.addSvgStyles=function(t){var e=this.format.getSelectionState();t.style.paddingTop="6px",t.style.paddingBottom="6px",t.style.fontWeight="bold",t.style.display="none";try{if(null!=(a=e.style.editableCssRules)){var n=new RegExp(a),i=e.style.image.substring(e.style.image.indexOf(",")+1),l=window.atob?atob(i):Base64.decode(i,!0),o=mxUtils.parseXml(l);if(null!=o){var s=o.getElementsByTagName("style");for(e=0;e<s.length;e++)for(var r=this.getCssRules(mxUtils.getTextContent(s[e])),a=0;a<r.length;a++)this.addSvgRule(t,r[a],o,s[e],r,a,n)}}}catch(t){}return t},StyleFormatPanel.prototype.addSvgRule=function(t,e,n,i,l,o,s){var r=this.editorUi.editor.graph;s.test(e.selectorText)&&((s=mxUtils.bind(this,function(e,s,a){var h=mxUtils.trim(e.style[s]);""!=h&&"url("!=h.substring(0,4)&&(e=this.createColorOption(a+" "+e.selectorText,function(){var t=h;return(t=t.match(/^rgba?[\s+]?\([\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?/i))&&4===t.length?"#"+("0"+parseInt(t[1],10).toString(16)).slice(-2)+("0"+parseInt(t[2],10).toString(16)).slice(-2)+("0"+parseInt(t[3],10).toString(16)).slice(-2):""},function(t){l[o].style[s]=t,t="";for(var e=0;e<l.length;e++)t+=l[e].cssText+" ";i.textContent=t,t=mxUtils.getXml(n.documentElement),r.setCellStyles(mxConstants.STYLE_IMAGE,"data:image/svg+xml,"+(window.btoa?btoa(t):Base64.encode(t,!0)),r.getSelectionCells())},"#ffffff",{install:function(t){},destroy:function(){}}),t.appendChild(e),t.style.display="")}))(e,"fill",mxResources.get("fill")),s(e,"stroke",mxResources.get("line")),s(e,"stop-color",mxResources.get("gradient")))},StyleFormatPanel.prototype.addEditOps=function(t){this.format.getSelectionState();var e=null;return 1==this.editorUi.editor.graph.getSelectionCount()&&((e=mxUtils.button(mxResources.get("editStyle"),mxUtils.bind(this,function(t){this.editorUi.actions.get("editStyle").funct()}))).setAttribute("title",mxResources.get("editStyle")+" ("+this.editorUi.actions.get("editStyle").shortcut+")"),e.style.width="188px",e.style.marginBottom="2px",e.className="btn btn-secondary",t.appendChild(e)),t},StyleFormatPanel.prototype.addFill=function(t){var e=this.editorUi.editor.graph,n=this.format.getSelectionState();t.style.paddingTop="6px",t.style.paddingBottom="6px";var i=document.createElement("select");i.style.position="absolute",i.style.marginTop="-2px",i.style.right="72px",i.style.width="70px";var l=i.cloneNode(!1);mxEvent.addListener(i,"click",function(t){mxEvent.consume(t)}),mxEvent.addListener(l,"click",function(t){mxEvent.consume(t)});var o=1<=n.vertices.length?e.stylesheet.getDefaultVertexStyle():e.stylesheet.getDefaultEdgeStyle(),s=this.createCellColorOption(mxResources.get("gradient"),mxConstants.STYLE_GRADIENTCOLOR,null!=o[mxConstants.STYLE_GRADIENTCOLOR]?o[mxConstants.STYLE_GRADIENTCOLOR]:"#ffffff",function(t){i.style.display=null==t||t==mxConstants.NONE?"none":""},function(t){e.updateCellStyles(mxConstants.STYLE_GRADIENTCOLOR,t,e.getSelectionCells())}),r="image"==n.style.shape?mxConstants.STYLE_IMAGE_BACKGROUND:mxConstants.STYLE_FILLCOLOR,a=mxResources.get("image"==n.style.shape?"background":"fill");o=1<=n.vertices.length?e.stylesheet.getDefaultVertexStyle():e.stylesheet.getDefaultEdgeStyle(),(o=this.createCellColorOption(a,r,null!=o[r]?o[r]:"#ffffff",null,mxUtils.bind(this,function(t){e.updateCellStyles(r,t,n.vertices)}))).style.fontWeight="bold",a=mxUtils.getValue(n.style,r,null),s.style.display=null!=a&&a!=mxConstants.NONE&&n.fill&&"image"!=n.style.shape?"":"none";var h=[mxConstants.DIRECTION_NORTH,mxConstants.DIRECTION_EAST,mxConstants.DIRECTION_SOUTH,mxConstants.DIRECTION_WEST];for(a=0;a<h.length;a++){var u=document.createElement("option");u.setAttribute("value",h[a]),mxUtils.write(u,mxResources.get(h[a])),i.appendChild(u)}for(s.appendChild(i),a=0;a<Editor.roughFillStyles.length;a++)(h=document.createElement("option")).setAttribute("value",Editor.roughFillStyles[a].val),mxUtils.write(h,Editor.roughFillStyles[a].dispName),l.appendChild(h);o.appendChild(l);var d=mxUtils.bind(this,function(){n=this.format.getSelectionState();var e=mxUtils.getValue(n.style,mxConstants.STYLE_GRADIENT_DIRECTION,mxConstants.DIRECTION_SOUTH),o=mxUtils.getValue(n.style,"fillStyle","auto");""==e&&(e=mxConstants.DIRECTION_SOUTH),i.value=e,l.value=o,t.style.display=n.fill?"":"none",e=mxUtils.getValue(n.style,mxConstants.STYLE_FILLCOLOR,null),!n.fill||n.containsImage||null==e||e==mxConstants.NONE||"filledEdge"==n.style.shape?(l.style.display="none",s.style.display="none"):(l.style.display="1"==n.style.sketch?"":"none",s.style.display="1"!=n.style.sketch||"solid"==o||"auto"==o?"":"none")});for(e.getModel().addListener(mxEvent.CHANGE,d),this.listeners.push({destroy:function(){e.getModel().removeListener(d)}}),d(),mxEvent.addListener(i,"change",function(t){e.setCellStyles(mxConstants.STYLE_GRADIENT_DIRECTION,i.value,n.cells),mxEvent.consume(t)}),mxEvent.addListener(l,"change",function(t){e.setCellStyles("fillStyle",l.value,n.cells),mxEvent.consume(t)}),t.appendChild(o),t.appendChild(s),o=this.getCustomColors(),a=0;a<o.length;a++)t.appendChild(this.createCellColorOption(o[a].title,o[a].key,o[a].defaultValue));return t},StyleFormatPanel.prototype.getCustomColors=function(){var t=this.format.getSelectionState(),e=[];return"swimlane"!=t.style.shape&&"table"!=t.style.shape||e.push({title:mxResources.get("laneColor"),key:"swimlaneFillColor",defaultValue:"#ffffff"}),e},StyleFormatPanel.prototype.addStroke=function(t){function e(t){var e=parseInt(x.value);(e=Math.min(999,Math.max(1,isNaN(e)?1:e)))!=mxUtils.getValue(o.style,mxConstants.STYLE_STROKEWIDTH,1)&&(l.setCellStyles(mxConstants.STYLE_STROKEWIDTH,e,l.getSelectionCells()),i.fireEvent(new mxEventObject("styleChanged","keys",[mxConstants.STYLE_STROKEWIDTH],"values",[e],"cells",l.getSelectionCells()))),x.value=e+" pt",mxEvent.consume(t)}function n(t){var e=parseInt(y.value);(e=Math.min(999,Math.max(1,isNaN(e)?1:e)))!=mxUtils.getValue(o.style,mxConstants.STYLE_STROKEWIDTH,1)&&(l.setCellStyles(mxConstants.STYLE_STROKEWIDTH,e,l.getSelectionCells()),i.fireEvent(new mxEventObject("styleChanged","keys",[mxConstants.STYLE_STROKEWIDTH],"values",[e],"cells",l.getSelectionCells()))),y.value=e+" pt",mxEvent.consume(t)}var i=this.editorUi,l=i.editor.graph,o=this.format.getSelectionState();t.style.paddingTop="4px",t.style.paddingBottom="4px",t.style.whiteSpace="normal";var s=document.createElement("div");s.style.fontWeight="bold",o.stroke||(s.style.display="none");var r=document.createElement("select");r.style.position="absolute",r.style.marginTop="-2px",r.style.right="72px",r.style.width="80px";for(var a=["sharp","rounded","curved"],h=0;h<a.length;h++)(g=document.createElement("option")).setAttribute("value",a[h]),mxUtils.write(g,mxResources.get(a[h])),r.appendChild(g);mxEvent.addListener(r,"change",function(t){l.getModel().beginUpdate();try{var e=[mxConstants.STYLE_ROUNDED,mxConstants.STYLE_CURVED],n=["0",null];"rounded"==r.value?n=["1",null]:"curved"==r.value&&(n=[null,"1"]);for(var o=0;o<e.length;o++)l.setCellStyles(e[o],n[o],l.getSelectionCells());i.fireEvent(new mxEventObject("styleChanged","keys",e,"values",n,"cells",l.getSelectionCells()))}finally{l.getModel().endUpdate()}mxEvent.consume(t)}),mxEvent.addListener(r,"click",function(t){mxEvent.consume(t)});var u="image"==o.style.shape?mxConstants.STYLE_IMAGE_BORDER:mxConstants.STYLE_STROKECOLOR;a=mxResources.get("image"==o.style.shape?"border":"line"),h=1<=o.vertices.length?l.stylesheet.getDefaultVertexStyle():l.stylesheet.getDefaultEdgeStyle(),(a=this.createCellColorOption(a,u,null!=h[u]?h[u]:"#000000",null,mxUtils.bind(this,function(t){l.updateCellStyles(u,t,l.getSelectionCells())}))).appendChild(r),s.appendChild(a);var d=s.cloneNode(!1);d.style.fontWeight="normal",d.style.whiteSpace="nowrap",d.style.position="relative",d.style.paddingLeft="16px",d.style.marginBottom="2px",d.style.marginTop="2px",d.className="geToolbarContainer";var c=mxUtils.bind(this,function(t,e,n,i,l){return t=this.editorUi.menus.styleChange(t,"",i,l,"geIcon",null),(i=document.createElement("div")).style.width=e+"px",i.style.height="1px",i.style.borderBottom="1px "+n+" "+this.defaultStrokeColor,i.style.paddingTop="6px",t.firstChild.firstChild.style.padding="0px 4px 0px 4px",t.firstChild.firstChild.style.width=e+"px",t.firstChild.firstChild.appendChild(i),t});h=this.editorUi.toolbar.addMenuFunctionInContainer(d,"geSprite-orthogonal",mxResources.get("pattern"),!1,mxUtils.bind(this,function(t){c(t,75,"solid",[mxConstants.STYLE_DASHED,mxConstants.STYLE_DASH_PATTERN],[null,null]).setAttribute("title",mxResources.get("solid")),c(t,75,"dashed",[mxConstants.STYLE_DASHED,mxConstants.STYLE_DASH_PATTERN],["1",null]).setAttribute("title",mxResources.get("dashed")),c(t,75,"dotted",[mxConstants.STYLE_DASHED,mxConstants.STYLE_DASH_PATTERN],["1","1 1"]).setAttribute("title",mxResources.get("dotted")+" (1)"),c(t,75,"dotted",[mxConstants.STYLE_DASHED,mxConstants.STYLE_DASH_PATTERN],["1","1 2"]).setAttribute("title",mxResources.get("dotted")+" (2)"),c(t,75,"dotted",[mxConstants.STYLE_DASHED,mxConstants.STYLE_DASH_PATTERN],["1","1 4"]).setAttribute("title",mxResources.get("dotted")+" (3)")}));var p=d.cloneNode(!1),m=this.editorUi.toolbar.addMenuFunctionInContainer(p,"geSprite-connection",mxResources.get("connection"),!1,mxUtils.bind(this,function(t){this.editorUi.menus.styleChange(t,"",[mxConstants.STYLE_SHAPE,mxConstants.STYLE_STARTSIZE,mxConstants.STYLE_ENDSIZE,"width"],[null,null,null,null],"geIcon geSprite geSprite-connection",null,!0).setAttribute("title",mxResources.get("line")),this.editorUi.menus.styleChange(t,"",[mxConstants.STYLE_SHAPE,mxConstants.STYLE_STARTSIZE,mxConstants.STYLE_ENDSIZE,"width"],["link",null,null,null],"geIcon geSprite geSprite-linkedge",null,!0).setAttribute("title",mxResources.get("link")),this.editorUi.menus.styleChange(t,"",[mxConstants.STYLE_SHAPE,mxConstants.STYLE_STARTSIZE,mxConstants.STYLE_ENDSIZE,"width"],["flexArrow",null,null,null],"geIcon geSprite geSprite-arrow",null,!0).setAttribute("title",mxResources.get("arrow")),this.editorUi.menus.styleChange(t,"",[mxConstants.STYLE_SHAPE,mxConstants.STYLE_STARTSIZE,mxConstants.STYLE_ENDSIZE,"width"],["arrow",null,null,null],"geIcon geSprite geSprite-simplearrow",null,!0).setAttribute("title",mxResources.get("simpleArrow"))})),g=this.editorUi.toolbar.addMenuFunctionInContainer(p,"geSprite-orthogonal",mxResources.get("pattern"),!1,mxUtils.bind(this,function(t){c(t,33,"solid",[mxConstants.STYLE_DASHED,mxConstants.STYLE_DASH_PATTERN],[null,null]).setAttribute("title",mxResources.get("solid")),c(t,33,"dashed",[mxConstants.STYLE_DASHED,mxConstants.STYLE_DASH_PATTERN],["1",null]).setAttribute("title",mxResources.get("dashed")),c(t,33,"dotted",[mxConstants.STYLE_DASHED,mxConstants.STYLE_DASH_PATTERN],["1","1 1"]).setAttribute("title",mxResources.get("dotted")+" (1)"),c(t,33,"dotted",[mxConstants.STYLE_DASHED,mxConstants.STYLE_DASH_PATTERN],["1","1 2"]).setAttribute("title",mxResources.get("dotted")+" (2)"),c(t,33,"dotted",[mxConstants.STYLE_DASHED,mxConstants.STYLE_DASH_PATTERN],["1","1 4"]).setAttribute("title",mxResources.get("dotted")+" (3)")}));a=d.cloneNode(!1);var x=document.createElement("input");x.style.textAlign="right",x.style.marginTop="2px",x.style.width="41px",x.setAttribute("title",mxResources.get("linewidth")),d.appendChild(x);var y=x.cloneNode(!0);p.appendChild(y);var f=this.createStepper(x,e,1,9);f.style.display=x.style.display,f.style.marginTop="2px",d.appendChild(f);var v=this.createStepper(y,n,1,9);v.style.display=y.style.display,v.style.marginTop="2px",p.appendChild(v),x.style.position="absolute",x.style.height="15px",x.style.left="141px",f.style.left="190px",y.style.position="absolute",y.style.left="141px",y.style.height="15px",v.style.left="190px",mxEvent.addListener(x,"blur",e),mxEvent.addListener(x,"change",e),mxEvent.addListener(y,"blur",n),mxEvent.addListener(y,"change",n);var b=this.editorUi.toolbar.addMenuFunctionInContainer(a,"geSprite-orthogonal",mxResources.get("waypoints"),!1,mxUtils.bind(this,function(t){"arrow"!=o.style.shape&&(this.editorUi.menus.edgeStyleChange(t,"",[mxConstants.STYLE_EDGE,mxConstants.STYLE_CURVED,mxConstants.STYLE_NOEDGESTYLE],[null,null,null],"geIcon geSprite geSprite-straight",null,!0).setAttribute("title",mxResources.get("straight")),this.editorUi.menus.edgeStyleChange(t,"",[mxConstants.STYLE_EDGE,mxConstants.STYLE_CURVED,mxConstants.STYLE_NOEDGESTYLE],["orthogonalEdgeStyle",null,null],"geIcon geSprite geSprite-orthogonal",null,!0).setAttribute("title",mxResources.get("orthogonal")),this.editorUi.menus.edgeStyleChange(t,"",[mxConstants.STYLE_EDGE,mxConstants.STYLE_ELBOW,mxConstants.STYLE_CURVED,mxConstants.STYLE_NOEDGESTYLE],["elbowEdgeStyle",null,null,null],"geIcon geSprite geSprite-horizontalelbow",null,!0).setAttribute("title",mxResources.get("simple")),this.editorUi.menus.edgeStyleChange(t,"",[mxConstants.STYLE_EDGE,mxConstants.STYLE_ELBOW,mxConstants.STYLE_CURVED,mxConstants.STYLE_NOEDGESTYLE],["elbowEdgeStyle","vertical",null,null],"geIcon geSprite geSprite-verticalelbow",null,!0).setAttribute("title",mxResources.get("simple")),this.editorUi.menus.edgeStyleChange(t,"",[mxConstants.STYLE_EDGE,mxConstants.STYLE_ELBOW,mxConstants.STYLE_CURVED,mxConstants.STYLE_NOEDGESTYLE],["isometricEdgeStyle",null,null,null],"geIcon geSprite geSprite-horizontalisometric",null,!0).setAttribute("title",mxResources.get("isometric")),this.editorUi.menus.edgeStyleChange(t,"",[mxConstants.STYLE_EDGE,mxConstants.STYLE_ELBOW,mxConstants.STYLE_CURVED,mxConstants.STYLE_NOEDGESTYLE],["isometricEdgeStyle","vertical",null,null],"geIcon geSprite geSprite-verticalisometric",null,!0).setAttribute("title",mxResources.get("isometric")),"connector"==o.style.shape&&this.editorUi.menus.edgeStyleChange(t,"",[mxConstants.STYLE_EDGE,mxConstants.STYLE_CURVED,mxConstants.STYLE_NOEDGESTYLE],["orthogonalEdgeStyle","1",null],"geIcon geSprite geSprite-curved",null,!0).setAttribute("title",mxResources.get("curved")),this.editorUi.menus.edgeStyleChange(t,"",[mxConstants.STYLE_EDGE,mxConstants.STYLE_CURVED,mxConstants.STYLE_NOEDGESTYLE],["entityRelationEdgeStyle",null,null],"geIcon geSprite geSprite-entity",null,!0).setAttribute("title",mxResources.get("entityRelation")))})),C=this.editorUi.toolbar.addMenuFunctionInContainer(a,"geSprite-startclassic",mxResources.get("linestart"),!1,mxUtils.bind(this,function(t){var e;"connector"!=o.style.shape&&"flexArrow"!=o.style.shape&&"filledEdge"!=o.style.shape||((e=this.editorUi.menus.edgeStyleChange(t,"",[mxConstants.STYLE_STARTARROW,"startFill"],[mxConstants.NONE,0],"geIcon",null,!1)).setAttribute("title",mxResources.get("none")),e.firstChild.firstChild.innerHTML='<font style="font-size:10px;">'+mxUtils.htmlEntities(mxResources.get("none"))+"</font>","connector"==o.style.shape||"filledEdge"==o.style.shape?(this.editorUi.menus.edgeStyleChange(t,"",[mxConstants.STYLE_STARTARROW,"startFill"],[mxConstants.ARROW_CLASSIC,1],"geIcon geSprite geSprite-startclassic",null,!1).setAttribute("title",mxResources.get("classic")),this.editorUi.menus.edgeStyleChange(t,"",[mxConstants.STYLE_STARTARROW,"startFill"],[mxConstants.ARROW_CLASSIC_THIN,1],"geIcon geSprite geSprite-startclassicthin",null,!1),this.editorUi.menus.edgeStyleChange(t,"",[mxConstants.STYLE_STARTARROW,"startFill"],[mxConstants.ARROW_OPEN,0],"geIcon geSprite geSprite-startopen",null,!1).setAttribute("title",mxResources.get("openArrow")),this.editorUi.menus.edgeStyleChange(t,"",[mxConstants.STYLE_STARTARROW,"startFill"],[mxConstants.ARROW_OPEN_THIN,0],"geIcon geSprite geSprite-startopenthin",null,!1),this.editorUi.menus.edgeStyleChange(t,"",[mxConstants.STYLE_STARTARROW,"startFill"],["openAsync",0],"geIcon geSprite geSprite-startopenasync",null,!1),this.editorUi.menus.edgeStyleChange(t,"",[mxConstants.STYLE_STARTARROW,"startFill"],[mxConstants.ARROW_BLOCK,1],"geIcon geSprite geSprite-startblock",null,!1).setAttribute("title",mxResources.get("block")),this.editorUi.menus.edgeStyleChange(t,"",[mxConstants.STYLE_STARTARROW,"startFill"],[mxConstants.ARROW_BLOCK_THIN,1],"geIcon geSprite geSprite-startblockthin",null,!1),this.editorUi.menus.edgeStyleChange(t,"",[mxConstants.STYLE_STARTARROW,"startFill"],["async",1],"geIcon geSprite geSprite-startasync",null,!1),this.editorUi.menus.edgeStyleChange(t,"",[mxConstants.STYLE_STARTARROW,"startFill"],[mxConstants.ARROW_OVAL,1],"geIcon geSprite geSprite-startoval",null,!1).setAttribute("title",mxResources.get("oval")),this.editorUi.menus.edgeStyleChange(t,"",[mxConstants.STYLE_STARTARROW,"startFill"],[mxConstants.ARROW_DIAMOND,1],"geIcon geSprite geSprite-startdiamond",null,!1).setAttribute("title",mxResources.get("diamond")),this.editorUi.menus.edgeStyleChange(t,"",[mxConstants.STYLE_STARTARROW,"startFill"],[mxConstants.ARROW_DIAMOND_THIN,1],"geIcon geSprite geSprite-startthindiamond",null,!1).setAttribute("title",mxResources.get("diamondThin")),this.editorUi.menus.edgeStyleChange(t,"",[mxConstants.STYLE_STARTARROW,"startFill"],[mxConstants.ARROW_CLASSIC,0],"geIcon geSprite geSprite-startclassictrans",null,!1).setAttribute("title",mxResources.get("classic")),this.editorUi.menus.edgeStyleChange(t,"",[mxConstants.STYLE_STARTARROW,"startFill"],[mxConstants.ARROW_CLASSIC_THIN,0],"geIcon geSprite geSprite-startclassicthintrans",null,!1),this.editorUi.menus.edgeStyleChange(t,"",[mxConstants.STYLE_STARTARROW,"startFill"],[mxConstants.ARROW_BLOCK,0],"geIcon geSprite geSprite-startblocktrans",null,!1).setAttribute("title",mxResources.get("block")),this.editorUi.menus.edgeStyleChange(t,"",[mxConstants.STYLE_STARTARROW,"startFill"],[mxConstants.ARROW_BLOCK_THIN,0],"geIcon geSprite geSprite-startblockthintrans",null,!1),this.editorUi.menus.edgeStyleChange(t,"",[mxConstants.STYLE_STARTARROW,"startFill"],["async",0],"geIcon geSprite geSprite-startasynctrans",null,!1),this.editorUi.menus.edgeStyleChange(t,"",[mxConstants.STYLE_STARTARROW,"startFill"],[mxConstants.ARROW_OVAL,0],"geIcon geSprite geSprite-startovaltrans",null,!1).setAttribute("title",mxResources.get("oval")),this.editorUi.menus.edgeStyleChange(t,"",[mxConstants.STYLE_STARTARROW,"startFill"],[mxConstants.ARROW_DIAMOND,0],"geIcon geSprite geSprite-startdiamondtrans",null,!1).setAttribute("title",mxResources.get("diamond")),this.editorUi.menus.edgeStyleChange(t,"",[mxConstants.STYLE_STARTARROW,"startFill"],[mxConstants.ARROW_DIAMOND_THIN,0],"geIcon geSprite geSprite-startthindiamondtrans",null,!1).setAttribute("title",mxResources.get("diamondThin")),this.editorUi.menus.edgeStyleChange(t,"",[mxConstants.STYLE_STARTARROW,"startFill"],["box",0],"geIcon geSprite geSvgSprite geSprite-box",null,!1),this.editorUi.menus.edgeStyleChange(t,"",[mxConstants.STYLE_STARTARROW,"startFill"],["halfCircle",0],"geIcon geSprite geSvgSprite geSprite-halfCircle",null,!1),this.editorUi.menus.edgeStyleChange(t,"",[mxConstants.STYLE_STARTARROW,"startFill"],["dash",0],"geIcon geSprite geSprite-startdash",null,!1),this.editorUi.menus.edgeStyleChange(t,"",[mxConstants.STYLE_STARTARROW,"startFill"],["cross",0],"geIcon geSprite geSprite-startcross",null,!1),this.editorUi.menus.edgeStyleChange(t,"",[mxConstants.STYLE_STARTARROW,"startFill"],["circlePlus",0],"geIcon geSprite geSprite-startcircleplus",null,!1),this.editorUi.menus.edgeStyleChange(t,"",[mxConstants.STYLE_STARTARROW,"startFill"],["circle",1],"geIcon geSprite geSprite-startcircle",null,!1),this.editorUi.menus.edgeStyleChange(t,"",[mxConstants.STYLE_STARTARROW,"startFill"],["ERone",0],"geIcon geSprite geSprite-starterone",null,!1),this.editorUi.menus.edgeStyleChange(t,"",[mxConstants.STYLE_STARTARROW,"startFill"],["ERmandOne",0],"geIcon geSprite geSprite-starteronetoone",null,!1),this.editorUi.menus.edgeStyleChange(t,"",[mxConstants.STYLE_STARTARROW,"startFill"],["ERmany",0],"geIcon geSprite geSprite-startermany",null,!1),this.editorUi.menus.edgeStyleChange(t,"",[mxConstants.STYLE_STARTARROW,"startFill"],["ERoneToMany",0],"geIcon geSprite geSprite-starteronetomany",null,!1),this.editorUi.menus.edgeStyleChange(t,"",[mxConstants.STYLE_STARTARROW,"startFill"],["ERzeroToOne",1],"geIcon geSprite geSprite-starteroneopt",null,!1),this.editorUi.menus.edgeStyleChange(t,"",[mxConstants.STYLE_STARTARROW,"startFill"],["ERzeroToMany",1],"geIcon geSprite geSprite-startermanyopt",null,!1)):this.editorUi.menus.edgeStyleChange(t,"",[mxConstants.STYLE_STARTARROW],[mxConstants.ARROW_BLOCK],"geIcon geSprite geSprite-startblocktrans",null,!1).setAttribute("title",mxResources.get("block")))})),E=this.editorUi.toolbar.addMenuFunctionInContainer(a,"geSprite-endclassic",mxResources.get("lineend"),!1,mxUtils.bind(this,function(t){var e;"connector"!=o.style.shape&&"flexArrow"!=o.style.shape&&"filledEdge"!=o.style.shape||((e=this.editorUi.menus.edgeStyleChange(t,"",[mxConstants.STYLE_ENDARROW,"endFill"],[mxConstants.NONE,0],"geIcon",null,!1)).setAttribute("title",mxResources.get("none")),e.firstChild.firstChild.innerHTML='<font style="font-size:10px;">'+mxUtils.htmlEntities(mxResources.get("none"))+"</font>","connector"==o.style.shape||"filledEdge"==o.style.shape?(this.editorUi.menus.edgeStyleChange(t,"",[mxConstants.STYLE_ENDARROW,"endFill"],[mxConstants.ARROW_CLASSIC,1],"geIcon geSprite geSprite-endclassic",null,!1).setAttribute("title",mxResources.get("classic")),this.editorUi.menus.edgeStyleChange(t,"",[mxConstants.STYLE_ENDARROW,"endFill"],[mxConstants.ARROW_CLASSIC_THIN,1],"geIcon geSprite geSprite-endclassicthin",null,!1),this.editorUi.menus.edgeStyleChange(t,"",[mxConstants.STYLE_ENDARROW,"endFill"],[mxConstants.ARROW_OPEN,0],"geIcon geSprite geSprite-endopen",null,!1).setAttribute("title",mxResources.get("openArrow")),this.editorUi.menus.edgeStyleChange(t,"",[mxConstants.STYLE_ENDARROW,"endFill"],[mxConstants.ARROW_OPEN_THIN,0],"geIcon geSprite geSprite-endopenthin",null,!1),this.editorUi.menus.edgeStyleChange(t,"",[mxConstants.STYLE_ENDARROW,"endFill"],["openAsync",0],"geIcon geSprite geSprite-endopenasync",null,!1),this.editorUi.menus.edgeStyleChange(t,"",[mxConstants.STYLE_ENDARROW,"endFill"],[mxConstants.ARROW_BLOCK,1],"geIcon geSprite geSprite-endblock",null,!1).setAttribute("title",mxResources.get("block")),this.editorUi.menus.edgeStyleChange(t,"",[mxConstants.STYLE_ENDARROW,"endFill"],[mxConstants.ARROW_BLOCK_THIN,1],"geIcon geSprite geSprite-endblockthin",null,!1),this.editorUi.menus.edgeStyleChange(t,"",[mxConstants.STYLE_ENDARROW,"endFill"],["async",1],"geIcon geSprite geSprite-endasync",null,!1),this.editorUi.menus.edgeStyleChange(t,"",[mxConstants.STYLE_ENDARROW,"endFill"],[mxConstants.ARROW_OVAL,1],"geIcon geSprite geSprite-endoval",null,!1).setAttribute("title",mxResources.get("oval")),this.editorUi.menus.edgeStyleChange(t,"",[mxConstants.STYLE_ENDARROW,"endFill"],[mxConstants.ARROW_DIAMOND,1],"geIcon geSprite geSprite-enddiamond",null,!1).setAttribute("title",mxResources.get("diamond")),this.editorUi.menus.edgeStyleChange(t,"",[mxConstants.STYLE_ENDARROW,"endFill"],[mxConstants.ARROW_DIAMOND_THIN,1],"geIcon geSprite geSprite-endthindiamond",null,!1).setAttribute("title",mxResources.get("diamondThin")),this.editorUi.menus.edgeStyleChange(t,"",[mxConstants.STYLE_ENDARROW,"endFill"],[mxConstants.ARROW_CLASSIC,0],"geIcon geSprite geSprite-endclassictrans",null,!1).setAttribute("title",mxResources.get("classic")),this.editorUi.menus.edgeStyleChange(t,"",[mxConstants.STYLE_ENDARROW,"endFill"],[mxConstants.ARROW_CLASSIC_THIN,0],"geIcon geSprite geSprite-endclassicthintrans",null,!1),this.editorUi.menus.edgeStyleChange(t,"",[mxConstants.STYLE_ENDARROW,"endFill"],[mxConstants.ARROW_BLOCK,0],"geIcon geSprite geSprite-endblocktrans",null,!1).setAttribute("title",mxResources.get("block")),this.editorUi.menus.edgeStyleChange(t,"",[mxConstants.STYLE_ENDARROW,"endFill"],[mxConstants.ARROW_BLOCK_THIN,0],"geIcon geSprite geSprite-endblockthintrans",null,!1),this.editorUi.menus.edgeStyleChange(t,"",[mxConstants.STYLE_ENDARROW,"endFill"],["async",0],"geIcon geSprite geSprite-endasynctrans",null,!1),this.editorUi.menus.edgeStyleChange(t,"",[mxConstants.STYLE_ENDARROW,"endFill"],[mxConstants.ARROW_OVAL,0],"geIcon geSprite geSprite-endovaltrans",null,!1).setAttribute("title",mxResources.get("oval")),this.editorUi.menus.edgeStyleChange(t,"",[mxConstants.STYLE_ENDARROW,"endFill"],[mxConstants.ARROW_DIAMOND,0],"geIcon geSprite geSprite-enddiamondtrans",null,!1).setAttribute("title",mxResources.get("diamond")),this.editorUi.menus.edgeStyleChange(t,"",[mxConstants.STYLE_ENDARROW,"endFill"],[mxConstants.ARROW_DIAMOND_THIN,0],"geIcon geSprite geSprite-endthindiamondtrans",null,!1).setAttribute("title",mxResources.get("diamondThin")),this.editorUi.menus.edgeStyleChange(t,"",[mxConstants.STYLE_ENDARROW,"endFill"],["box",0],"geIcon geSprite geSvgSprite geFlipSprite geSprite-box",null,!1),this.editorUi.menus.edgeStyleChange(t,"",[mxConstants.STYLE_ENDARROW,"endFill"],["halfCircle",0],"geIcon geSprite geSvgSprite geFlipSprite geSprite-halfCircle",null,!1),this.editorUi.menus.edgeStyleChange(t,"",[mxConstants.STYLE_ENDARROW,"endFill"],["dash",0],"geIcon geSprite geSprite-enddash",null,!1),this.editorUi.menus.edgeStyleChange(t,"",[mxConstants.STYLE_ENDARROW,"endFill"],["cross",0],"geIcon geSprite geSprite-endcross",null,!1),this.editorUi.menus.edgeStyleChange(t,"",[mxConstants.STYLE_ENDARROW,"endFill"],["circlePlus",0],"geIcon geSprite geSprite-endcircleplus",null,!1),this.editorUi.menus.edgeStyleChange(t,"",[mxConstants.STYLE_ENDARROW,"endFill"],["circle",1],"geIcon geSprite geSprite-endcircle",null,!1),this.editorUi.menus.edgeStyleChange(t,"",[mxConstants.STYLE_ENDARROW,"endFill"],["ERone",0],"geIcon geSprite geSprite-enderone",null,!1),this.editorUi.menus.edgeStyleChange(t,"",[mxConstants.STYLE_ENDARROW,"endFill"],["ERmandOne",0],"geIcon geSprite geSprite-enderonetoone",null,!1),this.editorUi.menus.edgeStyleChange(t,"",[mxConstants.STYLE_ENDARROW,"endFill"],["ERmany",0],"geIcon geSprite geSprite-endermany",null,!1),this.editorUi.menus.edgeStyleChange(t,"",[mxConstants.STYLE_ENDARROW,"endFill"],["ERoneToMany",0],"geIcon geSprite geSprite-enderonetomany",null,!1),this.editorUi.menus.edgeStyleChange(t,"",[mxConstants.STYLE_ENDARROW,"endFill"],["ERzeroToOne",1],"geIcon geSprite geSprite-enderoneopt",null,!1),this.editorUi.menus.edgeStyleChange(t,"",[mxConstants.STYLE_ENDARROW,"endFill"],["ERzeroToMany",1],"geIcon geSprite geSprite-endermanyopt",null,!1)):this.editorUi.menus.edgeStyleChange(t,"",[mxConstants.STYLE_ENDARROW],[mxConstants.ARROW_BLOCK],"geIcon geSprite geSprite-endblocktrans",null,!1).setAttribute("title",mxResources.get("block")))}));this.addArrow(m,8),this.addArrow(b),this.addArrow(C),this.addArrow(E),(f=this.addArrow(h,9)).className="geIcon",f.style.width="auto",(v=this.addArrow(g,9)).className="geIcon",v.style.width="22px";var S=document.createElement("div");S.style.width="85px",S.style.height="1px",S.style.borderBottom="1px solid "+this.defaultStrokeColor,S.style.marginBottom="9px",f.appendChild(S);var w=document.createElement("div");w.style.width="23px",w.style.height="1px",w.style.borderBottom="1px solid "+this.defaultStrokeColor,w.style.marginBottom="9px",v.appendChild(w),h.style.height="15px",g.style.height="15px",m.style.height="15px",b.style.height="17px",C.style.marginLeft="3px",C.style.height="17px",E.style.marginLeft="3px",E.style.height="17px",t.appendChild(s),t.appendChild(p),t.appendChild(d),(h=d.cloneNode(!1)).style.paddingBottom="6px",h.style.paddingTop="4px",h.style.fontWeight="normal",(g=document.createElement("div")).style.position="absolute",g.style.marginLeft="3px",g.style.marginBottom="12px",g.style.marginTop="2px",g.style.fontWeight="normal",g.style.width="76px",mxUtils.write(g,mxResources.get("lineend")),h.appendChild(g);var T=this.addUnitInput(h,"pt",74,33,function(){D.apply(this,arguments)}),A=this.addUnitInput(h,"pt",20,33,function(){_.apply(this,arguments)});mxUtils.br(h),(f=document.createElement("div")).style.height="8px",h.appendChild(f),g=g.cloneNode(!1),mxUtils.write(g,mxResources.get("linestart")),h.appendChild(g);var M=this.addUnitInput(h,"pt",74,33,function(){O.apply(this,arguments)}),L=this.addUnitInput(h,"pt",20,33,function(){R.apply(this,arguments)});mxUtils.br(h),this.addLabel(h,mxResources.get("spacing"),74,50),this.addLabel(h,mxResources.get("size"),20,50),mxUtils.br(h),(s=s.cloneNode(!1)).style.fontWeight="normal",s.style.position="relative",s.style.paddingLeft="16px",s.style.marginBottom="2px",s.style.marginTop="6px",s.style.borderWidth="0px",s.style.paddingBottom="18px",(g=document.createElement("div")).style.position="absolute",g.style.marginLeft="3px",g.style.marginBottom="12px",g.style.marginTop="1px",g.style.fontWeight="normal",g.style.width="120px",mxUtils.write(g,mxResources.get("perimeter")),s.appendChild(g);var P=this.addUnitInput(s,"pt",20,41,function(){U.apply(this,arguments)});o.edges.length==l.getSelectionCount()?(t.appendChild(a),t.appendChild(h)):o.vertices.length==l.getSelectionCount()&&t.appendChild(s);var I=mxUtils.bind(this,function(t,e,n){function s(t,e,n,l){return null!=(n=n.getElementsByTagName("div")[0])&&(n.className=i.getCssClassForMarker(l,o.style.shape,t,e),"geSprite geSprite-noarrow"==n.className&&(n.innerHTML=mxUtils.htmlEntities(mxResources.get("none")),n.style.backgroundImage="none",n.style.verticalAlign="top",n.style.marginTop="5px",n.style.fontSize="10px",n.style.filter="none",n.style.color=this.defaultStrokeColor,n.nextSibling.style.marginTop="0px")),n}o=this.format.getSelectionState(),mxUtils.getValue(o.style,u,null),!n&&document.activeElement==x||(t=parseInt(mxUtils.getValue(o.style,mxConstants.STYLE_STROKEWIDTH,1)),x.value=isNaN(t)?"":t+" pt"),!n&&document.activeElement==y||(t=parseInt(mxUtils.getValue(o.style,mxConstants.STYLE_STROKEWIDTH,1)),y.value=isNaN(t)?"":t+" pt"),r.style.visibility="connector"==o.style.shape||"filledEdge"==o.style.shape?"":"hidden","1"==mxUtils.getValue(o.style,mxConstants.STYLE_CURVED,null)?r.value="curved":"1"==mxUtils.getValue(o.style,mxConstants.STYLE_ROUNDED,null)&&(r.value="rounded"),S.style.borderBottom="1"==mxUtils.getValue(o.style,mxConstants.STYLE_DASHED,null)?null==mxUtils.getValue(o.style,mxConstants.STYLE_DASH_PATTERN,null)?"1px dashed "+this.defaultStrokeColor:"1px dotted "+this.defaultStrokeColor:"1px solid "+this.defaultStrokeColor,w.style.borderBottom=S.style.borderBottom,null!=(t=b.getElementsByTagName("div")[0])&&(e=mxUtils.getValue(o.style,mxConstants.STYLE_EDGE,null),t.className="orthogonalEdgeStyle"==(e="1"==mxUtils.getValue(o.style,mxConstants.STYLE_NOEDGESTYLE,null)?null:e)&&"1"==mxUtils.getValue(o.style,mxConstants.STYLE_CURVED,null)?"geSprite geSprite-curved":"straight"==e||"none"==e||null==e?"geSprite geSprite-straight":"entityRelationEdgeStyle"==e?"geSprite geSprite-entity":"elbowEdgeStyle"==e?"geSprite "+("vertical"==mxUtils.getValue(o.style,mxConstants.STYLE_ELBOW,null)?"geSprite-verticalelbow":"geSprite-horizontalelbow"):"isometricEdgeStyle"==e?"geSprite "+("vertical"==mxUtils.getValue(o.style,mxConstants.STYLE_ELBOW,null)?"geSprite-verticalisometric":"geSprite-horizontalisometric"):"geSprite geSprite-orthogonal"),null!=(t=m.getElementsByTagName("div")[0])&&(t.className="link"==o.style.shape?"geSprite geSprite-linkedge":"flexArrow"==o.style.shape?"geSprite geSprite-arrow":"arrow"==o.style.shape?"geSprite geSprite-simplearrow":"geSprite geSprite-connection"),o.edges.length==l.getSelectionCount()?(p.style.display="",d.style.display="none"):(p.style.display="none",d.style.display=""),t=s(mxUtils.getValue(o.style,mxConstants.STYLE_STARTARROW,null),mxUtils.getValue(o.style,"startFill","1"),C,"start"),e=s(mxUtils.getValue(o.style,mxConstants.STYLE_ENDARROW,null),mxUtils.getValue(o.style,"endFill","1"),E,"end"),null!=t&&null!=e&&("arrow"==o.style.shape?(t.className="geSprite geSprite-noarrow",e.className="geSprite geSprite-endblocktrans"):"link"==o.style.shape&&(t.className="geSprite geSprite-noarrow",e.className="geSprite geSprite-noarrow")),mxUtils.setOpacity(b,"arrow"==o.style.shape?30:100),"connector"!=o.style.shape&&"flexArrow"!=o.style.shape&&"filledEdge"!=o.style.shape?(mxUtils.setOpacity(C,30),mxUtils.setOpacity(E,30)):(mxUtils.setOpacity(C,100),mxUtils.setOpacity(E,100)),!n&&document.activeElement==L||(t=parseInt(mxUtils.getValue(o.style,mxConstants.STYLE_STARTSIZE,mxConstants.DEFAULT_MARKERSIZE)),L.value=isNaN(t)?"":t+" pt"),!n&&document.activeElement==M||(t=parseInt(mxUtils.getValue(o.style,mxConstants.STYLE_SOURCE_PERIMETER_SPACING,0)),M.value=isNaN(t)?"":t+" pt"),!n&&document.activeElement==A||(t=parseInt(mxUtils.getValue(o.style,mxConstants.STYLE_ENDSIZE,mxConstants.DEFAULT_MARKERSIZE)),A.value=isNaN(t)?"":t+" pt"),!n&&document.activeElement==M||(t=parseInt(mxUtils.getValue(o.style,mxConstants.STYLE_TARGET_PERIMETER_SPACING,0)),T.value=isNaN(t)?"":t+" pt"),!n&&document.activeElement==P||(t=parseInt(mxUtils.getValue(o.style,mxConstants.STYLE_PERIMETER_SPACING,0)),P.value=isNaN(t)?"":t+" pt")}),R=this.installInputHandler(L,mxConstants.STYLE_STARTSIZE,mxConstants.DEFAULT_MARKERSIZE,0,999," pt"),O=this.installInputHandler(M,mxConstants.STYLE_SOURCE_PERIMETER_SPACING,0,-999,999," pt"),_=this.installInputHandler(A,mxConstants.STYLE_ENDSIZE,mxConstants.DEFAULT_MARKERSIZE,0,999," pt"),D=this.installInputHandler(T,mxConstants.STYLE_TARGET_PERIMETER_SPACING,0,-999,999," pt"),U=this.installInputHandler(P,mxConstants.STYLE_PERIMETER_SPACING,0,0,999," pt");return this.addKeyHandler(x,I),this.addKeyHandler(L,I),this.addKeyHandler(M,I),this.addKeyHandler(A,I),this.addKeyHandler(T,I),this.addKeyHandler(P,I),l.getModel().addListener(mxEvent.CHANGE,I),this.listeners.push({destroy:function(){l.getModel().removeListener(I)}}),I(),t},StyleFormatPanel.prototype.addLineJumps=function(t){var e=this.format.getSelectionState();if(Graph.lineJumpsEnabled&&0<e.edges.length&&0==e.vertices.length&&e.lineJumps){t.style.padding="8px 0px 24px 18px";var n=this.editorUi,i=n.editor.graph;(o=document.createElement("div")).style.position="absolute",o.style.fontWeight="bold",o.style.width="80px",mxUtils.write(o,mxResources.get("lineJumps")),t.appendChild(o);var l=document.createElement("select");l.style.position="absolute",l.style.marginTop="-2px",l.style.right="76px",l.style.width="62px";for(var o=["none","arc","gap","sharp"],s=0;s<o.length;s++){var r=document.createElement("option");r.setAttribute("value",o[s]),mxUtils.write(r,mxResources.get(o[s])),l.appendChild(r)}mxEvent.addListener(l,"change",function(t){i.getModel().beginUpdate();try{i.setCellStyles("jumpStyle",l.value,i.getSelectionCells()),n.fireEvent(new mxEventObject("styleChanged","keys",["jumpStyle"],"values",[l.value],"cells",i.getSelectionCells()))}finally{i.getModel().endUpdate()}mxEvent.consume(t)}),mxEvent.addListener(l,"click",function(t){mxEvent.consume(t)}),t.appendChild(l);var a=this.addUnitInput(t,"pt",22,33,function(){h.apply(this,arguments)}),h=this.installInputHandler(a,"jumpSize",Graph.defaultJumpSize,0,999," pt"),u=mxUtils.bind(this,function(t,n,i){e=this.format.getSelectionState(),l.value=mxUtils.getValue(e.style,"jumpStyle","none"),!i&&document.activeElement==a||(t=parseInt(mxUtils.getValue(e.style,"jumpSize",Graph.defaultJumpSize)),a.value=isNaN(t)?"":t+" pt")});this.addKeyHandler(a,u),i.getModel().addListener(mxEvent.CHANGE,u),this.listeners.push({destroy:function(){i.getModel().removeListener(u)}}),u()}else t.style.display="none";return t},StyleFormatPanel.prototype.addEffects=function(t){var e,n=this.editorUi.editor.graph;this.format.getSelectionState(),t.style.paddingTop="0px",t.style.paddingBottom="2px";var i=document.createElement("table");i.style.width="100%",i.style.fontWeight="bold",i.style.paddingRight="20px";var l=document.createElement("tbody"),o=document.createElement("tr");o.style.padding="0px";var s=document.createElement("td");s.style.padding="0px",s.style.width="50%",s.setAttribute("valign","top");var r=s.cloneNode(!0);r.style.paddingLeft="8px",o.appendChild(s),o.appendChild(r),l.appendChild(o),i.appendChild(l),t.appendChild(i);var a=s,h=mxUtils.bind(this,function(t,e,n){(t=this.createCellOption(t,e,n)).style.width="100%",a.appendChild(t),a=a==s?r:s}),u=mxUtils.bind(this,function(t,n,i){e=this.format.getSelectionState(),s.innerHTML="",r.innerHTML="",a=s,e.rounded&&h(mxResources.get("rounded"),mxConstants.STYLE_ROUNDED,0),"swimlane"==e.style.shape&&h(mxResources.get("divider"),"swimlaneLine",1),e.containsImage||h(mxResources.get("shadow"),mxConstants.STYLE_SHADOW,0),e.glass&&h(mxResources.get("glass"),mxConstants.STYLE_GLASS,0),e.comic&&h(mxResources.get("comic"),"comic",0),h(mxResources.get("sketch"),"sketch",0)});return n.getModel().addListener(mxEvent.CHANGE,u),this.listeners.push({destroy:function(){n.getModel().removeListener(u)}}),u(),t},StyleFormatPanel.prototype.addStyleOps=function(t){t.style.paddingTop="10px",t.style.paddingBottom="10px";var e=mxUtils.button(mxResources.get("setAsDefaultStyle"),mxUtils.bind(this,function(t){this.editorUi.actions.get("setAsDefaultStyle").funct()}));return e.setAttribute("title",mxResources.get("setAsDefaultStyle")+" ("+this.editorUi.actions.get("setAsDefaultStyle").shortcut+")"),e.style.width="188px",e.className="btn btn-secondary",t.appendChild(e),t},DiagramStylePanel=function(t,e,n){BaseFormatPanel.call(this,t,e,n),this.init()},mxUtils.extend(DiagramStylePanel,BaseFormatPanel),DiagramStylePanel.prototype.init=function(){this.container.appendChild(this.addView(this.createPanel()))},DiagramStylePanel.prototype.addView=function(t){var e=this.editorUi,n=e.editor.graph,i=n.getModel();t.style.whiteSpace="normal";var l="1"==n.currentVertexStyle.sketch&&"1"==n.currentEdgeStyle.sketch,o="1"==n.currentVertexStyle.rounded,s="1"==n.currentEdgeStyle.curved,r=document.createElement("div");r.style.paddingBottom="12px",r.style.marginRight="16px",t.style.paddingTop="8px";var a=document.createElement("table");a.style.width="100%",a.style.fontWeight="bold";var h=document.createElement("tbody"),u=document.createElement("tr");u.style.padding="0px";var d=document.createElement("td");d.style.padding="0px",d.style.width="50%",d.setAttribute("valign","middle");var c=d.cloneNode(!0);c.style.paddingLeft="8px",u.appendChild(d),u.appendChild(c),h.appendChild(u),a.appendChild(h),d.appendChild(this.createOption(mxResources.get("sketch"),function(){return l},function(t){(l=t)?(n.currentEdgeStyle.sketch="1",n.currentVertexStyle.sketch="1"):(delete n.currentEdgeStyle.sketch,delete n.currentVertexStyle.sketch),n.updateCellStyles("sketch",t?"1":null,n.getVerticesAndEdges())},null,function(t){t.style.width="auto"})),c.appendChild(this.createOption(mxResources.get("rounded"),function(){return o},function(t){(o=t)?n.currentVertexStyle.rounded="1":delete n.currentVertexStyle.rounded,n.updateCellStyles("rounded",t?"1":null,n.getVerticesAndEdges(!0,!0))},null,function(t){t.style.width="auto"})),d=d.cloneNode(!1),c=c.cloneNode(!1),(u=u.cloneNode(!1)).appendChild(d),u.appendChild(c),h.appendChild(u),d.appendChild(this.createOption(mxResources.get("curved"),function(){return s},function(t){(s=t)?n.currentEdgeStyle.curved="1":delete n.currentEdgeStyle.curved,n.updateCellStyles("curved",t?"1":null,n.getVerticesAndEdges(!1,!0))},null,function(t){t.style.width="auto"})),r.appendChild(a),t.appendChild(r);var p=["fillColor","strokeColor","fontColor","gradientColor"],m=mxUtils.bind(this,function(t,e){var l=n.getVerticesAndEdges();i.beginUpdate();try{for(var o=0;o<l.length;o++){var s=n.getCellStyle(l[o]);null!=s.labelBackgroundColor&&n.updateCellStyles("labelBackgroundColor",null!=e?e.background:null,[l[o]]);for(var r=i.isEdge(l[o]),a=i.getStyle(l[o]),h=r?n.currentEdgeStyle:n.currentVertexStyle,u=0;u<t.length;u++)(null!=s[t[u]]&&s[t[u]]!=mxConstants.NONE||t[u]!=mxConstants.STYLE_FILLCOLOR&&t[u]!=mxConstants.STYLE_STROKECOLOR)&&(a=mxUtils.setStyle(a,t[u],h[t[u]]));i.setStyle(l[o],a)}}finally{i.endUpdate()}}),g=mxUtils.bind(this,function(t,e,n){if(null!=t)for(var i=0;i<e.length;i++)(null!=t[e[i]]&&t[e[i]]!=mxConstants.NONE||e[i]!=mxConstants.STYLE_FILLCOLOR&&e[i]!=mxConstants.STYLE_STROKECOLOR)&&(t[e[i]]=n[e[i]])}),x=mxUtils.bind(this,function(t,e,i,l,o){if(null!=t)for(var s in null!=i&&null!=e.labelBackgroundColor&&(o=null!=o?o:n,null==(l=null==(l=null!=l?l.background:null)?o.background:l)&&(l=o.defaultPageBackgroundColor),e.labelBackgroundColor=l),t)(null==i||null!=e[s]&&e[s]!=mxConstants.NONE||s!=mxConstants.STYLE_FILLCOLOR&&s!=mxConstants.STYLE_STROKECOLOR)&&(e[s]=t[s])});(d=mxUtils.button(mxResources.get("reset"),mxUtils.bind(this,function(t){if(0<(t=n.getVerticesAndEdges(!0,!0)).length){i.beginUpdate();try{n.updateCellStyles("sketch",null,t),n.updateCellStyles("rounded",null,t),n.updateCellStyles("curved",null,n.getVerticesAndEdges(!1,!0))}finally{i.endUpdate()}}n.defaultVertexStyle=mxUtils.clone(e.initialDefaultVertexStyle),n.defaultEdgeStyle=mxUtils.clone(e.initialDefaultEdgeStyle),e.clearDefaultStyle()}))).setAttribute("title",mxResources.get("reset")),d.style.textOverflow="ellipsis",d.style.maxWidth="90px",c.appendChild(d);var y=mxUtils.bind(this,function(t,e,l,o,s){var r=document.createElement("div");r.style.cssText="position:absolute;display:inline-block;width:100%;height:100%;overflow:hidden;pointer-events:none;",s.appendChild(r);var a=new Graph(r,null,null,n.getStylesheet());a.resetViewOnRootChange=!1,a.foldingEnabled=!1,a.gridEnabled=!1,a.autoScroll=!1,a.setTooltips(!1),a.setConnectable(!1),a.setPanning(!1),a.setEnabled(!1),a.getCellStyle=function(s){var r=mxUtils.clone(Graph.prototype.getCellStyle.apply(this,arguments)),h=n.stylesheet.getDefaultVertexStyle(),u=e;return i.isEdge(s)&&(h=n.stylesheet.getDefaultEdgeStyle(),u=l),g(r,p,h),x(t,r,s,o,a),x(u,r,s,o,a),r},a.model.beginUpdate();try{var h=a.insertVertex(a.getDefaultParent(),null,"Shape",14,8,70,40,"strokeWidth=2;"),u=a.insertEdge(a.getDefaultParent(),null,"Connector",h,h,"edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;endSize=5;strokeWidth=2;");u.geometry.points=[new mxPoint(32,70)],u.geometry.offset=new mxPoint(0,8)}finally{a.model.endUpdate()}}),f=document.createElement("div");f.style.position="relative",t.appendChild(f),null==this.format.cachedStyleEntries&&(this.format.cachedStyleEntries=[]);var v=mxUtils.bind(this,function(t,r,a,h,u){var d=this.format.cachedStyleEntries[u];null==d&&((d=document.createElement("div")).style.cssText="display:inline-block;position:relative;width:96px;height:90px;cursor:pointer;border:1px solid gray;margin:2px;overflow:hidden;",null!=h&&null!=h.background&&(d.style.backgroundColor=h.background),y(t,r,a,h,d),mxEvent.addGestureListeners(d,mxUtils.bind(this,function(t){d.style.opacity=.5}),null,mxUtils.bind(this,function(u){d.style.opacity=1,n.defaultVertexStyle=mxUtils.clone(e.initialDefaultVertexStyle),n.defaultEdgeStyle=mxUtils.clone(e.initialDefaultEdgeStyle),x(t,n.defaultVertexStyle),x(t,n.defaultEdgeStyle),x(r,n.defaultVertexStyle),x(a,n.defaultEdgeStyle),e.clearDefaultStyle(),l?(n.currentEdgeStyle.sketch="1",n.currentVertexStyle.sketch="1"):(n.currentEdgeStyle.sketch="0",n.currentVertexStyle.sketch="0"),n.currentVertexStyle.rounded=o?"1":"0",n.currentEdgeStyle.rounded="1",n.currentEdgeStyle.curved=s?"1":"0",i.beginUpdate();try{m(p,h);var c=new ChangePageSetup(e,null!=h?h.background:null);c.ignoreImage=!0,i.execute(c),i.execute(new ChangeGridColor(e,null!=h&&null!=h.gridColor?h.gridColor:n.view.defaultGridColor))}finally{i.endUpdate()}})),mxEvent.addListener(d,"mouseenter",mxUtils.bind(this,function(e){var l=n.getCellStyle;e=n.background;var o=n.view.gridColor;n.background=null!=h?h.background:null,n.view.gridColor=null!=h&&null!=h.gridColor?h.gridColor:n.view.defaultGridColor,n.getCellStyle=function(e){var o=mxUtils.clone(l.apply(this,arguments)),s=n.stylesheet.getDefaultVertexStyle(),u=r;return i.isEdge(e)&&(s=n.stylesheet.getDefaultEdgeStyle(),u=a),g(o,p,s),x(t,o,e,h),x(u,o,e,h),o},n.refresh(),n.getCellStyle=l,n.background=e,n.view.gridColor=o})),mxEvent.addListener(d,"mouseleave",mxUtils.bind(this,function(t){n.refresh()})),mxClient.IS_IE||mxClient.IS_IE11||(this.format.cachedStyleEntries[u]=d)),f.appendChild(d)}),b=Math.ceil(Editor.styles.length/10);this.format.currentStylePage=null!=this.format.currentStylePage?this.format.currentStylePage:0;var C=[],E=mxUtils.bind(this,function(){0<C.length&&(C[this.format.currentStylePage].style.background="#84d7ff");for(var t=10*this.format.currentStylePage;t<Math.min(10*(this.format.currentStylePage+1),Editor.styles.length);t++){var e=Editor.styles[t];v(e.commonStyle,e.vertexStyle,e.edgeStyle,e.graph,t)}}),S=mxUtils.bind(this,function(t){0<=t&&t<b&&(C[this.format.currentStylePage].style.background="transparent",f.innerHTML="",this.format.currentStylePage=t,E())});if(1<b){for((r=document.createElement("div")).style.whiteSpace="nowrap",r.style.position="relative",r.style.textAlign="center",r.style.paddingTop="4px",r.style.width="210px",t.style.paddingBottom="8px",c=0;c<b;c++){var w=document.createElement("div");w.style.display="inline-block",w.style.width="6px",w.style.height="6px",w.style.marginLeft="4px",w.style.marginRight="3px",w.style.borderRadius="3px",w.style.cursor="pointer",w.style.background="transparent",w.style.border="1px solid #b5b6b7",mxUtils.bind(this,function(t,e){mxEvent.addListener(w,"click",mxUtils.bind(this,function(){S(t)}))})(c,w),r.appendChild(w),C.push(w)}t.appendChild(r),E(),b<15&&(a=function(t){mxEvent.addListener(t,"mouseenter",function(){t.style.opacity="1"}),mxEvent.addListener(t,"mouseleave",function(){t.style.opacity="0.5"})},(d=document.createElement("div")).style.cssText="position:absolute;left:0px;top:4px;bottom:0px;width:20px;margin:0px;opacity:0.5;background-repeat:no-repeat;background-position:center center;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAQBAMAAADQT4M0AAAAIVBMVEUAAAB2dnZ4eHh3d3d1dXVxcXF2dnZ2dnZ2dnZxcXF2dnYmb3w1AAAACnRSTlMAfCTkhhvb7cQSPH2JPgAAADRJREFUCNdjwACMAmBKaiGYs2oJmLPKAZ3DabU8AMRTXpUKopislqFyVzCAuUZgikkBZjoAcMYLnp53P/UAAAAASUVORK5CYII=);",mxEvent.addListener(d,"click",mxUtils.bind(this,function(){S(mxUtils.mod(this.format.currentStylePage-1,b))})),(c=document.createElement("div")).style.cssText="position:absolute;right:2px;top:4px;bottom:0px;width:20px;margin:0px;opacity:0.5;background-repeat:no-repeat;background-position:center center;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAQBAMAAADQT4M0AAAAIVBMVEUAAAB2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnYBuwCcAAAACnRSTlMAfCTkhhvb7cQSPH2JPgAAADZJREFUCNdjQAOMAmBKaiGY8loF5rKswsZlrVo8AUiFrTICcbIWK8A5DF1gDoMymMPApIAwHwCS0Qx/U7qCBQAAAABJRU5ErkJggg==);",r.appendChild(d),r.appendChild(c),mxEvent.addListener(c,"click",mxUtils.bind(this,function(){S(mxUtils.mod(this.format.currentStylePage+1,b))})),a(d),a(c))}else E();return t},DiagramFormatPanel=function(t,e,n){BaseFormatPanel.call(this,t,e,n),this.init()},mxUtils.extend(DiagramFormatPanel,BaseFormatPanel),DiagramFormatPanel.showPageView=!0,DiagramFormatPanel.prototype.showBackgroundImageOption=!0,DiagramFormatPanel.prototype.init=function(){var t=this.editorUi.editor.graph;this.container.appendChild(this.addView(this.createPanel())),t.isEnabled()&&(this.container.appendChild(this.addOptions(this.createPanel())),this.container.appendChild(this.addPaperSize(this.createPanel())),this.container.appendChild(this.addStyleOps(this.createPanel())))},DiagramFormatPanel.prototype.addView=function(t){var e,n,i=this.editorUi,l=i.editor.graph;return t.appendChild(this.createTitle(mxResources.get("view"))),this.addGridOption(t),DiagramFormatPanel.showPageView&&t.appendChild(this.createOption(mxResources.get("pageView"),function(){return l.pageVisible},function(t){i.actions.get("pageView").funct()},{install:function(t){this.listener=function(){t(l.pageVisible)},i.addListener("pageViewChanged",this.listener)},destroy:function(){i.removeListener(this.listener)}})),l.isEnabled()&&(e=this.createColorOption(mxResources.get("background"),function(){return l.background},function(t){(t=new ChangePageSetup(i,t)).ignoreImage=!0,l.model.execute(t)},"#ffffff",{install:function(t){this.listener=function(){t(l.background)},i.addListener("backgroundColorChanged",this.listener)},destroy:function(){i.removeListener(this.listener)}}),this.showBackgroundImageOption&&((n=mxUtils.button(mxResources.get("image"),function(t){i.showBackgroundImageDialog(null,i.editor.graph.backgroundImage),mxEvent.consume(t)})).style.position="absolute",n.className="geColorBtn",n.style.marginTop="-4px",n.style.paddingBottom=11==document.documentMode||mxClient.IS_MT?"0px":"2px",n.style.height="22px",n.style.right="72px",n.style.width="56px",e.appendChild(n)),t.appendChild(e)),t},DiagramFormatPanel.prototype.addOptions=function(t){var e=this.editorUi,n=e.editor.graph;return t.appendChild(this.createTitle(mxResources.get("options"))),n.isEnabled()&&(t.appendChild(this.createOption(mxResources.get("connectionArrows"),function(){return n.connectionArrowsEnabled},function(t){e.actions.get("connectionArrows").funct()},{install:function(t){this.listener=function(){t(n.connectionArrowsEnabled)},e.addListener("connectionArrowsChanged",this.listener)},destroy:function(){e.removeListener(this.listener)}})),t.appendChild(this.createOption(mxResources.get("connectionPoints"),function(){return n.connectionHandler.isEnabled()},function(t){e.actions.get("connectionPoints").funct()},{install:function(t){this.listener=function(){t(n.connectionHandler.isEnabled())},e.addListener("connectionPointsChanged",this.listener)},destroy:function(){e.removeListener(this.listener)}})),t.appendChild(this.createOption(mxResources.get("guides"),function(){return n.graphHandler.guidesEnabled},function(t){e.actions.get("guides").funct()},{install:function(t){this.listener=function(){t(n.graphHandler.guidesEnabled)},e.addListener("guidesEnabledChanged",this.listener)},destroy:function(){e.removeListener(this.listener)}}))),t},DiagramFormatPanel.prototype.addGridOption=function(t){function e(t){var e=(n.isFloatUnit()?parseFloat:parseInt)(o.value);(e=n.fromUnit(Math.max(n.inUnit(1),isNaN(e)?n.inUnit(10):e)))!=l.getGridSize()&&l.setGridSize(e),o.value=n.inUnit(e)+" "+n.getUnit(),mxEvent.consume(t)}var n=this,i=this.editorUi,l=i.editor.graph,o=document.createElement("input");o.style.position="absolute",o.style.textAlign="right",o.style.width="38px",o.value=this.inUnit(l.getGridSize())+" "+this.getUnit();var s,r=this.createStepper(o,e,this.getUnitStep(),null,null,null,this.isFloatUnit());o.style.display=l.isGridEnabled()?"":"none",r.style.display=o.style.display,mxEvent.addListener(o,"keydown",function(t){13==t.keyCode?(l.container.focus(),mxEvent.consume(t)):27==t.keyCode&&(o.value=l.getGridSize(),l.container.focus(),mxEvent.consume(t))}),mxEvent.addListener(o,"blur",e),mxEvent.addListener(o,"change",e),mxClient.IS_SVG?(o.style.marginTop="-2px",o.style.right="84px",r.style.marginTop=mxClient.IS_FF?"-16px":"-18px",r.style.right="72px",(s=this.createColorOption(mxResources.get("grid"),function(){var t=l.view.gridColor;return l.isGridEnabled()?t:null},function(t){var e=l.isGridEnabled();t==mxConstants.NONE?l.setGridEnabled(!1):(l.setGridEnabled(!0),i.setGridColor(t)),o.style.display=l.isGridEnabled()?"":"none",r.style.display=o.style.display,e!=l.isGridEnabled()&&i.fireEvent(new mxEventObject("gridEnabledChanged"))},Editor.isDarkMode()?l.view.defaultDarkGridColor:l.view.defaultGridColor,{install:function(t){this.listener=function(){t(l.isGridEnabled()?l.view.gridColor:null)},i.addListener("gridColorChanged",this.listener),i.addListener("gridEnabledChanged",this.listener)},destroy:function(){i.removeListener(this.listener)}})).appendChild(o),s.appendChild(r),t.appendChild(s)):(o.style.marginTop="2px",o.style.right="32px",r.style.marginTop="2px",r.style.right="20px",t.appendChild(o),t.appendChild(r),t.appendChild(this.createOption(mxResources.get("grid"),function(){return l.isGridEnabled()},function(t){l.setGridEnabled(t),l.isGridEnabled()&&(l.view.gridColor="#e0e0e0"),i.fireEvent(new mxEventObject("gridEnabledChanged"))},{install:function(t){this.listener=function(){o.style.display=l.isGridEnabled()?"":"none",r.style.display=o.style.display,t(l.isGridEnabled())},i.addListener("gridEnabledChanged",this.listener)},destroy:function(){i.removeListener(this.listener)}})))},DiagramFormatPanel.prototype.addDocumentProperties=function(t){return t.appendChild(this.createTitle(mxResources.get("options"))),t},DiagramFormatPanel.prototype.addPaperSize=function(t){var e=this.editorUi,n=e.editor.graph;t.appendChild(this.createTitle(mxResources.get("paperSize")));var i=PageSetupDialog.addPageFormatPanel(t,"formatpanel",n.pageFormat,function(t){null!=n.pageFormat&&n.pageFormat.width==t.width&&n.pageFormat.height==t.height||((t=new ChangePageSetup(e,null,null,t)).ignoreColor=!0,t.ignoreImage=!0,n.model.execute(t))});function l(){i.set(n.pageFormat)}return this.addKeyHandler(i.widthInput,function(){i.set(n.pageFormat)}),this.addKeyHandler(i.heightInput,function(){i.set(n.pageFormat)}),e.addListener("pageFormatChanged",l),this.listeners.push({destroy:function(){e.removeListener(l)}}),n.getModel().addListener(mxEvent.CHANGE,l),this.listeners.push({destroy:function(){n.getModel().removeListener(l)}}),t},DiagramFormatPanel.prototype.addStyleOps=function(t){var e=mxUtils.button(mxResources.get("editData"),mxUtils.bind(this,function(t){this.editorUi.actions.get("editData").funct()}));return e.setAttribute("title",mxResources.get("editData")+" ("+this.editorUi.actions.get("editData").shortcut+")"),e.style.width="188px",e.style.marginBottom="2px",e.className="btn btn-secondary",t.appendChild(e),mxUtils.br(t),(e=mxUtils.button(mxResources.get("clearDefaultStyle"),mxUtils.bind(this,function(t){this.editorUi.actions.get("clearDefaultStyle").funct()}))).setAttribute("title",mxResources.get("clearDefaultStyle")+" ("+this.editorUi.actions.get("clearDefaultStyle").shortcut+")"),e.style.width="188px",e.className="btn btn-secondary",t.appendChild(e),t},DiagramFormatPanel.prototype.destroy=function(){BaseFormatPanel.prototype.destroy.apply(this,arguments),this.gridEnabledListener&&(this.editorUi.removeListener(this.gridEnabledListener),this.gridEnabledListener=null)},"undefined"!=typeof html4&&(html4.ATTRIBS["a::target"]=0,html4.ATTRIBS["source::src"]=0,html4.ATTRIBS["video::src"]=0),Date.prototype.toISOString||function(){function t(t){return 1===(t=String(t)).length?"0"+t:t}Date.prototype.toISOString=function(){return this.getUTCFullYear()+"-"+t(this.getUTCMonth()+1)+"-"+t(this.getUTCDate())+"T"+t(this.getUTCHours())+":"+t(this.getUTCMinutes())+":"+t(this.getUTCSeconds())+"."+String((this.getUTCMilliseconds()/1e3).toFixed(3)).slice(2,5)+"Z"}}(),Date.now||(Date.now=function(){return(new Date).getTime()}),Uint8Array.from||(Uint8Array.from=function(){function t(t){return"function"==typeof t||"[object Function]"===e.call(t)}var e=Object.prototype.toString,n=Math.pow(2,53)-1;return function(e){var i=Object(e);if(null==e)throw new TypeError("Array.from requires an array-like object - not null or undefined");var l,o=1<arguments.length?arguments[1]:void 0;if(void 0!==o){if(!t(o))throw new TypeError("Array.from: when provided, the second argument must be a function");2<arguments.length&&(l=arguments[2])}var s=Number(i.length);s=isNaN(s)?0:0!==s&&isFinite(s)?(0<s?1:-1)*Math.floor(Math.abs(s)):s,s=Math.min(Math.max(s,0),n);for(var r,a=t(this)?Object(new this(s)):Array(s),h=0;h<s;)r=i[h],a[h]=o?void 0===l?o(r,h):o.call(l,r,h):r,h+=1;return a.length=s,a}}()),mxConstants.POINTS=1,mxConstants.MILLIMETERS=2,mxConstants.INCHES=3,mxConstants.PIXELS_PER_MM=3.937,mxConstants.PIXELS_PER_INCH=100,mxConstants.SHADOW_OPACITY=.25,mxConstants.SHADOWCOLOR="#000000",mxConstants.VML_SHADOWCOLOR="#d0d0d0",mxGraph.prototype.pageBreakColor="#c0c0c0",mxGraph.prototype.pageScale=1,function(){try{var t;null!=navigator&&null!=navigator.language&&(t=navigator.language.toLowerCase(),mxGraph.prototype.pageFormat="en-us"===t||"en-ca"===t||"es-mx"===t?mxConstants.PAGE_FORMAT_LETTER_PORTRAIT:mxConstants.PAGE_FORMAT_A4_PORTRAIT)}catch(t){}}(),mxText.prototype.baseSpacingTop=5,mxText.prototype.baseSpacingBottom=1,mxGraphModel.prototype.ignoreRelativeEdgeParent=!1,mxGraphView.prototype.gridImage=mxClient.IS_SVG?"data:image/gif;base64,R0lGODlhCgAKAJEAAAAAAP///8zMzP///yH5BAEAAAMALAAAAAAKAAoAAAIJ1I6py+0Po2wFADs=":IMAGE_PATH+"/grid.gif",mxGraphView.prototype.gridSteps=4,mxGraphView.prototype.minGridSize=4,mxGraphView.prototype.defaultGridColor="#d0d0d0",mxGraphView.prototype.defaultDarkGridColor="#6e6e6e",mxGraphView.prototype.gridColor=mxGraphView.prototype.defaultGridColor,mxGraphView.prototype.unit=mxConstants.POINTS,mxGraphView.prototype.setUnit=function(t){this.unit!=t&&(this.unit=t,this.fireEvent(new mxEventObject("unitChanged","unit",t)))},mxSvgCanvas2D.prototype.foAltText="[Not supported by viewer]",mxShape.prototype.getConstraints=function(t,e,n){return null},mxImageShape.prototype.getImageDataUri=function(){var t=this.image;return"data:image/svg+xml;base64,"==t.substring(0,26)&&null!=this.style&&"1"==mxUtils.getValue(this.style,"clipSvg","0")&&(null!=this.clippedSvg&&this.clippedImage==t||(this.clippedSvg=Graph.clipSvgDataUri(t),this.clippedImage=t),t=this.clippedSvg),t},Graph=function(t,e,n,i,l,o){var s,r,a,h,u,d,c,p,m,g,x,y,f,v,b,C,E,S,w,T,A,M;mxGraph.call(this,t,e,n,i),this.themes=l||this.defaultThemes,this.currentEdgeStyle=mxUtils.clone(this.defaultEdgeStyle),this.currentVertexStyle=mxUtils.clone(this.defaultVertexStyle),this.standalone=null!=o&&o,e=(t=this.baseUrl).indexOf("//"),this.domainPathUrl=this.domainUrl="",0<e&&(0<(e=t.indexOf("/",e+2))&&(this.domainUrl=t.substring(0,e)),0<(e=t.lastIndexOf("/"))&&(this.domainPathUrl=t.substring(0,e+1))),this.isHtmlLabel=function(t){return null!=(t=this.getCurrentCellStyle(t))&&("1"==t.html||"wrap"==t[mxConstants.STYLE_WHITE_SPACE])},this.edgeMode&&(h=a=r=s=null,u=!1,this.addListener(mxEvent.FIRE_MOUSE_EVENT,mxUtils.bind(this,function(t,e){if("mouseDown"==e.getProperty("eventName")&&this.isEnabled()){var n,i,l,o=(t=e.getProperty("event")).getState();if(!mxEvent.isAltDown(t.getEvent())&&null!=o)if(this.model.isEdge(o.cell))s=new mxPoint(t.getGraphX(),t.getGraphY()),u=this.isCellSelected(o.cell),r=t,null!=(a=o).text&&null!=o.text.boundingBox&&mxUtils.contains(o.text.boundingBox,t.getGraphX(),t.getGraphY())?h=mxEvent.LABEL_HANDLE:null!=(l=this.selectionCellsHandler.getHandler(o.cell))&&null!=l.bends&&0<l.bends.length&&(h=l.getHandleForEvent(t));else if(!(this.panningHandler.isActive()||mxEvent.isControlDown(t.getEvent())||null!=(l=this.selectionCellsHandler.getHandler(o.cell))&&null!=l.getHandleForEvent(t)))for((e=new mxRectangle(t.getGraphX()-1,t.getGraphY()-1)).grow(mxEvent.isTouchEvent(t.getEvent())?mxShape.prototype.svgStrokeTolerance-1:(mxShape.prototype.svgStrokeTolerance+1)/2),this.isTableCell(o.cell)&&!this.isCellSelected(o.cell)&&(n=this.model.getParent(o.cell),l=this.model.getParent(n),this.isCellSelected(l)||!(mxUtils.intersects(e,new mxRectangle(o.x,o.y-2,o.width,3))&&this.model.getChildAt(l,0)!=n||mxUtils.intersects(e,new mxRectangle(o.x,o.y+o.height-2,o.width,3))||mxUtils.intersects(e,new mxRectangle(o.x-2,o.y,2,o.height))&&this.model.getChildAt(n,0)!=o.cell||mxUtils.intersects(e,new mxRectangle(o.x+o.width-2,o.y,2,o.height)))||(n=this.selectionCellsHandler.isHandled(l),this.selectCellForEvent(l,t.getEvent()),null==(l=this.selectionCellsHandler.getHandler(l)))||null!=(i=l.getHandleForEvent(t))&&(l.start(t.getGraphX(),t.getGraphY(),i),l.blockDelayedSelection=!n,t.consume()));!t.isConsumed()&&null!=o&&(this.isTableCell(o.cell)||this.isTableRow(o.cell)||this.isTable(o.cell));)this.isSwimlane(o.cell)&&(l=this.getActualStartSize(o.cell),n=this.view.scale,(0<l.x||0<l.width)&&mxUtils.intersects(e,new mxRectangle(o.x+(l.x-l.width-1)*n+(0==l.x?o.width:0),o.y,1,o.height))||(0<l.y||0<l.height)&&mxUtils.intersects(e,new mxRectangle(o.x,o.y+(l.y-l.height-1)*n+(0==l.y?o.height:0),o.width,1)))&&(this.selectCellForEvent(o.cell,t.getEvent()),null!=(l=this.selectionCellsHandler.getHandler(o.cell))&&(i=mxEvent.CUSTOM_HANDLE-l.customHandles.length+1,l.start(t.getGraphX(),t.getGraphY(),i),t.consume())),o=this.view.getState(this.model.getParent(o.cell))}})),this.addMouseListener({mouseDown:function(t,e){},mouseMove:mxUtils.bind(this,function(t,e){for(var n in t=this.selectionCellsHandler.handlers.map)if(null!=t[n].index)return;if(this.isEnabled()&&!this.panningHandler.isActive()&&!mxEvent.isAltDown(e.getEvent()))if(t=this.tolerance,null!=s&&null!=a&&null!=r){var i,l,o;n=a,(Math.abs(s.x-e.getGraphX())>t||Math.abs(s.y-e.getGraphY())>t)&&(null!=(i=null==(i=this.selectionCellsHandler.getHandler(n.cell))&&this.model.isEdge(n.cell)?this.createHandler(n):i)&&null!=i.bends&&0<i.bends.length&&(t=i.getHandleForEvent(r),o=(l=this.view.getEdgeStyle(n))==mxEdgeStyle.EntityRelation,u||h!=mxEvent.LABEL_HANDLE||(t=h),o&&0!=t&&t!=i.bends.length-1&&t!=mxEvent.LABEL_HANDLE?!o||null==n.visibleSourceState&&null==n.visibleTargetState||(this.graphHandler.reset(),e.consume()):t!=mxEvent.LABEL_HANDLE&&0!=t&&null==n.visibleSourceState&&t!=i.bends.length-1&&null==n.visibleTargetState||(o||t==mxEvent.LABEL_HANDLE||(null==(o=n.absolutePoints)||(null!=l||null!=t)&&l!=mxEdgeStyle.OrthConnector||null==(t=h)&&((t=new mxRectangle(s.x,s.y)).grow(mxEdgeHandler.prototype.handleImage.width/2),t=mxUtils.contains(t,o[0].x,o[0].y)?0:mxUtils.contains(t,o[o.length-1].x,o[o.length-1].y)?i.bends.length-1:null!=l&&(2==o.length||3==o.length&&(0==Math.round(o[0].x-o[1].x)&&0==Math.round(o[1].x-o[2].x)||0==Math.round(o[0].y-o[1].y)&&0==Math.round(o[1].y-o[2].y)))?2:(t=mxUtils.findNearestSegment(n,s.x,s.y),null==l?mxEvent.VIRTUAL_HANDLE-t:t+1)),null==t&&(t=mxEvent.VIRTUAL_HANDLE)),i.start(e.getGraphX(),e.getGraphX(),t),e.consume(),this.graphHandler.reset())),null!=i&&(this.selectionCellsHandler.isHandlerActive(i)?this.isCellSelected(n.cell)||(this.selectionCellsHandler.handlers.put(n.cell,i),this.selectCellForEvent(n.cell,e.getEvent())):this.isCellSelected(n.cell)||i.destroy()),u=!1,s=r=a=h=null)}else if(null!=(n=e.getState())){if(i=null,this.model.isEdge(n.cell))(t=new mxRectangle(e.getGraphX(),e.getGraphY())).grow(mxEdgeHandler.prototype.handleImage.width/2),null!=(o=n.absolutePoints)&&(null!=n.text&&null!=n.text.boundingBox&&mxUtils.contains(n.text.boundingBox,e.getGraphX(),e.getGraphY())?i="move":mxUtils.contains(t,o[0].x,o[0].y)||mxUtils.contains(t,o[o.length-1].x,o[o.length-1].y)?i="pointer":null==n.visibleSourceState&&null==n.visibleTargetState||(i="crosshair",(t=this.view.getEdgeStyle(n))==mxEdgeStyle.EntityRelation||!this.isOrthogonal(n)||(e=mxUtils.findNearestSegment(n,e.getGraphX(),e.getGraphY()))<o.length-1&&0<=e&&(i=0==Math.round(o[e].x-o[e+1].x)?"col-resize":"row-resize")));else if(!mxEvent.isControlDown(e.getEvent()))for((t=new mxRectangle(e.getGraphX()-1,e.getGraphY()-1)).grow(mxShape.prototype.svgStrokeTolerance/2),this.isTableCell(n.cell)&&(e=this.model.getParent(n.cell),o=this.model.getParent(e),!this.isCellSelected(o))&&(mxUtils.intersects(t,new mxRectangle(n.x-2,n.y,2,n.height))&&this.model.getChildAt(e,0)!=n.cell||mxUtils.intersects(t,new mxRectangle(n.x+n.width-2,n.y,2,n.height))?i="col-resize":(mxUtils.intersects(t,new mxRectangle(n.x,n.y-2,n.width,3))&&this.model.getChildAt(o,0)!=e||mxUtils.intersects(t,new mxRectangle(n.x,n.y+n.height-2,n.width,3)))&&(i="row-resize")),e=n;null==i&&null!=e&&(this.isTableCell(e.cell)||this.isTableRow(e.cell)||this.isTable(e.cell));)this.isSwimlane(e.cell)&&(o=this.getActualStartSize(e.cell),l=this.view.scale,(0<o.x||0<o.width)&&mxUtils.intersects(t,new mxRectangle(e.x+(o.x-o.width-1)*l+(0==o.x?e.width*l:0),e.y,1,e.height))?i="col-resize":(0<o.y||0<o.height)&&mxUtils.intersects(t,new mxRectangle(e.x,e.y+(o.y-o.height-1)*l+(0==o.y?e.height:0),e.width,1))&&(i="row-resize")),e=this.view.getState(this.model.getParent(e.cell));null!=i&&n.setCursor(i)}}),mouseUp:mxUtils.bind(this,function(t,e){h=s=r=a=null})})),this.cellRenderer.getLabelValue=function(t){var e=mxCellRenderer.prototype.getLabelValue.apply(this,arguments);return t.view.graph.isHtmlLabel(t.cell)?1!=t.style.html?mxUtils.htmlEntities(e,!1):t.view.graph.sanitizeHtml(e):e},void 0!==mxVertexHandler&&(this.setConnectable(!0),this.setDropEnabled(!0),this.setPanning(!0),this.setTooltips(!0),this.setAllowLoops(!0),this.allowAutoPanning=!0,this.constrainChildren=this.resetEdgesOnConnect=!1,this.constrainRelativeChildren=!0,this.graphHandler.scrollOnMove=!1,this.graphHandler.scaleGrid=!0,this.connectionHandler.setCreateTarget(!1),this.connectionHandler.insertBeforeSource=!0,this.connectionHandler.isValidSource=function(t,e){return!1},this.alternateEdgeStyle="vertical",null==i&&this.loadStylesheet(),d=this.graphHandler.getGuideStates,this.graphHandler.getGuideStates=function(){var t=d.apply(this,arguments);if(this.graph.pageVisible){for(var e=[],n=(i=this.graph.pageFormat).width*(l=this.graph.pageScale),i=i.height*l,l=this.graph.view.translate,o=this.graph.view.scale,s=this.graph.getPageLayout(),r=0;r<s.width;r++)e.push(new mxRectangle(((s.x+r)*n+l.x)*o,(s.y*i+l.y)*o,n*o,i*o));for(r=1;r<s.height;r++)e.push(new mxRectangle((s.x*n+l.x)*o,((s.y+r)*i+l.y)*o,n*o,i*o));t=e.concat(t)}return t},mxDragSource.prototype.dragElementZIndex=mxPopupMenu.prototype.zIndex,mxGuide.prototype.getGuideColor=function(t,e){return null==t.cell?"#ffa500":mxConstants.GUIDE_COLOR},this.graphHandler.createPreviewShape=function(t){return this.previewColor="#000000"==this.graph.background?"#ffffff":mxGraphHandler.prototype.previewColor,mxGraphHandler.prototype.createPreviewShape.apply(this,arguments)},c=this.graphHandler.getCells,this.graphHandler.getCells=function(t){for(var e=c.apply(this,arguments),n=new mxDictionary,i=[],l=0;l<e.length;l++){var o=this.graph.isTableCell(t)&&this.graph.isTableCell(e[l])&&this.graph.isCellSelected(e[l])?this.graph.model.getParent(e[l]):this.graph.isTableRow(t)&&this.graph.isTableRow(e[l])&&this.graph.isCellSelected(e[l])?e[l]:this.graph.getCompositeParent(e[l]);null==o||n.get(o)||(n.put(o,!0),i.push(o))}return i},p=this.graphHandler.start,this.graphHandler.start=function(t,e,n,i){var l=!1;this.graph.isTableCell(t)&&(this.graph.isCellSelected(t)?l=!0:t=this.graph.model.getParent(t)),l||this.graph.isTableRow(t)&&this.graph.isCellSelected(t)||(t=this.graph.getCompositeParent(t)),p.apply(this,arguments)},this.connectionHandler.createTargetVertex=function(t,e){return e=this.graph.getCompositeParent(e),mxConnectionHandler.prototype.createTargetVertex.apply(this,arguments)},m=new mxRubberband(this),this.getRubberband=function(){return m},g=(new Date).getTime(),x=0,y=this.connectionHandler.mouseMove,this.connectionHandler.mouseMove=function(){var t=this.currentState;y.apply(this,arguments),x=t!=this.currentState?(g=(new Date).getTime(),0):(new Date).getTime()-g},f=this.connectionHandler.isOutlineConnectEvent,this.connectionHandler.isOutlineConnectEvent=function(t){return null!=this.currentState&&t.getState()==this.currentState&&2e3<x||(null==this.currentState||"0"!=mxUtils.getValue(this.currentState.style,"outlineConnect","1"))&&f.apply(this,arguments)},v=this.isToggleEvent,this.isToggleEvent=function(t){return v.apply(this,arguments)||!mxClient.IS_CHROMEOS&&mxEvent.isShiftDown(t)},b=m.isForceRubberbandEvent,m.isForceRubberbandEvent=function(t){return b.apply(this,arguments)&&!mxEvent.isShiftDown(t.getEvent())&&!mxEvent.isControlDown(t.getEvent())||mxClient.IS_CHROMEOS&&mxEvent.isShiftDown(t.getEvent())||mxUtils.hasScrollbars(this.graph.container)&&mxClient.IS_FF&&mxClient.IS_WIN&&null==t.getState()&&mxEvent.isTouchEvent(t.getEvent())},C=null,this.panningHandler.addListener(mxEvent.PAN_START,mxUtils.bind(this,function(){this.isEnabled()&&(C=this.container.style.cursor,this.container.style.cursor="move")})),this.panningHandler.addListener(mxEvent.PAN_END,mxUtils.bind(this,function(){this.isEnabled()&&(this.container.style.cursor=C)})),this.popupMenuHandler.autoExpand=!0,this.popupMenuHandler.isSelectOnPopup=function(t){return mxEvent.isMouseEvent(t.getEvent())},E=this.click,this.click=function(t){var e=null==t.state&&null!=t.sourceState&&this.isCellLocked(t.sourceState.cell);if(this.isEnabled()&&!e||t.isConsumed())return E.apply(this,arguments);var n=e?t.sourceState.cell:t.getCell();null==n||null!=(n=this.getClickableLinkForCell(n))&&(this.isCustomLink(n)?this.customLinkClicked(n):this.openLink(n)),this.isEnabled()&&e&&this.clearSelection()},this.tooltipHandler.getStateForEvent=function(t){return t.sourceState},S=this.tooltipHandler.show,this.tooltipHandler.show=function(){if(S.apply(this,arguments),null!=this.div)for(var t=this.div.getElementsByTagName("a"),e=0;e<t.length;e++)null!=t[e].getAttribute("href")&&null==t[e].getAttribute("target")&&t[e].setAttribute("target","_blank")},this.tooltipHandler.getStateForEvent=function(t){return t.sourceState},this.getCursorForMouseEvent=function(t){var e=null==t.state&&null!=t.sourceState&&this.isCellLocked(t.sourceState.cell);return this.getCursorForCell(e?t.sourceState.cell:t.getCell())},w=this.getCursorForCell,this.getCursorForCell=function(t){if(!this.isEnabled()||this.isCellLocked(t)){if(null!=this.getClickableLinkForCell(t))return"pointer";if(this.isCellLocked(t))return"default"}return w.apply(this,arguments)},this.selectRegion=function(t,e){return t=this.getCells(t.x,t.y,t.width,t.height,null,null,null,function(t){return"1"==mxUtils.getValue(t.style,"locked","0")},!0),this.selectCellsForEvent(t,e),t},T=this.graphHandler.shouldRemoveCellsFromParent,this.graphHandler.shouldRemoveCellsFromParent=function(t,e,n){return!this.graph.isCellSelected(t)&&T.apply(this,arguments)},this.isCellLocked=function(t){for(;null!=t;){if("1"==mxUtils.getValue(this.getCurrentCellStyle(t),"locked","0"))return!0;t=this.model.getParent(t)}return!1},A=null,this.addListener(mxEvent.FIRE_MOUSE_EVENT,mxUtils.bind(this,function(t,e){"mouseDown"==e.getProperty("eventName")&&(t=e.getProperty("event").getState(),A=null==t||this.isSelectionEmpty()||this.isCellSelected(t.cell)?null:this.getSelectionCells())})),this.addListener(mxEvent.TAP_AND_HOLD,mxUtils.bind(this,function(t,e){var n;mxEvent.isMultiTouchEvent(e)||(t=e.getProperty("event"),null==(n=e.getProperty("cell"))?(t=mxUtils.convertPoint(this.container,mxEvent.getClientX(t),mxEvent.getClientY(t)),m.start(t.x,t.y)):null!=A?this.addSelectionCells(A):1<this.getSelectionCount()&&this.isCellSelected(n)&&this.removeSelectionCell(n),A=null,e.consume())})),this.connectionHandler.selectCells=function(t,e){this.graph.setSelectionCell(e||t)},this.connectionHandler.constraintHandler.isStateIgnored=function(t,e){var n=t.view.graph;return e&&(n.isCellSelected(t.cell)||n.isTableRow(t.cell)&&n.selectionCellsHandler.isHandled(n.model.getParent(t.cell)))},this.selectionModel.addListener(mxEvent.CHANGE,mxUtils.bind(this,function(){var t=this.connectionHandler.constraintHandler;null!=t.currentFocus&&t.isStateIgnored(t.currentFocus,!0)&&(t.currentFocus=null,t.constraints=null,t.destroyIcons()),t.destroyFocusHighlight()})),Graph.touchStyle&&this.initTouch(),M=this.updateMouseEvent,this.updateMouseEvent=function(t){return null!=(t=M.apply(this,arguments)).state&&this.isCellLocked(t.getCell())&&(t.state=null),t}),this.currentTranslate=new mxPoint(0,0)},Graph.touchStyle=mxClient.IS_TOUCH||mxClient.IS_FF&&mxClient.IS_WIN||0<navigator.maxTouchPoints||0<navigator.msMaxTouchPoints||null==window.urlParams||"1"==urlParams.touch,Graph.fileSupport=null!=window.File&&null!=window.FileReader&&null!=window.FileList&&(null==window.urlParams||"0"!=urlParams.filesupport),Graph.translateDiagram="1"==urlParams["translate-diagram"],Graph.diagramLanguage=null!=urlParams["diagram-language"]?urlParams["diagram-language"]:mxClient.language,Graph.lineJumpsEnabled=!0,Graph.defaultJumpSize=6,Graph.minTableColumnWidth=20,Graph.minTableRowHeight=20,Graph.foreignObjectWarningText="Viewer does not support full SVG 1.1",Graph.foreignObjectWarningLink="https://www.diagrams.net/doc/faq/svg-export-text-problems",Graph.pasteStyles="rounded shadow dashed dashPattern fontFamily fontSource fontSize fontColor fontStyle align verticalAlign strokeColor strokeWidth fillColor gradientColor swimlaneFillColor textOpacity gradientDirection glass labelBackgroundColor labelBorderColor opacity spacing spacingTop spacingLeft spacingBottom spacingRight endFill endArrow endSize targetPerimeterSpacing startFill startArrow startSize sourcePerimeterSpacing arcSize comic sketch fillWeight hachureGap hachureAngle jiggle disableMultiStroke disableMultiStrokeFill fillStyle curveFitting simplification comicStyle".split(" "),Graph.createSvgImage=function(t,e,n,i,l){return n=unescape(encodeURIComponent('<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="'+t+'px" height="'+e+'px" '+(null!=i&&null!=l?'viewBox="0 0 '+i+" "+l+'" ':"")+'version="1.1">'+n+"</svg>")),new mxImage("data:image/svg+xml;base64,"+(window.btoa?btoa(n):Base64.encode(n,!0)),t,e)},Graph.zapGremlins=function(t){for(var e=0,n=[],i=0;i<t.length;i++){var l=t.charCodeAt(i);(32<=l||9==l||10==l||13==l)&&65535!=l&&65534!=l||(n.push(t.substring(e,i)),e=i+1)}return 0<e&&e<t.length&&n.push(t.substring(e)),0==n.length?t:n.join("")},Graph.stringToBytes=function(t){for(var e=Array(t.length),n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e},Graph.bytesToString=function(t){for(var e=Array(t.length),n=0;n<t.length;n++)e[n]=String.fromCharCode(t[n]);return e.join("")},Graph.base64EncodeUnicode=function(t){return btoa(encodeURIComponent(t).replace(/%([0-9A-F]{2})/g,function(t,e){return String.fromCharCode(parseInt(e,16))}))},Graph.base64DecodeUnicode=function(t){return decodeURIComponent(Array.prototype.map.call(atob(t),function(t){return"%"+("00"+t.charCodeAt(0).toString(16)).slice(-2)}).join(""))},Graph.compressNode=function(t,e){return t=mxUtils.getXml(t),Graph.compress(e?t:Graph.zapGremlins(t))},Graph.arrayBufferToString=function(t){for(var e="",n=(t=new Uint8Array(t)).byteLength,i=0;i<n;i++)e+=String.fromCharCode(t[i]);return e},Graph.stringToArrayBuffer=function(t){return Uint8Array.from(t,function(t){return t.charCodeAt(0)})},Graph.arrayBufferIndexOfString=function(t,e,n){var i=e.charCodeAt(0),l=1,o=-1;for(n=n||0;n<t.byteLength;n++)if(t[n]==i){o=n;break}for(n=o+1;-1<o&&n<t.byteLength&&n<o+e.length-1;n++){if(t[n]!=e.charCodeAt(l))return Graph.arrayBufferIndexOfString(t,e,o+1);l++}return l==e.length-1?o:-1},Graph.compress=function(t,e){return null==t||0==t.length||"undefined"==typeof pako?t:(t=e?pako.deflate(encodeURIComponent(t)):pako.deflateRaw(encodeURIComponent(t)),btoa(Graph.arrayBufferToString(new Uint8Array(t))))},Graph.decompress=function(t,e,n){return null==t||0==t.length||"undefined"==typeof pako?t:(t=Graph.stringToArrayBuffer(atob(t)),e=decodeURIComponent(e?pako.inflate(t,{to:"string"}):pako.inflateRaw(t,{to:"string"})),n?e:Graph.zapGremlins(e))},Graph.removePasteFormatting=function(t){for(;null!=t;)null!=t.firstChild&&Graph.removePasteFormatting(t.firstChild),t.nodeType==mxConstants.NODETYPE_ELEMENT&&null!=t.style&&(t.style.whiteSpace="","#000000"==t.style.color&&(t.style.color="")),t=t.nextSibling},Graph.sanitizeHtml=function(t,e){return html_sanitize(t,function(t){return null!=t&&"javascript:"!==t.toString().toLowerCase().substring(0,11)?t:null},function(t){return t})},Graph.sanitizeSvg=function(t){for(var e=t.getElementsByTagName("*"),n=0;n<e.length;n++)for(var i=0;i<e[n].attributes.length;i++){var l=e[n].attributes[i];2<l.name.length&&"on"==l.name.toLowerCase().substring(0,2)&&e[n].removeAttribute(l.name)}for(t=t.getElementsByTagName("script");0<t.length;)t[0].parentNode.removeChild(t[0])},Graph.clipSvgDataUri=function(t){if(!mxClient.IS_IE&&!mxClient.IS_IE11&&null!=t&&"data:image/svg+xml;base64,"==t.substring(0,26))try{var e=document.createElement("div");e.style.position="absolute",e.style.visibility="hidden";var n=decodeURIComponent(escape(atob(t.substring(26)))),i=n.indexOf("<svg");if(0<=i){e.innerHTML=n.substring(i),Graph.sanitizeSvg(e);var l=e.getElementsByTagName("svg");if(0<l.length){document.body.appendChild(e);try{var o=l[0].getBBox();0<o.width&&0<o.height&&(e.getElementsByTagName("svg")[0].setAttribute("viewBox",o.x+" "+o.y+" "+o.width+" "+o.height),e.getElementsByTagName("svg")[0].setAttribute("width",o.width),e.getElementsByTagName("svg")[0].setAttribute("height",o.height))}catch(t){}finally{document.body.removeChild(e)}t=Editor.createSvgDataUri(mxUtils.getXml(l[0]))}}}catch(t){}return t},Graph.stripQuotes=function(t){return null!=t&&'"'==(t='"'==(t="'"==(t="'"==t.charAt(0)?t.substring(1):t).charAt(t.length-1)?t.substring(0,t.length-1):t).charAt(0)?t.substring(1):t).charAt(t.length-1)&&(t=t.substring(0,t.length-1)),t},Graph.isLink=function(t){return null!=t&&Graph.linkPattern.test(t)},Graph.linkPattern=/^(https?:\/\/)?((([a-z\d]([a-z\d-]*[a-z\d])*)\.)+[a-z]{2,}|((\d{1,3}\.){3}\d{1,3}))(\:\d+)?(\/[-a-z\d%_.~+]*)*(\?[;&a-z\d%_.~+=-]*)?(\#[-a-z\d_]*)?$/i,mxUtils.extend(Graph,mxGraph),Graph.prototype.minFitScale=null,Graph.prototype.maxFitScale=null,Graph.prototype.linkPolicy="frame"==urlParams.target?"blank":urlParams.target||"auto",Graph.prototype.linkTarget="frame"==urlParams.target?"_self":"_blank",Graph.prototype.linkRelation="nofollow noopener noreferrer",Graph.prototype.defaultScrollbars=!mxClient.IS_IOS,Graph.prototype.defaultPageVisible=!0,Graph.prototype.defaultGridEnabled=!0,Graph.prototype.lightbox=!1,Graph.prototype.defaultPageBackgroundColor="#ffffff",Graph.prototype.defaultPageBorderColor="#ffffff",Graph.prototype.scrollTileSize=new mxRectangle(0,0,400,400),Graph.prototype.transparentBackground=!0,Graph.prototype.selectParentAfterDelete=!1,Graph.prototype.defaultEdgeLength=80,Graph.prototype.edgeMode=!1,Graph.prototype.connectionArrowsEnabled=!0,Graph.prototype.placeholderPattern=/%(date{.*}|[^%^{^}]+)%/g,Graph.prototype.absoluteUrlPattern=/^(?:[a-z]+:)?\/\//i,Graph.prototype.defaultThemeName="default",Graph.prototype.defaultThemes={},Graph.prototype.baseUrl=null!=urlParams.base?decodeURIComponent(urlParams.base):(window!=window.top?document.referrer:document.location.toString()).split("#")[0],Graph.prototype.editAfterInsert=!1,Graph.prototype.builtInProperties=["label","tooltip","placeholders","placeholder"],Graph.prototype.standalone=!1,Graph.prototype.enableFlowAnimation=!1,Graph.prototype.init=function(t){var e;mxGraph.prototype.init.apply(this,arguments),this.cellRenderer.initializeLabel=function(t,e){mxCellRenderer.prototype.initializeLabel.apply(this,arguments);var n=t.view.graph.tolerance,i=!0,l=null,o=mxUtils.bind(this,function(t){i=!0,l=new mxPoint(mxEvent.getClientX(t),mxEvent.getClientY(t))}),s=mxUtils.bind(this,function(t){i=i&&null!=l&&Math.abs(l.x-mxEvent.getClientX(t))<n&&Math.abs(l.y-mxEvent.getClientY(t))<n}),r=mxUtils.bind(this,function(n){if(i)for(var l=mxEvent.getSource(n);null!=l&&l!=e.node;){if("a"==l.nodeName.toLowerCase()){t.view.graph.labelLinkClicked(t,l,n);break}l=l.parentNode}});mxEvent.addGestureListeners(e.node,o,s,r),mxEvent.addListener(e.node,"click",function(t){mxEvent.consume(t)})},null!=this.tooltipHandler&&(e=this.tooltipHandler.init,this.tooltipHandler.init=function(){e.apply(this,arguments),null!=this.div&&mxEvent.addListener(this.div,"click",mxUtils.bind(this,function(t){var e=mxEvent.getSource(t);"A"!=e.nodeName||null!=(e=e.getAttribute("href"))&&this.graph.isCustomLink(e)&&(mxEvent.isTouchEvent(t)||!mxEvent.isPopupTrigger(t))&&this.graph.customLinkClicked(e)&&mxEvent.consume(t)}))}),this.addListener(mxEvent.SIZE,mxUtils.bind(this,function(t,e){null!=this.container&&this.flowAnimationStyle&&(t=this.flowAnimationStyle.getAttribute("id"),this.flowAnimationStyle.innerHTML=this.getFlowAnimationStyleCss(t))})),this.initLayoutManager()},function(){Graph.prototype.useCssTransforms=!1,Graph.prototype.currentScale=1,Graph.prototype.currentTranslate=new mxPoint(0,0),Graph.prototype.getVerticesAndEdges=function(t,e){t=null==t||t,e=null==e||e;var n=this.model;return n.filterDescendants(function(i){return t&&n.isVertex(i)||e&&n.isEdge(i)},n.getRoot())},Graph.prototype.getCommonStyle=function(t){for(var e={},n=0;n<t.length;n++){var i=this.view.getState(t[n]);this.mergeStyle(i.style,e,0==n)}return e},Graph.prototype.mergeStyle=function(t,e,n){if(null!=t){var i,l={};for(i in t){var o=t[i];null!=o&&(l[i]=!0,null==e[i]&&n?e[i]=o:e[i]!=o&&delete e[i])}for(i in e)l[i]||delete e[i]}},Graph.prototype.getStartEditingCell=function(t,e){if(e=this.getCellStyle(t),e=parseInt(mxUtils.getValue(e,mxConstants.STYLE_STARTSIZE,0)),this.isTable(t)&&(!this.isSwimlane(t)||0==e)&&""==this.getLabel(t)&&0<this.model.getChildCount(t)&&(t=this.model.getChildAt(t,0),e=this.getCellStyle(t),e=parseInt(mxUtils.getValue(e,mxConstants.STYLE_STARTSIZE,0))),this.isTableRow(t)&&(!this.isSwimlane(t)||0==e)&&""==this.getLabel(t)&&0<this.model.getChildCount(t))for(e=0;e<this.model.getChildCount(t);e++){var n=this.model.getChildAt(t,e);if(this.isCellEditable(n)){t=n;break}}return t},Graph.prototype.copyStyle=function(t){var e=null;if(null!=t){e=mxUtils.clone(this.getCurrentCellStyle(t)),t=null!=(t=this.model.getStyle(t))?t.split(";"):[];for(var n=0;n<t.length;n++){var i,l=t[n],o=l.indexOf("=");0<=o&&(i=l.substring(0,o),l=l.substring(o+1),null==e[i]&&l==mxConstants.NONE&&(e[i]=mxConstants.NONE))}}return e},Graph.prototype.pasteStyle=function(t,e,n){n=null!=n?n:Graph.pasteStyles,this.model.beginUpdate();try{for(var i=0;i<e.length;i++)for(var l=this.getCurrentCellStyle(e[i]),o=0;o<n.length;o++){var s=l[n[o]],r=t[n[o]];s==r||null==s&&r==mxConstants.NONE||this.setCellStyles(n[o],r,[e[i]])}}finally{this.model.endUpdate()}},Graph.prototype.isFastZoomEnabled=function(){return"nocss"!=urlParams.zoom&&!mxClient.NO_FO&&!mxClient.IS_EDGE&&!this.useCssTransforms&&this.isCssTransformsSupported()},Graph.prototype.isCssTransformsSupported=function(){return!(this.dialect!=mxConstants.DIALECT_SVG||mxClient.NO_FO||this.lightbox&&mxClient.IS_SF)},Graph.prototype.getCellAt=function(t,e,n,i,l,o){return this.useCssTransforms&&(t=t/this.currentScale-this.currentTranslate.x,e=e/this.currentScale-this.currentTranslate.y),this.getScaledCellAt.apply(this,arguments)},Graph.prototype.getScaledCellAt=function(t,e,n,i,l,o){if(i=null==i||i,l=null==l||l,null==n&&null==(n=this.getCurrentRoot())&&(n=this.getModel().getRoot()),null!=n)for(var s=this.model.getChildCount(n)-1;0<=s;s--){var r=this.model.getChildAt(n,s),a=this.getScaledCellAt(t,e,r,i,l,o);if(null!=a)return a;if(this.isCellVisible(r)&&(l&&this.model.isEdge(r)||i&&this.model.isVertex(r))&&null!=(a=this.view.getState(r))&&(null==o||!o(a,t,e))&&this.intersects(a,t,e))return r}return null},Graph.prototype.isRecursiveVertexResize=function(t){return!this.isSwimlane(t.cell)&&0<this.model.getChildCount(t.cell)&&!this.isCellCollapsed(t.cell)&&"1"==mxUtils.getValue(t.style,"recursiveResize","1")&&null==mxUtils.getValue(t.style,"childLayout",null)},Graph.prototype.isPart=function(t){return"1"==mxUtils.getValue(this.getCurrentCellStyle(t),"part","0")||this.isTableCell(t)||this.isTableRow(t)},Graph.prototype.getCompositeParent=function(t){for(;this.isPart(t);){var e=this.model.getParent(t);if(!this.model.isVertex(e))break;t=e}return t},Graph.prototype.filterSelectionCells=function(t){var e=this.getSelectionCells();if(null!=t){for(var n=[],i=0;i<e.length;i++)t(e[i])||n.push(e[i]);e=n}return e},mxCellHighlight.prototype.getStrokeWidth=function(t){return t=this.strokeWidth,this.graph.useCssTransforms&&(t/=this.graph.currentScale),t},mxGraphView.prototype.getGraphBounds=function(){var t,e,n=this.graphBounds;return this.graph.useCssTransforms&&(n=new mxRectangle((n.x+(t=this.graph.currentTranslate).x)*(e=this.graph.currentScale),(n.y+t.y)*e,n.width*e,n.height*e)),n},mxGraphView.prototype.viewStateChanged=function(){this.graph.useCssTransforms?this.validate():this.revalidate(),this.graph.sizeDidChange()};var t=mxGraphView.prototype.validate;mxGraphView.prototype.validate=function(e){this.graph.useCssTransforms&&(this.graph.currentScale=this.scale,this.graph.currentTranslate.x=this.translate.x,this.graph.currentTranslate.y=this.translate.y,this.scale=1,this.translate.x=0,this.translate.y=0),t.apply(this,arguments),this.graph.useCssTransforms&&(this.graph.updateCssTransform(),this.scale=this.graph.currentScale,this.translate.x=this.graph.currentTranslate.x,this.translate.y=this.graph.currentTranslate.y)};var e=mxGraph.prototype.getCellsForGroup;Graph.prototype.getCellsForGroup=function(t){t=e.apply(this,arguments);for(var n=[],i=0;i<t.length;i++)this.isTableRow(t[i])||this.isTableCell(t[i])||n.push(t[i]);return n};var n=mxGraph.prototype.getCellsForUngroup;Graph.prototype.getCellsForUngroup=function(t){t=n.apply(this,arguments);for(var e=[],i=0;i<t.length;i++)this.isTable(t[i])||this.isTableRow(t[i])||this.isTableCell(t[i])||e.push(t[i]);return e},Graph.prototype.updateCssTransform=function(){var t=this.view.getDrawPane();if(null!=t)if(t=t.parentNode,this.useCssTransforms){var e=t.getAttribute("transform");t.setAttribute("transformOrigin","0 0");var n,i=Math.round(100*this.currentScale)/100;if(t.setAttribute("transform","scale("+i+","+i+")translate("+Math.round(100*this.currentTranslate.x)/100+","+Math.round(100*this.currentTranslate.y)/100+")"),e!=t.getAttribute("transform"))try{mxClient.IS_EDGE&&(n=t.style.display,t.style.display="none",t.getBBox(),t.style.display=n)}catch(t){}}else t.removeAttribute("transformOrigin"),t.removeAttribute("transform")};var i=mxGraphView.prototype.validateBackgroundPage;mxGraphView.prototype.validateBackgroundPage=function(){var t=this.graph.useCssTransforms,e=this.scale,n=this.translate;t&&(this.scale=this.graph.currentScale,this.translate=this.graph.currentTranslate),i.apply(this,arguments),t&&(this.scale=e,this.translate=n)};var l=mxGraph.prototype.updatePageBreaks;mxGraph.prototype.updatePageBreaks=function(t,e,n){var i=this.useCssTransforms,o=this.view.scale,s=this.view.translate;i&&(this.view.scale=1,this.view.translate=new mxPoint(0,0),this.useCssTransforms=!1),l.apply(this,arguments),i&&(this.view.scale=o,this.view.translate=s,this.useCssTransforms=!0)}}(),Graph.prototype.isLightboxView=function(){return this.lightbox},Graph.prototype.isViewer=function(){return!1},Graph.prototype.labelLinkClicked=function(t,e,n){null!=(e=e.getAttribute("href"))&&!this.isCustomLink(e)&&(mxEvent.isLeftMouseButton(n)&&!mxEvent.isPopupTrigger(n)||mxEvent.isTouchEvent(n))&&(this.isEnabled()&&!this.isCellLocked(t.cell)||(t=this.isBlankLink(e)?this.linkTarget:"_top",this.openLink(this.getAbsoluteUrl(e),t)),mxEvent.consume(n))},Graph.prototype.openLink=function(t,e,n){var i,l=window;try{"_self"==e&&window!=window.top?window.location.href=t:t.substring(0,this.baseUrl.length)==this.baseUrl&&"#"==t.charAt(this.baseUrl.length)&&"_top"==e&&window==window.top?(i=t.split("#")[1],window.location.hash=="#"+i&&(window.location.hash=""),window.location.hash=i):null==(l=window.open(t,null!=e?e:"_blank"))||n||(l.opener=null)}catch(t){}return l},Graph.prototype.getLinkTitle=function(t){return t.substring(t.lastIndexOf("/")+1)},Graph.prototype.isCustomLink=function(t){return"data:"==t.substring(0,5)},Graph.prototype.customLinkClicked=function(t){return!1},Graph.prototype.isExternalProtocol=function(t){return"mailto:"===t.substring(0,7)},Graph.prototype.isBlankLink=function(t){return!this.isExternalProtocol(t)&&("blank"===this.linkPolicy||"self"!==this.linkPolicy&&!this.isRelativeUrl(t)&&t.substring(0,this.domainUrl.length)!==this.domainUrl)},Graph.prototype.isRelativeUrl=function(t){return null!=t&&!this.absoluteUrlPattern.test(t)&&"data:"!==t.substring(0,5)&&!this.isExternalProtocol(t)},Graph.prototype.getAbsoluteUrl=function(t){return null!=t&&this.isRelativeUrl(t)?"#"==t.charAt(0)?this.baseUrl+t:"/"==t.charAt(0)?this.domainUrl+t:this.domainPathUrl+t:t},Graph.prototype.initLayoutManager=function(){this.layoutManager=new mxLayoutManager(this),this.layoutManager.hasLayout=function(t,e){return null!=this.graph.getCellStyle(t).childLayout},this.layoutManager.getLayout=function(t,e){var n=this.graph.model.getParent(t);if(e!=mxEvent.BEGIN_UPDATE||this.hasLayout(n,e)){if("stackLayout"==(t=this.graph.getCellStyle(t)).childLayout)return(e=new mxStackLayout(this.graph,!0)).resizeParentMax="1"==mxUtils.getValue(t,"resizeParentMax","1"),e.horizontal="1"==mxUtils.getValue(t,"horizontalStack","1"),e.resizeParent="1"==mxUtils.getValue(t,"resizeParent","1"),e.resizeLast="1"==mxUtils.getValue(t,"resizeLast","0"),e.spacing=t.stackSpacing||e.spacing,e.border=t.stackBorder||e.border,e.marginLeft=t.marginLeft||0,e.marginRight=t.marginRight||0,e.marginTop=t.marginTop||0,e.marginBottom=t.marginBottom||0,e.allowGaps=t.allowGaps||0,e.fill=!0,e.allowGaps&&(e.gridSize=parseFloat(mxUtils.getValue(t,"stackUnitSize",20))),e;if("treeLayout"==t.childLayout)return(e=new mxCompactTreeLayout(this.graph)).horizontal="1"==mxUtils.getValue(t,"horizontalTree","1"),e.resizeParent="1"==mxUtils.getValue(t,"resizeParent","1"),e.groupPadding=mxUtils.getValue(t,"parentPadding",20),e.levelDistance=mxUtils.getValue(t,"treeLevelDistance",30),e.maintainParentLocation=!0,e.edgeRouting=!1,e.resetEdges=!1,e;if("flowLayout"==t.childLayout)return(e=new mxHierarchicalLayout(this.graph,mxUtils.getValue(t,"flowOrientation",mxConstants.DIRECTION_EAST))).resizeParent="1"==mxUtils.getValue(t,"resizeParent","1"),e.parentBorder=mxUtils.getValue(t,"parentPadding",20),e.maintainParentLocation=!0,e.intraCellSpacing=mxUtils.getValue(t,"intraCellSpacing",mxHierarchicalLayout.prototype.intraCellSpacing),e.interRankCellSpacing=mxUtils.getValue(t,"interRankCellSpacing",mxHierarchicalLayout.prototype.interRankCellSpacing),e.interHierarchySpacing=mxUtils.getValue(t,"interHierarchySpacing",mxHierarchicalLayout.prototype.interHierarchySpacing),e.parallelEdgeSpacing=mxUtils.getValue(t,"parallelEdgeSpacing",mxHierarchicalLayout.prototype.parallelEdgeSpacing),e;if("circleLayout"==t.childLayout)return new mxCircleLayout(this.graph);if("organicLayout"==t.childLayout)return new mxFastOrganicLayout(this.graph);if("tableLayout"==t.childLayout)return new TableLayout(this.graph)}return null}},Graph.prototype.getPageSize=function(){return this.pageVisible?new mxRectangle(0,0,this.pageFormat.width*this.pageScale,this.pageFormat.height*this.pageScale):this.scrollTileSize},Graph.prototype.getPageLayout=function(){var t=this.getPageSize(),e=this.getGraphBounds();if(0==e.width||0==e.height)return new mxRectangle(0,0,1,1);var n=Math.floor(Math.ceil(e.x/this.view.scale-this.view.translate.x)/t.width),i=Math.floor(Math.ceil(e.y/this.view.scale-this.view.translate.y)/t.height);return new mxRectangle(n,i,Math.ceil((Math.floor((e.x+e.width)/this.view.scale)-this.view.translate.x)/t.width)-n,Math.ceil((Math.floor((e.y+e.height)/this.view.scale)-this.view.translate.y)/t.height)-i)},Graph.prototype.sanitizeHtml=function(t,e){return Graph.sanitizeHtml(t,e)},Graph.prototype.updatePlaceholders=function(){var t,e=!1;for(t in this.model.cells){var n=this.model.cells[t];this.isReplacePlaceholders(n)&&(this.view.invalidate(n,!1,!1),e=!0)}e&&this.view.validate()},Graph.prototype.isReplacePlaceholders=function(t){return null!=t.value&&"object"==typeof t.value&&"1"==t.value.getAttribute("placeholders")},Graph.prototype.isZoomWheelEvent=function(t){return mxEvent.isAltDown(t)||mxEvent.isControlDown(t)},Graph.prototype.isScrollWheelEvent=function(t){return!this.isZoomWheelEvent(t)},Graph.prototype.isTransparentClickEvent=function(t){return mxEvent.isAltDown(t)||mxClient.IS_CHROMEOS&&mxEvent.isShiftDown(t)},Graph.prototype.isIgnoreTerminalEvent=function(t){return mxEvent.isShiftDown(t)&&(mxEvent.isControlDown(t)||mxClient.IS_MAC&&mxEvent.isMetaDown(t))},Graph.prototype.isEdgeIgnored=function(t){var e=!1;return null!=t&&(t=this.getCurrentCellStyle(t),e="1"==mxUtils.getValue(t,"ignoreEdge","0")),e},Graph.prototype.isSplitTarget=function(t,e,n){return!this.model.isEdge(e[0])&&!mxEvent.isAltDown(n)&&!mxEvent.isShiftDown(n)&&mxGraph.prototype.isSplitTarget.apply(this,arguments)},Graph.prototype.getLabel=function(t){var e=mxGraph.prototype.getLabel.apply(this,arguments);return null!=e&&this.isReplacePlaceholders(t)&&null==t.getAttribute("placeholder")?this.replacePlaceholders(t,e):e},Graph.prototype.isLabelMovable=function(t){var e=this.getCurrentCellStyle(t);return!this.isCellLocked(t)&&(this.model.isEdge(t)&&this.edgeLabelsMovable||this.model.isVertex(t)&&(this.vertexLabelsMovable||"1"==mxUtils.getValue(e,"labelMovable","0")))},Graph.prototype.setGridSize=function(t){this.gridSize=t,this.fireEvent(new mxEventObject("gridSizeChanged"))},Graph.prototype.setDefaultParent=function(t){this.defaultParent=t,this.fireEvent(new mxEventObject("defaultParentChanged"))},Graph.prototype.getClickableLinkForCell=function(t){do{var e=this.getLinkForCell(t);if(null!=e)return e}while(null!=(t=this.model.getParent(t)));return null},Graph.prototype.getGlobalVariable=function(t){var e=null;return"date"==t?e=(new Date).toLocaleDateString():"time"==t?e=(new Date).toLocaleTimeString():"timestamp"==t?e=(new Date).toLocaleString():"date{"==t.substring(0,5)&&(t=t.substring(5,t.length-1),e=this.formatDate(new Date,t)),e},Graph.prototype.formatDate=function(t,e,n){function i(t,e){for(t=String(t),e=e||2;t.length<e;)t="0"+t;return t}null==this.dateFormatCache&&(this.dateFormatCache={i18n:{dayNames:"Sun Mon Tue Wed Thu Fri Sat Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),monthNames:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec January February March April May June July August September October November December".split(" ")},masks:{default:"ddd mmm dd yyyy HH:MM:ss",shortDate:"m/d/yy",mediumDate:"mmm d, yyyy",longDate:"mmmm d, yyyy",fullDate:"dddd, mmmm d, yyyy",shortTime:"h:MM TT",mediumTime:"h:MM:ss TT",longTime:"h:MM:ss TT Z",isoDate:"yyyy-mm-dd",isoTime:"HH:MM:ss",isoDateTime:"yyyy-mm-dd'T'HH:MM:ss",isoUtcDateTime:"UTC:yyyy-mm-dd'T'HH:MM:ss'Z'"}});var l=this.dateFormatCache;if(1!=arguments.length||"[object String]"!=Object.prototype.toString.call(t)||/\d/.test(t)||(e=t,t=void 0),t=t?new Date(t):new Date,isNaN(t))throw SyntaxError("invalid date");"UTC:"==(e=String(l.masks[e]||e||l.masks.default)).slice(0,4)&&(e=e.slice(4),n=!0);var o=t[(c=n?"getUTC":"get")+"Date"](),s=t[c+"Day"](),r=t[c+"Month"](),a=t[c+"FullYear"](),h=t[c+"Hours"](),u=t[c+"Minutes"](),d=t[c+"Seconds"](),c=t[c+"Milliseconds"](),p=n?0:t.getTimezoneOffset(),m={d:o,dd:i(o),ddd:l.i18n.dayNames[s],dddd:l.i18n.dayNames[s+7],m:r+1,mm:i(r+1),mmm:l.i18n.monthNames[r],mmmm:l.i18n.monthNames[r+12],yy:String(a).slice(2),yyyy:a,h:h%12||12,hh:i(h%12||12),H:h,HH:i(h),M:u,MM:i(u),s:d,ss:i(d),l:i(c,3),L:i(99<c?Math.round(c/10):c),t:h<12?"a":"p",tt:h<12?"am":"pm",T:h<12?"A":"P",TT:h<12?"AM":"PM",Z:n?"UTC":(String(t).match(/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g)||[""]).pop().replace(/[^-+\dA-Z]/g,""),o:(0<p?"-":"+")+i(100*Math.floor(Math.abs(p)/60)+Math.abs(p)%60,4),S:["th","st","nd","rd"][3<o%10?0:(10!=o%100-o%10)*o%10]};return e.replace(/d{1,4}|m{1,4}|yy(?:yy)?|([HhMsTt])\1?|[LloSZ]|"[^"]*"|'[^']*'/g,function(t){return t in m?m[t]:t.slice(1,t.length-1)})},Graph.prototype.createLayersDialog=function(t){var e=document.createElement("div");e.style.position="absolute";for(var n=this.getModel(),i=n.getChildCount(n.root),l=0;l<i;l++)mxUtils.bind(this,function(i){var l=document.createElement("div");l.style.overflow="hidden",l.style.textOverflow="ellipsis",l.style.padding="2px",l.style.whiteSpace="nowrap";var o=document.createElement("input");o.style.display="inline-block",o.setAttribute("type","checkbox"),n.isVisible(i)&&(o.setAttribute("checked","checked"),o.defaultChecked=!0),l.appendChild(o);var s=this.convertValueToString(i)||mxResources.get("background")||"Background";l.setAttribute("title",s),mxUtils.write(l,s),e.appendChild(l),mxEvent.addListener(o,"click",function(){null!=o.getAttribute("checked")?o.removeAttribute("checked"):o.setAttribute("checked","checked"),n.setVisible(i,o.checked),null!=t&&t(i)})})(n.getChildAt(n.root,l));return e},Graph.prototype.replacePlaceholders=function(t,e,n,i){if(i=[],null!=e){for(var l=0;match=this.placeholderPattern.exec(e);){var o=match[0];if(2<o.length&&"%label%"!=o&&"%tooltip%"!=o){var s=null;if(match.index>l&&"%"==e.charAt(match.index-1))s=o.substring(1);else{var r=o.substring(1,o.length-1);if("id"==r)s=t.id;else if(r.indexOf("{")<0)for(var a=t;null==s&&null!=a;)null!=a.value&&"object"==typeof a.value&&null==(s=Graph.translateDiagram&&null!=Graph.diagramLanguage?a.getAttribute(r+"_"+Graph.diagramLanguage):s)&&(s=a.hasAttribute(r)?null!=a.getAttribute(r)?a.getAttribute(r):"":null),a=this.model.getParent(a);null==(s=null==s?this.getGlobalVariable(r):s)&&null!=n&&(s=n[r])}i.push(e.substring(l,match.index)+(null!=s?s:o)),l=match.index+o.length}}i.push(e.substring(l))}return i.join("")},Graph.prototype.restoreSelection=function(t){if(null!=t&&0<t.length){for(var e=[],n=0;n<t.length;n++){var i=this.model.getCell(t[n].id);null!=i&&e.push(i)}this.setSelectionCells(e)}else this.clearSelection()},Graph.prototype.selectCellsForConnectVertex=function(t,e,n){2==t.length&&this.model.isVertex(t[1])?(this.setSelectionCell(t[1]),this.scrollCellToVisible(t[1]),null!=n&&(mxEvent.isTouchEvent(e)?n.update(n.getState(this.view.getState(t[1]))):n.reset())):this.setSelectionCells(t)},Graph.prototype.isCloneConnectSource=function(t){var e=null;return null!=this.layoutManager&&(e=this.layoutManager.getLayout(this.model.getParent(t))),this.isTableRow(t)||this.isTableCell(t)||null!=e&&e.constructor==mxStackLayout},Graph.prototype.connectVertex=function(t,e,n,i,l,o,s,r){if(o=o||!1,t.geometry.relative&&this.model.isEdge(t.parent))return[];for(;t.geometry.relative&&this.model.isVertex(t.parent);)t=t.parent;var a=this.isCloneConnectSource(t),h=a?t:this.getCompositeParent(t),u=t.geometry.relative&&null!=t.parent.geometry?new mxPoint(t.parent.geometry.width*t.geometry.x,t.parent.geometry.height*t.geometry.y):new mxPoint(h.geometry.x,h.geometry.y);e==mxConstants.DIRECTION_NORTH?(u.x+=h.geometry.width/2,u.y-=n):e==mxConstants.DIRECTION_SOUTH?(u.x+=h.geometry.width/2,u.y+=h.geometry.height+n):(u.x=e==mxConstants.DIRECTION_WEST?u.x-n:u.x+(h.geometry.width+n),u.y+=h.geometry.height/2);var d=this.view.getState(this.model.getParent(t)),c=(h=(c=this.view.translate).x*(n=this.view.scale),c.y*n);null!=d&&this.model.isVertex(d.cell)&&(h=d.x,c=d.y),this.model.isVertex(t.parent)&&t.geometry.relative&&(u.x+=t.parent.geometry.x,u.y+=t.parent.geometry.y);var p=null!=(o=null!=(o=o?null:new mxRectangle(h+u.x*n,c+u.y*n).grow(40))?this.getCells(0,0,0,0,null,null,o):null)&&0<o.length?o.reverse()[0]:null,m=!1;for(null!=p&&this.model.isAncestor(p,t)&&(m=!0,p=null),null==p&&null!=(o=this.getSwimlaneAt(h+u.x*n,c+u.y*n))&&(m=!1,p=o),o=p;null!=o;){if(this.isCellLocked(o)){p=null;break}o=this.model.getParent(o)}null!=p&&(o=this.view.getState(t),d=this.view.getState(p),null!=o&&null!=d&&mxUtils.intersects(o,d)&&(p=null));var g=!mxEvent.isShiftDown(i)||mxEvent.isControlDown(i)||l;g&&("1"!=urlParams.sketch||l)&&(e==mxConstants.DIRECTION_NORTH?u.y-=t.geometry.height/2:e==mxConstants.DIRECTION_SOUTH?u.y+=t.geometry.height/2:u.x=e==mxConstants.DIRECTION_WEST?u.x-t.geometry.width/2:u.x+t.geometry.width/2),null==p||this.isCellConnectable(p)||this.isSwimlane(p)||(l=this.getModel().getParent(p),this.getModel().isVertex(l)&&this.isCellConnectable(l)&&(p=l)),p!=t&&!this.model.isEdge(p)&&(this.isCellConnectable(p)||this.isSwimlane(p))||(p=null);var x=[],y=null!=p&&this.isSwimlane(p),f=y?null:p;if(l=mxUtils.bind(this,function(n){if(null==s||null!=n||null==p&&a){this.model.beginUpdate();try{if(null==f&&g){for(var l=null!=n?n:t,o=this.getCellGeometry(l);null!=o&&o.relative;)l=this.getModel().getParent(l),o=this.getCellGeometry(l);l=a?t:this.getCompositeParent(l),f=null!=n?n:this.duplicateCells([l],!1)[0],null!=n&&this.addCells([f],this.model.getParent(t),null,null,null,!0),null!=(o=this.getCellGeometry(f))&&(null!=n&&"1"==urlParams.sketch&&(e==mxConstants.DIRECTION_NORTH?u.y-=o.height/2:e==mxConstants.DIRECTION_SOUTH?u.y+=o.height/2:u.x=e==mxConstants.DIRECTION_WEST?u.x-o.width/2:u.x+o.width/2),o.x=u.x-o.width/2,o.y=u.y-o.height/2),y?(this.addCells([f],p,null,null,null,!0),p=null):!g||null!=p||m||a||this.addCells([f],this.getDefaultParent(),null,null,null,!0)}var h=mxEvent.isControlDown(i)&&mxEvent.isShiftDown(i)&&g||null==p&&a?null:this.insertEdge(this.model.getParent(t),null,"",t,f,this.createCurrentEdgeStyle());if(null!=h&&this.connectionHandler.insertBeforeSource){var d=null;for(n=t;null!=n.parent&&null!=n.geometry&&n.geometry.relative&&n.parent!=h.parent;)n=this.model.getParent(n);null!=n&&null!=n.parent&&n.parent==h.parent&&(d=n.parent.getIndex(n),this.model.add(n.parent,h,d))}null==p&&null!=f&&null!=t.parent&&a&&e==mxConstants.DIRECTION_WEST&&(d=t.parent.getIndex(t),this.model.add(t.parent,f,d)),null!=h&&x.push(h),null==p&&null!=f&&x.push(f),null==f&&null!=h&&h.geometry.setTerminalPoint(u,!1),null!=h&&this.fireEvent(new mxEventObject("cellsInserted","cells",[h]))}finally{this.model.endUpdate()}}if(null==r)return x;r(x)}),null==s||null!=f||!g||null==p&&a)return l(f);s(h+u.x*n,c+u.y*n,l)},Graph.prototype.getIndexableText=function(){var t,e=document.createElement("div"),n=[];for(t in this.model.cells){var i=this.model.cells[t];(this.model.isVertex(i)||this.model.isEdge(i))&&(i=this.isHtmlLabel(i)?(e.innerHTML=this.sanitizeHtml(this.getLabel(i)),mxUtils.extractTextWithWhitespace([e])):this.getLabel(i),0<(i=mxUtils.trim(i.replace(/[\x00-\x1F\x7F-\x9F]|\s+/g," "))).length&&n.push(i))}return n.join(" ")},Graph.prototype.convertValueToString=function(t){if(null==(n=this.model.getValue(t))||"object"!=typeof n)return mxGraph.prototype.convertValueToString.apply(this,arguments);var e=null;if(this.isReplacePlaceholders(t)&&null!=t.getAttribute("placeholder"))for(var n=t.getAttribute("placeholder"),i=t;null==e&&null!=i;)null!=i.value&&"object"==typeof i.value&&(e=i.hasAttribute(n)?null!=i.getAttribute(n)?i.getAttribute(n):"":null),i=this.model.getParent(i);else(e=null)==(e=Graph.translateDiagram&&null!=Graph.diagramLanguage?n.getAttribute("label_"+Graph.diagramLanguage):e)&&(e=n.getAttribute("label")||"");return e||""},Graph.prototype.getLinksForState=function(t){return null!=t&&null!=t.text&&null!=t.text.node?t.text.node.getElementsByTagName("a"):null},Graph.prototype.getLinkForCell=function(t){return null!=t.value&&"object"==typeof t.value?t=null!=(t=t.value.getAttribute("link"))&&"javascript:"===t.toLowerCase().substring(0,11)?t.substring(11):t:null},Graph.prototype.getLinkTargetForCell=function(t){return null!=t.value&&"object"==typeof t.value?t.value.getAttribute("linkTarget"):null},Graph.prototype.getCellStyle=function(t){var e,n=mxGraph.prototype.getCellStyle.apply(this,arguments);return null!=t&&null!=this.layoutManager&&(e=this.model.getParent(t),this.model.isVertex(e)&&this.isCellCollapsed(t)&&null!=(e=this.layoutManager.getLayout(e))&&e.constructor==mxStackLayout&&(n[mxConstants.STYLE_HORIZONTAL]=!e.horizontal)),n},Graph.prototype.updateAlternateBounds=function(t,e,n){var i;null==t||null==e||null==this.layoutManager||null==e.alternateBounds||null!=(i=this.layoutManager.getLayout(this.model.getParent(t)))&&i.constructor==mxStackLayout&&(i.horizontal?e.alternateBounds.height=0:e.alternateBounds.width=0),mxGraph.prototype.updateAlternateBounds.apply(this,arguments)},Graph.prototype.isMoveCellsEvent=function(t,e){return mxEvent.isShiftDown(t)||"1"==mxUtils.getValue(e.style,"moveCells","0")},Graph.prototype.foldCells=function(t,e,n,i,l){if(e=null!=e&&e,null!=(n=null==n?this.getFoldableCells(this.getSelectionCells(),t):n)){this.model.beginUpdate();try{if(mxGraph.prototype.foldCells.apply(this,arguments),null!=this.layoutManager)for(var o=0;o<n.length;o++){var s,r,a,h,u=this.view.getState(n[o]),d=this.getCellGeometry(n[o]);null!=u&&null!=d&&(s=Math.round(d.width-u.width/this.view.scale),0==(r=Math.round(d.height-u.height/this.view.scale))&&0==s||(a=this.model.getParent(n[o]),null==(h=this.layoutManager.getLayout(a))?null!=l&&this.isMoveCellsEvent(l,u)&&this.moveSiblings(u,a,s,r):null!=l&&mxEvent.isAltDown(l)||h.constructor!=mxStackLayout||h.resizeLast||this.resizeParentStacks(a,h,s,r)))}}finally{this.model.endUpdate()}this.isEnabled()&&this.setSelectionCells(n)}},Graph.prototype.moveSiblings=function(t,e,n,i){this.model.beginUpdate();try{var l,o,s=this.getCellsBeyond(t.x,t.y,e,!0,!0);for(e=0;e<s.length;e++)s[e]!=t.cell&&(l=this.view.getState(s[e]),o=this.getCellGeometry(s[e]),null!=l&&null!=o&&((o=o.clone()).translate(Math.round(n*Math.max(0,Math.min(1,(l.x-t.x)/t.width))),Math.round(i*Math.max(0,Math.min(1,(l.y-t.y)/t.height)))),this.model.setGeometry(s[e],o)))}finally{this.model.endUpdate()}},Graph.prototype.resizeParentStacks=function(t,e,n,i){if(null!=this.layoutManager&&null!=e&&e.constructor==mxStackLayout&&!e.resizeLast){this.model.beginUpdate();try{for(var l=e.horizontal;null!=t&&null!=e&&e.constructor==mxStackLayout&&e.horizontal==l&&!e.resizeLast;){var o=this.getCellGeometry(t),s=this.view.getState(t);null!=s&&null!=o&&(o=o.clone(),e.horizontal?o.width+=n+Math.min(0,s.width/this.view.scale-o.width):o.height+=i+Math.min(0,s.height/this.view.scale-o.height),this.model.setGeometry(t,o)),t=this.model.getParent(t),e=this.layoutManager.getLayout(t)}}finally{this.model.endUpdate()}}},Graph.prototype.isContainer=function(t){var e=this.getCurrentCellStyle(t);return this.isSwimlane(t)?"0"!=e.container:"1"==e.container},Graph.prototype.isCellConnectable=function(t){var e=this.getCurrentCellStyle(t);return null!=e.connectable?"0"!=e.connectable:mxGraph.prototype.isCellConnectable.apply(this,arguments)},Graph.prototype.isLabelMovable=function(t){var e=this.getCurrentCellStyle(t);return null!=e.movableLabel?"0"!=e.movableLabel:mxGraph.prototype.isLabelMovable.apply(this,arguments)},Graph.prototype.selectAll=function(t){t=t||this.getDefaultParent(),this.isCellLocked(t)||mxGraph.prototype.selectAll.apply(this,arguments)},Graph.prototype.selectCells=function(t,e,n){n=n||this.getDefaultParent(),this.isCellLocked(n)||mxGraph.prototype.selectCells.apply(this,arguments)},Graph.prototype.getSwimlaneAt=function(t,e,n){var i=mxGraph.prototype.getSwimlaneAt.apply(this,arguments);return this.isCellLocked(i)?null:i},Graph.prototype.isCellFoldable=function(t){var e=this.getCurrentCellStyle(t);return this.foldingEnabled&&("1"==e.treeFolding||!this.isCellLocked(t)&&(this.isContainer(t)&&"0"!=e.collapsible||!this.isContainer(t)&&"1"==e.collapsible))},Graph.prototype.reset=function(){this.isEditing()&&this.stopEditing(!0),this.escape(),this.isSelectionEmpty()||this.clearSelection()},Graph.prototype.zoom=function(t,e){t=Math.max(.01,Math.min(this.view.scale*t,160))/this.view.scale,mxGraph.prototype.zoom.apply(this,arguments)},Graph.prototype.zoomIn=function(){this.zoom(this.view.scale<.15?(this.view.scale+.01)/this.view.scale:Math.round(this.view.scale*this.zoomFactor*20)/20/this.view.scale)},Graph.prototype.zoomOut=function(){this.zoom(this.view.scale<=.15?(this.view.scale-.01)/this.view.scale:Math.round(1/this.zoomFactor*this.view.scale*20)/20/this.view.scale)},Graph.prototype.fitWindow=function(t,e){var n,i=this.container.clientWidth-(e=null!=e?e:10),l=this.container.clientHeight-e,o=Math.floor(20*Math.min(i/t.width,l/t.height))/20;this.zoomTo(o),mxUtils.hasScrollbars(this.container)&&(this.container.scrollTop=(t.y+(n=this.view.translate).y)*o-Math.max((l-t.height*o)/2+e/2,0),this.container.scrollLeft=(t.x+n.x)*o-Math.max((i-t.width*o)/2+e/2,0))},Graph.prototype.getTooltipForCell=function(t){var e="";if(mxUtils.isNode(t.value)){var n=null;if(null!=(n=null==(n=Graph.translateDiagram&&null!=Graph.diagramLanguage?t.value.getAttribute("tooltip_"+Graph.diagramLanguage):n)?t.value.getAttribute("tooltip"):n))this.isReplacePlaceholders(t)&&(n=this.replacePlaceholders(t,n)),e=this.sanitizeHtml(n);else{n=this.builtInProperties,t=t.value.attributes;var i=[];this.isEnabled()&&(n.push("linkTarget"),n.push("link"));for(var l=0;l<t.length;l++)mxUtils.indexOf(n,t[l].nodeName)<0&&0<t[l].nodeValue.length&&i.push({name:t[l].nodeName,value:t[l].nodeValue});for(i.sort(function(t,e){return t.name<e.name?-1:t.name>e.name?1:0}),l=0;l<i.length;l++)"link"==i[l].name&&this.isCustomLink(i[l].value)||(e+=("link"!=i[l].name?"<b>"+i[l].name+":</b> ":"")+mxUtils.htmlEntities(i[l].value)+"\n");0<e.length&&(e=e.substring(0,e.length-1),mxClient.IS_SVG&&(e='<div style="max-width:360px;text-overflow:ellipsis;overflow:hidden;">'+e+"</div>"))}}return e},Graph.prototype.getFlowAnimationStyle=function(){var t,e=document.getElementsByTagName("head")[0];return null!=e&&null==this.flowAnimationStyle&&(this.flowAnimationStyle=document.createElement("style"),this.flowAnimationStyle.setAttribute("id","geEditorFlowAnimation-"+Editor.guid()),this.flowAnimationStyle.type="text/css",t=this.flowAnimationStyle.getAttribute("id"),this.flowAnimationStyle.innerHTML=this.getFlowAnimationStyleCss(t),e.appendChild(this.flowAnimationStyle)),this.flowAnimationStyle},Graph.prototype.getFlowAnimationStyleCss=function(t){return"."+t+" {\nanimation: "+t+" 0.5s linear;\nanimation-iteration-count: infinite;\n}\n@keyframes "+t+" {\nto {\nstroke-dashoffset: "+-16*this.view.scale+";\n}\n}"},Graph.prototype.stringToBytes=function(t){return Graph.stringToBytes(t)},Graph.prototype.bytesToString=function(t){return Graph.bytesToString(t)},Graph.prototype.compressNode=function(t){return Graph.compressNode(t)},Graph.prototype.compress=function(t,e){return Graph.compress(t,e)},Graph.prototype.decompress=function(t,e){return Graph.decompress(t,e)},Graph.prototype.zapGremlins=function(t){return Graph.zapGremlins(t)},HoverIcons=function(t){this.graph=t,this.init()},HoverIcons.prototype.arrowSpacing=2,HoverIcons.prototype.updateDelay=500,HoverIcons.prototype.activationDelay=140,HoverIcons.prototype.currentState=null,HoverIcons.prototype.activeArrow=null,HoverIcons.prototype.inactiveOpacity=15,HoverIcons.prototype.cssCursor="copy",HoverIcons.prototype.checkCollisions=!0,HoverIcons.prototype.arrowFill="#29b6f2",HoverIcons.prototype.triangleUp=mxClient.IS_SVG?Graph.createSvgImage(18,28,'<path d="m 6 26 L 12 26 L 12 12 L 18 12 L 9 1 L 1 12 L 6 12 z" stroke="#fff" fill="'+HoverIcons.prototype.arrowFill+'"/>'):new mxImage(IMAGE_PATH+"/triangle-up.png",26,14),HoverIcons.prototype.triangleRight=mxClient.IS_SVG?Graph.createSvgImage(26,18,'<path d="m 1 6 L 14 6 L 14 1 L 26 9 L 14 18 L 14 12 L 1 12 z" stroke="#fff" fill="'+HoverIcons.prototype.arrowFill+'"/>'):new mxImage(IMAGE_PATH+"/triangle-right.png",14,26),HoverIcons.prototype.triangleDown=mxClient.IS_SVG?Graph.createSvgImage(18,26,'<path d="m 6 1 L 6 14 L 1 14 L 9 26 L 18 14 L 12 14 L 12 1 z" stroke="#fff" fill="'+HoverIcons.prototype.arrowFill+'"/>'):new mxImage(IMAGE_PATH+"/triangle-down.png",26,14),HoverIcons.prototype.triangleLeft=mxClient.IS_SVG?Graph.createSvgImage(28,18,'<path d="m 1 9 L 12 1 L 12 6 L 26 6 L 26 12 L 12 12 L 12 18 z" stroke="#fff" fill="'+HoverIcons.prototype.arrowFill+'"/>'):new mxImage(IMAGE_PATH+"/triangle-left.png",14,26),HoverIcons.prototype.roundDrop=mxClient.IS_SVG?Graph.createSvgImage(26,26,'<circle cx="13" cy="13" r="12" stroke="#fff" fill="'+HoverIcons.prototype.arrowFill+'"/>'):new mxImage(IMAGE_PATH+"/round-drop.png",26,26),HoverIcons.prototype.refreshTarget=new mxImage(mxClient.IS_SVG?"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyNCAyNCIgd2lkdGg9IjM2cHgiIGhlaWdodD0iMzZweCI+PGVsbGlwc2UgZmlsbD0iIzI5YjZmMiIgY3g9IjEyIiBjeT0iMTIiIHJ4PSIxMiIgcnk9IjEyIi8+PHBhdGggdHJhbnNmb3JtPSJzY2FsZSgwLjgpIHRyYW5zbGF0ZSgyLjQsIDIuNCkiIHN0cm9rZT0iI2ZmZiIgZmlsbD0iI2ZmZiIgZD0iTTEyIDZ2M2w0LTQtNC00djNjLTQuNDIgMC04IDMuNTgtOCA4IDAgMS41Ny40NiAzLjAzIDEuMjQgNC4yNkw2LjcgMTQuOGMtLjQ1LS44My0uNy0xLjc5LS43LTIuOCAwLTMuMzEgMi42OS02IDYtNnptNi43NiAxLjc0TDE3LjMgOS4yYy40NC44NC43IDEuNzkuNyAyLjggMCAzLjMxLTIuNjkgNi02IDZ2LTNsLTQgNCA0IDR2LTNjNC40MiAwIDgtMy41OCA4LTggMC0xLjU3LS40Ni0zLjAzLTEuMjQtNC4yNnoiLz48cGF0aCBkPSJNMCAwaDI0djI0SDB6IiBmaWxsPSJub25lIi8+PC9zdmc+Cg==":IMAGE_PATH+"/refresh.png",38,38),HoverIcons.prototype.tolerance=mxClient.IS_TOUCH?6:0,HoverIcons.prototype.init=function(){this.arrowUp=this.createArrow(this.triangleUp,mxResources.get("plusTooltip")),this.arrowRight=this.createArrow(this.triangleRight,mxResources.get("plusTooltip")),this.arrowDown=this.createArrow(this.triangleDown,mxResources.get("plusTooltip")),this.arrowLeft=this.createArrow(this.triangleLeft,mxResources.get("plusTooltip")),this.elts=[this.arrowUp,this.arrowRight,this.arrowDown,this.arrowLeft],this.resetHandler=mxUtils.bind(this,function(){this.reset()}),this.repaintHandler=mxUtils.bind(this,function(){this.repaint()}),this.graph.selectionModel.addListener(mxEvent.CHANGE,this.resetHandler),this.graph.model.addListener(mxEvent.CHANGE,this.repaintHandler),this.graph.view.addListener(mxEvent.SCALE_AND_TRANSLATE,this.repaintHandler),this.graph.view.addListener(mxEvent.TRANSLATE,this.repaintHandler),this.graph.view.addListener(mxEvent.SCALE,this.repaintHandler),this.graph.view.addListener(mxEvent.DOWN,this.repaintHandler),this.graph.view.addListener(mxEvent.UP,this.repaintHandler),this.graph.addListener(mxEvent.ROOT,this.repaintHandler),this.graph.addListener(mxEvent.ESCAPE,this.resetHandler),mxEvent.addListener(this.graph.container,"scroll",this.resetHandler),this.graph.addListener(mxEvent.ESCAPE,mxUtils.bind(this,function(){this.mouseDownPoint=null})),mxEvent.addListener(this.graph.container,"mouseleave",mxUtils.bind(this,function(t){null!=t.relatedTarget&&mxEvent.getSource(t)==this.graph.container&&this.setDisplay("none")})),this.graph.addListener(mxEvent.START_EDITING,mxUtils.bind(this,function(t){this.reset()}));var t=this.graph.click;this.graph.click=mxUtils.bind(this,function(e){t.apply(this.graph,arguments),null==this.currentState||this.graph.isCellSelected(this.currentState.cell)||!mxEvent.isTouchEvent(e.getEvent())||this.graph.model.isVertex(e.getCell())||this.reset()});var e=!1;this.graph.addMouseListener({mouseDown:mxUtils.bind(this,function(t,n){e=!1,t=n.getEvent(),this.isResetEvent(t)?this.reset():this.isActive()||null==(n=this.getState(n.getState()))&&mxEvent.isTouchEvent(t)||this.update(n),this.setDisplay("none")}),mouseMove:mxUtils.bind(this,function(t,n){t=n.getEvent(),this.isResetEvent(t)?this.reset():this.graph.isMouseDown||mxEvent.isTouchEvent(t)||this.update(this.getState(n.getState()),n.getGraphX(),n.getGraphY()),null!=this.graph.connectionHandler&&null!=this.graph.connectionHandler.shape&&(e=!0)}),mouseUp:mxUtils.bind(this,function(t,n){t=n.getEvent(),mxUtils.convertPoint(this.graph.container,mxEvent.getClientX(t),mxEvent.getClientY(t)),this.isResetEvent(t)?this.reset():this.isActive()&&!e&&null!=this.mouseDownPoint?this.click(this.currentState,this.getDirection(),n):this.isActive()?1==this.graph.getSelectionCount()&&this.graph.model.isEdge(this.graph.getSelectionCell())?this.reset():this.update(this.getState(this.graph.view.getState(this.graph.getCellAt(n.getGraphX(),n.getGraphY())))):mxEvent.isTouchEvent(t)||null!=this.bbox&&mxUtils.contains(this.bbox,n.getGraphX(),n.getGraphY())?(this.setDisplay(""),this.repaint()):mxEvent.isTouchEvent(t)||this.reset(),e=!1,this.resetActiveArrow()})})},HoverIcons.prototype.isResetEvent=function(t,e){return mxEvent.isAltDown(t)||null==this.activeArrow&&mxEvent.isShiftDown(t)||mxEvent.isPopupTrigger(t)&&!this.graph.isCloneEvent(t)},HoverIcons.prototype.createArrow=function(t,e){var n=null;return(n=mxUtils.createImage(t.src)).style.width=t.width+"px",n.style.height=t.height+"px",n.style.padding=this.tolerance+"px",null!=e&&n.setAttribute("title",e),n.style.position="absolute",n.style.cursor=this.cssCursor,mxEvent.addGestureListeners(n,mxUtils.bind(this,function(t){null==this.currentState||this.isResetEvent(t)||(this.mouseDownPoint=mxUtils.convertPoint(this.graph.container,mxEvent.getClientX(t),mxEvent.getClientY(t)),this.drag(t,this.mouseDownPoint.x,this.mouseDownPoint.y),this.activeArrow=n,this.setDisplay("none"),mxEvent.consume(t))})),mxEvent.redirectMouseEvents(n,this.graph,this.currentState),mxEvent.addListener(n,"mouseenter",mxUtils.bind(this,function(t){mxEvent.isMouseEvent(t)&&(null!=this.activeArrow&&this.activeArrow!=n&&mxUtils.setOpacity(this.activeArrow,this.inactiveOpacity),this.graph.connectionHandler.constraintHandler.reset(),mxUtils.setOpacity(n,100),this.activeArrow=n)})),mxEvent.addListener(n,"mouseleave",mxUtils.bind(this,function(t){this.graph.isMouseDown||this.resetActiveArrow()})),n},HoverIcons.prototype.resetActiveArrow=function(){null!=this.activeArrow&&(mxUtils.setOpacity(this.activeArrow,this.inactiveOpacity),this.activeArrow=null)},HoverIcons.prototype.getDirection=function(){var t=mxConstants.DIRECTION_EAST;return this.activeArrow==this.arrowUp?t=mxConstants.DIRECTION_NORTH:this.activeArrow==this.arrowDown?t=mxConstants.DIRECTION_SOUTH:this.activeArrow==this.arrowLeft&&(t=mxConstants.DIRECTION_WEST),t},HoverIcons.prototype.visitNodes=function(t){for(var e=0;e<this.elts.length;e++)null!=this.elts[e]&&t(this.elts[e])},HoverIcons.prototype.removeNodes=function(){this.visitNodes(function(t){null!=t.parentNode&&t.parentNode.removeChild(t)})},HoverIcons.prototype.setDisplay=function(t){this.visitNodes(function(e){e.style.display=t})},HoverIcons.prototype.isActive=function(){return null!=this.activeArrow&&null!=this.currentState},HoverIcons.prototype.drag=function(t,e,n){this.graph.popupMenuHandler.hideMenu(),this.graph.stopEditing(!1),null!=this.currentState&&(this.graph.connectionHandler.start(this.currentState,e,n),this.graph.isMouseTrigger=mxEvent.isMouseEvent(t),this.graph.isMouseDown=!0,null!=(e=this.graph.selectionCellsHandler.getHandler(this.currentState.cell))&&e.setHandlesVisible(!1),e=this.graph.connectionHandler.edgeState,null!=t&&mxEvent.isShiftDown(t)&&mxEvent.isControlDown(t)&&null!=e&&"orthogonalEdgeStyle"===mxUtils.getValue(e.style,mxConstants.STYLE_EDGE,null)&&(t=this.getDirection(),e.cell.style=mxUtils.setStyle(e.cell.style,"sourcePortConstraint",t),e.style.sourcePortConstraint=t))},HoverIcons.prototype.getStateAt=function(t,e,n){return this.graph.view.getState(this.graph.getCellAt(e,n))},HoverIcons.prototype.click=function(t,e,n){var i=n.getEvent(),l=n.getGraphX(),o=n.getGraphY();null==(l=this.getStateAt(t,l,o))||!this.graph.model.isEdge(l.cell)||this.graph.isCloneEvent(i)||l.getVisibleTerminalState(!0)!=t&&l.getVisibleTerminalState(!1)!=t?null!=t&&this.execute(t,e,n):(this.graph.setSelectionCell(l.cell),this.reset()),n.consume()},HoverIcons.prototype.execute=function(t,e,n){n=n.getEvent(),this.graph.selectCellsForConnectVertex(this.graph.connectVertex(t.cell,e,this.graph.defaultEdgeLength,n,this.graph.isCloneEvent(n),this.graph.isCloneEvent(n)),n,this)},HoverIcons.prototype.reset=function(t){null!=t&&!t||null==this.updateThread||window.clearTimeout(this.updateThread),this.activeArrow=this.currentState=this.mouseDownPoint=null,this.removeNodes(),this.bbox=null},HoverIcons.prototype.repaint=function(){var t,e,n,i,l,o,s;(this.bbox=null)!=this.currentState&&(this.currentState=this.getState(this.currentState),null!=this.currentState&&this.graph.model.isVertex(this.currentState.cell)&&this.graph.isCellConnectable(this.currentState.cell)?(l=mxRectangle.fromRectangle(this.currentState),(l=null!=this.currentState.shape&&null!=this.currentState.shape.boundingBox?mxRectangle.fromRectangle(this.currentState.shape.boundingBox):l).grow(this.graph.tolerance),l.grow(this.arrowSpacing),e=this.graph.selectionCellsHandler.getHandler(this.currentState.cell),this.graph.isTableRow(this.currentState.cell)&&(e=this.graph.selectionCellsHandler.getHandler(this.graph.model.getParent(this.currentState.cell))),(t=null)!=e&&(l.x-=e.horizontalOffset/2,l.y-=e.verticalOffset/2,l.width+=e.horizontalOffset,l.height+=e.verticalOffset,null!=e.rotationShape&&null!=e.rotationShape.node&&"hidden"!=e.rotationShape.node.style.visibility&&"none"!=e.rotationShape.node.style.display&&null!=e.rotationShape.boundingBox&&(t=e.rotationShape.boundingBox)),(e=mxUtils.bind(this,function(e,n,i){var l;null!=t&&(l=new mxRectangle(n,i,e.clientWidth,e.clientHeight),mxUtils.intersects(l,t)&&(e==this.arrowUp?i-=l.y+l.height-t.y:e==this.arrowRight?n+=t.x+t.width-l.x:e==this.arrowDown?i+=t.y+t.height-l.y:e==this.arrowLeft&&(n-=l.x+l.width-t.x))),e.style.left=n+"px",e.style.top=i+"px",mxUtils.setOpacity(e,this.inactiveOpacity)}))(this.arrowUp,Math.round(this.currentState.getCenterX()-this.triangleUp.width/2-this.tolerance),Math.round(l.y-this.triangleUp.height-this.tolerance)),e(this.arrowRight,Math.round(l.x+l.width-this.tolerance),Math.round(this.currentState.getCenterY()-this.triangleRight.height/2-this.tolerance)),e(this.arrowDown,parseInt(this.arrowUp.style.left),Math.round(l.y+l.height-this.tolerance)),e(this.arrowLeft,Math.round(l.x-this.triangleLeft.width-this.tolerance),parseInt(this.arrowRight.style.top)),this.checkCollisions?(e=this.graph.getCellAt(l.x+l.width+this.triangleRight.width/2,this.currentState.getCenterY()),n=this.graph.getCellAt(l.x-this.triangleLeft.width/2,this.currentState.getCenterY()),i=this.graph.getCellAt(this.currentState.getCenterX(),l.y-this.triangleUp.height/2),l=this.graph.getCellAt(this.currentState.getCenterX(),l.y+l.height+this.triangleDown.height/2),null!=e&&e==n&&n==i&&i==l&&(l=i=n=e=null),o=this.graph.getCellGeometry(this.currentState.cell),(s=mxUtils.bind(this,function(t,e){var n=this.graph.model.isVertex(t)&&this.graph.getCellGeometry(t);e.style.visibility=null==t||this.graph.model.isAncestor(t,this.currentState.cell)||this.graph.isSwimlane(t)||!(null==n||null==o||n.height<3*o.height&&n.width<3*o.width)?"visible":"hidden"}))(e,this.arrowRight),s(n,this.arrowLeft),s(i,this.arrowUp),s(l,this.arrowDown)):(this.arrowLeft.style.visibility="visible",this.arrowRight.style.visibility="visible",this.arrowUp.style.visibility="visible",this.arrowDown.style.visibility="visible"),this.graph.tooltipHandler.isEnabled()?(this.arrowLeft.setAttribute("title",mxResources.get("plusTooltip")),this.arrowRight.setAttribute("title",mxResources.get("plusTooltip")),this.arrowUp.setAttribute("title",mxResources.get("plusTooltip")),this.arrowDown.setAttribute("title",mxResources.get("plusTooltip"))):(this.arrowLeft.removeAttribute("title"),this.arrowRight.removeAttribute("title"),this.arrowUp.removeAttribute("title"),this.arrowDown.removeAttribute("title"))):this.reset(),null!=this.currentState&&(this.bbox=this.computeBoundingBox(),null!=this.bbox&&this.bbox.grow(10)))},HoverIcons.prototype.computeBoundingBox=function(){var t=this.graph.model.isEdge(this.currentState.cell)?null:mxRectangle.fromRectangle(this.currentState);return this.visitNodes(function(e){null!=e.parentNode&&(e=new mxRectangle(e.offsetLeft,e.offsetTop,e.offsetWidth,e.offsetHeight),null==t?t=e:t.add(e))}),t},HoverIcons.prototype.getState=function(t){var e;return null!=t&&(t=t.cell,this.graph.getModel().contains(t)?(this.graph.getModel().isVertex(t)&&!this.graph.isCellConnectable(t)&&(e=this.graph.getModel().getParent(t),this.graph.getModel().isVertex(e)&&this.graph.isCellConnectable(e)&&(t=e)),(this.graph.isCellLocked(t)||this.graph.model.isEdge(t))&&(t=null),null!=(t=this.graph.view.getState(t))&&null==t.style&&(t=null)):t=null),t},HoverIcons.prototype.update=function(t,e,n){var i;!this.graph.connectionArrowsEnabled||null!=t&&"0"==mxUtils.getValue(t.style,"allowArrows","1")?this.reset():(null!=t&&null!=t.cell.geometry&&t.cell.geometry.relative&&this.graph.model.isEdge(t.cell.parent)&&(t=null),i=null,this.prev!=t||this.isActive()?(this.startTime=(new Date).getTime(),this.prev=t,i=0,null!=this.updateThread&&window.clearTimeout(this.updateThread),null!=t&&(this.updateThread=window.setTimeout(mxUtils.bind(this,function(){this.isActive()||this.graph.isMouseDown||this.graph.panningHandler.isActive()||(this.prev=t,this.update(t,e,n))}),this.updateDelay+10))):null!=this.startTime&&(i=(new Date).getTime()-this.startTime),this.setDisplay(""),null!=this.currentState&&this.currentState!=t&&i<this.activationDelay&&null!=this.bbox&&!mxUtils.contains(this.bbox,e,n)?this.reset(!1):(null!=this.currentState||i>this.activationDelay)&&this.currentState!=t&&(i>this.updateDelay&&null!=t||null==this.bbox||null==e||null==n||!mxUtils.contains(this.bbox,e,n))&&(null!=t&&this.graph.isEnabled()?(this.removeNodes(),this.setCurrentState(t),this.repaint(),this.graph.connectionHandler.constraintHandler.currentFocus!=t&&this.graph.connectionHandler.constraintHandler.reset()):this.reset()))},HoverIcons.prototype.setCurrentState=function(t){"eastwest"!=t.style.portConstraint&&(this.graph.container.appendChild(this.arrowUp),this.graph.container.appendChild(this.arrowDown)),this.graph.container.appendChild(this.arrowRight),this.graph.container.appendChild(this.arrowLeft),this.currentState=t},Graph.prototype.createParent=function(t,e,n,i,l){t=this.cloneCell(t);for(var o=0;o<n;o++){var s=this.cloneCell(e),r=this.getCellGeometry(s);null!=r&&(r.x+=o*i,r.y+=o*l),t.insert(s)}return t},Graph.prototype.createTable=function(t,e,n,i,l,o,s,r,a){return o=null!=o?o:30,r=null!=r?r:"shape=partialRectangle;html=1;whiteSpace=wrap;collapsible=0;dropTarget=0;pointerEvents=0;fillColor=none;top=0;left=0;bottom=0;right=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;",a=null!=a?a:"shape=partialRectangle;html=1;whiteSpace=wrap;connectable=0;overflow=hidden;fillColor=none;top=0;left=0;bottom=0;right=0;",this.createParent(this.createVertex(null,null,null!=l?l:"",0,0,e*(n=null!=n?n:60),t*(i=null!=i?i:40)+(null!=l?o:0),null!=s?s:"shape=table;html=1;whiteSpace=wrap;startSize="+(null!=l?o:"0")+";container=1;collapsible=0;childLayout=tableLayout;"),this.createParent(this.createVertex(null,null,"",0,0,e*n,i,r),this.createVertex(null,null,"",0,0,n,i,a),e,n,0),t,0,i)},Graph.prototype.setTableValues=function(t,e,n){for(var i=this.model.getChildCells(t,!0),l=0;l<i.length;l++)if(null!=n&&(i[l].value=n[l]),null!=e)for(var o=this.model.getChildCells(i[l],!0),s=0;s<o.length;s++)null!=e[l][s]&&(o[s].value=e[l][s]);return t},Graph.prototype.createCrossFunctionalSwimlane=function(t,e,n,i,l,o,s,r,a){return l=null!=l?l:40,s=null!=s?s:"swimlane;horizontal=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;startSize="+l+";html=1;whiteSpace=wrap;collapsible=0;recursiveResize=0;expand=0;pointerEvents=0;",r=null!=r?r:"swimlane;connectable=0;startSize=40;html=1;whiteSpace=wrap;collapsible=0;recursiveResize=0;expand=0;pointerEvents=0;",a=null!=a?a:"swimlane;connectable=0;startSize=0;html=1;whiteSpace=wrap;collapsible=0;recursiveResize=0;expand=0;pointerEvents=0;",l=this.createVertex(null,null,"",0,0,e*(n=null!=n?n:120),t*(i=null!=i?i:120),null!=o?o:"shape=table;childLayout=tableLayout;rowLines=0;columnLines=0;startSize="+l+";html=1;whiteSpace=wrap;collapsible=0;recursiveResize=0;expand=0;pointerEvents=0;"),o=mxUtils.getValue(this.getCellStyle(l),mxConstants.STYLE_STARTSIZE,mxConstants.DEFAULT_STARTSIZE),l.geometry.width+=o,l.geometry.height+=o,s=this.createVertex(null,null,"",0,o,e*n+o,i,s),l.insert(this.createParent(s,this.createVertex(null,null,"",o,0,n,i,r),e,n,0)),1<t?(s.geometry.y=i+o,this.createParent(l,this.createParent(s,this.createVertex(null,null,"",o,0,n,i,a),e,n,0),t-1,0,i)):l},Graph.prototype.isTableCell=function(t){return this.model.isVertex(t)&&this.isTableRow(this.model.getParent(t))},Graph.prototype.isTableRow=function(t){return this.model.isVertex(t)&&this.isTable(this.model.getParent(t))},Graph.prototype.isTable=function(t){return null!=(t=this.getCellStyle(t))&&"tableLayout"==t.childLayout},Graph.prototype.setTableRowHeight=function(t,e,n){n=null==n||n;var i=this.getModel();i.beginUpdate();try{var l,o,s,r,a,h,u=this.getCellGeometry(t);null!=u&&((u=u.clone()).height+=e,i.setGeometry(t,u),l=i.getParent(t),o=i.getChildCells(l,!0),n||(s=mxUtils.indexOf(o,t))<o.length-1&&null!=(a=this.getCellGeometry(r=o[s+1]))&&((a=a.clone()).y+=e,a.height-=e,i.setGeometry(r,a)),null==(h=this.getCellGeometry(l))||(n=n||t==o[o.length-1])&&((h=h.clone()).height+=e,i.setGeometry(l,h)),null!=this.layoutManager&&this.layoutManager.executeLayout(l,!0))}finally{i.endUpdate()}},Graph.prototype.setTableColumnWidth=function(t,e,n){n=null!=n&&n;var i=this.getModel(),l=i.getParent(t),o=i.getParent(l),s=i.getChildCells(l,!0),r=(t=mxUtils.indexOf(s,t))==s.length-1;i.beginUpdate();try{for(var a,h=i.getChildCells(o,!0),u=0;u<h.length;u++){var d=(s=i.getChildCells(l=h[u],!0))[t],c=this.getCellGeometry(d);null!=c&&((c=c.clone()).width+=e,i.setGeometry(d,c)),t<s.length-1&&null!=(c=this.getCellGeometry(d=s[t+1]))&&((c=c.clone()).x+=e,n||(c.width-=e),i.setGeometry(d,c))}!r&&!n||null!=(a=this.getCellGeometry(o))&&((a=a.clone()).width+=e,i.setGeometry(o,a)),null!=this.layoutManager&&this.layoutManager.executeLayout(o,!0)}finally{i.endUpdate()}},TableLayout.prototype=new mxStackLayout,TableLayout.prototype.constructor=TableLayout,TableLayout.prototype.isHorizontal=function(){return!1},TableLayout.prototype.isVertexIgnored=function(t){return!this.graph.getModel().isVertex(t)||!this.graph.isCellVisible(t)},TableLayout.prototype.getSize=function(t,e){for(var n,i=0,l=0;l<t.length;l++)this.isVertexIgnored(t[l])||null!=(n=this.graph.getCellGeometry(t[l]))&&(i+=e?n.width:n.height);return i},TableLayout.prototype.getRowLayout=function(t,e){var n=this.graph.model.getChildCells(t,!0),i=this.graph.getActualStartSize(t,!0);t=this.getSize(n,!0),e=e-i.x-i.width;for(var l=[],o=(i=i.x,0);o<n.length;o++){var s=this.graph.getCellGeometry(n[o]);null!=s&&(i+=s.width*e/t,l.push(Math.round(i)))}return l},TableLayout.prototype.layoutRow=function(t,e,n,i){var l=this.graph.getModel(),o=l.getChildCells(t,!0),s=(t=this.graph.getActualStartSize(t,!0)).x,r=0;null!=e&&(e=e.slice()).splice(0,0,t.x);for(var a=0;a<o.length;a++){var h=this.graph.getCellGeometry(o[a]);null!=h&&((h=h.clone()).y=t.y,h.height=n-t.y-t.height,null!=e?(h.x=e[a],h.width=e[a+1]-h.x,a==o.length-1&&a<e.length-2&&(h.width=i-h.x-t.x-t.width)):(h.x=s,s+=h.width,a==o.length-1?h.width=i-t.x-t.width-r:r+=h.width),l.setGeometry(o[a],h))}return r},TableLayout.prototype.execute=function(t){if(null!=t){var e=this.graph.getActualStartSize(t,!0),n=this.graph.getCellGeometry(t),i=this.graph.getCellStyle(t),l="1"==mxUtils.getValue(i,"resizeLastRow","0"),o="1"==mxUtils.getValue(i,"resizeLast","0"),s=(i="1"==mxUtils.getValue(i,"fixedRows","0"),this.graph.getModel()),r=0;s.beginUpdate();try{var a,h=n.height-e.y-e.height,u=n.width-e.x-e.width,d=s.getChildCells(t,!0),c=this.getSize(d,!1);if(0<h&&0<u&&0<d.length&&0<c){!l||null!=(a=this.graph.getCellGeometry(d[d.length-1]))&&((a=a.clone()).height=h-c+a.height,s.setGeometry(d[d.length-1],a));for(var p=o?null:this.getRowLayout(d[0],u),m=e.y,g=0;g<d.length;g++)null!=(a=this.graph.getCellGeometry(d[g]))&&((a=a.clone()).x=e.x,a.width=u,a.y=Math.round(m),m=l||i?m+a.height:m+a.height/c*h,a.height=Math.round(m)-a.y,s.setGeometry(d[g],a)),r=Math.max(r,this.layoutRow(d[g],p,a.height,u));i&&h<c&&((n=n.clone()).height=m+e.height,s.setGeometry(t,n)),o&&u<r+Graph.minTableColumnWidth&&((n=n.clone()).width=r+e.width+e.x+Graph.minTableColumnWidth,s.setGeometry(t,n))}}finally{s.endUpdate()}}},function(){var t=mxGraphView.prototype.resetValidationState;mxGraphView.prototype.resetValidationState=function(){t.apply(this,arguments),this.validEdges=[]};var e=mxGraphView.prototype.validateCellState;mxGraphView.prototype.validateCellState=function(t,n){n=null==n||n;var i=this.getState(t);return null!=i&&n&&this.graph.model.isEdge(i.cell)&&null!=i.style&&1!=i.style[mxConstants.STYLE_CURVED]&&!i.invalid&&this.updateLineJumps(i)&&this.graph.cellRenderer.redraw(i,!1,this.isRendering()),null!=(i=e.apply(this,arguments))&&n&&this.graph.model.isEdge(i.cell)&&null!=i.style&&1!=i.style[mxConstants.STYLE_CURVED]&&this.validEdges.push(i),i};var n=mxShape.prototype.paint;mxShape.prototype.paint=function(){var t,e;n.apply(this,arguments),null!=this.state&&null!=this.node&&this.state.view.graph.enableFlowAnimation&&this.state.view.graph.model.isEdge(this.state.cell)&&"1"==mxUtils.getValue(this.state.style,"flowAnimation","0")&&1<(t=this.node.getElementsByTagName("path")).length&&("1"!=mxUtils.getValue(this.state.style,mxConstants.STYLE_DASHED,"0")&&t[1].setAttribute("stroke-dasharray",8*this.state.view.scale),null!=(e=this.state.view.graph.getFlowAnimationStyle())&&t[1].setAttribute("class",e.getAttribute("id")))};var i=mxCellRenderer.prototype.isShapeInvalid;mxCellRenderer.prototype.isShapeInvalid=function(t,e){return i.apply(this,arguments)||null!=t.routedPoints&&null!=e.routedPoints&&!mxUtils.equalPoints(e.routedPoints,t.routedPoints)};var l=mxGraphView.prototype.updateCellState;mxGraphView.prototype.updateCellState=function(t){l.apply(this,arguments),this.graph.model.isEdge(t.cell)&&1!=t.style[mxConstants.STYLE_CURVED]&&this.updateLineJumps(t)},mxGraphView.prototype.updateLineJumps=function(t){var e=t.absolutePoints;if(Graph.lineJumpsEnabled){var n=null!=t.routedPoints,i=null;if(null!=e&&null!=this.validEdges&&"none"!==mxUtils.getValue(t.style,"jumpStyle","none")){function l(e,n,l){var o=new mxPoint(n,l);return o.type=e,i.push(o),null==(o=null!=t.routedPoints?t.routedPoints[i.length-1]:null)||o.type!=e||o.x!=n||o.y!=l}var o=.5*this.scale;n=!1,i=[];for(var s=0;s<e.length-1;s++){for(var r=e[s+1],a=e[s],h=[],u=e[s+2];s<e.length-2&&mxUtils.ptSegDistSq(a.x,a.y,u.x,u.y,r.x,r.y)<+this.scale*this.scale;)r=u,u=e[++s+2];n=l(0,a.x,a.y)||n;for(var d=0;d<this.validEdges.length;d++){var c=this.validEdges[d],p=c.absolutePoints;if(null!=p&&mxUtils.intersects(t,c)&&"1"!=c.style.noJump)for(c=0;c<p.length-1;c++){var m=p[c+1],g=p[c];for(u=p[c+2];c<p.length-2&&mxUtils.ptSegDistSq(g.x,g.y,u.x,u.y,m.x,m.y)<+this.scale*this.scale;)m=u,u=p[++c+2];if(null!=(u=mxUtils.intersection(a.x,a.y,r.x,r.y,g.x,g.y,m.x,m.y))&&(Math.abs(u.x-a.x)>o||Math.abs(u.y-a.y)>o)&&(Math.abs(u.x-r.x)>o||Math.abs(u.y-r.y)>o)&&(Math.abs(u.x-g.x)>o||Math.abs(u.y-g.y)>o)&&(Math.abs(u.x-m.x)>o||Math.abs(u.y-m.y)>o)){for(u={distSq:(m=u.x-a.x)*m+(g=u.y-a.y)*g,x:u.x,y:u.y},m=0;m<h.length;m++)if(h[m].distSq>u.distSq){h.splice(m,0,u),u=null;break}null==u||0!=h.length&&h[h.length-1].x===u.x&&h[h.length-1].y===u.y||h.push(u)}}}for(c=0;c<h.length;c++)n=l(1,h[c].x,h[c].y)||n}n=l(0,(u=e[e.length-1]).x,u.y)||n}return t.routedPoints=i,n}return!1};var o=mxConnector.prototype.paintLine;mxConnector.prototype.paintLine=function(t,e,n){if(this.routedPoints=null!=this.state?this.state.routedPoints:null,this.outline||null==this.state||null==this.style||null==this.state.routedPoints||0==this.state.routedPoints.length)o.apply(this,arguments);else{var i=mxUtils.getValue(this.style,mxConstants.STYLE_ARCSIZE,mxConstants.LINE_ARCSIZE)/2,l=(parseInt(mxUtils.getValue(this.style,"jumpSize",Graph.defaultJumpSize))-2)/2+this.strokewidth,s=mxUtils.getValue(this.style,"jumpStyle","none"),r=!0,a=null,h=null,u=[],d=null;t.begin();for(var c=0;c<this.state.routedPoints.length;c++){var p=this.state.routedPoints[c],m=new mxPoint(p.x/this.scale,p.y/this.scale);0==c?m=e[0]:c==this.state.routedPoints.length-1&&(m=e[e.length-1]);var g,x=!1;null!=a&&1==p.type?(p=(p=(g=this.state.routedPoints[c+1]).x/this.scale-m.x)*p+(g=g.y/this.scale-m.y)*g,null==d&&(d=new mxPoint(m.x-a.x,m.y-a.y),0<(h=Math.sqrt(d.x*d.x+d.y*d.y))?(d.x=d.x*l/h,d.y=d.y*l/h):d=null),l*l<p&&0<h&&l*l<(p=(p=a.x-m.x)*p+(g=a.y-m.y)*g)&&(x=new mxPoint(m.x-d.x,m.y-d.y),p=new mxPoint(m.x+d.x,m.y+d.y),u.push(x),this.addPoints(t,u,n,i,!1,null,r),u=Math.round(d.x)<0||0==Math.round(d.x)&&Math.round(d.y)<=0?1:-1,r=!1,"sharp"==s?(t.lineTo(x.x-d.y*u,x.y+d.x*u),t.lineTo(p.x-d.y*u,p.y+d.x*u),t.lineTo(p.x,p.y)):"arc"==s?t.curveTo(x.x-d.y*(u*=1.3),x.y+d.x*u,p.x-d.y*u,p.y+d.x*u,p.x,p.y):(t.moveTo(p.x,p.y),r=!0),u=[p],x=!0)):d=null,x||(u.push(m),a=m)}this.addPoints(t,u,n,i,!1,null,r),t.stroke()}};var s=mxGraphView.prototype.getFixedTerminalPoint;mxGraphView.prototype.getFixedTerminalPoint=function(t,e,n,i){return null!=e&&"centerPerimeter"==e.style[mxConstants.STYLE_PERIMETER]?new mxPoint(e.getCenterX(),e.getCenterY()):s.apply(this,arguments)};var r=mxGraphView.prototype.updateFloatingTerminalPoint;mxGraphView.prototype.updateFloatingTerminalPoint=function(t,e,n,i){var l,o,s,a,h,u;null==e||null==t||"1"!=e.style.snapToPoint&&"1"!=t.style.snapToPoint?r.apply(this,arguments):(e=this.getTerminalPort(t,e,i),u=this.getNextPoint(t,n,i),l=this.graph.isOrthogonal(t),o=mxUtils.toRadians(Number(e.style[mxConstants.STYLE_ROTATION]||"0")),s=new mxPoint(e.getCenterX(),e.getCenterY()),0!=o&&(a=Math.cos(-o),h=Math.sin(-o),u=mxUtils.getRotatedPoint(u,a,h,s)),a=parseFloat(t.style[mxConstants.STYLE_PERIMETER_SPACING]||0),a+=parseFloat(t.style[i?mxConstants.STYLE_SOURCE_PERIMETER_SPACING:mxConstants.STYLE_TARGET_PERIMETER_SPACING]||0),u=this.getPerimeterPoint(e,u,0==o&&l,a),0!=o&&(a=Math.cos(o),h=Math.sin(o),u=mxUtils.getRotatedPoint(u,a,h,s)),t.setAbsoluteTerminalPoint(this.snapToAnchorPoint(t,e,n,i,u),i))},mxGraphView.prototype.snapToAnchorPoint=function(t,e,n,i,l){if(null!=e&&null!=t){if((i=n=null)!=(t=this.graph.getAllConnectionConstraints(e)))for(var o=0;o<t.length;o++){var s,r=this.graph.getConnectionPoint(e,t[o]);null!=r&&(s=(r.x-l.x)*(r.x-l.x)+(r.y-l.y)*(r.y-l.y),(null==i||s<i)&&(n=r,i=s))}null!=n&&(l=n)}return l};var a=mxStencil.prototype.evaluateTextAttribute;mxStencil.prototype.evaluateTextAttribute=function(t,e,n){var i=a.apply(this,arguments);return"1"==t.getAttribute("placeholders")&&null!=n.state?n.state.view.graph.replacePlaceholders(n.state.cell,i):i};var h=mxCellRenderer.prototype.createShape;mxCellRenderer.prototype.createShape=function(t){if(null!=t.style&&"undefined"!=typeof pako){var e=mxUtils.getValue(t.style,mxConstants.STYLE_SHAPE,null);if(null!=e&&"string"==typeof e&&"stencil("==e.substring(0,8))try{var n=e.substring(8,e.length-1);return new mxShape(new mxStencil(mxUtils.parseXml(Graph.decompress(n)).documentElement))}catch(t){null!=window.console&&console.log("Error in shape: "+t)}}return h.apply(this,arguments)}}(),mxStencilRegistry.libraries={},mxStencilRegistry.dynamicLoading=!0,mxStencilRegistry.allowEval=!0,mxStencilRegistry.packages=[],mxStencilRegistry.filesLoaded={},mxStencilRegistry.getStencil=function(t){var e=mxStencilRegistry.stencils[t];if(null==e&&null==mxCellRenderer.defaultShapes[t]&&mxStencilRegistry.dynamicLoading){var n=mxStencilRegistry.getBasenameForStencil(t);if(null!=n){if(null!=(e=mxStencilRegistry.libraries[n])){if(null==mxStencilRegistry.packages[n]){for(var i=0;i<e.length;i++){var l,o=e[i];if(!mxStencilRegistry.filesLoaded[o])if(mxStencilRegistry.filesLoaded[o]=!0,".xml"==o.toLowerCase().substring(o.length-4,o.length))mxStencilRegistry.loadStencilSet(o,null);else if(".js"==o.toLowerCase().substring(o.length-3,o.length))try{!mxStencilRegistry.allowEval||null!=(l=mxUtils.load(o))&&200<=l.getStatus()&&l.getStatus()<=299&&eval.call(window,l.getText())}catch(i){null!=window.console&&console.log("error in getStencil:",t,n,e,o,i)}}mxStencilRegistry.packages[n]=1}}else n=n.replace("_-_","_"),mxStencilRegistry.loadStencilSet(STENCIL_PATH+"/"+n+".xml",null);e=mxStencilRegistry.stencils[t]}}return e},mxStencilRegistry.getBasenameForStencil=function(t){var e=null;if(null!=t&&"string"==typeof t&&0<(t=t.split(".")).length&&"mxgraph"==t[0]){e=t[1];for(var n=2;n<t.length-1;n++)e+="/"+t[n]}return e},mxStencilRegistry.loadStencilSet=function(t,e,n,i){var l=mxStencilRegistry.packages[t];if(null!=n&&n||null==l){var o=!1;if(null==l)try{if(i)return void mxStencilRegistry.loadStencil(t,mxUtils.bind(this,function(n){null!=n&&null!=n.documentElement&&(mxStencilRegistry.packages[t]=n,mxStencilRegistry.parseStencilSet(n.documentElement,e,o=!0))}));l=mxStencilRegistry.loadStencil(t),mxStencilRegistry.packages[t]=l,o=!0}catch(n){null!=window.console&&console.log("error in loadStencilSet:",t,n)}null!=l&&null!=l.documentElement&&mxStencilRegistry.parseStencilSet(l.documentElement,e,o)}},mxStencilRegistry.loadStencil=function(t,e){if(null==e)return mxUtils.load(t).getXml();mxUtils.get(t,mxUtils.bind(this,function(t){e(200<=t.getStatus()&&t.getStatus()<=299?t.getXml():null)}))},mxStencilRegistry.parseStencilSets=function(t){for(var e=0;e<t.length;e++)mxStencilRegistry.parseStencilSet(mxUtils.parseXml(t[e]).documentElement)},mxStencilRegistry.parseStencilSet=function(t,e,n){if("stencils"==t.nodeName)for(var i=t.firstChild;null!=i;)"shapes"==i.nodeName&&mxStencilRegistry.parseStencilSet(i,e,n),i=i.nextSibling;else{n=null==n||n,i=t.firstChild;var l,o,s,r="";for(null!=(t=t.getAttribute("name"))&&(r=t+".");null!=i;)i.nodeType==mxConstants.NODETYPE_ELEMENT&&null!=(t=i.getAttribute("name"))&&(r=r.toLowerCase(),l=t.replace(/ /g,"_"),n&&mxStencilRegistry.addStencil(r+l.toLowerCase(),new mxStencil(i)),null!=e&&(o=i.getAttribute("w"),s=i.getAttribute("h"),e(r,l,t,o=null==o?80:parseInt(o,10),s=null==s?80:parseInt(s,10)))),i=i.nextSibling}},void 0!==mxVertexHandler&&function(){function t(){var t=document.createElement("div");return t.className="geHint",t.style.whiteSpace="nowrap",t.style.position="absolute",t}function e(t,e){switch(e){case mxConstants.POINTS:return t;case mxConstants.MILLIMETERS:return(t/mxConstants.PIXELS_PER_MM).toFixed(1);case mxConstants.INCHES:return(t/mxConstants.PIXELS_PER_INCH).toFixed(2)}}mxConstants.HANDLE_FILLCOLOR="#29b6f2",mxConstants.HANDLE_STROKECOLOR="#0088cf",mxConstants.VERTEX_SELECTION_COLOR="#00a8ff",mxConstants.OUTLINE_COLOR="#00a8ff",mxConstants.OUTLINE_HANDLE_FILLCOLOR="#99ccff",mxConstants.OUTLINE_HANDLE_STROKECOLOR="#00a8ff",mxConstants.CONNECT_HANDLE_FILLCOLOR="#cee7ff",mxConstants.EDGE_SELECTION_COLOR="#00a8ff",mxConstants.DEFAULT_VALID_COLOR="#00a8ff",mxConstants.LABEL_HANDLE_FILLCOLOR="#cee7ff",mxConstants.GUIDE_COLOR="#0088cf",mxConstants.HIGHLIGHT_OPACITY=30,mxConstants.HIGHLIGHT_SIZE=5,mxEdgeHandler.prototype.snapToTerminals=!0,mxGraphHandler.prototype.guidesEnabled=!0,mxGraphHandler.prototype.removeEmptyParents=!0,mxRubberband.prototype.fadeOut=!0,mxGuide.prototype.isEnabledForEvent=function(t){return!mxEvent.isAltDown(t)};var n=mxGraphLayout.prototype.isVertexIgnored;mxGraphLayout.prototype.isVertexIgnored=function(t){return n.apply(this,arguments)||this.graph.isTableRow(t)||this.graph.isTableCell(t)};var i=mxGraphLayout.prototype.isEdgeIgnored;mxGraphLayout.prototype.isEdgeIgnored=function(t){return i.apply(this,arguments)||this.graph.isEdgeIgnored(t)};var l=mxConnectionHandler.prototype.isCreateTarget;mxConnectionHandler.prototype.isCreateTarget=function(t){return this.graph.isCloneEvent(t)||l.apply(this,arguments)},mxConstraintHandler.prototype.createHighlightShape=function(){var t=new mxEllipse(null,this.highlightColor,this.highlightColor,0);return t.opacity=mxConstants.HIGHLIGHT_OPACITY,t},mxConnectionHandler.prototype.livePreview=!0,mxConnectionHandler.prototype.cursor="crosshair",mxConnectionHandler.prototype.createEdgeState=function(t){for(var e in t=this.graph.createCurrentEdgeStyle(),t=this.graph.createEdge(null,null,null,null,null,t),t=new mxCellState(this.graph.view,t,this.graph.getCellStyle(t)),this.graph.currentEdgeStyle)t.style[e]=this.graph.currentEdgeStyle[e];return t};var o=mxConnectionHandler.prototype.createShape;mxConnectionHandler.prototype.createShape=function(){var t=o.apply(this,arguments);return t.isDashed="1"==this.graph.currentEdgeStyle[mxConstants.STYLE_DASHED],t},mxConnectionHandler.prototype.updatePreview=function(t){};var s=mxConnectionHandler.prototype.createMarker;mxConnectionHandler.prototype.createMarker=function(){var t=s.apply(this,arguments),e=t.getCell;return t.getCell=mxUtils.bind(this,function(t){var n=e.apply(this,arguments);return this.error=null,n}),t},Graph.prototype.defaultVertexStyle={},Graph.prototype.defaultEdgeStyle={edgeStyle:"orthogonalEdgeStyle",rounded:"0",jettySize:"auto",orthogonalLoop:"1"},Graph.prototype.createCurrentEdgeStyle=function(){for(var t="edgeStyle="+(this.currentEdgeStyle.edgeStyle||"none")+";",e="shape curved rounded comic sketch fillWeight hachureGap hachureAngle jiggle disableMultiStroke disableMultiStrokeFill fillStyle curveFitting simplification comicStyle jumpStyle jumpSize".split(" "),n=0;n<e.length;n++)null!=this.currentEdgeStyle[e[n]]&&(t+=e[n]+"="+this.currentEdgeStyle[e[n]]+";");return null!=this.currentEdgeStyle.orthogonalLoop?t+="orthogonalLoop="+this.currentEdgeStyle.orthogonalLoop+";":null!=Graph.prototype.defaultEdgeStyle.orthogonalLoop&&(t+="orthogonalLoop="+Graph.prototype.defaultEdgeStyle.orthogonalLoop+";"),null!=this.currentEdgeStyle.jettySize?t+="jettySize="+this.currentEdgeStyle.jettySize+";":null!=Graph.prototype.defaultEdgeStyle.jettySize&&(t+="jettySize="+Graph.prototype.defaultEdgeStyle.jettySize+";"),"elbowEdgeStyle"==this.currentEdgeStyle.edgeStyle&&null!=this.currentEdgeStyle.elbow&&(t+="elbow="+this.currentEdgeStyle.elbow+";"),null!=this.currentEdgeStyle.html?t+"html="+this.currentEdgeStyle.html+";":t+"html=1;"},Graph.prototype.updateCellStyles=function(t,e,n){this.model.beginUpdate();try{for(var i,l=0;l<n.length;l++)(this.model.isVertex(n[l])||this.model.isEdge(n[l]))&&(this.setCellStyles(t,null,[n[l]]),e!=(null==(i=this.getCellStyle(n[l])[t])?mxConstants.NONE:i)&&this.setCellStyles(t,e,[n[l]]))}finally{this.model.endUpdate()}},Graph.prototype.getPagePadding=function(){return new mxPoint(0,0)},Graph.prototype.loadStylesheet=function(){var t=null!=this.themes?this.themes[this.defaultThemeName]:mxStyleRegistry.dynamicLoading?mxUtils.load(STYLE_PATH+"/default.xml").getDocumentElement():null;null!=t&&new mxCodec(t.ownerDocument).decode(t,this.getStylesheet())},Graph.prototype.createCellLookup=function(t,e){e=null!=e?e:{};for(var n=0;n<t.length;n++){var i=t[n];e[mxObjectIdentity.get(i)]=i.getId();for(var l=this.model.getChildCount(i),o=0;o<l;o++)this.createCellLookup([this.model.getChildAt(i,o)],e)}return e},Graph.prototype.createCellMapping=function(t,e,n){for(var i in n=null!=n?n:{},t){var l=e[i];null==n[l]&&(n[l]=t[i].getId()||"")}return n},Graph.prototype.importGraphModel=function(t,e,n,i){e=null!=e?e:0,n=null!=n?n:0;var l=new mxCodec(t.ownerDocument),o=new mxGraphModel;l.decode(t,o),t=[],l={};var s={};if(null!=(h=o.getChildren(this.cloneCell(o.root,this.isCloneInvalidEdges(),l)))){var r,a=this.createCellLookup([o.root]),h=h.slice();this.model.beginUpdate();try{if(1!=h.length||this.isCellLocked(this.getDefaultParent()))for(o=0;o<h.length;o++)null!=(u=this.model.getChildren(this.moveCells([h[o]],e,n,!1,this.model.getRoot())[0]))&&(t=t.concat(u));else{var u=o.getChildren(h[0]);null!=u&&(t=this.moveCells(u,e,n,!1,this.getDefaultParent()),s[o.getChildAt(o.root,0).getId()]=this.getDefaultParent().getId())}null!=t&&(this.createCellMapping(l,a,s),this.updateCustomLinks(s,t),i)&&(this.isGridEnabled()&&(e=this.snap(e),n=this.snap(n)),null!=(r=this.getBoundingBoxFromGeometry(t,!0))&&this.moveCells(t,e-r.x,n-r.y))}finally{this.model.endUpdate()}}return t},Graph.prototype.encodeCells=function(t){for(var e={},n=this.cloneCells(t,null,e),i=new mxDictionary,l=0;l<t.length;l++)i.put(t[l],!0);var o=new mxCodec,s=new mxGraphModel,r=s.getChildAt(s.getRoot(),0);for(l=0;l<n.length;l++){s.add(r,n[l]);var a,h=this.view.getState(t[l]);null==h||null!=(a=this.getCellGeometry(n[l]))&&a.relative&&!this.model.isEdge(t[l])&&null==i.get(this.model.getParent(t[l]))&&(a.offset=null,a.relative=!1,a.x=h.x/h.view.scale-h.view.translate.x,a.y=h.y/h.view.scale-h.view.translate.y)}return this.updateCustomLinks(this.createCellMapping(e,this.createCellLookup(t)),n),o.encode(s)},Graph.prototype.isSwimlane=function(t,e){return null!=t&&this.model.getParent(t)!=this.model.getRoot()&&!this.model.isEdge(t)&&((t=this.getCurrentCellStyle(t,e)[mxConstants.STYLE_SHAPE])==mxConstants.SHAPE_SWIMLANE||"table"==t)};var r=Graph.prototype.isExtendParent;Graph.prototype.isExtendParent=function(t){var e=this.model.getParent(t);if(null!=e){var n=this.getCurrentCellStyle(e);if(null!=n.expand)return"0"!=n.expand}return r.apply(this,arguments)&&(null==e||!this.isTable(e))};var a=Graph.prototype.splitEdge;Graph.prototype.splitEdge=function(t,e,n,i,l,o,s,r){null==r&&(r=this.model.getParent(t),this.isTable(r)||this.isTableRow(r))&&(r=this.getCellAt(o,s,null,!0,!1)),n=null,this.model.beginUpdate();try{n=a.apply(this,[t,e,n,i,l,o,s,r]),this.model.setValue(n,"");var h=this.getChildCells(n,!0);for(e=0;e<h.length;e++){var u=this.getCellGeometry(h[e]);null!=u&&u.relative&&0<u.x&&this.model.remove(h[e])}var d=this.getChildCells(t,!0);for(e=0;e<d.length;e++)null!=(u=this.getCellGeometry(d[e]))&&u.relative&&u.x<=0&&this.model.remove(d[e]);this.setCellStyles(mxConstants.STYLE_TARGET_PERIMETER_SPACING,null,[n]),this.setCellStyles(mxConstants.STYLE_ENDARROW,mxConstants.NONE,[n]),this.setCellStyles(mxConstants.STYLE_SOURCE_PERIMETER_SPACING,null,[t]),this.setCellStyles(mxConstants.STYLE_STARTARROW,mxConstants.NONE,[t]);var c,p=this.model.getTerminal(n,!1);null==p||null!=(c=this.getCurrentCellStyle(p))&&"1"==c.snapToPoint&&(this.setCellStyles(mxConstants.STYLE_EXIT_X,null,[t]),this.setCellStyles(mxConstants.STYLE_EXIT_Y,null,[t]),this.setCellStyles(mxConstants.STYLE_ENTRY_X,null,[n]),this.setCellStyles(mxConstants.STYLE_ENTRY_Y,null,[n]))}finally{this.model.endUpdate()}return n};var h=Graph.prototype.selectCell;Graph.prototype.selectCell=function(t,e,n){var i,l,o,s;e||n?h.apply(this,arguments):(i=this.getSelectionCell(),l=null,o=[],(s=mxUtils.bind(this,function(e){if(null!=this.view.getState(e)&&(this.model.isVertex(e)||this.model.isEdge(e)))if(o.push(e),e==i)l=o.length-1;else if(t&&null==i&&0<o.length||null!=l&&t&&o.length>l||!t&&0<l)return;for(var n=0;n<this.model.getChildCount(e);n++)s(this.model.getChildAt(e,n))}))(this.model.root),0<o.length&&(l=null!=l?mxUtils.mod(l+(t?1:-1),o.length):0,this.setSelectionCell(o[l])))};var u=Graph.prototype.moveCells;Graph.prototype.moveCells=function(t,e,n,i,l,o,s){if(s=null!=s?s:{},this.isTable(l)){for(var r=[],a=0;a<t.length;a++)this.isTable(t[a])?r=r.concat(this.model.getChildCells(t[a],!0).reverse()):r.push(t[a]);t=r}this.model.beginUpdate();try{for(r=[],a=0;a<t.length;a++)if(null!=l&&this.isTableRow(t[a])){var h,d=this.model.getParent(t[a]),c=this.getCellGeometry(t[a]);if(this.isTable(d)&&r.push(d),null!=d&&null!=c&&this.isTable(d)&&this.isTable(l)&&(i||d!=l)){i||null!=(h=this.getCellGeometry(d))&&((h=h.clone()).height-=c.height,this.model.setGeometry(d,h)),null!=(h=this.getCellGeometry(l))&&((h=h.clone()).height+=c.height,this.model.setGeometry(l,h));var p=this.model.getChildCells(l,!0);if(0<p.length){t[a]=i?this.cloneCell(t[a]):t[a];var m=this.model.getChildCells(t[a],!0),g=this.model.getChildCells(p[0],!0),x=g.length-m.length;if(0<x)for(var y=0;y<x;y++){var f=this.cloneCell(m[m.length-1]);null!=f&&(f.value="",this.model.add(t[a],f))}else if(x<0)for(y=0;x<y;y--)this.model.remove(m[m.length+y-1]);for(m=this.model.getChildCells(t[a],!0),y=0;y<g.length;y++){var v=this.getCellGeometry(g[y]),b=this.getCellGeometry(m[y]);null!=v&&null!=b&&((b=b.clone()).width=v.width,this.model.setGeometry(m[y],b))}}}}var C=u.apply(this,arguments);for(a=0;a<r.length;a++)!i&&this.model.contains(r[a])&&0==this.model.getChildCount(r[a])&&this.model.remove(r[a]);i&&this.updateCustomLinks(this.createCellMapping(s,this.createCellLookup(t)),C)}finally{this.model.endUpdate()}return C};var d=Graph.prototype.removeCells;Graph.prototype.removeCells=function(t,e){var n=[];this.model.beginUpdate();try{for(var i=0;i<t.length;i++)if(this.isTableCell(t[i])){var l=this.model.getParent(t[i]),o=this.model.getParent(l);1==this.model.getChildCount(l)&&1==this.model.getChildCount(o)?mxUtils.indexOf(t,o)<0&&mxUtils.indexOf(n,o)<0&&n.push(o):this.labelChanged(t[i],"")}else{if(this.isTableRow(t[i])&&(o=this.model.getParent(t[i]),mxUtils.indexOf(t,o)<0&&mxUtils.indexOf(n,o)<0)){for(var s=this.model.getChildCells(o,!0),r=0,a=0;a<s.length;a++)0<=mxUtils.indexOf(t,s[a])&&r++;r==s.length&&n.push(o)}n.push(t[i])}n=d.apply(this,[n,e])}finally{this.model.endUpdate()}return n},Graph.prototype.updateCustomLinks=function(t,e){for(var n=0;n<e.length;n++)null!=e[n]&&this.updateCustomLinksForCell(t,e[n])},Graph.prototype.updateCustomLinksForCell=function(t,e){},Graph.prototype.getAllConnectionConstraints=function(t,e){if(null!=t){if(null!=(e=mxUtils.getValue(t.style,"points",null))){t=[];try{var n=JSON.parse(e);for(e=0;e<n.length;e++){var i=n[e];t.push(new mxConnectionConstraint(new mxPoint(i[0],i[1]),!(2<i.length)||"0"!=i[2],null,3<i.length?i[3]:0,4<i.length?i[4]:0))}}catch(t){}return t}if(null!=t.shape&&null!=t.shape.bounds){var l=t.shape.scale;if(n=(e=t.shape.bounds).width/l,e=e.height/l,(i=t.shape.direction)!=mxConstants.DIRECTION_NORTH&&i!=mxConstants.DIRECTION_SOUTH||(i=n,n=e,e=i),null!=(e=t.shape.getConstraints(t.style,n,e)))return e;if(null!=t.shape.stencil&&null!=t.shape.stencil.constraints)return t.shape.stencil.constraints;if(null!=t.shape.constraints)return t.shape.constraints}}return null},Graph.prototype.flipEdge=function(t){var e;null!=t&&(e=this.getCurrentCellStyle(t),e=mxUtils.getValue(e,mxConstants.STYLE_ELBOW,mxConstants.ELBOW_HORIZONTAL)==mxConstants.ELBOW_HORIZONTAL?mxConstants.ELBOW_VERTICAL:mxConstants.ELBOW_HORIZONTAL,this.setCellStyles(mxConstants.STYLE_ELBOW,e,[t]))},Graph.prototype.isValidRoot=function(t){for(var e=this.model.getChildCount(t),n=0,i=0;i<e;i++){var l=this.model.getChildAt(t,i);this.model.isVertex(l)&&(null==(l=this.getCellGeometry(l))||l.relative||n++)}return 0<n||this.isContainer(t)},Graph.prototype.isValidDropTarget=function(t,e,n){for(var i=this.getCurrentCellStyle(t),l=!0,o=!0,s=0;s<e.length&&o;s++)l=l&&this.isTable(e[s]),o=o&&this.isTableRow(e[s]);return("1"!=mxUtils.getValue(i,"part","0")||this.isContainer(t))&&"0"!=mxUtils.getValue(i,"dropTarget","1")&&(mxGraph.prototype.isValidDropTarget.apply(this,arguments)||this.isContainer(t))&&!this.isTableRow(t)&&(!this.isTable(t)||o||l)},Graph.prototype.createGroupCell=function(){var t=mxGraph.prototype.createGroupCell.apply(this,arguments);return t.setStyle("group"),t},Graph.prototype.isExtendParentsOnAdd=function(t){var e,n=mxGraph.prototype.isExtendParentsOnAdd.apply(this,arguments);return n&&null!=t&&null!=this.layoutManager&&(null==(e=this.model.getParent(t))||null!=(e=this.layoutManager.getLayout(e))&&e.constructor==mxStackLayout&&(n=!1)),n},Graph.prototype.getPreferredSizeForCell=function(t){var e=mxGraph.prototype.getPreferredSizeForCell.apply(this,arguments);return null!=e&&(e.width+=10,e.height+=4,this.gridEnabled&&(e.width=this.snap(e.width),e.height=this.snap(e.height))),e},Graph.prototype.turnShapes=function(t,e){var n=this.getModel(),i=[];n.beginUpdate();try{for(var l=0;l<t.length;l++){var o,s,r,a,h,u,d,c,p,m,g,x,y,f,v,b=t[l];n.isEdge(b)?(o=n.getTerminal(b,!0),s=n.getTerminal(b,!1),n.setTerminal(b,s,!0),n.setTerminal(b,o,!1),null!=(r=n.getGeometry(b))&&(null!=(r=r.clone()).points&&r.points.reverse(),a=r.getTerminalPoint(!0),h=r.getTerminalPoint(!1),r.setTerminalPoint(a,!1),r.setTerminalPoint(h,!0),n.setGeometry(b,r),u=this.view.getState(b),d=this.view.getState(o),c=this.view.getState(s),null!=u&&(p=null!=d?this.getConnectionConstraint(u,d,!0):null,m=null!=c?this.getConnectionConstraint(u,c,!1):null,this.setConnectionConstraint(b,o,!0,m),this.setConnectionConstraint(b,s,!1,p),g=mxUtils.getValue(u.style,mxConstants.STYLE_SOURCE_PERIMETER_SPACING),this.setCellStyles(mxConstants.STYLE_SOURCE_PERIMETER_SPACING,mxUtils.getValue(u.style,mxConstants.STYLE_TARGET_PERIMETER_SPACING),[b]),this.setCellStyles(mxConstants.STYLE_TARGET_PERIMETER_SPACING,g,[b])),i.push(b))):n.isVertex(b)&&null!=(r=this.getCellGeometry(b))&&(this.isTable(b)||this.isTableRow(b)||this.isTableCell(b)||this.isSwimlane(b)||((r=r.clone()).x+=r.width/2-r.height/2,r.y+=r.height/2-r.width/2,x=r.width,r.width=r.height,r.height=x,n.setGeometry(b,r)),null!=(y=this.view.getState(b))&&(f=[mxConstants.DIRECTION_EAST,mxConstants.DIRECTION_SOUTH,mxConstants.DIRECTION_WEST,mxConstants.DIRECTION_NORTH],v=mxUtils.getValue(y.style,mxConstants.STYLE_DIRECTION,mxConstants.DIRECTION_EAST),this.setCellStyles(mxConstants.STYLE_DIRECTION,f[mxUtils.mod(mxUtils.indexOf(f,v)+(e?-1:1),f.length)],[b])),i.push(b))}}finally{n.endUpdate()}return i},Graph.prototype.stencilHasPlaceholders=function(t){if(null!=t&&null!=t.fgNode)for(t=t.fgNode.firstChild;null!=t;){if("text"==t.nodeName&&"1"==t.getAttribute("placeholders"))return!0;t=t.nextSibling}return!1};var c=Graph.prototype.processChange;Graph.prototype.processChange=function(t){var e,n;t instanceof mxGeometryChange&&(this.isTableCell(t.cell)||this.isTableRow(t.cell))&&(null==t.previous&&null!=t.geometry||null!=t.previous&&!t.previous.equals(t.geometry))&&(this.isTableCell(e=t.cell)&&(e=this.model.getParent(e)),this.isTableRow(e)&&(e=this.model.getParent(e)),null!=(n=this.view.getState(e))&&null!=n.shape&&(this.view.invalidate(e),n.shape.bounds=null)),c.apply(this,arguments),t instanceof mxValueChange&&null!=t.cell&&null!=t.cell.value&&"object"==typeof t.cell.value&&this.invalidateDescendantsWithPlaceholders(t.cell)},Graph.prototype.invalidateDescendantsWithPlaceholders=function(t){if(0<(t=this.model.getDescendants(t)).length)for(var e=0;e<t.length;e++){var n=this.view.getState(t[e]);null!=n&&null!=n.shape&&null!=n.shape.stencil&&this.stencilHasPlaceholders(n.shape.stencil)?this.removeStateForCell(t[e]):this.isReplacePlaceholders(t[e])&&this.view.invalidate(t[e],!1,!1)}},Graph.prototype.replaceElement=function(t,e){e=t.ownerDocument.createElement(null!=e?e:"span");for(var n=Array.prototype.slice.call(t.attributes);attr=n.pop();)e.setAttribute(attr.nodeName,attr.nodeValue);e.innerHTML=t.innerHTML,t.parentNode.replaceChild(e,t)},Graph.prototype.processElements=function(t,e){if(null!=t){t=t.getElementsByTagName("*");for(var n=0;n<t.length;n++)e(t[n])}},Graph.prototype.updateLabelElements=function(t,e,n){t=null!=t?t:this.getSelectionCells();for(var i=document.createElement("div"),l=0;l<t.length;l++)if(this.isHtmlLabel(t[l])){var o=this.convertValueToString(t[l]);if(null!=o&&0<o.length){i.innerHTML=o;for(var s=i.getElementsByTagName(null!=n?n:"*"),r=0;r<s.length;r++)e(s[r]);i.innerHTML!=o&&this.cellLabelChanged(t[l],i.innerHTML)}}},Graph.prototype.cellLabelChanged=function(t,e,n){e=Graph.zapGremlins(e),this.model.beginUpdate();try{if(null!=t.value&&"object"==typeof t.value){if(this.isReplacePlaceholders(t)&&null!=t.getAttribute("placeholder"))for(var i=t.getAttribute("placeholder"),l=t;null!=l;){if(l==this.model.getRoot()||null!=l.value&&"object"==typeof l.value&&l.hasAttribute(i)){this.setAttributeForCell(l,i,e);break}l=this.model.getParent(l)}var o=t.value.cloneNode(!0);Graph.translateDiagram&&null!=Graph.diagramLanguage&&o.hasAttribute("label_"+Graph.diagramLanguage)?o.setAttribute("label_"+Graph.diagramLanguage,e):o.setAttribute("label",e),e=o}mxGraph.prototype.cellLabelChanged.apply(this,arguments)}finally{this.model.endUpdate()}},Graph.prototype.cellsRemoved=function(t){if(null!=t){for(var e=new mxDictionary,n=0;n<t.length;n++)e.put(t[n],!0);var i=[];for(n=0;n<t.length;n++){var l=this.model.getParent(t[n]);null==l||e.get(l)||(e.put(l,!0),i.push(l))}for(n=0;n<i.length;n++)if(null!=(l=this.view.getState(i[n]))&&(this.model.isEdge(l.cell)||this.model.isVertex(l.cell))&&this.isCellDeletable(l.cell)&&this.isTransparentState(l)){for(var o=!0,s=0;s<this.model.getChildCount(l.cell)&&o;s++)e.get(this.model.getChildAt(l.cell,s))||(o=!1);o&&t.push(l.cell)}}mxGraph.prototype.cellsRemoved.apply(this,arguments)},Graph.prototype.removeCellsAfterUngroup=function(t){for(var e=[],n=0;n<t.length;n++)this.isCellDeletable(t[n])&&this.isTransparentState(this.view.getState(t[n]))&&e.push(t[n]);t=e,mxGraph.prototype.removeCellsAfterUngroup.apply(this,arguments)},Graph.prototype.setLinkForCell=function(t,e){this.setAttributeForCell(t,"link",e)},Graph.prototype.setTooltipForCell=function(t,e){var n="tooltip";Graph.translateDiagram&&null!=Graph.diagramLanguage&&mxUtils.isNode(t.value)&&t.value.hasAttribute("tooltip_"+Graph.diagramLanguage)&&(n="tooltip_"+Graph.diagramLanguage),this.setAttributeForCell(t,n,e)},Graph.prototype.getAttributeForCell=function(t,e,n){return null!=(t=null!=t.value&&"object"==typeof t.value?t.value.getAttribute(e):null)?t:n},Graph.prototype.setAttributeForCell=function(t,e,n){var i;null!=t.value&&"object"==typeof t.value?i=t.value.cloneNode(!0):(i=mxUtils.createXmlDocument().createElement("UserObject")).setAttribute("label",t.value||""),null!=n?i.setAttribute(e,n):i.removeAttribute(e),this.model.setValue(t,i)};var p=Graph.prototype.getDropTarget;Graph.prototype.getDropTarget=function(t,e,n,i){if(this.getModel(),mxEvent.isAltDown(e))return null;for(var l=0;l<t.length;l++)if(this.model.isEdge(this.model.getParent(t[l])))return null;var o=p.apply(this,arguments),s=!0;for(l=0;l<t.length&&s;l++)s=s&&this.isTableRow(t[l]);return s&&(this.isTableCell(o)&&(o=this.model.getParent(o)),this.isTableRow(o)&&(o=this.model.getParent(o)),this.isTable(o)||(o=null)),o},Graph.prototype.click=function(t){mxGraph.prototype.click.call(this,t),this.firstClickState=t.getState(),this.firstClickSource=t.getSource()},Graph.prototype.dblClick=function(t,e){this.isEnabled()&&(e=this.insertTextForEvent(t,e),mxGraph.prototype.dblClick.call(this,t,e))},Graph.prototype.insertTextForEvent=function(t,e){var n,i,l=mxUtils.convertPoint(this.container,mxEvent.getClientX(t),mxEvent.getClientY(t));return null==t||this.model.isVertex(e)||(n=this.model.isEdge(e)?this.view.getState(e):null,i=mxEvent.getSource(t),this.firstClickState!=n||this.firstClickSource!=i||null!=n&&null!=n.text&&null!=n.text.node&&null!=n.text.boundingBox&&(mxUtils.contains(n.text.boundingBox,l.x,l.y)||mxUtils.isAncestorNode(n.text.node,mxEvent.getSource(t)))||(null!=n||this.isCellLocked(this.getDefaultParent()))&&(null==n||this.isCellLocked(n.cell))||!(null!=n||mxClient.IS_SVG&&i==this.view.getCanvas().ownerSVGElement)||(null==n&&(n=this.view.getState(this.getCellAt(l.x,l.y))),e=this.addText(l.x,l.y,n))),e},Graph.prototype.getInsertPoint=function(){var t,e,n=this.getGridSize(),i=this.container.scrollLeft/this.view.scale-this.view.translate.x,l=this.container.scrollTop/this.view.scale-this.view.translate.y;return this.pageVisible&&(t=this.getPageLayout(),e=this.getPageSize(),i=Math.max(i,t.x*e.width),l=Math.max(l,t.y*e.height)),new mxPoint(this.snap(i+n),this.snap(l+n))},Graph.prototype.getFreeInsertPoint=function(){var t=this.view,e=this.getGraphBounds(),n=this.getInsertPoint();return new mxPoint(this.snap(Math.round(Math.max(n.x,e.x/t.scale-t.translate.x+(0==e.width?2*this.gridSize:0)))),t=this.snap(Math.round(Math.max(n.y,(e.y+e.height)/t.scale-t.translate.y+2*this.gridSize))))},Graph.prototype.getCenterInsertPoint=function(t){return t=null!=t?t:new mxRectangle,mxUtils.hasScrollbars(this.container)?new mxPoint(this.snap(Math.round((this.container.scrollLeft+this.container.clientWidth/2)/this.view.scale-this.view.translate.x-t.width/2)),this.snap(Math.round((this.container.scrollTop+this.container.clientHeight/2)/this.view.scale-this.view.translate.y-t.height/2))):new mxPoint(this.snap(Math.round(this.container.clientWidth/2/this.view.scale-this.view.translate.x-t.width/2)),this.snap(Math.round(this.container.clientHeight/2/this.view.scale-this.view.translate.y-t.height/2)))},Graph.prototype.isMouseInsertPoint=function(){return!1},Graph.prototype.addText=function(t,e,n){var i,l,o=new mxCell;o.value="Text",o.geometry=new mxGeometry(0,0,0,0),o.vertex=!0,null!=n&&this.model.isEdge(n.cell)?(o.style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];",o.geometry.relative=!0,o.connectable=!1,i=this.view.getRelativePoint(n,t,e),o.geometry.x=Math.round(1e4*i.x)/1e4,o.geometry.y=Math.round(i.y),o.geometry.offset=new mxPoint(0,0),i=this.view.getPoint(n,o.geometry),l=this.view.scale,o.geometry.offset=new mxPoint(Math.round((t-i.x)/l),Math.round((e-i.y)/l))):(i=this.view.translate,o.style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];",o.geometry.width=40,o.geometry.height=20,o.geometry.x=Math.round(t/this.view.scale)-i.x-(null!=n?n.origin.x:0),o.geometry.y=Math.round(e/this.view.scale)-i.y-(null!=n?n.origin.y:0),o.style+="autosize=1;"),this.getModel().beginUpdate();try{this.addCells([o],null!=n?n.cell:null),this.fireEvent(new mxEventObject("textInserted","cells",[o])),this.autoSizeCell(o)}finally{this.getModel().endUpdate()}return o},Graph.prototype.addClickHandler=function(t,e,n){var i=mxUtils.bind(this,function(){var t=this.container.getElementsByTagName("a");if(null!=t)for(var n=0;n<t.length;n++){var i=this.getAbsoluteUrl(t[n].getAttribute("href"));null!=i&&(t[n].setAttribute("rel",this.linkRelation),t[n].setAttribute("href",i),null!=e&&mxEvent.addGestureListeners(t[n],null,null,e))}});this.model.addListener(mxEvent.CHANGE,i),i();var l=this.container.style.cursor,o=this.getTolerance(),s=this,r={currentState:null,currentLink:null,currentTarget:null,highlight:null!=t&&""!=t&&t!=mxConstants.NONE?new mxCellHighlight(s,t,4):null,startX:0,startY:0,scrollLeft:0,scrollTop:0,updateCurrentState:function(t){var e=t.sourceState;null!=e&&null!=s.getLinkForCell(e.cell)||(t=s.getCellAt(t.getGraphX(),t.getGraphY(),null,null,null,function(t,e,n){return null==s.getLinkForCell(t.cell)}),e=s.view.getState(t)),e!=this.currentState&&(null!=this.currentState&&this.clear(),this.currentState=e,null!=this.currentState&&this.activate(this.currentState))},mouseDown:function(t,e){this.startX=e.getGraphX(),this.startY=e.getGraphY(),this.scrollLeft=s.container.scrollLeft,this.scrollTop=s.container.scrollTop,null==this.currentLink&&"auto"==s.container.style.overflow&&(s.container.style.cursor="move"),this.updateCurrentState(e)},mouseMove:function(t,e){if(s.isMouseDown)null!=this.currentLink&&(t=Math.abs(this.startX-e.getGraphX()),e=Math.abs(this.startY-e.getGraphY()),(o<t||o<e)&&this.clear());else{for(t=e.getSource();null!=t&&"a"!=t.nodeName.toLowerCase();)t=t.parentNode;null!=t?this.clear():(null!=s.tooltipHandler&&null!=this.currentLink&&null!=this.currentState&&s.tooltipHandler.reset(e,!0,this.currentState),null!=this.currentState&&(e.getState()==this.currentState||null==e.sourceState)&&s.intersects(this.currentState,e.getGraphX(),e.getGraphY())||this.updateCurrentState(e))}},mouseUp:function(t,i){var l=i.getSource();for(t=i.getEvent();null!=l&&"a"!=l.nodeName.toLowerCase();)l=l.parentNode;null==l&&Math.abs(this.scrollLeft-s.container.scrollLeft)<o&&Math.abs(this.scrollTop-s.container.scrollTop)<o&&(null==i.sourceState||!i.isSource(i.sourceState.control))&&((mxEvent.isLeftMouseButton(t)||mxEvent.isMiddleMouseButton(t))&&!mxEvent.isPopupTrigger(t)||mxEvent.isTouchEvent(t))&&(null!=this.currentLink?(l=s.isBlankLink(this.currentLink),"data:"!==this.currentLink.substring(0,5)&&l||null==e||e(t,this.currentLink),mxEvent.isConsumed(t)||(t=null!=this.currentTarget?this.currentTarget:mxEvent.isMiddleMouseButton(t)?"_blank":l?s.linkTarget:"_top",s.openLink(this.currentLink,t),i.consume())):null!=n&&!i.isConsumed()&&Math.abs(this.scrollLeft-s.container.scrollLeft)<o&&Math.abs(this.scrollTop-s.container.scrollTop)<o&&Math.abs(this.startX-i.getGraphX())<o&&Math.abs(this.startY-i.getGraphY())<o&&n(i.getEvent())),this.clear()},activate:function(t){this.currentLink=s.getAbsoluteUrl(s.getLinkForCell(t.cell)),null!=this.currentLink&&(this.currentTarget=s.getLinkTargetForCell(t.cell),s.container.style.cursor="pointer",null!=this.highlight&&this.highlight.highlight(t))},clear:function(){null!=s.container&&(s.container.style.cursor=l),(this.currentLink=this.currentState=this.currentTarget=null)!=this.highlight&&this.highlight.hide(),null!=s.tooltipHandler&&s.tooltipHandler.hide()}};s.click=function(t){},s.addMouseListener(r),mxEvent.addListener(document,"mouseleave",function(t){r.clear()})},Graph.prototype.duplicateCells=function(t,e){t=null!=t?t:this.getSelectionCells(),e=null==e||e;for(var n=0;n<t.length;n++)this.isTableCell(t[n])&&(t[n]=this.model.getParent(t[n]));t=this.model.getTopmostCells(t);var i=this.getModel(),l=this.gridSize,o=[];i.beginUpdate();try{var s=this.cloneCells(t,!1,null,!0);for(n=0;n<t.length;n++){var r,a,h,u=i.getParent(t[n]),d=this.moveCells([s[n]],l,l,!1)[0];o.push(d),e?i.add(u,s[n]):(r=u.getIndex(t[n]),i.add(u,s[n],r+1)),this.isTable(u)&&(a=this.getCellGeometry(s[n]),h=this.getCellGeometry(u),null!=a&&null!=h&&((h=h.clone()).height+=a.height,i.setGeometry(u,h)))}}finally{i.endUpdate()}return o},Graph.prototype.insertImage=function(t,e,n){if(null!=t&&null!=this.cellEditor.textarea){for(var i=this.cellEditor.textarea.getElementsByTagName("img"),l=[],o=0;o<i.length;o++)l.push(i[o]);if(document.execCommand("insertimage",!1,t),(t=this.cellEditor.textarea.getElementsByTagName("img")).length==l.length+1)for(o=t.length-1;0<=o;o--)if(0==o||t[o]!=l[o-1]){t[o].setAttribute("width",e),t[o].setAttribute("height",n);break}}},Graph.prototype.insertLink=function(t){if(null!=this.cellEditor.textarea)if(0==t.length)document.execCommand("unlink",!1);else if(mxClient.IS_FF){for(var e=this.cellEditor.textarea.getElementsByTagName("a"),n=[],i=0;i<e.length;i++)n.push(e[i]);if(document.execCommand("createlink",!1,mxUtils.trim(t)),(e=this.cellEditor.textarea.getElementsByTagName("a")).length==n.length+1)for(i=e.length-1;0<=i;i--)if(e[i]!=n[i-1]){for(e=e[i].getElementsByTagName("a");0<e.length;){for(n=e[0].parentNode;null!=e[0].firstChild;)n.insertBefore(e[0].firstChild,e[0]);n.removeChild(e[0])}break}}else document.execCommand("createlink",!1,mxUtils.trim(t))},Graph.prototype.isCellResizable=function(t){var e=mxGraph.prototype.isCellResizable.apply(this,arguments),n=this.getCurrentCellStyle(t);return!this.isTableCell(t)&&!this.isTableRow(t)&&(e||"0"!=mxUtils.getValue(n,mxConstants.STYLE_RESIZABLE,"1")&&"wrap"==n[mxConstants.STYLE_WHITE_SPACE])},Graph.prototype.distributeCells=function(t,e){if(null!=(e=null==e?this.getSelectionCells():e)&&1<e.length){for(var n,i,l=[],o=null,s=null,r=0;r<e.length;r++)!this.getModel().isVertex(e[r])||null!=(n=this.view.getState(e[r]))&&(i=t?n.getCenterX():n.getCenterY(),o=null!=o?Math.max(o,i):i,s=null!=s?Math.min(s,i):i,l.push(n));if(2<l.length){l.sort(function(e,n){return t?e.x-n.x:e.y-n.y}),n=this.view.translate,s=s/(i=this.view.scale)-(t?n.x:n.y),o=o/i-(t?n.x:n.y),this.getModel().beginUpdate();try{var a=(o-s)/(l.length-1);for(o=s,r=1;r<l.length-1;r++){var h=this.view.getState(this.model.getParent(l[r].cell)),u=this.getCellGeometry(l[r].cell);o+=a,null!=u&&null!=h&&(u=u.clone(),t?u.x=Math.round(o-u.width/2)-h.origin.x:u.y=Math.round(o-u.height/2)-h.origin.y,this.getModel().setGeometry(l[r].cell,u))}}finally{this.getModel().endUpdate()}}}return e},Graph.prototype.isCloneEvent=function(t){return mxClient.IS_MAC&&mxEvent.isMetaDown(t)||mxEvent.isControlDown(t)},Graph.prototype.createSvgImageExport=function(){var t=new mxImageExport;return t.getLinkForCellState=mxUtils.bind(this,function(t,e){return this.getLinkForCell(t.cell)}),t},Graph.prototype.getSvg=function(t,e,n,i,l,o,s,r,a,h,u,d,c,p){var m=null;if(null!=p)for(m=new mxDictionary,u=0;u<p.length;u++)m.put(p[u],!0);(p=this.useCssTransforms)&&(this.useCssTransforms=!1,this.view.revalidate(),this.sizeDidChange());try{e=null!=e?e:1,n=null!=n?n:0,l=null==l||l,o=null==o||o,s=null==s||s;var g="page"==c?this.view.getBackgroundPageBounds():o&&null==m||i||"diagram"==c?this.getGraphBounds():this.getBoundingBox(this.getSelectionCells());if(null==g)throw Error(mxResources.get("drawingEmpty"));var x=this.view.scale,y=mxUtils.createXmlDocument(),f=null!=y.createElementNS?y.createElementNS(mxConstants.NS_SVG,"svg"):y.createElement("svg");null!=t&&(null!=f.style?f.style.backgroundColor=t:f.setAttribute("style","background-color:"+t)),null==y.createElementNS?(f.setAttribute("xmlns",mxConstants.NS_SVG),f.setAttribute("xmlns:xlink",mxConstants.NS_XLINK)):f.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xlink",mxConstants.NS_XLINK),t=e/x;var v=Math.max(1,Math.ceil(g.width*t)+2*n)+(h?5:0),b=Math.max(1,Math.ceil(g.height*t)+2*n)+(h?5:0);f.setAttribute("version","1.1"),f.setAttribute("width",v+"px"),f.setAttribute("height",b+"px"),f.setAttribute("viewBox",(l?"-0.5 -0.5":"0 0")+" "+v+" "+b),y.appendChild(f);var C=null!=y.createElementNS?y.createElementNS(mxConstants.NS_SVG,"g"):y.createElement("g");f.appendChild(C);var E=this.createSvgCanvas(C);E.foOffset=l?-.5:0,E.textOffset=l?-.5:0,E.imageOffset=l?-.5:0,E.translate(Math.floor((n/e-g.x)/x),Math.floor((n/e-g.y)/x));var S=document.createElement("div"),w=E.getAlternateText;E.getAlternateText=function(t,e,n,i,l,o,s,r,a,h,u,d,c){if(!(null!=o&&0<this.state.fontSize))return w.apply(this,arguments);try{o=mxUtils.isNode(o)?o.innerText:(S.innerHTML=o,mxUtils.extractTextWithWhitespace(S.childNodes));for(var p=Math.ceil(2*i/this.state.fontSize),m=[],g=0,x=0;(0==p||g<p)&&x<o.length;){var y=o.charCodeAt(x);if(10==y||13==y){if(0<g)break}else m.push(o.charAt(x)),y<255&&g++;x++}return m.length<o.length&&1<o.length-m.length?mxUtils.trim(m.join(""))+"...":o}catch(t){return w.apply(this,arguments)}};var T,A,M=this.backgroundImage;null!=M&&(A=new mxRectangle((T=this.view.translate).x*(e=x/e),T.y*e,M.width*e,M.height*e),mxUtils.intersects(g,A)&&E.image(T.x,T.y,M.width,M.height,M.src,!0)),E.scale(t),E.textEnabled=s;var L=(r=null!=r?r:this.createSvgImageExport()).drawCellState,P=r.getLinkForCellState;return r.getLinkForCellState=function(t,e){var n=P.apply(this,arguments);return null==n||t.view.graph.isCustomLink(n)?null:n},r.getLinkTargetForCellState=function(t,e){return t.view.graph.getLinkTargetForCell(t.cell)},r.drawCellState=function(t,e){for(var n=t.view.graph,i=null!=m?m.get(t.cell):n.isCellSelected(t.cell),l=n.model.getParent(t.cell);!(o&&null==m||i)&&null!=l;)i=null!=m?m.get(l):n.isCellSelected(l),l=n.model.getParent(l);(o&&null==m||i)&&L.apply(this,arguments)},r.drawState(this.getView().getState(this.model.root),E),this.updateSvgLinks(f,a,!0),this.addForeignObjectWarning(E,f),f}finally{p&&(this.useCssTransforms=!0,this.view.revalidate(),this.sizeDidChange())}},Graph.prototype.addForeignObjectWarning=function(t,e){var n,i,l;"0"!=urlParams["svg-warning"]&&0<e.getElementsByTagName("foreignObject").length&&(n=t.createElement("switch"),(i=t.createElement("g")).setAttribute("requiredFeatures","http://www.w3.org/TR/SVG11/feature#Extensibility"),(l=t.createElement("a")).setAttribute("transform","translate(0,-5)"),null==l.setAttributeNS||e.ownerDocument!=document&&null==document.documentMode?(l.setAttribute("xlink:href",Graph.foreignObjectWarningLink),l.setAttribute("target","_blank")):(l.setAttributeNS(mxConstants.NS_XLINK,"xlink:href",Graph.foreignObjectWarningLink),l.setAttributeNS(mxConstants.NS_XLINK,"target","_blank")),(t=t.createElement("text")).setAttribute("text-anchor","middle"),t.setAttribute("font-size","10px"),t.setAttribute("x","50%"),t.setAttribute("y","100%"),mxUtils.write(t,Graph.foreignObjectWarningText),n.appendChild(i),l.appendChild(t),n.appendChild(l),e.appendChild(n))},Graph.prototype.updateSvgLinks=function(t,e,n){t=t.getElementsByTagName("a");for(var i,l=0;l<t.length;l++)null!=t[l].getAttribute("target")||null!=(i=null==(i=t[l].getAttribute("href"))?t[l].getAttribute("xlink:href"):i)&&(null!=e&&/^https?:\/\//.test(i)?t[l].setAttribute("target",e):n&&this.isCustomLink(i)&&t[l].setAttribute("href","javascript:void(0);"))},Graph.prototype.createSvgCanvas=function(t){return(t=new mxSvgCanvas2D(t)).pointerEvents=!0,t},Graph.prototype.getSelectedElement=function(){var t,e=null;return window.getSelection?(t=window.getSelection()).getRangeAt&&t.rangeCount&&(e=t.getRangeAt(0).commonAncestorContainer):document.selection&&(e=document.selection.createRange().parentElement()),e},Graph.prototype.getSelectedEditingElement=function(){for(var t=this.getSelectedElement();null!=t&&t.nodeType!=mxConstants.NODETYPE_ELEMENT;)t=t.parentNode;return null!=t&&t==this.cellEditor.textarea&&1==this.cellEditor.textarea.children.length&&this.cellEditor.textarea.firstChild.nodeType==mxConstants.NODETYPE_ELEMENT?this.cellEditor.textarea.firstChild:t},Graph.prototype.getParentByName=function(t,e,n){for(;null!=t&&t.nodeName!=e;){if(t==n)return null;t=t.parentNode}return t},Graph.prototype.getParentByNames=function(t,e,n){for(;null!=t&&!(0<=mxUtils.indexOf(e,t.nodeName));){if(t==n)return null;t=t.parentNode}return t},Graph.prototype.selectNode=function(t){var e,n=null;window.getSelection?(n=window.getSelection()).getRangeAt&&n.rangeCount&&((e=document.createRange()).selectNode(t),n.removeAllRanges(),n.addRange(e)):(n=document.selection)&&"Control"!=n.type&&((t=n.createRange()).collapse(!0),(e=n.createRange()).setEndPoint("StartToStart",t),e.select())},Graph.prototype.deleteCells=function(t,e){var n=null;if(null!=t&&0<t.length){this.model.beginUpdate();try{for(var i=0;i<t.length;i++){var l,o,s=this.model.getParent(t[i]);this.isTable(s)&&(l=this.getCellGeometry(t[i]),o=this.getCellGeometry(s),null!=l&&null!=o&&((o=o.clone()).height-=l.height,this.model.setGeometry(s,o)))}var r=this.selectParentAfterDelete?this.model.getParents(t):null;this.removeCells(t,e)}finally{this.model.endUpdate()}if(null!=r)for(n=[],i=0;i<r.length;i++)this.model.contains(r[i])&&(this.model.isVertex(r[i])||this.model.isEdge(r[i]))&&n.push(r[i])}return n},Graph.prototype.insertTableColumn=function(t,e){var n=this.getModel();n.beginUpdate();try{var i,l=t,o=0;this.isTableCell(t)?(i=n.getParent(t),l=n.getParent(i),o=mxUtils.indexOf(n.getChildCells(i,!0),t)):(this.isTableRow(t)?l=n.getParent(t):t=n.getChildCells(l,!0)[0],e||(o=n.getChildCells(t,!0).length-1));var s=n.getChildCells(l,!0),r=Graph.minTableColumnWidth;for(t=0;t<s.length;t++){var a,h=n.getChildCells(s[t],!0)[o],u=n.cloneCell(h,!1),d=this.getCellGeometry(u);(u.value=null)!=d&&(r=d.width,null!=(a=this.getCellGeometry(s[t]))&&(d.height=a.height)),n.add(s[t],u,o+(e?0:1))}var c=this.getCellGeometry(l);null!=c&&((c=c.clone()).width+=r,n.setGeometry(l,c))}finally{n.endUpdate()}},Graph.prototype.insertTableRow=function(t,e){var n=this.getModel();n.beginUpdate();try{var i,l=t,o=t;this.isTableCell(t)?(o=n.getParent(t),l=n.getParent(o)):this.isTableRow(t)?l=n.getParent(t):o=(i=n.getChildCells(l,!0))[e?0:i.length-1];var s=n.getChildCells(o,!0),r=l.getIndex(o);(o=n.cloneCell(o,!1)).value=null;var a=this.getCellGeometry(o);if(null!=a){for(i=0;i<s.length;i++){t=n.cloneCell(s[i],!1),o.insert(t),t.value=null;var h=this.getCellGeometry(t);null!=h&&(h.height=a.height)}n.add(l,o,r+(e?0:1));var u=this.getCellGeometry(l);null!=u&&((u=u.clone()).height+=a.height,n.setGeometry(l,u))}}finally{n.endUpdate()}},Graph.prototype.deleteTableColumn=function(t){var e=this.getModel();e.beginUpdate();try{var n=t,i=t;this.isTableCell(t)&&(i=e.getParent(t)),this.isTableRow(i)&&(n=e.getParent(i));var l=e.getChildCells(n,!0);if(0==l.length)e.remove(n);else{this.isTableRow(i)||(i=l[0]);var o=e.getChildCells(i,!0);if(o.length<=1)e.remove(n);else{var s=o.length-1;for(this.isTableCell(t)&&(s=mxUtils.indexOf(o,t)),i=t=0;i<l.length;i++){var r=e.getChildCells(l[i],!0)[s];e.remove(r);var a=this.getCellGeometry(r);null!=a&&(t=Math.max(t,a.width))}var h=this.getCellGeometry(n);null!=h&&((h=h.clone()).width-=t,e.setGeometry(n,h))}}}finally{e.endUpdate()}},Graph.prototype.deleteTableRow=function(t){var e=this.getModel();e.beginUpdate();try{var n=t,i=t;this.isTableCell(t)&&(t=i=e.getParent(t)),this.isTableRow(t)&&(n=e.getParent(i));var l,o,s=e.getChildCells(n,!0);s.length<=1?e.remove(n):(this.isTableRow(i)||(i=s[s.length-1]),e.remove(i),t=0,null!=(l=this.getCellGeometry(i))&&(t=l.height),null!=(o=this.getCellGeometry(n))&&((o=o.clone()).height-=t,e.setGeometry(n,o)))}finally{e.endUpdate()}},Graph.prototype.insertRow=function(t,e){for(var n=t.tBodies[0],i=n.rows[0].cells,l=t=0;l<i.length;l++){var o=i[l].getAttribute("colspan");t+=null!=o?parseInt(o):1}for(e=n.insertRow(e),l=0;l<t;l++)mxUtils.br(e.insertCell(-1));return e.cells[0]},Graph.prototype.deleteRow=function(t,e){t.tBodies[0].deleteRow(e)},Graph.prototype.insertColumn=function(t,e){var n=t.tHead;if(null!=n)for(var i=0;i<n.rows.length;i++){var l=document.createElement("th");n.rows[i].appendChild(l),mxUtils.br(l)}for(t=t.tBodies[0],n=0;n<t.rows.length;n++)i=t.rows[n].insertCell(e),mxUtils.br(i);return t.rows[0].cells[0<=e?e:t.rows[0].cells.length-1]},Graph.prototype.deleteColumn=function(t,e){if(0<=e){t=t.tBodies[0].rows;for(var n=0;n<t.length;n++)t[n].cells.length>e&&t[n].deleteCell(e)}},Graph.prototype.pasteHtmlAtCaret=function(t){if(window.getSelection){var e=window.getSelection();if(e.getRangeAt&&e.rangeCount){(e=e.getRangeAt(0)).deleteContents();var n,i=document.createElement("div");for(i.innerHTML=t,t=document.createDocumentFragment();n=i.firstChild;)lastNode=t.appendChild(n);e.insertNode(t)}}else(e=document.selection)&&"Control"!=e.type&&e.createRange().pasteHTML(t)},Graph.prototype.createLinkForHint=function(t,e){function n(t,e){return t.length>e?t.substring(0,Math.round(e/2))+"..."+t.substring(t.length-Math.round(e/4)):t}t=null!=t?t:"javascript:void(0);",null!=e&&0!=e.length||(e=this.isCustomLink(t)?this.getLinkTitle(t):t);var i=document.createElement("a");return i.setAttribute("rel",this.linkRelation),i.setAttribute("href",this.getAbsoluteUrl(t)),i.setAttribute("title",n(this.isCustomLink(t)?this.getLinkTitle(t):t,80)),null!=this.linkTarget&&i.setAttribute("target",this.linkTarget),mxUtils.write(i,n(e,40)),this.isCustomLink(t)&&mxEvent.addListener(i,"click",mxUtils.bind(this,function(e){this.customLinkClicked(t),mxEvent.consume(e)})),i},Graph.prototype.initTouch=function(){this.connectionHandler.marker.isEnabled=function(){return null!=this.graph.connectionHandler.first},this.addListener(mxEvent.START_EDITING,function(t,e){this.popupMenuHandler.hideMenu()});var t=this.updateMouseEvent,e=!(this.updateMouseEvent=function(e){var n;return e=t.apply(this,arguments),mxEvent.isTouchEvent(e.getEvent())&&null==e.getState()&&(null!=(n=this.getCellAt(e.graphX,e.graphY))&&this.isSwimlane(n)&&this.hitsSwimlaneContent(n,e.graphX,e.graphY)||(e.state=this.view.getState(n),null!=e.state&&null!=e.state.shape&&(this.container.style.cursor=e.state.shape.node.style.cursor))),null==e.getState()&&this.isEnabled()&&(this.container.style.cursor="default"),e}),n=!1,i=!1,l=this.fireMouseEvent;this.fireMouseEvent=function(t,o,s){t==mxEvent.MOUSE_DOWN&&(o=this.updateMouseEvent(o),e=this.isCellSelected(o.getCell()),n=this.isSelectionEmpty(),i=this.popupMenuHandler.isMenuShowing()),l.apply(this,arguments)},this.popupMenuHandler.mouseUp=mxUtils.bind(this,function(t,l){this.popupMenuHandler.popupTrigger=!this.isEditing()&&this.isEnabled()&&(null==l.getState()||!l.isSource(l.getState().control))&&(this.popupMenuHandler.popupTrigger||!i&&!mxEvent.isMouseEvent(l.getEvent())&&(n&&null==l.getCell()&&this.isSelectionEmpty()||e&&this.isCellSelected(l.getCell()))),mxPopupMenuHandler.prototype.mouseUp.apply(this.popupMenuHandler,arguments)})},mxCellEditor.prototype.isContentEditing=function(){var t=this.graph.view.getState(this.editingCell);return null!=t&&1==t.style.html},mxCellEditor.prototype.isTableSelected=function(){return null!=this.graph.getParentByName(this.graph.getSelectedElement(),"TABLE",this.textarea)},mxCellEditor.prototype.alignText=function(t,e){var n,i=null!=e&&mxEvent.isShiftDown(e);(i||null!=window.getSelection&&null!=window.getSelection().containsNode)&&(n=!0,this.graph.processElements(this.textarea,function(t){i||window.getSelection().containsNode(t,!0)?(t.removeAttribute("align"),t.style.textAlign=null):n=!1}),n&&this.graph.cellEditor.setAlign(t)),document.execCommand("justify"+t.toLowerCase(),!1,null)},mxCellEditor.prototype.saveSelection=function(){if(window.getSelection){var t=window.getSelection();if(t.getRangeAt&&t.rangeCount){for(var e=[],n=0,i=t.rangeCount;n<i;++n)e.push(t.getRangeAt(n));return e}}else if(document.selection&&document.selection.createRange)return document.selection.createRange();return null},mxCellEditor.prototype.restoreSelection=function(t){try{if(t)if(window.getSelection){sel=window.getSelection(),sel.removeAllRanges();for(var e=0,n=t.length;e<n;++e)sel.addRange(t[e])}else document.selection&&t.select&&t.select()}catch(t){}};var m=mxCellRenderer.prototype.initializeLabel;mxCellRenderer.prototype.initializeLabel=function(t){null!=t.text&&(t.text.replaceLinefeeds="0"!=mxUtils.getValue(t.style,"nl2Br","1")),m.apply(this,arguments)};var g=mxConstraintHandler.prototype.update;mxConstraintHandler.prototype.update=function(t,e){this.isKeepFocusEvent(t)||!mxEvent.isAltDown(t.getEvent())?g.apply(this,arguments):this.reset()},mxGuide.prototype.createGuideShape=function(t){return new mxPolyline([],mxConstants.GUIDE_COLOR,mxConstants.GUIDE_STROKEWIDTH)},mxCellEditor.prototype.escapeCancelsEditing=!1;var x=mxCellEditor.prototype.startEditing;mxCellEditor.prototype.startEditing=function(t,e){t=this.graph.getStartEditingCell(t,e),x.apply(this,arguments);var n=this.graph.view.getState(t);this.textarea.className=null!=n&&1==n.style.html?"mxCellEditor geContentEditable":"mxCellEditor mxPlainTextEditor",this.codeViewMode=!1,this.switchSelectionState=null,this.graph.setSelectionCell(t),n=this.graph.getModel().getParent(t);var i=this.graph.getCellGeometry(t);(this.graph.getModel().isEdge(n)&&null!=i&&i.relative||this.graph.getModel().isEdge(t))&&(this.textarea.style.outline=mxClient.IS_IE||mxClient.IS_IE11||mxClient.IS_FF&&mxClient.IS_WIN?"gray dotted 1px":"")};var y=mxCellEditor.prototype.installListeners;mxCellEditor.prototype.installListeners=function(t){function e(t){for(var n=t.firstChild;null!=n;){var i=n.nextSibling;e(n),n=i}1==t.nodeType&&("BR"===t.nodeName||null!=t.firstChild)||3==t.nodeType&&0!=mxUtils.trim(mxUtils.getTextContent(t)).length?(3==t.nodeType&&mxUtils.setTextContent(t,mxUtils.getTextContent(t).replace(/\n|\r/g,"")),1==t.nodeType&&(t.removeAttribute("style"),t.removeAttribute("class"),t.removeAttribute("width"),t.removeAttribute("cellpadding"),t.removeAttribute("cellspacing"),t.removeAttribute("border"))):t.parentNode.removeChild(t)}y.apply(this,arguments),7!==document.documentMode&&8!==document.documentMode&&mxEvent.addListener(this.textarea,"paste",mxUtils.bind(this,function(t){var n=function t(e,n){e=(n.originalNode=e).firstChild;for(var i=n.firstChild;null!=e&&null!=i;)t(e,i),e=e.nextSibling,i=i.nextSibling;return n}(this.textarea,this.textarea.cloneNode(!0));window.setTimeout(mxUtils.bind(this,function(){null!=this.textarea&&(0<=this.textarea.innerHTML.indexOf("<o:OfficeDocumentSettings>")||0<=this.textarea.innerHTML.indexOf("\x3c!--[if !mso]>")?function t(n,i){if(null!=n)if(i.originalNode!=n)e(n);else for(n=n.firstChild,i=i.firstChild;null!=n;){var l=n.nextSibling;null==i?e(n):(t(n,i),i=i.nextSibling),n=l}}(this.textarea,n):Graph.removePasteFormatting(this.textarea))}),0)}))},mxCellEditor.prototype.toggleViewMode=function(){var t,e,n,i,l,o,s,r,a=this.graph.view.getState(this.editingCell);null!=a&&(e=null!=a&&"0"!=mxUtils.getValue(a.style,"nl2Br","1"),t=this.saveSelection(),this.codeViewMode?(0<(s=mxUtils.extractTextWithWhitespace(this.textarea.childNodes)).length&&"\n"==s.charAt(s.length-1)&&(s=s.substring(0,s.length-1)),s=this.graph.sanitizeHtml(e?s.replace(/\n/g,"<br/>"):s,!0),this.textarea.className="mxCellEditor geContentEditable",r=mxUtils.getValue(a.style,mxConstants.STYLE_FONTSIZE,mxConstants.DEFAULT_FONTSIZE),e=mxUtils.getValue(a.style,mxConstants.STYLE_FONTFAMILY,mxConstants.DEFAULT_FONTFAMILY),n=mxUtils.getValue(a.style,mxConstants.STYLE_ALIGN,mxConstants.ALIGN_LEFT),i=(mxUtils.getValue(a.style,mxConstants.STYLE_FONTSTYLE,0)&mxConstants.FONT_BOLD)==mxConstants.FONT_BOLD,l=(mxUtils.getValue(a.style,mxConstants.STYLE_FONTSTYLE,0)&mxConstants.FONT_ITALIC)==mxConstants.FONT_ITALIC,o=[],(mxUtils.getValue(a.style,mxConstants.STYLE_FONTSTYLE,0)&mxConstants.FONT_UNDERLINE)==mxConstants.FONT_UNDERLINE&&o.push("underline"),(mxUtils.getValue(a.style,mxConstants.STYLE_FONTSTYLE,0)&mxConstants.FONT_STRIKETHROUGH)==mxConstants.FONT_STRIKETHROUGH&&o.push("line-through"),this.textarea.style.lineHeight=mxConstants.ABSOLUTE_LINE_HEIGHT?Math.round(r*mxConstants.LINE_HEIGHT)+"px":mxConstants.LINE_HEIGHT,this.textarea.style.fontSize=Math.round(r)+"px",this.textarea.style.textDecoration=o.join(" "),this.textarea.style.fontWeight=i?"bold":"normal",this.textarea.style.fontStyle=l?"italic":"",this.textarea.style.fontFamily=e,this.textarea.style.textAlign=n,this.textarea.style.padding="0px",this.textarea.innerHTML!=s&&(this.textarea.innerHTML=s,0==this.textarea.innerHTML.length&&(this.textarea.innerHTML=this.getEmptyLabelText(),this.clearOnChange=0<this.textarea.innerHTML.length)),this.codeViewMode=!1):(this.clearOnChange&&this.textarea.innerHTML==this.getEmptyLabelText()&&(this.clearOnChange=!1,this.textarea.innerHTML=""),s=mxUtils.htmlEntities(this.textarea.innerHTML),8!=document.documentMode&&(s=mxUtils.replaceTrailingNewlines(s,"<div><br></div>")),s=this.graph.sanitizeHtml(e?s.replace(/\n/g,"").replace(/&lt;br\s*.?&gt;/g,"<br>"):s,!0),this.textarea.className="mxCellEditor mxPlainTextEditor",r=mxConstants.DEFAULT_FONTSIZE,this.textarea.style.lineHeight=mxConstants.ABSOLUTE_LINE_HEIGHT?Math.round(r*mxConstants.LINE_HEIGHT)+"px":mxConstants.LINE_HEIGHT,this.textarea.style.fontSize=Math.round(r)+"px",this.textarea.style.textDecoration="",this.textarea.style.fontWeight="normal",this.textarea.style.fontStyle="",this.textarea.style.fontFamily=mxConstants.DEFAULT_FONTFAMILY,this.textarea.style.textAlign="left",this.textarea.style.padding="2px",this.textarea.innerHTML!=s&&(this.textarea.innerHTML=s),this.codeViewMode=!0),this.textarea.focus(),null!=this.switchSelectionState&&this.restoreSelection(this.switchSelectionState),this.switchSelectionState=t,this.resize())};var f=mxCellEditor.prototype.resize;mxCellEditor.prototype.resize=function(t,e){var n,i;null!=this.textarea&&(t=this.graph.getView().getState(this.editingCell),this.codeViewMode&&null!=t?(n=t.view.scale,this.bounds=mxRectangle.fromRectangle(t),0==this.bounds.width&&0==this.bounds.height&&(this.bounds.width=160*n,this.bounds.height=60*n,null==(i=null!=t.text?t.text.margin:null)&&(i=mxUtils.getAlignmentAsPoint(mxUtils.getValue(t.style,mxConstants.STYLE_ALIGN,mxConstants.ALIGN_CENTER),mxUtils.getValue(t.style,mxConstants.STYLE_VERTICAL_ALIGN,mxConstants.ALIGN_MIDDLE))),this.bounds.x+=i.x*this.bounds.width,this.bounds.y+=i.y*this.bounds.height),this.textarea.style.width=Math.round((this.bounds.width-4)/n)+"px",this.textarea.style.height=Math.round((this.bounds.height-4)/n)+"px",this.textarea.style.overflow="auto",this.textarea.clientHeight<this.textarea.offsetHeight&&(this.textarea.style.height=Math.round(this.bounds.height/n)+(this.textarea.offsetHeight-this.textarea.clientHeight)+"px",this.bounds.height=parseInt(this.textarea.style.height)*n),this.textarea.clientWidth<this.textarea.offsetWidth&&(this.textarea.style.width=Math.round(this.bounds.width/n)+(this.textarea.offsetWidth-this.textarea.clientWidth)+"px",this.bounds.width=parseInt(this.textarea.style.width)*n),this.textarea.style.left=Math.round(this.bounds.x)+"px",this.textarea.style.top=Math.round(this.bounds.y)+"px",mxUtils.setPrefixedStyle(this.textarea.style,"transform","scale("+n+","+n+")")):(this.textarea.style.height="",this.textarea.style.overflow="",f.apply(this,arguments)))},mxCellEditorGetInitialValue=mxCellEditor.prototype.getInitialValue,mxCellEditor.prototype.getInitialValue=function(t,e){if("0"==mxUtils.getValue(t.style,"html","0"))return mxCellEditorGetInitialValue.apply(this,arguments);var n=this.graph.getEditingValue(t.cell,e);return"1"==mxUtils.getValue(t.style,"nl2Br","1")&&(n=n.replace(/\n/g,"<br/>")),this.graph.sanitizeHtml(n,!0)},mxCellEditorGetCurrentValue=mxCellEditor.prototype.getCurrentValue,mxCellEditor.prototype.getCurrentValue=function(t){if("0"==mxUtils.getValue(t.style,"html","0"))return mxCellEditorGetCurrentValue.apply(this,arguments);var e=this.graph.sanitizeHtml(this.textarea.innerHTML,!0);return"1"==mxUtils.getValue(t.style,"nl2Br","1")?e.replace(/\r\n/g,"<br/>").replace(/\n/g,"<br/>"):e.replace(/\r\n/g,"").replace(/\n/g,"")};var v=mxCellEditor.prototype.stopEditing;mxCellEditor.prototype.stopEditing=function(t){this.codeViewMode&&this.toggleViewMode(),v.apply(this,arguments),this.focusContainer()},mxCellEditor.prototype.focusContainer=function(){try{this.graph.container.focus()}catch(T){}};var b=mxCellEditor.prototype.applyValue;mxCellEditor.prototype.applyValue=function(t,e){this.graph.getModel().beginUpdate();try{b.apply(this,arguments),""==e&&this.graph.isCellDeletable(t.cell)&&0==this.graph.model.getChildCount(t.cell)&&this.graph.isTransparentState(t)&&this.graph.removeCells([t.cell],!1)}finally{this.graph.getModel().endUpdate()}},mxCellEditor.prototype.getBackgroundColor=function(t){var e=mxUtils.getValue(t.style,mxConstants.STYLE_LABEL_BACKGROUNDCOLOR,null);return(e=null!=e&&e!=mxConstants.NONE||!(null!=t.cell.geometry&&0<t.cell.geometry.width)||0==mxUtils.getValue(t.style,mxConstants.STYLE_ROTATION,0)&&0!=mxUtils.getValue(t.style,mxConstants.STYLE_HORIZONTAL,1)?e:mxUtils.getValue(t.style,mxConstants.STYLE_FILLCOLOR,null))==mxConstants.NONE?null:e},mxCellEditor.prototype.getMinimumSize=function(t){var e=this.graph.getView().scale;return new mxRectangle(0,0,null==t.text?30:t.text.size*e+20,30)},mxGraphHandlerIsValidDropTarget=mxGraphHandler.prototype.isValidDropTarget,mxGraphHandler.prototype.isValidDropTarget=function(t,e){return mxGraphHandlerIsValidDropTarget.apply(this,arguments)&&!mxEvent.isAltDown(e.getEvent)},mxGraphView.prototype.formatUnitText=function(t){return t&&e(t,this.unit)},mxGraphHandler.prototype.updateHint=function(n){var i,l;null==this.pBounds||null==this.shape&&!this.livePreviewActive||(null==this.hint&&(this.hint=t(),this.graph.container.appendChild(this.hint)),n=this.roundLength((this.bounds.x+this.currentDx)/(l=this.graph.view.scale)-(i=this.graph.view.translate).x),i=this.roundLength((this.bounds.y+this.currentDy)/l-i.y),this.hint.innerHTML=e(n,l=this.graph.view.unit)+", "+e(i,l),this.hint.style.left=this.pBounds.x+this.currentDx+Math.round((this.pBounds.width-this.hint.clientWidth)/2)+"px",this.hint.style.top=this.pBounds.y+this.currentDy+this.pBounds.height+Editor.hintOffset+"px")},mxGraphHandler.prototype.removeHint=function(){null!=this.hint&&(this.hint.parentNode.removeChild(this.hint),this.hint=null)};var C=mxStackLayout.prototype.resizeCell;mxStackLayout.prototype.resizeCell=function(t,e){C.apply(this,arguments);var n,i,l,o,s=this.graph.getCellStyle(t);null!=s.childLayout||null!=(o=null!=(n=this.graph.model.getParent(t))?this.graph.getCellGeometry(n):null)&&"stackLayout"==(s=this.graph.getCellStyle(n)).childLayout&&(i=parseFloat(mxUtils.getValue(s,"stackBorder",mxStackLayout.prototype.border)),s="1"==mxUtils.getValue(s,"horizontalStack","1"),l=this.graph.getActualStartSize(n),o=o.clone(),s?o.height=e.height+l.y+l.height+2*i:o.width=e.width+l.x+l.width+2*i,this.graph.model.setGeometry(n,o))};var E=mxSelectionCellsHandler.prototype.getHandledSelectionCells;mxSelectionCellsHandler.prototype.getHandledSelectionCells=function(){function t(t){n.get(t)||(n.put(t,!0),l.push(t))}for(var e=E.apply(this,arguments),n=new mxDictionary,i=this.graph.model,l=[],o=0;o<e.length;o++){var s=e[o];this.graph.isTableCell(s)?t(i.getParent(i.getParent(s))):this.graph.isTableRow(s)&&t(i.getParent(s)),t(s)}return l};var S=mxVertexHandler.prototype.createParentHighlightShape;mxVertexHandler.prototype.createParentHighlightShape=function(t){var e=S.apply(this,arguments);return e.stroke="#C0C0C0",e.strokewidth=1,e};var w=mxEdgeHandler.prototype.createParentHighlightShape;mxEdgeHandler.prototype.createParentHighlightShape=function(t){var e=w.apply(this,arguments);return e.stroke="#C0C0C0",e.strokewidth=1,e},mxVertexHandler.prototype.rotationHandleVSpacing=-12,mxVertexHandler.prototype.getRotationHandlePosition=function(){var t=this.getHandlePadding();return new mxPoint(this.bounds.x+this.bounds.width-this.rotationHandleVSpacing+t.x/2,this.bounds.y+this.rotationHandleVSpacing-t.y/2)},mxVertexHandler.prototype.isRecursiveResize=function(t,e){return this.graph.isRecursiveVertexResize(t)&&!mxEvent.isControlDown(e.getEvent())},mxVertexHandler.prototype.isCenteredEvent=function(t,e){return!(!this.graph.isSwimlane(t.cell)&&0<this.graph.model.getChildCount(t.cell)&&!this.graph.isCellCollapsed(t.cell)&&"1"==mxUtils.getValue(t.style,"recursiveResize","1")&&null==mxUtils.getValue(t.style,"childLayout",null))&&mxEvent.isControlDown(e.getEvent())||mxEvent.isMetaDown(e.getEvent())};var T=mxVertexHandler.prototype.isRotationHandleVisible;mxVertexHandler.prototype.isRotationHandleVisible=function(){return T.apply(this,arguments)&&!this.graph.isTableCell(this.state.cell)&&!this.graph.isTableRow(this.state.cell)&&!this.graph.isTable(this.state.cell)},mxVertexHandler.prototype.getSizerBounds=function(){return this.graph.isTableCell(this.state.cell)?this.graph.view.getState(this.graph.model.getParent(this.graph.model.getParent(this.state.cell))):this.bounds};var A=mxVertexHandler.prototype.isParentHighlightVisible;mxVertexHandler.prototype.isParentHighlightVisible=function(){return A.apply(this,arguments)&&!this.graph.isTableCell(this.state.cell)&&!this.graph.isTableRow(this.state.cell)};var M=mxVertexHandler.prototype.isCustomHandleVisible;mxVertexHandler.prototype.isCustomHandleVisible=function(t){return t.tableHandle||M.apply(this,arguments)&&(!this.graph.isTable(this.state.cell)||this.graph.isCellSelected(this.state.cell))},mxVertexHandler.prototype.getSelectionBorderInset=function(){var t=0;return this.graph.isTableRow(this.state.cell)?t=1:this.graph.isTableCell(this.state.cell)&&(t=2),t};var L=mxVertexHandler.prototype.getSelectionBorderBounds;mxVertexHandler.prototype.getSelectionBorderBounds=function(){return L.apply(this,arguments).grow(-this.getSelectionBorderInset())};var P=mxVertexHandler.prototype.createCustomHandles;mxVertexHandler.prototype.createCustomHandles=function(){var t=P.apply(this,arguments);if(this.graph.isTable(this.state.cell)){var e=this.graph,n=this.state,i=this.selectionBorder,l=this;null==t&&(t=[]);var o=e.view.getCellStates((r=e.model).getChildCells(this.state.cell,!0));if(0<o.length){for(var s=e.view.getCellStates(r.getChildCells(o[0].cell,!0)),r=0;r<s.length;r++)mxUtils.bind(this,function(o){var r=s[o],a=o<s.length-1?s[o+1]:null,h=new mxLine(new mxRectangle,mxConstants.NONE,1,!0);h.isDashed=i.isDashed,h.svgStrokeTolerance++,(h=new mxHandle(r,"col-resize",null,h)).tableHandle=!0;var u=0;h.shape.node.parentNode.insertBefore(h.shape.node,h.shape.node.parentNode.firstChild);var d=!(h.redraw=function(){var t;null!=this.shape&&null!=this.state.shape&&(t=e.getActualStartSize(n.cell),this.shape.stroke=0==u?mxConstants.NONE:i.stroke,this.shape.bounds.x=this.state.x+this.state.width+u*this.graph.view.scale,this.shape.bounds.width=1,this.shape.bounds.y=n.y+(o==s.length-1?0:t.y*this.graph.view.scale),this.shape.bounds.height=n.height-(o==s.length-1?0:(t.height+t.y)*this.graph.view.scale),this.shape.redraw())});h.setPosition=function(t,n,i){u=Math.max(Graph.minTableColumnWidth-t.width,n.x-t.x-t.width),d=mxEvent.isShiftDown(i.getEvent()),null==a||d||(u=Math.min((a.x+a.width-r.x-r.width)/e.view.scale-Graph.minTableColumnWidth,u))},h.execute=function(t){var i;0!=u?e.setTableColumnWidth(this.state.cell,u,d):l.blockDelayedSelection||(i=e.getCellAt(t.getGraphX(),t.getGraphY())||n.cell,e.graphHandler.selectCellForEvent(i,t)),u=0},h.reset=function(){u=0},t.push(h)})(r);for(r=0;r<o.length;r++)mxUtils.bind(this,function(s){s=o[s];var r=new mxLine(new mxRectangle,mxConstants.NONE,1);r.isDashed=i.isDashed,r.svgStrokeTolerance++,(s=new mxHandle(s,"row-resize",null,r)).tableHandle=!0;var a=0;s.shape.node.parentNode.insertBefore(s.shape.node,s.shape.node.parentNode.firstChild),s.redraw=function(){null!=this.shape&&null!=this.state.shape&&(this.shape.stroke=0==a?mxConstants.NONE:i.stroke,this.shape.bounds.x=this.state.x,this.shape.bounds.width=this.state.width,this.shape.bounds.y=this.state.y+this.state.height+a*this.graph.view.scale,this.shape.bounds.height=1,this.shape.redraw())},s.setPosition=function(t,e,n){a=Math.max(Graph.minTableRowHeight-t.height,e.y-t.y-t.height)},s.execute=function(t){var i;0!=a?e.setTableRowHeight(this.state.cell,a,!mxEvent.isShiftDown(t.getEvent())):l.blockDelayedSelection||(i=e.getCellAt(t.getGraphX(),t.getGraphY())||n.cell,e.graphHandler.selectCellForEvent(i,t)),a=0},s.reset=function(){a=0},t.push(s)})(r)}}return null!=t?t.reverse():null};var I=mxVertexHandler.prototype.setHandlesVisible;mxVertexHandler.prototype.setHandlesVisible=function(t){if(I.apply(this,arguments),null!=this.moveHandles)for(var e=0;e<this.moveHandles.length;e++)this.moveHandles[e].style.visibility=t?"":"hidden";if(null!=this.cornerHandles)for(e=0;e<this.cornerHandles.length;e++)this.cornerHandles[e].node.style.visibility=t?"":"hidden"},mxVertexHandler.prototype.refreshMoveHandles=function(){var t=this.graph.model;if(null!=this.moveHandles){for(var e=0;e<this.moveHandles.length;e++)this.moveHandles[e].parentNode.removeChild(this.moveHandles[e]);this.moveHandles=null}for(this.moveHandles=[],e=0;e<t.getChildCount(this.state.cell);e++)mxUtils.bind(this,function(e){var n;null!=e&&t.isVertex(e.cell)&&((n=mxUtils.createImage(Editor.rowMoveImage)).style.position="absolute",n.style.cursor="pointer",n.style.width="7px",n.style.height="4px",n.style.padding="4px 2px 4px 2px",n.rowState=e,mxEvent.addGestureListeners(n,mxUtils.bind(this,function(t){this.graph.popupMenuHandler.hideMenu(),this.graph.stopEditing(!1),!this.graph.isToggleEvent(t)&&this.graph.isCellSelected(e.cell)||this.graph.selectCellForEvent(e.cell,t),mxEvent.isPopupTrigger(t)||(this.graph.graphHandler.start(this.state.cell,mxEvent.getClientX(t),mxEvent.getClientY(t),this.graph.getSelectionCells()),this.graph.graphHandler.cellWasClicked=!0,this.graph.isMouseTrigger=mxEvent.isMouseEvent(t),this.graph.isMouseDown=!0),mxEvent.consume(t)}),null,mxUtils.bind(this,function(t){mxEvent.isPopupTrigger(t)&&(this.graph.popupMenuHandler.popup(mxEvent.getClientX(t),mxEvent.getClientY(t),e.cell,t),mxEvent.consume(t))})),this.moveHandles.push(n),this.graph.container.appendChild(n))})(this.graph.view.getState(t.getChildAt(this.state.cell,e)))},mxVertexHandler.prototype.refresh=function(){if(null!=this.customHandles){for(var t=0;t<this.customHandles.length;t++)this.customHandles[t].destroy();this.customHandles=this.createCustomHandles()}this.graph.isTable(this.state.cell)&&this.refreshMoveHandles()};var R=mxVertexHandler.prototype.getHandlePadding;mxVertexHandler.prototype.getHandlePadding=function(){var t=new mxPoint(0,0),e=this.tolerance,n=this.state.style.shape;if(null==mxCellRenderer.defaultShapes[n]&&mxStencilRegistry.getStencil(n),!(n=this.graph.isTable(this.state.cell)||this.graph.cellEditor.getEditingCell()==this.state.cell)&&null!=this.customHandles)for(var i=0;i<this.customHandles.length;i++)if(null!=this.customHandles[i].shape&&null!=this.customHandles[i].shape.bounds){var l=this.customHandles[i].shape.bounds,o=l.getCenterX(),s=l.getCenterY();if(Math.abs(this.state.x-o)<l.width/2||Math.abs(this.state.y-s)<l.height/2||Math.abs(this.state.x+this.state.width-o)<l.width/2||Math.abs(this.state.y+this.state.height-s)<l.height/2){n=!0;break}}return n&&null!=this.sizers&&0<this.sizers.length&&null!=this.sizers[0]?(e/=2,this.graph.isTable(this.state.cell)&&(e+=7),t.x=this.sizers[0].bounds.width+e,t.y=this.sizers[0].bounds.height+e):t=R.apply(this,arguments),t},mxVertexHandler.prototype.updateHint=function(n){var i;this.index!=mxEvent.LABEL_HANDLE&&(null==this.hint&&(this.hint=t(),this.state.view.graph.container.appendChild(this.hint)),this.index==mxEvent.ROTATION_HANDLE?this.hint.innerHTML=this.currentAlpha+"&deg;":(i=this.state.view.unit,this.hint.innerHTML=e(this.roundLength(this.bounds.width/(n=this.state.view.scale)),i)+" x "+e(this.roundLength(this.bounds.height/n),i)),null==(n=mxUtils.getBoundingBox(this.bounds,null!=this.currentAlpha?this.currentAlpha:this.state.style[mxConstants.STYLE_ROTATION]||"0"))&&(n=this.bounds),this.hint.style.left=n.x+Math.round((n.width-this.hint.clientWidth)/2)+"px",this.hint.style.top=n.y+n.height+Editor.hintOffset+"px",null!=this.linkHint&&(this.linkHint.style.display="none"))},mxVertexHandler.prototype.removeHint=function(){mxGraphHandler.prototype.removeHint.apply(this,arguments),null!=this.linkHint&&(this.linkHint.style.display="")};var O=mxEdgeHandler.prototype.mouseMove;mxEdgeHandler.prototype.mouseMove=function(t,e){O.apply(this,arguments),null!=this.linkHint&&"none"!=this.linkHint.style.display&&null!=this.graph.graphHandler&&null!=this.graph.graphHandler.first&&(this.linkHint.style.display="none")};var _,D=mxEdgeHandler.prototype.mouseUp;mxEdgeHandler.prototype.mouseUp=function(t,e){D.apply(this,arguments),null!=this.linkHint&&"none"==this.linkHint.style.display&&(this.linkHint.style.display="")},mxEdgeHandler.prototype.updateHint=function(n,i){null==this.hint&&(this.hint=t(),this.state.view.graph.container.appendChild(this.hint));var l,o=this.roundLength(i.x/(l=this.graph.view.scale)-(s=this.graph.view.translate).x),s=this.roundLength(i.y/l-s.y);this.hint.innerHTML=e(o,l=this.graph.view.unit)+", "+e(s,l),this.hint.style.visibility="visible",(this.isSource||this.isTarget)&&(null!=this.constraintHandler.currentConstraint&&null!=this.constraintHandler.currentFocus?(o=this.constraintHandler.currentConstraint.point,this.hint.innerHTML="["+Math.round(100*o.x)+"%, "+Math.round(100*o.y)+"%]"):this.marker.hasValidState()&&(this.hint.style.visibility="hidden")),this.hint.style.left=Math.round(n.getGraphX()-this.hint.clientWidth/2)+"px",this.hint.style.top=Math.max(n.getGraphY(),i.y)+Editor.hintOffset+"px",null!=this.linkHint&&(this.linkHint.style.display="none")},mxEdgeHandler.prototype.removeHint=mxVertexHandler.prototype.removeHint,HoverIcons.prototype.mainHandle=mxClient.IS_SVG?Graph.createSvgImage(18,18,'<circle cx="9" cy="9" r="5" stroke="#fff" fill="'+HoverIcons.prototype.arrowFill+'" stroke-width="1"/>'):new mxImage(IMAGE_PATH+"/handle-main.png",17,17),HoverIcons.prototype.secondaryHandle=mxClient.IS_SVG?Graph.createSvgImage(16,16,'<path d="m 8 3 L 13 8 L 8 13 L 3 8 z" stroke="#fff" fill="#fca000"/>'):new mxImage(IMAGE_PATH+"/handle-secondary.png",17,17),HoverIcons.prototype.fixedHandle=mxClient.IS_SVG?Graph.createSvgImage(18,18,'<circle cx="9" cy="9" r="5" stroke="#fff" fill="'+HoverIcons.prototype.arrowFill+'" stroke-width="1"/><path d="m 7 7 L 11 11 M 7 11 L 11 7" stroke="#fff"/>'):new mxImage(IMAGE_PATH+"/handle-fixed.png",17,17),HoverIcons.prototype.terminalHandle=mxClient.IS_SVG?Graph.createSvgImage(18,18,'<circle cx="9" cy="9" r="5" stroke="#fff" fill="'+HoverIcons.prototype.arrowFill+'" stroke-width="1"/><circle cx="9" cy="9" r="2" stroke="#fff" fill="transparent"/>'):new mxImage(IMAGE_PATH+"/handle-terminal.png",17,17),HoverIcons.prototype.rotationHandle=mxClient.IS_SVG?Graph.createSvgImage(16,16,'<path stroke="'+HoverIcons.prototype.arrowFill+'" fill="'+HoverIcons.prototype.arrowFill+'" d="M15.55 5.55L11 1v3.07C7.06 4.56 4 7.92 4 12s3.05 7.44 7 7.93v-2.02c-2.84-.48-5-2.94-5-5.91s2.16-5.43 5-5.91V10l4.55-4.45zM19.93 11c-.17-1.39-.72-2.73-1.62-3.89l-1.42 1.42c.54.75.88 1.6 1.02 2.47h2.02zM13 17.9v2.02c1.39-.17 2.74-.71 3.9-1.61l-1.44-1.44c-.75.54-1.59.89-2.46 1.03zm3.89-2.42l1.42 1.41c.9-1.16 1.45-2.5 1.62-3.89h-2.02c-.14.87-.48 1.72-1.02 2.48z"/>',24,24):new mxImage(IMAGE_PATH+"/handle-rotate.png",16,16),mxClient.IS_SVG&&(mxConstraintHandler.prototype.pointImage=Graph.createSvgImage(5,5,'<path d="m 0 0 L 5 5 M 0 5 L 5 0" stroke="'+HoverIcons.prototype.arrowFill+'"/>')),mxVertexHandler.TABLE_HANDLE_COLOR="#fca000",mxVertexHandler.prototype.handleImage=HoverIcons.prototype.mainHandle,mxVertexHandler.prototype.secondaryHandleImage=HoverIcons.prototype.secondaryHandle,mxEdgeHandler.prototype.handleImage=HoverIcons.prototype.mainHandle,mxEdgeHandler.prototype.terminalHandleImage=HoverIcons.prototype.terminalHandle,mxEdgeHandler.prototype.fixedHandleImage=HoverIcons.prototype.fixedHandle,mxEdgeHandler.prototype.labelHandleImage=HoverIcons.prototype.secondaryHandle,mxOutline.prototype.sizerImage=HoverIcons.prototype.mainHandle,Sidebar.prototype.triangleUp=HoverIcons.prototype.triangleUp,Sidebar.prototype.triangleRight=HoverIcons.prototype.triangleRight,Sidebar.prototype.triangleDown=HoverIcons.prototype.triangleDown,Sidebar.prototype.triangleLeft=HoverIcons.prototype.triangleLeft,Sidebar.prototype.refreshTarget=HoverIcons.prototype.refreshTarget,Sidebar.prototype.roundDrop=HoverIcons.prototype.roundDrop,mxClient.IS_SVG||((new Image).src=HoverIcons.prototype.mainHandle.src,(new Image).src=HoverIcons.prototype.fixedHandle.src,(new Image).src=HoverIcons.prototype.terminalHandle.src,(new Image).src=HoverIcons.prototype.secondaryHandle.src,(new Image).src=HoverIcons.prototype.rotationHandle.src,(new Image).src=HoverIcons.prototype.triangleUp.src,(new Image).src=HoverIcons.prototype.triangleRight.src,(new Image).src=HoverIcons.prototype.triangleDown.src,(new Image).src=HoverIcons.prototype.triangleLeft.src,(new Image).src=HoverIcons.prototype.refreshTarget.src,(new Image).src=HoverIcons.prototype.roundDrop.src),mxVertexHandler.prototype.rotationEnabled=!0,mxVertexHandler.prototype.manageSizers=!0,mxVertexHandler.prototype.livePreview=!0,mxGraphHandler.prototype.maxLivePreview=16,mxRubberband.prototype.defaultOpacity=30,mxConnectionHandler.prototype.outlineConnect=!0,mxCellHighlight.prototype.keepOnTop=!0,mxVertexHandler.prototype.parentHighlightEnabled=!0,mxEdgeHandler.prototype.parentHighlightEnabled=!0,mxEdgeHandler.prototype.dblClickRemoveEnabled=!0,mxEdgeHandler.prototype.straightRemoveEnabled=!0,mxEdgeHandler.prototype.virtualBendsEnabled=!0,mxEdgeHandler.prototype.mergeRemoveEnabled=!0,mxEdgeHandler.prototype.manageLabelHandle=!0,mxEdgeHandler.prototype.outlineConnect=!0,mxEdgeHandler.prototype.isAddVirtualBendEvent=function(t){return!mxEvent.isShiftDown(t.getEvent())},mxEdgeHandler.prototype.isCustomHandleEvent=function(t){return!mxEvent.isShiftDown(t.getEvent())},Graph.touchStyle?((mxClient.IS_TOUCH||0<navigator.maxTouchPoints||0<navigator.msMaxTouchPoints)&&(mxShape.prototype.svgStrokeTolerance=18,mxVertexHandler.prototype.tolerance=12,mxEdgeHandler.prototype.tolerance=12,Graph.prototype.tolerance=12,mxVertexHandler.prototype.rotationHandleVSpacing=-16,mxConstraintHandler.prototype.getTolerance=function(t){return mxEvent.isMouseEvent(t.getEvent())?4:this.graph.getTolerance()}),mxPanningHandler.prototype.isPanningTrigger=function(t){var e=t.getEvent();return null==t.getState()&&!mxEvent.isMouseEvent(e)||mxEvent.isPopupTrigger(e)&&(null==t.getState()||mxEvent.isControlDown(e)||mxEvent.isShiftDown(e))},_=mxGraphHandler.prototype.mouseDown,mxGraphHandler.prototype.mouseDown=function(t,e){_.apply(this,arguments),mxEvent.isTouchEvent(e.getEvent())&&this.graph.isCellSelected(e.getCell())&&1<this.graph.getSelectionCount()&&(this.delayedSelection=!1)}):mxPanningHandler.prototype.isPanningTrigger=function(t){var e=t.getEvent();return mxEvent.isLeftMouseButton(e)&&(this.useLeftButtonForPanning&&null==t.getState()||mxEvent.isControlDown(e)&&!mxEvent.isShiftDown(e))||this.usePopupTrigger&&mxEvent.isPopupTrigger(e)},mxRubberband.prototype.isSpaceEvent=function(t){return this.graph.isEnabled()&&!this.graph.isCellLocked(this.graph.getDefaultParent())&&mxEvent.isControlDown(t.getEvent())&&mxEvent.isShiftDown(t.getEvent())},mxRubberband.prototype.cancelled=!1,mxRubberband.prototype.cancel=function(){this.isActive()&&(this.cancelled=!0,this.reset())},mxRubberband.prototype.mouseUp=function(t,e){if(this.cancelled)this.cancelled=!1,e.consume();else{var n,i,l=null!=this.div&&"none"!=this.div.style.display,o=null,s=null,r=t=null;if(null!=this.first&&null!=this.currentX&&null!=this.currentY&&(t=(this.currentX-(o=this.first.x))/this.graph.view.scale,r=(this.currentY-(s=this.first.y))/this.graph.view.scale,mxEvent.isAltDown(e.getEvent())||(t=this.graph.snap(t),r=this.graph.snap(r),this.graph.isGridEnabled()||(Math.abs(t)<this.graph.tolerance&&(t=0),Math.abs(r)<this.graph.tolerance&&(r=0)))),this.reset(),l){if(mxEvent.isAltDown(e.getEvent())&&this.graph.isToggleEvent(e.getEvent())){var a=new mxRectangle(this.x,this.y,this.width,this.height);a=this.graph.getCells(a.x,a.y,a.width,a.height),this.graph.removeSelectionCells(a)}else if(this.isSpaceEvent(e)){this.graph.model.beginUpdate();try{for(a=this.graph.getCellsBeyond(o,s,this.graph.getDefaultParent(),!0,!0),l=0;l<a.length;l++)this.graph.isCellMovable(a[l])&&(n=this.graph.view.getState(a[l]),i=this.graph.getCellGeometry(a[l]),null!=n&&null!=i&&((i=i.clone()).translate(t,r),this.graph.model.setGeometry(a[l],i)))}finally{this.graph.model.endUpdate()}}else a=new mxRectangle(this.x,this.y,this.width,this.height),this.graph.selectRegion(a,e.getEvent());e.consume()}}},mxRubberband.prototype.mouseMove=function(t,e){var n,i,l,o;e.isConsumed()||null==this.first||(n=mxUtils.getScrollOrigin(this.graph.container),t=mxUtils.getOffset(this.graph.container),n.x-=t.x,n.y-=t.y,t=e.getX()+n.x,n=e.getY()+n.y,i=this.first.x-t,l=this.first.y-n,o=this.graph.tolerance,(null!=this.div||Math.abs(i)>o||Math.abs(l)>o)&&(null==this.div&&(this.div=this.createShape()),mxUtils.clearSelection(),this.update(t,n),this.isSpaceEvent(e)?(t=this.x+this.width,n=this.y+this.height,i=this.graph.view.scale,mxEvent.isAltDown(e.getEvent())||(this.width=this.graph.snap(this.width/i)*i,this.height=this.graph.snap(this.height/i)*i,this.graph.isGridEnabled()||(this.width<this.graph.tolerance&&(this.width=0),this.height<this.graph.tolerance&&(this.height=0)),this.x<this.first.x&&(this.x=t-this.width),this.y<this.first.y&&(this.y=n-this.height)),this.div.style.borderStyle="dashed",this.div.style.backgroundColor="white",this.div.style.left=this.x+"px",this.div.style.top=this.y+"px",this.div.style.width=Math.max(0,this.width)+"px",this.div.style.height=this.graph.container.clientHeight+"px",this.div.style.borderWidth=this.width<=0?"0px 1px 0px 0px":"0px 1px 0px 1px",null==this.secondDiv&&(this.secondDiv=this.div.cloneNode(!0),this.div.parentNode.appendChild(this.secondDiv)),this.secondDiv.style.left=this.x+"px",this.secondDiv.style.top=this.y+"px",this.secondDiv.style.width=this.graph.container.clientWidth+"px",this.secondDiv.style.height=Math.max(0,this.height)+"px",this.secondDiv.style.borderWidth=this.height<=0?"1px 0px 0px 0px":"1px 0px 1px 0px"):(this.div.style.backgroundColor="",this.div.style.borderWidth="",this.div.style.borderStyle="",null!=this.secondDiv&&(this.secondDiv.parentNode.removeChild(this.secondDiv),this.secondDiv=null)),e.consume()))};var U=mxRubberband.prototype.reset;mxRubberband.prototype.reset=function(){null!=this.secondDiv&&(this.secondDiv.parentNode.removeChild(this.secondDiv),this.secondDiv=null),U.apply(this,arguments)};var N=(new Date).getTime(),k=0,H=mxEdgeHandler.prototype.updatePreviewState;mxEdgeHandler.prototype.updatePreviewState=function(t,e,n,i){H.apply(this,arguments),k=n!=this.currentTerminalState?(N=(new Date).getTime(),0):(new Date).getTime()-N,this.currentTerminalState=n};var G=mxEdgeHandler.prototype.isOutlineConnectEvent;mxEdgeHandler.prototype.isOutlineConnectEvent=function(t){return null!=this.currentTerminalState&&t.getState()==this.currentTerminalState&&2e3<k||(null==this.currentTerminalState||"0"!=mxUtils.getValue(this.currentTerminalState.style,"outlineConnect","1"))&&G.apply(this,arguments)},mxEdgeHandler.prototype.createHandleShape=function(t,e){var n=this.state.getVisibleTerminalState(e=null!=t&&0==t);return null!=(t=null!=(null!=(t=null!=t&&(0==t||t>=this.state.absolutePoints.length-1||this.constructor==mxElbowEdgeHandler&&2==t)?this.graph.getConnectionConstraint(this.state,n,e):null)?this.graph.getConnectionPoint(this.state.getVisibleTerminalState(e),t):null)?this.fixedHandleImage:null!=t&&null!=n?this.terminalHandleImage:this.handleImage)?((t=new mxImageShape(new mxRectangle(0,0,t.width,t.height),t.src)).preserveImageAspect=!1,t):(t=mxConstants.HANDLE_SIZE,this.preferHtml&&--t,new mxRectangleShape(new mxRectangle(0,0,t,t),mxConstants.HANDLE_FILLCOLOR,mxConstants.HANDLE_STROKECOLOR))};var F=mxVertexHandler.prototype.createSizerShape;mxVertexHandler.prototype.createSizerShape=function(t,e,n){return this.handleImage=e==mxEvent.ROTATION_HANDLE?HoverIcons.prototype.rotationHandle:e==mxEvent.LABEL_HANDLE?this.secondaryHandleImage:this.handleImage,F.apply(this,arguments)};var V=mxGraphHandler.prototype.getBoundingBox;mxGraphHandler.prototype.getBoundingBox=function(t){if(null!=t&&1==t.length){var e=this.graph.getModel(),n=e.getParent(t[0]),i=this.graph.getCellGeometry(t[0]);if(e.isEdge(n)&&null!=i&&i.relative&&null!=(e=this.graph.view.getState(t[0]))&&e.width<2&&e.height<2&&null!=e.text&&null!=e.text.boundingBox)return mxRectangle.fromRectangle(e.text.boundingBox)}return V.apply(this,arguments)};var B=mxGraphHandler.prototype.getGuideStates;mxGraphHandler.prototype.getGuideStates=function(){for(var t=B.apply(this,arguments),e=[],n=0;n<t.length;n++)"1"!=mxUtils.getValue(t[n].style,"part","0")&&e.push(t[n]);return e};var z=mxVertexHandler.prototype.getSelectionBounds;mxVertexHandler.prototype.getSelectionBounds=function(t){var e=this.graph.getModel(),n=e.getParent(t.cell),i=this.graph.getCellGeometry(t.cell);return e.isEdge(n)&&null!=i&&i.relative&&t.width<2&&t.height<2&&null!=t.text&&null!=t.text.boundingBox?(e=t.text.unrotatedBoundingBox||t.text.boundingBox,new mxRectangle(Math.round(e.x),Math.round(e.y),Math.round(e.width),Math.round(e.height))):z.apply(this,arguments)};var Y=mxVertexHandler.prototype.mouseDown;mxVertexHandler.prototype.mouseDown=function(t,e){var n=this.graph.getModel(),i=n.getParent(this.state.cell),l=this.graph.getCellGeometry(this.state.cell);(this.getHandleForEvent(e)==mxEvent.ROTATION_HANDLE||!n.isEdge(i)||null==l||!l.relative||null==this.state||2<=this.state.width||2<=this.state.height)&&Y.apply(this,arguments)},mxVertexHandler.prototype.rotateClick=function(){var t=mxUtils.getValue(this.state.style,mxConstants.STYLE_STROKECOLOR,mxConstants.NONE),e=mxUtils.getValue(this.state.style,mxConstants.STYLE_FILLCOLOR,mxConstants.NONE);this.state.view.graph.model.isVertex(this.state.cell)&&t==mxConstants.NONE&&e==mxConstants.NONE?(t=mxUtils.mod(mxUtils.getValue(this.state.style,mxConstants.STYLE_ROTATION,0)+90,360),this.state.view.graph.setCellStyles(mxConstants.STYLE_ROTATION,t,[this.state.cell])):this.state.view.graph.turnShapes([this.state.cell])};var j=mxVertexHandler.prototype.mouseMove;mxVertexHandler.prototype.mouseMove=function(t,e){j.apply(this,arguments),null!=this.graph.graphHandler.first&&(null!=this.rotationShape&&null!=this.rotationShape.node&&(this.rotationShape.node.style.display="none"),null!=this.linkHint&&"none"!=this.linkHint.style.display&&(this.linkHint.style.display="none"))};var W=mxVertexHandler.prototype.mouseUp;mxVertexHandler.prototype.mouseUp=function(t,e){W.apply(this,arguments),null!=this.rotationShape&&null!=this.rotationShape.node&&(this.rotationShape.node.style.display=1==this.graph.getSelectionCount()?"":"none"),null!=this.linkHint&&"none"==this.linkHint.style.display&&(this.linkHint.style.display=""),this.blockDelayedSelection=null};var q=mxVertexHandler.prototype.init;mxVertexHandler.prototype.init=function(){q.apply(this,arguments);var t=!1;if(null!=this.rotationShape&&this.rotationShape.node.setAttribute("title",mxResources.get("rotateTooltip")),this.graph.isTable(this.state.cell))this.refreshMoveHandles();else if(1==this.graph.getSelectionCount()&&(this.graph.isTableCell(this.state.cell)||this.graph.isTableRow(this.state.cell))){this.cornerHandles=[];for(var e=0;e<4;e++){var n=new mxRectangleShape(new mxRectangle(0,0,6,6),"#ffffff",mxConstants.HANDLE_STROKECOLOR);n.dialect=mxConstants.DIALECT_SVG,n.init(this.graph.view.getOverlayPane()),this.cornerHandles.push(n)}}var i=mxUtils.bind(this,function(){null!=this.specialHandle&&(this.specialHandle.node.style.display=this.graph.isEnabled()&&this.graph.getSelectionCount()<this.graph.graphHandler.maxCells?"":"none"),this.redrawHandles()});this.changeHandler=mxUtils.bind(this,function(t,e){this.updateLinkHint(this.graph.getLinkForCell(this.state.cell),this.graph.getLinksForState(this.state)),i()}),this.graph.getSelectionModel().addListener(mxEvent.CHANGE,this.changeHandler),this.graph.getModel().addListener(mxEvent.CHANGE,this.changeHandler),this.editingHandler=mxUtils.bind(this,function(t,e){this.redrawHandles()}),this.graph.addListener(mxEvent.EDITING_STOPPED,this.editingHandler),e=this.graph.getLinkForCell(this.state.cell),n=this.graph.getLinksForState(this.state),this.updateLinkHint(e,n),(t=null!=e||null!=n&&0<n.length||t)&&this.redrawHandles()},mxVertexHandler.prototype.updateLinkHint=function(e,n){try{if(null==e&&(null==n||0==n.length)||1<this.graph.getSelectionCount())null!=this.linkHint&&(this.linkHint.parentNode.removeChild(this.linkHint),this.linkHint=null);else if(null!=e||null!=n&&0<n.length){var i,l;if(null==this.linkHint&&(this.linkHint=t(),this.linkHint.style.padding="6px 8px 6px 8px",this.linkHint.style.opacity="1",this.linkHint.style.filter="",this.graph.container.appendChild(this.linkHint)),this.linkHint.innerHTML="",null!=e&&(this.linkHint.appendChild(this.graph.createLinkForHint(e)),this.graph.isEnabled()&&"function"==typeof this.graph.editLink)&&((i=document.createElement("img")).setAttribute("src",Editor.editImage),i.setAttribute("title",mxResources.get("editLink")),i.setAttribute("width","11"),i.setAttribute("height","11"),i.style.marginLeft="10px",i.style.marginBottom="-1px",i.style.cursor="pointer",this.linkHint.appendChild(i),mxEvent.addListener(i,"click",mxUtils.bind(this,function(t){this.graph.setSelectionCell(this.state.cell),this.graph.editLink(),mxEvent.consume(t)})),(l=document.createElement("img")).setAttribute("src",Dialog.prototype.clearImage),l.setAttribute("title",mxResources.get("removeIt",[mxResources.get("link")])),l.setAttribute("width","13"),l.setAttribute("height","10"),l.style.marginLeft="4px",l.style.marginBottom="-1px",l.style.cursor="pointer",this.linkHint.appendChild(l),mxEvent.addListener(l,"click",mxUtils.bind(this,function(t){this.graph.setLinkForCell(this.state.cell,null),mxEvent.consume(t)}))),null!=n)for(i=0;i<n.length;i++){var o=document.createElement("div");o.style.marginTop=null!=e||0<i?"6px":"0px",o.appendChild(this.graph.createLinkForHint(n[i].getAttribute("href"),mxUtils.getTextContent(n[i]))),this.linkHint.appendChild(o)}}}catch(e){}},mxEdgeHandler.prototype.updateLinkHint=mxVertexHandler.prototype.updateLinkHint;var X=mxEdgeHandler.prototype.init;mxEdgeHandler.prototype.init=function(){X.apply(this,arguments),this.constraintHandler.isEnabled=mxUtils.bind(this,function(){return this.state.view.graph.connectionHandler.isEnabled()});var t=mxUtils.bind(this,function(){null!=this.linkHint&&(this.linkHint.style.display=1==this.graph.getSelectionCount()?"":"none"),null!=this.labelShape&&(this.labelShape.node.style.display=this.graph.isEnabled()&&this.graph.getSelectionCount()<this.graph.graphHandler.maxCells?"":"none")});this.changeHandler=mxUtils.bind(this,function(e,n){this.updateLinkHint(this.graph.getLinkForCell(this.state.cell),this.graph.getLinksForState(this.state)),t(),this.redrawHandles()}),this.graph.getSelectionModel().addListener(mxEvent.CHANGE,this.changeHandler),this.graph.getModel().addListener(mxEvent.CHANGE,this.changeHandler);var e=this.graph.getLinkForCell(this.state.cell),n=this.graph.getLinksForState(this.state);(null!=e||null!=n&&0<n.length)&&(this.updateLinkHint(e,n),this.redrawHandles())};var Z=mxConnectionHandler.prototype.init;mxConnectionHandler.prototype.init=function(){Z.apply(this,arguments),this.constraintHandler.isEnabled=mxUtils.bind(this,function(){return this.graph.connectionHandler.isEnabled()})};var K=mxVertexHandler.prototype.redrawHandles;mxVertexHandler.prototype.redrawHandles=function(){if(null!=this.moveHandles)for(var t=0;t<this.moveHandles.length;t++)this.moveHandles[t].style.left=this.moveHandles[t].rowState.x+this.moveHandles[t].rowState.width-5+"px",this.moveHandles[t].style.top=this.moveHandles[t].rowState.y+this.moveHandles[t].rowState.height/2-6+"px";if(null!=this.cornerHandles){t=this.getSelectionBorderInset();var e=this.cornerHandles,n=e[0].bounds.height/2;for(e[0].bounds.x=this.state.x-e[0].bounds.width/2+t,e[0].bounds.y=this.state.y-n+t,e[0].redraw(),e[1].bounds.x=e[0].bounds.x+this.state.width-2*t,e[1].bounds.y=e[0].bounds.y,e[1].redraw(),e[2].bounds.x=e[0].bounds.x,e[2].bounds.y=this.state.y+this.state.height-2*t,e[2].redraw(),e[3].bounds.x=e[1].bounds.x,e[3].bounds.y=e[2].bounds.y,e[3].redraw(),t=0;t<this.cornerHandles.length;t++)this.cornerHandles[t].node.style.display=1==this.graph.getSelectionCount()?"":"none"}null!=this.rotationShape&&null!=this.rotationShape.node&&(this.rotationShape.node.style.display=null!=this.moveHandles||1!=this.graph.getSelectionCount()||null!=this.index&&this.index!=mxEvent.ROTATION_HANDLE?"none":""),K.apply(this),null!=this.state&&null!=this.linkHint&&(t=new mxPoint(this.state.getCenterX(),this.state.getCenterY()),e=new mxRectangle(this.state.x,this.state.y-22,this.state.width+24,this.state.height+22),t=null!=(n=mxUtils.getBoundingBox(e,this.state.style[mxConstants.STYLE_ROTATION]||"0",t))?mxUtils.getBoundingBox(this.state,this.state.style[mxConstants.STYLE_ROTATION]||"0"):this.state,n=(n=null==n?this.state:n).y+n.height,null!=(e=null!=this.state.text?this.state.text.boundingBox:null)&&(n=Math.max(n,e.y+e.height)),this.linkHint.style.left=Math.max(0,Math.round(t.x+(t.width-this.linkHint.clientWidth)/2))+"px",this.linkHint.style.top=Math.round(n+this.verticalOffset/2+Editor.hintOffset)+"px")};var J=mxVertexHandler.prototype.destroy;mxVertexHandler.prototype.destroy=function(){if(J.apply(this,arguments),null!=this.moveHandles){for(var t=0;t<this.moveHandles.length;t++)null!=this.moveHandles[t]&&null!=this.moveHandles[t].parentNode&&this.moveHandles[t].parentNode.removeChild(this.moveHandles[t]);this.moveHandles=null}if(null!=this.cornerHandles){for(t=0;t<this.cornerHandles.length;t++)null!=this.cornerHandles[t]&&null!=this.cornerHandles[t].node&&null!=this.cornerHandles[t].node.parentNode&&this.cornerHandles[t].node.parentNode.removeChild(this.cornerHandles[t].node);this.cornerHandles=null}null!=this.linkHint&&(null!=this.linkHint.parentNode&&this.linkHint.parentNode.removeChild(this.linkHint),this.linkHint=null),null!=this.changeHandler&&(this.graph.getSelectionModel().removeListener(this.changeHandler),this.graph.getModel().removeListener(this.changeHandler),this.changeHandler=null),null!=this.editingHandler&&(this.graph.removeListener(this.editingHandler),this.editingHandler=null)};var Q=mxEdgeHandler.prototype.redrawHandles;mxEdgeHandler.prototype.redrawHandles=function(){var t;null!=this.marker&&(Q.apply(this),null!=this.state&&null!=this.linkHint)&&(t=this.state,null!=this.state.text&&null!=this.state.text.bounds&&(t=new mxRectangle(t.x,t.y,t.width,t.height)).add(this.state.text.bounds),this.linkHint.style.left=Math.max(0,Math.round(t.x+(t.width-this.linkHint.clientWidth)/2))+"px",this.linkHint.style.top=Math.round(t.y+t.height+Editor.hintOffset)+"px")};var $=mxEdgeHandler.prototype.reset;mxEdgeHandler.prototype.reset=function(){$.apply(this,arguments),null!=this.linkHint&&(this.linkHint.style.visibility="")};var tt=mxEdgeHandler.prototype.destroy;mxEdgeHandler.prototype.destroy=function(){tt.apply(this,arguments),null!=this.linkHint&&(this.linkHint.parentNode.removeChild(this.linkHint),this.linkHint=null),null!=this.changeHandler&&(this.graph.getModel().removeListener(this.changeHandler),this.graph.getSelectionModel().removeListener(this.changeHandler),this.changeHandler=null)}}(),window.urlParams=window.urlParams||{},window.MAX_REQUEST_SIZE=window.MAX_REQUEST_SIZE||10485760,window.MAX_AREA=window.MAX_AREA||225e6,window.EXPORT_URL=window.EXPORT_URL||"/export",window.SAVE_URL=window.SAVE_URL||"/save",window.OPEN_URL=window.OPEN_URL||"/open",window.RESOURCES_PATH=window.RESOURCES_PATH||"resources",window.RESOURCE_BASE=window.RESOURCE_BASE||window.RESOURCES_PATH+"/grapheditor",window.STENCIL_PATH=window.STENCIL_PATH||"stencils",window.IMAGE_PATH=window.IMAGE_PATH||"images",window.STYLE_PATH=window.STYLE_PATH||"styles",window.CSS_PATH=window.CSS_PATH||"styles",window.OPEN_FORM=window.OPEN_FORM||"open.html",window.mxBasePath=window.mxBasePath||"../src",window.mxLanguage=window.mxLanguage||urlParams.lang,window.mxLanguages=window.mxLanguages||["de"],Menus=function(t){this.editorUi=t,this.menus={},this.init(),mxClient.IS_SVG||((new Image).src=this.checkmarkImage)},Menus.prototype.defaultFont="Helvetica",Menus.prototype.defaultFontSize="12",Menus.prototype.defaultMenuItems="file edit view arrange extras help".split(" "),Menus.prototype.defaultFonts="Helvetica;Verdana;Times New Roman;Garamond;Comic Sans MS;Courier New;Georgia;Lucida Console;Tahoma".split(";"),Menus.prototype.init=function(){var t=this.editorUi.editor.graph,e=mxUtils.bind(t,t.isEnabled);this.customFonts=[],this.customFontSizes=[],this.put("fontFamily",new Menu(mxUtils.bind(this,function(e,n){for(var i=mxUtils.bind(this,function(i){this.styleChange(e,i,[mxConstants.STYLE_FONTFAMILY],[i],null,n,function(){document.execCommand("fontname",!1,i)},function(){t.updateLabelElements(t.getSelectionCells(),function(e){e.removeAttribute("face"),e.style.fontFamily=null,"PRE"==e.nodeName&&t.replaceElement(e,"div")})}).firstChild.nextSibling.style.fontFamily=i}),l=0;l<this.defaultFonts.length;l++)i(this.defaultFonts[l]);if(e.addSeparator(n),0<this.customFonts.length){for(l=0;l<this.customFonts.length;l++)i(this.customFonts[l]);e.addSeparator(n),e.addItem(mxResources.get("reset"),null,mxUtils.bind(this,function(){this.customFonts=[],this.editorUi.fireEvent(new mxEventObject("customFontsChanged"))}),n),e.addSeparator(n)}this.promptChange(e,mxResources.get("custom")+"...","",mxConstants.DEFAULT_FONTFAMILY,mxConstants.STYLE_FONTFAMILY,n,!0,mxUtils.bind(this,function(t){mxUtils.indexOf(this.customFonts,t)<0&&(this.customFonts.push(t),this.editorUi.fireEvent(new mxEventObject("customFontsChanged")))}))}))),this.put("formatBlock",new Menu(mxUtils.bind(this,function(e,n){function i(i,l){return e.addItem(i,null,mxUtils.bind(this,function(){null!=t.cellEditor.textarea&&(t.cellEditor.textarea.focus(),document.execCommand("formatBlock",!1,"<"+l+">"))}),n)}i(mxResources.get("normal"),"p"),i("","h1").firstChild.nextSibling.innerHTML='<h1 style="margin:0px;">'+mxResources.get("heading")+" 1</h1>",i("","h2").firstChild.nextSibling.innerHTML='<h2 style="margin:0px;">'+mxResources.get("heading")+" 2</h2>",i("","h3").firstChild.nextSibling.innerHTML='<h3 style="margin:0px;">'+mxResources.get("heading")+" 3</h3>",i("","h4").firstChild.nextSibling.innerHTML='<h4 style="margin:0px;">'+mxResources.get("heading")+" 4</h4>",i("","h5").firstChild.nextSibling.innerHTML='<h5 style="margin:0px;">'+mxResources.get("heading")+" 5</h5>",i("","h6").firstChild.nextSibling.innerHTML='<h6 style="margin:0px;">'+mxResources.get("heading")+" 6</h6>",i("","pre").firstChild.nextSibling.innerHTML='<pre style="margin:0px;">'+mxResources.get("formatted")+"</pre>",i("","blockquote").firstChild.nextSibling.innerHTML='<blockquote style="margin-top:0px;margin-bottom:0px;">'+mxResources.get("blockquote")+"</blockquote>"}))),this.put("fontSize",new Menu(mxUtils.bind(this,function(e,n){for(var i=[6,8,9,10,11,12,14,18,24,36,48,72],l=mxUtils.bind(this,function(i){this.styleChange(e,i,[mxConstants.STYLE_FONTSIZE],[i],null,n,function(){if(null!=t.cellEditor.textarea){document.execCommand("fontSize",!1,"3");for(var e=t.cellEditor.textarea.getElementsByTagName("font"),n=0;n<e.length;n++)if("3"==e[n].getAttribute("size")){e[n].removeAttribute("size"),e[n].style.fontSize=i+"px";break}}})}),o=0;o<i.length;o++)l(i[o]);if(e.addSeparator(n),0<this.customFontSizes.length){for(o=0;o<this.customFontSizes.length;o++)l(this.customFontSizes[o]);e.addSeparator(n),e.addItem(mxResources.get("reset"),null,mxUtils.bind(this,function(){this.customFontSizes=[]}),n),e.addSeparator(n)}this.promptChange(e,mxResources.get("custom")+"...","(pt)","12",mxConstants.STYLE_FONTSIZE,n,!0,mxUtils.bind(this,function(t){this.customFontSizes.push(t)}))}))),this.put("direction",new Menu(mxUtils.bind(this,function(e,n){e.addItem(mxResources.get("flipH"),null,function(){t.toggleCellStyles(mxConstants.STYLE_FLIPH,!1)},n),e.addItem(mxResources.get("flipV"),null,function(){t.toggleCellStyles(mxConstants.STYLE_FLIPV,!1)},n),this.addMenuItems(e,["-","rotation"],n)}))),this.put("align",new Menu(mxUtils.bind(this,function(e,n){e.addItem(mxResources.get("leftAlign"),null,function(){t.alignCells(mxConstants.ALIGN_LEFT)},n),e.addItem(mxResources.get("center"),null,function(){t.alignCells(mxConstants.ALIGN_CENTER)},n),e.addItem(mxResources.get("rightAlign"),null,function(){t.alignCells(mxConstants.ALIGN_RIGHT)},n),e.addSeparator(n),e.addItem(mxResources.get("topAlign"),null,function(){t.alignCells(mxConstants.ALIGN_TOP)},n),e.addItem(mxResources.get("middle"),null,function(){t.alignCells(mxConstants.ALIGN_MIDDLE)},n),e.addItem(mxResources.get("bottomAlign"),null,function(){t.alignCells(mxConstants.ALIGN_BOTTOM)},n)}))),this.put("distribute",new Menu(mxUtils.bind(this,function(e,n){e.addItem(mxResources.get("horizontal"),null,function(){t.distributeCells(!0)},n),e.addItem(mxResources.get("vertical"),null,function(){t.distributeCells(!1)},n)}))),this.put("line",new Menu(mxUtils.bind(this,function(e,n){var i=t.view.getState(t.getSelectionCell());null!=i&&("arrow"!=(i=mxUtils.getValue(i.style,mxConstants.STYLE_SHAPE))&&(this.edgeStyleChange(e,"",[mxConstants.STYLE_EDGE,mxConstants.STYLE_CURVED,mxConstants.STYLE_NOEDGESTYLE],[null,null,null],"geIcon geSprite geSprite-straight",n,!0).setAttribute("title",mxResources.get("straight")),this.edgeStyleChange(e,"",[mxConstants.STYLE_EDGE,mxConstants.STYLE_CURVED,mxConstants.STYLE_NOEDGESTYLE],["orthogonalEdgeStyle",null,null],"geIcon geSprite geSprite-orthogonal",n,!0).setAttribute("title",mxResources.get("orthogonal")),this.edgeStyleChange(e,"",[mxConstants.STYLE_EDGE,mxConstants.STYLE_ELBOW,mxConstants.STYLE_CURVED,mxConstants.STYLE_NOEDGESTYLE],["elbowEdgeStyle",null,null,null],"geIcon geSprite geSprite-horizontalelbow",n,!0).setAttribute("title",mxResources.get("simple")),this.edgeStyleChange(e,"",[mxConstants.STYLE_EDGE,mxConstants.STYLE_ELBOW,mxConstants.STYLE_CURVED,mxConstants.STYLE_NOEDGESTYLE],["elbowEdgeStyle","vertical",null,null],"geIcon geSprite geSprite-verticalelbow",n,!0).setAttribute("title",mxResources.get("simple")),this.edgeStyleChange(e,"",[mxConstants.STYLE_EDGE,mxConstants.STYLE_ELBOW,mxConstants.STYLE_CURVED,mxConstants.STYLE_NOEDGESTYLE],["isometricEdgeStyle",null,null,null],"geIcon geSprite geSprite-horizontalisometric",n,!0).setAttribute("title",mxResources.get("isometric")),this.edgeStyleChange(e,"",[mxConstants.STYLE_EDGE,mxConstants.STYLE_ELBOW,mxConstants.STYLE_CURVED,mxConstants.STYLE_NOEDGESTYLE],["isometricEdgeStyle","vertical",null,null],"geIcon geSprite geSprite-verticalisometric",n,!0).setAttribute("title",mxResources.get("isometric")),"connector"==i&&this.edgeStyleChange(e,"",[mxConstants.STYLE_EDGE,mxConstants.STYLE_CURVED,mxConstants.STYLE_NOEDGESTYLE],["orthogonalEdgeStyle","1",null],"geIcon geSprite geSprite-curved",n,!0).setAttribute("title",mxResources.get("curved")),this.edgeStyleChange(e,"",[mxConstants.STYLE_EDGE,mxConstants.STYLE_CURVED,mxConstants.STYLE_NOEDGESTYLE],["entityRelationEdgeStyle",null,null],"geIcon geSprite geSprite-entity",n,!0).setAttribute("title",mxResources.get("entityRelation"))),e.addSeparator(n),this.styleChange(e,"",[mxConstants.STYLE_SHAPE,mxConstants.STYLE_STARTSIZE,mxConstants.STYLE_ENDSIZE,"width"],[null,null,null,null],"geIcon geSprite geSprite-connection",n,!0,null,!0).setAttribute("title",mxResources.get("line")),this.styleChange(e,"",[mxConstants.STYLE_SHAPE,mxConstants.STYLE_STARTSIZE,mxConstants.STYLE_ENDSIZE,"width"],["link",null,null,null],"geIcon geSprite geSprite-linkedge",n,!0,null,!0).setAttribute("title",mxResources.get("link")),this.styleChange(e,"",[mxConstants.STYLE_SHAPE,mxConstants.STYLE_STARTSIZE,mxConstants.STYLE_ENDSIZE,"width"],["flexArrow",null,null,null],"geIcon geSprite geSprite-arrow",n,!0,null,!0).setAttribute("title",mxResources.get("arrow")),this.styleChange(e,"",[mxConstants.STYLE_SHAPE,mxConstants.STYLE_STARTSIZE,mxConstants.STYLE_ENDSIZE,"width"],["arrow",null,null,null],"geIcon geSprite geSprite-simplearrow",n,!0,null,!0).setAttribute("title",mxResources.get("simpleArrow")))}))),this.put("layout",new Menu(mxUtils.bind(this,function(e,n){var i=mxUtils.bind(this,function(t,e){t=new FilenameDialog(this.editorUi,t,mxResources.get("apply"),function(t){e(parseFloat(t))},mxResources.get("spacing")),this.editorUi.showDialog(t.container,300,80,!0,!0),t.init()});e.addItem(mxResources.get("horizontalFlow"),null,mxUtils.bind(this,function(){var e=new mxHierarchicalLayout(t,mxConstants.DIRECTION_WEST);this.editorUi.executeLayout(function(){var n=t.getSelectionCells();e.execute(t.getDefaultParent(),0==n.length?null:n)},!0)}),n),e.addItem(mxResources.get("verticalFlow"),null,mxUtils.bind(this,function(){var e=new mxHierarchicalLayout(t,mxConstants.DIRECTION_NORTH);this.editorUi.executeLayout(function(){var n=t.getSelectionCells();e.execute(t.getDefaultParent(),0==n.length?null:n)},!0)}),n),e.addSeparator(n),e.addItem(mxResources.get("horizontalTree"),null,mxUtils.bind(this,function(){var e,n=t.getSelectionCell(),l=null;null==n||0==t.getModel().getChildCount(n)?0==t.getModel().getEdgeCount(n)&&(l=t.findTreeRoots(t.getDefaultParent())):l=t.findTreeRoots(n),null!=(n=null!=l&&0<l.length?l[0]:n)&&((e=new mxCompactTreeLayout(t,!0)).edgeRouting=!1,e.levelDistance=30,i(e.levelDistance,mxUtils.bind(this,function(i){e.levelDistance=i,this.editorUi.executeLayout(function(){e.execute(t.getDefaultParent(),n)},!0)})))}),n),e.addItem(mxResources.get("verticalTree"),null,mxUtils.bind(this,function(){var e,n=t.getSelectionCell(),l=null;null==n||0==t.getModel().getChildCount(n)?0==t.getModel().getEdgeCount(n)&&(l=t.findTreeRoots(t.getDefaultParent())):l=t.findTreeRoots(n),null!=(n=null!=l&&0<l.length?l[0]:n)&&((e=new mxCompactTreeLayout(t,!1)).edgeRouting=!1,e.levelDistance=30,i(e.levelDistance,mxUtils.bind(this,function(i){e.levelDistance=i,this.editorUi.executeLayout(function(){e.execute(t.getDefaultParent(),n)},!0)})))}),n),e.addItem(mxResources.get("radialTree"),null,mxUtils.bind(this,function(){var e,n=t.getSelectionCell(),l=null;null==n||0==t.getModel().getChildCount(n)?0==t.getModel().getEdgeCount(n)&&(l=t.findTreeRoots(t.getDefaultParent())):l=t.findTreeRoots(n),null!=(n=null!=l&&0<l.length?l[0]:n)&&((e=new mxRadialTreeLayout(t,!1)).levelDistance=80,e.autoRadius=!0,i(e.levelDistance,mxUtils.bind(this,function(i){e.levelDistance=i,this.editorUi.executeLayout(function(){e.execute(t.getDefaultParent(),n),t.isSelectionEmpty()||(n=t.getModel().getParent(n),t.getModel().isVertex(n)&&t.updateGroupBounds([n],2*t.gridSize,!0))},!0)})))}),n),e.addSeparator(n),e.addItem(mxResources.get("organic"),null,mxUtils.bind(this,function(){var e=new mxFastOrganicLayout(t);i(e.forceConstant,mxUtils.bind(this,function(n){e.forceConstant=n,this.editorUi.executeLayout(function(){var n=t.getSelectionCell();null!=n&&0!=t.getModel().getChildCount(n)||(n=t.getDefaultParent()),e.execute(n),t.getModel().isVertex(n)&&t.updateGroupBounds([n],2*t.gridSize,!0)},!0)}))}),n),e.addItem(mxResources.get("circle"),null,mxUtils.bind(this,function(){var e=new mxCircleLayout(t);this.editorUi.executeLayout(function(){var n=t.getSelectionCell();null!=n&&0!=t.getModel().getChildCount(n)||(n=t.getDefaultParent()),e.execute(n),t.getModel().isVertex(n)&&t.updateGroupBounds([n],2*t.gridSize,!0)},!0)}),n)}))),this.put("navigation",new Menu(mxUtils.bind(this,function(t,e){this.addMenuItems(t,"home - exitGroup enterGroup - expand collapse - collapsible".split(" "),e)}))),this.put("arrange",new Menu(mxUtils.bind(this,function(t,e){this.addMenuItems(t,["toFront","toBack","-"],e),this.addSubmenu("direction",t,e),this.addMenuItems(t,["turn","-"],e),this.addSubmenu("align",t,e),this.addSubmenu("distribute",t,e),t.addSeparator(e),this.addSubmenu("navigation",t,e),this.addSubmenu("insert",t,e),this.addSubmenu("layout",t,e),this.addMenuItems(t,"- group ungroup removeFromGroup - clearWaypoints autosize".split(" "),e)}))).isEnabled=e,this.put("insert",new Menu(mxUtils.bind(this,function(t,e){this.addMenuItems(t,["insertLink","insertImage"],e)}))),this.put("view",new Menu(mxUtils.bind(this,function(t,e){this.addMenuItems(t,(null!=this.editorUi.format?["formatPanel"]:[]).concat("outline layers - pageView pageScale - scrollbars tooltips - grid guides - connectionArrows connectionPoints - resetView zoomIn zoomOut".split(" "),e))}))),this.put("viewPanels",new Menu(mxUtils.bind(this,function(t,e){null!=this.editorUi.format&&this.addMenuItems(t,["formatPanel"],e),this.addMenuItems(t,["outline","layers"],e)}))),this.put("viewZoom",new Menu(mxUtils.bind(this,function(e,n){this.addMenuItems(e,["resetView","-"],n);for(var i=[.25,.5,.75,1,1.25,1.5,2,3,4],l=0;l<i.length;l++)!function(i){e.addItem(100*i+"%",null,function(){t.zoomTo(i)},n)}(i[l]);this.addMenuItems(e,"- fitWindow fitPageWidth fitPage fitTwoPages - customZoom".split(" "),n)}))),this.put("file",new Menu(mxUtils.bind(this,function(t,e){this.addMenuItems(t,"new open - save saveAs - import export - pageSetup print".split(" "),e)}))),this.put("edit",new Menu(mxUtils.bind(this,function(t,e){this.addMenuItems(t,"undo redo - cut copy paste delete - duplicate - editData editTooltip - editStyle - edit - editLink openLink - selectVertices selectEdges selectAll selectNone - lockUnlock".split(" "))}))),this.put("extras",new Menu(mxUtils.bind(this,function(t,e){this.addMenuItems(t,["copyConnect","collapseExpand","-","editDiagram"])}))),this.put("help",new Menu(mxUtils.bind(this,function(t,e){this.addMenuItems(t,["help","-","about"])})))},Menus.prototype.put=function(t,e){return this.menus[t]=e},Menus.prototype.get=function(t){return this.menus[t]},Menus.prototype.addSubmenu=function(t,e,n,i){var l=this.get(t);null!=l&&(l=l.isEnabled(),e.showDisabled||l)&&(n=e.addItem(i||mxResources.get(t),null,null,n,null,l),this.addMenu(t,e,n))},Menus.prototype.addMenu=function(t,e,n){var i=this.get(t);null!=i&&(e.showDisabled||i.isEnabled())&&this.get(t).execute(e,n)},Menus.prototype.addInsertTableCellItem=function(t,e){var n=this.editorUi.editor.graph;this.addInsertTableItem(t,mxUtils.bind(this,function(t,e,i){e=mxEvent.isControlDown(t)||mxEvent.isMetaDown(t)?n.createCrossFunctionalSwimlane(e,i):n.createTable(e,i,null,null,mxEvent.isShiftDown(t)?"Table":null),t=mxEvent.isAltDown(t)?n.getFreeInsertPoint():n.getCenterInsertPoint(n.getBoundingBoxFromGeometry([e],!0)),null!=(t=n.importCells([e],t.x,t.y))&&0<t.length&&(n.scrollCellToVisible(t[0]),n.setSelectionCells(t))}),e)},Menus.prototype.addInsertTableItem=function(t,e,n){function i(t){var e=!1;if(null!=(s=l.getParentByName(mxEvent.getSource(t),"TD"))){o=l.getParentByName(s,"TR");for(var n=mxEvent.isMouseEvent(t)?2:4,i=r,h=Math.min(20,o.sectionRowIndex+n),u=(n=Math.min(20,s.cellIndex+n),i.rows.length);u<h;u++)for(var d=i.insertRow(u),c=0;c<i.rows[0].cells.length;c++)d.insertCell(-1);for(u=0;u<i.rows.length;u++)for(c=(d=i.rows[u]).cells.length;c<n;c++)d.insertCell(-1);for(a.innerHTML=s.cellIndex+1+"x"+(o.sectionRowIndex+1),i=0;i<r.rows.length;i++)for(h=r.rows[i],n=0;n<h.cells.length;n++)u=h.cells[n],i==o.sectionRowIndex&&n==s.cellIndex&&(e="blue"==u.style.backgroundColor),u.style.backgroundColor=i<=o.sectionRowIndex&&n<=s.cellIndex?"blue":"transparent"}return mxEvent.consume(t),e}e=null!=e?e:mxUtils.bind(this,function(t,e,n){var i=this.editorUi.editor.graph;if(null!=(t=i.getParentByName(mxEvent.getSource(t),"TD"))&&null!=i.cellEditor.textarea){i.getParentByName(t,"TR");var l=i.cellEditor.textarea.getElementsByTagName("table");t=[];for(var o=0;o<l.length;o++)t.push(l[o]);if(i.container.focus(),i.pasteHtmlAtCaret(function(t,e){for(var n=["<table>"],i=0;i<t;i++){n.push("<tr>");for(var l=0;l<e;l++)n.push("<td><br></td>");n.push("</tr>")}return n.push("</table>"),n.join("")}(e,n)),(e=i.cellEditor.textarea.getElementsByTagName("table")).length==t.length+1)for(o=e.length-1;0<=o;o--)if(0==o||e[o]!=t[o-1]){i.selectNode(e[o].rows[0].cells[0]);break}}});var l=this.editorUi.editor.graph,o=null,s=null;(t=t.addItem("",null,null,n,null,null,null,!0)).firstChild.innerHTML="";var r=function(){var t=document.createElement("table");t.setAttribute("border","1"),t.style.borderCollapse="collapse",t.style.borderStyle="solid",t.setAttribute("cellPadding","8");for(var e=0;e<5;e++)for(var n=t.insertRow(e),i=0;i<5;i++)n.insertCell(-1);return t}();t.firstChild.appendChild(r);var a=document.createElement("div");a.style.padding="4px",a.style.fontSize=Menus.prototype.defaultFontSize+"px",a.innerHTML="1x1",t.firstChild.appendChild(a),mxEvent.addGestureListeners(r,null,null,mxUtils.bind(this,function(t){var n=i(t);null!=s&&null!=o&&n&&(e(t,o.sectionRowIndex+1,s.cellIndex+1),window.setTimeout(mxUtils.bind(this,function(){this.editorUi.hideCurrentMenu()}),0))})),mxEvent.addListener(r,"mouseover",i)},Menus.prototype.edgeStyleChange=function(t,e,n,i,l,o,s){return this.showIconOnly(t.addItem(e,null,mxUtils.bind(this,function(){var t=this.editorUi.editor.graph;t.stopEditing(!1),t.getModel().beginUpdate();try{for(var e=t.getSelectionCells(),l=[],o=0;o<e.length;o++){var r,a=e[o];if(t.getModel().isEdge(a)){!s||null!=(r=t.getCellGeometry(a))&&((r=r.clone()).points=null,t.getModel().setGeometry(a,r));for(var h=0;h<n.length;h++)t.setCellStyles(n[h],i[h],[a]);l.push(a)}}this.editorUi.fireEvent(new mxEventObject("styleChanged","keys",n,"values",i,"cells",l))}finally{t.getModel().endUpdate()}}),o,l))},Menus.prototype.showIconOnly=function(t){var e=t.getElementsByTagName("td");for(i=0;i<e.length;i++)"mxPopupMenuItem"==e[i].getAttribute("class")&&(e[i].style.display="none");return t},Menus.prototype.styleChange=function(t,e,n,i,l,o,s,r,a){var h=this.createStyleChangeFunction(n,i);return t=t.addItem(e,null,mxUtils.bind(this,function(){null!=s&&this.editorUi.editor.graph.cellEditor.isContentEditing()?s():h(r)}),o,l),a&&this.showIconOnly(t),t},Menus.prototype.createStyleChangeFunction=function(t,e){return mxUtils.bind(this,function(n){var i=this.editorUi.editor.graph;i.stopEditing(!1),i.getModel().beginUpdate();try{for(var l=i.getSelectionCells(),o=!1,s=0;s<t.length;s++)i.setCellStyles(t[s],e[s],l),t[s]==mxConstants.STYLE_ALIGN&&i.updateLabelElements(l,function(t){t.removeAttribute("align"),t.style.textAlign=null}),t[s]!=mxConstants.STYLE_FONTFAMILY&&"fontSource"!=t[s]||(o=!0);if(o)for(o=0;o<l.length;o++)0==i.model.getChildCount(l[o])&&i.autoSizeCell(l[o],!1);null!=n&&n(),this.editorUi.fireEvent(new mxEventObject("styleChanged","keys",t,"values",e,"cells",l))}finally{i.getModel().endUpdate()}})},Menus.prototype.promptChange=function(t,e,n,i,l,o,s,r,a){return t.addItem(e,null,mxUtils.bind(this,function(){var t=this.editorUi.editor.graph,e=i,o=t.getView().getState(t.getSelectionCell());null!=o&&(e=o.style[l]||e),e=new FilenameDialog(this.editorUi,e,mxResources.get("apply"),mxUtils.bind(this,function(e){if(null!=e&&0<e.length){t.getModel().beginUpdate();try{t.stopEditing(!1),t.setCellStyles(l,e)}finally{t.getModel().endUpdate()}null!=r&&r(e)}}),mxResources.get("enterValue")+(0<n.length?" "+n:"")),this.editorUi.showDialog(e.container,300,80,!0,!0),e.init()}),o,a,s)},Menus.prototype.pickColor=function(t,e,n){var i,l,o=this.editorUi.editor.graph,s=226+17*(Math.ceil(ColorDialog.prototype.presetColors.length/12)+Math.ceil(ColorDialog.prototype.defaultColors.length/12));null!=e&&o.cellEditor.isContentEditing()?(i=o.cellEditor.saveSelection(),t=new ColorDialog(this.editorUi,n||"000000",mxUtils.bind(this,function(t){o.cellEditor.restoreSelection(i),document.execCommand(e,!1,t!=mxConstants.NONE?t:"transparent")}),function(){o.cellEditor.restoreSelection(i)}),this.editorUi.showDialog(t.container,230,s,!0,!0),t.init()):(null==this.colorDialog&&(this.colorDialog=new ColorDialog(this.editorUi)),this.colorDialog.currentColorKey=t,(l="none")==(l=null!=(n=o.getView().getState(o.getSelectionCell()))&&n.style[t]||l)?(this.colorDialog.picker.fromString(l="ffffff"),this.colorDialog.colorInput.value="none"):this.colorDialog.picker.fromString(l),this.editorUi.showDialog(this.colorDialog.container,230,s,!0,!0),this.colorDialog.init())},Menus.prototype.toggleStyle=function(t,e){var n=this.editorUi.editor.graph;e=n.toggleCellStyles(t,e),this.editorUi.fireEvent(new mxEventObject("styleChanged","keys",[t],"values",[e],"cells",n.getSelectionCells()))},Menus.prototype.addMenuItem=function(t,e,n,i,l,o){var s=this.editorUi.actions.get(e);return null!=s&&(t.showDisabled||s.isEnabled())&&s.visible?(e=t.addItem(o||s.label,null,function(t){s.funct(i,t)},n,l,s.isEnabled()),s.toggleAction&&s.isSelected()&&t.addCheckmark(e,Editor.checkmarkImage),this.addShortcut(e,s),e):null},Menus.prototype.addShortcut=function(t,e){var n;null!=e.shortcut&&(t=t.firstChild.nextSibling.nextSibling,(n=document.createElement("span")).style.color="gray",mxUtils.write(n,e.shortcut),t.appendChild(n))},Menus.prototype.addMenuItems=function(t,e,n,i,l){for(var o=0;o<e.length;o++)"-"==e[o]?t.addSeparator(n):this.addMenuItem(t,e[o],n,i,null!=l?l[o]:null)},Menus.prototype.createPopupMenu=function(t,e,n){t.smartSeparators=!0,this.addPopupMenuHistoryItems(t,e,n),this.addPopupMenuEditItems(t,e,n),this.addPopupMenuStyleItems(t,e,n),this.addPopupMenuArrangeItems(t,e,n),this.addPopupMenuCellItems(t,e,n),this.addPopupMenuSelectionItems(t,e,n)},Menus.prototype.addPopupMenuHistoryItems=function(t,e,n){this.editorUi.editor.graph.isSelectionEmpty()&&this.addMenuItems(t,["undo","redo"],null,n)},Menus.prototype.addPopupMenuEditItems=function(t,e,n){this.editorUi.editor.graph.isSelectionEmpty()?this.addMenuItems(t,["pasteHere"],null,n):this.addMenuItems(t,"delete - cut copy - duplicate".split(" "),null,n)},Menus.prototype.addPopupMenuStyleItems=function(t,e,n){1==this.editorUi.editor.graph.getSelectionCount()?this.addMenuItems(t,["-","setAsDefaultStyle"],null,n):this.editorUi.editor.graph.isSelectionEmpty()&&this.addMenuItems(t,["-","clearDefaultStyle"],null,n)},Menus.prototype.addPopupMenuArrangeItems=function(t,e,n){var i=this.editorUi.editor.graph;i.isSelectionEmpty()||this.addMenuItems(t,["-","toFront","toBack"],null,n),1<i.getSelectionCount()?this.addMenuItems(t,["-","group"],null,n):1==i.getSelectionCount()&&!i.getModel().isEdge(e)&&!i.isSwimlane(e)&&0<i.getModel().getChildCount(e)&&this.addMenuItems(t,["-","ungroup"],null,n)},Menus.prototype.addPopupMenuCellItems=function(t,e,n){var i=this.editorUi.editor.graph;e=i.getSelectionCell();var l,o,s,r=i.view.getState(e);t.addSeparator(),null!=r&&(l=!1,1==i.getSelectionCount()&&i.getModel().isEdge(e)&&(t.addSeparator(),this.addSubmenu("line",t)),i.getModel().isEdge(e)&&"entityRelationEdgeStyle"!=mxUtils.getValue(r.style,mxConstants.STYLE_EDGE,null)&&"arrow"!=mxUtils.getValue(r.style,mxConstants.STYLE_SHAPE,null)&&(o=!1,(l=i.selectionCellsHandler.getHandler(e))instanceof mxEdgeHandler&&null!=l.bends&&2<l.bends.length&&(o=l.getHandleForEvent(i.updateMouseEvent(new mxMouseEvent(n))),(s=this.editorUi.actions.get("removeWaypoint")).handler=l,o=0<(s.index=o)&&o<l.bends.length-1),t.addSeparator(),this.addMenuItem(t,"turn",null,n,null,mxResources.get("reverse")),this.addMenuItems(t,[o?"removeWaypoint":"addWaypoint"],null,n),l=null!=(l=i.getModel().getGeometry(e))&&null!=l.points&&0<l.points.length),1==i.getSelectionCount()&&(l||i.getModel().isVertex(e)&&0<i.getModel().getEdgeCount(e))&&this.addMenuItems(t,["-","clearWaypoints"],null,n),1==i.getSelectionCount()&&(this.addMenuItems(t,["-","editStyle","editData","editLink"],null,n),i.getModel().isVertex(e)&&null!=mxUtils.getValue(r.style,mxConstants.STYLE_IMAGE,null)&&(t.addSeparator(),this.addMenuItem(t,"image",null,n).firstChild.nextSibling.innerHTML=mxResources.get("editImage")+"...")))},Menus.prototype.addPopupMenuSelectionItems=function(t,e,n){this.editorUi.editor.graph.isSelectionEmpty()&&this.addMenuItems(t,["-","selectVertices","selectEdges","selectAll"],null,n)},Menus.prototype.createMenubar=function(t){for(var e=new Menubar(this.editorUi,t),n=this.defaultMenuItems,i=0;i<n.length;i++)mxUtils.bind(this,function(t){var l=e.addMenu(mxResources.get(n[i]),mxUtils.bind(this,function(){t.funct.apply(this,arguments)}));this.menuCreated(t,l)})(this.get(n[i]));return e},Menus.prototype.menuCreated=function(t,e,n){null!=e&&(n=null!=n?n:"geItem",t.addListener("stateChanged",function(){(e.enabled=t.enabled)?(e.className=n,8==document.documentMode&&(e.style.color="")):(e.className=n+" mxDisabled",8==document.documentMode&&(e.style.color="#c3c3c3"))}))},Menubar.prototype.hideMenu=function(){this.editorUi.hideCurrentMenu()},Menubar.prototype.addMenu=function(t,e,n){var i=document.createElement("a");return i.className="geItem",mxUtils.write(i,t),this.addMenuHandler(i,e),null!=n?this.container.insertBefore(i,n):this.container.appendChild(i),i},Menubar.prototype.addMenuHandler=function(t,e){var n,i;null!=e&&(n=!0,i=mxUtils.bind(this,function(i){var l,o;(n&&null==t.enabled||t.enabled)&&(this.editorUi.editor.graph.popupMenuHandler.hideMenu(),(l=new mxPopupMenu(e)).div.className+=" geMenubarMenu",l.smartSeparators=!0,l.showDisabled=!0,l.autoExpand=!0,l.hideMenu=mxUtils.bind(this,function(){mxPopupMenu.prototype.hideMenu.apply(l,arguments),this.editorUi.resetCurrentMenu(),l.destroy()}),o=mxUtils.getOffset(t),l.popup(o.x,o.y+t.offsetHeight,null,i),this.editorUi.setCurrentMenu(l,t)),mxEvent.consume(i)}),mxEvent.addListener(t,"mousemove",mxUtils.bind(this,function(e){null!=this.editorUi.currentMenu&&this.editorUi.currentMenuElt!=t&&(this.editorUi.hideCurrentMenu(),i(e))})),mxEvent.addListener(t,mxClient.IS_POINTER?"pointerdown":"mousedown",mxUtils.bind(this,function(e){n=this.currentElt!=t,e.preventDefault()})),mxEvent.addListener(t,"click",mxUtils.bind(this,function(t){i(t),n=!0})))},Menubar.prototype.destroy=function(){},mxUtils.extend(Menu,mxEventSource),Menu.prototype.isEnabled=function(){return this.enabled},Menu.prototype.setEnabled=function(t){this.enabled!=t&&(this.enabled=t,this.fireEvent(new mxEventObject("stateChanged")))},Menu.prototype.execute=function(t,e){this.funct(t,e)},EditorUi.prototype.createMenus=function(){return new Menus(this)},module.exports={Action:Action,Actions:Actions,Dialog:Dialog,Editor:Editor,EditorUi:EditorUi,Format:Format,Graph:Graph,Menu:Menu,Menubar:Menubar,Menus:Menus,Sidebar:Sidebar,Toolbar:Toolbar,mxUtils:mxUtils,mxResources:mxResources,mxClient:mxClient,mxGraph:mxGraph,mxCodec:mxCodec,mxEventObject:mxEventObject,mxKeyHandler:mxKeyHandler,DiagramFormatPanel:DiagramFormatPanel,ChangePageSetup:ChangePageSetup,BaseFormatPanel:BaseFormatPanel,mxEvent:mxEvent,mxConstants:mxConstants,ArrangePanel:ArrangePanel,mxGeometry:mxGeometry,mxPoint:mxPoint,mxCell:mxCell,mxStencilRegistry:mxStencilRegistry,mxGraphView:mxGraphView,mxRectangle:mxRectangle,mxPolyline:mxPolyline,mxRectangleShape:mxRectangleShape,mxPopupMenu:mxPopupMenu,mxGraphHandler:mxGraphHandler,mxPopupMenuHandler:mxPopupMenuHandler,mxShape:mxShape,mxSvgCanvas2D:mxSvgCanvas2D,mxClient:mxClient,mxCellHighlight:mxCellHighlight,mxCellRenderer:mxCellRenderer,mxConnectionHandler:mxConnectionHandler,mxClipboard:mxClipboard,mxDictionary:mxDictionary,LayersWindow:LayersWindow,FilenameDialog:FilenameDialog};var $jscomp={scope:{}};function _instanceof(t,e){return null!=e&&"undefined"!=typeof Symbol&&e[Symbol.hasInstance]?!!e[Symbol.hasInstance](t):t instanceof e}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&_setPrototypeOf(t,e)}function _setPrototypeOf(t,e){return(_setPrototypeOf=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function _createSuper(t){var e=_isNativeReflectConstruct();return function(){var n,i=_getPrototypeOf(t);return _possibleConstructorReturn(this,i=e?(n=_getPrototypeOf(this).constructor,Reflect.construct(i,arguments,n)):i.apply(this,arguments))}}function _possibleConstructorReturn(t,e){return!e||"object"!==_typeof(e)&&"function"!=typeof e?_assertThisInitialized(t):e}function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}function _getPrototypeOf(t){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function _createForOfIteratorHelper(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=_unsupportedIterableToArray(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0;return{s:e=function(){},n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:e}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,o=!0,s=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return o=t.done,t},e:function(t){s=!0,l=t},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw l}}}}function _classCallCheck(t,e){if(!_instanceof(t,e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function _createClass(t,e,n){return e&&_defineProperties(t.prototype,e),n&&_defineProperties(t,n),t}function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _toConsumableArray(t){return _arrayWithoutHoles(t)||_iterableToArray(t)||_unsupportedIterableToArray(t)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _iterableToArray(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}function _arrayWithoutHoles(t){if(Array.isArray(t))return _arrayLikeToArray(t)}function _slicedToArray(t,e){return _arrayWithHoles(t)||_iterableToArrayLimit(t,e)||_unsupportedIterableToArray(t,e)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(t,e){if(t){if("string"==typeof t)return _arrayLikeToArray(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Map"===(n="Object"===n&&t.constructor?t.constructor.name:n)||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(t,e):void 0}}function _arrayLikeToArray(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=Array(e);n<e;n++)i[n]=t[n];return i}function _iterableToArrayLimit(t,e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t)){var n=[],i=!0,l=!1,o=void 0;try{for(var s,r=t[Symbol.iterator]();!(i=(s=r.next()).done)&&(n.push(s.value),!e||n.length!==e);i=!0);}catch(t){l=!0,o=t}finally{try{i||null==r.return||r.return()}finally{if(l)throw o}}return n}}function _arrayWithHoles(t){if(Array.isArray(t))return t}$jscomp.defineProperty="function"==typeof Object.defineProperties?Object.defineProperty:function(t,e,n){if(n.get||n.set)throw new TypeError("ES3 does not support getters and setters.");t!=Array.prototype&&t!=Object.prototype&&(t[e]=n.value)},$jscomp.getGlobal=function(t){return"undefined"!=typeof window&&window===t||"undefined"==typeof global||null==global?t:global},$jscomp.global=$jscomp.getGlobal(this),$jscomp.polyfill=function(t,e,n,i){if(e){for(n=$jscomp.global,t=t.split("."),i=0;i<t.length-1;i++){var l=t[i];l in n||(n[l]={}),n=n[l]}(e=e(i=n[t=t[t.length-1]]))!=i&&null!=e&&$jscomp.defineProperty(n,t,{configurable:!0,writable:!0,value:e})}},$jscomp.polyfill("Math.imul",function(t){return t||function(t,e){var n=65535&(t=Number(t)),i=65535&(e=Number(e));return n*i+((t>>>16&65535)*i+n*(e>>>16&65535)<<16>>>0)|0}},"es6-impl","es3"),$jscomp.polyfill("Object.setPrototypeOf",function(t){return t||("object"!=typeof"".__proto__?null:function(t,e){if(t.__proto__=e,t.__proto__!==e)throw new TypeError(t+" is not extensible");return t})},"es6","es5"),$jscomp.polyfill("Reflect.apply",function(t){if(t)return t;var e=Function.prototype.apply;return function(t,n,i){return e.call(t,n,i)}},"es6","es3"),$jscomp.polyfill("Reflect.construct",function(t){return t||function(t,e,n){return void 0===n&&(n=t),n=Object.create(n.prototype||Object.prototype),Reflect.apply(t,n,e)||n}},"es6","es5"),$jscomp.SYMBOL_PREFIX="jscomp_symbol_",$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){},$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)},$jscomp.symbolCounter_=0,$jscomp.Symbol=function(t){return $jscomp.SYMBOL_PREFIX+(t||"")+$jscomp.symbolCounter_++},$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var t=(t=$jscomp.global.Symbol.iterator)||($jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));"function"!=typeof Array.prototype[t]&&$jscomp.defineProperty(Array.prototype,t,{configurable:!0,writable:!0,value:function(){return $jscomp.arrayIterator(this)}}),$jscomp.initSymbolIterator=function(){}},$jscomp.arrayIterator=function(t){var e=0;return $jscomp.iteratorPrototype(function(){return e<t.length?{done:!1,value:t[e++]}:{done:!0}})},$jscomp.iteratorPrototype=function(t){return $jscomp.initSymbolIterator(),(t={next:t})[$jscomp.global.Symbol.iterator]=function(){return this},t},$jscomp.polyfill("Array.from",function(t){return t||function(t,e,n){$jscomp.initSymbolIterator(),e=null!=e?e:function(t){return t};var i=[];if("function"==typeof(l=t[Symbol.iterator]))for(t=l.call(t);!(l=t.next()).done;)i.push(e.call(n,l.value));else for(var l=t.length,o=0;o<l;o++)i.push(e.call(n,t[o]));return i}},"es6-impl","es3"),$jscomp.polyfill("Number.MAX_SAFE_INTEGER",function(){return 9007199254740991},"es6-impl","es3"),$jscomp.owns=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},$jscomp.polyfill("Object.assign",function(t){return t||function(t,e){for(var n=1;n<arguments.length;n++){var i=arguments[n];if(i)for(var l in i)$jscomp.owns(i,l)&&(t[l]=i[l])}return t}},"es6-impl","es3"),$jscomp.polyfill("Array.prototype.fill",function(t){return t||function(t,e,n){var i=this.length||0;for(e<0&&(e=Math.max(0,i+e)),(null==n||i<n)&&(n=i),(n=Number(n))<0&&(n=Math.max(0,i+n)),e=Number(e||0);e<n;e++)this[e]=t;return this}},"es6-impl","es3"),Array.from||(Array.from=function(t){return[].slice.call(t)}),Math.imul=Math.imul||function(t,e){var n=65535&t,i=65535&e;return n*i+((t>>>16&65535)*i+n*(e>>>16&65535)<<16>>>0)|0};var rough=function(){function t(t,e,n){var i,l,o,s;t&&t.length&&(i=(e=_slicedToArray(e,2))[0],l=e[1],n*=Math.PI/180,o=Math.cos(n),s=Math.sin(n),t.forEach(function(t){var e=(n=_slicedToArray(t,2))[0],n=n[1];t[0]=(e-i)*o-(n-l)*s+i,t[1]=(e-i)*s+(n-l)*o+l}))}function e(t){var e=t[0];return t=t[1],Math.sqrt(Math.pow(e[0]-t[0],2)+Math.pow(e[1]-t[1],2))}function n(t,e,n){var s=t.length;if(s<3)return!1;var r=[Number.MAX_SAFE_INTEGER,n];e=[e,n];for(var a=n=0;a<s;a++){var h=t[a],u=t[(a+1)%s];if(o(h,u,e,r)){if(0===l(h,e,u))return i(h,e,u);n++}}return 1==n%2}function i(t,e,n){return e[0]<=Math.max(t[0],n[0])&&e[0]>=Math.min(t[0],n[0])&&e[1]<=Math.max(t[1],n[1])&&e[1]>=Math.min(t[1],n[1])}function l(t,e,n){return 0==(t=(e[1]-t[1])*(n[0]-e[0])-(e[0]-t[0])*(n[1]-e[1]))?0:0<t?1:2}function o(t,e,n,o){var s=l(t,e,n),r=l(t,e,o),a=l(n,o,t),h=l(n,o,e);return s!==r&&a!==h||!(0!==s||!i(t,n,e))||!(0!==r||!i(t,o,e))||!(0!==a||!i(n,t,o))||!(0!==h||!i(n,e,o))}function s(e,n){var i,l=[0,0],o=Math.round(n.hachureAngle+90);return o&&t(e,l,o),n=function(t){var n=_toConsumableArray(e);n[0].join(",")!==n[n.length-1].join(",")&&n.push([n[0][0],n[0][1]]);var i=[];if(n&&2<n.length){var l=function(){(e=t.hachureGap)<0&&(e=4*t.strokeWidth);for(var e=Math.max(e,.1),l=[],o=0;o<n.length-1;o++){var s,r=n[o],a=n[o+1];r[1]!==a[1]&&(s=Math.min(r[1],a[1]),l.push({ymin:s,ymax:Math.max(r[1],a[1]),x:(s===r[1]?r:a)[0],islope:(a[0]-r[0])/(a[1]-r[1])}))}if(l.sort(function(t,e){return t.ymin<e.ymin?-1:t.ymin>e.ymin?1:t.x<e.x?-1:t.x>e.x?1:t.ymax===e.ymax?0:(t.ymax-e.ymax)/Math.abs(t.ymax-e.ymax)}),!l.length)return{v:i};for(var h=[],u=l[0].ymin;h.length||l.length;){if(l.length){for(o=-1,r=0;r<l.length&&!(l[r].ymin>u);r++)o=r;l.splice(0,o+1).forEach(function(t){h.push({s:u,edge:t})})}if((h=h.filter(function(t){return!(t.edge.ymax<=u)})).sort(function(t,e){return t.edge.x===e.edge.x?0:(t.edge.x-e.edge.x)/Math.abs(t.edge.x-e.edge.x)}),1<h.length)for(o=0;o<h.length&&!((r=o+1)>=h.length);o+=2)i.push([[Math.round(h[o].edge.x),u],[Math.round(h[r].edge.x),u]]);u+=e,h.forEach(function(t){t.edge.x+=e*t.edge.islope})}}();if("object"===_typeof(l))return l.v}return i}(n),o&&(t(e,l,-o),l=l,o=-o,i=[],n.forEach(function(t){return i.push.apply(i,_toConsumableArray(t))}),t(i,l,o)),n}function r(t){var e=[];t:{for(var n=t,i=[];""!==n;){if(!n.match(/^([ \t\r\n,]+)/))if(n.match(/^([aAcChHlLmMqQsStTvVzZ])/))i[i.length]={type:0,text:RegExp.$1};else{if(!n.match(/^(([-+]?[0-9]+(\.[0-9]*)?|[-+]?\.[0-9]+)([eE][-+]?[0-9]+)?)/)){n=[];break t}i[i.length]={type:1,text:"".concat(parseFloat(RegExp.$1))}}n=n.substr(RegExp.$1.length)}i[i.length]={type:2,text:""},n=i}i="BOD";for(var l=0,o=n[l];2!==o.type;){var s=0,a=[];if("BOD"===i){if("M"!==o.text&&"m"!==o.text)return r("M0,0"+t);l++,s=H[o.text],i=o.text}else 1===o.type?s=H[i]:(l++,s=H[o.text],i=o.text);if(!(l+s<n.length))throw Error("Path data ended short");for(o=l;o<l+s;o++){var h=n[o];if(1!==h.type)throw Error("Param not a number: "+i+","+h.text);a[a.length]=+h.text}if("number"!=typeof H[i])throw Error("Bad segment: "+i);e.push({key:i,data:a}),o=n[l+=s],"m"===(i="M"===i?"L":i)&&(i="l")}return e}function a(t){var e,n,i,l,o=0,s=0,r=0,a=0,h=[];t=_createForOfIteratorHelper(t);try{for(t.s();!(l=t.n()).done;){var u=l.value,d=u.data;switch(u.key){case"M":h.push({key:"M",data:_toConsumableArray(d)}),e=_slicedToArray(d,2),o=e[0],s=e[1],r=(n=_slicedToArray(d,2))[0],a=n[1];break;case"m":h.push({key:"M",data:[o+=d[0],s+=d[1]]}),r=o,a=s;break;case"L":h.push({key:"L",data:_toConsumableArray(d)}),i=_slicedToArray(d,2),o=i[0],s=i[1];break;case"l":h.push({key:"L",data:[o+=d[0],s+=d[1]]});break;case"C":h.push({key:"C",data:_toConsumableArray(d)}),o=d[4],s=d[5];break;case"c":var c=d.map(function(t,e){return e%2?t+s:t+o});h.push({key:"C",data:c}),o=c[4],s=c[5];break;case"Q":h.push({key:"Q",data:_toConsumableArray(d)}),o=d[2],s=d[3];break;case"q":var p=d.map(function(t,e){return e%2?t+s:t+o});h.push({key:"Q",data:p}),o=p[2],s=p[3];break;case"A":h.push({key:"A",data:_toConsumableArray(d)}),o=d[5],s=d[6];break;case"a":h.push({key:"A",data:[d[0],d[1],d[2],d[3],d[4],o+=d[5],s+=d[6]]});break;case"H":h.push({key:"H",data:_toConsumableArray(d)}),o=d[0];break;case"h":h.push({key:"H",data:[o+=d[0]]});break;case"V":h.push({key:"V",data:_toConsumableArray(d)}),s=d[0];break;case"v":h.push({key:"V",data:[s+=d[0]]});break;case"S":h.push({key:"S",data:_toConsumableArray(d)}),o=d[2],s=d[3];break;case"s":var m=d.map(function(t,e){return e%2?t+s:t+o});h.push({key:"S",data:m}),o=m[2],s=m[3];break;case"T":h.push({key:"T",data:_toConsumableArray(d)}),o=d[0],s=d[1];break;case"t":h.push({key:"T",data:[o+=d[0],s+=d[1]]});break;case"Z":case"z":h.push({key:"Z",data:[]}),o=r,s=a}}}catch(e){t.e(e)}finally{t.f()}return h}function h(t){var e,n,i,l,o=[],s="",r=0,a=0,h=0,d=0,c=0,p=0;t=_createForOfIteratorHelper(t);try{for(t.s();!(l=t.n()).done;){var m=l.value,g=m.key,x=m.data;switch(g){case"M":o.push({key:"M",data:_toConsumableArray(x)}),r=(e=_slicedToArray(x,2))[0],a=e[1],h=(n=_slicedToArray(x,2))[0],d=n[1];break;case"C":o.push({key:"C",data:_toConsumableArray(x)}),r=x[4],a=x[5],c=x[2],p=x[3];break;case"L":o.push({key:"L",data:_toConsumableArray(x)}),r=(i=_slicedToArray(x,2))[0],a=i[1];break;case"H":o.push({key:"L",data:[r=x[0],a]});break;case"V":o.push({key:"L",data:[r,a=x[0]]});break;case"S":var y=0,f=0;f="C"===s||"S"===s?(y=r+(r-c),a+(a-p)):(y=r,a),o.push({key:"C",data:[y,f].concat(_toConsumableArray(x))}),c=x[0],p=x[1],r=x[2],a=x[3];break;case"T":var v=_slicedToArray(x,2),b=v[0],C=v[1];f=y=0,f="Q"===s||"T"===s?(y=r+(r-c),a+(a-p)):(y=r,a),o.push({key:"C",data:[r+2*(y-r)/3,a+2*(f-a)/3,b+2*(y-b)/3,C+2*(f-C)/3,b,C]}),c=y,p=f,r=b,a=C;break;case"Q":var E=_slicedToArray(x,4),S=E[0],w=E[1],T=E[2],A=E[3];o.push({key:"C",data:[r+2*(S-r)/3,a+2*(w-a)/3,T+2*(S-T)/3,A+2*(w-A)/3,T,A]}),c=S,p=w,r=T,a=A;break;case"A":var M=Math.abs(x[0]),L=Math.abs(x[1]),P=x[2],I=x[3],R=x[4],O=x[5],_=x[6];0===M||0===L?(o.push({key:"C",data:[r,a,O,_,O,_]}),r=O,a=_):r===O&&a===_||(function t(e,n,i,l,o,s,r,a,h,d){var c,p,m,g,x,y=(c=r,Math.PI*c/180);if(c=[],d?(p=(g=_slicedToArray(d,4))[0],a=g[1],m=g[2],g=g[3]):(e=(n=_slicedToArray(p=u(e,n,-y),2))[0],n=n[1],1<(g=(p=(e-(i=(l=_slicedToArray(p=u(i,l,-y),2))[0]))/2)*p/(o*o)+(m=(n-(l=l[1]))/2)*m/(s*s))&&(o*=g=Math.sqrt(g),s*=g),g=o*o,x=s*s,m=(a=(a===h?-1:1)*Math.sqrt(Math.abs((g*x-g*m*m-x*p*p)/(g*m*m+x*p*p))))*o*m/s+(e+i)/2,g=a*-s*p/o+(n+l)/2,p=Math.asin(parseFloat(((n-g)/s).toFixed(9))),a=Math.asin(parseFloat(((l-g)/s).toFixed(9))),e<m&&(p=Math.PI-p),i<m&&(a=Math.PI-a),p<0&&(p=2*Math.PI+p),a<0&&(a=2*Math.PI+a),h&&a<p&&(p-=2*Math.PI),!h&&p<a&&(a-=2*Math.PI)),Math.abs(a-p)>120*Math.PI/180&&(a=h&&p<a?p+120*Math.PI/180*1:p+120*Math.PI/180*-1,c=t(i=m+o*Math.cos(a),l=g+s*Math.sin(a),i,l,o,s,r,0,h,[a,a,m,g])),o=4/3*o*(r=Math.tan((a-p)/4)),r*=4/3*s,s=[e,n],e=[e+o*Math.sin(p),n-r*Math.cos(p)],n=[i+o*Math.sin(a),l-r*Math.cos(a)],i=[i,l],e[0]=2*s[0]-e[0],e[1]=2*s[1]-e[1],d)return[e,n,i].concat(c);for(c=[e,n,i].concat(c),d=[],i=0;i<c.length;i+=3)l=u(c[i][0],c[i][1],y),e=u(c[i+1][0],c[i+1][1],y),n=u(c[i+2][0],c[i+2][1],y),d.push([l[0],l[1],e[0],e[1],n[0],n[1]]);return d}(r,a,O,_,M,L,P,I,R).forEach(function(t){o.push({key:"C",data:t})}),r=O,a=_);break;case"Z":o.push({key:"Z",data:[]}),r=h,a=d}s=g}}catch(e){t.e(e)}finally{t.f()}return o}function u(t,e,n){return[t*Math.cos(n)-e*Math.sin(n),t*Math.sin(n)+e*Math.cos(n)]}function d(t,e,n){var i=(t||[]).length;if(2<i){for(var l=[],o=0;o<i-1;o++)l.push.apply(l,_toConsumableArray(b(t[o][0],t[o][1],t[o+1][0],t[o+1][1],n)));return e&&l.push.apply(l,_toConsumableArray(b(t[i-1][0],t[i-1][1],t[0][0],t[0][1],n))),{type:"path",ops:l}}return 2===i?{type:"path",ops:b(t[0][0],t[0][1],t[1][0],t[1][1],n)}:{type:"path",ops:[]}}function c(t,e,n){var i=2*Math.PI/Math.max(n.curveStepCount,n.curveStepCount/Math.sqrt(200)*Math.sqrt(2*Math.PI*Math.sqrt((Math.pow(t/2,2)+Math.pow(e/2,2))/2)));t=Math.abs(t/2),e=Math.abs(e/2);var l=1-n.curveFitting;return{increment:i,rx:t+=v(t*l,n),ry:e+=v(e*l,n)}}function p(t,e,n,i){var l=(o=_slicedToArray(l=w(i.increment,t,e,i.rx,i.ry,1,i.increment*f(.1,f(.4,1,n),n),n),2))[1],o=S(o[0],null,n);return n.disableMultiStroke||(n=S(t=_slicedToArray(t=w(i.increment,t,e,i.rx,i.ry,1.5,0,n),1)[0],null,n),o=o.concat(n)),{estimatedPoints:l,opset:{type:"path",ops:o}}}function m(t,e,n,i,l,o,s,r,a){for(n=Math.abs(n/2),i=Math.abs(i/2),n+=v(.01*n,a),i+=v(.01*i,a);l<0;)l+=2*Math.PI,o+=2*Math.PI;o-l>2*Math.PI&&(l=0,o=2*Math.PI);var h=Math.min(2*Math.PI/a.curveStepCount/2,(o-l)/2),u=T(h,t,e,n,i,l,o,1,a);return a.disableMultiStroke||(h=T(h,t,e,n,i,l,o,1.5,a),u.push.apply(u,_toConsumableArray(h))),s&&(r?u.push.apply(u,_toConsumableArray(b(t,e,t+n*Math.cos(l),e+i*Math.sin(l),a)).concat(_toConsumableArray(b(t,e,t+n*Math.cos(o),e+i*Math.sin(o),a)))):u.push({op:"lineTo",data:[t,e]},{op:"lineTo",data:[t+n*Math.cos(l),e+i*Math.sin(l)]})),{type:"path",ops:u}}function g(t,e){var n=[];if(t.length){var i=e.maxRandomnessOffset||0,l=t.length;if(2<l){n.push({op:"move",data:[t[0][0]+v(i,e),t[0][1]+v(i,e)]});for(var o=1;o<l;o++)n.push({op:"lineTo",data:[t[o][0]+v(i,e),t[o][1]+v(i,e)]})}}return{type:"fillPath",ops:n}}function x(t,e){var n=G,i=e.fillStyle||"hachure";if(!N[i])switch(i){case"zigzag":N[i]||(N[i]=new R(n));break;case"cross-hatch":N[i]||(N[i]=new O(n));break;case"dots":N[i]||(N[i]=new _(n));break;case"dashed":N[i]||(N[i]=new D(n));break;case"zigzag-line":N[i]||(N[i]=new U(n));break;default:N[i="hachure"]||(N[i]=new I(n))}return N[i].fillPolygon(t,e)}function y(t){return t.randomizer||(t.randomizer=new k(t.seed||0)),t.randomizer.next()}function f(t,e,n,i){return n.roughness*(3<arguments.length&&void 0!==i?i:1)*(y(n)*(e-t)+t)}function v(t,e,n){return f(-t,t,e,2<arguments.length&&void 0!==n?n:1)}function b(t,e,n,i,l,o){var s=5<arguments.length&&void 0!==o&&o?l.disableMultiStrokeFill:l.disableMultiStroke,r=C(t,e,n,i,l,!0,!1);return s?r:(s=C(t,e,n,i,l,!0,!0),r.concat(s))}function C(t,e,n,i,l,o,s){function r(){return v(c,l,u)}function a(){return v(d,l,u)}var h=Math.pow(t-n,2)+Math.pow(e-i,2),u=(m=Math.sqrt(h))<200?1:500<m?.4:-.0016668*m+1.233334,d=l.maxRandomnessOffset||0,c=(d=h<d*d*100?m/10:d)/2,p=(h=.2+.2*y(l),l.bowing*l.maxRandomnessOffset*(t-n)/200),m=v(m=l.bowing*l.maxRandomnessOffset*(i-e)/200,l,u),g=(p=v(p,l,u),[]),x=l.preserveVertices;return o&&g.push(s?{op:"move",data:[t+(x?0:r()),e+(x?0:r())]}:{op:"move",data:[t+(x?0:v(d,l,u)),e+(x?0:v(d,l,u))]}),g.push(s?{op:"bcurveTo",data:[m+t+(n-t)*h+r(),p+e+(i-e)*h+r(),m+t+2*(n-t)*h+r(),p+e+2*(i-e)*h+r(),n+(x?0:r()),i+(x?0:r())]}:{op:"bcurveTo",data:[m+t+(n-t)*h+a(),p+e+(i-e)*h+a(),m+t+2*(n-t)*h+a(),p+e+2*(i-e)*h+a(),n+(x?0:a()),i+(x?0:a())]}),g}function E(t,e,n){var i=[];i.push([t[0][0]+v(e,n),t[0][1]+v(e,n)]),i.push([t[0][0]+v(e,n),t[0][1]+v(e,n)]);for(var l=1;l<t.length;l++)i.push([t[l][0]+v(e,n),t[l][1]+v(e,n)]),l===t.length-1&&i.push([t[l][0]+v(e,n),t[l][1]+v(e,n)]);return S(i,null,n)}function S(t,e,n){var i=t.length,l=[];if(3<i){var o=[],s=1-n.curveTightness;l.push({op:"move",data:[t[1][0],t[1][1]]});for(var r=1;r+2<i;r++){var a=t[r];o[0]=[a[0],a[1]],o[1]=[a[0]+(s*t[r+1][0]-s*t[r-1][0])/6,a[1]+(s*t[r+1][1]-s*t[r-1][1])/6],o[2]=[t[r+1][0]+(s*t[r][0]-s*t[r+2][0])/6,t[r+1][1]+(s*t[r][1]-s*t[r+2][1])/6],o[3]=[t[r+1][0],t[r+1][1]],l.push({op:"bcurveTo",data:[o[1][0],o[1][1],o[2][0],o[2][1],o[3][0],o[3][1]]})}e&&2===e.length&&l.push({op:"lineTo",data:[e[0]+v(t=n.maxRandomnessOffset,n),e[1]+v(t,n)]})}else 3===i?(l.push({op:"move",data:[t[1][0],t[1][1]]}),l.push({op:"bcurveTo",data:[t[1][0],t[1][1],t[2][0],t[2][1],t[2][0],t[2][1]]})):2===i&&l.push.apply(l,_toConsumableArray(b(t[0][0],t[0][1],t[1][0],t[1][1],n)));return l}function w(t,e,n,i,l,o,s,r){var a=[],h=[],u=v(.5,r)-Math.PI/2;h.push([v(o,r)+e+.9*i*Math.cos(u-t),v(o,r)+n+.9*l*Math.sin(u-t)]);for(var d=u;d<2*Math.PI+u-.01;d+=t){var c=[v(o,r)+e+i*Math.cos(d),v(o,r)+n+l*Math.sin(d)];a.push(c),h.push(c)}return h.push([v(o,r)+e+i*Math.cos(u+2*Math.PI+.5*s),v(o,r)+n+l*Math.sin(u+2*Math.PI+.5*s)]),h.push([v(o,r)+e+.98*i*Math.cos(u+s),v(o,r)+n+.98*l*Math.sin(u+s)]),h.push([v(o,r)+e+.9*i*Math.cos(u+.5*s),v(o,r)+n+.9*l*Math.sin(u+.5*s)]),[h,a]}function T(t,e,n,i,l,o,s,r,a){var h=o+v(.1,a);for((o=[]).push([v(r,a)+e+.9*i*Math.cos(h-t),v(r,a)+n+.9*l*Math.sin(h-t)]);h<=s;h+=t)o.push([v(r,a)+e+i*Math.cos(h),v(r,a)+n+l*Math.sin(h)]);return o.push([e+i*Math.cos(s),n+l*Math.sin(s)]),o.push([e+i*Math.cos(s),n+l*Math.sin(s)]),S(o,null,a)}function A(t,e){return Math.pow(t[0]-e[0],2)+Math.pow(t[1]-e[1],2)}function M(t,e,n){return[t[0]+(e[0]-t[0])*n,t[1]+(e[1]-t[1])*n]}function L(t,e,n,i,l){l=l||[];for(var o=t[e],s=t[n-1],r=0,a=1,h=e+1;h<n-1;++h){var u=t[h],d=o,c=s,p=A(d,c);r<(u=0===p?A(u,d):(p=((u[0]-d[0])*(c[0]-d[0])+(u[1]-d[1])*(c[1]-d[1]))/p,A(u,M(d,c,Math.max(0,Math.min(1,p))))))&&(r=u,a=h)}return Math.sqrt(r)>i?(L(t,e,a+1,i,l),L(t,a,n,i,l)):(l.length||l.push(o),l.push(s)),l}function P(t,e,n){for(var i=1<arguments.length&&void 0!==e?e:.15,l=2<arguments.length?n:void 0,o=[],s=(t.length-1)/3,r=0;r<s;r++)!function t(e,n,i,l){l=l||[];var o,s,r=e[n+2],a=e[n+3],h=(h=3*(u=e[n+1])[0]-2*(c=e[n+0])[0]-a[0])*h,u=(u=3*u[1]-2*c[1]-a[1])*u,d=3*r[0]-2*a[0]-c[0],c=3*r[1]-2*a[1]-c[1];return(h=h<(d*=d)?d:h)+(u=u<(c*=c)?c:u)<i?(i=e[n+0],(!l.length||1<(o=l[l.length-1],s=i,Math.sqrt(A(o,s))))&&l.push(i),l.push(e[n+3])):(o=e[n+0],h=e[n+1],s=e[n+2],e=e[n+3],n=M(o,h,.5),c=M(h,s,.5),s=M(s,e,.5),h=M(n,c,.5),c=M(c,s,.5),t([o,n,h,r=M(h,c,.5)],0,i,l),t([r,c,s,e],0,i,l)),l}(t,3*r,i,o);return l&&0<l?L(o,0,o.length,l):o}var I=(_createClass(K,[{key:"fillPolygon",value:function(t,e){return this._fillPolygon(t,e)}},{key:"_fillPolygon",value:function(t,e){var n=2<arguments.length&&void 0!==arguments[2]&&arguments[2],i=s(t,e);return n&&(n=this.connectingLines(t,i),i=i.concat(n)),{type:"fillSketch",ops:this.renderLines(i,e)}}},{key:"renderLines",value:function(t,e){var n,i=[],l=_createForOfIteratorHelper(t);try{for(l.s();!(n=l.n()).done;){var o=n.value;i.push.apply(i,_toConsumableArray(this.helper.doubleLineOps(o[0][0],o[0][1],o[1][0],o[1][1],e)))}}catch(t){l.e(t)}finally{l.f()}return i}},{key:"connectingLines",value:function(t,n){var i=[];if(1<n.length)for(var l=1;l<n.length;l++){var o=n[l-1];e(o)<3||3<e(o=[n[l][0],o[1]])&&(o=this.splitOnIntersections(t,o),i.push.apply(i,_toConsumableArray(o)))}return i}},{key:"midPointInPolygon",value:function(t,e){return n(t,(e[0][0]+e[1][0])/2,(e[0][1]+e[1][1])/2)}},{key:"splitOnIntersections",value:function(t,i){for(var l=Math.max(5,.1*e(i)),s=[],r=0;r<t.length;r++){var a,h=t[r],u=t[(r+1)%t.length];o.apply(void 0,[h,u].concat(_toConsumableArray(i)))&&(h=function(t,e,n,i){var l=e[1]-t[1];t=l*t[0]+(e=t[0]-e[0])*t[1];var o=i[1]-n[1];n=o*n[0]+(i=n[0]-i[0])*n[1];var s=l*i-o*e;return s?[(i*t-e*n)/s,(l*n-o*t)/s]:null}(h,u,i[0],i[1]))&&(u=e([h,i[0]]),a=e([h,i[1]]),l<u&&l<a&&s.push({point:h,distance:u}))}if(1<s.length){if(l=s.sort(function(t,e){return t.distance-e.distance}).map(function(t){return t.point}),n.apply(void 0,[t].concat(_toConsumableArray(i[0])))||l.shift(),n.apply(void 0,[t].concat(_toConsumableArray(i[1])))||l.pop(),l.length<=1)return this.midPointInPolygon(t,i)?[i]:[];for(l=[i[0]].concat(_toConsumableArray(l),[i[1]]),s=[],r=0;r<l.length-1;r+=2)this.midPointInPolygon(t,h=[l[r],l[r+1]])&&s.push(h);return s}return this.midPointInPolygon(t,i)?[i]:[]}}]),K),R=function(){function t(){return _classCallCheck(this,t),e.apply(this,arguments)}_inherits(t,I);var e=_createSuper(t);return _createClass(t,[{key:"fillPolygon",value:function(t,e){return this._fillPolygon(t,e,!0)}}]),t}(),O=function(){function t(){return _classCallCheck(this,t),e.apply(this,arguments)}_inherits(t,I);var e=_createSuper(t);return _createClass(t,[{key:"fillPolygon",value:function(t,e){var n=this._fillPolygon(t,e);return e=Object.assign({},e,{hachureAngle:e.hachureAngle+90}),e=this._fillPolygon(t,e),n.ops=n.ops.concat(e.ops),n}}]),t}(),_=(_createClass(Z,[{key:"fillPolygon",value:function(t,e){return t=s(t,e=Object.assign({},e,{curveStepCount:4,hachureAngle:0,roughness:1})),this.dotsOnLines(t,e)}},{key:"dotsOnLines",value:function(t,n){var i=[];(l=n.hachureGap)<0&&(l=4*n.strokeWidth);var l=Math.max(l,.1),o=n.fillWeight;o<0&&(o=n.strokeWidth/2);var s,r=l/4,a=_createForOfIteratorHelper(t);try{for(a.s();!(s=a.n()).done;)for(var h=s.value,u=e(h),d=Math.ceil(u/l)-1,c=u-d*l,p=(h[0][0]+h[1][0])/2-l/4,m=Math.min(h[0][1],h[1][1]),g=0;g<d;g++){var x=m+c+g*l,y=this.helper.randOffsetWithRange(p-r,p+r,n),f=this.helper.randOffsetWithRange(x-r,x+r,n),v=this.helper.ellipse(y,f,o,o,n);i.push.apply(i,_toConsumableArray(v.ops))}}catch(t){a.e(t)}finally{a.f()}return{type:"fillSketch",ops:i}}}]),Z),D=(_createClass(X,[{key:"fillPolygon",value:function(t,e){return t=s(t,e),{type:"fillSketch",ops:this.dashedLine(t,e)}}},{key:"dashedLine",value:function(t,n){var i=this,l=n.dashOffset<0?n.hachureGap<0?4*n.strokeWidth:n.hachureGap:n.dashOffset,o=n.dashGap<0?n.hachureGap<0?4*n.strokeWidth:n.hachureGap:n.dashGap,s=[];return t.forEach(function(t){var r=e(t),a=Math.floor(r/(l+o)),h=(r=(r+o-a*(l+o))/2,t[0]),u=t[1];for(h[0]>u[0]&&(h=t[1],u=t[0]),t=Math.atan((u[1]-h[1])/(u[0]-h[0])),u=0;u<a;u++){var d=(c=u*(l+o))+l,c=[h[0]+c*Math.cos(t)+r*Math.cos(t),h[1]+c*Math.sin(t)+r*Math.sin(t)];d=[h[0]+d*Math.cos(t)+r*Math.cos(t),h[1]+d*Math.sin(t)+r*Math.sin(t)],s.push.apply(s,_toConsumableArray(i.helper.doubleLineOps(c[0],c[1],d[0],d[1],n)))}}),s}}]),X),U=(_createClass(q,[{key:"fillPolygon",value:function(t,e){var n=e.hachureGap<0?4*e.strokeWidth:e.hachureGap,i=e.zigzagOffset<0?n:e.zigzagOffset;return n=s(t,e=Object.assign({},e,{hachureGap:n+i})),{type:"fillSketch",ops:this.zigzagLines(n,i,e)}}},{key:"zigzagLines",value:function(t,n,i){var l=this,o=[];return t.forEach(function(t){var s=e(t),r=(s=Math.round(s/(2*n)),t[0]),a=t[1];for(r[0]>a[0]&&(r=t[1],a=t[0]),t=Math.atan((a[1]-r[1])/(a[0]-r[0])),a=0;a<s;a++){var h=2*a*n,u=2*(a+1)*n,d=Math.sqrt(2*Math.pow(n,2));h=[r[0]+h*Math.cos(t),r[1]+h*Math.sin(t)],u=[r[0]+u*Math.cos(t),r[1]+u*Math.sin(t)],d=[h[0]+d*Math.cos(t+Math.PI/4),h[1]+d*Math.sin(t+Math.PI/4)],o.push.apply(o,_toConsumableArray(l.helper.doubleLineOps(h[0],h[1],d[0],d[1],i)).concat(_toConsumableArray(l.helper.doubleLineOps(d[0],d[1],u[0],u[1],i))))}}),o}}]),q),N={},k=(_createClass(W,[{key:"next",value:function(){return this.seed?(Math.pow(2,31)-1&(this.seed=Math.imul(48271,this.seed)))/Math.pow(2,31):Math.random()}}]),W),H={A:7,a:7,C:6,c:6,H:1,h:1,L:2,l:2,M:2,m:2,Q:4,q:4,S:4,s:4,T:2,t:2,V:1,v:1,Z:0,z:0},G={randOffset:function(t,e){return v(t,e)},randOffsetWithRange:function(t,e,n){return f(t,e,n)},ellipse:function(t,e,n,i,l){return p(t,e,l,n=c(n,i,l)).opset},doubleLineOps:function(t,e,n,i,l){return b(t,e,n,i,l,!0)}},F=(_createClass(j,[{key:"_o",value:function(t){return t?Object.assign({},this.defaultOptions,t):this.defaultOptions}},{key:"_d",value:function(t,e,n){return{shape:t,sets:e||[],options:n||this.defaultOptions}}},{key:"line",value:function(t,e,n,i,l){return l=this._o(l),this._d("line",[{type:"path",ops:b(t,e,n,i,l)}],l)}},{key:"rectangle",value:function(t,e,n,i,l){var o=[],s=d([[t,e],[t+n,e],[t+n,e+i],[t,e+i]],!0,l=this._o(l));return l.fill&&(t=[[t,e],[t+n,e],[t+n,e+i],[t,e+i]],o.push("solid"===l.fillStyle?g(t,l):x(t,l))),"none"!==l.stroke&&o.push(s),this._d("rectangle",o,l)}},{key:"ellipse",value:function(t,e,n,i,l){var o=[];return n=p(t,e,l=this._o(l),i=c(n,i,l)),l.fill&&("solid"===l.fillStyle?((t=p(t,e,l,i).opset).type="fillPath",o.push(t)):o.push(x(n.estimatedPoints,l))),"none"!==l.stroke&&o.push(n.opset),this._d("ellipse",o,l)}},{key:"circle",value:function(t,e,n,i){return(t=this.ellipse(t,e,n,n,i)).shape="circle",t}},{key:"linearPath",value:function(t,e){return e=this._o(e),this._d("linearPath",[d(t,!1,e)],e)}},{key:"arc",value:function(t,e,n,i,l,o){var s=6<arguments.length&&void 0!==arguments[6]&&arguments[6],r=this._o(7<arguments.length?arguments[7]:void 0),a=[],h=m(t,e,n,i,l,o,s,!0,r);return s&&r.fill&&("solid"===r.fillStyle?((s=m(t,e,n,i,l,o,!0,!1,r)).type="fillPath",a.push(s)):a.push(function(t,e,i,l,o,s,r){for(i=Math.abs(n/2),l=Math.abs(l/2),i+=v(.01*i,r),l+=v(.01*l,r);o<0;)o+=2*Math.PI,s+=2*Math.PI;s-o>2*Math.PI&&(o=0,s=2*Math.PI);for(var a=(s-o)/r.curveStepCount,h=[];o<=s;o+=a)h.push([t+i*Math.cos(o),e+l*Math.sin(o)]);return h.push([t+i*Math.cos(s),e+l*Math.sin(s)]),h.push([t,e]),x(h,r)}(t,e,0,i,l,o,r))),"none"!==r.stroke&&a.push(h),this._d("arc",a,r)}},{key:"curve",value:function(t,e){var n,i,l,o=this._o(e),s=[],r=(r=E(n=t,1+.2*(i=o).roughness,i),i.disableMultiStroke||(l=1.5*(1+.22*i.roughness),(e=Object.assign({},i)).randomizer=void 0,i.seed&&(e.seed=i.seed+1),l=E(n,l,e),r=r.concat(l)),{type:"path",ops:r});return o.fill&&"none"!==o.fill&&3<=t.length&&(t=P(function(t,e){var n=1<arguments.length&&void 0!==e?e:0,i=t.length;if(i<3)throw Error("A curve must have at least three points.");var l=[];if(3===i)l.push(_toConsumableArray(t[0]),_toConsumableArray(t[1]),_toConsumableArray(t[2]),_toConsumableArray(t[2]));else{(i=[]).push(t[0],t[0]);for(var o=1;o<t.length;o++)i.push(t[o]),o===t.length-1&&i.push(t[o]);o=[],n=1-n,l.push(_toConsumableArray(i[0]));for(var s=1;s+2<i.length;s++){var r=i[s];o[0]=[r[0],r[1]],o[1]=[r[0]+(n*i[s+1][0]-n*i[s-1][0])/6,r[1]+(n*i[s+1][1]-n*i[s-1][1])/6],o[2]=[i[s+1][0]+(n*i[s][0]-n*i[s+2][0])/6,i[s+1][1]+(n*i[s][1]-n*i[s+2][1])/6],o[3]=[i[s+1][0],i[s+1][1]],l.push(o[1],o[2],o[3])}}return l}(t),10,(1+o.roughness)/2),s.push("solid"===o.fillStyle?g(t,o):x(t,o))),"none"!==o.stroke&&s.push(r),this._d("curve",s,o)}},{key:"polygon",value:function(t,e){var n=this._o(e),i=[];return e=d(t,!0,n),n.fill&&i.push("solid"===n.fillStyle?g(t,n):x(t,n)),"none"!==n.stroke&&i.push(e),this._d("polygon",i,n)}},{key:"path",value:function(t,e){var n=this._o(e),i=[];if(!t)return this._d("path",i,n);t=(t||"").replace(/\n/g," ").replace(/(-\s)/g,"-").replace("/(ss)/g"," ");var l,o=n.fill&&"transparent"!==n.fill&&"none"!==n.fill,s="none"!==n.stroke,u=!!(n.simplification&&n.simplification<1);return e=function(t,e){var n=h(a(r(t))),i=[],l=[];function o(){4<=d.length&&l.push.apply(l,_toConsumableArray(P(d,1))),d=[]}function s(){o(),l.length&&(i.push(l),l=[])}t=[0,0];var u,d=[];n=_createForOfIteratorHelper(n);try{for(n.s();!(u=n.n()).done;){var c,p=u.value,m=p.data;switch(p.key){case"M":s(),l.push(t=[m[0],m[1]]);break;case"L":o(),l.push([m[0],m[1]]);break;case"C":d.length||d.push([(c=l.length?l[l.length-1]:t)[0],c[1]]),d.push([m[0],m[1]]),d.push([m[2],m[3]]),d.push([m[4],m[5]]);break;case"Z":o(),l.push([t[0],t[1]])}}}catch(t){n.e(t)}finally{n.f()}if(s(),!e)return i;for(u=[],p=0;p<i.length;p++)(m=L(m=i[p],0,m.length,e)).length&&u.push(m);return u}(t,u?4-4*n.simplification:(1+n.roughness)/2),o&&(n.combineNestedSvgPaths?(l=[],e.forEach(function(t){return l.push.apply(l,_toConsumableArray(t))}),i.push("solid"===n.fillStyle?g(l,n):x(l,n))):e.forEach(function(t){i.push("solid"===n.fillStyle?g(t,n):x(t,n))})),s&&(u?e.forEach(function(t){i.push(d(t,!1,n))}):i.push(function(e){var n,i=h(a(r(t))),l=[],o=[0,0],s=[0,0];i=_createForOfIteratorHelper(i);try{for(i.s();!(n=i.n()).done;){var u=n.value,d=u.data;switch(u.key){case"M":if("break"===function(){var t=+(e.maxRandomnessOffset||0),n=e.preserveVertices;return l.push({op:"move",data:d.map(function(i){return i+(n?0:v(t,e))})}),s=[d[0],d[1]],o=[d[0],d[1]],"break"}())break;case"L":l.push.apply(l,_toConsumableArray(b(s[0],s[1],d[0],d[1],e))),s=[d[0],d[1]];break;case"C":var c=_slicedToArray(d,6),p=c[4],m=c[5];l.push.apply(l,_toConsumableArray(function(t,e,n,i,l,o,s,r){for(var a,h=[],u=[r.maxRandomnessOffset||1,(r.maxRandomnessOffset||1)+.3],d=r.disableMultiStroke?1:2,c=r.preserveVertices,p=0;p<d;p++)h.push(0===p?{op:"move",data:[s[0],s[1]]}:{op:"move",data:[s[0]+(c?0:v(u[0],r)),s[1]+(c?0:v(u[0],r))]}),a=c?[l,o]:[l+v(u[p],r),o+v(u[p],r)],h.push({op:"bcurveTo",data:[t+v(u[p],r),e+v(u[p],r),n+v(u[p],r),i+v(u[p],r),a[0],a[1]]});return h}(c[0],c[1],c[2],c[3],p,m,s,e))),s=[p,m];break;case"Z":l.push.apply(l,_toConsumableArray(b(s[0],s[1],o[0],o[1],e))),s=[o[0],o[1]]}}}catch(n){i.e(n)}finally{i.f()}return{type:"path",ops:l}}(n))),this._d("path",i,n)}},{key:"opsToPath",value:function(t,e){var n,i="",l=_createForOfIteratorHelper(t.ops);try{for(l.s();!(n=l.n()).done;){var o=n.value,s="number"==typeof e&&0<=e?o.data.map(function(t){return+t.toFixed(e)}):o.data;switch(o.op){case"move":i+="M".concat(s[0]," ").concat(s[1]," ");break;case"bcurveTo":i+="C".concat(s[0]," ").concat(s[1],", ").concat(s[2]," ").concat(s[3],", ").concat(s[4]," ").concat(s[5]," ");break;case"lineTo":i+="L".concat(s[0]," ").concat(s[1]," ")}}}catch(t){l.e(t)}finally{l.f()}return i.trim()}},{key:"toPaths",value:function(t){var e,n=t.options||this.defaultOptions,i=[];t=_createForOfIteratorHelper(t.sets||[]);try{for(t.s();!(e=t.n()).done;){var l=e.value,o=null;switch(l.type){case"path":o={d:this.opsToPath(l),stroke:n.stroke,strokeWidth:n.strokeWidth,fill:"none"};break;case"fillPath":o={d:this.opsToPath(l),stroke:"none",strokeWidth:0,fill:n.fill||"none"};break;case"fillSketch":o=this.fillSketch(l,n)}o&&i.push(o)}}catch(e){t.e(e)}finally{t.f()}return i}},{key:"fillSketch",value:function(t,e){var n=e.fillWeight;return n<0&&(n=e.strokeWidth/2),{d:this.opsToPath(t),stroke:e.fill||"none",strokeWidth:n,fill:"none"}}}],[{key:"newSeed",value:function(){return Math.floor(Math.random()*Math.pow(2,31))}}]),j),V=(_createClass(Y,[{key:"draw",value:function(t){var e,n=t.sets||[],i=t.options||this.getDefaultOptions(),l=this.ctx;n=_createForOfIteratorHelper(n);try{for(n.s();!(e=n.n()).done;){var o=e.value;switch(o.type){case"path":l.save(),l.strokeStyle="none"===i.stroke?"transparent":i.stroke,l.lineWidth=i.strokeWidth,i.strokeLineDash&&l.setLineDash(i.strokeLineDash),i.strokeLineDashOffset&&(l.lineDashOffset=i.strokeLineDashOffset),this._drawToContext(l,o),l.restore();break;case"fillPath":l.save(),l.fillStyle=i.fill||"",this._drawToContext(l,o,"curve"===t.shape||"polygon"===t.shape?"evenodd":"nonzero"),l.restore();break;case"fillSketch":this.fillSketch(l,o,i)}}}catch(t){n.e(t)}finally{n.f()}}},{key:"fillSketch",value:function(t,e,n){var i=n.fillWeight;i<0&&(i=n.strokeWidth/2),t.save(),n.fillLineDash&&t.setLineDash(n.fillLineDash),n.fillLineDashOffset&&(t.lineDashOffset=n.fillLineDashOffset),t.strokeStyle=n.fill||"",t.lineWidth=i,this._drawToContext(t,e),t.restore()}},{key:"_drawToContext",value:function(t,e){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"nonzero";t.beginPath();var i,l=_createForOfIteratorHelper(e.ops);try{for(l.s();!(i=l.n()).done;){var o=i.value,s=o.data;switch(o.op){case"move":t.moveTo(s[0],s[1]);break;case"bcurveTo":t.bezierCurveTo(s[0],s[1],s[2],s[3],s[4],s[5]);break;case"lineTo":t.lineTo(s[0],s[1])}}}catch(t){l.e(t)}finally{l.f()}"fillPath"===e.type?t.fill(n):t.stroke()}},{key:"getDefaultOptions",value:function(){return this.gen.defaultOptions}},{key:"line",value:function(t,e,n,i,l){return t=this.gen.line(t,e,n,i,l),this.draw(t),t}},{key:"rectangle",value:function(t,e,n,i,l){return t=this.gen.rectangle(t,e,n,i,l),this.draw(t),t}},{key:"ellipse",value:function(t,e,n,i,l){return t=this.gen.ellipse(t,e,n,i,l),this.draw(t),t}},{key:"circle",value:function(t,e,n,i){return t=this.gen.circle(t,e,n,i),this.draw(t),t}},{key:"linearPath",value:function(t,e){return e=this.gen.linearPath(t,e),this.draw(e),e}},{key:"polygon",value:function(t,e){return e=this.gen.polygon(t,e),this.draw(e),e}},{key:"arc",value:function(t,e,n,i,l,o){var s=this.gen.arc(t,e,n,i,l,o,6<arguments.length&&void 0!==arguments[6]&&arguments[6],7<arguments.length?arguments[7]:void 0);return this.draw(s),s}},{key:"curve",value:function(t,e){return e=this.gen.curve(t,e),this.draw(e),e}},{key:"path",value:function(t,e){return e=this.gen.path(t,e),this.draw(e),e}},{key:"generator",get:function(){return this.gen}}]),Y),B=(_createClass(z,[{key:"draw",value:function(t){var e,n=t.sets||[],i=t.options||this.getDefaultOptions(),l=this.svg.ownerDocument||window.document,o=l.createElementNS("http://www.w3.org/2000/svg","g"),s=t.options.fixedDecimalPlaceDigits;n=_createForOfIteratorHelper(n);try{for(n.s();!(e=n.n()).done;){var r=e.value,a=null;switch(r.type){case"path":(a=l.createElementNS("http://www.w3.org/2000/svg","path")).setAttribute("d",this.opsToPath(r,s)),a.setAttribute("stroke",i.stroke),a.setAttribute("stroke-width",i.strokeWidth+""),a.setAttribute("fill","none"),i.strokeLineDash&&a.setAttribute("stroke-dasharray",i.strokeLineDash.join(" ").trim()),i.strokeLineDashOffset&&a.setAttribute("stroke-dashoffset","".concat(i.strokeLineDashOffset));break;case"fillPath":(a=l.createElementNS("http://www.w3.org/2000/svg","path")).setAttribute("d",this.opsToPath(r,s)),a.setAttribute("stroke","none"),a.setAttribute("stroke-width","0"),a.setAttribute("fill",i.fill||""),"curve"!==t.shape&&"polygon"!==t.shape||a.setAttribute("fill-rule","evenodd");break;case"fillSketch":a=this.fillSketch(l,r,i)}a&&o.appendChild(a)}}catch(t){n.e(t)}finally{n.f()}return o}},{key:"fillSketch",value:function(t,e,n){var i=n.fillWeight;return i<0&&(i=n.strokeWidth/2),(t=t.createElementNS("http://www.w3.org/2000/svg","path")).setAttribute("d",this.opsToPath(e,n.fixedDecimalPlaceDigits)),t.setAttribute("stroke",n.fill||""),t.setAttribute("stroke-width",i+""),t.setAttribute("fill","none"),n.fillLineDash&&t.setAttribute("stroke-dasharray",n.fillLineDash.join(" ").trim()),n.fillLineDashOffset&&t.setAttribute("stroke-dashoffset","".concat(n.fillLineDashOffset)),t}},{key:"getDefaultOptions",value:function(){return this.gen.defaultOptions}},{key:"opsToPath",value:function(t,e){return this.gen.opsToPath(t,e)}},{key:"line",value:function(t,e,n,i,l){return t=this.gen.line(t,e,n,i,l),this.draw(t)}},{key:"rectangle",value:function(t,e,n,i,l){return t=this.gen.rectangle(t,e,n,i,l),this.draw(t)}},{key:"ellipse",value:function(t,e,n,i,l){return t=this.gen.ellipse(t,e,n,i,l),this.draw(t)}},{key:"circle",value:function(t,e,n,i){return t=this.gen.circle(t,e,n,i),this.draw(t)}},{key:"linearPath",value:function(t,e){return e=this.gen.linearPath(t,e),this.draw(e)}},{key:"polygon",value:function(t,e){return e=this.gen.polygon(t,e),this.draw(e)}},{key:"arc",value:function(t,e,n,i,l,o){var s=this.gen.arc(t,e,n,i,l,o,6<arguments.length&&void 0!==arguments[6]&&arguments[6],7<arguments.length?arguments[7]:void 0);return this.draw(s)}},{key:"curve",value:function(t,e){return e=this.gen.curve(t,e),this.draw(e)}},{key:"path",value:function(t,e){return e=this.gen.path(t,e),this.draw(e)}},{key:"generator",get:function(){return this.gen}}]),z);function z(t,e){_classCallCheck(this,z),this.svg=t,this.gen=new F(e)}function Y(t,e){_classCallCheck(this,Y),this.canvas=t,this.ctx=this.canvas.getContext("2d"),this.gen=new F(e)}function j(t){_classCallCheck(this,j),this.defaultOptions={maxRandomnessOffset:2,roughness:1,bowing:1,stroke:"#000",strokeWidth:1,curveTightness:0,curveFitting:.95,curveStepCount:9,fillStyle:"hachure",fillWeight:-1,hachureAngle:-41,hachureGap:-1,dashOffset:-1,dashGap:-1,zigzagOffset:-1,seed:0,combineNestedSvgPaths:!1,disableMultiStroke:!1,disableMultiStrokeFill:!1,preserveVertices:!1},this.config=t||{},this.config.options&&(this.defaultOptions=this._o(this.config.options))}function W(t){_classCallCheck(this,W),this.seed=t}function q(t){_classCallCheck(this,q),this.helper=t}function X(t){_classCallCheck(this,X),this.helper=t}function Z(t){_classCallCheck(this,Z),this.helper=t}function K(t){_classCallCheck(this,K),this.helper=t}return{canvas:function(t,e){return new V(t,e)},svg:function(t,e){return new B(t,e)},generator:function(t){return new F(t)},newSeed:function(){return F.newSeed()}}}();!function(){function t(){mxSwimlane.call(this)}function e(){mxCylinder.call(this)}mxUtils.extend(t,mxSwimlane),t.prototype.getLabelBounds=function(t){return(0==this.getTitleSize()?mxShape:mxSwimlane).prototype.getLabelBounds.apply(this,arguments)},t.prototype.paintVertexShape=function(t,e,n,i,l){0==this.getTitleSize()?mxRectangleShape.prototype.paintBackground.apply(this,arguments):(mxSwimlane.prototype.paintVertexShape.apply(this,arguments),t.translate(-e,-n)),this.paintForeground(t,e,n,i,l)},t.prototype.paintForeground=function(t,e,n,i,l){var o,r,a;null!=this.state&&(r=this.flipH,a=this.flipV,this.direction!=mxConstants.DIRECTION_NORTH&&this.direction!=mxConstants.DIRECTION_SOUTH||(o=r,r=a,a=o),t.rotate(-this.getShapeRotation(),r,a,e+i/2,n+l/2),s=this.scale,e=this.bounds.x/s,n=this.bounds.y/s,i=this.bounds.width/s,l=this.bounds.height/s,this.paintTableForeground(t,e,n,i,l))},t.prototype.paintTableForeground=function(t,e,n,i,l){var o=this.state.view.graph,s=o.getActualStartSize(this.state.cell),r=o.model.getChildCells(this.state.cell,!0);if(0<r.length){var a="0"!=mxUtils.getValue(this.state.style,"rowLines","1"),h="0"!=mxUtils.getValue(this.state.style,"columnLines","1");if(a)for(var u=1;u<r.length;u++)null!=(d=o.getCellGeometry(r[u]))&&(t.begin(),t.moveTo(e+s.x,n+d.y),t.lineTo(e+i-s.width,n+d.y),t.end(),t.stroke());if(h){var d,c=o.model.getChildCells(r[0],!0);for(u=1;u<c.length;u++)null!=(d=o.getCellGeometry(c[u]))&&(t.begin(),t.moveTo(e+d.x+s.x,n+s.y),t.lineTo(e+d.x+s.x,n+l-s.height),t.end(),t.stroke())}}},mxCellRenderer.registerShape("table",t),mxUtils.extend(e,mxCylinder),e.prototype.size=20,e.prototype.darkOpacity=0,e.prototype.darkOpacity2=0,e.prototype.paintVertexShape=function(t,e,n,i,l){var o=Math.max(0,Math.min(i,Math.min(l,parseFloat(mxUtils.getValue(this.style,"size",this.size))))),s=Math.max(-1,Math.min(1,parseFloat(mxUtils.getValue(this.style,"darkOpacity",this.darkOpacity)))),r=Math.max(-1,Math.min(1,parseFloat(mxUtils.getValue(this.style,"darkOpacity2",this.darkOpacity2))));t.translate(e,n),t.begin(),t.moveTo(0,0),t.lineTo(i-o,0),t.lineTo(i,o),t.lineTo(i,l),t.lineTo(o,l),t.lineTo(0,l-o),t.lineTo(0,0),t.close(),t.end(),t.fillAndStroke(),this.outline||(t.setShadow(!1),0!=s&&(t.setFillAlpha(Math.abs(s)),t.setFillColor(s<0?"#FFFFFF":"#000000"),t.begin(),t.moveTo(0,0),t.lineTo(i-o,0),t.lineTo(i,o),t.lineTo(o,o),t.close(),t.fill()),0!=r&&(t.setFillAlpha(Math.abs(r)),t.setFillColor(r<0?"#FFFFFF":"#000000"),t.begin(),t.moveTo(0,0),t.lineTo(o,o),t.lineTo(o,l),t.lineTo(0,l-o),t.close(),t.fill()),t.begin(),t.moveTo(o,l),t.lineTo(o,o),t.lineTo(0,0),t.moveTo(o,o),t.lineTo(i,o),t.end(),t.stroke())},e.prototype.getLabelMargins=function(t){if(mxUtils.getValue(this.style,"boundedLbl",!1)){var e=parseFloat(mxUtils.getValue(this.style,"size",this.size))*this.scale;return new mxRectangle(e,e,0,0)}return null},mxCellRenderer.registerShape("cube",e);var n=Math.tan(mxUtils.toRadians(30)),i=(.5-n)/2;function l(){mxCylinder.call(this)}function o(){mxActor.call(this)}function r(){mxCylinder.call(this)}function a(){mxCylinder.call(this)}function h(){mxCylinder.call(this)}function u(){h.call(this)}function d(){mxShape.call(this)}function c(){mxShape.call(this)}function p(t,e,n,i){mxShape.call(this),this.bounds=t,this.fill=e,this.stroke=n,this.strokewidth=null!=i?i:1}function m(){mxActor.call(this)}function g(){mxCylinder.call(this)}function x(){mxCylinder.call(this)}function y(){mxActor.call(this)}function f(){mxActor.call(this)}function v(){mxActor.call(this)}mxCellRenderer.registerShape("isoRectangle",o),mxUtils.extend(l,mxCylinder),l.prototype.size=6,l.prototype.paintVertexShape=function(t,e,n,i,l){t.setFillColor(this.stroke);var o=Math.max(0,parseFloat(mxUtils.getValue(this.style,"size",this.size))-2)+2*this.strokewidth;t.ellipse(e+.5*(i-o),n+.5*(l-o),o,o),t.fill(),t.setFillColor(mxConstants.NONE),t.rect(e,n,i,l),t.fill()},mxCellRenderer.registerShape("waypoint",l),mxUtils.extend(o,mxActor),o.prototype.size=20,o.prototype.redrawPath=function(t,e,l,o,s){var r=Math.min(o,s/n);t.translate((o-r)/2,(s-r)/2+r/4),t.moveTo(0,.25*r),t.lineTo(.5*r,r*i),t.lineTo(r,.25*r),t.lineTo(.5*r,(.5-i)*r),t.lineTo(0,.25*r),t.close(),t.end()},mxCellRenderer.registerShape("isoRectangle",o),mxUtils.extend(r,mxCylinder),r.prototype.size=20,r.prototype.redrawPath=function(t,e,l,o,s,r){var a=Math.min(o,s/(.5+n));r?(t.moveTo(0,.25*a),t.lineTo(.5*a,(.5-i)*a),t.lineTo(a,.25*a),t.moveTo(.5*a,(.5-i)*a),t.lineTo(.5*a,(1-i)*a)):(t.translate((o-a)/2,(s-a)/2),t.moveTo(0,.25*a),t.lineTo(.5*a,a*i),t.lineTo(a,.25*a),t.lineTo(a,.75*a),t.lineTo(.5*a,(1-i)*a),t.lineTo(0,.75*a),t.close()),t.end()},mxCellRenderer.registerShape("isoCube",r),mxUtils.extend(a,mxCylinder),a.prototype.redrawPath=function(t,e,n,i,l,o){var s=Math.min(l/2,Math.round(l/8)+this.strokewidth-1);(o&&null!=this.fill||!o&&null==this.fill)&&(t.moveTo(0,s),t.curveTo(0,2*s,i,2*s,i,s),o||(t.stroke(),t.begin()),t.translate(0,s/2),t.moveTo(0,s),t.curveTo(0,2*s,i,2*s,i,s),o||(t.stroke(),t.begin()),t.translate(0,s/2),t.moveTo(0,s),t.curveTo(0,2*s,i,2*s,i,s),o||(t.stroke(),t.begin()),t.translate(0,-s)),o||(t.moveTo(0,s),t.curveTo(0,-s/3,i,-s/3,i,s),t.lineTo(i,l-s),t.curveTo(i,l+s/3,0,l+s/3,0,l-s),t.close())},a.prototype.getLabelMargins=function(t){return new mxRectangle(0,2.5*Math.min(t.height/2,Math.round(t.height/8)+this.strokewidth-1),0,0)},mxCellRenderer.registerShape("datastore",a),mxUtils.extend(h,mxCylinder),h.prototype.size=30,h.prototype.darkOpacity=0,h.prototype.paintVertexShape=function(t,e,n,i,l){var o=Math.max(0,Math.min(i,Math.min(l,parseFloat(mxUtils.getValue(this.style,"size",this.size))))),s=Math.max(-1,Math.min(1,parseFloat(mxUtils.getValue(this.style,"darkOpacity",this.darkOpacity))));t.translate(e,n),t.begin(),t.moveTo(0,0),t.lineTo(i-o,0),t.lineTo(i,o),t.lineTo(i,l),t.lineTo(0,l),t.lineTo(0,0),t.close(),t.end(),t.fillAndStroke(),this.outline||(t.setShadow(!1),0!=s&&(t.setFillAlpha(Math.abs(s)),t.setFillColor(s<0?"#FFFFFF":"#000000"),t.begin(),t.moveTo(i-o,0),t.lineTo(i-o,o),t.lineTo(i,o),t.close(),t.fill()),t.begin(),t.moveTo(i-o,0),t.lineTo(i-o,o),t.lineTo(i,o),t.end(),t.stroke())},mxCellRenderer.registerShape("note",h),mxUtils.extend(u,h),mxCellRenderer.registerShape("note2",u),u.prototype.getLabelMargins=function(t){if(mxUtils.getValue(this.style,"boundedLbl",!1)){var e=mxUtils.getValue(this.style,"size",15);return new mxRectangle(0,Math.min(t.height*this.scale,e*this.scale),0,0)}return null},mxUtils.extend(d,mxShape),d.prototype.isoAngle=15,d.prototype.paintVertexShape=function(t,e,n,i,l){var o=Math.max(.01,Math.min(94,parseFloat(mxUtils.getValue(this.style,"isoAngle",this.isoAngle))))*Math.PI/200;o=Math.min(i*Math.tan(o),.5*l),t.translate(e,n),t.begin(),t.moveTo(.5*i,0),t.lineTo(i,o),t.lineTo(i,l-o),t.lineTo(.5*i,l),t.lineTo(0,l-o),t.lineTo(0,o),t.close(),t.fillAndStroke(),t.setShadow(!1),t.begin(),t.moveTo(0,o),t.lineTo(.5*i,2*o),t.lineTo(i,o),t.moveTo(.5*i,2*o),t.lineTo(.5*i,l),t.stroke()},mxCellRenderer.registerShape("isoCube2",d),mxUtils.extend(c,mxShape),c.prototype.size=15,c.prototype.paintVertexShape=function(t,e,n,i,l){var o=Math.max(0,Math.min(.5*l,parseFloat(mxUtils.getValue(this.style,"size",this.size))));t.translate(e,n),0==o?(t.rect(0,0,i,l),t.fillAndStroke()):(t.begin(),t.moveTo(0,o),t.arcTo(.5*i,o,0,0,1,.5*i,0),t.arcTo(.5*i,o,0,0,1,i,o),t.lineTo(i,l-o),t.arcTo(.5*i,o,0,0,1,.5*i,l),t.arcTo(.5*i,o,0,0,1,0,l-o),t.close(),t.fillAndStroke(),t.setShadow(!1),t.begin(),t.moveTo(i,o),t.arcTo(.5*i,o,0,0,1,.5*i,2*o),t.arcTo(.5*i,o,0,0,1,0,o),t.stroke())},mxCellRenderer.registerShape("cylinder2",c),mxUtils.extend(p,mxCylinder),p.prototype.size=15,p.prototype.paintVertexShape=function(t,e,n,i,l){var o=Math.max(0,Math.min(.5*l,parseFloat(mxUtils.getValue(this.style,"size",this.size)))),s=mxUtils.getValue(this.style,"lid",!0);t.translate(e,n),0==o?(t.rect(0,0,i,l),t.fillAndStroke()):(t.begin(),s?(t.moveTo(0,o),t.arcTo(.5*i,o,0,0,1,.5*i,0),t.arcTo(.5*i,o,0,0,1,i,o)):(t.moveTo(0,0),t.arcTo(.5*i,o,0,0,0,.5*i,o),t.arcTo(.5*i,o,0,0,0,i,0)),t.lineTo(i,l-o),t.arcTo(.5*i,o,0,0,1,.5*i,l),t.arcTo(.5*i,o,0,0,1,0,l-o),t.close(),t.fillAndStroke(),t.setShadow(!1),s&&(t.begin(),t.moveTo(i,o),t.arcTo(.5*i,o,0,0,1,.5*i,2*o),t.arcTo(.5*i,o,0,0,1,0,o),t.stroke()))},mxCellRenderer.registerShape("cylinder3",p),mxUtils.extend(m,mxActor),m.prototype.redrawPath=function(t,e,n,i,l){t.moveTo(0,0),t.quadTo(i/2,.5*l,i,0),t.quadTo(.5*i,l/2,i,l),t.quadTo(i/2,.5*l,0,l),t.quadTo(.5*i,l/2,0,0),t.end()},mxCellRenderer.registerShape("switch",m),mxUtils.extend(g,mxCylinder),g.prototype.tabWidth=60,g.prototype.tabHeight=20,g.prototype.tabPosition="right",g.prototype.arcSize=.1,g.prototype.paintVertexShape=function(t,e,n,i,l){t.translate(e,n);var o=Math.max(0,Math.min(i,parseFloat(mxUtils.getValue(this.style,"tabWidth",this.tabWidth)))),s=Math.max(0,Math.min(l,parseFloat(mxUtils.getValue(this.style,"tabHeight",this.tabHeight)))),r=mxUtils.getValue(this.style,"tabPosition",this.tabPosition),a=mxUtils.getValue(this.style,"rounded",!1);e=mxUtils.getValue(this.style,"absoluteArcSize",!1),n=parseFloat(mxUtils.getValue(this.style,"arcSize",this.arcSize)),e||(n=Math.min(i,l)*n),n=Math.min(n,.5*i,.5*(l-s)),o=Math.max(o,n),o=Math.min(i-n,o),a||(n=0),t.begin(),"left"==r?(t.moveTo(Math.max(n,0),s),t.lineTo(Math.max(n,0),0),t.lineTo(o,0),t.lineTo(o,s)):(t.moveTo(i-o,s),t.lineTo(i-o,0),t.lineTo(i-Math.max(n,0),0),t.lineTo(i-Math.max(n,0),s)),a?(t.moveTo(0,n+s),t.arcTo(n,n,0,0,1,n,s),t.lineTo(i-n,s),t.arcTo(n,n,0,0,1,i,n+s),t.lineTo(i,l-n),t.arcTo(n,n,0,0,1,i-n,l),t.lineTo(n,l),t.arcTo(n,n,0,0,1,0,l-n)):(t.moveTo(0,s),t.lineTo(i,s),t.lineTo(i,l),t.lineTo(0,l)),t.close(),t.fillAndStroke(),t.setShadow(!1),"triangle"==mxUtils.getValue(this.style,"folderSymbol",null)&&(t.begin(),t.moveTo(i-30,s+20),t.lineTo(i-20,s+10),t.lineTo(i-10,s+20),t.close(),t.stroke())},mxCellRenderer.registerShape("folder",g),g.prototype.getLabelMargins=function(t){if(mxUtils.getValue(this.style,"boundedLbl",!1)){var e=mxUtils.getValue(this.style,"tabHeight",15)*this.scale;if(mxUtils.getValue(this.style,"labelInHeader",!1)){var n=mxUtils.getValue(this.style,"tabWidth",15)*this.scale,i=(e=mxUtils.getValue(this.style,"tabHeight",15)*this.scale,mxUtils.getValue(this.style,"rounded",!1)),l=mxUtils.getValue(this.style,"absoluteArcSize",!1),o=parseFloat(mxUtils.getValue(this.style,"arcSize",this.arcSize));return l||(o=Math.min(t.width,t.height)*o),o=Math.min(o,.5*t.width,.5*(t.height-e)),i||(o=0),"left"==mxUtils.getValue(this.style,"tabPosition",this.tabPosition)?new mxRectangle(o,0,Math.min(t.width,t.width-n),Math.min(t.height,t.height-e)):new mxRectangle(Math.min(t.width,t.width-n),0,o,Math.min(t.height,t.height-e))}return new mxRectangle(0,Math.min(t.height,e),0,0)}return null},mxUtils.extend(x,mxCylinder),x.prototype.arcSize=.1,x.prototype.paintVertexShape=function(t,e,n,i,l){t.translate(e,n);var o=mxUtils.getValue(this.style,"rounded",!1),s=mxUtils.getValue(this.style,"absoluteArcSize",!1);e=parseFloat(mxUtils.getValue(this.style,"arcSize",this.arcSize)),n=mxUtils.getValue(this.style,"umlStateConnection",null),s||(e=Math.min(i,l)*e),e=Math.min(e,.5*i,.5*l),o||(e=0),o=null!=n?10:0,t.begin(),t.moveTo(o,e),t.arcTo(e,e,0,0,1,o+e,0),t.lineTo(i-e,0),t.arcTo(e,e,0,0,1,i,e),t.lineTo(i,l-e),t.arcTo(e,e,0,0,1,i-e,l),t.lineTo(o+e,l),t.arcTo(e,e,0,0,1,o,l-e),t.close(),t.fillAndStroke(),t.setShadow(!1),"collapseState"==mxUtils.getValue(this.style,"umlStateSymbol",null)&&(t.roundrect(i-40,l-20,10,10,3,3),t.stroke(),t.roundrect(i-20,l-20,10,10,3,3),t.stroke(),t.begin(),t.moveTo(i-30,l-15),t.lineTo(i-20,l-15),t.stroke()),"connPointRefEntry"==n?(t.ellipse(0,.5*l-10,20,20),t.fillAndStroke()):"connPointRefExit"==n&&(t.ellipse(0,.5*l-10,20,20),t.fillAndStroke(),t.begin(),t.moveTo(5,.5*l-5),t.lineTo(15,.5*l+5),t.moveTo(15,.5*l-5),t.lineTo(5,.5*l+5),t.stroke())},x.prototype.getLabelMargins=function(t){return mxUtils.getValue(this.style,"boundedLbl",!1)&&null!=mxUtils.getValue(this.style,"umlStateConnection",null)?new mxRectangle(10*this.scale,0,0,0):null},mxCellRenderer.registerShape("umlState",x),mxUtils.extend(y,mxActor),y.prototype.size=30,y.prototype.isRoundable=function(){return!0},y.prototype.redrawPath=function(t,e,n,i,l){var o=Math.max(0,Math.min(i,Math.min(l,parseFloat(mxUtils.getValue(this.style,"size",this.size))))),s=mxUtils.getValue(this.style,mxConstants.STYLE_ARCSIZE,mxConstants.LINE_ARCSIZE)/2;this.addPoints(t,[new mxPoint(o,0),new mxPoint(i,0),new mxPoint(i,l),new mxPoint(0,l),new mxPoint(0,o)],this.isRounded,s,!0),t.end()},mxCellRenderer.registerShape("card",y),mxUtils.extend(f,mxActor),f.prototype.size=.4,f.prototype.redrawPath=function(t,e,n,i,l){var o=l*Math.max(0,Math.min(1,parseFloat(mxUtils.getValue(this.style,"size",this.size))));t.moveTo(0,o/2),t.quadTo(i/4,1.4*o,i/2,o/2),t.quadTo(3*i/4,o*(1-1.4),i,o/2),t.lineTo(i,l-o/2),t.quadTo(3*i/4,l-1.4*o,i/2,l-o/2),t.quadTo(i/4,l-o*(1-1.4),0,l-o/2),t.lineTo(0,o/2),t.close(),t.end()},f.prototype.getLabelBounds=function(t){if(mxUtils.getValue(this.style,"boundedLbl",!1)){var e=mxUtils.getValue(this.style,"size",this.size),n=t.width,i=t.height;if(null==this.direction||this.direction==mxConstants.DIRECTION_EAST||this.direction==mxConstants.DIRECTION_WEST){var l=i*e;return new mxRectangle(t.x,t.y+l,n,i-2*l)}return new mxRectangle(t.x+(e*=n),t.y,n-2*e,i)}return t},mxCellRenderer.registerShape("tape",f),mxUtils.extend(v,mxActor),v.prototype.size=.3,v.prototype.getLabelMargins=function(t){return mxUtils.getValue(this.style,"boundedLbl",!1)?new mxRectangle(0,0,0,parseFloat(mxUtils.getValue(this.style,"size",this.size))*t.height):null},v.prototype.redrawPath=function(t,e,n,i,l){var o=l*Math.max(0,Math.min(1,parseFloat(mxUtils.getValue(this.style,"size",this.size))));t.moveTo(0,0),t.lineTo(i,0),t.lineTo(i,l-o/2),t.quadTo(3*i/4,l-1.4*o,i/2,l-o/2),t.quadTo(i/4,l-o*(1-1.4),0,l-o/2),t.lineTo(0,o/2),t.close(),t.end()},mxCellRenderer.registerShape("document",v);var b=mxCylinder.prototype.getCylinderSize;function C(){mxActor.call(this)}function E(){mxActor.call(this)}function S(){mxActor.call(this)}function w(){mxActor.call(this)}function T(t,e){this.canvas=t,this.canvas.setLineJoin("round"),this.canvas.setLineCap("round"),this.defaultVariation=e,this.originalLineTo=this.canvas.lineTo,this.canvas.lineTo=mxUtils.bind(this,T.prototype.lineTo),this.originalMoveTo=this.canvas.moveTo,this.canvas.moveTo=mxUtils.bind(this,T.prototype.moveTo),this.originalClose=this.canvas.close,this.canvas.close=mxUtils.bind(this,T.prototype.close),this.originalQuadTo=this.canvas.quadTo,this.canvas.quadTo=mxUtils.bind(this,T.prototype.quadTo),this.originalCurveTo=this.canvas.curveTo,this.canvas.curveTo=mxUtils.bind(this,T.prototype.curveTo),this.originalArcTo=this.canvas.arcTo,this.canvas.arcTo=mxUtils.bind(this,T.prototype.arcTo)}mxCylinder.prototype.getCylinderSize=function(t,e,n,i){var l=mxUtils.getValue(this.style,"size");return null!=l?i*Math.max(0,Math.min(1,l)):b.apply(this,arguments)},mxCylinder.prototype.getLabelMargins=function(t){if(mxUtils.getValue(this.style,"boundedLbl",!1)){var e=2*mxUtils.getValue(this.style,"size",.15);return new mxRectangle(0,Math.min(this.maxHeight*this.scale,t.height*e),0,0)}return null},p.prototype.getLabelMargins=function(t){if(mxUtils.getValue(this.style,"boundedLbl",!1)){var e=mxUtils.getValue(this.style,"size",15);return mxUtils.getValue(this.style,"lid",!0)||(e/=2),new mxRectangle(0,Math.min(t.height*this.scale,2*e*this.scale),0,Math.max(0,.3*e*this.scale))}return null},g.prototype.getLabelMargins=function(t){if(mxUtils.getValue(this.style,"boundedLbl",!1)){var e=mxUtils.getValue(this.style,"tabHeight",15)*this.scale;if(mxUtils.getValue(this.style,"labelInHeader",!1)){var n=mxUtils.getValue(this.style,"tabWidth",15)*this.scale,i=(e=mxUtils.getValue(this.style,"tabHeight",15)*this.scale,mxUtils.getValue(this.style,"rounded",!1)),l=mxUtils.getValue(this.style,"absoluteArcSize",!1),o=parseFloat(mxUtils.getValue(this.style,"arcSize",this.arcSize));return l||(o=Math.min(t.width,t.height)*o),o=Math.min(o,.5*t.width,.5*(t.height-e)),i||(o=0),"left"==mxUtils.getValue(this.style,"tabPosition",this.tabPosition)?new mxRectangle(o,0,Math.min(t.width,t.width-n),Math.min(t.height,t.height-e)):new mxRectangle(Math.min(t.width,t.width-n),0,o,Math.min(t.height,t.height-e))}return new mxRectangle(0,Math.min(t.height,e),0,0)}return null},x.prototype.getLabelMargins=function(t){return mxUtils.getValue(this.style,"boundedLbl",!1)&&null!=mxUtils.getValue(this.style,"umlStateConnection",null)?new mxRectangle(10*this.scale,0,0,0):null},u.prototype.getLabelMargins=function(t){if(mxUtils.getValue(this.style,"boundedLbl",!1)){var e=mxUtils.getValue(this.style,"size",15);return new mxRectangle(0,Math.min(t.height*this.scale,e*this.scale),0,Math.max(0,e*this.scale))}return null},mxUtils.extend(C,mxActor),C.prototype.size=.2,C.prototype.fixedSize=20,C.prototype.isRoundable=function(){return!0},C.prototype.redrawPath=function(t,e,n,i,l){var o="0"!=mxUtils.getValue(this.style,"fixedSize","0")?Math.max(0,Math.min(i,parseFloat(mxUtils.getValue(this.style,"size",this.fixedSize)))):i*Math.max(0,Math.min(1,parseFloat(mxUtils.getValue(this.style,"size",this.size)))),s=mxUtils.getValue(this.style,mxConstants.STYLE_ARCSIZE,mxConstants.LINE_ARCSIZE)/2;this.addPoints(t,[new mxPoint(0,l),new mxPoint(o,0),new mxPoint(i,0),new mxPoint(i-o,l)],this.isRounded,s,!0),t.end()},mxCellRenderer.registerShape("parallelogram",C),mxUtils.extend(E,mxActor),E.prototype.size=.2,E.prototype.fixedSize=20,E.prototype.isRoundable=function(){return!0},E.prototype.redrawPath=function(t,e,n,i,l){var o="0"!=mxUtils.getValue(this.style,"fixedSize","0")?Math.max(0,Math.min(.5*i,parseFloat(mxUtils.getValue(this.style,"size",this.fixedSize)))):i*Math.max(0,Math.min(.5,parseFloat(mxUtils.getValue(this.style,"size",this.size)))),s=mxUtils.getValue(this.style,mxConstants.STYLE_ARCSIZE,mxConstants.LINE_ARCSIZE)/2;this.addPoints(t,[new mxPoint(0,l),new mxPoint(o,0),new mxPoint(i-o,0),new mxPoint(i,l)],this.isRounded,s,!0)},mxCellRenderer.registerShape("trapezoid",E),mxUtils.extend(S,mxActor),S.prototype.size=.5,S.prototype.redrawPath=function(t,e,n,i,l){t.setFillColor(null);var o=i*Math.max(0,Math.min(1,parseFloat(mxUtils.getValue(this.style,"size",this.size)))),s=mxUtils.getValue(this.style,mxConstants.STYLE_ARCSIZE,mxConstants.LINE_ARCSIZE)/2;this.addPoints(t,[new mxPoint(i,0),new mxPoint(o,0),new mxPoint(o,l/2),new mxPoint(0,l/2),new mxPoint(o,l/2),new mxPoint(o,l),new mxPoint(i,l)],this.isRounded,s,!1),t.end()},mxCellRenderer.registerShape("curlyBracket",S),mxUtils.extend(w,mxActor),w.prototype.redrawPath=function(t,e,n,i,l){t.setStrokeWidth(1),t.setFillColor(this.stroke),t.rect(0,0,i/=5,l),t.fillAndStroke(),t.rect(2*i,0,i,l),t.fillAndStroke(),t.rect(4*i,0,i,l),t.fillAndStroke()},mxCellRenderer.registerShape("parallelMarker",w),T.prototype.moveTo=function(t,e){this.originalMoveTo.apply(this.canvas,arguments),this.lastX=t,this.lastY=e,this.firstX=t,this.firstY=e},T.prototype.close=function(){null!=this.firstX&&null!=this.firstY&&(this.lineTo(this.firstX,this.firstY),this.originalClose.apply(this.canvas,arguments)),this.originalClose.apply(this.canvas,arguments)},T.prototype.quadTo=function(t,e,n,i){this.originalQuadTo.apply(this.canvas,arguments),this.lastX=n,this.lastY=i},T.prototype.curveTo=function(t,e,n,i,l,o){this.originalCurveTo.apply(this.canvas,arguments),this.lastX=l,this.lastY=o},T.prototype.arcTo=function(t,e,n,i,l,o,s){this.originalArcTo.apply(this.canvas,arguments),this.lastX=o,this.lastY=s},T.prototype.lineTo=function(t,e){if(null!=this.lastX&&null!=this.lastY){var n=Math.abs(t-this.lastX),i=Math.abs(e-this.lastY),l=Math.sqrt(n*n+i*i);if(l<2)return this.originalLineTo.apply(this.canvas,arguments),this.lastX=t,void(this.lastY=e);var o=Math.round(l/10),s=this.defaultVariation;function r(t){return"number"==typeof t?t?t<0?-1:1:t==t?0:NaN:NaN}o<5&&(o=5,s/=3);for(var a=r(t-this.lastX)*n/o,h=r(e-this.lastY)*i/o,u=n/l,d=i/l,c=0;c<o;c++){var p=a*c+this.lastX,m=h*c+this.lastY,g=(Math.random()-.5)*s;this.originalLineTo.call(this.canvas,p-g*d,m-g*u)}this.originalLineTo.call(this.canvas,t,e),this.lastX=t,this.lastY=e}else this.originalLineTo.apply(this.canvas,arguments),this.lastX=t,this.lastY=e},T.prototype.destroy=function(){this.canvas.lineTo=this.originalLineTo,this.canvas.moveTo=this.originalMoveTo,this.canvas.close=this.originalClose,this.canvas.quadTo=this.originalQuadTo,this.canvas.curveTo=this.originalCurveTo,this.canvas.arcTo=this.originalArcTo},mxShape.prototype.defaultJiggle=1.5;var A=mxShape.prototype.beforePaint;mxShape.prototype.beforePaint=function(t){A.apply(this,arguments),null==t.handJiggle&&(t.handJiggle=this.createHandJiggle(t))};var M=mxShape.prototype.afterPaint;mxShape.prototype.afterPaint=function(t){M.apply(this,arguments),null!=t.handJiggle&&(t.handJiggle.destroy(),delete t.handJiggle)},mxShape.prototype.createComicCanvas=function(t){return new T(t,mxUtils.getValue(this.style,"jiggle",this.defaultJiggle))},mxShape.prototype.createHandJiggle=function(t){return this.outline||null==this.style||"0"==mxUtils.getValue(this.style,"comic","0")?null:this.createComicCanvas(t)},mxRhombus.prototype.defaultJiggle=2;var L=mxRectangleShape.prototype.isHtmlAllowed;mxRectangleShape.prototype.isHtmlAllowed=function(){return!this.outline&&(null==this.style||"0"==mxUtils.getValue(this.style,"comic","0")&&"0"==mxUtils.getValue(this.style,"sketch","1"==urlParams.rough?"1":"0"))&&L.apply(this,arguments)};var P=mxRectangleShape.prototype.paintBackground;function I(){mxRectangleShape.call(this)}function R(){mxRectangleShape.call(this)}function O(){mxActor.call(this)}function _(){mxActor.call(this)}function D(){mxActor.call(this)}function U(){mxRectangleShape.call(this)}mxRectangleShape.prototype.paintBackground=function(t,e,n,i,l){var o,s;null==t.handJiggle||t.handJiggle.constructor!=T?P.apply(this,arguments):(o=!0,((o=null!=this.style?"1"==mxUtils.getValue(this.style,mxConstants.STYLE_POINTER_EVENTS,"1"):o)||null!=this.fill&&this.fill!=mxConstants.NONE||null!=this.stroke&&this.stroke!=mxConstants.NONE)&&(o||null!=this.fill&&this.fill!=mxConstants.NONE||(t.pointerEvents=!1),t.begin(),this.isRounded?(s="1"==mxUtils.getValue(this.style,mxConstants.STYLE_ABSOLUTE_ARCSIZE,s=0)?Math.min(i/2,Math.min(l/2,mxUtils.getValue(this.style,mxConstants.STYLE_ARCSIZE,mxConstants.LINE_ARCSIZE)/2)):(o=mxUtils.getValue(this.style,mxConstants.STYLE_ARCSIZE,100*mxConstants.RECTANGLE_ROUNDING_FACTOR)/100,Math.min(i*o,l*o)),t.moveTo(e+s,n),t.lineTo(e+i-s,n),t.quadTo(e+i,n,e+i,n+s),t.lineTo(e+i,n+l-s),t.quadTo(e+i,n+l,e+i-s,n+l),t.lineTo(e+s,n+l),t.quadTo(e,n+l,e,n+l-s),t.lineTo(e,n+s),t.quadTo(e,n,e+s,n)):(t.moveTo(e,n),t.lineTo(e+i,n),t.lineTo(e+i,n+l),t.lineTo(e,n+l),t.lineTo(e,n)),t.close(),t.end(),t.fillAndStroke()))},mxUtils.extend(I,mxRectangleShape),I.prototype.size=.1,I.prototype.fixedSize=!1,I.prototype.isHtmlAllowed=function(){return!1},I.prototype.getLabelBounds=function(t){if(mxUtils.getValue(this.state.style,mxConstants.STYLE_HORIZONTAL,!0)!=(null==this.direction||this.direction==mxConstants.DIRECTION_EAST||this.direction==mxConstants.DIRECTION_WEST))return t;var e=t.width,n=t.height,i=new mxRectangle(t.x,t.y,e,n),l=e*Math.max(0,Math.min(1,parseFloat(mxUtils.getValue(this.style,"size",this.size))));return this.isRounded&&(t=mxUtils.getValue(this.style,mxConstants.STYLE_ARCSIZE,100*mxConstants.RECTANGLE_ROUNDING_FACTOR)/100,l=Math.max(l,Math.min(e*t,n*t))),i.x+=Math.round(l),i.width-=Math.round(2*l),i},I.prototype.paintForeground=function(t,e,n,i,l){var o=mxUtils.getValue(this.style,"fixedSize",this.fixedSize),s=parseFloat(mxUtils.getValue(this.style,"size",this.size));s=o?Math.max(0,Math.min(i,s)):i*Math.max(0,Math.min(1,s)),this.isRounded&&(o=mxUtils.getValue(this.style,mxConstants.STYLE_ARCSIZE,100*mxConstants.RECTANGLE_ROUNDING_FACTOR)/100,s=Math.max(s,Math.min(i*o,l*o))),s=Math.round(s),t.begin(),t.moveTo(e+s,n),t.lineTo(e+s,n+l),t.moveTo(e+i-s,n),t.lineTo(e+i-s,n+l),t.end(),t.stroke(),mxRectangleShape.prototype.paintForeground.apply(this,arguments)},mxCellRenderer.registerShape("process",I),mxCellRenderer.registerShape("process2",I),mxUtils.extend(R,mxRectangleShape),R.prototype.paintBackground=function(t,e,n,i,l){t.setFillColor(mxConstants.NONE),t.rect(e,n,i,l),t.fill()},R.prototype.paintForeground=function(t,e,n,i,l){},mxCellRenderer.registerShape("transparent",R),mxUtils.extend(O,mxHexagon),O.prototype.size=30,O.prototype.position=.5,O.prototype.position2=.5,O.prototype.base=20,O.prototype.getLabelMargins=function(){return new mxRectangle(0,0,0,parseFloat(mxUtils.getValue(this.style,"size",this.size))*this.scale)},O.prototype.isRoundable=function(){return!0},O.prototype.redrawPath=function(t,e,n,i,l){var o=mxUtils.getValue(this.style,mxConstants.STYLE_ARCSIZE,mxConstants.LINE_ARCSIZE)/2,s=Math.max(0,Math.min(l,parseFloat(mxUtils.getValue(this.style,"size",this.size)))),r=i*Math.max(0,Math.min(1,parseFloat(mxUtils.getValue(this.style,"position",this.position)))),a=i*Math.max(0,Math.min(1,parseFloat(mxUtils.getValue(this.style,"position2",this.position2)))),h=Math.max(0,Math.min(i,parseFloat(mxUtils.getValue(this.style,"base",this.base))));this.addPoints(t,[new mxPoint(0,0),new mxPoint(i,0),new mxPoint(i,l-s),new mxPoint(Math.min(i,r+h),l-s),new mxPoint(a,l),new mxPoint(Math.max(0,r),l-s),new mxPoint(0,l-s)],this.isRounded,o,!0,[4])},mxCellRenderer.registerShape("callout",O),mxUtils.extend(_,mxActor),_.prototype.size=.2,_.prototype.fixedSize=20,_.prototype.isRoundable=function(){return!0},_.prototype.redrawPath=function(t,e,n,i,l){var o="0"!=mxUtils.getValue(this.style,"fixedSize","0")?Math.max(0,Math.min(i,parseFloat(mxUtils.getValue(this.style,"size",this.fixedSize)))):i*Math.max(0,Math.min(1,parseFloat(mxUtils.getValue(this.style,"size",this.size)))),s=mxUtils.getValue(this.style,mxConstants.STYLE_ARCSIZE,mxConstants.LINE_ARCSIZE)/2;this.addPoints(t,[new mxPoint(0,0),new mxPoint(i-o,0),new mxPoint(i,l/2),new mxPoint(i-o,l),new mxPoint(0,l),new mxPoint(o,l/2)],this.isRounded,s,!0),t.end()},mxCellRenderer.registerShape("step",_),mxUtils.extend(D,mxHexagon),D.prototype.size=.25,D.prototype.fixedSize=20,D.prototype.isRoundable=function(){return!0},D.prototype.redrawPath=function(t,e,n,i,l){var o="0"!=mxUtils.getValue(this.style,"fixedSize","0")?Math.max(0,Math.min(.5*i,parseFloat(mxUtils.getValue(this.style,"size",this.fixedSize)))):i*Math.max(0,Math.min(1,parseFloat(mxUtils.getValue(this.style,"size",this.size)))),s=mxUtils.getValue(this.style,mxConstants.STYLE_ARCSIZE,mxConstants.LINE_ARCSIZE)/2;this.addPoints(t,[new mxPoint(o,0),new mxPoint(i-o,0),new mxPoint(i,.5*l),new mxPoint(i-o,l),new mxPoint(o,l),new mxPoint(0,.5*l)],this.isRounded,s,!0)},mxCellRenderer.registerShape("hexagon",D),mxUtils.extend(U,mxRectangleShape),U.prototype.isHtmlAllowed=function(){return!1},U.prototype.paintForeground=function(t,e,n,i,l){var o=Math.min(i/5,l/5)+1;t.begin(),t.moveTo(e+i/2,n+o),t.lineTo(e+i/2,n+l-o),t.moveTo(e+o,n+l/2),t.lineTo(e+i-o,n+l/2),t.end(),t.stroke(),mxRectangleShape.prototype.paintForeground.apply(this,arguments)},mxCellRenderer.registerShape("plus",U);var N,k,H,G,F=mxRhombus.prototype.paintVertexShape;function V(){mxRectangleShape.call(this)}function B(){mxCylinder.call(this)}function z(){mxShape.call(this)}function Y(){mxShape.call(this)}function j(){mxEllipse.call(this)}function W(){mxShape.call(this)}function q(){mxShape.call(this)}function X(){mxRectangleShape.call(this)}function Z(){mxShape.call(this)}function K(){mxShape.call(this)}function J(){mxShape.call(this)}function Q(){mxShape.call(this)}function $(){mxShape.call(this)}function tt(){mxCylinder.call(this)}function et(){mxCylinder.call(this)}function nt(){mxRectangleShape.call(this)}function it(){mxDoubleEllipse.call(this)}function lt(){it.call(this)}function ot(){mxArrowConnector.call(this),this.spacing=0}function st(){mxArrowConnector.call(this),this.spacing=0}function rt(){mxActor.call(this)}function at(){mxRectangleShape.call(this)}function ht(){mxActor.call(this)}function ut(){mxActor.call(this)}function dt(){mxActor.call(this)}function ct(){mxActor.call(this)}function pt(){mxActor.call(this)}function mt(){mxActor.call(this)}function gt(){mxActor.call(this)}function xt(){mxActor.call(this)}function yt(){mxActor.call(this)}function ft(){mxActor.call(this)}function vt(){mxEllipse.call(this)}function bt(){mxEllipse.call(this)}function Ct(){mxEllipse.call(this)}function Et(){mxRhombus.call(this)}function St(){mxEllipse.call(this)}function wt(){mxEllipse.call(this)}function Tt(){mxEllipse.call(this)}function At(){mxEllipse.call(this)}function Mt(){mxActor.call(this)}function Lt(){mxActor.call(this)}function Pt(){mxActor.call(this)}function It(t,e,n,i){mxShape.call(this),this.bounds=t,this.fill=e,this.stroke=n,this.strokewidth=null!=i?i:1,this.rectStyle="square",this.size=10,this.absoluteCornerSize=!0,this.indent=2,this.rectOutline="single"}function Rt(){mxConnector.call(this)}function Ot(t,e,n,i,l,o,s,r,a,h){s+=a;var u=i.clone();return i.x-=l*(2*s+a),i.y-=o*(2*s+a),l*=s+a,o*=s+a,function(){t.ellipse(u.x-l-s,u.y-o-s,2*s,2*s),h?t.fillAndStroke():t.stroke()}}function _t(t,e,n,i,l,o,s){var r,a=new mxHandle(t,null,mxVertexHandler.prototype.secondaryHandleImage);return a.execute=function(t){for(var n=0;n<e.length;n++)this.copyStyle(e[n]);s&&s(t)},a.getPosition=n,a.setPosition=i,a.ignoreGrid=null==l||l,o&&(r=a.positionChanged,a.positionChanged=function(){r.apply(this,arguments),t.view.invalidate(this.state.cell),t.view.validate()}),a}function Dt(t,e){return _t(t,[mxConstants.STYLE_ARCSIZE],function(n){var i=null!=e?e:n.height/8;if("1"==mxUtils.getValue(t.style,mxConstants.STYLE_ABSOLUTE_ARCSIZE,0)){var l=mxUtils.getValue(t.style,mxConstants.STYLE_ARCSIZE,mxConstants.LINE_ARCSIZE)/2;return new mxPoint(n.x+n.width-Math.min(n.width/2,l),n.y+i)}return l=Math.max(0,parseFloat(mxUtils.getValue(t.style,mxConstants.STYLE_ARCSIZE,100*mxConstants.RECTANGLE_ROUNDING_FACTOR)))/100,new mxPoint(n.x+n.width-Math.min(Math.max(n.width/2,n.height/2),Math.min(n.width,n.height)*l),n.y+i)},function(e,n,i){"1"==mxUtils.getValue(t.style,mxConstants.STYLE_ABSOLUTE_ARCSIZE,0)?this.state.style[mxConstants.STYLE_ARCSIZE]=Math.round(Math.max(0,Math.min(e.width,2*(e.x+e.width-n.x)))):(e=Math.min(50,Math.max(0,100*(e.width-n.x+e.x)/Math.min(e.width,e.height))),this.state.style[mxConstants.STYLE_ARCSIZE]=Math.round(e))})}function Ut(){return function(t){var e=[];return mxUtils.getValue(t.style,mxConstants.STYLE_ROUNDED,!1)&&e.push(Dt(t)),e}}function Nt(t,e,n){return t=null!=t?t:.5,function(i){var l=[_t(i,["size"],function(i){var l=null!=n?"0"!=mxUtils.getValue(this.state.style,"fixedSize","0"):null,o=Math.max(0,parseFloat(mxUtils.getValue(this.state.style,"size",l?n:e)));return new mxPoint(i.x+Math.min(.75*i.width*t,o*(l?.75:.75*i.width)),i.y+i.height/4)},function(e,i){e=null!=n&&"0"!=mxUtils.getValue(this.state.style,"fixedSize","0")?i.x-e.x:Math.max(0,Math.min(t,(i.x-e.x)/e.width*.75)),this.state.style.size=e},!1,!0)];return mxUtils.getValue(i.style,mxConstants.STYLE_ROUNDED,!1)&&l.push(Dt(i)),l}}function kt(t,e,n,i,l){return n=null!=n?n:.5,function(o){var s=[_t(o,["size"],function(e){var n=null!=l?"0"!=mxUtils.getValue(this.state.style,"fixedSize","0"):null,i=parseFloat(mxUtils.getValue(this.state.style,"size",n?l:t));return new mxPoint(e.x+Math.max(0,Math.min(.5*e.width,i*(n?1:e.width))),e.getCenterY())},function(t,e,i){t=null!=l&&"0"!=mxUtils.getValue(this.state.style,"fixedSize","0")?e.x-t.x:Math.max(0,Math.min(n,(e.x-t.x)/t.width)),this.state.style.size=t},!1,i)];return e&&mxUtils.getValue(o.style,mxConstants.STYLE_ROUNDED,!1)&&s.push(Dt(o)),s}}function Ht(t,e,n){return function(i){var l=[_t(i,["size"],function(n){var i=Math.max(0,Math.min(n.width,Math.min(n.height,parseFloat(mxUtils.getValue(this.state.style,"size",e)))))*t;return new mxPoint(n.x+i,n.y+i)},function(e,n){this.state.style.size=Math.round(Math.max(0,Math.min(Math.min(e.width,n.x-e.x),Math.min(e.height,n.y-e.y)))/t)},!1)];return n&&mxUtils.getValue(i.style,mxConstants.STYLE_ROUNDED,!1)&&l.push(Dt(i)),l}}function Gt(t){return function(e){return[_t(e,["size"],function(e){var n=Math.max(0,Math.min(.5*e.height,parseFloat(mxUtils.getValue(this.state.style,"size",t))));return new mxPoint(e.x,e.y+n)},function(t,e){this.state.style.size=Math.max(0,e.y-t.y)},!0)]}}function Ft(t){return function(e){return[_t(e,["arrowWidth","arrowSize"],function(e){var n=Math.max(0,Math.min(1,mxUtils.getValue(this.state.style,"arrowWidth",ct.prototype.arrowWidth))),i=Math.max(0,Math.min(t,mxUtils.getValue(this.state.style,"arrowSize",ct.prototype.arrowSize)));return new mxPoint(e.x+(1-i)*e.width,e.y+(1-n)*e.height/2)},function(e,n){this.state.style.arrowWidth=Math.max(0,Math.min(1,Math.abs(e.y+e.height/2-n.y)/e.height*2)),this.state.style.arrowSize=Math.max(0,Math.min(t,(e.x+e.width-n.x)/e.width))})]}}function Vt(t,e,n,i,l){return _t(t,e,function(e){var l,o=(u=t.absolutePoints).length-1,s=t.view.translate,r=t.view.scale,a=n?u[0]:u[o],h=(l=n?u[1]:u[o-1]).x-a.x,u=l.y-a.y;return o=Math.sqrt(h*h+u*u),new mxPoint((l=i.call(this,o,h/o,u/o,a,l)).x/r-s.x,l.y/r-s.y)},function(e,i,o){var s=(c=t.absolutePoints).length-1,r=t.view.translate,a=t.view.scale,h=n?c[0]:c[s],u=n?c[1]:c[s-1],d=u.x-h.x,c=u.y-h.y;s=Math.sqrt(d*d+c*c),i.x=(i.x+r.x)*a,i.y=(i.y+r.y)*a,l.call(this,s,d/s,c/s,h,u,i,o)})}function Bt(t,e,n){return Vt(t,["width"],e,function(e,i,l,o,s){var r=t.shape.getEdgeWidth()*t.view.scale+n;return new mxPoint(o.x+i*e/4+l*r/2,o.y+l*e/4-i*r/2)},function(e,i,l,o,s,r){r=Math.sqrt(mxUtils.ptSegDistSq(o.x,o.y,s.x,s.y,r.x,r.y)),t.style.width=Math.round(2*r)/t.view.scale-n})}mxRhombus.prototype.getLabelBounds=function(t){if(1!=this.style.double)return t;var e=(2*Math.max(2,this.strokewidth+1)+parseFloat(this.style[mxConstants.STYLE_MARGIN]||0))*this.scale;return new mxRectangle(t.x+e,t.y+e,t.width-2*e,t.height-2*e)},mxRhombus.prototype.paintVertexShape=function(t,e,n,i,l){var o;F.apply(this,arguments),this.outline||1!=this.style.double||(e+=o=2*Math.max(2,this.strokewidth+1)+parseFloat(this.style[mxConstants.STYLE_MARGIN]||0),n+=o,l-=2*o,0<(i-=2*o)&&0<l&&(t.setShadow(!1),F.apply(this,[t,e,n,i,l])))},mxUtils.extend(V,mxRectangleShape),V.prototype.isHtmlAllowed=function(){return!1},V.prototype.getLabelBounds=function(t){if(1!=this.style.double)return t;var e=(Math.max(2,this.strokewidth+1)+parseFloat(this.style[mxConstants.STYLE_MARGIN]||0))*this.scale;return new mxRectangle(t.x+e,t.y+e,t.width-2*e,t.height-2*e)},V.prototype.paintForeground=function(t,e,n,i,l){if(null!=this.style){var o;this.outline||1!=this.style.double||(e+=o=Math.max(2,this.strokewidth+1)+parseFloat(this.style[mxConstants.STYLE_MARGIN]||0),n+=o,l-=2*o,0<(i-=2*o)&&0<l&&mxRectangleShape.prototype.paintBackground.apply(this,arguments)),t.setDashed(!1);var s,r,a,h,u,d,c,p,m=0,g=null;do{}while(null!=(g=mxCellRenderer.defaultShapes[this.style["symbol"+m]])&&(s=this.style["symbol"+m+"Align"],r=this.style["symbol"+m+"VerticalAlign"],a=this.style["symbol"+m+"Width"],h=this.style["symbol"+m+"Height"],u=this.style["symbol"+m+"Spacing"]||0,p=this.style["symbol"+m+"VSpacing"]||u,null!=(d=this.style["symbol"+m+"ArcSpacing"])&&(u+=c=this.getArcSize(i+this.strokewidth,l+this.strokewidth)*d,p+=c),d=e,c=n,d+=s==mxConstants.ALIGN_CENTER?(i-a)/2:s==mxConstants.ALIGN_RIGHT?i-a-u:u,c+=r==mxConstants.ALIGN_MIDDLE?(l-h)/2:r==mxConstants.ALIGN_BOTTOM?l-h-p:p,t.save(),(p=new g).style=this.style,g.prototype.paintVertexShape.call(p,t,d,c,a,h),t.restore()),m++,null!=g)}mxRectangleShape.prototype.paintForeground.apply(this,arguments)},mxCellRenderer.registerShape("ext",V),mxUtils.extend(B,mxCylinder),B.prototype.redrawPath=function(t,e,n,i,l,o){o?(t.moveTo(0,0),t.lineTo(i/2,l/2),t.lineTo(i,0),t.end()):(t.moveTo(0,0),t.lineTo(i,0),t.lineTo(i,l),t.lineTo(0,l),t.close())},mxCellRenderer.registerShape("message",B),mxUtils.extend(z,mxShape),z.prototype.paintBackground=function(t,e,n,i,l){t.translate(e,n),t.ellipse(i/4,0,i/2,l/4),t.fillAndStroke(),t.begin(),t.moveTo(i/2,l/4),t.lineTo(i/2,2*l/3),t.moveTo(i/2,l/3),t.lineTo(0,l/3),t.moveTo(i/2,l/3),t.lineTo(i,l/3),t.moveTo(i/2,2*l/3),t.lineTo(0,l),t.moveTo(i/2,2*l/3),t.lineTo(i,l),t.end(),t.stroke()},mxCellRenderer.registerShape("umlActor",z),mxUtils.extend(Y,mxShape),Y.prototype.getLabelMargins=function(t){return new mxRectangle(t.width/6,0,0,0)},Y.prototype.paintBackground=function(t,e,n,i,l){t.translate(e,n),t.begin(),t.moveTo(0,l/4),t.lineTo(0,3*l/4),t.end(),t.stroke(),t.begin(),t.moveTo(0,l/2),t.lineTo(i/6,l/2),t.end(),t.stroke(),t.ellipse(i/6,0,5*i/6,l),t.fillAndStroke()},mxCellRenderer.registerShape("umlBoundary",Y),mxUtils.extend(j,mxEllipse),j.prototype.paintVertexShape=function(t,e,n,i,l){mxEllipse.prototype.paintVertexShape.apply(this,arguments),t.begin(),t.moveTo(e+i/8,n+l),t.lineTo(e+7*i/8,n+l),t.end(),t.stroke()},mxCellRenderer.registerShape("umlEntity",j),mxUtils.extend(W,mxShape),W.prototype.paintVertexShape=function(t,e,n,i,l){t.translate(e,n),t.begin(),t.moveTo(i,0),t.lineTo(0,l),t.moveTo(0,0),t.lineTo(i,l),t.end(),t.stroke()},mxCellRenderer.registerShape("umlDestroy",W),mxUtils.extend(q,mxShape),q.prototype.getLabelBounds=function(t){return new mxRectangle(t.x,t.y+t.height/8,t.width,7*t.height/8)},q.prototype.paintBackground=function(t,e,n,i,l){t.translate(e,n),t.begin(),t.moveTo(3*i/8,l/8*1.1),t.lineTo(5*i/8,0),t.end(),t.stroke(),t.ellipse(0,l/8,i,7*l/8),t.fillAndStroke()},q.prototype.paintForeground=function(t,e,n,i,l){t.begin(),t.moveTo(3*i/8,l/8*1.1),t.lineTo(5*i/8,l/4),t.end(),t.stroke()},mxCellRenderer.registerShape("umlControl",q),mxUtils.extend(X,mxRectangleShape),X.prototype.size=40,X.prototype.isHtmlAllowed=function(){return!1},X.prototype.getLabelBounds=function(t){var e=Math.max(0,Math.min(t.height,parseFloat(mxUtils.getValue(this.style,"size",this.size))*this.scale));return new mxRectangle(t.x,t.y,t.width,e)},X.prototype.paintBackground=function(t,e,n,i,l){var o=Math.max(0,Math.min(l,parseFloat(mxUtils.getValue(this.style,"size",this.size)))),s=mxUtils.getValue(this.style,"participant");null==s||null==this.state?mxRectangleShape.prototype.paintBackground.call(this,t,e,n,i,o):null!=(s=this.state.view.graph.cellRenderer.getShape(s))&&s!=X&&((s=new s).apply(this.state),t.save(),s.paintVertexShape(t,e,n,i,o),t.restore()),o<l&&(t.setDashed("1"==mxUtils.getValue(this.style,"lifelineDashed","1")),t.begin(),t.moveTo(e+i/2,n+o),t.lineTo(e+i/2,n+l),t.end(),t.stroke())},X.prototype.paintForeground=function(t,e,n,i,l){var o=Math.max(0,Math.min(l,parseFloat(mxUtils.getValue(this.style,"size",this.size))));mxRectangleShape.prototype.paintForeground.call(this,t,e,n,i,Math.min(l,o))},mxCellRenderer.registerShape("umlLifeline",X),mxUtils.extend(Z,mxShape),Z.prototype.width=60,Z.prototype.height=30,Z.prototype.corner=10,Z.prototype.getLabelMargins=function(t){return new mxRectangle(0,0,t.width-parseFloat(mxUtils.getValue(this.style,"width",this.width)*this.scale),t.height-parseFloat(mxUtils.getValue(this.style,"height",this.height)*this.scale))},Z.prototype.paintBackground=function(t,e,n,i,l){var o=this.corner,s=Math.min(i,Math.max(o,parseFloat(mxUtils.getValue(this.style,"width",this.width)))),r=Math.min(l,Math.max(1.5*o,parseFloat(mxUtils.getValue(this.style,"height",this.height)))),a=mxUtils.getValue(this.style,mxConstants.STYLE_SWIMLANE_FILLCOLOR,mxConstants.NONE);a!=mxConstants.NONE&&(t.setFillColor(a),t.rect(e,n,i,l),t.fill()),null!=this.fill&&this.fill!=mxConstants.NONE&&this.gradient&&this.gradient!=mxConstants.NONE?(this.getGradientBounds(t,e,n,i,l),t.setGradient(this.fill,this.gradient,e,n,i,l,this.gradientDirection)):t.setFillColor(this.fill),t.begin(),t.moveTo(e,n),t.lineTo(e+s,n),t.lineTo(e+s,n+Math.max(0,r-1.5*o)),t.lineTo(e+Math.max(0,s-o),n+r),t.lineTo(e,n+r),t.close(),t.fillAndStroke(),t.begin(),t.moveTo(e+s,n),t.lineTo(e+i,n),t.lineTo(e+i,n+l),t.lineTo(e,n+l),t.lineTo(e,n+r),t.stroke()},mxCellRenderer.registerShape("umlFrame",Z),mxPerimeter.CenterPerimeter=function(t,e,n,i){return new mxPoint(t.getCenterX(),t.getCenterY())},mxStyleRegistry.putValue("centerPerimeter",mxPerimeter.CenterPerimeter),mxPerimeter.LifelinePerimeter=function(t,e,n,i){var l=X.prototype.size;return null!=e&&(l=mxUtils.getValue(e.style,"size",l)*e.view.scale),e=parseFloat(e.style[mxConstants.STYLE_STROKEWIDTH]||1)*e.view.scale/2-1,n.x<t.getCenterX()&&(e+=1,e*=-1),new mxPoint(t.getCenterX()+e,Math.min(t.y+t.height,Math.max(t.y+l,n.y)))},mxStyleRegistry.putValue("lifelinePerimeter",mxPerimeter.LifelinePerimeter),mxPerimeter.OrthogonalPerimeter=function(t,e,n,i){return i=!0,mxPerimeter.RectanglePerimeter.apply(this,arguments)},mxStyleRegistry.putValue("orthogonalPerimeter",mxPerimeter.OrthogonalPerimeter),mxPerimeter.BackbonePerimeter=function(t,e,n,i){var l=parseFloat(e.style[mxConstants.STYLE_STROKEWIDTH]||1)*e.view.scale/2-1;return null!=e.style.backboneSize&&(l+=parseFloat(e.style.backboneSize)*e.view.scale/2-1),"south"==e.style[mxConstants.STYLE_DIRECTION]||"north"==e.style[mxConstants.STYLE_DIRECTION]?(n.x<t.getCenterX()&&(l+=1,l*=-1),new mxPoint(t.getCenterX()+l,Math.min(t.y+t.height,Math.max(t.y,n.y)))):(n.y<t.getCenterY()&&(l+=1,l*=-1),new mxPoint(Math.min(t.x+t.width,Math.max(t.x,n.x)),t.getCenterY()+l))},mxStyleRegistry.putValue("backbonePerimeter",mxPerimeter.BackbonePerimeter),mxPerimeter.CalloutPerimeter=function(t,e,n,i){return mxPerimeter.RectanglePerimeter(mxUtils.getDirectedBounds(t,new mxRectangle(0,0,0,Math.max(0,Math.min(t.height,parseFloat(mxUtils.getValue(e.style,"size",O.prototype.size))*e.view.scale))),e.style),e,n,i)},mxStyleRegistry.putValue("calloutPerimeter",mxPerimeter.CalloutPerimeter),mxPerimeter.ParallelogramPerimeter=function(t,e,n,i){var l="0"!=mxUtils.getValue(e.style,"fixedSize","0"),o=l?C.prototype.fixedSize:C.prototype.size;null!=e&&(o=mxUtils.getValue(e.style,"size",o)),l&&(o*=e.view.scale);var s=t.x,r=t.y,a=t.width,h=t.height;return r=(e=null!=e?mxUtils.getValue(e.style,mxConstants.STYLE_DIRECTION,mxConstants.DIRECTION_EAST):mxConstants.DIRECTION_EAST)==mxConstants.DIRECTION_NORTH||e==mxConstants.DIRECTION_SOUTH?(e=l?Math.max(0,Math.min(h,o)):h*Math.max(0,Math.min(1,o)),[new mxPoint(s,r),new mxPoint(s+a,r+e),new mxPoint(s+a,r+h),new mxPoint(s,r+h-e),new mxPoint(s,r)]):[new mxPoint(s+(o=l?Math.max(0,Math.min(.5*a,o)):a*Math.max(0,Math.min(1,o))),r),new mxPoint(s+a,r),new mxPoint(s+a-o,r+h),new mxPoint(s,r+h),new mxPoint(s+o,r)],t=new mxPoint(t.getCenterX(),t.getCenterY()),i&&(n.x<s||n.x>s+a?t.y=n.y:t.x=n.x),mxUtils.getPerimeterPoint(r,t,n)},mxStyleRegistry.putValue("parallelogramPerimeter",mxPerimeter.ParallelogramPerimeter),mxPerimeter.TrapezoidPerimeter=function(t,e,n,i){var l="0"!=mxUtils.getValue(e.style,"fixedSize","0"),o=l?E.prototype.fixedSize:E.prototype.size;null!=e&&(o=mxUtils.getValue(e.style,"size",o)),l&&(o*=e.view.scale);var s,r,a=t.x,h=t.y,u=t.width,d=t.height,c=null!=e?mxUtils.getValue(e.style,mxConstants.STYLE_DIRECTION,mxConstants.DIRECTION_EAST):mxConstants.DIRECTION_EAST;return e=[],e=c==mxConstants.DIRECTION_EAST?[new mxPoint(a+(s=l?Math.max(0,Math.min(.5*u,o)):u*Math.max(0,Math.min(1,o))),h),new mxPoint(a+u-s,h),new mxPoint(a+u,h+d),new mxPoint(a,h+d),new mxPoint(a+s,h)]:c==mxConstants.DIRECTION_WEST?(s=l?Math.max(0,Math.min(u,o)):u*Math.max(0,Math.min(1,o)),[new mxPoint(a,h),new mxPoint(a+u,h),new mxPoint(a+u-s,h+d),new mxPoint(a+s,h+d),new mxPoint(a,h)]):c==mxConstants.DIRECTION_NORTH?[new mxPoint(a,h+(r=l?Math.max(0,Math.min(d,o)):d*Math.max(0,Math.min(1,o)))),new mxPoint(a+u,h),new mxPoint(a+u,h+d),new mxPoint(a,h+d-r),new mxPoint(a,h+r)]:(r=l?Math.max(0,Math.min(d,o)):d*Math.max(0,Math.min(1,o)),[new mxPoint(a,h),new mxPoint(a+u,h+r),new mxPoint(a+u,h+d-r),new mxPoint(a,h+d),new mxPoint(a,h)]),t=new mxPoint(t.getCenterX(),t.getCenterY()),i&&(n.x<a||n.x>a+u?t.y=n.y:t.x=n.x),mxUtils.getPerimeterPoint(e,t,n)},mxStyleRegistry.putValue("trapezoidPerimeter",mxPerimeter.TrapezoidPerimeter),mxPerimeter.StepPerimeter=function(t,e,n,i){var l="0"!=mxUtils.getValue(e.style,"fixedSize","0"),o=l?_.prototype.fixedSize:_.prototype.size;null!=e&&(o=mxUtils.getValue(e.style,"size",o)),l&&(o*=e.view.scale);var s,r,a=t.x,h=t.y,u=t.width,d=t.height,c=t.getCenterX();return t=t.getCenterY(),h=(e=null!=e?mxUtils.getValue(e.style,mxConstants.STYLE_DIRECTION,mxConstants.DIRECTION_EAST):mxConstants.DIRECTION_EAST)==mxConstants.DIRECTION_EAST?(s=l?Math.max(0,Math.min(u,o)):u*Math.max(0,Math.min(1,o)),[new mxPoint(a,h),new mxPoint(a+u-s,h),new mxPoint(a+u,t),new mxPoint(a+u-s,h+d),new mxPoint(a,h+d),new mxPoint(a+s,t),new mxPoint(a,h)]):e==mxConstants.DIRECTION_WEST?[new mxPoint(a+(s=l?Math.max(0,Math.min(u,o)):u*Math.max(0,Math.min(1,o))),h),new mxPoint(a+u,h),new mxPoint(a+u-s,t),new mxPoint(a+u,h+d),new mxPoint(a+s,h+d),new mxPoint(a,t),new mxPoint(a+s,h)]:e==mxConstants.DIRECTION_NORTH?[new mxPoint(a,h+(r=l?Math.max(0,Math.min(d,o)):d*Math.max(0,Math.min(1,o)))),new mxPoint(c,h),new mxPoint(a+u,h+r),new mxPoint(a+u,h+d),new mxPoint(c,h+d-r),new mxPoint(a,h+d),new mxPoint(a,h+r)]:(r=l?Math.max(0,Math.min(d,o)):d*Math.max(0,Math.min(1,o)),[new mxPoint(a,h),new mxPoint(c,h+r),new mxPoint(a+u,h),new mxPoint(a+u,h+d-r),new mxPoint(c,h+d),new mxPoint(a,h+d-r),new mxPoint(a,h)]),t=new mxPoint(c,t),i&&(n.x<a||n.x>a+u?t.y=n.y:t.x=n.x),mxUtils.getPerimeterPoint(h,t,n)},mxStyleRegistry.putValue("stepPerimeter",mxPerimeter.StepPerimeter),mxPerimeter.HexagonPerimeter2=function(t,e,n,i){var l="0"!=mxUtils.getValue(e.style,"fixedSize","0"),o=l?D.prototype.fixedSize:D.prototype.size;null!=e&&(o=mxUtils.getValue(e.style,"size",o)),l&&(o*=e.view.scale);var s=t.x,r=t.y,a=t.width,h=t.height,u=t.getCenterX();return t=t.getCenterY(),r=(e=null!=e?mxUtils.getValue(e.style,mxConstants.STYLE_DIRECTION,mxConstants.DIRECTION_EAST):mxConstants.DIRECTION_EAST)==mxConstants.DIRECTION_NORTH||e==mxConstants.DIRECTION_SOUTH?(e=l?Math.max(0,Math.min(h,o)):h*Math.max(0,Math.min(1,o)),[new mxPoint(u,r),new mxPoint(s+a,r+e),new mxPoint(s+a,r+h-e),new mxPoint(u,r+h),new mxPoint(s,r+h-e),new mxPoint(s,r+e),new mxPoint(u,r)]):[new mxPoint(s+(o=l?Math.max(0,Math.min(a,o)):a*Math.max(0,Math.min(1,o))),r),new mxPoint(s+a-o,r),new mxPoint(s+a,t),new mxPoint(s+a-o,r+h),new mxPoint(s+o,r+h),new mxPoint(s,t),new mxPoint(s+o,r)],t=new mxPoint(u,t),i&&(n.x<s||n.x>s+a?t.y=n.y:t.x=n.x),mxUtils.getPerimeterPoint(r,t,n)},mxStyleRegistry.putValue("hexagonPerimeter2",mxPerimeter.HexagonPerimeter2),mxUtils.extend(K,mxShape),K.prototype.size=10,K.prototype.paintBackground=function(t,e,n,i,l){var o=parseFloat(mxUtils.getValue(this.style,"size",this.size));t.translate(e,n),t.ellipse((i-o)/2,0,o,o),t.fillAndStroke(),t.begin(),t.moveTo(i/2,o),t.lineTo(i/2,l),t.end(),t.stroke()},mxCellRenderer.registerShape("lollipop",K),mxUtils.extend(J,mxShape),J.prototype.size=10,J.prototype.inset=2,J.prototype.paintBackground=function(t,e,n,i,l){var o=parseFloat(mxUtils.getValue(this.style,"size",this.size)),s=parseFloat(mxUtils.getValue(this.style,"inset",this.inset))+this.strokewidth;t.translate(e,n),t.begin(),t.moveTo(i/2,o+s),t.lineTo(i/2,l),t.end(),t.stroke(),t.begin(),t.moveTo((i-o)/2-s,o/2),t.quadTo((i-o)/2-s,o+s,i/2,o+s),t.quadTo((i+o)/2+s,o+s,(i+o)/2+s,o/2),t.end(),t.stroke()},mxCellRenderer.registerShape("requires",J),mxUtils.extend(Q,mxShape),Q.prototype.paintBackground=function(t,e,n,i,l){t.translate(e,n),t.begin(),t.moveTo(0,0),t.quadTo(i,0,i,l/2),t.quadTo(i,l,0,l),t.end(),t.stroke()},mxCellRenderer.registerShape("requiredInterface",Q),mxUtils.extend($,mxShape),$.prototype.inset=2,$.prototype.paintBackground=function(t,e,n,i,l){var o=parseFloat(mxUtils.getValue(this.style,"inset",this.inset))+this.strokewidth;t.translate(e,n),t.ellipse(0,o,i-2*o,l-2*o),t.fillAndStroke(),t.begin(),t.moveTo(i/2,0),t.quadTo(i,0,i,l/2),t.quadTo(i,l,i/2,l),t.end(),t.stroke()},mxCellRenderer.registerShape("providedRequiredInterface",$),mxUtils.extend(tt,mxCylinder),tt.prototype.jettyWidth=20,tt.prototype.jettyHeight=10,tt.prototype.redrawPath=function(t,e,n,i,l,o){var s=parseFloat(mxUtils.getValue(this.style,"jettyWidth",this.jettyWidth)),r=parseFloat(mxUtils.getValue(this.style,"jettyHeight",this.jettyHeight)),a=s/2,h=a+s/2,u=Math.min(r,l-r);s=Math.min(u+2*r,l-r),o?(t.moveTo(a,u),t.lineTo(h,u),t.lineTo(h,u+r),t.lineTo(a,u+r),t.moveTo(a,s),t.lineTo(h,s),t.lineTo(h,s+r),t.lineTo(a,s+r)):(t.moveTo(a,0),t.lineTo(i,0),t.lineTo(i,l),t.lineTo(a,l),t.lineTo(a,s+r),t.lineTo(0,s+r),t.lineTo(0,s),t.lineTo(a,s),t.lineTo(a,u+r),t.lineTo(0,u+r),t.lineTo(0,u),t.lineTo(a,u),t.close()),t.end()},mxCellRenderer.registerShape("module",tt),mxUtils.extend(et,mxCylinder),et.prototype.jettyWidth=32,et.prototype.jettyHeight=12,et.prototype.redrawPath=function(t,e,n,i,l,o){var s=parseFloat(mxUtils.getValue(this.style,"jettyWidth",this.jettyWidth)),r=parseFloat(mxUtils.getValue(this.style,"jettyHeight",this.jettyHeight)),a=s/2,h=a+s/2,u=.3*l-r/2;s=.7*l-r/2,o?(t.moveTo(a,u),t.lineTo(h,u),t.lineTo(h,u+r),t.lineTo(a,u+r),t.moveTo(a,s),t.lineTo(h,s),t.lineTo(h,s+r),t.lineTo(a,s+r)):(t.moveTo(a,0),t.lineTo(i,0),t.lineTo(i,l),t.lineTo(a,l),t.lineTo(a,s+r),t.lineTo(0,s+r),t.lineTo(0,s),t.lineTo(a,s),t.lineTo(a,u+r),t.lineTo(0,u+r),t.lineTo(0,u),t.lineTo(a,u),t.close()),t.end()},mxCellRenderer.registerShape("component",et),mxUtils.extend(nt,mxRectangleShape),nt.prototype.paintForeground=function(t,e,n,i,l){var o=i/2,s=l/2,r=mxUtils.getValue(this.style,mxConstants.STYLE_ARCSIZE,mxConstants.LINE_ARCSIZE)/2;t.begin(),this.addPoints(t,[new mxPoint(e+o,n),new mxPoint(e+i,n+s),new mxPoint(e+o,n+l),new mxPoint(e,n+s)],this.isRounded,r,!0),t.stroke(),mxRectangleShape.prototype.paintForeground.apply(this,arguments)},mxCellRenderer.registerShape("associativeEntity",nt),mxUtils.extend(it,mxDoubleEllipse),it.prototype.outerStroke=!0,it.prototype.paintVertexShape=function(t,e,n,i,l){var o=Math.min(4,Math.min(i/5,l/5));0<i&&0<l&&(t.ellipse(e+o,n+o,i-2*o,l-2*o),t.fillAndStroke()),t.setShadow(!1),this.outerStroke&&(t.ellipse(e,n,i,l),t.stroke())},mxCellRenderer.registerShape("endState",it),mxUtils.extend(lt,it),lt.prototype.outerStroke=!1,mxCellRenderer.registerShape("startState",lt),mxUtils.extend(ot,mxArrowConnector),ot.prototype.defaultWidth=4,ot.prototype.isOpenEnded=function(){return!0},ot.prototype.getEdgeWidth=function(){return mxUtils.getNumber(this.style,"width",this.defaultWidth)+Math.max(0,this.strokewidth-1)},ot.prototype.isArrowRounded=function(){return this.isRounded},mxCellRenderer.registerShape("link",ot),mxUtils.extend(st,mxArrowConnector),st.prototype.defaultWidth=10,st.prototype.defaultArrowWidth=20,st.prototype.getStartArrowWidth=function(){return this.getEdgeWidth()+mxUtils.getNumber(this.style,"startWidth",this.defaultArrowWidth)},st.prototype.getEndArrowWidth=function(){return this.getEdgeWidth()+mxUtils.getNumber(this.style,"endWidth",this.defaultArrowWidth)},st.prototype.getEdgeWidth=function(){return mxUtils.getNumber(this.style,"width",this.defaultWidth)+Math.max(0,this.strokewidth-1)},mxCellRenderer.registerShape("flexArrow",st),mxUtils.extend(rt,mxActor),rt.prototype.size=30,rt.prototype.isRoundable=function(){return!0},rt.prototype.redrawPath=function(t,e,n,i,l){var o=Math.min(l,parseFloat(mxUtils.getValue(this.style,"size",this.size))),s=mxUtils.getValue(this.style,mxConstants.STYLE_ARCSIZE,mxConstants.LINE_ARCSIZE)/2;this.addPoints(t,[new mxPoint(0,l),new mxPoint(0,o),new mxPoint(i,0),new mxPoint(i,l)],this.isRounded,s,!0),t.end()},mxCellRenderer.registerShape("manualInput",rt),mxUtils.extend(at,mxRectangleShape),at.prototype.dx=20,at.prototype.dy=20,at.prototype.isHtmlAllowed=function(){return!1},at.prototype.paintForeground=function(t,e,n,i,l){mxRectangleShape.prototype.paintForeground.apply(this,arguments);var o=0;this.isRounded&&(s=mxUtils.getValue(this.style,mxConstants.STYLE_ARCSIZE,100*mxConstants.RECTANGLE_ROUNDING_FACTOR)/100,o=Math.max(o,Math.min(i*s,l*s)));var s=Math.max(o,Math.min(i,parseFloat(mxUtils.getValue(this.style,"dx",this.dx))));o=Math.max(o,Math.min(l,parseFloat(mxUtils.getValue(this.style,"dy",this.dy)))),t.begin(),t.moveTo(e,n+o),t.lineTo(e+i,n+o),t.end(),t.stroke(),t.begin(),t.moveTo(e+s,n),t.lineTo(e+s,n+l),t.end(),t.stroke()},mxCellRenderer.registerShape("internalStorage",at),mxUtils.extend(ht,mxActor),ht.prototype.dx=20,ht.prototype.dy=20,ht.prototype.redrawPath=function(t,e,n,i,l){var o=Math.max(0,Math.min(i,parseFloat(mxUtils.getValue(this.style,"dx",this.dx)))),s=Math.max(0,Math.min(l,parseFloat(mxUtils.getValue(this.style,"dy",this.dy)))),r=(Math.min(i/2,Math.min(l,parseFloat(mxUtils.getValue(this.style,"size",this.size)))),mxUtils.getValue(this.style,mxConstants.STYLE_ARCSIZE,mxConstants.LINE_ARCSIZE)/2);this.addPoints(t,[new mxPoint(0,0),new mxPoint(i,0),new mxPoint(i,s),new mxPoint(o,s),new mxPoint(o,l),new mxPoint(0,l)],this.isRounded,r,!0),t.end()},mxCellRenderer.registerShape("corner",ht),mxUtils.extend(ut,mxActor),ut.prototype.redrawPath=function(t,e,n,i,l){t.moveTo(0,0),t.lineTo(0,l),t.end(),t.moveTo(i,0),t.lineTo(i,l),t.end(),t.moveTo(0,l/2),t.lineTo(i,l/2),t.end()},mxCellRenderer.registerShape("crossbar",ut),mxUtils.extend(dt,mxActor),dt.prototype.dx=20,dt.prototype.dy=20,dt.prototype.redrawPath=function(t,e,n,i,l){var o=Math.max(0,Math.min(i,parseFloat(mxUtils.getValue(this.style,"dx",this.dx)))),s=Math.max(0,Math.min(l,parseFloat(mxUtils.getValue(this.style,"dy",this.dy)))),r=(Math.abs(i-o),Math.min(i/2,Math.min(l,parseFloat(mxUtils.getValue(this.style,"size",this.size)))),mxUtils.getValue(this.style,mxConstants.STYLE_ARCSIZE,mxConstants.LINE_ARCSIZE)/2);this.addPoints(t,[new mxPoint(0,0),new mxPoint(i,0),new mxPoint(i,s),new mxPoint((i+o)/2,s),new mxPoint((i+o)/2,l),new mxPoint((i-o)/2,l),new mxPoint((i-o)/2,s),new mxPoint(0,s)],this.isRounded,r,!0),t.end()},mxCellRenderer.registerShape("tee",dt),mxUtils.extend(ct,mxActor),ct.prototype.arrowWidth=.3,ct.prototype.arrowSize=.2,ct.prototype.redrawPath=function(t,e,n,i,l){var o=l*Math.max(0,Math.min(1,parseFloat(mxUtils.getValue(this.style,"arrowWidth",this.arrowWidth)))),s=i*Math.max(0,Math.min(1,parseFloat(mxUtils.getValue(this.style,"arrowSize",this.arrowSize)))),r=(l-o)/2,a=r+o;o=mxUtils.getValue(this.style,mxConstants.STYLE_ARCSIZE,mxConstants.LINE_ARCSIZE)/2,this.addPoints(t,[new mxPoint(0,r),new mxPoint(i-s,r),new mxPoint(i-s,0),new mxPoint(i,l/2),new mxPoint(i-s,l),new mxPoint(i-s,a),new mxPoint(0,a)],this.isRounded,o,!0),t.end()},mxCellRenderer.registerShape("singleArrow",ct),mxUtils.extend(pt,mxActor),pt.prototype.redrawPath=function(t,e,n,i,l){var o=l*Math.max(0,Math.min(1,parseFloat(mxUtils.getValue(this.style,"arrowWidth",ct.prototype.arrowWidth)))),s=i*Math.max(0,Math.min(1,parseFloat(mxUtils.getValue(this.style,"arrowSize",ct.prototype.arrowSize)))),r=(l-o)/2,a=r+o;o=mxUtils.getValue(this.style,mxConstants.STYLE_ARCSIZE,mxConstants.LINE_ARCSIZE)/2,this.addPoints(t,[new mxPoint(0,l/2),new mxPoint(s,0),new mxPoint(s,r),new mxPoint(i-s,r),new mxPoint(i-s,0),new mxPoint(i,l/2),new mxPoint(i-s,l),new mxPoint(i-s,a),new mxPoint(s,a),new mxPoint(s,l)],this.isRounded,o,!0),t.end()},mxCellRenderer.registerShape("doubleArrow",pt),mxUtils.extend(mt,mxActor),mt.prototype.size=.1,mt.prototype.fixedSize=20,mt.prototype.redrawPath=function(t,e,n,i,l){var o="0"!=mxUtils.getValue(this.style,"fixedSize","0")?Math.max(0,Math.min(i,parseFloat(mxUtils.getValue(this.style,"size",this.fixedSize)))):i*Math.max(0,Math.min(1,parseFloat(mxUtils.getValue(this.style,"size",this.size))));t.moveTo(o,0),t.lineTo(i,0),t.quadTo(i-2*o,l/2,i,l),t.lineTo(o,l),t.quadTo(o-2*o,l/2,o,0),t.close(),t.end()},mxCellRenderer.registerShape("dataStorage",mt),mxUtils.extend(gt,mxActor),gt.prototype.redrawPath=function(t,e,n,i,l){t.moveTo(0,0),t.quadTo(i,0,i,l/2),t.quadTo(i,l,0,l),t.close(),t.end()},mxCellRenderer.registerShape("or",gt),mxUtils.extend(xt,mxActor),xt.prototype.redrawPath=function(t,e,n,i,l){t.moveTo(0,0),t.quadTo(i,0,i,l/2),t.quadTo(i,l,0,l),t.quadTo(i/2,l/2,0,0),t.close(),t.end()},mxCellRenderer.registerShape("xor",xt),mxUtils.extend(yt,mxActor),yt.prototype.size=20,yt.prototype.isRoundable=function(){return!0},yt.prototype.redrawPath=function(t,e,n,i,l){var o=Math.min(i/2,Math.min(l,parseFloat(mxUtils.getValue(this.style,"size",this.size)))),s=mxUtils.getValue(this.style,mxConstants.STYLE_ARCSIZE,mxConstants.LINE_ARCSIZE)/2;this.addPoints(t,[new mxPoint(o,0),new mxPoint(i-o,0),new mxPoint(i,.8*o),new mxPoint(i,l),new mxPoint(0,l),new mxPoint(0,.8*o)],this.isRounded,s,!0),t.end()},mxCellRenderer.registerShape("loopLimit",yt),mxUtils.extend(ft,mxActor),ft.prototype.size=3/8,ft.prototype.isRoundable=function(){return!0},ft.prototype.redrawPath=function(t,e,n,i,l){var o=l*Math.max(0,Math.min(1,parseFloat(mxUtils.getValue(this.style,"size",this.size)))),s=mxUtils.getValue(this.style,mxConstants.STYLE_ARCSIZE,mxConstants.LINE_ARCSIZE)/2;this.addPoints(t,[new mxPoint(0,0),new mxPoint(i,0),new mxPoint(i,l-o),new mxPoint(i/2,l),new mxPoint(0,l-o)],this.isRounded,s,!0),t.end()},mxCellRenderer.registerShape("offPageConnector",ft),mxUtils.extend(vt,mxEllipse),vt.prototype.paintVertexShape=function(t,e,n,i,l){mxEllipse.prototype.paintVertexShape.apply(this,arguments),t.begin(),t.moveTo(e+i/2,n+l),t.lineTo(e+i,n+l),t.end(),t.stroke()},mxCellRenderer.registerShape("tapeData",vt),mxUtils.extend(bt,mxEllipse),bt.prototype.paintVertexShape=function(t,e,n,i,l){mxEllipse.prototype.paintVertexShape.apply(this,arguments),t.setShadow(!1),t.begin(),t.moveTo(e,n+l/2),t.lineTo(e+i,n+l/2),t.end(),t.stroke(),t.begin(),t.moveTo(e+i/2,n),t.lineTo(e+i/2,n+l),t.end(),t.stroke()},mxCellRenderer.registerShape("orEllipse",bt),mxUtils.extend(Ct,mxEllipse),Ct.prototype.paintVertexShape=function(t,e,n,i,l){mxEllipse.prototype.paintVertexShape.apply(this,arguments),t.setShadow(!1),t.begin(),t.moveTo(e+.145*i,n+.145*l),t.lineTo(e+.855*i,n+.855*l),t.end(),t.stroke(),t.begin(),t.moveTo(e+.855*i,n+.145*l),t.lineTo(e+.145*i,n+.855*l),t.end(),t.stroke()},mxCellRenderer.registerShape("sumEllipse",Ct),mxUtils.extend(Et,mxRhombus),Et.prototype.paintVertexShape=function(t,e,n,i,l){mxRhombus.prototype.paintVertexShape.apply(this,arguments),t.setShadow(!1),t.begin(),t.moveTo(e,n+l/2),t.lineTo(e+i,n+l/2),t.end(),t.stroke()},mxCellRenderer.registerShape("sortShape",Et),mxUtils.extend(St,mxEllipse),St.prototype.paintVertexShape=function(t,e,n,i,l){t.begin(),t.moveTo(e,n),t.lineTo(e+i,n),t.lineTo(e+i/2,n+l/2),t.close(),t.fillAndStroke(),t.begin(),t.moveTo(e,n+l),t.lineTo(e+i,n+l),t.lineTo(e+i/2,n+l/2),t.close(),t.fillAndStroke()},mxCellRenderer.registerShape("collate",St),mxUtils.extend(wt,mxEllipse),wt.prototype.paintVertexShape=function(t,e,n,i,l){var o=n+l-5;t.begin(),t.moveTo(e,n),t.lineTo(e,n+l),t.moveTo(e,o),t.lineTo(e+10,o-5),t.moveTo(e,o),t.lineTo(e+10,5+o),t.moveTo(e,o),t.lineTo(e+i,o),t.moveTo(e+i,n),t.lineTo(e+i,n+l),t.moveTo(e+i,o),t.lineTo(e+i-10,o-5),t.moveTo(e+i,o),t.lineTo(e+i-10,5+o),t.end(),t.stroke()},mxCellRenderer.registerShape("dimension",wt),mxUtils.extend(Tt,mxEllipse),Tt.prototype.paintVertexShape=function(t,e,n,i,l){var o;this.outline||t.setStrokeColor(null),null!=this.style&&(o=t.pointerEvents,"1"==mxUtils.getValue(this.style,mxConstants.STYLE_POINTER_EVENTS,"1")||null!=this.fill&&this.fill!=mxConstants.NONE||(t.pointerEvents=!1),t.rect(e,n,i,l),t.fill(),t.pointerEvents=o,t.setStrokeColor(this.stroke),t.begin(),t.moveTo(e,n),this.outline||"1"==mxUtils.getValue(this.style,"top","1")?t.lineTo(e+i,n):t.moveTo(e+i,n),this.outline||"1"==mxUtils.getValue(this.style,"right","1")?t.lineTo(e+i,n+l):t.moveTo(e+i,n+l),this.outline||"1"==mxUtils.getValue(this.style,"bottom","1")?t.lineTo(e,n+l):t.moveTo(e,n+l),!this.outline&&"1"!=mxUtils.getValue(this.style,"left","1")||t.lineTo(e,n),t.end(),t.stroke())},mxCellRenderer.registerShape("partialRectangle",Tt),mxUtils.extend(At,mxEllipse),At.prototype.paintVertexShape=function(t,e,n,i,l){mxEllipse.prototype.paintVertexShape.apply(this,arguments),t.setShadow(!1),t.begin(),"vertical"==mxUtils.getValue(this.style,"line")?(t.moveTo(e+i/2,n),t.lineTo(e+i/2,n+l)):(t.moveTo(e,n+l/2),t.lineTo(e+i,n+l/2)),t.end(),t.stroke()},mxCellRenderer.registerShape("lineEllipse",At),mxUtils.extend(Mt,mxActor),Mt.prototype.redrawPath=function(t,e,n,i,l){var o=Math.min(i,l/2);t.moveTo(0,0),t.lineTo(i-o,0),t.quadTo(i,0,i,l/2),t.quadTo(i,l,i-o,l),t.lineTo(0,l),t.close(),t.end()},mxCellRenderer.registerShape("delay",Mt),mxUtils.extend(Lt,mxActor),Lt.prototype.size=.2,Lt.prototype.redrawPath=function(t,e,n,i,l){var o=Math.min(l,i),s=(l-(a=Math.max(0,Math.min(o,o*parseFloat(mxUtils.getValue(this.style,"size",this.size))))))/2,r=s+a,a=(o=(i-a)/2)+a;t.moveTo(0,s),t.lineTo(o,s),t.lineTo(o,0),t.lineTo(a,0),t.lineTo(a,s),t.lineTo(i,s),t.lineTo(i,r),t.lineTo(a,r),t.lineTo(a,l),t.lineTo(o,l),t.lineTo(o,r),t.lineTo(0,r),t.close(),t.end()},mxCellRenderer.registerShape("cross",Lt),mxUtils.extend(Pt,mxActor),Pt.prototype.size=.25,Pt.prototype.redrawPath=function(t,e,n,i,l){var o=Math.min(i,l/2),s=Math.min(i-o,Math.max(0,parseFloat(mxUtils.getValue(this.style,"size",this.size)))*i);t.moveTo(0,l/2),t.lineTo(s,0),t.lineTo(i-o,0),t.quadTo(i,0,i,l/2),t.quadTo(i,l,i-o,l),t.lineTo(s,l),t.close(),t.end()},mxCellRenderer.registerShape("display",Pt),mxUtils.extend(It,mxActor),It.prototype.cst={RECT2:"mxgraph.basic.rect"},It.prototype.customProperties=[{name:"rectStyle",dispName:"Style",type:"enum",defVal:"square",enumList:[{val:"square",dispName:"Square"},{val:"rounded",dispName:"Round"},{val:"snip",dispName:"Snip"},{val:"invRound",dispName:"Inv. Round"},{val:"fold",dispName:"Fold"}]},{name:"size",dispName:"Corner Size",type:"float",defVal:10},{name:"absoluteCornerSize",dispName:"Abs. Corner Size",type:"bool",defVal:!0},{name:"indent",dispName:"Indent",type:"float",defVal:2},{name:"rectOutline",dispName:"Outline",type:"enum",defVal:"single",enumList:[{val:"single",dispName:"Single"},{val:"double",dispName:"Double"},{val:"frame",dispName:"Frame"}]},{name:"fillColor2",dispName:"Inside Fill Color",type:"color",defVal:"none"},{name:"gradientColor2",dispName:"Inside Gradient Color",type:"color",defVal:"none"},{name:"gradientDirection2",dispName:"Inside Gradient Direction",type:"enum",defVal:"south",enumList:[{val:"south",dispName:"South"},{val:"west",dispName:"West"},{val:"north",dispName:"North"},{val:"east",dispName:"East"}]},{name:"top",dispName:"Top Line",type:"bool",defVal:!0},{name:"right",dispName:"Right",type:"bool",defVal:!0},{name:"bottom",dispName:"Bottom Line",type:"bool",defVal:!0},{name:"left",dispName:"Left ",type:"bool",defVal:!0},{name:"topLeftStyle",dispName:"Top Left Style",type:"enum",defVal:"default",enumList:[{val:"default",dispName:"Default"},{val:"square",dispName:"Square"},{val:"rounded",dispName:"Round"},{val:"snip",dispName:"Snip"},{val:"invRound",dispName:"Inv. Round"},{val:"fold",dispName:"Fold"}]},{name:"topRightStyle",dispName:"Top Right Style",type:"enum",defVal:"default",enumList:[{val:"default",dispName:"Default"},{val:"square",dispName:"Square"},{val:"rounded",dispName:"Round"},{val:"snip",dispName:"Snip"},{val:"invRound",dispName:"Inv. Round"},{val:"fold",dispName:"Fold"}]},{name:"bottomRightStyle",dispName:"Bottom Right Style",type:"enum",defVal:"default",enumList:[{val:"default",dispName:"Default"},{val:"square",dispName:"Square"},{val:"rounded",dispName:"Round"},{val:"snip",dispName:"Snip"},{val:"invRound",dispName:"Inv. Round"},{val:"fold",dispName:"Fold"}]},{name:"bottomLeftStyle",dispName:"Bottom Left Style",type:"enum",defVal:"default",enumList:[{val:"default",dispName:"Default"},{val:"square",dispName:"Square"},{val:"rounded",dispName:"Round"},{val:"snip",dispName:"Snip"},{val:"invRound",dispName:"Inv. Round"},{val:"fold",dispName:"Fold"}]}],It.prototype.paintVertexShape=function(t,e,n,i,l){t.translate(e,n),this.strictDrawShape(t,0,0,i,l)},It.prototype.strictDrawShape=function(t,e,n,i,l,o){var s=o&&o.rectStyle?o.rectStyle:mxUtils.getValue(this.style,"rectStyle",this.rectStyle),r=o&&o.absoluteCornerSize?o.absoluteCornerSize:mxUtils.getValue(this.style,"absoluteCornerSize",this.absoluteCornerSize),a=o&&o.size?o.size:Math.max(0,Math.min(i,parseFloat(mxUtils.getValue(this.style,"size",this.size)))),h=o&&o.rectOutline?o.rectOutline:mxUtils.getValue(this.style,"rectOutline",this.rectOutline),u=o&&o.indent?o.indent:Math.max(0,Math.min(i,parseFloat(mxUtils.getValue(this.style,"indent",this.indent)))),d=o&&o.dashed?o.dashed:mxUtils.getValue(this.style,"dashed",!1),c=o&&o.dashPattern?o.dashPattern:mxUtils.getValue(this.style,"dashPattern",null),p=o&&o.relIndent?o.relIndent:Math.max(0,Math.min(50,u)),m=o&&o.top?o.top:mxUtils.getValue(this.style,"top",!0),g=o&&o.right?o.right:mxUtils.getValue(this.style,"right",!0),x=o&&o.bottom?o.bottom:mxUtils.getValue(this.style,"bottom",!0),y=o&&o.left?o.left:mxUtils.getValue(this.style,"left",!0),f=o&&o.topLeftStyle?o.topLeftStyle:mxUtils.getValue(this.style,"topLeftStyle","default"),v=o&&o.topRightStyle?o.topRightStyle:mxUtils.getValue(this.style,"topRightStyle","default"),b=o&&o.bottomRightStyle?o.bottomRightStyle:mxUtils.getValue(this.style,"bottomRightStyle","default"),C=o&&o.bottomLeftStyle?o.bottomLeftStyle:mxUtils.getValue(this.style,"bottomLeftStyle","default"),E=o&&o.fillColor?o.fillColor:mxUtils.getValue(this.style,"fillColor","#ffffff"),S=(o&&o.strokeColor||mxUtils.getValue(this.style,"strokeColor","#000000"),o&&o.strokeWidth?o.strokeWidth:mxUtils.getValue(this.style,"strokeWidth","1")),w=o&&o.fillColor2?o.fillColor2:mxUtils.getValue(this.style,"fillColor2","none"),T=o&&o.gradientColor2?o.gradientColor2:mxUtils.getValue(this.style,"gradientColor2","none"),A=o&&o.gradientDirection2?o.gradientDirection2:mxUtils.getValue(this.style,"gradientDirection2","south"),M=o&&o.opacity?o.opacity:mxUtils.getValue(this.style,"opacity","100"),L=Math.max(0,Math.min(50,a));o=It.prototype,t.setDashed(d),c&&""!=c&&t.setDashPattern(c),t.setStrokeWidth(S),a=Math.min(.5*l,.5*i,a),r||(a=L*Math.min(i,l)/100),a=Math.min(a,.5*Math.min(i,l)),r||(u=Math.min(p*Math.min(i,l)/100)),u=Math.min(u,.5*Math.min(i,l)-a),(m||g||x||y)&&"frame"!=h&&(t.begin(),m?o.moveNW(t,e,n,i,l,s,f,a,y):t.moveTo(0,0),m&&o.paintNW(t,e,n,i,l,s,f,a,y),o.paintTop(t,e,n,i,l,s,v,a,g),g&&o.paintNE(t,e,n,i,l,s,v,a,m),o.paintRight(t,e,n,i,l,s,b,a,x),x&&o.paintSE(t,e,n,i,l,s,b,a,g),o.paintBottom(t,e,n,i,l,s,C,a,y),y&&o.paintSW(t,e,n,i,l,s,C,a,x),o.paintLeft(t,e,n,i,l,s,f,a,m),t.close(),t.fill(),t.setShadow(!1),t.setFillColor(w),t.setGradient(w,T,0,0,i,l,A,"none"==w?0:M,"none"==T?0:M),t.begin(),m?o.moveNWInner(t,e,n,i,l,s,f,a,u,m,y):t.moveTo(u,0),o.paintLeftInner(t,e,n,i,l,s,C,a,u,x,y),y&&x&&o.paintSWInner(t,e,n,i,l,s,C,a,u,x),o.paintBottomInner(t,e,n,i,l,s,b,a,u,g,x),x&&g&&o.paintSEInner(t,e,n,i,l,s,b,a,u),o.paintRightInner(t,e,n,i,l,s,v,a,u,m,g),g&&m&&o.paintNEInner(t,e,n,i,l,s,v,a,u),o.paintTopInner(t,e,n,i,l,s,f,a,u,y,m),m&&y&&o.paintNWInner(t,e,n,i,l,s,f,a,u),t.fill(),"none"==E&&(t.begin(),o.paintFolds(t,e,n,i,l,s,f,v,b,C,a,m,g,x,y),t.stroke())),m||g||x||!y?m||g||!x||y?!m&&!g&&x&&y?"frame"!=h?(t.begin(),o.moveSE(t,e,n,i,l,s,b,a,g),o.paintBottom(t,e,n,i,l,s,C,a,y),o.paintSW(t,e,n,i,l,s,C,a,x),o.paintLeft(t,e,n,i,l,s,f,a,m),"double"==h&&(o.moveNWInner(t,e,n,i,l,s,f,a,u,m,y),o.paintLeftInner(t,e,n,i,l,s,C,a,u,x,y),o.paintSWInner(t,e,n,i,l,s,C,a,u,x),o.paintBottomInner(t,e,n,i,l,s,b,a,u,g,x)),t.stroke()):(t.begin(),o.moveSE(t,e,n,i,l,s,b,a,g),o.paintBottom(t,e,n,i,l,s,C,a,y),o.paintSW(t,e,n,i,l,s,C,a,x),o.paintLeft(t,e,n,i,l,s,f,a,m),o.lineNWInner(t,e,n,i,l,s,f,a,u,m,y),o.paintLeftInner(t,e,n,i,l,s,C,a,u,x,y),o.paintSWInner(t,e,n,i,l,s,C,a,u,x),o.paintBottomInner(t,e,n,i,l,s,b,a,u,g,x),t.close(),t.fillAndStroke()):m||!g||x||y?!m&&g&&!x&&y?"frame"!=h?(t.begin(),o.moveSW(t,e,n,i,l,s,f,a,x),o.paintLeft(t,e,n,i,l,s,f,a,m),"double"==h&&(o.moveNWInner(t,e,n,i,l,s,f,a,u,m,y),o.paintLeftInner(t,e,n,i,l,s,C,a,u,x,y)),t.stroke(),t.begin(),o.moveNE(t,e,n,i,l,s,v,a,m),o.paintRight(t,e,n,i,l,s,b,a,x),"double"==h&&(o.moveSEInner(t,e,n,i,l,s,b,a,u,x),o.paintRightInner(t,e,n,i,l,s,v,a,u,m,g)),t.stroke()):(t.begin(),o.moveSW(t,e,n,i,l,s,f,a,x),o.paintLeft(t,e,n,i,l,s,f,a,m),o.lineNWInner(t,e,n,i,l,s,f,a,u,m,y),o.paintLeftInner(t,e,n,i,l,s,C,a,u,x,y),t.close(),t.fillAndStroke(),t.begin(),o.moveNE(t,e,n,i,l,s,v,a,m),o.paintRight(t,e,n,i,l,s,b,a,x),o.lineSEInner(t,e,n,i,l,s,b,a,u,x),o.paintRightInner(t,e,n,i,l,s,v,a,u,m,g),t.close(),t.fillAndStroke()):!m&&g&&x&&!y?"frame"!=h?(t.begin(),o.moveNE(t,e,n,i,l,s,v,a,m),o.paintRight(t,e,n,i,l,s,b,a,x),o.paintSE(t,e,n,i,l,s,b,a,g),o.paintBottom(t,e,n,i,l,s,C,a,y),"double"==h&&(o.moveSWInner(t,e,n,i,l,s,C,a,u,y),o.paintBottomInner(t,e,n,i,l,s,b,a,u,g,x),o.paintSEInner(t,e,n,i,l,s,b,a,u),o.paintRightInner(t,e,n,i,l,s,v,a,u,m,g)),t.stroke()):(t.begin(),o.moveNE(t,e,n,i,l,s,v,a,m),o.paintRight(t,e,n,i,l,s,b,a,x),o.paintSE(t,e,n,i,l,s,b,a,g),o.paintBottom(t,e,n,i,l,s,C,a,y),o.lineSWInner(t,e,n,i,l,s,C,a,u,y),o.paintBottomInner(t,e,n,i,l,s,b,a,u,g,x),o.paintSEInner(t,e,n,i,l,s,b,a,u),o.paintRightInner(t,e,n,i,l,s,v,a,u,m,g),t.close(),t.fillAndStroke()):!m&&g&&x&&y?"frame"!=h?(t.begin(),o.moveNE(t,e,n,i,l,s,v,a,m),o.paintRight(t,e,n,i,l,s,b,a,x),o.paintSE(t,e,n,i,l,s,b,a,g),o.paintBottom(t,e,n,i,l,s,C,a,y),o.paintSW(t,e,n,i,l,s,C,a,x),o.paintLeft(t,e,n,i,l,s,f,a,m),"double"==h&&(o.moveNWInner(t,e,n,i,l,s,f,a,u,m,y),o.paintLeftInner(t,e,n,i,l,s,C,a,u,x,y),o.paintSWInner(t,e,n,i,l,s,C,a,u,x),o.paintBottomInner(t,e,n,i,l,s,b,a,u,g,x),o.paintSEInner(t,e,n,i,l,s,b,a,u),o.paintRightInner(t,e,n,i,l,s,v,a,u,m,g)),t.stroke()):(t.begin(),o.moveNE(t,e,n,i,l,s,v,a,m),o.paintRight(t,e,n,i,l,s,b,a,x),o.paintSE(t,e,n,i,l,s,b,a,g),o.paintBottom(t,e,n,i,l,s,C,a,y),o.paintSW(t,e,n,i,l,s,C,a,x),o.paintLeft(t,e,n,i,l,s,f,a,m),o.lineNWInner(t,e,n,i,l,s,f,a,u,m,y),o.paintLeftInner(t,e,n,i,l,s,C,a,u,x,y),o.paintSWInner(t,e,n,i,l,s,C,a,u,x),o.paintBottomInner(t,e,n,i,l,s,b,a,u,g,x),o.paintSEInner(t,e,n,i,l,s,b,a,u),o.paintRightInner(t,e,n,i,l,s,v,a,u,m,g),t.close(),t.fillAndStroke()):!m||g||x||y?m&&!g&&!x&&y?"frame"!=h?(t.begin(),o.moveSW(t,e,n,i,l,s,C,a,x),o.paintLeft(t,e,n,i,l,s,f,a,m),o.paintNW(t,e,n,i,l,s,f,a,y),o.paintTop(t,e,n,i,l,s,v,a,g),"double"==h&&(o.moveNEInner(t,e,n,i,l,s,v,a,u,g),o.paintTopInner(t,e,n,i,l,s,f,a,u,y,m),o.paintNWInner(t,e,n,i,l,s,f,a,u),o.paintLeftInner(t,e,n,i,l,s,C,a,u,x,y)),t.stroke()):(t.begin(),o.moveSW(t,e,n,i,l,s,C,a,x),o.paintLeft(t,e,n,i,l,s,f,a,m),o.paintNW(t,e,n,i,l,s,f,a,y),o.paintTop(t,e,n,i,l,s,v,a,g),o.lineNEInner(t,e,n,i,l,s,v,a,u,g),o.paintTopInner(t,e,n,i,l,s,f,a,u,y,m),o.paintNWInner(t,e,n,i,l,s,f,a,u),o.paintLeftInner(t,e,n,i,l,s,C,a,u,x,y),t.close(),t.fillAndStroke()):m&&!g&&x&&!y?"frame"!=h?(t.begin(),o.moveNW(t,e,n,i,l,s,f,a,y),o.paintTop(t,e,n,i,l,s,v,a,g),"double"==h&&(o.moveNEInner(t,e,n,i,l,s,v,a,u,g),o.paintTopInner(t,e,n,i,l,s,f,a,u,y,m)),t.stroke(),t.begin(),o.moveSE(t,e,n,i,l,s,b,a,g),o.paintBottom(t,e,n,i,l,s,C,a,y),"double"==h&&(o.moveSWInner(t,e,n,i,l,s,C,a,u,y),o.paintBottomInner(t,e,n,i,l,s,b,a,u,g,x)),t.stroke()):(t.begin(),o.moveNW(t,e,n,i,l,s,f,a,y),o.paintTop(t,e,n,i,l,s,v,a,g),o.lineNEInner(t,e,n,i,l,s,v,a,u,g),o.paintTopInner(t,e,n,i,l,s,f,a,u,y,m),t.close(),t.fillAndStroke(),t.begin(),o.moveSE(t,e,n,i,l,s,b,a,g),o.paintBottom(t,e,n,i,l,s,C,a,y),o.lineSWInner(t,e,n,i,l,s,C,a,u,y),o.paintBottomInner(t,e,n,i,l,s,b,a,u,g,x),t.close(),t.fillAndStroke()):m&&!g&&x&&y?"frame"!=h?(t.begin(),o.moveSE(t,e,n,i,l,s,b,a,g),o.paintBottom(t,e,n,i,l,s,C,a,y),o.paintSW(t,e,n,i,l,s,C,a,x),o.paintLeft(t,e,n,i,l,s,f,a,m),o.paintNW(t,e,n,i,l,s,f,a,y),o.paintTop(t,e,n,i,l,s,v,a,g),"double"==h&&(o.moveNEInner(t,e,n,i,l,s,v,a,u,g),o.paintTopInner(t,e,n,i,l,s,f,a,u,y,m),o.paintNWInner(t,e,n,i,l,s,f,a,u),o.paintLeftInner(t,e,n,i,l,s,C,a,u,x,y),o.paintSWInner(t,e,n,i,l,s,C,a,u,x),o.paintBottomInner(t,e,n,i,l,s,b,a,u,g,x)),t.stroke()):(t.begin(),o.moveSE(t,e,n,i,l,s,b,a,g),o.paintBottom(t,e,n,i,l,s,C,a,y),o.paintSW(t,e,n,i,l,s,C,a,x),o.paintLeft(t,e,n,i,l,s,f,a,m),o.paintNW(t,e,n,i,l,s,f,a,y),o.paintTop(t,e,n,i,l,s,v,a,g),o.lineNEInner(t,e,n,i,l,s,v,a,u,g),o.paintTopInner(t,e,n,i,l,s,f,a,u,y,m),o.paintNWInner(t,e,n,i,l,s,f,a,u),o.paintLeftInner(t,e,n,i,l,s,C,a,u,x,y),o.paintSWInner(t,e,n,i,l,s,C,a,u,x),o.paintBottomInner(t,e,n,i,l,s,b,a,u,g,x),t.close(),t.fillAndStroke()):m&&g&&!x&&!y?"frame"!=h?(t.begin(),o.moveNW(t,e,n,i,l,s,f,a,y),o.paintTop(t,e,n,i,l,s,v,a,g),o.paintNE(t,e,n,i,l,s,v,a,m),o.paintRight(t,e,n,i,l,s,b,a,x),"double"==h&&(o.moveSEInner(t,e,n,i,l,s,b,a,u,x),o.paintRightInner(t,e,n,i,l,s,v,a,u,m,g),o.paintNEInner(t,e,n,i,l,s,v,a,u),o.paintTopInner(t,e,n,i,l,s,f,a,u,y,m)),t.stroke()):(t.begin(),o.moveNW(t,e,n,i,l,s,f,a,y),o.paintTop(t,e,n,i,l,s,v,a,g),o.paintNE(t,e,n,i,l,s,v,a,m),o.paintRight(t,e,n,i,l,s,b,a,x),o.lineSEInner(t,e,n,i,l,s,b,a,u,x),o.paintRightInner(t,e,n,i,l,s,v,a,u,m,g),o.paintNEInner(t,e,n,i,l,s,v,a,u),o.paintTopInner(t,e,n,i,l,s,f,a,u,y,m),t.close(),t.fillAndStroke()):m&&g&&!x&&y?"frame"!=h?(t.begin(),o.moveSW(t,e,n,i,l,s,C,a,x),o.paintLeft(t,e,n,i,l,s,f,a,m),o.paintNW(t,e,n,i,l,s,f,a,y),o.paintTop(t,e,n,i,l,s,v,a,g),o.paintNE(t,e,n,i,l,s,v,a,m),o.paintRight(t,e,n,i,l,s,b,a,x),"double"==h&&(o.moveSEInner(t,e,n,i,l,s,b,a,u,x),o.paintRightInner(t,e,n,i,l,s,v,a,u,m,g),o.paintNEInner(t,e,n,i,l,s,v,a,u),o.paintTopInner(t,e,n,i,l,s,f,a,u,y,m),o.paintNWInner(t,e,n,i,l,s,f,a,u),o.paintLeftInner(t,e,n,i,l,s,C,a,u,x,y)),t.stroke()):(t.begin(),o.moveSW(t,e,n,i,l,s,C,a,x),o.paintLeft(t,e,n,i,l,s,f,a,m),o.paintNW(t,e,n,i,l,s,f,a,y),o.paintTop(t,e,n,i,l,s,v,a,g),o.paintNE(t,e,n,i,l,s,v,a,m),o.paintRight(t,e,n,i,l,s,b,a,x),o.lineSEInner(t,e,n,i,l,s,b,a,u,x),o.paintRightInner(t,e,n,i,l,s,v,a,u,m,g),o.paintNEInner(t,e,n,i,l,s,v,a,u),o.paintTopInner(t,e,n,i,l,s,f,a,u,y,m),o.paintNWInner(t,e,n,i,l,s,f,a,u),o.paintLeftInner(t,e,n,i,l,s,C,a,u,x,y),t.close(),t.fillAndStroke()):m&&g&&x&&!y?"frame"!=h?(t.begin(),o.moveNW(t,e,n,i,l,s,f,a,y),o.paintTop(t,e,n,i,l,s,v,a,g),o.paintNE(t,e,n,i,l,s,v,a,m),o.paintRight(t,e,n,i,l,s,b,a,x),o.paintSE(t,e,n,i,l,s,b,a,g),o.paintBottom(t,e,n,i,l,s,C,a,y),"double"==h&&(o.moveSWInner(t,e,n,i,l,s,C,a,u,y),o.paintBottomInner(t,e,n,i,l,s,b,a,u,g,x),o.paintSEInner(t,e,n,i,l,s,b,a,u),o.paintRightInner(t,e,n,i,l,s,v,a,u,m,g),o.paintNEInner(t,e,n,i,l,s,v,a,u),o.paintTopInner(t,e,n,i,l,s,f,a,u,y,m)),t.stroke()):(t.begin(),o.moveNW(t,e,n,i,l,s,f,a,y),o.paintTop(t,e,n,i,l,s,v,a,g),o.paintNE(t,e,n,i,l,s,v,a,m),o.paintRight(t,e,n,i,l,s,b,a,x),o.paintSE(t,e,n,i,l,s,b,a,g),o.paintBottom(t,e,n,i,l,s,C,a,y),o.lineSWInner(t,e,n,i,l,s,C,a,u,y),o.paintBottomInner(t,e,n,i,l,s,b,a,u,g,x),o.paintSEInner(t,e,n,i,l,s,b,a,u),o.paintRightInner(t,e,n,i,l,s,v,a,u,m,g),o.paintNEInner(t,e,n,i,l,s,v,a,u),o.paintTopInner(t,e,n,i,l,s,f,a,u,y,m),t.close(),t.fillAndStroke()):m&&g&&x&&y&&("frame"!=h?(t.begin(),o.moveNW(t,e,n,i,l,s,f,a,y),o.paintNW(t,e,n,i,l,s,f,a,y),o.paintTop(t,e,n,i,l,s,v,a,g),o.paintNE(t,e,n,i,l,s,v,a,m),o.paintRight(t,e,n,i,l,s,b,a,x),o.paintSE(t,e,n,i,l,s,b,a,g),o.paintBottom(t,e,n,i,l,s,C,a,y),o.paintSW(t,e,n,i,l,s,C,a,x),o.paintLeft(t,e,n,i,l,s,f,a,m),t.close(),"double"==h&&(o.moveSWInner(t,e,n,i,l,s,C,a,u,y),o.paintSWInner(t,e,n,i,l,s,C,a,u,x),o.paintBottomInner(t,e,n,i,l,s,b,a,u,g,x),o.paintSEInner(t,e,n,i,l,s,b,a,u),o.paintRightInner(t,e,n,i,l,s,v,a,u,m,g),o.paintNEInner(t,e,n,i,l,s,v,a,u),o.paintTopInner(t,e,n,i,l,s,f,a,u,y,m),o.paintNWInner(t,e,n,i,l,s,f,a,u),o.paintLeftInner(t,e,n,i,l,s,C,a,u,x,y),t.close()),t.stroke()):(t.begin(),o.moveNW(t,e,n,i,l,s,f,a,y),o.paintNW(t,e,n,i,l,s,f,a,y),o.paintTop(t,e,n,i,l,s,v,a,g),o.paintNE(t,e,n,i,l,s,v,a,m),o.paintRight(t,e,n,i,l,s,b,a,x),o.paintSE(t,e,n,i,l,s,b,a,g),o.paintBottom(t,e,n,i,l,s,C,a,y),o.paintSW(t,e,n,i,l,s,C,a,x),o.paintLeft(t,e,n,i,l,s,f,a,m),t.close(),o.moveSWInner(t,e,n,i,l,s,C,a,u,y),o.paintSWInner(t,e,n,i,l,s,C,a,u,x),o.paintBottomInner(t,e,n,i,l,s,b,a,u,g,x),o.paintSEInner(t,e,n,i,l,s,b,a,u),o.paintRightInner(t,e,n,i,l,s,v,a,u,m,g),o.paintNEInner(t,e,n,i,l,s,v,a,u),o.paintTopInner(t,e,n,i,l,s,f,a,u,y,m),o.paintNWInner(t,e,n,i,l,s,f,a,u),o.paintLeftInner(t,e,n,i,l,s,C,a,u,x,y),t.close(),t.fillAndStroke())):"frame"!=h?(t.begin(),o.moveNW(t,e,n,i,l,s,f,a,y),o.paintTop(t,e,n,i,l,s,v,a,g),"double"==h&&(o.moveNEInner(t,e,n,i,l,s,v,a,u,g),o.paintTopInner(t,e,n,i,l,s,f,a,u,y,m)),t.stroke()):(t.begin(),o.moveNW(t,e,n,i,l,s,f,a,y),o.paintTop(t,e,n,i,l,s,v,a,g),o.lineNEInner(t,e,n,i,l,s,v,a,u,g),o.paintTopInner(t,e,n,i,l,s,f,a,u,y,m),t.close(),t.fillAndStroke()):"frame"!=h?(t.begin(),o.moveNE(t,e,n,i,l,s,v,a,m),o.paintRight(t,e,n,i,l,s,b,a,x),"double"==h&&(o.moveSEInner(t,e,n,i,l,s,b,a,u,x),o.paintRightInner(t,e,n,i,l,s,v,a,u,m,g)),t.stroke()):(t.begin(),o.moveNE(t,e,n,i,l,s,v,a,m),o.paintRight(t,e,n,i,l,s,b,a,x),o.lineSEInner(t,e,n,i,l,s,b,a,u,x),o.paintRightInner(t,e,n,i,l,s,v,a,u,m,g),t.close(),t.fillAndStroke()):"frame"!=h?(t.begin(),o.moveSE(t,e,n,i,l,s,b,a,g),o.paintBottom(t,e,n,i,l,s,C,a,y),"double"==h&&(o.moveSWInner(t,e,n,i,l,s,C,a,u,y),o.paintBottomInner(t,e,n,i,l,s,b,a,u,g,x)),t.stroke()):(t.begin(),o.moveSE(t,e,n,i,l,s,b,a,g),o.paintBottom(t,e,n,i,l,s,C,a,y),o.lineSWInner(t,e,n,i,l,s,C,a,u,y),o.paintBottomInner(t,e,n,i,l,s,b,a,u,g,x),t.close(),t.fillAndStroke()):"frame"!=h?(t.begin(),o.moveSW(t,e,n,i,l,s,f,a,x),o.paintLeft(t,e,n,i,l,s,f,a,m),"double"==h&&(o.moveNWInner(t,e,n,i,l,s,f,a,u,m,y),o.paintLeftInner(t,e,n,i,l,s,C,a,u,x,y)),t.stroke()):(t.begin(),o.moveSW(t,e,n,i,l,s,f,a,x),o.paintLeft(t,e,n,i,l,s,f,a,m),o.lineNWInner(t,e,n,i,l,s,f,a,u,m,y),o.paintLeftInner(t,e,n,i,l,s,C,a,u,x,y),t.close(),t.fillAndStroke()),t.begin(),o.paintFolds(t,e,n,i,l,s,f,v,b,C,a,m,g,x,y),t.stroke()},It.prototype.moveNW=function(t,e,n,i,l,o,s,r,a){t.moveTo(0,"square"==s||"default"==s&&"square"==o||!a?0:r)},It.prototype.moveNE=function(t,e,n,i,l,o,s,r,a){t.moveTo("square"==s||"default"==s&&"square"==o||!a?i:i-r,0)},It.prototype.moveSE=function(t,e,n,i,l,o,s,r,a){t.moveTo(i,"square"==s||"default"==s&&"square"==o||!a?l:l-r)},It.prototype.moveSW=function(t,e,n,i,l,o,s,r,a){t.moveTo("square"==s||"default"==s&&"square"==o||!a?0:r,l)},It.prototype.paintNW=function(t,e,n,i,l,o,s,r,a){a?"rounded"==s||"default"==s&&"rounded"==o||"invRound"==s||"default"==s&&"invRound"==o?t.arcTo(r,r,0,0,"rounded"==s||"default"==s&&"rounded"==o?1:0,r,0):("snip"==s||"default"==s&&"snip"==o||"fold"==s||"default"==s&&"fold"==o)&&t.lineTo(r,0):t.lineTo(0,0)},It.prototype.paintTop=function(t,e,n,i,l,o,s,r,a){t.lineTo("square"==s||"default"==s&&"square"==o||!a?i:i-r,0)},It.prototype.paintNE=function(t,e,n,i,l,o,s,r,a){a?"rounded"==s||"default"==s&&"rounded"==o||"invRound"==s||"default"==s&&"invRound"==o?t.arcTo(r,r,0,0,"rounded"==s||"default"==s&&"rounded"==o?1:0,i,r):("snip"==s||"default"==s&&"snip"==o||"fold"==s||"default"==s&&"fold"==o)&&t.lineTo(i,r):t.lineTo(i,0)},It.prototype.paintRight=function(t,e,n,i,l,o,s,r,a){t.lineTo(i,"square"==s||"default"==s&&"square"==o||!a?l:l-r)},It.prototype.paintLeft=function(t,e,n,i,l,o,s,r,a){t.lineTo(0,"square"==s||"default"==s&&"square"==o||!a?0:r)},It.prototype.paintSE=function(t,e,n,i,l,o,s,r,a){a?"rounded"==s||"default"==s&&"rounded"==o||"invRound"==s||"default"==s&&"invRound"==o?t.arcTo(r,r,0,0,"rounded"==s||"default"==s&&"rounded"==o?1:0,i-r,l):("snip"==s||"default"==s&&"snip"==o||"fold"==s||"default"==s&&"fold"==o)&&t.lineTo(i-r,l):t.lineTo(i,l)},It.prototype.paintBottom=function(t,e,n,i,l,o,s,r,a){t.lineTo("square"==s||"default"==s&&"square"==o||!a?0:r,l)},It.prototype.paintSW=function(t,e,n,i,l,o,s,r,a){a?"rounded"==s||"default"==s&&"rounded"==o||"invRound"==s||"default"==s&&"invRound"==o?t.arcTo(r,r,0,0,"rounded"==s||"default"==s&&"rounded"==o?1:0,0,l-r):("snip"==s||"default"==s&&"snip"==o||"fold"==s||"default"==s&&"fold"==o)&&t.lineTo(0,l-r):t.lineTo(0,l)},It.prototype.paintNWInner=function(t,e,n,i,l,o,s,r,a){"rounded"==s||"default"==s&&"rounded"==o?t.arcTo(r-.5*a,r-.5*a,0,0,0,a,.5*a+r):"invRound"==s||"default"==s&&"invRound"==o?t.arcTo(r+a,r+a,0,0,1,a,a+r):"snip"==s||"default"==s&&"snip"==o?t.lineTo(a,.5*a+r):("fold"==s||"default"==s&&"fold"==o)&&(t.lineTo(a+r,a+r),t.lineTo(a,a+r))},It.prototype.paintTopInner=function(t,e,n,i,l,o,s,r,a,h,u){h||u?!h&&u?t.lineTo(0,a):h&&!u?t.lineTo(a,0):t.lineTo(h?"square"==s||"default"==s&&"square"==o?a:"rounded"==s||"default"==s&&"rounded"==o||"snip"==s||"default"==s&&"snip"==o?r+.5*a:r+a:0,a):t.lineTo(0,0)},It.prototype.paintNEInner=function(t,e,n,i,l,o,s,r,a){"rounded"==s||"default"==s&&"rounded"==o?t.arcTo(r-.5*a,r-.5*a,0,0,0,i-r-.5*a,a):"invRound"==s||"default"==s&&"invRound"==o?t.arcTo(r+a,r+a,0,0,1,i-r-a,a):"snip"==s||"default"==s&&"snip"==o?t.lineTo(i-r-.5*a,a):("fold"==s||"default"==s&&"fold"==o)&&(t.lineTo(i-r-a,r+a),t.lineTo(i-r-a,a))},It.prototype.paintRightInner=function(t,e,n,i,l,o,s,r,a,h,u){h||u?!h&&u?t.lineTo(i-a,0):h&&!u?t.lineTo(i,a):t.lineTo(i-a,h?"square"==s||"default"==s&&"square"==o?a:"rounded"==s||"default"==s&&"rounded"==o||"snip"==s||"default"==s&&"snip"==o?r+.5*a:r+a:0):t.lineTo(i,0)},It.prototype.paintLeftInner=function(t,e,n,i,l,o,s,r,a,h,u){h||u?!h&&u?t.lineTo(a,l):h&&!u?t.lineTo(0,l-a):t.lineTo(a,h?"square"==s||"default"==s&&"square"==o?l-a:"rounded"==s||"default"==s&&"rounded"==o||"snip"==s||"default"==s&&"snip"==o?l-r-.5*a:l-r-a:l):t.lineTo(0,l)},It.prototype.paintSEInner=function(t,e,n,i,l,o,s,r,a){"rounded"==s||"default"==s&&"rounded"==o?t.arcTo(r-.5*a,r-.5*a,0,0,0,i-a,l-r-.5*a):"invRound"==s||"default"==s&&"invRound"==o?t.arcTo(r+a,r+a,0,0,1,i-a,l-r-a):"snip"==s||"default"==s&&"snip"==o?t.lineTo(i-a,l-r-.5*a):("fold"==s||"default"==s&&"fold"==o)&&(t.lineTo(i-r-a,l-r-a),t.lineTo(i-a,l-r-a))},It.prototype.paintBottomInner=function(t,e,n,i,l,o,s,r,a,h,u){h||u?!h&&u?t.lineTo(i,l-a):h&&!u?t.lineTo(i-a,l):t.lineTo("square"==s||"default"==s&&"square"==o||!h?i-a:"rounded"==s||"default"==s&&"rounded"==o||"snip"==s||"default"==s&&"snip"==o?i-r-.5*a:i-r-a,l-a):t.lineTo(i,l)},It.prototype.paintSWInner=function(t,e,n,i,l,o,s,r,a,h){h?"square"==s||"default"==s&&"square"==o?t.lineTo(a,l-a):"rounded"==s||"default"==s&&"rounded"==o?t.arcTo(r-.5*a,r-.5*a,0,0,0,r+.5*a,l-a):"invRound"==s||"default"==s&&"invRound"==o?t.arcTo(r+a,r+a,0,0,1,r+a,l-a):"snip"==s||"default"==s&&"snip"==o?t.lineTo(r+.5*a,l-a):("fold"==s||"default"==s&&"fold"==o)&&(t.lineTo(a+r,l-r-a),t.lineTo(a+r,l-a)):t.lineTo(a,l)},It.prototype.moveSWInner=function(t,e,n,i,l,o,s,r,a,h){h?"square"==s||"default"==s&&"square"==o?t.moveTo(a,l-a):"rounded"==s||"default"==s&&"rounded"==o||"snip"==s||"default"==s&&"snip"==o?t.moveTo(a,l-r-.5*a):("invRound"==s||"default"==s&&"invRound"==o||"fold"==s||"default"==s&&"fold"==o)&&t.moveTo(a,l-r-a):t.moveTo(0,l-a)},It.prototype.lineSWInner=function(t,e,n,i,l,o,s,r,a,h){h?"square"==s||"default"==s&&"square"==o?t.lineTo(a,l-a):"rounded"==s||"default"==s&&"rounded"==o||"snip"==s||"default"==s&&"snip"==o?t.lineTo(a,l-r-.5*a):("invRound"==s||"default"==s&&"invRound"==o||"fold"==s||"default"==s&&"fold"==o)&&t.lineTo(a,l-r-a):t.lineTo(0,l-a)},It.prototype.moveSEInner=function(t,e,n,i,l,o,s,r,a,h){h?"square"==s||"default"==s&&"square"==o?t.moveTo(i-a,l-a):"rounded"==s||"default"==s&&"rounded"==o||"snip"==s||"default"==s&&"snip"==o?t.moveTo(i-a,l-r-.5*a):("invRound"==s||"default"==s&&"invRound"==o||"fold"==s||"default"==s&&"fold"==o)&&t.moveTo(i-a,l-r-a):t.moveTo(i-a,l)},It.prototype.lineSEInner=function(t,e,n,i,l,o,s,r,a,h){h?"square"==s||"default"==s&&"square"==o?t.lineTo(i-a,l-a):"rounded"==s||"default"==s&&"rounded"==o||"snip"==s||"default"==s&&"snip"==o?t.lineTo(i-a,l-r-.5*a):("invRound"==s||"default"==s&&"invRound"==o||"fold"==s||"default"==s&&"fold"==o)&&t.lineTo(i-a,l-r-a):t.lineTo(i-a,l)},It.prototype.moveNEInner=function(t,e,n,i,l,o,s,r,a,h){h?"square"==s||"default"==s&&"square"==o||h?t.moveTo(i-a,a):"rounded"==s||"default"==s&&"rounded"==o||"snip"==s||"default"==s&&"snip"==o?t.moveTo(i-a,r+.5*a):("invRound"==s||"default"==s&&"invRound"==o||"fold"==s||"default"==s&&"fold"==o)&&t.moveTo(i-a,r+a):t.moveTo(i,a)},It.prototype.lineNEInner=function(t,e,n,i,l,o,s,r,a,h){h?"square"==s||"default"==s&&"square"==o||h?t.lineTo(i-a,a):"rounded"==s||"default"==s&&"rounded"==o||"snip"==s||"default"==s&&"snip"==o?t.lineTo(i-a,r+.5*a):("invRound"==s||"default"==s&&"invRound"==o||"fold"==s||"default"==s&&"fold"==o)&&t.lineTo(i-a,r+a):t.lineTo(i,a)},It.prototype.moveNWInner=function(t,e,n,i,l,o,s,r,a,h,u){h||u?!h&&u?t.moveTo(a,0):h&&!u?t.moveTo(0,a):"square"==s||"default"==s&&"square"==o?t.moveTo(a,a):"rounded"==s||"default"==s&&"rounded"==o||"snip"==s||"default"==s&&"snip"==o?t.moveTo(a,r+.5*a):("invRound"==s||"default"==s&&"invRound"==o||"fold"==s||"default"==s&&"fold"==o)&&t.moveTo(a,r+a):t.moveTo(0,0)},It.prototype.lineNWInner=function(t,e,n,i,l,o,s,r,a,h,u){h||u?!h&&u?t.lineTo(a,0):h&&!u?t.lineTo(0,a):"square"==s||"default"==s&&"square"==o?t.lineTo(a,a):"rounded"==s||"default"==s&&"rounded"==o||"snip"==s||"default"==s&&"snip"==o?t.lineTo(a,r+.5*a):("invRound"==s||"default"==s&&"invRound"==o||"fold"==s||"default"==s&&"fold"==o)&&t.lineTo(a,r+a):t.lineTo(0,0)},It.prototype.paintFolds=function(t,e,n,i,l,o,s,r,a,h,u,d,c,p,m){"fold"!=o&&"fold"!=s&&"fold"!=r&&"fold"!=a&&"fold"!=h||(("fold"==s||"default"==s&&"fold"==o)&&d&&m&&(t.moveTo(0,u),t.lineTo(u,u),t.lineTo(u,0)),("fold"==r||"default"==r&&"fold"==o)&&d&&c&&(t.moveTo(i-u,0),t.lineTo(i-u,u),t.lineTo(i,u)),("fold"==a||"default"==a&&"fold"==o)&&p&&c&&(t.moveTo(i-u,l),t.lineTo(i-u,l-u),t.lineTo(i,l-u)),("fold"==h||"default"==h&&"fold"==o)&&p&&m&&(t.moveTo(0,l-u),t.lineTo(u,l-u),t.lineTo(u,l)))},mxCellRenderer.registerShape(It.prototype.cst.RECT2,It),It.prototype.constraints=null,mxUtils.extend(Rt,mxConnector),Rt.prototype.origPaintEdgeShape=Rt.prototype.paintEdgeShape,Rt.prototype.paintEdgeShape=function(t,e,n){for(var i=[],l=0;l<e.length;l++)i.push(mxUtils.clone(e[l]));var o,s=t.state.dashed,r=t.state.fixDash;Rt.prototype.origPaintEdgeShape.apply(this,[t,i,n]),3<=t.state.strokeWidth&&null!=(o=mxUtils.getValue(this.style,"fillColor",null))&&(t.setStrokeColor(o),t.setStrokeWidth(t.state.strokeWidth-2),t.setDashed(s,r),Rt.prototype.origPaintEdgeShape.apply(this,[t,e,n]))},mxCellRenderer.registerShape("filledEdge",Rt),"undefined"!=typeof StyleFormatPanel&&(N=StyleFormatPanel.prototype.getCustomColors,StyleFormatPanel.prototype.getCustomColors=function(){var t=this.format.getSelectionState(),e=N.apply(this,arguments);return"umlFrame"==t.style.shape&&e.push({title:mxResources.get("laneColor"),key:"swimlaneFillColor",defaultValue:"#ffffff"}),e}),mxMarker.addMarker("dash",function(t,e,n,i,l,o,s,r,a,h){var u=l*(s+a+1),d=o*(s+a+1);return function(){t.begin(),t.moveTo(i.x-u/2-d/2,i.y-d/2+u/2),t.lineTo(i.x+d/2-3*u/2,i.y-3*d/2-u/2),t.stroke()}}),mxMarker.addMarker("box",function(t,e,n,i,l,o,s,r,a,h){var u=l*(s+a+1),d=o*(s+a+1),c=i.x+u/2,p=i.y+d/2;return i.x-=u,i.y-=d,function(){t.begin(),t.moveTo(c-u/2-d/2,p-d/2+u/2),t.lineTo(c-u/2+d/2,p-d/2-u/2),t.lineTo(c+d/2-3*u/2,p-3*d/2-u/2),t.lineTo(c-d/2-3*u/2,p-3*d/2+u/2),t.close(),h?t.fillAndStroke():t.stroke()}}),mxMarker.addMarker("cross",function(t,e,n,i,l,o,s,r,a,h){var u=l*(s+a+1),d=o*(s+a+1);return function(){t.begin(),t.moveTo(i.x-u/2-d/2,i.y-d/2+u/2),t.lineTo(i.x+d/2-3*u/2,i.y-3*d/2-u/2),t.moveTo(i.x-u/2+d/2,i.y-d/2-u/2),t.lineTo(i.x-d/2-3*u/2,i.y-3*d/2+u/2),t.stroke()}}),mxMarker.addMarker("circle",Ot),mxMarker.addMarker("circlePlus",function(t,e,n,i,l,o,s,r,a,h){var u=i.clone(),d=Ot.apply(this,arguments),c=l*(s+2*a),p=o*(s+2*a);return function(){d.apply(this,arguments),t.begin(),t.moveTo(u.x-l*a,u.y-o*a),t.lineTo(u.x-2*c+l*a,u.y-2*p+o*a),t.moveTo(u.x-c-p+o*a,u.y-p+c-l*a),t.lineTo(u.x+p-c-o*a,u.y-p-c+l*a),t.stroke()}}),mxMarker.addMarker("halfCircle",function(t,e,n,i,l,o,s,r,a,h){var u=l*(s+a+1),d=o*(s+a+1),c=i.clone();return i.x-=u,i.y-=d,function(){t.begin(),t.moveTo(c.x-d,c.y+u),t.quadTo(i.x-d,i.y+u,i.x,i.y),t.quadTo(i.x+d,i.y-u,c.x+d,c.y-u),t.stroke()}}),mxMarker.addMarker("async",function(t,e,n,i,l,o,s,r,a,h){var u=l*a*1.118,d=o*a*1.118;l*=s+a,o*=s+a;var c=i.clone();return c.x-=u,c.y-=d,i.x+=-l-u,i.y+=-o-d,function(){t.begin(),t.moveTo(c.x,c.y),r?t.lineTo(c.x-l-o/2,c.y-o+l/2):t.lineTo(c.x+o/2-l,c.y-o-l/2),t.lineTo(c.x-l,c.y-o),t.close(),h?t.fillAndStroke():t.stroke()}}),mxMarker.addMarker("openAsync",(k=null!=(k=2)?k:2,function(t,e,n,i,l,o,s,r,a,h){l*=s+a,o*=s+a;var u=i.clone();return function(){t.begin(),t.moveTo(u.x,u.y),r?t.lineTo(u.x-l-o/k,u.y-o+l/k):t.lineTo(u.x+o/k-l,u.y-o-l/k),t.stroke()}})),void 0!==mxVertexHandler?(H={link:function(t){return[Bt(t,!0,10),Bt(t,!1,10)]},flexArrow:function(t){var e=t.view.graph.gridSize/t.view.scale,n=[];return mxUtils.getValue(t.style,mxConstants.STYLE_STARTARROW,mxConstants.NONE)!=mxConstants.NONE&&(n.push(Vt(t,["width",mxConstants.STYLE_STARTSIZE,mxConstants.STYLE_ENDSIZE],!0,function(e,n,i,l,o){var s=(t.shape.getEdgeWidth()-t.shape.strokewidth)*t.view.scale,r=3*mxUtils.getNumber(t.style,mxConstants.STYLE_STARTSIZE,mxConstants.ARROW_SIZE/5)*t.view.scale;return new mxPoint(l.x+n*(r+t.shape.strokewidth*t.view.scale)+i*s/2,l.y+i*(r+t.shape.strokewidth*t.view.scale)-n*s/2)},function(n,i,l,o,s,r,a){s=Math.sqrt(mxUtils.ptSegDistSq(o.x,o.y,s.x,s.y,r.x,r.y)),r=mxUtils.ptLineDist(o.x,o.y,o.x+l,o.y-i,r.x,r.y),t.style[mxConstants.STYLE_STARTSIZE]=Math.round(100*(r-t.shape.strokewidth)/3)/100/t.view.scale,t.style.width=Math.round(2*s)/t.view.scale,mxEvent.isControlDown(a.getEvent())&&(t.style[mxConstants.STYLE_ENDSIZE]=t.style[mxConstants.STYLE_STARTSIZE]),mxEvent.isAltDown(a.getEvent())||Math.abs(parseFloat(t.style[mxConstants.STYLE_STARTSIZE])-parseFloat(t.style[mxConstants.STYLE_ENDSIZE]))<e/6&&(t.style[mxConstants.STYLE_STARTSIZE]=t.style[mxConstants.STYLE_ENDSIZE])})),n.push(Vt(t,["startWidth","endWidth",mxConstants.STYLE_STARTSIZE,mxConstants.STYLE_ENDSIZE],!0,function(e,n,i,l,o){var s=(t.shape.getStartArrowWidth()-t.shape.strokewidth)*t.view.scale,r=3*mxUtils.getNumber(t.style,mxConstants.STYLE_STARTSIZE,mxConstants.ARROW_SIZE/5)*t.view.scale;return new mxPoint(l.x+n*(r+t.shape.strokewidth*t.view.scale)+i*s/2,l.y+i*(r+t.shape.strokewidth*t.view.scale)-n*s/2)},function(n,i,l,o,s,r,a){s=Math.sqrt(mxUtils.ptSegDistSq(o.x,o.y,s.x,s.y,r.x,r.y)),r=mxUtils.ptLineDist(o.x,o.y,o.x+l,o.y-i,r.x,r.y),t.style[mxConstants.STYLE_STARTSIZE]=Math.round(100*(r-t.shape.strokewidth)/3)/100/t.view.scale,t.style.startWidth=Math.max(0,Math.round(2*s)-t.shape.getEdgeWidth())/t.view.scale,mxEvent.isControlDown(a.getEvent())&&(t.style[mxConstants.STYLE_ENDSIZE]=t.style[mxConstants.STYLE_STARTSIZE],t.style.endWidth=t.style.startWidth),mxEvent.isAltDown(a.getEvent())||(Math.abs(parseFloat(t.style[mxConstants.STYLE_STARTSIZE])-parseFloat(t.style[mxConstants.STYLE_ENDSIZE]))<e/6&&(t.style[mxConstants.STYLE_STARTSIZE]=t.style[mxConstants.STYLE_ENDSIZE]),Math.abs(parseFloat(t.style.startWidth)-parseFloat(t.style.endWidth))<e&&(t.style.startWidth=t.style.endWidth))}))),mxUtils.getValue(t.style,mxConstants.STYLE_ENDARROW,mxConstants.NONE)!=mxConstants.NONE&&(n.push(Vt(t,["width",mxConstants.STYLE_STARTSIZE,mxConstants.STYLE_ENDSIZE],!1,function(e,n,i,l,o){var s=(t.shape.getEdgeWidth()-t.shape.strokewidth)*t.view.scale,r=3*mxUtils.getNumber(t.style,mxConstants.STYLE_ENDSIZE,mxConstants.ARROW_SIZE/5)*t.view.scale;return new mxPoint(l.x+n*(r+t.shape.strokewidth*t.view.scale)-i*s/2,l.y+i*(r+t.shape.strokewidth*t.view.scale)+n*s/2)},function(n,i,l,o,s,r,a){s=Math.sqrt(mxUtils.ptSegDistSq(o.x,o.y,s.x,s.y,r.x,r.y)),r=mxUtils.ptLineDist(o.x,o.y,o.x+l,o.y-i,r.x,r.y),t.style[mxConstants.STYLE_ENDSIZE]=Math.round(100*(r-t.shape.strokewidth)/3)/100/t.view.scale,t.style.width=Math.round(2*s)/t.view.scale,mxEvent.isControlDown(a.getEvent())&&(t.style[mxConstants.STYLE_STARTSIZE]=t.style[mxConstants.STYLE_ENDSIZE]),mxEvent.isAltDown(a.getEvent())||Math.abs(parseFloat(t.style[mxConstants.STYLE_ENDSIZE])-parseFloat(t.style[mxConstants.STYLE_STARTSIZE]))<e/6&&(t.style[mxConstants.STYLE_ENDSIZE]=t.style[mxConstants.STYLE_STARTSIZE])})),n.push(Vt(t,["startWidth","endWidth",mxConstants.STYLE_STARTSIZE,mxConstants.STYLE_ENDSIZE],!1,function(e,n,i,l,o){var s=(t.shape.getEndArrowWidth()-t.shape.strokewidth)*t.view.scale,r=3*mxUtils.getNumber(t.style,mxConstants.STYLE_ENDSIZE,mxConstants.ARROW_SIZE/5)*t.view.scale;return new mxPoint(l.x+n*(r+t.shape.strokewidth*t.view.scale)-i*s/2,l.y+i*(r+t.shape.strokewidth*t.view.scale)+n*s/2)},function(n,i,l,o,s,r,a){s=Math.sqrt(mxUtils.ptSegDistSq(o.x,o.y,s.x,s.y,r.x,r.y)),r=mxUtils.ptLineDist(o.x,o.y,o.x+l,o.y-i,r.x,r.y),t.style[mxConstants.STYLE_ENDSIZE]=Math.round(100*(r-t.shape.strokewidth)/3)/100/t.view.scale,t.style.endWidth=Math.max(0,Math.round(2*s)-t.shape.getEdgeWidth())/t.view.scale,mxEvent.isControlDown(a.getEvent())&&(t.style[mxConstants.STYLE_STARTSIZE]=t.style[mxConstants.STYLE_ENDSIZE],t.style.startWidth=t.style.endWidth),mxEvent.isAltDown(a.getEvent())||(Math.abs(parseFloat(t.style[mxConstants.STYLE_ENDSIZE])-parseFloat(t.style[mxConstants.STYLE_STARTSIZE]))<e/6&&(t.style[mxConstants.STYLE_ENDSIZE]=t.style[mxConstants.STYLE_STARTSIZE]),Math.abs(parseFloat(t.style.endWidth)-parseFloat(t.style.startWidth))<e&&(t.style.endWidth=t.style.startWidth))}))),n},swimlane:function(t){var e,n=[];return mxUtils.getValue(t.style,mxConstants.STYLE_ROUNDED)&&(e=parseFloat(mxUtils.getValue(t.style,mxConstants.STYLE_STARTSIZE,mxConstants.DEFAULT_STARTSIZE)),n.push(Dt(t,e/2))),n.push(_t(t,[mxConstants.STYLE_STARTSIZE],function(e){var n=parseFloat(mxUtils.getValue(t.style,mxConstants.STYLE_STARTSIZE,mxConstants.DEFAULT_STARTSIZE));return 1==mxUtils.getValue(t.style,mxConstants.STYLE_HORIZONTAL,1)?new mxPoint(e.getCenterX(),e.y+Math.max(0,Math.min(e.height,n))):new mxPoint(e.x+Math.max(0,Math.min(e.width,n)),e.getCenterY())},function(e,n){t.style[mxConstants.STYLE_STARTSIZE]=1==mxUtils.getValue(this.state.style,mxConstants.STYLE_HORIZONTAL,1)?Math.round(Math.max(0,Math.min(e.height,n.y-e.y))):Math.round(Math.max(0,Math.min(e.width,n.x-e.x)))},!1,null,function(e){if(mxEvent.isControlDown(e.getEvent())){var n=t.view.graph;if(n.isTableRow(t.cell)||n.isTableCell(t.cell)){for(var i=n.getSwimlaneDirection(t.style),l=(e=n.model.getParent(t.cell),n.model.getChildCells(e,!0)),o=[],s=0;s<l.length;s++)l[s]!=t.cell&&n.isSwimlane(l[s])&&n.getSwimlaneDirection(n.getCurrentCellStyle(l[s]))==i&&o.push(l[s]);n.setCellStyles(mxConstants.STYLE_STARTSIZE,t.style[mxConstants.STYLE_STARTSIZE],o)}}})),n},label:Ut(),ext:Ut(),rectangle:Ut(),triangle:Ut(),rhombus:Ut(),umlLifeline:function(t){return[_t(t,["size"],function(t){var e=Math.max(0,Math.min(t.height,parseFloat(mxUtils.getValue(this.state.style,"size",X.prototype.size))));return new mxPoint(t.getCenterX(),t.y+e)},function(t,e){this.state.style.size=Math.round(Math.max(0,Math.min(t.height,e.y-t.y)))},!1)]},umlFrame:function(t){return[_t(t,["width","height"],function(t){var e=Math.max(Z.prototype.corner,Math.min(t.width,mxUtils.getValue(this.state.style,"width",Z.prototype.width))),n=Math.max(1.5*Z.prototype.corner,Math.min(t.height,mxUtils.getValue(this.state.style,"height",Z.prototype.height)));return new mxPoint(t.x+e,t.y+n)},function(t,e){this.state.style.width=Math.round(Math.max(Z.prototype.corner,Math.min(t.width,e.x-t.x))),this.state.style.height=Math.round(Math.max(1.5*Z.prototype.corner,Math.min(t.height,e.y-t.y)))},!1)]},process:function(t){var e=[_t(t,["size"],function(t){var e="0"!=mxUtils.getValue(this.state.style,"fixedSize","0"),n=parseFloat(mxUtils.getValue(this.state.style,"size",I.prototype.size));return new mxPoint(e?t.x+n:t.x+t.width*n,t.y+t.height/4)},function(t,e){t="0"!=mxUtils.getValue(this.state.style,"fixedSize","0")?Math.max(0,Math.min(.5*t.width,e.x-t.x)):Math.max(0,Math.min(.5,(e.x-t.x)/t.width)),this.state.style.size=t},!1)];return mxUtils.getValue(t.style,mxConstants.STYLE_ROUNDED,!1)&&e.push(Dt(t)),e},cross:function(t){return[_t(t,["size"],function(t){var e=Math.min(t.width,t.height);return e=Math.max(0,Math.min(1,mxUtils.getValue(this.state.style,"size",Lt.prototype.size)))*e/2,new mxPoint(t.getCenterX()-e,t.getCenterY()-e)},function(t,e){var n=Math.min(t.width,t.height);this.state.style.size=Math.max(0,Math.min(1,Math.min(Math.max(0,t.getCenterY()-e.y)/n*2,Math.max(0,t.getCenterX()-e.x)/n*2)))})]},note:function(t){return[_t(t,["size"],function(t){var e=Math.max(0,Math.min(t.width,Math.min(t.height,parseFloat(mxUtils.getValue(this.state.style,"size",h.prototype.size)))));return new mxPoint(t.x+t.width-e,t.y+e)},function(t,e){this.state.style.size=Math.round(Math.max(0,Math.min(Math.min(t.width,t.x+t.width-e.x),Math.min(t.height,e.y-t.y))))})]},note2:function(t){return[_t(t,["size"],function(t){var e=Math.max(0,Math.min(t.width,Math.min(t.height,parseFloat(mxUtils.getValue(this.state.style,"size",u.prototype.size)))));return new mxPoint(t.x+t.width-e,t.y+e)},function(t,e){this.state.style.size=Math.round(Math.max(0,Math.min(Math.min(t.width,t.x+t.width-e.x),Math.min(t.height,e.y-t.y))))})]},manualInput:function(t){var e=[_t(t,["size"],function(t){var e=Math.max(0,Math.min(t.height,mxUtils.getValue(this.state.style,"size",rt.prototype.size)));return new mxPoint(t.x+t.width/4,t.y+3*e/4)},function(t,e){this.state.style.size=Math.round(Math.max(0,Math.min(t.height,4*(e.y-t.y)/3)))},!1)];return mxUtils.getValue(t.style,mxConstants.STYLE_ROUNDED,!1)&&e.push(Dt(t)),e},dataStorage:function(t){return[_t(t,["size"],function(t){var e="0"!=mxUtils.getValue(this.state.style,"fixedSize","0"),n=parseFloat(mxUtils.getValue(this.state.style,"size",e?mt.prototype.fixedSize:mt.prototype.size));return new mxPoint(t.x+t.width-n*(e?1:t.width),t.getCenterY())},function(t,e){t="0"!=mxUtils.getValue(this.state.style,"fixedSize","0")?Math.max(0,Math.min(t.width,t.x+t.width-e.x)):Math.max(0,Math.min(1,(t.x+t.width-e.x)/t.width)),this.state.style.size=t},!1)]},callout:function(t){var e=[_t(t,["size","position"],function(t){var e=Math.max(0,Math.min(t.height,mxUtils.getValue(this.state.style,"size",O.prototype.size))),n=Math.max(0,Math.min(1,mxUtils.getValue(this.state.style,"position",O.prototype.position)));return Math.max(0,Math.min(t.width,mxUtils.getValue(this.state.style,"base",O.prototype.base))),new mxPoint(t.x+n*t.width,t.y+t.height-e)},function(t,e){Math.max(0,Math.min(t.width,mxUtils.getValue(this.state.style,"base",O.prototype.base))),this.state.style.size=Math.round(Math.max(0,Math.min(t.height,t.y+t.height-e.y))),this.state.style.position=Math.round(100*Math.max(0,Math.min(1,(e.x-t.x)/t.width)))/100},!1),_t(t,["position2"],function(t){var e=Math.max(0,Math.min(1,mxUtils.getValue(this.state.style,"position2",O.prototype.position2)));return new mxPoint(t.x+e*t.width,t.y+t.height)},function(t,e){this.state.style.position2=Math.round(100*Math.max(0,Math.min(1,(e.x-t.x)/t.width)))/100},!1),_t(t,["base"],function(t){var e=Math.max(0,Math.min(t.height,mxUtils.getValue(this.state.style,"size",O.prototype.size))),n=Math.max(0,Math.min(1,mxUtils.getValue(this.state.style,"position",O.prototype.position))),i=Math.max(0,Math.min(t.width,mxUtils.getValue(this.state.style,"base",O.prototype.base)));return new mxPoint(t.x+Math.min(t.width,n*t.width+i),t.y+t.height-e)},function(t,e){var n=Math.max(0,Math.min(1,mxUtils.getValue(this.state.style,"position",O.prototype.position)));this.state.style.base=Math.round(Math.max(0,Math.min(t.width,e.x-t.x-n*t.width)))},!1)];return mxUtils.getValue(t.style,mxConstants.STYLE_ROUNDED,!1)&&e.push(Dt(t)),e},internalStorage:function(t){var e=[_t(t,["dx","dy"],function(t){var e=Math.max(0,Math.min(t.width,mxUtils.getValue(this.state.style,"dx",at.prototype.dx))),n=Math.max(0,Math.min(t.height,mxUtils.getValue(this.state.style,"dy",at.prototype.dy)));return new mxPoint(t.x+e,t.y+n)},function(t,e){this.state.style.dx=Math.round(Math.max(0,Math.min(t.width,e.x-t.x))),this.state.style.dy=Math.round(Math.max(0,Math.min(t.height,e.y-t.y)))},!1)];return mxUtils.getValue(t.style,mxConstants.STYLE_ROUNDED,!1)&&e.push(Dt(t)),e},module:function(t){return[_t(t,["jettyWidth","jettyHeight"],function(t){var e=Math.max(0,Math.min(t.width,mxUtils.getValue(this.state.style,"jettyWidth",tt.prototype.jettyWidth))),n=Math.max(0,Math.min(t.height,mxUtils.getValue(this.state.style,"jettyHeight",tt.prototype.jettyHeight)));return new mxPoint(t.x+e/2,t.y+2*n)},function(t,e){this.state.style.jettyWidth=Math.round(2*Math.max(0,Math.min(t.width,e.x-t.x))),this.state.style.jettyHeight=Math.round(Math.max(0,Math.min(t.height,e.y-t.y))/2)})]},corner:function(t){return[_t(t,["dx","dy"],function(t){var e=Math.max(0,Math.min(t.width,mxUtils.getValue(this.state.style,"dx",ht.prototype.dx))),n=Math.max(0,Math.min(t.height,mxUtils.getValue(this.state.style,"dy",ht.prototype.dy)));return new mxPoint(t.x+e,t.y+n)},function(t,e){this.state.style.dx=Math.round(Math.max(0,Math.min(t.width,e.x-t.x))),this.state.style.dy=Math.round(Math.max(0,Math.min(t.height,e.y-t.y)))},!1)]},tee:function(t){return[_t(t,["dx","dy"],function(t){var e=Math.max(0,Math.min(t.width,mxUtils.getValue(this.state.style,"dx",dt.prototype.dx))),n=Math.max(0,Math.min(t.height,mxUtils.getValue(this.state.style,"dy",dt.prototype.dy)));return new mxPoint(t.x+(t.width+e)/2,t.y+n)},function(t,e){this.state.style.dx=Math.round(Math.max(0,2*Math.min(t.width/2,e.x-t.x-t.width/2))),this.state.style.dy=Math.round(Math.max(0,Math.min(t.height,e.y-t.y)))},!1)]},singleArrow:Ft(1),doubleArrow:Ft(.5),folder:function(t){return[_t(t,["tabWidth","tabHeight"],function(t){var e=Math.max(0,Math.min(t.width,mxUtils.getValue(this.state.style,"tabWidth",g.prototype.tabWidth))),n=Math.max(0,Math.min(t.height,mxUtils.getValue(this.state.style,"tabHeight",g.prototype.tabHeight)));return mxUtils.getValue(this.state.style,"tabPosition",g.prototype.tabPosition)==mxConstants.ALIGN_RIGHT&&(e=t.width-e),new mxPoint(t.x+e,t.y+n)},function(t,e){var n=Math.max(0,Math.min(t.width,e.x-t.x));mxUtils.getValue(this.state.style,"tabPosition",g.prototype.tabPosition)==mxConstants.ALIGN_RIGHT&&(n=t.width-n),this.state.style.tabWidth=Math.round(n),this.state.style.tabHeight=Math.round(Math.max(0,Math.min(t.height,e.y-t.y)))},!1)]},document:function(t){return[_t(t,["size"],function(t){var e=Math.max(0,Math.min(1,parseFloat(mxUtils.getValue(this.state.style,"size",v.prototype.size))));return new mxPoint(t.x+3*t.width/4,t.y+(1-e)*t.height)},function(t,e){this.state.style.size=Math.max(0,Math.min(1,(t.y+t.height-e.y)/t.height))},!1)]},tape:function(t){return[_t(t,["size"],function(t){var e=Math.max(0,Math.min(1,parseFloat(mxUtils.getValue(this.state.style,"size",f.prototype.size))));return new mxPoint(t.getCenterX(),t.y+e*t.height/2)},function(t,e){this.state.style.size=Math.max(0,Math.min(1,(e.y-t.y)/t.height*2))},!1)]},isoCube2:function(t){return[_t(t,["isoAngle"],function(t){var e=Math.max(.01,Math.min(94,parseFloat(mxUtils.getValue(this.state.style,"isoAngle",d.isoAngle))))*Math.PI/200;return e=Math.min(t.width*Math.tan(e),.5*t.height),new mxPoint(t.x,t.y+e)},function(t,e){this.state.style.isoAngle=Math.max(0,50*(e.y-t.y)/t.height)},!0)]},cylinder2:Gt(c.prototype.size),cylinder3:Gt(p.prototype.size),offPageConnector:function(t){return[_t(t,["size"],function(t){var e=Math.max(0,Math.min(1,parseFloat(mxUtils.getValue(this.state.style,"size",ft.prototype.size))));return new mxPoint(t.getCenterX(),t.y+(1-e)*t.height)},function(t,e){this.state.style.size=Math.max(0,Math.min(1,(t.y+t.height-e.y)/t.height))},!1)]},"mxgraph.basic.rect":function(t){var e=[Graph.createHandle(t,["size"],function(t){var e=Math.max(0,Math.min(t.width/2,t.height/2,parseFloat(mxUtils.getValue(this.state.style,"size",this.size))));return new mxPoint(t.x+e,t.y+e)},function(t,e){this.state.style.size=Math.round(100*Math.max(0,Math.min(t.height/2,t.width/2,e.x-t.x)))/100})];return t=Graph.createHandle(t,["indent"],function(t){var e=Math.max(0,Math.min(100,parseFloat(mxUtils.getValue(this.state.style,"indent",this.dx2))));return new mxPoint(t.x+.75*t.width,t.y+e*t.height/200)},function(t,e){this.state.style.indent=Math.round(100*Math.max(0,Math.min(100,200*(e.y-t.y)/t.height)))/100}),e.push(t),e},step:kt(_.prototype.size,!0,null,!0,_.prototype.fixedSize),hexagon:kt(D.prototype.size,!0,.5,!0,D.prototype.fixedSize),curlyBracket:kt(S.prototype.size,!1),display:kt(Pt.prototype.size,!1),cube:Ht(1,e.prototype.size,!1),card:Ht(.5,y.prototype.size,!0),loopLimit:Ht(.5,yt.prototype.size,!0),trapezoid:Nt(.5,E.prototype.size,E.prototype.fixedSize),parallelogram:Nt(1,C.prototype.size,C.prototype.fixedSize)},Graph.createHandle=_t,Graph.handleFactory=H,G=mxVertexHandler.prototype.createCustomHandles,mxVertexHandler.prototype.createCustomHandles=function(){var t,e=G.apply(this,arguments);return this.graph.isCellRotatable(this.state.cell)&&(null==mxCellRenderer.defaultShapes[t=this.state.style.shape]&&null==mxStencilRegistry.getStencil(t)?t=mxConstants.SHAPE_RECTANGLE:this.state.view.graph.isSwimlane(this.state.cell)&&(t=mxConstants.SHAPE_SWIMLANE),null==(t=null==(t=H[t])&&null!=this.state.shape&&this.state.shape.isRoundable()?H[mxConstants.SHAPE_RECTANGLE]:t)||null!=(t=t(this.state))&&(e=null==e?t:e.concat(t))),e},mxEdgeHandler.prototype.createCustomHandles=function(){var t=this.state.style.shape;return null==mxCellRenderer.defaultShapes[t]&&null==mxStencilRegistry.getStencil(t)&&(t=mxConstants.SHAPE_CONNECTOR),null!=(t=H[t])?t(this.state):null}):(Graph.createHandle=function(){},Graph.handleFactory={});var zt=new mxPoint(1,0),Yt=new mxPoint(1,0),jt=mxUtils.toRadians(-30),Wt=Math.cos(jt);jt=Math.sin(jt),zt=mxUtils.getRotatedPoint(zt,Wt,jt),Wt=mxUtils.toRadians(-150),jt=Math.cos(Wt),Wt=Math.sin(Wt),Yt=mxUtils.getRotatedPoint(Yt,jt,Wt),mxEdgeStyle.IsometricConnector=function(t,e,n,i,l){var o=null!=i&&0<i.length?i[0]:null,s=(i=(s=t.absolutePoints)[0],s[s.length-1]);null!=o&&(o=t.view.transformControlPoint(t,o)),null==i&&null!=e&&(i=new mxPoint(e.getCenterX(),e.getCenterY())),null==s&&null!=n&&(s=new mxPoint(n.getCenterX(),n.getCenterY()));var r,a=zt.x,h=zt.y,u=Yt.x,d=Yt.y,c="horizontal"==mxUtils.getValue(t.style,"elbow","horizontal");function p(t,e,n){var i=t-r.x;e=(d*i-u*(t=e-r.y))/(a*d-h*u),t=(h*i-a*t)/(h*u-a*d),r=c?(n&&(r=new mxPoint(r.x+a*e,r.y+h*e),l.push(r)),new mxPoint(r.x+u*t,r.y+d*t)):(n&&(r=new mxPoint(r.x+u*t,r.y+d*t),l.push(r)),new mxPoint(r.x+a*e,r.y+h*e)),l.push(r)}null!=s&&null!=i&&(r=i,p((o=null==o?new mxPoint(i.x+(s.x-i.x)/2,i.y+(s.y-i.y)/2):o).x,o.y,!0),p(s.x,s.y,!1))},mxStyleRegistry.putValue("isometricEdgeStyle",mxEdgeStyle.IsometricConnector);var qt=Graph.prototype.createEdgeHandler;Graph.prototype.createEdgeHandler=function(t,e){if(e!=mxEdgeStyle.IsometricConnector)return qt.apply(this,arguments);var n=new mxElbowEdgeHandler(t);return n.snapToTerminals=!1,n},o.prototype.constraints=[],r.prototype.getConstraints=function(t,e,n){var i,l=[],o=(.5-(i=Math.tan(mxUtils.toRadians(30))))/2;return e=(e-(i=Math.min(e,n/(.5+i))))/2,n=(n-i)/2,l.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,e,n+.25*i)),l.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,e+.5*i,n+i*o)),l.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,e+i,n+.25*i)),l.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,e+i,n+.75*i)),l.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,e+.5*i,n+(1-o)*i)),l.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,e,n+.75*i)),l},d.prototype.getConstraints=function(t,e,n){var i=[],l=Math.max(.01,Math.min(94,parseFloat(mxUtils.getValue(this.style,"isoAngle",this.isoAngle))))*Math.PI/200;return l=Math.min(e*Math.tan(l),.5*n),i.push(new mxConnectionConstraint(new mxPoint(.5,0),!1)),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,e,l)),i.push(new mxConnectionConstraint(new mxPoint(1,.5),!1)),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,e,n-l)),i.push(new mxConnectionConstraint(new mxPoint(.5,1),!1)),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,0,n-l)),i.push(new mxConnectionConstraint(new mxPoint(0,.5),!1)),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,0,l)),i},O.prototype.getConstraints=function(t,e,n){var i=[],l=(mxUtils.getValue(this.style,mxConstants.STYLE_ARCSIZE,mxConstants.LINE_ARCSIZE),Math.max(0,Math.min(n,parseFloat(mxUtils.getValue(this.style,"size",this.size))))),o=(Math.max(0,Math.min(1,parseFloat(mxUtils.getValue(this.style,"position",this.position)))),e*Math.max(0,Math.min(1,parseFloat(mxUtils.getValue(this.style,"position2",this.position2)))));return Math.max(0,Math.min(e,parseFloat(mxUtils.getValue(this.style,"base",this.base)))),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1)),i.push(new mxConnectionConstraint(new mxPoint(.25,0),!1)),i.push(new mxConnectionConstraint(new mxPoint(.5,0),!1)),i.push(new mxConnectionConstraint(new mxPoint(.75,0),!1)),i.push(new mxConnectionConstraint(new mxPoint(1,0),!1)),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,e,.5*(n-l))),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,e,n-l)),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,o,n)),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,0,n-l)),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,0,.5*(n-l))),2*l<=e&&i.push(new mxConnectionConstraint(new mxPoint(.5,0),!1)),i},mxRectangleShape.prototype.constraints=[new mxConnectionConstraint(new mxPoint(0,0),!0),new mxConnectionConstraint(new mxPoint(.25,0),!0),new mxConnectionConstraint(new mxPoint(.5,0),!0),new mxConnectionConstraint(new mxPoint(.75,0),!0),new mxConnectionConstraint(new mxPoint(1,0),!0),new mxConnectionConstraint(new mxPoint(0,.25),!0),new mxConnectionConstraint(new mxPoint(0,.5),!0),new mxConnectionConstraint(new mxPoint(0,.75),!0),new mxConnectionConstraint(new mxPoint(1,.25),!0),new mxConnectionConstraint(new mxPoint(1,.5),!0),new mxConnectionConstraint(new mxPoint(1,.75),!0),new mxConnectionConstraint(new mxPoint(0,1),!0),new mxConnectionConstraint(new mxPoint(.25,1),!0),new mxConnectionConstraint(new mxPoint(.5,1),!0),new mxConnectionConstraint(new mxPoint(.75,1),!0),new mxConnectionConstraint(new mxPoint(1,1),!0)],mxEllipse.prototype.constraints=[new mxConnectionConstraint(new mxPoint(0,0),!0),new mxConnectionConstraint(new mxPoint(1,0),!0),new mxConnectionConstraint(new mxPoint(0,1),!0),new mxConnectionConstraint(new mxPoint(1,1),!0),new mxConnectionConstraint(new mxPoint(.5,0),!0),new mxConnectionConstraint(new mxPoint(.5,1),!0),new mxConnectionConstraint(new mxPoint(0,.5),!0),new mxConnectionConstraint(new mxPoint(1,.5))],Tt.prototype.constraints=mxRectangleShape.prototype.constraints,mxImageShape.prototype.constraints=mxRectangleShape.prototype.constraints,mxSwimlane.prototype.constraints=mxRectangleShape.prototype.constraints,U.prototype.constraints=mxRectangleShape.prototype.constraints,mxLabel.prototype.constraints=mxRectangleShape.prototype.constraints,h.prototype.getConstraints=function(t,e,n){var i=[],l=Math.max(0,Math.min(e,Math.min(n,parseFloat(mxUtils.getValue(this.style,"size",this.size)))));return i.push(new mxConnectionConstraint(new mxPoint(0,0),!1)),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,.5*(e-l),0)),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,e-l,0)),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,e-.5*l,.5*l)),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,e,l)),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,e,.5*(n+l))),i.push(new mxConnectionConstraint(new mxPoint(1,1),!1)),i.push(new mxConnectionConstraint(new mxPoint(.5,1),!1)),i.push(new mxConnectionConstraint(new mxPoint(0,1),!1)),i.push(new mxConnectionConstraint(new mxPoint(0,.5),!1)),2*l<=e&&i.push(new mxConnectionConstraint(new mxPoint(.5,0),!1)),i},y.prototype.getConstraints=function(t,e,n){var i=[],l=Math.max(0,Math.min(e,Math.min(n,parseFloat(mxUtils.getValue(this.style,"size",this.size)))));return i.push(new mxConnectionConstraint(new mxPoint(1,0),!1)),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,.5*(e+l),0)),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,l,0)),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,.5*l,.5*l)),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,0,l)),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,0,.5*(n+l))),i.push(new mxConnectionConstraint(new mxPoint(0,1),!1)),i.push(new mxConnectionConstraint(new mxPoint(.5,1),!1)),i.push(new mxConnectionConstraint(new mxPoint(1,1),!1)),i.push(new mxConnectionConstraint(new mxPoint(1,.5),!1)),2*l<=e&&i.push(new mxConnectionConstraint(new mxPoint(.5,0),!1)),i},e.prototype.getConstraints=function(t,e,n){var i=[],l=Math.max(0,Math.min(e,Math.min(n,parseFloat(mxUtils.getValue(this.style,"size",this.size)))));return i.push(new mxConnectionConstraint(new mxPoint(0,0),!1)),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,.5*(e-l),0)),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,e-l,0)),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,e-.5*l,.5*l)),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,e,l)),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,e,.5*(n+l))),i.push(new mxConnectionConstraint(new mxPoint(1,1),!1)),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,.5*(e+l),n)),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,l,n)),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,.5*l,n-.5*l)),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,0,n-l)),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,0,.5*(n-l))),i},p.prototype.getConstraints=function(t,e,n){var i=[],l=Math.max(0,Math.min(n,parseFloat(mxUtils.getValue(this.style,"size",this.size))));return i.push(new mxConnectionConstraint(new mxPoint(.5,0),!1)),i.push(new mxConnectionConstraint(new mxPoint(0,.5),!1)),i.push(new mxConnectionConstraint(new mxPoint(.5,1),!1)),i.push(new mxConnectionConstraint(new mxPoint(1,.5),!1)),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,0,l)),i.push(new mxConnectionConstraint(new mxPoint(1,0),!1,null,0,l)),i.push(new mxConnectionConstraint(new mxPoint(1,1),!1,null,0,-l)),i.push(new mxConnectionConstraint(new mxPoint(0,1),!1,null,0,-l)),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,0,l+.5*(.5*n-l))),i.push(new mxConnectionConstraint(new mxPoint(1,0),!1,null,0,l+.5*(.5*n-l))),i.push(new mxConnectionConstraint(new mxPoint(1,0),!1,null,0,n-l-.5*(.5*n-l))),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,0,n-l-.5*(.5*n-l))),i.push(new mxConnectionConstraint(new mxPoint(.145,0),!1,null,0,.29*l)),i.push(new mxConnectionConstraint(new mxPoint(.855,0),!1,null,0,.29*l)),i.push(new mxConnectionConstraint(new mxPoint(.855,1),!1,null,0,.29*-l)),i.push(new mxConnectionConstraint(new mxPoint(.145,1),!1,null,0,.29*-l)),i},g.prototype.getConstraints=function(t,e,n){var i=[],l=Math.max(0,Math.min(e,parseFloat(mxUtils.getValue(this.style,"tabWidth",this.tabWidth)))),o=Math.max(0,Math.min(n,parseFloat(mxUtils.getValue(this.style,"tabHeight",this.tabHeight))));return"left"==mxUtils.getValue(this.style,"tabPosition",this.tabPosition)?(i.push(new mxConnectionConstraint(new mxPoint(0,0),!1)),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,.5*l,0)),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,l,0)),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,l,o)),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,.5*(e+l),o))):(i.push(new mxConnectionConstraint(new mxPoint(1,0),!1)),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,e-.5*l,0)),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,e-l,0)),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,e-l,o)),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,.5*(e-l),o))),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,e,o)),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,e,.25*(n-o)+o)),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,e,.5*(n-o)+o)),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,e,.75*(n-o)+o)),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,e,n)),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,0,o)),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,0,.25*(n-o)+o)),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,0,.5*(n-o)+o)),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,0,.75*(n-o)+o)),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,0,n)),i.push(new mxConnectionConstraint(new mxPoint(.25,1),!1)),i.push(new mxConnectionConstraint(new mxPoint(.5,1),!1)),i.push(new mxConnectionConstraint(new mxPoint(.75,1),!1)),i},at.prototype.constraints=mxRectangleShape.prototype.constraints,mt.prototype.constraints=mxRectangleShape.prototype.constraints,vt.prototype.constraints=mxEllipse.prototype.constraints,bt.prototype.constraints=mxEllipse.prototype.constraints,Ct.prototype.constraints=mxEllipse.prototype.constraints,At.prototype.constraints=mxEllipse.prototype.constraints,rt.prototype.constraints=mxRectangleShape.prototype.constraints,Mt.prototype.constraints=mxRectangleShape.prototype.constraints,Pt.prototype.getConstraints=function(t,e,n){var i=[],l=Math.min(e,n/2),o=Math.min(e-l,Math.max(0,parseFloat(mxUtils.getValue(this.style,"size",this.size)))*e);return i.push(new mxConnectionConstraint(new mxPoint(0,.5),!1,null)),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,o,0)),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,.5*(o+e-l),0)),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,e-l,0)),i.push(new mxConnectionConstraint(new mxPoint(1,.5),!1,null)),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,e-l,n)),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,.5*(o+e-l),n)),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,o,n)),i},tt.prototype.getConstraints=function(t,e,n){var i=parseFloat(mxUtils.getValue(t,"jettyWidth",tt.prototype.jettyWidth))/2,l=parseFloat(mxUtils.getValue(t,"jettyHeight",tt.prototype.jettyHeight));return t=[new mxConnectionConstraint(new mxPoint(0,0),!1,null,i),new mxConnectionConstraint(new mxPoint(.25,0),!0),new mxConnectionConstraint(new mxPoint(.5,0),!0),new mxConnectionConstraint(new mxPoint(.75,0),!0),new mxConnectionConstraint(new mxPoint(1,0),!0),new mxConnectionConstraint(new mxPoint(1,.25),!0),new mxConnectionConstraint(new mxPoint(1,.5),!0),new mxConnectionConstraint(new mxPoint(1,.75),!0),new mxConnectionConstraint(new mxPoint(0,1),!1,null,i),new mxConnectionConstraint(new mxPoint(.25,1),!0),new mxConnectionConstraint(new mxPoint(.5,1),!0),new mxConnectionConstraint(new mxPoint(.75,1),!0),new mxConnectionConstraint(new mxPoint(1,1),!0),new mxConnectionConstraint(new mxPoint(0,0),!1,null,0,Math.min(n-.5*l,1.5*l)),new mxConnectionConstraint(new mxPoint(0,0),!1,null,0,Math.min(n-.5*l,3.5*l))],5*l<n&&t.push(new mxConnectionConstraint(new mxPoint(0,.75),!1,null,i)),8*l<n&&t.push(new mxConnectionConstraint(new mxPoint(0,.5),!1,null,i)),15*l<n&&t.push(new mxConnectionConstraint(new mxPoint(0,.25),!1,null,i)),t},yt.prototype.constraints=mxRectangleShape.prototype.constraints,ft.prototype.constraints=mxRectangleShape.prototype.constraints,mxCylinder.prototype.constraints=[new mxConnectionConstraint(new mxPoint(.15,.05),!1),new mxConnectionConstraint(new mxPoint(.5,0),!0),new mxConnectionConstraint(new mxPoint(.85,.05),!1),new mxConnectionConstraint(new mxPoint(0,.3),!0),new mxConnectionConstraint(new mxPoint(0,.5),!0),new mxConnectionConstraint(new mxPoint(0,.7),!0),new mxConnectionConstraint(new mxPoint(1,.3),!0),new mxConnectionConstraint(new mxPoint(1,.5),!0),new mxConnectionConstraint(new mxPoint(1,.7),!0),new mxConnectionConstraint(new mxPoint(.15,.95),!1),new mxConnectionConstraint(new mxPoint(.5,1),!0),new mxConnectionConstraint(new mxPoint(.85,.95),!1)],z.prototype.constraints=[new mxConnectionConstraint(new mxPoint(.25,.1),!1),new mxConnectionConstraint(new mxPoint(.5,0),!1),new mxConnectionConstraint(new mxPoint(.75,.1),!1),new mxConnectionConstraint(new mxPoint(0,1/3),!1),new mxConnectionConstraint(new mxPoint(0,1),!1),new mxConnectionConstraint(new mxPoint(1,1/3),!1),new mxConnectionConstraint(new mxPoint(1,1),!1),new mxConnectionConstraint(new mxPoint(.5,.5),!1)],et.prototype.constraints=[new mxConnectionConstraint(new mxPoint(.25,0),!0),new mxConnectionConstraint(new mxPoint(.5,0),!0),new mxConnectionConstraint(new mxPoint(.75,0),!0),new mxConnectionConstraint(new mxPoint(0,.3),!0),new mxConnectionConstraint(new mxPoint(0,.7),!0),new mxConnectionConstraint(new mxPoint(1,.25),!0),new mxConnectionConstraint(new mxPoint(1,.5),!0),new mxConnectionConstraint(new mxPoint(1,.75),!0),new mxConnectionConstraint(new mxPoint(.25,1),!0),new mxConnectionConstraint(new mxPoint(.5,1),!0),new mxConnectionConstraint(new mxPoint(.75,1),!0)],mxActor.prototype.constraints=[new mxConnectionConstraint(new mxPoint(.5,0),!0),new mxConnectionConstraint(new mxPoint(.25,.2),!1),new mxConnectionConstraint(new mxPoint(.1,.5),!1),new mxConnectionConstraint(new mxPoint(0,.75),!0),new mxConnectionConstraint(new mxPoint(.75,.25),!1),new mxConnectionConstraint(new mxPoint(.9,.5),!1),new mxConnectionConstraint(new mxPoint(1,.75),!0),new mxConnectionConstraint(new mxPoint(.25,1),!0),new mxConnectionConstraint(new mxPoint(.5,1),!0),new mxConnectionConstraint(new mxPoint(.75,1),!0)],m.prototype.constraints=[new mxConnectionConstraint(new mxPoint(0,0),!1),new mxConnectionConstraint(new mxPoint(.5,.25),!1),new mxConnectionConstraint(new mxPoint(1,0),!1),new mxConnectionConstraint(new mxPoint(.25,.5),!1),new mxConnectionConstraint(new mxPoint(.75,.5),!1),new mxConnectionConstraint(new mxPoint(0,1),!1),new mxConnectionConstraint(new mxPoint(.5,.75),!1),new mxConnectionConstraint(new mxPoint(1,1),!1)],f.prototype.constraints=[new mxConnectionConstraint(new mxPoint(0,.35),!1),new mxConnectionConstraint(new mxPoint(0,.5),!1),new mxConnectionConstraint(new mxPoint(0,.65),!1),new mxConnectionConstraint(new mxPoint(1,.35),!1),new mxConnectionConstraint(new mxPoint(1,.5),!1),new mxConnectionConstraint(new mxPoint(1,.65),!1),new mxConnectionConstraint(new mxPoint(.25,1),!1),new mxConnectionConstraint(new mxPoint(.75,0),!1)],_.prototype.constraints=[new mxConnectionConstraint(new mxPoint(.25,0),!0),new mxConnectionConstraint(new mxPoint(.5,0),!0),new mxConnectionConstraint(new mxPoint(.75,0),!0),new mxConnectionConstraint(new mxPoint(.25,1),!0),new mxConnectionConstraint(new mxPoint(.5,1),!0),new mxConnectionConstraint(new mxPoint(.75,1),!0),new mxConnectionConstraint(new mxPoint(0,.25),!0),new mxConnectionConstraint(new mxPoint(0,.5),!0),new mxConnectionConstraint(new mxPoint(0,.75),!0),new mxConnectionConstraint(new mxPoint(1,.25),!0),new mxConnectionConstraint(new mxPoint(1,.5),!0),new mxConnectionConstraint(new mxPoint(1,.75),!0)],mxLine.prototype.constraints=[new mxConnectionConstraint(new mxPoint(0,.5),!1),new mxConnectionConstraint(new mxPoint(.25,.5),!1),new mxConnectionConstraint(new mxPoint(.75,.5),!1),new mxConnectionConstraint(new mxPoint(1,.5),!1)],K.prototype.constraints=[new mxConnectionConstraint(new mxPoint(.5,0),!1),new mxConnectionConstraint(new mxPoint(.5,1),!1)],mxDoubleEllipse.prototype.constraints=mxEllipse.prototype.constraints,mxRhombus.prototype.constraints=mxEllipse.prototype.constraints,mxTriangle.prototype.constraints=[new mxConnectionConstraint(new mxPoint(0,.25),!0),new mxConnectionConstraint(new mxPoint(0,.5),!0),new mxConnectionConstraint(new mxPoint(0,.75),!0),new mxConnectionConstraint(new mxPoint(.5,0),!0),new mxConnectionConstraint(new mxPoint(.5,1),!0),new mxConnectionConstraint(new mxPoint(1,.5),!0)],mxHexagon.prototype.constraints=[new mxConnectionConstraint(new mxPoint(.375,0),!0),new mxConnectionConstraint(new mxPoint(.5,0),!0),new mxConnectionConstraint(new mxPoint(.625,0),!0),new mxConnectionConstraint(new mxPoint(0,.25),!0),new mxConnectionConstraint(new mxPoint(0,.5),!0),new mxConnectionConstraint(new mxPoint(0,.75),!0),new mxConnectionConstraint(new mxPoint(1,.25),!0),new mxConnectionConstraint(new mxPoint(1,.5),!0),new mxConnectionConstraint(new mxPoint(1,.75),!0),new mxConnectionConstraint(new mxPoint(.375,1),!0),new mxConnectionConstraint(new mxPoint(.5,1),!0),new mxConnectionConstraint(new mxPoint(.625,1),!0)],mxCloud.prototype.constraints=[new mxConnectionConstraint(new mxPoint(.25,.25),!1),new mxConnectionConstraint(new mxPoint(.4,.1),!1),new mxConnectionConstraint(new mxPoint(.16,.55),!1),new mxConnectionConstraint(new mxPoint(.07,.4),!1),new mxConnectionConstraint(new mxPoint(.31,.8),!1),new mxConnectionConstraint(new mxPoint(.13,.77),!1),new mxConnectionConstraint(new mxPoint(.8,.8),!1),new mxConnectionConstraint(new mxPoint(.55,.95),!1),new mxConnectionConstraint(new mxPoint(.875,.5),!1),new mxConnectionConstraint(new mxPoint(.96,.7),!1),new mxConnectionConstraint(new mxPoint(.625,.2),!1),new mxConnectionConstraint(new mxPoint(.88,.25),!1)],C.prototype.constraints=mxRectangleShape.prototype.constraints,E.prototype.constraints=mxRectangleShape.prototype.constraints,v.prototype.constraints=[new mxConnectionConstraint(new mxPoint(.25,0),!0),new mxConnectionConstraint(new mxPoint(.5,0),!0),new mxConnectionConstraint(new mxPoint(.75,0),!0),new mxConnectionConstraint(new mxPoint(0,.25),!0),new mxConnectionConstraint(new mxPoint(0,.5),!0),new mxConnectionConstraint(new mxPoint(0,.75),!0),new mxConnectionConstraint(new mxPoint(1,.25),!0),new mxConnectionConstraint(new mxPoint(1,.5),!0),new mxConnectionConstraint(new mxPoint(1,.75),!0)],mxArrow.prototype.constraints=null,dt.prototype.getConstraints=function(t,e,n){var i=[],l=Math.max(0,Math.min(e,parseFloat(mxUtils.getValue(this.style,"dx",this.dx)))),o=Math.max(0,Math.min(n,parseFloat(mxUtils.getValue(this.style,"dy",this.dy))));return Math.abs(e-l),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1)),i.push(new mxConnectionConstraint(new mxPoint(.5,0),!1)),i.push(new mxConnectionConstraint(new mxPoint(1,0),!1)),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,e,.5*o)),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,e,o)),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,.75*e+.25*l,o)),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,.5*(e+l),o)),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,.5*(e+l),.5*(n+o))),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,.5*(e+l),n)),i.push(new mxConnectionConstraint(new mxPoint(.5,1),!1)),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,.5*(e-l),n)),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,.5*(e-l),.5*(n+o))),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,.5*(e-l),o)),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,.25*e-.25*l,o)),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,0,o)),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,0,.5*o)),i},ht.prototype.getConstraints=function(t,e,n){var i=[],l=Math.max(0,Math.min(e,parseFloat(mxUtils.getValue(this.style,"dx",this.dx)))),o=Math.max(0,Math.min(n,parseFloat(mxUtils.getValue(this.style,"dy",this.dy))));return i.push(new mxConnectionConstraint(new mxPoint(0,0),!1)),i.push(new mxConnectionConstraint(new mxPoint(.5,0),!1)),i.push(new mxConnectionConstraint(new mxPoint(1,0),!1)),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,e,.5*o)),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,e,o)),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,.5*(e+l),o)),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,l,o)),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,l,.5*(n+o))),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,l,n)),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,.5*l,n)),i.push(new mxConnectionConstraint(new mxPoint(0,.5),!1)),i.push(new mxConnectionConstraint(new mxPoint(0,1),!1)),i},ut.prototype.constraints=[new mxConnectionConstraint(new mxPoint(0,0),!1),new mxConnectionConstraint(new mxPoint(0,.5),!1),new mxConnectionConstraint(new mxPoint(0,1),!1),new mxConnectionConstraint(new mxPoint(.25,.5),!1),new mxConnectionConstraint(new mxPoint(.5,.5),!1),new mxConnectionConstraint(new mxPoint(.75,.5),!1),new mxConnectionConstraint(new mxPoint(1,0),!1),new mxConnectionConstraint(new mxPoint(1,.5),!1),new mxConnectionConstraint(new mxPoint(1,1),!1)],ct.prototype.getConstraints=function(t,e,n){var i=[],l=n*Math.max(0,Math.min(1,parseFloat(mxUtils.getValue(this.style,"arrowWidth",this.arrowWidth)))),o=e*Math.max(0,Math.min(1,parseFloat(mxUtils.getValue(this.style,"arrowSize",this.arrowSize)))),s=(n-l)/2;return i.push(new mxConnectionConstraint(new mxPoint(0,.5),!1)),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,0,s)),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,.5*(e-o),s)),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,e-o,0)),i.push(new mxConnectionConstraint(new mxPoint(1,.5),!1)),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,e-o,n)),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,.5*(e-o),n-s)),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,0,n-s)),i},pt.prototype.getConstraints=function(t,e,n){var i=[],l=n*Math.max(0,Math.min(1,parseFloat(mxUtils.getValue(this.style,"arrowWidth",ct.prototype.arrowWidth)))),o=e*Math.max(0,Math.min(1,parseFloat(mxUtils.getValue(this.style,"arrowSize",ct.prototype.arrowSize)))),s=(n-l)/2;return i.push(new mxConnectionConstraint(new mxPoint(0,.5),!1)),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,o,0)),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,.5*e,s)),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,e-o,0)),i.push(new mxConnectionConstraint(new mxPoint(1,.5),!1)),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,e-o,n)),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,.5*e,n-s)),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,o,n)),i},Lt.prototype.getConstraints=function(t,e,n){var i=[],l=Math.min(n,e),o=(n-(r=Math.max(0,Math.min(l,l*parseFloat(mxUtils.getValue(this.style,"size",this.size))))))/2,s=o+r,r=(l=(e-r)/2)+r;return i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,l,.5*o)),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,l,0)),i.push(new mxConnectionConstraint(new mxPoint(.5,0),!1)),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,r,0)),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,r,.5*o)),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,r,o)),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,l,n-.5*o)),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,l,n)),i.push(new mxConnectionConstraint(new mxPoint(.5,1),!1)),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,r,n)),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,r,n-.5*o)),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,r,s)),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,.5*(e+r),o)),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,e,o)),i.push(new mxConnectionConstraint(new mxPoint(1,.5),!1)),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,e,s)),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,.5*(e+r),s)),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,l,s)),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,.5*l,o)),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,0,o)),i.push(new mxConnectionConstraint(new mxPoint(0,.5),!1)),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,0,s)),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,.5*l,s)),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,l,o)),i},X.prototype.constraints=null,gt.prototype.constraints=[new mxConnectionConstraint(new mxPoint(0,.25),!1),new mxConnectionConstraint(new mxPoint(0,.5),!1),new mxConnectionConstraint(new mxPoint(0,.75),!1),new mxConnectionConstraint(new mxPoint(1,.5),!1),new mxConnectionConstraint(new mxPoint(.7,.1),!1),new mxConnectionConstraint(new mxPoint(.7,.9),!1)],xt.prototype.constraints=[new mxConnectionConstraint(new mxPoint(.175,.25),!1),new mxConnectionConstraint(new mxPoint(.25,.5),!1),new mxConnectionConstraint(new mxPoint(.175,.75),!1),new mxConnectionConstraint(new mxPoint(1,.5),!1),new mxConnectionConstraint(new mxPoint(.7,.1),!1),new mxConnectionConstraint(new mxPoint(.7,.9),!1)],Q.prototype.constraints=[new mxConnectionConstraint(new mxPoint(0,.5),!1),new mxConnectionConstraint(new mxPoint(1,.5),!1)],$.prototype.constraints=[new mxConnectionConstraint(new mxPoint(0,.5),!1),new mxConnectionConstraint(new mxPoint(1,.5),!1)]}();var $jscomp=$jscomp||{},e;function Sidebar(t,e){this.editorUi=t,this.container=e,this.palettes={},this.taglist={},this.imageSearch={},this.showTooltips=!0,this.graph=t.createTemporaryGraph(this.editorUi.editor.graph.getStylesheet()),this.graph.cellRenderer.minSvgStrokeWidth=this.minThumbStrokeWidth,this.graph.cellRenderer.antiAlias=this.thumbAntiAlias,this.graph.container.style.visibility="hidden",this.graph.foldingEnabled=!1,document.body.appendChild(this.graph.container),this.pointerUpHandler=mxUtils.bind(this,function(){this.showTooltips=!0}),mxEvent.addListener(document,mxClient.IS_POINTER?"pointerup":"mouseup",this.pointerUpHandler),this.pointerDownHandler=mxUtils.bind(this,function(){this.showTooltips=!1,this.hideTooltip()}),mxEvent.addListener(document,mxClient.IS_POINTER?"pointerdown":"mousedown",this.pointerDownHandler),this.pointerMoveHandler=mxUtils.bind(this,function(t){for(t=mxEvent.getSource(t);null!=t;){if(t==this.currentElt)return;t=t.parentNode}this.hideTooltip()}),mxEvent.addListener(document,mxClient.IS_POINTER?"pointermove":"mousemove",this.pointerMoveHandler),this.pointerOutHandler=mxUtils.bind(this,function(t){null==t.toElement&&null==t.relatedTarget&&this.hideTooltip()}),mxEvent.addListener(document,mxClient.IS_POINTER?"pointerout":"mouseout",this.pointerOutHandler),mxEvent.addListener(e,"scroll",mxUtils.bind(this,function(){this.showTooltips=!0,this.hideTooltip()})),this.init()}function Toolbar(t,e){this.editorUi=t,this.container=e,this.staticElements=[],this.init(),this.gestureHandler=mxUtils.bind(this,function(t){null!=this.editorUi.currentMenu&&mxEvent.getSource(t)!=this.editorUi.currentMenu.div&&this.hideMenu()}),mxEvent.addGestureListeners(document,this.gestureHandler)}$jscomp.scope={},$jscomp.ASSUME_ES5=!1,$jscomp.ASSUME_NO_NATIVE_MAP=!1,$jscomp.ASSUME_NO_NATIVE_SET=!1,$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(t,e,n){t!=Array.prototype&&t!=Object.prototype&&(t[e]=n.value)},$jscomp.getGlobal=function(t){return"undefined"!=typeof window&&window===t||"undefined"==typeof global||null==global?t:global},$jscomp.global=$jscomp.getGlobal(this),$jscomp.polyfill=function(t,e,n,i){if(e){for(n=$jscomp.global,t=t.split("."),i=0;i<t.length-1;i++){var l=t[i];l in n||(n[l]={}),n=n[l]}(e=e(i=n[t=t[t.length-1]]))!=i&&null!=e&&$jscomp.defineProperty(n,t,{configurable:!0,writable:!0,value:e})}},$jscomp.arrayIteratorImpl=function(t){var e=0;return function(){return e<t.length?{done:!1,value:t[e++]}:{done:!0}}},$jscomp.arrayIterator=function(t){return{next:$jscomp.arrayIteratorImpl(t)}},$jscomp.SYMBOL_PREFIX="jscomp_symbol_",$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){},$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)},$jscomp.Symbol=(e=0,function(t){return $jscomp.SYMBOL_PREFIX+(t||"")+e++}),$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var t=(t=$jscomp.global.Symbol.iterator)||($jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));"function"!=typeof Array.prototype[t]&&$jscomp.defineProperty(Array.prototype,t,{configurable:!0,writable:!0,value:function(){return $jscomp.iteratorPrototype($jscomp.arrayIteratorImpl(this))}}),$jscomp.initSymbolIterator=function(){}},$jscomp.initSymbolAsyncIterator=function(){$jscomp.initSymbol(),$jscomp.global.Symbol.asyncIterator||($jscomp.global.Symbol.asyncIterator=$jscomp.global.Symbol("asyncIterator")),$jscomp.initSymbolAsyncIterator=function(){}},$jscomp.iteratorPrototype=function(t){return $jscomp.initSymbolIterator(),(t={next:t})[$jscomp.global.Symbol.iterator]=function(){return this},t},$jscomp.iteratorFromArray=function(t,e){$jscomp.initSymbolIterator(),t instanceof String&&(t+="");var n=0,i={next:function(){if(n<t.length){var l=n++;return{value:e(l,t[l]),done:!1}}return i.next=function(){return{done:!0,value:void 0}},i.next()}};return i[Symbol.iterator]=function(){return i},i},$jscomp.polyfill("Array.prototype.entries",function(t){return t||function(){return $jscomp.iteratorFromArray(this,function(t,e){return[t,e]})}},"es6","es3"),$jscomp.polyfill("Object.is",function(t){return t||function(t,e){return t===e?0!==t||1/t==1/e:t!=t&&e!=e}},"es6","es3"),$jscomp.polyfill("Array.prototype.includes",function(t){return t||function(t,e){var n=this,i=(n=n instanceof String?String(n):n).length;for((e=e||0)<0&&(e=Math.max(e+i,0));e<i;e++){var l=n[e];if(l===t||Object.is(l,t))return!0}return!1}},"es7","es3"),$jscomp.checkStringArgs=function(t,e,n){if(null==t)throw new TypeError("The 'this' value for String.prototype."+n+" must not be null or undefined");if(e instanceof RegExp)throw new TypeError("First argument to String.prototype."+n+" must not be a regular expression");return t+""},$jscomp.polyfill("String.prototype.includes",function(t){return t||function(t,e){return-1!==$jscomp.checkStringArgs(this,t,"includes").indexOf(t,e||0)}},"es6","es3"),$jscomp.polyfill("Array.prototype.keys",function(t){return t||function(){return $jscomp.iteratorFromArray(this,function(t){return t})}},"es6","es3"),Sidebar.prototype.init=function(){var t=STENCIL_PATH;this.addSearchPalette(!0),this.addGeneralPalette(!0),this.addMiscPalette(!1),this.addAdvancedPalette(!1),this.addBasicPalette(t),this.setCurrentSearchEntryLibrary("arrows"),this.addStencilPalette("arrows",mxResources.get("arrows"),t+"/arrows.xml",";whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#000000;strokeWidth=2"),this.setCurrentSearchEntryLibrary(),this.addUmlPalette(!1),this.setCurrentSearchEntryLibrary("flowchart"),this.addStencilPalette("flowchart","Flowchart",t+"/flowchart.xml",";whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#000000;strokeWidth=2"),this.setCurrentSearchEntryLibrary(),this.setCurrentSearchEntryLibrary("clipart"),this.addImagePalette("clipart",mxResources.get("clipart"),t+"/clipart/","_128x128.png","Earth_globe Empty_Folder Full_Folder Gear Lock Software Virus Email Database Router_Icon iPad iMac Laptop MacBook Monitor_Tower Printer Server_Tower Workstation Firewall_02 Wireless_Router_N Credit_Card Piggy_Bank Graph Safe Shopping_Cart Suit1 Suit2 Suit3 Pilot1 Worker1 Soldier1 Doctor1 Tech1 Security1 Telesales1".split(" "),null,{Wireless_Router_N:"wireless router switch wap wifi access point wlan",Router_Icon:"router switch"}),this.setCurrentSearchEntryLibrary()},Sidebar.prototype.collapsedImage=mxClient.IS_SVG?"data:image/gif;base64,R0lGODlhDQANAIABAJmZmf///yH/C1hNUCBEYXRhWE1QPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS4wLWMwNjAgNjEuMTM0Nzc3LCAyMDEwLzAyLzEyLTE3OjMyOjAwICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOnhtcE1NPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvbW0vIiB4bWxuczpzdFJlZj0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL3NUeXBlL1Jlc291cmNlUmVmIyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M1IE1hY2ludG9zaCIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDozNUQyRTJFNjZGNUYxMUU1QjZEOThCNDYxMDQ2MzNCQiIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDozNUQyRTJFNzZGNUYxMUU1QjZEOThCNDYxMDQ2MzNCQiI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjFERjc3MEUxNkY1RjExRTVCNkQ5OEI0NjEwNDYzM0JCIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjFERjc3MEUyNkY1RjExRTVCNkQ5OEI0NjEwNDYzM0JCIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+Af/+/fz7+vn49/b19PPy8fDv7u3s6+rp6Ofm5eTj4uHg397d3Nva2djX1tXU09LR0M/OzczLysnIx8bFxMPCwcC/vr28u7q5uLe2tbSzsrGwr66trKuqqainpqWko6KhoJ+enZybmpmYl5aVlJOSkZCPjo2Mi4qJiIeGhYSDgoGAf359fHt6eXh3dnV0c3JxcG9ubWxramloZ2ZlZGNiYWBfXl1cW1pZWFdWVVRTUlFQT05NTEtKSUhHRkVEQ0JBQD8+PTw7Ojk4NzY1NDMyMTAvLi0sKyopKCcmJSQjIiEgHx4dHBsaGRgXFhUUExIREA8ODQwLCgkIBwYFBAMCAQAAIfkEAQAAAQAsAAAAAA0ADQAAAhSMj6lrwAjcC1GyahV+dcZJgeIIFgA7":IMAGE_PATH+"/collapsed.gif",Sidebar.prototype.expandedImage=mxClient.IS_SVG?"data:image/gif;base64,R0lGODlhDQANAIABAJmZmf///yH/C1hNUCBEYXRhWE1QPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS4wLWMwNjAgNjEuMTM0Nzc3LCAyMDEwLzAyLzEyLTE3OjMyOjAwICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOnhtcE1NPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvbW0vIiB4bWxuczpzdFJlZj0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL3NUeXBlL1Jlc291cmNlUmVmIyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M1IE1hY2ludG9zaCIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDoxREY3NzBERjZGNUYxMUU1QjZEOThCNDYxMDQ2MzNCQiIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDoxREY3NzBFMDZGNUYxMUU1QjZEOThCNDYxMDQ2MzNCQiI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjFERjc3MERENkY1RjExRTVCNkQ5OEI0NjEwNDYzM0JCIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjFERjc3MERFNkY1RjExRTVCNkQ5OEI0NjEwNDYzM0JCIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+Af/+/fz7+vn49/b19PPy8fDv7u3s6+rp6Ofm5eTj4uHg397d3Nva2djX1tXU09LR0M/OzczLysnIx8bFxMPCwcC/vr28u7q5uLe2tbSzsrGwr66trKuqqainpqWko6KhoJ+enZybmpmYl5aVlJOSkZCPjo2Mi4qJiIeGhYSDgoGAf359fHt6eXh3dnV0c3JxcG9ubWxramloZ2ZlZGNiYWBfXl1cW1pZWFdWVVRTUlFQT05NTEtKSUhHRkVEQ0JBQD8+PTw7Ojk4NzY1NDMyMTAvLi0sKyopKCcmJSQjIiEgHx4dHBsaGRgXFhUUExIREA8ODQwLCgkIBwYFBAMCAQAAIfkEAQAAAQAsAAAAAA0ADQAAAhGMj6nL3QAjVHIu6azbvPtWAAA7":IMAGE_PATH+"/expanded.gif",Sidebar.prototype.searchImage=mxClient.IS_SVG?"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAYAAABWdVznAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAIGNIUk0AAHolAACAgwAA+f8AAIDpAAB1MAAA6mAAADqYAAAXb5JfxUYAAAEaSURBVHjabNGxS5VxFIfxz71XaWuQUJCG/gCHhgTD9VpEETg4aMOlQRp0EoezObgcd220KQiXmpretTAHQRBdojlQEJyukPdt+b1ywfvAGc7wnHP4nlZd1yKijQW8xzNc4Su+ZOYfQ3T6/f4YNvEJYzjELXp4VVXVz263+7cR2niBxAFeZ2YPi3iHR/gYERPDwhpOsd6sz8x/mfkNG3iOlWFhFj8y89J9KvzGXER0GuEaD42mgwHqUtoljbcRsTBCeINpfM/MgZLKPpaxFxGbOCqDXmILN7hoJrTKH+axhxmcYRxP0MIDnOBDZv5q1XUNIuJxifJp+UNV7t7BFM6xeic0RMQ4Bpl5W/ol7GISx/eEUUTECrbx+f8A8xhiZht9zsgAAAAASUVORK5CYII=":IMAGE_PATH+"/search.png",Sidebar.prototype.enableTooltips=!0,Sidebar.prototype.tooltipBorder=16,Sidebar.prototype.tooltipDelay=300,Sidebar.prototype.dropTargetDelay=200,Sidebar.prototype.gearImage=STENCIL_PATH+"/clipart/Gear_128x128.png",Sidebar.prototype.thumbWidth=42,Sidebar.prototype.thumbHeight=42,Sidebar.prototype.minThumbStrokeWidth=1,Sidebar.prototype.thumbAntiAlias=!1,Sidebar.prototype.thumbPadding=5<=document.documentMode?2:3,Sidebar.prototype.thumbBorder=2,"large"!=urlParams["sidebar-entries"]&&(Sidebar.prototype.thumbPadding=5<=document.documentMode?0:1,Sidebar.prototype.thumbBorder=1,Sidebar.prototype.thumbWidth=32,Sidebar.prototype.thumbHeight=30,Sidebar.prototype.minThumbStrokeWidth=1.3,Sidebar.prototype.thumbAntiAlias=!0),Sidebar.prototype.sidebarTitleSize=9,Sidebar.prototype.sidebarTitles=!1,Sidebar.prototype.tooltipTitles=!0,Sidebar.prototype.maxTooltipWidth=400,Sidebar.prototype.maxTooltipHeight=400,Sidebar.prototype.addStencilsToIndex=!0,Sidebar.prototype.defaultImageWidth=80,Sidebar.prototype.defaultImageHeight=80,Sidebar.prototype.getTooltipOffset=function(t,e){return document.getElementsByClassName("geHsplit"),e=e.height+2*this.tooltipBorder,new mxPoint(this.container.offsetWidth+this.editorUi.splitSize+10+this.editorUi.container.offsetLeft,Math.min(Math.max(document.body.clientHeight||0,document.documentElement.clientHeight)-e-20,Math.max(0,this.editorUi.container.offsetTop+this.container.offsetTop+t.offsetTop-this.container.scrollTop-e/2+16)))},Sidebar.prototype.showTooltip=function(t,e,n,i,l,o){var s;this.enableTooltips&&this.showTooltips&&this.currentElt!=t&&(null!=this.thread&&(window.clearTimeout(this.thread),this.thread=null),s=mxUtils.bind(this,function(){null==this.tooltip&&(this.tooltip=document.createElement("div"),this.tooltip.className="geSidebarTooltip",this.tooltip.style.zIndex=mxPopupMenu.prototype.zIndex-1,document.body.appendChild(this.tooltip),this.graph2=new Graph(this.tooltip,null,null,this.editorUi.editor.graph.getStylesheet()),this.graph2.resetViewOnRootChange=!1,this.graph2.foldingEnabled=!1,this.graph2.gridEnabled=!1,this.graph2.autoScroll=!1,this.graph2.setTooltips(!1),this.graph2.setConnectable(!1),this.graph2.setEnabled(!1),mxClient.IS_SVG||(this.graph2.view.canvas.style.position="relative")),this.graph2.model.clear(),this.graph2.view.setTranslate(this.tooltipBorder,this.tooltipBorder),this.graph2.view.scale=n>this.maxTooltipWidth||i>this.maxTooltipHeight?Math.round(100*Math.min(this.maxTooltipWidth/n,this.maxTooltipHeight/i))/100:1,this.tooltip.style.display="block",this.graph2.labelsVisible=null==o||o;var s=mxClient.NO_FO;mxClient.NO_FO=Editor.prototype.originalNoForeignObject;var r=this.graph2.cloneCells(e);this.editorUi.insertHandler(r,null,this.graph2.model),this.graph2.addCells(r),mxClient.NO_FO=s,r=(s=this.graph2.getGraphBounds()).width+2*this.tooltipBorder+4;var a=s.height+2*this.tooltipBorder;this.tooltip.style.overflow="visible",this.tooltip.style.width=r+"px";var h,u=r;this.tooltipTitles&&null!=l&&0<l.length?(null==this.tooltipTitle?(this.tooltipTitle=document.createElement("div"),this.tooltipTitle.style.borderTop="1px solid gray",this.tooltipTitle.style.textAlign="center",this.tooltipTitle.style.width="100%",this.tooltipTitle.style.overflow="hidden",this.tooltipTitle.style.position="absolute",this.tooltipTitle.style.paddingTop="6px",this.tooltipTitle.style.bottom="6px",this.tooltip.appendChild(this.tooltipTitle)):this.tooltipTitle.innerHTML="",this.tooltipTitle.style.display="",mxUtils.write(this.tooltipTitle,l),u=Math.min(this.maxTooltipWidth,Math.max(r,this.tooltipTitle.scrollWidth+4)),a+=h=this.tooltipTitle.offsetHeight+10,mxClient.IS_SVG?this.tooltipTitle.style.marginTop=2-h+"px":this.tooltipTitle.style.top=(a-=6)-h+"px"):null!=this.tooltipTitle&&null!=this.tooltipTitle.parentNode&&(this.tooltipTitle.style.display="none"),r<u&&(this.tooltip.style.width=u+"px"),this.tooltip.style.height=a+"px",r=-Math.round(s.x-this.tooltipBorder)+(r<u?(u-r)/2:0),a=-Math.round(s.y-this.tooltipBorder),s=(u=this.getTooltipOffset(t,s)).x,u=u.y,mxClient.IS_SVG?0!=r||0!=a?this.graph2.view.canvas.setAttribute("transform","translate("+r+","+a+")"):this.graph2.view.canvas.removeAttribute("transform"):(this.graph2.view.drawPane.style.left=r+"px",this.graph2.view.drawPane.style.top=a+"px"),this.tooltip.style.position="absolute",this.tooltip.style.left=s+"px",this.tooltip.style.top=u+"px",mxUtils.fit(this.tooltip)}),null!=this.tooltip&&"none"!=this.tooltip.style.display?s():this.thread=window.setTimeout(s,this.tooltipDelay),this.currentElt=t)},Sidebar.prototype.hideTooltip=function(){null!=this.thread&&(window.clearTimeout(this.thread),this.thread=null),null!=this.tooltip&&(this.tooltip.style.display="none",this.currentElt=null)},Sidebar.prototype.addDataEntry=function(t,e,n,i,l){return this.addEntry(t,mxUtils.bind(this,function(){return this.createVertexTemplateFromData(l,e,n,i)}))},Sidebar.prototype.addEntries=function(t){for(var e=0;e<t.length;e++)mxUtils.bind(this,function(t){var e=t.data,n=null!=t.title?t.title:"";null!=t.tags&&(n+=" "+t.tags),null!=e&&0<n.length?this.addEntry(n,mxUtils.bind(this,function(){e=this.editorUi.convertDataUri(e);var n="shape=image;verticalLabelPosition=bottom;verticalAlign=top;imageAspect=0;";return"fixed"==t.aspect&&(n+="aspect=fixed;"),this.createVertexTemplate(n+"image="+e,t.w,t.h,"",t.title||"",!1,!1,!0)})):null!=t.xml&&0<n.length&&this.addEntry(n,mxUtils.bind(this,function(){var e=this.editorUi.stringToCells(Graph.decompress(t.xml));return this.createVertexTemplateFromCells(e,t.w,t.h,t.title||"",!0,!1,!0)}))})(t[e])},Sidebar.prototype.setCurrentSearchEntryLibrary=function(t,e){this.currentSearchEntryLibrary=null!=t?{id:t,lib:e}:null},Sidebar.prototype.setCurrentSearchEntryLibrary=function(t,e){this.currentSearchEntryLibrary=null!=t?{id:t,lib:e}:null},Sidebar.prototype.addEntry=function(t,e){if(null!=this.taglist&&null!=t&&0<t.length){null!=this.currentSearchEntryLibrary&&(e.parentLibraries=[this.currentSearchEntryLibrary]);for(var n=t.toLowerCase().replace(/[\/\,\(\)]/g," ").split(" "),i=[],l={},o=0;o<n.length;o++){null==l[n[o]]&&(l[n[o]]=!0,i.push(n[o]));var s=n[o].replace(/\.*\d*$/,"");s!=n[o]&&null==l[s]&&(l[s]=!0,i.push(s))}for(o=0;o<i.length;o++)this.addEntryForTag(i[o],e)}return e},Sidebar.prototype.addEntryForTag=function(t,e){var n;null!=t&&1<t.length&&(n=this.taglist[t],mxDictionary.prototype.clear(),"object"!=typeof n&&(n={entries:[],dict:new mxDictionary},this.taglist[t]=n),null==n.dict.get(e)&&(n.dict.put(e,e),n.entries.push(e)))},Sidebar.prototype.searchEntries=function(t,e,n,i,l){if(null!=this.taglist&&null!=t){for(var o=t.toLowerCase().split(" "),s=new mxDictionary,r=(n+1)*e,a=[],h=0,u={},d=[],c=0;c<o.length;c++)if(0<o[c].length){var p=[];for(const t in this.taglist)t.includes(o[c])&&p.push(this.taglist[t]);for(var m=0;m<p.length;m++){for(var g=Object.keys(p[m].dict.map),x=0;x<g.length;x++)u[g[x]]=p[m].dict.map[g[x]];for(var y=0;y<p[m].entries.length;y++)-1===d.indexOf(p[m].entries[y])&&d.push(p[m].entries[y])}var f={dict:u,entries:d},v=new mxDictionary;if(null!=f){d=f.entries,a=[];for(var b=0;b<d.length;b++)if(0==h==(null==s.get(f=d[b]))&&(v.put(f,f),a.push(f),c==o.length-1&&a.length==r))return void i(a.slice(n*e,r),r,!0,o)}else a=[];s=v,h++}t=a.length,i(a.slice(n*e,(n+1)*e),t,!1,o)}else i([],null,null,o)},Sidebar.prototype.filterTags=function(t){if(null==t)return null;t=t.split(" ");for(var e=[],n={},i=0;i<t.length;i++)null==n[t[i]]&&(n[t[i]]="1",e.push(t[i]));return e.join(" ")},Sidebar.prototype.cloneCell=function(t,e){return t=t.clone(),null!=e&&(t.value=e),t},Sidebar.prototype.showPopupMenuForEntry=function(t,e,n){},Sidebar.prototype.addSearchPalette=function(t){var e=document.createElement("div");e.style.visibility="hidden",this.container.appendChild(e);var n=document.createElement("div");n.className="geSidebar",n.style.boxSizing="border-box",n.style.overflow="hidden",n.style.width="100%",n.style.padding="8px",n.style.paddingTop="14px",n.style.paddingBottom="0px",t||(n.style.display="none");var i=document.createElement("div");i.style.whiteSpace="nowrap",i.style.textOverflow="clip",i.style.paddingBottom="8px",i.style.cursor="default";var l=document.createElement("input");l.setAttribute("placeholder",mxResources.get("searchShapes")),l.setAttribute("type","text"),l.style.fontSize="12px",l.style.overflow="hidden",l.style.boxSizing="border-box",l.style.border="solid 1px #d5d5d5",l.style.borderRadius="4px",l.style.width="100%",l.style.outline="none",l.style.padding="6px",l.style.paddingRight="20px",i.appendChild(l);var o=document.createElement("img");o.setAttribute("src",Sidebar.prototype.searchImage),o.setAttribute("title",mxResources.get("search")),o.style.position="relative",o.style.left="-18px",o.style.top="1px",o.style.background="url('"+this.editorUi.editor.transparentImage+"')",i.appendChild(o),n.appendChild(i);var s=document.createElement("center"),r=mxUtils.button(mxResources.get("moreResults"),function(){g()});r.style.display="none",r.style.lineHeight="normal",r.style.fontSize="12px",r.style.padding="6px 12px 6px 12px",r.style.marginTop="4px",r.style.marginBottom="8px",s.style.paddingTop="4px",s.style.paddingBottom="4px",s.appendChild(r),n.appendChild(s);var a,h="",u=!1,d=!1,c=0,p={},m=mxUtils.bind(this,function(){u=!1,this.currentSearch=null;for(var t=n.firstChild;null!=t;){var e=t.nextSibling;t!=i&&t!=s&&t.parentNode.removeChild(t),t=e}});mxEvent.addListener(o,"click",function(){o.getAttribute("src")==Dialog.prototype.closeImage&&(o.setAttribute("src",Sidebar.prototype.searchImage),o.setAttribute("title",mxResources.get("search")),r.style.display="none",h=l.value="",m()),l.focus()});var g=mxUtils.bind(this,function(){var t;a=4*Math.max(1,Math.floor(this.container.clientWidth/(this.thumbWidth+10))),this.hideTooltip(),""!=l.value?null==s.parentNode||(h!=l.value&&(m(),h=l.value,d=!(p={}),c=0),u||d)||(r.setAttribute("disabled","true"),r.style.display="",r.style.cursor="wait",r.innerHTML=mxResources.get("loading")+"...",u=!0,this.currentSearch=t={},this.searchEntries(h,a,c,mxUtils.bind(this,function(e,i,l,o){if(this.currentSearch==t){for(u=!1,this.insertSearchHint(n,h,a,++c,e=null!=e?e:[],i,l,o),0==e.length&&1==c&&(h=""),null!=s.parentNode&&s.parentNode.removeChild(s),i=0;i<e.length;i++)try{var m=e[i]();null==p[m.innerHTML]&&(p[m.innerHTML]="1",n.appendChild(m))}catch(e){}l?(r.removeAttribute("disabled"),r.innerHTML=mxResources.get("moreResults")):(r.innerHTML=mxResources.get("reset"),r.style.display="none",d=!0),r.style.cursor="",n.appendChild(s)}}),mxUtils.bind(this,function(){r.style.cursor=""}))):(m(),h=l.value="",p={},r.style.display="none",d=!1,l.focus())});mxEvent.addListener(l,"keydown",mxUtils.bind(this,function(t){t&&setTimeout(function(){2<=l.value.length?g():(m(),h="",r.style.display="none",d=!1,l.focus())},100),13==t.keyCode&&(g(),mxEvent.consume(t))})),mxEvent.addListener(l,"keyup",mxUtils.bind(this,function(t){""==l.value?(o.setAttribute("src",Sidebar.prototype.searchImage),o.setAttribute("title",mxResources.get("search"))):(o.setAttribute("src",Dialog.prototype.closeImage),o.setAttribute("title",mxResources.get("reset"))),""==l.value?(d=!0,r.style.display="none"):l.value!=h?(r.style.display="none",d=!1):u||(r.style.display=d?"none":"")})),mxEvent.addListener(l,"mousedown",function(t){t.stopPropagation&&t.stopPropagation(),t.cancelBubble=!0}),mxEvent.addListener(l,"selectstart",function(t){t.stopPropagation&&t.stopPropagation(),t.cancelBubble=!0}),(t=document.createElement("div")).appendChild(n),this.container.appendChild(t),this.palettes.search=[e,t]},Sidebar.prototype.insertSearchHint=function(t,e,n,i,l,o,s,r){0==l.length&&1==i&&((n=document.createElement("div")).className="geTitle",n.style.cssText="background-color:transparent;border-color:transparent;color:gray;padding:6px 0px 0px 0px !important;margin:4px 8px 4px 8px;text-align:center;cursor:default !important",mxUtils.write(n,mxResources.get("noResultsFor",[e])),t.appendChild(n))},Sidebar.prototype.addGeneralPalette=function(t){this.setCurrentSearchEntryLibrary("general","general");var e=[this.createVertexTemplateEntry("rounded=0;whiteSpace=wrap;html=1;",120,60,"","Rectangle",null,null,"rect rectangle box test"),this.createVertexTemplateEntry("rounded=1;whiteSpace=wrap;html=1;",120,60,"","Rounded Rectangle",null,null,"rounded rect rectangle box test"),this.createVertexTemplateEntry("text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;",40,20,"Text","Text",null,null,"text textbox textarea label test"),this.createVertexTemplateEntry("text;html=1;strokeColor=none;fillColor=none;spacing=5;spacingTop=-20;whiteSpace=wrap;overflow=hidden;rounded=0;",190,120,"<h1>Heading</h1><p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.</p>","Textbox",null,null,"text textbox textarea test"),this.createVertexTemplateEntry("ellipse;whiteSpace=wrap;html=1;",120,80,"","Ellipse",null,null,"oval ellipse state test"),this.createVertexTemplateEntry("whiteSpace=wrap;html=1;aspect=fixed;",80,80,"","Square",null,null,"square test"),this.createVertexTemplateEntry("ellipse;whiteSpace=wrap;html=1;aspect=fixed;",80,80,"","Circle",null,null,"circle test"),this.createVertexTemplateEntry("shape=process;whiteSpace=wrap;html=1;backgroundOutline=1;",120,60,"","Process",null,null,"process task test"),this.createVertexTemplateEntry("rhombus;whiteSpace=wrap;html=1;",80,80,"","Diamond",null,null,"diamond rhombus if condition decision conditional question test"),this.createVertexTemplateEntry("shape=parallelogram;perimeter=parallelogramPerimeter;whiteSpace=wrap;html=1;fixedSize=1;",120,60,"","Parallelogram test"),this.createVertexTemplateEntry("shape=hexagon;perimeter=hexagonPerimeter2;whiteSpace=wrap;html=1;fixedSize=1;",120,80,"","Hexagon",null,null,"hexagon preparation test"),this.createVertexTemplateEntry("triangle;whiteSpace=wrap;html=1;",60,80,"","Triangle",null,null,"triangle logic inverter buffer test"),this.createVertexTemplateEntry("shape=cylinder3;whiteSpace=wrap;html=1;boundedLbl=1;backgroundOutline=1;size=15;",60,80,"","Cylinder",null,null,"cylinder data database test"),this.createVertexTemplateEntry("ellipse;shape=cloud;whiteSpace=wrap;html=1;",120,80,"","Cloud",null,null,"cloud network test"),this.createVertexTemplateEntry("shape=document;whiteSpace=wrap;html=1;boundedLbl=1;",120,80,"","Document test"),this.createVertexTemplateEntry("shape=internalStorage;whiteSpace=wrap;html=1;backgroundOutline=1;",80,80,"","Internal Storage test"),this.createVertexTemplateEntry("shape=cube;whiteSpace=wrap;html=1;boundedLbl=1;backgroundOutline=1;darkOpacity=0.05;darkOpacity2=0.1;",120,80,"","Cube test"),this.createVertexTemplateEntry("shape=step;perimeter=stepPerimeter;whiteSpace=wrap;html=1;fixedSize=1;",120,80,"","Step test"),this.createVertexTemplateEntry("shape=trapezoid;perimeter=trapezoidPerimeter;whiteSpace=wrap;html=1;fixedSize=1;",120,60,"","Trapezoid test"),this.createVertexTemplateEntry("shape=tape;whiteSpace=wrap;html=1;",120,100,"","Tape test"),this.createVertexTemplateEntry("shape=note;whiteSpace=wrap;html=1;backgroundOutline=1;darkOpacity=0.05;",80,100,"","Note test"),this.createVertexTemplateEntry("shape=card;whiteSpace=wrap;html=1;",80,100,"","Card test"),this.createVertexTemplateEntry("shape=callout;whiteSpace=wrap;html=1;perimeter=calloutPerimeter;",120,80,"","Callout",null,null,"bubble chat thought speech message test"),this.createVertexTemplateEntry("shape=umlActor;verticalLabelPosition=bottom;verticalAlign=top;html=1;outlineConnect=0;",30,60,"Actor","Actor",!1,null,"user person human stickman test"),this.createVertexTemplateEntry("shape=xor;whiteSpace=wrap;html=1;",60,80,"","Or",null,null,"logic or test"),this.createVertexTemplateEntry("shape=or;whiteSpace=wrap;html=1;",60,80,"","And",null,null,"logic and test"),this.createVertexTemplateEntry("shape=dataStorage;whiteSpace=wrap;html=1;fixedSize=1;",100,80,"","Data Storage test"),this.addEntry("curve",mxUtils.bind(this,function(){var t=new mxCell("",new mxGeometry(0,0,50,50),"curved=1;endArrow=classic;html=1;");return t.geometry.setTerminalPoint(new mxPoint(0,50),!0),t.geometry.setTerminalPoint(new mxPoint(50,0),!1),t.geometry.points=[new mxPoint(50,50),new mxPoint(0,0)],t.geometry.relative=!0,t.edge=!0,this.createEdgeTemplateFromCells([t],t.geometry.width,t.geometry.height,"Curve")})),this.createEdgeTemplateEntry("shape=flexArrow;endArrow=classic;startArrow=classic;html=1;",100,100,"","Bidirectional Arrow",null,"line lines connector connectors connection connections arrow arrows bidirectional"),this.createEdgeTemplateEntry("shape=flexArrow;endArrow=classic;html=1;",50,50,"","Arrow",null,"line lines connector connectors connection connections arrow arrows directional directed"),this.createEdgeTemplateEntry("endArrow=none;dashed=1;html=1;",50,50,"","Dashed Line",null,"line lines connector connectors connection connections arrow arrows dashed undirected no"),this.createEdgeTemplateEntry("endArrow=none;dashed=1;html=1;dashPattern=1 3;strokeWidth=2;",50,50,"","Dotted Line",null,"line lines connector connectors connection connections arrow arrows dotted undirected no"),this.createEdgeTemplateEntry("endArrow=none;html=1;",50,50,"","Line",null,"line lines connector connectors connection connections arrow arrows simple undirected plain blank no"),this.createEdgeTemplateEntry("endArrow=classic;startArrow=classic;html=1;",50,50,"","Bidirectional Connector",null,"line lines connector connectors connection connections arrow arrows bidirectional"),this.createEdgeTemplateEntry("endArrow=classic;html=1;",50,50,"","Directional Connector",null,"line lines connector connectors connection connections arrow arrows directional directed"),this.createEdgeTemplateEntry("shape=link;html=1;",100,0,"","Link",null,"line lines connector connectors connection connections arrow arrows link"),this.addEntry("line lines connector connectors connection connections arrow arrows edge title",mxUtils.bind(this,function(){var t=new mxCell("",new mxGeometry(0,0,0,0),"endArrow=classic;html=1;");t.geometry.setTerminalPoint(new mxPoint(0,0),!0),t.geometry.setTerminalPoint(new mxPoint(100,0),!1),t.geometry.relative=!0,t.edge=!0;var e=new mxCell("Label",new mxGeometry(0,0,0,0),"edgeLabel;resizable=0;html=1;align=center;verticalAlign=middle;");return e.geometry.relative=!0,e.setConnectable(!1),e.vertex=!0,t.insert(e),this.createEdgeTemplateFromCells([t],100,0,"Connector with Label")})),this.addEntry("line lines connector connectors connection connections arrow arrows edge title multiplicity",mxUtils.bind(this,function(){var t=new mxCell("",new mxGeometry(0,0,0,0),"endArrow=classic;html=1;");t.geometry.setTerminalPoint(new mxPoint(0,0),!0),t.geometry.setTerminalPoint(new mxPoint(160,0),!1),t.geometry.relative=!0,t.edge=!0;var e=new mxCell("Label",new mxGeometry(0,0,0,0),"edgeLabel;resizable=0;html=1;align=center;verticalAlign=middle;");return e.geometry.relative=!0,e.setConnectable(!1),e.vertex=!0,t.insert(e),(e=new mxCell("Source",new mxGeometry(-1,0,0,0),"edgeLabel;resizable=0;html=1;align=left;verticalAlign=bottom;")).geometry.relative=!0,e.setConnectable(!1),e.vertex=!0,t.insert(e),this.createEdgeTemplateFromCells([t],160,0,"Connector with 2 Labels")})),this.addEntry("line lines connector connectors connection connections arrow arrows edge title multiplicity",mxUtils.bind(this,function(){var t=new mxCell("Label",new mxGeometry(0,0,0,0),"endArrow=classic;html=1;");t.geometry.setTerminalPoint(new mxPoint(0,0),!0),t.geometry.setTerminalPoint(new mxPoint(160,0),!1),t.geometry.relative=!0,t.edge=!0;var e=new mxCell("Label",new mxGeometry(0,0,0,0),"edgeLabel;resizable=0;html=1;align=center;verticalAlign=middle;");return e.geometry.relative=!0,e.setConnectable(!1),e.vertex=!0,t.insert(e),(e=new mxCell("Source",new mxGeometry(-1,0,0,0),"edgeLabel;resizable=0;html=1;align=left;verticalAlign=bottom;")).geometry.relative=!0,e.setConnectable(!1),e.vertex=!0,t.insert(e),(e=new mxCell("Target",new mxGeometry(1,0,0,0),"edgeLabel;resizable=0;html=1;align=right;verticalAlign=bottom;")).geometry.relative=!0,e.setConnectable(!1),e.vertex=!0,t.insert(e),this.createEdgeTemplateFromCells([t],160,0,"Connector with 3 Labels")})),this.addEntry("line lines connector connectors connection connections arrow arrows edge shape symbol message mail email",mxUtils.bind(this,function(){var t=new mxCell("",new mxGeometry(0,0,0,0),"endArrow=classic;html=1;");t.geometry.setTerminalPoint(new mxPoint(0,0),!0),t.geometry.setTerminalPoint(new mxPoint(100,0),!1),t.geometry.relative=!0,t.edge=!0;var e=new mxCell("",new mxGeometry(0,0,20,14),"shape=message;html=1;outlineConnect=0;");return e.geometry.relative=!0,e.vertex=!0,e.geometry.offset=new mxPoint(-10,-7),t.insert(e),this.createEdgeTemplateFromCells([t],100,0,"Connector with Symbol")}))];this.addPaletteFunctions("general",mxResources.get("general"),null==t||t,e),this.setCurrentSearchEntryLibrary()},Sidebar.prototype.addMiscPalette=function(t){var e=this;this.setCurrentSearchEntryLibrary("general","misc");var n=[this.createVertexTemplateEntry("text;strokeColor=none;fillColor=none;html=1;fontSize=24;fontStyle=1;verticalAlign=middle;align=center;",100,40,"Title","Title",null,null,"text heading title"),this.createVertexTemplateEntry("text;strokeColor=none;fillColor=none;html=1;whiteSpace=wrap;verticalAlign=middle;overflow=hidden;",100,80,"<ul><li>Value 1</li><li>Value 2</li><li>Value 3</li></ul>","Unordered List"),this.createVertexTemplateEntry("text;strokeColor=none;fillColor=none;html=1;whiteSpace=wrap;verticalAlign=middle;overflow=hidden;",100,80,"<ol><li>Value 1</li><li>Value 2</li><li>Value 3</li></ol>","Ordered List"),this.addDataEntry("table",180,120,"Table 1","7ZjJTsMwEIafJleUhZZybVgucAFewDTT2pLjiewpaXl6xolLVQFqWBJArZRKns2xv5H7y4myvFxdW1HJWyxAR9lllOUWkdpRucpB6yiNVRFlF1GaxvyL0qsPokkTjSthwVCXgrQteBJ6Ca2ndTha6+BwUlR+SOLRu6aSSl7mRcLDWiqC+0rMfLzmTbDPkbB0r569K2Z7hoaEMmBDzQy1FpVTzWRthlS6uBFrXNLmNRtrGpYHlmD14RYbV9jfNWAJZNecUquCZMiYtBhiCWohN2WBTSxc61i81m6J8SBAex9g1h0gL5mU0HcwI2EWXVi+ZVVYrB6EXQAFR4XKENjLJ6bhgm+utM5Ro0du0PgXEVYhqGG+qX1EIiyDYQOY10kbKKMpP4wpj09G0Yh3k7OdbG1+fLqlHI0jy432c4BwVIPr3MD0aw08/YH+nfbbP2N89rZ/324NMsq5xppNqYoCTFfG2V7G454Qjw4c8WoX7wDEx0fiO3/wAyA/O+pAbzqw3m3TELIwOZQTdPZrsnB+4IiHl4UkPiIfWheS5CgMfQvDZEBhSD5xY/7fZyjZf63u7dD0fKv++5B/QRwO5ia8h3mP6sDm9tNeE9v58vcC"),this.addDataEntry("table",180,120,"Table 2","7ZjBbqMwEIafhmuFISTptbTbS/eyrfbuBie2ZDzITEqyT79jMMlGWVTUBlqVSkTyjGeM+SbDLxPEab67t7yQPyETOojvgji1ANiM8l0qtA6iUGVBfBtEUUi/IPrRMcvq2bDgVhjskxA1CS9cb0XjaRwl7rV3lJIXboj82bluJOa0zVtGw0oqFI8FX7n5ih6CfCVyi4/qj3OFZK/AIFdGWJ+zAq15Uap6sSZCKp098D1ssb1Na7nobW4eKL/00Raqf02/f2FR7DoZ1C4P4F5ALtDuKaRSGUofsWw4hVKojWzTPLyQl41jc8g9IqWBp/p/wnF/wrRlVFz/EivkZtMH9jnMzELxxO1GoHcUoAwKe/dCNFpoa6V1ChpcTQwYdyOEwk9qsW5znwER8ha8B3NYtIaS3NBFmNLwKgkSepqUbHa06XLhFlMwJVr6J7g1BC+xEiX2LWD0tgLOLlC/2Vn9ftfDKGQXLaQxLvpYyHfXCIjpWkNFplRZJkxf2PGrsOcDsU46WV+2aT49690p5xHQzzvRx5NEf3j3j8B+8S0Rg0nE/rRMYyjGsrOVZl+0lRYfphjXnayTabEeXzFY2Ml+Pkn2Y0oGY9+aMbRmLEfUDHZ+EG+bafFFm4m9fiofrHvOD+Ut7eXEaH+AbnSfqK+nCX9A4SDz+DGxnjv51vgX"),this.addDataEntry("table title",180,120,"Table with Title 1","7ZhRb6MwDMc/Da8nAmPdvZbu9nJ7WfcFMnAhUohR4o12n34OpKumrmqlDXa6VqJS/Lcdkp8bWSFK82Z9Z2Vb32MJOkpvozS3iDSMmnUOWkdJrMooXURJEvMvSv4c8IreG7fSgqFTEpIh4UXqZxiUR/mkYVAdbXRQXS1bP6Tem85ranitC8HDrlYEy1YW3t/xTlhzJC0t1auX0piFAg1JZcCGpAK1lq1T/WyLPqJWuvwrN/hM2/dsrfmKs5dhMT5balUZHhe8Sz/lPOwCLMH6IIleChjuABsgu+GQTpVUh4ibgVZcg6rqbVoWROkGoXrP3YHlQWD7Oed0j/NBxLxkUlI/QEHSVKfQ3odZWmwfpa2AgtCi8qhuX5iGC9pKaZ2jRl8Tg8a/iLANTg2rbe4TEmETDBvAvE/aQ8nm/DCmPP6VRRnvJmdb7Gx+fLilHI0jy/8EPwdIRx04OrWAyecF3ATEoUzH6nn1DeW8GrecxvjoXTm/XClksiuNHZu1KkswpyJPj56Z65EQZ2eOeP0R7wTEry/E+4RkOuSzS1sYuy3MJmwLN+dygmY/1hZ+nzni6duCiC/Ip+4LQlwaw9iNQYgJO4PYv2j/p4dIHL9mj3ZqRr5l//uQf6A7nM1V+AjzEdsDm7svgr3vwwfDNw=="),this.addDataEntry("table title",180,150,"Table with Title 2","7Zhdb5swFIZ/DbcTHyVrbiFdb7Kbptq9Cw5YMj7IPi1kv37HYJK1FDWbQoOmSUSyz4dt3id+L/CitGrvNavL75Bz6UV3XpRqAOxHVZtyKb3QF7kXbbww9Onnhd8mskGX9WumucJzGsK+4YXJZ95HHtmT5H3U4EG6qClZbYfYZaOkxIrOuglo2JQC+a5mmc039CYUM8g07sRPG4p8CmSgkAnFtWvKQEpWG9GttukqSiHzLTvAMw77DLNkL1qeP0BjXLeGZkuLGde6p8V37qw2zaQoFI0zEsHumLiX5Bp5OylUF3Iq3XOoOOoDlTQix9JV3PZi+iUXRTm0xS7ITB8ojr0n3WngpH8fQzTCMEmAjoyCyQeeIVPFOTDGWuca6kemC44uUIOwUt29kBpHVYWUKUiwyBQouxFC7ZKS74feJ0CEaiDjhDku2okSJ/SQTKn/JfZiepuU5sFpTo8t15iCMqjpj2LX4Mxgww2eCzB8H+DBSewwfcQzugDOmxHO4KI8lbLVJ55/jMp/gwpI2r2EhqalyHOuztU8+vDS3MykcTzS+Ec3DP2Faz24U1+bGNpQqGLbd65mgNG+BvH7BZgLzupf8LO34JblZ6tP9LOvI5yX5bkcP1tdzc9uJ/1s4VrP52cTMK7gZ+v/fja3n60/0c8Cf8QzWvYl++s7tL6aoQXBpKMtXOz5HG2CxvyORtPTR4Uu9+qbwy8="),this.addDataEntry("crossfunctional cross-functional cross functional flowchart swimlane table",400,400,"Cross-Functional Flowchart","7ZhRb5swEMc/DY+bMCRt97jQpi+tVC2fwINbbMnYyD4C6aefjaHpBrTRlNCoTALJPp9t+P25O5kgTvL6XtOCPaoMRBDfBXGilULfyusEhAiikGdBfBtEUWjvIFqPjJJmNCyoBonHTIj8hB0VJXiL3dyYL+tSpsiVpM55LVSVMqrROxvci9bZMFq4JtKfzrRKGRfZA92rEjtr11tpVT1wCcYOhM5ViTKXry0G7RYb/uwWXDgDw9wCuSW2WTGOsClo6gYri8uvIGhheLN1s4KGtNSG7+AHGL+Os0JdUJm1nUJxiaDvdhZQt/EvJXHTvpTbjAq+lbadgnO1hhYSaIR6FHRjainfg8oB9d66VDxD5j0WoRcjZMC3DP8yUuMN25e5B91so5VuWMa4J+P3FJW2JtLXrOK5oNLJxZTmz/blqXhNp3mO5cpe9smS8OsyWNp5ie2TQ99ezl1joqRBTXmDAajBCgxejprHKBcNK7fvBPIz3hOSRCcQctET8olRA+8JmSopIW2j8GOD6Sji8TDxepT4C9yTE1+OEo/mQ5xcTYn8ahR5PB/k0c2UyK9HC8SbX/mnLBAnqAlD8XK+onDTE+/fw+TiQF9fTin4Nl/O0xYAEs6X9LR5n5Ae6S7xv1lr/yf+4cQ/pN75Ej/pH88/UZyQkRPzR6R+0j9Bz4f0xMm/f8adD+qzZn/bPfw5bMb++LH4Gw=="),this.createVertexTemplateEntry("text;html=1;strokeColor=#c0c0c0;fillColor=#ffffff;overflow=fill;rounded=0;",280,160,'<table border="1" width="100%" height="100%" cellpadding="4" style="width:100%;height:100%;border-collapse:collapse;"><tr style="background-color:#A7C942;color:#ffffff;border:1px solid #98bf21;"><th align="left">Title 1</th><th align="left">Title 2</th><th align="left">Title 3</th></tr><tr style="border:1px solid #98bf21;"><td>Value 1</td><td>Value 2</td><td>Value 3</td></tr><tr style="background-color:#EAF2D3;border:1px solid #98bf21;"><td>Value 4</td><td>Value 5</td><td>Value 6</td></tr><tr style="border:1px solid #98bf21;"><td>Value 7</td><td>Value 8</td><td>Value 9</td></tr><tr style="background-color:#EAF2D3;border:1px solid #98bf21;"><td>Value 10</td><td>Value 11</td><td>Value 12</td></tr></table>',"HTML Table 1"),this.createVertexTemplateEntry("text;html=1;strokeColor=#c0c0c0;fillColor=none;overflow=fill;",180,140,'<table border="0" width="100%" height="100%" style="width:100%;height:100%;border-collapse:collapse;"><tr><td align="center">Value 1</td><td align="center">Value 2</td><td align="center">Value 3</td></tr><tr><td align="center">Value 4</td><td align="center">Value 5</td><td align="center">Value 6</td></tr><tr><td align="center">Value 7</td><td align="center">Value 8</td><td align="center">Value 9</td></tr></table>',"HTML Table 2"),this.createVertexTemplateEntry("text;html=1;strokeColor=none;fillColor=none;overflow=fill;",180,140,'<table border="1" width="100%" height="100%" style="width:100%;height:100%;border-collapse:collapse;"><tr><td align="center">Value 1</td><td align="center">Value 2</td><td align="center">Value 3</td></tr><tr><td align="center">Value 4</td><td align="center">Value 5</td><td align="center">Value 6</td></tr><tr><td align="center">Value 7</td><td align="center">Value 8</td><td align="center">Value 9</td></tr></table>',"HTML Table 3"),this.createVertexTemplateEntry("text;html=1;strokeColor=none;fillColor=none;overflow=fill;",160,140,'<table border="1" width="100%" height="100%" cellpadding="4" style="width:100%;height:100%;border-collapse:collapse;"><tr><th align="center"><b>Title</b></th></tr><tr><td align="center">Section 1.1\nSection 1.2\nSection 1.3</td></tr><tr><td align="center">Section 2.1\nSection 2.2\nSection 2.3</td></tr></table>',"HTML Table 4"),this.addEntry("link hyperlink",mxUtils.bind(this,function(){var t=new mxCell("Link",new mxGeometry(0,0,60,40),"text;html=1;strokeColor=none;fillColor=none;whiteSpace=wrap;align=center;verticalAlign=middle;fontColor=#0000EE;fontStyle=4;");return t.vertex=!0,this.graph.setLinkForCell(t,"https://www.draw.io"),this.createVertexTemplateFromCells([t],t.geometry.width,t.geometry.height,"Link")})),this.addEntry("timestamp date time text label",mxUtils.bind(this,function(){var t=new mxCell("%date{ddd mmm dd yyyy HH:MM:ss}%",new mxGeometry(0,0,160,20),"text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;overflow=hidden;");return t.vertex=!0,this.graph.setAttributeForCell(t,"placeholders","1"),this.createVertexTemplateFromCells([t],t.geometry.width,t.geometry.height,"Timestamp")})),this.addEntry("variable placeholder metadata hello world text label",mxUtils.bind(this,function(){var t=new mxCell("%name% Text",new mxGeometry(0,0,80,20),"text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;overflow=hidden;");return t.vertex=!0,this.graph.setAttributeForCell(t,"placeholders","1"),this.graph.setAttributeForCell(t,"name","Variable"),this.createVertexTemplateFromCells([t],t.geometry.width,t.geometry.height,"Variable")})),this.createVertexTemplateEntry("shape=ext;double=1;rounded=0;whiteSpace=wrap;html=1;",120,80,"","Double Rectangle",null,null,"rect rectangle box double"),this.createVertexTemplateEntry("shape=ext;double=1;rounded=1;whiteSpace=wrap;html=1;",120,80,"","Double Rounded Rectangle",null,null,"rounded rect rectangle box double"),this.createVertexTemplateEntry("ellipse;shape=doubleEllipse;whiteSpace=wrap;html=1;",100,60,"","Double Ellipse",null,null,"oval ellipse start end state double"),this.createVertexTemplateEntry("shape=ext;double=1;whiteSpace=wrap;html=1;aspect=fixed;",80,80,"","Double Square",null,null,"double square"),this.createVertexTemplateEntry("ellipse;shape=doubleEllipse;whiteSpace=wrap;html=1;aspect=fixed;",80,80,"","Double Circle",null,null,"double circle"),this.createVertexTemplateEntry("rounded=1;whiteSpace=wrap;html=1;strokeWidth=2;fillWeight=4;hachureGap=8;hachureAngle=45;fillColor=#1ba1e2;sketch=1;",120,60,"","Rectangle Sketch",!0,null,"rectangle rect box text sketch comic retro"),this.createVertexTemplateEntry("ellipse;whiteSpace=wrap;html=1;strokeWidth=2;fillWeight=2;hachureGap=8;fillColor=#990000;fillStyle=dots;sketch=1;",120,60,"","Ellipse Sketch",!0,null,"ellipse oval sketch comic retro"),this.createVertexTemplateEntry("rhombus;whiteSpace=wrap;html=1;strokeWidth=2;fillWeight=-1;hachureGap=8;fillStyle=cross-hatch;fillColor=#006600;sketch=1;",120,60,"","Diamond Sketch",!0,null,"diamond sketch comic retro"),this.createVertexTemplateEntry("html=1;whiteSpace=wrap;shape=isoCube2;backgroundOutline=1;isoAngle=15;",90,100,"","Isometric Cube",!0,null,"cube box iso isometric"),this.createVertexTemplateEntry("html=1;whiteSpace=wrap;aspect=fixed;shape=isoRectangle;",150,90,"","Isometric Square",!0,null,"rectangle rect box iso isometric"),this.createEdgeTemplateEntry("edgeStyle=isometricEdgeStyle;endArrow=none;html=1;",50,100,"","Isometric Edge 1"),this.createEdgeTemplateEntry("edgeStyle=isometricEdgeStyle;endArrow=none;html=1;elbow=vertical;",50,100,"","Isometric Edge 2"),this.createVertexTemplateEntry("shape=curlyBracket;whiteSpace=wrap;html=1;rounded=1;",20,120,"","Left Curly Bracket"),this.createVertexTemplateEntry("shape=curlyBracket;whiteSpace=wrap;html=1;rounded=1;flipH=1;",20,120,"","Right Curly Bracket"),this.createVertexTemplateEntry("line;strokeWidth=2;html=1;",160,10,"","Horizontal Line"),this.createVertexTemplateEntry("line;strokeWidth=2;direction=south;html=1;",10,160,"","Vertical Line"),this.createVertexTemplateEntry("line;strokeWidth=4;html=1;perimeter=backbonePerimeter;points=[];outlineConnect=0;",160,10,"","Horizontal Backbone",!1,null,"backbone bus network"),this.createVertexTemplateEntry("line;strokeWidth=4;direction=south;html=1;perimeter=backbonePerimeter;points=[];outlineConnect=0;",10,160,"","Vertical Backbone",!1,null,"backbone bus network"),this.createVertexTemplateEntry("shape=crossbar;whiteSpace=wrap;html=1;rounded=1;",120,20,"","Horizontal Crossbar",!1,null,"crossbar distance measure dimension unit"),this.createVertexTemplateEntry("shape=crossbar;whiteSpace=wrap;html=1;rounded=1;direction=south;",20,120,"","Vertical Crossbar",!1,null,"crossbar distance measure dimension unit"),this.createVertexTemplateEntry("shape=image;html=1;verticalLabelPosition=bottom;verticalAlign=top;imageAspect=1;aspect=fixed;image="+this.gearImage,52,61,"","Image (Fixed Aspect)",!1,null,"fixed image icon symbol"),this.createVertexTemplateEntry("shape=image;html=1;verticalLabelPosition=bottom;verticalAlign=top;imageAspect=0;image="+this.gearImage,50,60,"","Image (Variable Aspect)",!1,null,"strechted image icon symbol"),this.createVertexTemplateEntry("icon;html=1;image="+this.gearImage,60,60,"Icon","Icon",!1,null,"icon image symbol"),this.createVertexTemplateEntry("label;whiteSpace=wrap;html=1;image="+this.gearImage,140,60,"Label","Label 1",null,null,"label image icon symbol"),this.createVertexTemplateEntry("label;whiteSpace=wrap;html=1;align=center;verticalAlign=bottom;spacingLeft=0;spacingBottom=4;imageAlign=center;imageVerticalAlign=top;image="+this.gearImage,120,80,"Label","Label 2",null,null,"label image icon symbol"),this.addEntry("shape group container",function(){var t=new mxCell("Label",new mxGeometry(0,0,160,70),"html=1;whiteSpace=wrap;container=1;recursiveResize=0;collapsible=0;");t.vertex=!0;var n=new mxCell("",new mxGeometry(20,20,20,30),"triangle;html=1;whiteSpace=wrap;");return n.vertex=!0,t.insert(n),e.createVertexTemplateFromCells([t],t.geometry.width,t.geometry.height,"Shape Group")}),this.createVertexTemplateEntry("shape=partialRectangle;whiteSpace=wrap;html=1;left=0;right=0;fillColor=none;",120,60,"","Partial Rectangle"),this.createVertexTemplateEntry("shape=partialRectangle;whiteSpace=wrap;html=1;bottom=0;top=0;fillColor=none;",120,60,"","Partial Rectangle"),this.createVertexTemplateEntry("shape=partialRectangle;whiteSpace=wrap;html=1;bottom=0;right=0;fillColor=none;",120,60,"","Partial Rectangle"),this.createVertexTemplateEntry("shape=partialRectangle;whiteSpace=wrap;html=1;bottom=1;right=1;left=1;top=0;fillColor=none;routingCenterX=-0.5;",120,60,"","Partial Rectangle"),this.createVertexTemplateEntry("shape=waypoint;sketch=0;size=6;pointerEvents=1;points=[];fillColor=none;resizable=0;rotatable=0;perimeter=centerPerimeter;snapToPoint=1;",40,40,"","Waypoint"),this.createEdgeTemplateEntry("edgeStyle=segmentEdgeStyle;endArrow=classic;html=1;",50,50,"","Manual Line",null,"line lines connector connectors connection connections arrow arrows manual"),this.createEdgeTemplateEntry("shape=filledEdge;rounded=0;fixDash=1;endArrow=none;strokeWidth=10;fillColor=#ffffff;edgeStyle=orthogonalEdgeStyle;",60,40,"","Filled Edge"),this.createEdgeTemplateEntry("edgeStyle=elbowEdgeStyle;elbow=horizontal;endArrow=classic;html=1;",50,50,"","Horizontal Elbow",null,"line lines connector connectors connection connections arrow arrows elbow horizontal"),this.createEdgeTemplateEntry("edgeStyle=elbowEdgeStyle;elbow=vertical;endArrow=classic;html=1;",50,50,"","Vertical Elbow",null,"line lines connector connectors connection connections arrow arrows elbow vertical")];this.addPaletteFunctions("misc",mxResources.get("misc"),null==t||t,n),this.setCurrentSearchEntryLibrary()},Sidebar.prototype.addAdvancedPalette=function(t){this.setCurrentSearchEntryLibrary("general","advanced"),this.addPaletteFunctions("advanced",mxResources.get("advanced"),null!=t&&t,this.createAdvancedShapes()),this.setCurrentSearchEntryLibrary()},Sidebar.prototype.addBasicPalette=function(t){this.setCurrentSearchEntryLibrary("basic"),this.addStencilPalette("basic",mxResources.get("basic"),t+"/basic.xml",";whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#000000;strokeWidth=2",null,null,null,null,[this.createVertexTemplateEntry("shape=partialRectangle;whiteSpace=wrap;html=1;top=0;bottom=0;fillColor=none;",120,60,"","Partial Rectangle"),this.createVertexTemplateEntry("shape=partialRectangle;whiteSpace=wrap;html=1;right=0;top=0;bottom=0;fillColor=none;routingCenterX=-0.5;",120,60,"","Partial Rectangle"),this.createVertexTemplateEntry("shape=partialRectangle;whiteSpace=wrap;html=1;bottom=0;right=0;fillColor=none;",120,60,"","Partial Rectangle"),this.createVertexTemplateEntry("shape=partialRectangle;whiteSpace=wrap;html=1;top=0;left=0;fillColor=none;",120,60,"","Partial Rectangle")]),this.setCurrentSearchEntryLibrary()},Sidebar.prototype.createAdvancedShapes=function(){var t=this,e=new mxCell("List Item",new mxGeometry(0,0,60,26),"text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;");return e.vertex=!0,[this.createVertexTemplateEntry("shape=tapeData;whiteSpace=wrap;html=1;perimeter=ellipsePerimeter;",80,80,"","Tape Data"),this.createVertexTemplateEntry("shape=manualInput;whiteSpace=wrap;html=1;",80,80,"","Manual Input"),this.createVertexTemplateEntry("shape=loopLimit;whiteSpace=wrap;html=1;",100,80,"","Loop Limit"),this.createVertexTemplateEntry("shape=offPageConnector;whiteSpace=wrap;html=1;",80,80,"","Off Page Connector"),this.createVertexTemplateEntry("shape=delay;whiteSpace=wrap;html=1;",80,40,"","Delay"),this.createVertexTemplateEntry("shape=display;whiteSpace=wrap;html=1;",80,40,"","Display"),this.createVertexTemplateEntry("shape=singleArrow;direction=west;whiteSpace=wrap;html=1;",100,60,"","Arrow Left"),this.createVertexTemplateEntry("shape=singleArrow;whiteSpace=wrap;html=1;",100,60,"","Arrow Right"),this.createVertexTemplateEntry("shape=singleArrow;direction=north;whiteSpace=wrap;html=1;",60,100,"","Arrow Up"),this.createVertexTemplateEntry("shape=singleArrow;direction=south;whiteSpace=wrap;html=1;",60,100,"","Arrow Down"),this.createVertexTemplateEntry("shape=doubleArrow;whiteSpace=wrap;html=1;",100,60,"","Double Arrow"),this.createVertexTemplateEntry("shape=doubleArrow;direction=south;whiteSpace=wrap;html=1;",60,100,"","Double Arrow Vertical",null,null,"double arrow"),this.createVertexTemplateEntry("shape=actor;whiteSpace=wrap;html=1;",40,60,"","User",null,null,"user person human"),this.createVertexTemplateEntry("shape=cross;whiteSpace=wrap;html=1;",80,80,"","Cross"),this.createVertexTemplateEntry("shape=corner;whiteSpace=wrap;html=1;",80,80,"","Corner"),this.createVertexTemplateEntry("shape=tee;whiteSpace=wrap;html=1;",80,80,"","Tee"),this.createVertexTemplateEntry("shape=datastore;whiteSpace=wrap;html=1;",60,60,"","Data Store",null,null,"data store cylinder database"),this.createVertexTemplateEntry("shape=orEllipse;perimeter=ellipsePerimeter;whiteSpace=wrap;html=1;backgroundOutline=1;",80,80,"","Or",null,null,"or circle oval ellipse"),this.createVertexTemplateEntry("shape=sumEllipse;perimeter=ellipsePerimeter;whiteSpace=wrap;html=1;backgroundOutline=1;",80,80,"","Sum",null,null,"sum circle oval ellipse"),this.createVertexTemplateEntry("shape=lineEllipse;perimeter=ellipsePerimeter;whiteSpace=wrap;html=1;backgroundOutline=1;",80,80,"","Ellipse with horizontal divider",null,null,"circle oval ellipse"),this.createVertexTemplateEntry("shape=lineEllipse;line=vertical;perimeter=ellipsePerimeter;whiteSpace=wrap;html=1;backgroundOutline=1;",80,80,"","Ellipse with vertical divider",null,null,"circle oval ellipse"),this.createVertexTemplateEntry("shape=sortShape;perimeter=rhombusPerimeter;whiteSpace=wrap;html=1;",80,80,"","Sort",null,null,"sort"),this.createVertexTemplateEntry("shape=collate;whiteSpace=wrap;html=1;",80,80,"","Collate",null,null,"collate"),this.createVertexTemplateEntry("shape=switch;whiteSpace=wrap;html=1;",60,60,"","Switch",null,null,"switch router"),this.addEntry("process bar",function(){return t.createVertexTemplateFromData("zZXRaoMwFIafJpcDjbNrb2233rRQ8AkyPdPQaCRJV+3T7yTG2rUVBoOtgpDzn/xJzncCIdGyateKNeVW5iBI9EqipZLS9KOqXYIQhAY8J9GKUBrgT+jbRDZ02aBhCmrzEwPtDZ9MHKBXdkpmoDWKCVN9VptO+Kw+8kqwGqMkK7nIN6yTB7uTNizbD1FSSsVPsjYMC1qFKHxwIZZSSIVxLZ1/nJNar5+oQPMT7IYCrqUta1ENzuqGaeOFTArBGs3f3Vmtoo2Se7ja1h00kSoHK4bBIKUNy3hdoPYU0mF91i9mT8EEL2ocZ3gKa00ayWujLZY4IfHKFonVDLsRGgXuQ90zBmWgneyTk3yT1iArMKrDKUeem9L3ajHrbSXwohxsQd/ggOleKM7ese048J2/fwuim1uQGmhQCW8vQMkacP3GCQgBFMftHEsr7cYYe95CnmKTPMFbYD8CQ++DGQy+/M5X4ku5wHYmdIktfvk9tecpavThqS3m/0YtnqIWPTy1cD77K2wYjo+Ay317I74A",296,100,"Process Bar")}),this.createVertexTemplateEntry("swimlane;",200,200,"Container","Container",null,null,"container swimlane lane pool group"),this.addEntry("list group erd table",function(){var n=new mxCell("List",new mxGeometry(0,0,140,110),"swimlane;fontStyle=0;childLayout=stackLayout;horizontal=1;startSize=26;fillColor=none;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=1;marginBottom=0;");return n.vertex=!0,n.insert(t.cloneCell(e,"Item 1")),n.insert(t.cloneCell(e,"Item 2")),n.insert(t.cloneCell(e,"Item 3")),t.createVertexTemplateFromCells([n],n.geometry.width,n.geometry.height,"List")}),this.addEntry("list item entry value group erd table",function(){return t.createVertexTemplateFromCells([t.cloneCell(e,"List Item")],e.geometry.width,e.geometry.height,"List Item")})]},Sidebar.prototype.createAdvancedShapes=function(){var t=this,e=new mxCell("List Item",new mxGeometry(0,0,60,26),"text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;");return e.vertex=!0,[this.createVertexTemplateEntry("shape=tapeData;whiteSpace=wrap;html=1;perimeter=ellipsePerimeter;",80,80,"","Tape Data"),this.createVertexTemplateEntry("shape=manualInput;whiteSpace=wrap;html=1;",80,80,"","Manual Input"),this.createVertexTemplateEntry("shape=loopLimit;whiteSpace=wrap;html=1;",100,80,"","Loop Limit"),this.createVertexTemplateEntry("shape=offPageConnector;whiteSpace=wrap;html=1;",80,80,"","Off Page Connector"),this.createVertexTemplateEntry("shape=delay;whiteSpace=wrap;html=1;",80,40,"","Delay"),this.createVertexTemplateEntry("shape=display;whiteSpace=wrap;html=1;",80,40,"","Display"),this.createVertexTemplateEntry("shape=singleArrow;direction=west;whiteSpace=wrap;html=1;",100,60,"","Arrow Left"),this.createVertexTemplateEntry("shape=singleArrow;whiteSpace=wrap;html=1;",100,60,"","Arrow Right"),this.createVertexTemplateEntry("shape=singleArrow;direction=north;whiteSpace=wrap;html=1;",60,100,"","Arrow Up"),this.createVertexTemplateEntry("shape=singleArrow;direction=south;whiteSpace=wrap;html=1;",60,100,"","Arrow Down"),this.createVertexTemplateEntry("shape=doubleArrow;whiteSpace=wrap;html=1;",100,60,"","Double Arrow"),this.createVertexTemplateEntry("shape=doubleArrow;direction=south;whiteSpace=wrap;html=1;",60,100,"","Double Arrow Vertical",null,null,"double arrow"),this.createVertexTemplateEntry("shape=actor;whiteSpace=wrap;html=1;",40,60,"","User",null,null,"user person human"),this.createVertexTemplateEntry("shape=cross;whiteSpace=wrap;html=1;",80,80,"","Cross"),this.createVertexTemplateEntry("shape=corner;whiteSpace=wrap;html=1;",80,80,"","Corner"),this.createVertexTemplateEntry("shape=tee;whiteSpace=wrap;html=1;",80,80,"","Tee"),this.createVertexTemplateEntry("shape=datastore;whiteSpace=wrap;html=1;",60,60,"","Data Store",null,null,"data store cylinder database"),this.createVertexTemplateEntry("shape=orEllipse;perimeter=ellipsePerimeter;whiteSpace=wrap;html=1;backgroundOutline=1;",80,80,"","Or",null,null,"or circle oval ellipse"),this.createVertexTemplateEntry("shape=sumEllipse;perimeter=ellipsePerimeter;whiteSpace=wrap;html=1;backgroundOutline=1;",80,80,"","Sum",null,null,"sum circle oval ellipse"),this.createVertexTemplateEntry("shape=lineEllipse;perimeter=ellipsePerimeter;whiteSpace=wrap;html=1;backgroundOutline=1;",80,80,"","Ellipse with horizontal divider",null,null,"circle oval ellipse"),this.createVertexTemplateEntry("shape=lineEllipse;line=vertical;perimeter=ellipsePerimeter;whiteSpace=wrap;html=1;backgroundOutline=1;",80,80,"","Ellipse with vertical divider",null,null,"circle oval ellipse"),this.createVertexTemplateEntry("shape=sortShape;perimeter=rhombusPerimeter;whiteSpace=wrap;html=1;",80,80,"","Sort",null,null,"sort"),this.createVertexTemplateEntry("shape=collate;whiteSpace=wrap;html=1;",80,80,"","Collate",null,null,"collate"),this.createVertexTemplateEntry("shape=switch;whiteSpace=wrap;html=1;",60,60,"","Switch",null,null,"switch router"),this.addEntry("process bar",function(){return t.createVertexTemplateFromData("zZXRaoMwFIafJpcDjbNrb2233rRQ8AkyPdPQaCRJV+3T7yTG2rUVBoOtgpDzn/xJzncCIdGyateKNeVW5iBI9EqipZLS9KOqXYIQhAY8J9GKUBrgT+jbRDZ02aBhCmrzEwPtDZ9MHKBXdkpmoDWKCVN9VptO+Kw+8kqwGqMkK7nIN6yTB7uTNizbD1FSSsVPsjYMC1qFKHxwIZZSSIVxLZ1/nJNar5+oQPMT7IYCrqUta1ENzuqGaeOFTArBGs3f3Vmtoo2Se7ja1h00kSoHK4bBIKUNy3hdoPYU0mF91i9mT8EEL2ocZ3gKa00ayWujLZY4IfHKFonVDLsRGgXuQ90zBmWgneyTk3yT1iArMKrDKUeem9L3ajHrbSXwohxsQd/ggOleKM7ese048J2/fwuim1uQGmhQCW8vQMkacP3GCQgBFMftHEsr7cYYe95CnmKTPMFbYD8CQ++DGQy+/M5X4ku5wHYmdIktfvk9tecpavThqS3m/0YtnqIWPTy1cD77K2wYjo+Ay317I74A",296,100,"Process Bar")}),this.createVertexTemplateEntry("swimlane;",200,200,"Container","Container",null,null,"container swimlane lane pool group"),this.addEntry("list group erd table",function(){var n=new mxCell("List",new mxGeometry(0,0,140,110),"swimlane;fontStyle=0;childLayout=stackLayout;horizontal=1;startSize=26;fillColor=none;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=1;marginBottom=0;");return n.vertex=!0,n.insert(t.cloneCell(e,"Item 1")),n.insert(t.cloneCell(e,"Item 2")),n.insert(t.cloneCell(e,"Item 3")),t.createVertexTemplateFromCells([n],n.geometry.width,n.geometry.height,"List")}),this.addEntry("list item entry value group erd table",function(){return t.createVertexTemplateFromCells([t.cloneCell(e,"List Item")],e.geometry.width,e.geometry.height,"List Item")})]},Sidebar.prototype.addBasicPalette=function(t){this.setCurrentSearchEntryLibrary("basic"),this.addStencilPalette("basic",mxResources.get("basic"),t+"/basic.xml",";whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#000000;strokeWidth=2",null,null,null,null,[this.createVertexTemplateEntry("shape=partialRectangle;whiteSpace=wrap;html=1;top=0;bottom=0;fillColor=none;",120,60,"","Partial Rectangle"),this.createVertexTemplateEntry("shape=partialRectangle;whiteSpace=wrap;html=1;right=0;top=0;bottom=0;fillColor=none;routingCenterX=-0.5;",120,60,"","Partial Rectangle"),this.createVertexTemplateEntry("shape=partialRectangle;whiteSpace=wrap;html=1;bottom=0;right=0;fillColor=none;",120,60,"","Partial Rectangle"),this.createVertexTemplateEntry("shape=partialRectangle;whiteSpace=wrap;html=1;top=0;left=0;fillColor=none;",120,60,"","Partial Rectangle")]),this.setCurrentSearchEntryLibrary()},Sidebar.prototype.addUmlPalette=function(t){var e=this,n=new mxCell("+ field: type",new mxGeometry(0,0,100,26),"text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;");n.vertex=!0;var i=new mxCell("",new mxGeometry(0,0,40,8),"line;strokeWidth=1;fillColor=none;align=left;verticalAlign=middle;spacingTop=-1;spacingLeft=3;spacingRight=3;rotatable=0;labelPosition=right;points=[];portConstraint=eastwest;");i.vertex=!0,this.setCurrentSearchEntryLibrary("uml");var l=[this.createVertexTemplateEntry("html=1;",110,50,"Object","Object",null,null,"uml static class object instance"),this.createVertexTemplateEntry("html=1;",110,50,"&laquo;interface&raquo;<br><b>Name</b>","Interface",null,null,"uml static class interface object instance annotated annotation"),this.addEntry("uml static class object instance",function(){var t=new mxCell("Classname",new mxGeometry(0,0,160,90),"swimlane;fontStyle=1;align=center;verticalAlign=top;childLayout=stackLayout;horizontal=1;startSize=26;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=1;marginBottom=0;");return t.vertex=!0,t.insert(n.clone()),t.insert(i.clone()),t.insert(e.cloneCell(n,"+ method(type): type")),e.createVertexTemplateFromCells([t],t.geometry.width,t.geometry.height,"Class")}),this.addEntry("uml static class section subsection",function(){var t=new mxCell("Classname",new mxGeometry(0,0,140,110),"swimlane;fontStyle=0;childLayout=stackLayout;horizontal=1;startSize=26;fillColor=none;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=1;marginBottom=0;");return t.vertex=!0,t.insert(n.clone()),t.insert(n.clone()),t.insert(n.clone()),e.createVertexTemplateFromCells([t],t.geometry.width,t.geometry.height,"Class 2")}),this.addEntry("uml static class item member method function variable field attribute label",function(){return e.createVertexTemplateFromCells([e.cloneCell(n,"+ item: attribute")],n.geometry.width,n.geometry.height,"Item 1")}),this.addEntry("uml static class item member method function variable field attribute label",function(){var t=new mxCell("item: attribute",new mxGeometry(0,0,120,n.geometry.height),"label;fontStyle=0;strokeColor=none;fillColor=none;align=left;verticalAlign=top;overflow=hidden;spacingLeft=28;spacingRight=4;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;imageWidth=16;imageHeight=16;image="+e.gearImage);return t.vertex=!0,e.createVertexTemplateFromCells([t],t.geometry.width,t.geometry.height,"Item 2")}),this.addEntry("uml static class divider hline line separator",function(){return e.createVertexTemplateFromCells([i.clone()],i.geometry.width,i.geometry.height,"Divider")}),this.addEntry("uml static class spacer space gap separator",function(){var t=new mxCell("",new mxGeometry(0,0,20,14),"text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingTop=-1;spacingLeft=4;spacingRight=4;rotatable=0;labelPosition=right;points=[];portConstraint=eastwest;");return t.vertex=!0,e.createVertexTemplateFromCells([t.clone()],t.geometry.width,t.geometry.height,"Spacer")}),this.createVertexTemplateEntry("text;align=center;fontStyle=1;verticalAlign=middle;spacingLeft=3;spacingRight=3;strokeColor=none;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;",80,26,"Title","Title",null,null,"uml static class title label"),this.addEntry("uml static class component",function(){var t=new mxCell("&laquo;Annotation&raquo;<br/><b>Component</b>",new mxGeometry(0,0,180,90),"html=1;dropTarget=0;");t.vertex=!0;var n=new mxCell("",new mxGeometry(1,0,20,20),"shape=module;jettyWidth=8;jettyHeight=4;");return n.vertex=!0,n.geometry.relative=!0,n.geometry.offset=new mxPoint(-27,7),t.insert(n),e.createVertexTemplateFromCells([t],t.geometry.width,t.geometry.height,"Component")}),this.addEntry("uml static class component",function(){var t=new mxCell('<p style="margin:0px;margin-top:6px;text-align:center;"><b>Component</b></p><hr/><p style="margin:0px;margin-left:8px;">+ Attribute1: Type<br/>+ Attribute2: Type</p>',new mxGeometry(0,0,180,90),"align=left;overflow=fill;html=1;dropTarget=0;");t.vertex=!0;var n=new mxCell("",new mxGeometry(1,0,20,20),"shape=component;jettyWidth=8;jettyHeight=4;");return n.vertex=!0,n.geometry.relative=!0,n.geometry.offset=new mxPoint(-24,4),t.insert(n),e.createVertexTemplateFromCells([t],t.geometry.width,t.geometry.height,"Component with Attributes")}),this.createVertexTemplateEntry("verticalAlign=top;align=left;spacingTop=8;spacingLeft=2;spacingRight=12;shape=cube;size=10;direction=south;fontStyle=4;html=1;",180,120,"Block","Block",null,null,"uml static class block"),this.createVertexTemplateEntry("shape=module;align=left;spacingLeft=20;align=center;verticalAlign=top;",100,50,"Module","Module",null,null,"uml static class module component"),this.createVertexTemplateEntry("shape=folder;fontStyle=1;spacingTop=10;tabWidth=40;tabHeight=14;tabPosition=left;html=1;",70,50,"package","Package",null,null,"uml static class package"),this.createVertexTemplateEntry("verticalAlign=top;align=left;overflow=fill;fontSize=12;fontFamily=Helvetica;html=1;",160,90,'<p style="margin:0px;margin-top:4px;text-align:center;text-decoration:underline;"><b>Object:Type</b></p><hr/><p style="margin:0px;margin-left:8px;">field1 = value1<br/>field2 = value2<br>field3 = value3</p>',"Object",null,null,"uml static class object instance"),this.createVertexTemplateEntry("verticalAlign=top;align=left;overflow=fill;html=1;",180,90,'<div style="box-sizing:border-box;width:100%;background:#e4e4e4;padding:2px;">Tablename</div><table style="width:100%;font-size:1em;" cellpadding="2" cellspacing="0"><tr><td>PK</td><td>uniqueId</td></tr><tr><td>FK1</td><td>foreignKey</td></tr><tr><td></td><td>fieldname</td></tr></table>',"Entity",null,null,"er entity table"),this.addEntry("uml static class object instance",function(){var t=new mxCell('<p style="margin:0px;margin-top:4px;text-align:center;"><b>Class</b></p><hr size="1"/><div style="height:2px;"></div>',new mxGeometry(0,0,140,60),"verticalAlign=top;align=left;overflow=fill;fontSize=12;fontFamily=Helvetica;html=1;");return t.vertex=!0,e.createVertexTemplateFromCells([t.clone()],t.geometry.width,t.geometry.height,"Class 3")}),this.addEntry("uml static class object instance",function(){var t=new mxCell('<p style="margin:0px;margin-top:4px;text-align:center;"><b>Class</b></p><hr size="1"/><div style="height:2px;"></div><hr size="1"/><div style="height:2px;"></div>',new mxGeometry(0,0,140,60),"verticalAlign=top;align=left;overflow=fill;fontSize=12;fontFamily=Helvetica;html=1;");return t.vertex=!0,e.createVertexTemplateFromCells([t.clone()],t.geometry.width,t.geometry.height,"Class 4")}),this.addEntry("uml static class object instance",function(){var t=new mxCell('<p style="margin:0px;margin-top:4px;text-align:center;"><b>Class</b></p><hr size="1"/><p style="margin:0px;margin-left:4px;">+ field: Type</p><hr size="1"/><p style="margin:0px;margin-left:4px;">+ method(): Type</p>',new mxGeometry(0,0,160,90),"verticalAlign=top;align=left;overflow=fill;fontSize=12;fontFamily=Helvetica;html=1;");return t.vertex=!0,e.createVertexTemplateFromCells([t.clone()],t.geometry.width,t.geometry.height,"Class 5")}),this.addEntry("uml static class object instance",function(){var t=new mxCell('<p style="margin:0px;margin-top:4px;text-align:center;"><i>&lt;&lt;Interface&gt;&gt;</i><br/><b>Interface</b></p><hr size="1"/><p style="margin:0px;margin-left:4px;">+ field1: Type<br/>+ field2: Type</p><hr size="1"/><p style="margin:0px;margin-left:4px;">+ method1(Type): Type<br/>+ method2(Type, Type): Type</p>',new mxGeometry(0,0,190,140),"verticalAlign=top;align=left;overflow=fill;fontSize=12;fontFamily=Helvetica;html=1;");return t.vertex=!0,e.createVertexTemplateFromCells([t.clone()],t.geometry.width,t.geometry.height,"Interface 2")}),this.createVertexTemplateEntry("shape=providedRequiredInterface;html=1;verticalLabelPosition=bottom;",20,20,"","Provided/Required Interface",null,null,"uml provided required interface lollipop notation"),this.createVertexTemplateEntry("shape=requiredInterface;html=1;verticalLabelPosition=bottom;",10,20,"","Required Interface",null,null,"uml required interface lollipop notation"),this.addEntry("uml lollipop notation provided required interface",function(){return e.createVertexTemplateFromData("zVTBrptADPyavVYEkt4b0uQd3pMq5dD2uAUD27dgZJwE8vX1spsQlETtpVWRIjFjex3PmFVJWvc70m31hjlYlXxWSUqI7N/qPgVrVRyZXCUbFceR/FS8fRJdjNGo1QQN/0lB7AuO2h7AM57oeLCBIDw0Obj8SCVrJK6wxEbbV8RWyIWQP4F52Juzq9AHRqEqrm2IQpN/IsKTwAYb8MzWWBuO9B0hL2E2BGsqIQyxvJ9rzApD7QBrYBokhcBqNsf5UbrzsLzmXUu/oJET42jwGat5QYcHyiDkTDLKy03TiRrFfSx08m+FrrQtUkOZvZdbFKThmwMfVhf4fQ43/W3uZriiPPT+KKhjwnf4anKuQv//wsg+NPJ7/9d9Xf7eVykwbeeMOFWGYd/qzEVO8tHP/Suw4a2ujXV/+gXsEdhkOgSC8os44BQt0tggicZHeG1N2QiXibhAV48epRayEDd8MT7Ct06TUaXVWq027tCuhcx5VZjebeeaoDNn/WMcb/p+j0AM/dNr6InLl4Lgzylsk6OCgRWYsuI592gNZh5OhgmcblPv7+1l+ws=",40,10,"Lollipop Notation")}),this.createVertexTemplateEntry("shape=umlBoundary;whiteSpace=wrap;html=1;",100,80,"Boundary Object","Boundary Object",null,null,"uml boundary object"),this.createVertexTemplateEntry("ellipse;shape=umlEntity;whiteSpace=wrap;html=1;",80,80,"Entity Object","Entity Object",null,null,"uml entity object"),this.createVertexTemplateEntry("ellipse;shape=umlControl;whiteSpace=wrap;html=1;",70,80,"Control Object","Control Object",null,null,"uml control object"),this.createVertexTemplateEntry("shape=umlActor;verticalLabelPosition=bottom;verticalAlign=top;html=1;",30,60,"Actor","Actor",!1,null,"uml actor"),this.createVertexTemplateEntry("ellipse;whiteSpace=wrap;html=1;",140,70,"Use Case","Use Case",null,null,"uml use case usecase"),this.addEntry("uml activity state start",function(){var t=new mxCell("",new mxGeometry(0,0,30,30),"ellipse;html=1;shape=startState;fillColor=#000000;strokeColor=#ff0000;");t.vertex=!0;var n=new mxCell("",new mxGeometry(0,0,0,0),"edgeStyle=orthogonalEdgeStyle;html=1;verticalAlign=bottom;endArrow=open;endSize=8;strokeColor=#ff0000;");return n.geometry.setTerminalPoint(new mxPoint(15,90),!1),n.geometry.relative=!0,n.edge=!0,t.insertEdge(n,!0),e.createVertexTemplateFromCells([t,n],30,90,"Start")}),this.addEntry("uml activity state",function(){var t=new mxCell("Activity",new mxGeometry(0,0,120,40),"rounded=1;whiteSpace=wrap;html=1;arcSize=40;fontColor=#000000;fillColor=#ffffc0;strokeColor=#ff0000;");t.vertex=!0;var n=new mxCell("",new mxGeometry(0,0,0,0),"edgeStyle=orthogonalEdgeStyle;html=1;verticalAlign=bottom;endArrow=open;endSize=8;strokeColor=#ff0000;");return n.geometry.setTerminalPoint(new mxPoint(60,100),!1),n.geometry.relative=!0,n.edge=!0,t.insertEdge(n,!0),e.createVertexTemplateFromCells([t,n],120,100,"Activity")}),this.addEntry("uml activity composite state",function(){var t=new mxCell("Composite State",new mxGeometry(0,0,160,60),"swimlane;html=1;fontStyle=1;align=center;verticalAlign=middle;childLayout=stackLayout;horizontal=1;startSize=30;horizontalStack=0;resizeParent=0;resizeLast=1;container=0;fontColor=#000000;collapsible=0;rounded=1;arcSize=30;strokeColor=#ff0000;fillColor=#ffffc0;swimlaneFillColor=#ffffc0;dropTarget=0;");t.vertex=!0;var n=new mxCell("Subtitle",new mxGeometry(0,0,200,26),"text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;spacingLeft=4;spacingRight=4;whiteSpace=wrap;overflow=hidden;rotatable=0;fontColor=#000000;");return n.vertex=!0,t.insert(n),(n=new mxCell("",new mxGeometry(0,0,0,0),"edgeStyle=orthogonalEdgeStyle;html=1;verticalAlign=bottom;endArrow=open;endSize=8;strokeColor=#ff0000;")).geometry.setTerminalPoint(new mxPoint(80,120),!1),n.geometry.relative=!0,n.edge=!0,t.insertEdge(n,!0),e.createVertexTemplateFromCells([t,n],160,120,"Composite State")}),this.addEntry("uml activity condition",function(){var t=new mxCell("Condition",new mxGeometry(0,0,80,40),"rhombus;whiteSpace=wrap;html=1;fillColor=#ffffc0;strokeColor=#ff0000;");t.vertex=!0;var n=new mxCell("no",new mxGeometry(0,0,0,0),"edgeStyle=orthogonalEdgeStyle;html=1;align=left;verticalAlign=bottom;endArrow=open;endSize=8;strokeColor=#ff0000;");n.geometry.setTerminalPoint(new mxPoint(180,20),!1),n.geometry.relative=!0,n.geometry.x=-1,n.edge=!0,t.insertEdge(n,!0);var i=new mxCell("yes",new mxGeometry(0,0,0,0),"edgeStyle=orthogonalEdgeStyle;html=1;align=left;verticalAlign=top;endArrow=open;endSize=8;strokeColor=#ff0000;");return i.geometry.setTerminalPoint(new mxPoint(40,100),!1),i.geometry.relative=!0,i.geometry.x=-1,i.edge=!0,t.insertEdge(i,!0),e.createVertexTemplateFromCells([t,n,i],180,100,"Condition")}),this.addEntry("uml activity fork join",function(){var t=new mxCell("",new mxGeometry(0,0,200,10),"shape=line;html=1;strokeWidth=6;strokeColor=#ff0000;");t.vertex=!0;var n=new mxCell("",new mxGeometry(0,0,0,0),"edgeStyle=orthogonalEdgeStyle;html=1;verticalAlign=bottom;endArrow=open;endSize=8;strokeColor=#ff0000;");return n.geometry.setTerminalPoint(new mxPoint(100,80),!1),n.geometry.relative=!0,n.edge=!0,t.insertEdge(n,!0),e.createVertexTemplateFromCells([t,n],200,80,"Fork/Join")}),this.createVertexTemplateEntry("ellipse;html=1;shape=endState;fillColor=#000000;strokeColor=#ff0000;",30,30,"","End",null,null,"uml activity state end"),this.createVertexTemplateEntry("shape=umlLifeline;perimeter=lifelinePerimeter;whiteSpace=wrap;html=1;container=1;collapsible=0;recursiveResize=0;outlineConnect=0;",100,300,":Object","Lifeline",null,null,"uml sequence participant lifeline"),this.createVertexTemplateEntry("shape=umlLifeline;participant=umlActor;perimeter=lifelinePerimeter;whiteSpace=wrap;html=1;container=1;collapsible=0;recursiveResize=0;verticalAlign=top;spacingTop=36;outlineConnect=0;",20,300,"","Actor Lifeline",null,null,"uml sequence participant lifeline actor"),this.createVertexTemplateEntry("shape=umlLifeline;participant=umlBoundary;perimeter=lifelinePerimeter;whiteSpace=wrap;html=1;container=1;collapsible=0;recursiveResize=0;verticalAlign=top;spacingTop=36;outlineConnect=0;",50,300,"","Boundary Lifeline",null,null,"uml sequence participant lifeline boundary"),this.createVertexTemplateEntry("shape=umlLifeline;participant=umlEntity;perimeter=lifelinePerimeter;whiteSpace=wrap;html=1;container=1;collapsible=0;recursiveResize=0;verticalAlign=top;spacingTop=36;outlineConnect=0;",40,300,"","Entity Lifeline",null,null,"uml sequence participant lifeline entity"),this.createVertexTemplateEntry("shape=umlLifeline;participant=umlControl;perimeter=lifelinePerimeter;whiteSpace=wrap;html=1;container=1;collapsible=0;recursiveResize=0;verticalAlign=top;spacingTop=36;outlineConnect=0;",40,300,"","Control Lifeline",null,null,"uml sequence participant lifeline control"),this.createVertexTemplateEntry("shape=umlFrame;whiteSpace=wrap;html=1;",300,200,"frame","Frame",null,null,"uml sequence frame"),this.createVertexTemplateEntry("shape=umlDestroy;whiteSpace=wrap;html=1;strokeWidth=3;",30,30,"","Destruction",null,null,"uml sequence destruction destroy"),this.addEntry("uml sequence invoke invocation call activation",function(){var t=new mxCell("",new mxGeometry(0,0,10,80),"html=1;points=[];perimeter=orthogonalPerimeter;");t.vertex=!0;var n=new mxCell("dispatch",new mxGeometry(0,0,0,0),"html=1;verticalAlign=bottom;startArrow=oval;endArrow=block;startSize=8;");return n.geometry.setTerminalPoint(new mxPoint(-60,0),!0),n.geometry.relative=!0,n.edge=!0,t.insertEdge(n,!1),e.createVertexTemplateFromCells([t,n],10,80,"Found Message")}),this.addEntry("uml sequence invoke call delegation synchronous invocation activation",function(){var t=new mxCell("",new mxGeometry(0,0,10,80),"html=1;points=[];perimeter=orthogonalPerimeter;");t.vertex=!0;var n=new mxCell("dispatch",new mxGeometry(0,0,0,0),"html=1;verticalAlign=bottom;endArrow=block;entryX=0;entryY=0;");n.geometry.setTerminalPoint(new mxPoint(-70,0),!0),n.geometry.relative=!0,n.edge=!0,t.insertEdge(n,!1);var i=new mxCell("return",new mxGeometry(0,0,0,0),"html=1;verticalAlign=bottom;endArrow=open;dashed=1;endSize=8;exitX=0;exitY=0.95;");return i.geometry.setTerminalPoint(new mxPoint(-70,76),!1),i.geometry.relative=!0,i.edge=!0,t.insertEdge(i,!0),e.createVertexTemplateFromCells([t,n,i],10,80,"Synchronous Invocation")}),this.addEntry("uml sequence self call recursion delegation activation",function(){var t=new mxCell("",new mxGeometry(-5,20,10,40),"html=1;points=[];perimeter=orthogonalPerimeter;");t.vertex=!0;var n=new mxCell("self call",new mxGeometry(0,0,0,0),"edgeStyle=orthogonalEdgeStyle;html=1;align=left;spacingLeft=2;endArrow=block;rounded=0;entryX=1;entryY=0;");return n.geometry.setTerminalPoint(new mxPoint(0,0),!0),n.geometry.points=[new mxPoint(30,0)],n.geometry.relative=!0,n.edge=!0,t.insertEdge(n,!1),e.createVertexTemplateFromCells([t,n],10,60,"Self Call")}),this.addEntry("uml sequence invoke call delegation callback activation",function(){return e.createVertexTemplateFromData("xZRNT8MwDIZ/Ta6oaymD47rBTkiTuMAxW6wmIm0q19s6fj1OE3V0Y2iCA4dK8euP2I+riGxedUuUjX52CqzIHkU2R+conKpuDtaKNDFKZAuRpgl/In264J303qSRCDVdk5CGhJ20WwhKEFo62ChoqritxURkReNMTa2X80LkC68AmgoIkEWHpF3pamlXR7WIFwASdBeb7KXY4RIc5+KBQ/ZGkY4RYY5Egyl1zLqLmmyDXQ6Zx4n5EIf+HkB2BmAjrV3LzftPIPw4hgNn1pQ1a2tH5Cp2QK1miG7vNeu4iJe4pdeY2BtvbCQDGlAljMCQxBJotJ8rWCFYSWY3LvUdmZi68rvkkLiU6QnL1m1xAzHoBOdw61WEb88II9AW67/ydQ2wq1Cy1aAGvOrFfPh6997qDA3g+dxzv3nIL6MPU/8T+kMw8+m4QPgdfrEJNo8PSQj/+s58Ag==",10,60,"Callback")}),this.createVertexTemplateEntry("html=1;points=[];perimeter=orthogonalPerimeter;",10,80,"","Activation",null,null,"uml sequence activation"),this.createEdgeTemplateEntry("html=1;verticalAlign=bottom;startArrow=oval;startFill=1;endArrow=block;startSize=8;",60,0,"dispatch","Found Message 1",null,"uml sequence message call invoke dispatch"),this.createEdgeTemplateEntry("html=1;verticalAlign=bottom;startArrow=circle;startFill=1;endArrow=open;startSize=6;endSize=8;",80,0,"dispatch","Found Message 2",null,"uml sequence message call invoke dispatch"),this.createEdgeTemplateEntry("html=1;verticalAlign=bottom;endArrow=block;",80,0,"dispatch","Message",null,"uml sequence message call invoke dispatch"),this.addEntry("uml sequence return message",function(){var t=new mxCell("return",new mxGeometry(0,0,0,0),"html=1;verticalAlign=bottom;endArrow=open;dashed=1;endSize=8;");return t.geometry.setTerminalPoint(new mxPoint(80,0),!0),t.geometry.setTerminalPoint(new mxPoint(0,0),!1),t.geometry.relative=!0,t.edge=!0,e.createEdgeTemplateFromCells([t],80,0,"Return")}),this.addEntry("uml relation",function(){var t=new mxCell("name",new mxGeometry(0,0,0,0),"endArrow=block;endFill=1;html=1;edgeStyle=orthogonalEdgeStyle;align=left;verticalAlign=top;");t.geometry.setTerminalPoint(new mxPoint(0,0),!0),t.geometry.setTerminalPoint(new mxPoint(160,0),!1),t.geometry.relative=!0,t.geometry.x=-1,t.edge=!0;var n=new mxCell("1",new mxGeometry(-1,0,0,0),"edgeLabel;resizable=0;html=1;align=left;verticalAlign=bottom;");return n.geometry.relative=!0,n.setConnectable(!1),n.vertex=!0,t.insert(n),e.createEdgeTemplateFromCells([t],160,0,"Relation 1")}),this.addEntry("uml association",function(){var t=new mxCell("",new mxGeometry(0,0,0,0),"endArrow=none;html=1;edgeStyle=orthogonalEdgeStyle;");t.geometry.setTerminalPoint(new mxPoint(0,0),!0),t.geometry.setTerminalPoint(new mxPoint(160,0),!1),t.geometry.relative=!0,t.edge=!0;var n=new mxCell("parent",new mxGeometry(-1,0,0,0),"edgeLabel;resizable=0;html=1;align=left;verticalAlign=bottom;");return n.geometry.relative=!0,n.setConnectable(!1),n.vertex=!0,t.insert(n),(n=new mxCell("child",new mxGeometry(1,0,0,0),"edgeLabel;resizable=0;html=1;align=right;verticalAlign=bottom;")).geometry.relative=!0,n.setConnectable(!1),n.vertex=!0,t.insert(n),e.createEdgeTemplateFromCells([t],160,0,"Association 1")}),this.addEntry("uml aggregation",function(){var t=new mxCell("1",new mxGeometry(0,0,0,0),"endArrow=open;html=1;endSize=12;startArrow=diamondThin;startSize=14;startFill=0;edgeStyle=orthogonalEdgeStyle;align=left;verticalAlign=bottom;");return t.geometry.setTerminalPoint(new mxPoint(0,0),!0),t.geometry.setTerminalPoint(new mxPoint(160,0),!1),t.geometry.relative=!0,t.geometry.x=-1,t.geometry.y=3,t.edge=!0,e.createEdgeTemplateFromCells([t],160,0,"Aggregation 1")}),this.addEntry("uml composition",function(){var t=new mxCell("1",new mxGeometry(0,0,0,0),"endArrow=open;html=1;endSize=12;startArrow=diamondThin;startSize=14;startFill=1;edgeStyle=orthogonalEdgeStyle;align=left;verticalAlign=bottom;");return t.geometry.setTerminalPoint(new mxPoint(0,0),!0),t.geometry.setTerminalPoint(new mxPoint(160,0),!1),t.geometry.relative=!0,t.geometry.x=-1,t.geometry.y=3,t.edge=!0,e.createEdgeTemplateFromCells([t],160,0,"Composition 1")}),this.addEntry("uml relation",function(){var t=new mxCell("Relation",new mxGeometry(0,0,0,0),"endArrow=open;html=1;endSize=12;startArrow=diamondThin;startSize=14;startFill=0;edgeStyle=orthogonalEdgeStyle;");t.geometry.setTerminalPoint(new mxPoint(0,0),!0),t.geometry.setTerminalPoint(new mxPoint(160,0),!1),t.geometry.relative=!0,t.edge=!0;var n=new mxCell("0..n",new mxGeometry(-1,0,0,0),"edgeLabel;resizable=0;html=1;align=left;verticalAlign=top;");return n.geometry.relative=!0,n.setConnectable(!1),n.vertex=!0,t.insert(n),(n=new mxCell("1",new mxGeometry(1,0,0,0),"edgeLabel;resizable=0;html=1;align=right;verticalAlign=top;")).geometry.relative=!0,n.setConnectable(!1),n.vertex=!0,t.insert(n),e.createEdgeTemplateFromCells([t],160,0,"Relation 2")}),this.createEdgeTemplateEntry("endArrow=open;endSize=12;dashed=1;html=1;",160,0,"Use","Dependency",null,"uml dependency use"),this.createEdgeTemplateEntry("endArrow=block;endSize=16;endFill=0;html=1;",160,0,"Extends","Generalization",null,"uml generalization extend"),this.createEdgeTemplateEntry("endArrow=block;startArrow=block;endFill=1;startFill=1;html=1;",160,0,"","Association 2",null,"uml association"),this.createEdgeTemplateEntry("endArrow=open;startArrow=circlePlus;endFill=0;startFill=0;endSize=8;html=1;",160,0,"","Inner Class",null,"uml inner class"),this.createEdgeTemplateEntry("endArrow=open;startArrow=cross;endFill=0;startFill=0;endSize=8;startSize=10;html=1;",160,0,"","Terminate",null,"uml terminate"),this.createEdgeTemplateEntry("endArrow=block;dashed=1;endFill=0;endSize=12;html=1;",160,0,"","Implementation",null,"uml realization implementation"),this.createEdgeTemplateEntry("endArrow=diamondThin;endFill=0;endSize=24;html=1;",160,0,"","Aggregation 2",null,"uml aggregation"),this.createEdgeTemplateEntry("endArrow=diamondThin;endFill=1;endSize=24;html=1;",160,0,"","Composition 2",null,"uml composition"),this.createEdgeTemplateEntry("endArrow=open;endFill=1;endSize=12;html=1;",160,0,"","Association 3",null,"uml association")];this.addPaletteFunctions("uml",mxResources.get("uml"),t||!1,l),this.setCurrentSearchEntryLibrary()},Sidebar.prototype.createTitle=function(t){var e=document.createElement("a");return e.setAttribute("title",mxResources.get("sidebarTooltip")),e.className="geTitle",mxUtils.write(e,t),e},Sidebar.prototype.createThumb=function(t,e,n,i,l,o,s,r,a){return this.graph.labelsVisible=null==o||o,o=mxClient.NO_FO,mxClient.NO_FO=Editor.prototype.originalNoForeignObject,this.graph.view.scaleAndTranslate(1,0,0),t=this.graph.cloneCells(t),this.editorUi.insertHandler(t,null,this.graph.model,Graph.prototype.defaultVertexStyle,Graph.prototype.defaultEdgeStyle),this.graph.addCells(t),t=this.graph.getGraphBounds(),r=Math.floor(100*Math.min((e-2*this.thumbBorder)/t.width,(n-2*this.thumbBorder)/t.height))/100,this.graph.view.scaleAndTranslate(r,Math.floor((e-t.width*r)/2/r-t.x),Math.floor((n-t.height*r)/2/r-t.y)),this.graph.dialect!=mxConstants.DIALECT_SVG||mxClient.NO_FO||null==this.graph.view.getCanvas().ownerSVGElement?(r=this.graph.container.cloneNode(!1)).innerHTML=this.graph.container.innerHTML:r=this.graph.view.getCanvas().ownerSVGElement.cloneNode(!0),this.graph.getModel().clear(),mxClient.NO_FO=o,r.style.position="relative",r.style.overflow="hidden",r.style.left=this.thumbBorder+"px",r.style.top=this.thumbBorder+"px",r.style.width=e+"px",r.style.height=n+"px",r.style.visibility="",r.style.minWidth="",r.style.minHeight="",i.appendChild(r),this.sidebarTitles&&null!=l&&0!=s&&(i.style.height=this.thumbHeight+0+this.sidebarTitleSize+8+"px",(e=document.createElement("div")).style.fontSize=this.sidebarTitleSize+"px",e.style.color="#303030",e.style.textAlign="center",e.style.whiteSpace="nowrap",mxClient.IS_IE&&(e.style.height=this.sidebarTitleSize+12+"px"),e.style.paddingTop="4px",mxUtils.write(e,l),i.appendChild(e)),t},Sidebar.prototype.createSection=function(t){return mxUtils.bind(this,function(){var e=document.createElement("div");return e.setAttribute("title",t),e.style.textOverflow="ellipsis",e.style.whiteSpace="nowrap",e.style.textAlign="center",e.style.overflow="hidden",e.style.width="100%",e.style.padding="14px 0",mxUtils.write(e,t),e})},Sidebar.prototype.createItem=function(t,e,n,i,l,o,s,r){r=null==r||r;var a=document.createElement("a");a.className="geItem",a.style.overflow="hidden";var h=2*this.thumbBorder;a.style.width=this.thumbWidth+h+"px",a.style.height=this.thumbHeight+h+"px",a.style.padding=this.thumbPadding+"px",mxEvent.addListener(a,"click",function(t){mxEvent.consume(t)}),this.createThumb(t,this.thumbWidth,this.thumbHeight,a,e,n,i,l,o);var u=new mxRectangle(0,0,l,o);return 1<t.length||t[0].vertex?(i=this.createDragSource(a,this.createDropHandler(t,!0,s,u),this.createDragPreview(l,o),t,u),this.addClickHandler(a,i,t),i.isGuidesEnabled=mxUtils.bind(this,function(){return this.editorUi.editor.graph.graphHandler.guidesEnabled})):null!=t[0]&&t[0].edge&&(i=this.createDragSource(a,this.createDropHandler(t,!1,s,u),this.createDragPreview(l,o),t,u),this.addClickHandler(a,i,t)),!mxClient.IS_IOS&&r&&mxEvent.addGestureListeners(a,null,mxUtils.bind(this,function(i){mxEvent.isMouseEvent(i)&&this.showTooltip(a,t,u.width,u.height,e,n)})),a},Sidebar.prototype.updateShapes=function(t,e){var n=this.editorUi.editor.graph,i=n.getCellStyle(t),l=[];n.model.beginUpdate();try{for(var o=n.getModel().getStyle(t),s="shadow dashed dashPattern fontFamily fontSize fontColor align startFill startSize endFill endSize strokeColor strokeWidth fillColor gradientColor html part noEdgeStyle edgeStyle elbow childLayout recursiveResize container collapsible connectable comic sketch fillWeight hachureGap hachureAngle jiggle disableMultiStroke disableMultiStrokeFill fillStyle curveFitting simplification sketchStyle".split(" "),r=0;r<e.length;r++){var a=e[r];if(n.getModel().isVertex(a)==n.getModel().isVertex(t)||n.getModel().isEdge(a)==n.getModel().isEdge(t)){var h=n.getCurrentCellStyle(e[r]);if(n.getModel().setStyle(a,o),"1"==mxUtils.getValue(h,"composite","0"))for(var u=n.model.getChildCount(a);0<=u;u--)n.model.remove(n.model.getChildAt(a,u));for("umlLifeline"==h[mxConstants.STYLE_SHAPE]&&"umlLifeline"!=i[mxConstants.STYLE_SHAPE]&&(n.setCellStyles(mxConstants.STYLE_SHAPE,"umlLifeline",[a]),n.setCellStyles("participant",i[mxConstants.STYLE_SHAPE],[a])),u=0;u<s.length;u++){var d=h[s[u]];null!=d&&n.setCellStyles(s[u],d,[a])}l.push(a)}}}finally{n.model.endUpdate()}return l},Sidebar.prototype.createDropHandler=function(t,e,n,i){return n=null==n||n,mxUtils.bind(this,function(l,o,s,r,a,h){for(h=h?null:mxEvent.isTouchEvent(o)||mxEvent.isPenEvent(o)?document.elementFromPoint(mxEvent.getClientX(o),mxEvent.getClientY(o)):mxEvent.getSource(o);null!=h&&h!=this.container;)h=h.parentNode;if(null==h&&l.isEnabled()){if(0<(t=l.getImportableCells(t)).length){l.stopEditing(),h=null!=s&&!mxEvent.isAltDown(o)&&l.isValidDropTarget(s,t,o);var u,d,c,p,m,g=null;if(!l.isCellLocked((s=null==s||h?s:null)||l.getDefaultParent())){l.model.beginUpdate();try{if(r=Math.round(r),a=Math.round(a),e&&l.isSplitTarget(s,t,o)?(c=(r+(d=l.view.translate).x)*(u=l.view.scale),p=(a+d.y)*u,m=l.cloneCells(t),l.splitEdge(s,m,null,r-i.width/2,a-i.height/2,c,p),g=m):0<t.length&&(g=l.importCells(t,r,a,s)),null!=l.layoutManager){var x=l.layoutManager.getLayout(s);if(null!=x)for(c=(r+(d=l.view.translate).x)*(u=l.view.scale),p=(a+d.y)*u,s=0;s<g.length;s++)x.moveCell(g[s],c,p)}!n||null!=o&&mxEvent.isShiftDown(o)||l.fireEvent(new mxEventObject("cellsInserted","cells",g))}catch(l){this.editorUi.handleError(l)}finally{l.model.endUpdate()}null!=g&&0<g.length&&(l.scrollCellToVisible(g[0]),l.setSelectionCells(g)),l.editAfterInsert&&null!=o&&mxEvent.isMouseEvent(o)&&null!=g&&1==g.length&&window.setTimeout(function(){l.startEditing(g[0])},0)}}mxEvent.consume(o)}})},Sidebar.prototype.createDragPreview=function(t,e){var n=document.createElement("div");return n.className="geDragPreview",n.style.width=t+"px",n.style.height=e+"px",n},Sidebar.prototype.dropAndConnect=function(t,e,n,i,l){var o=this.getDropAndConnectGeometry(t,e[i],n,e),s=[];if(null!=o){var r=this.editorUi.editor.graph,a=null;r.model.beginUpdate();try{var h=r.getCellGeometry(t),u=r.getCellGeometry(e[i]),d=r.model.getParent(t),c=!0;null==r.layoutManager||null!=(p=r.layoutManager.getLayout(d))&&p.constructor==mxStackLayout&&(c=!1),s=r.model.isEdge(t)?null:r.view.getState(d);var p,m,g=p=0;null!=s&&(p=(f=s.origin).x,g=f.y,null!=(m=o.getTerminalPoint(!1))&&(m.x+=f.x,m.y+=f.y));var x,y,f,v=!r.isTableRow(t)&&!r.isTableCell(t)&&(r.model.isEdge(t)||null!=h&&!h.relative&&c),b=r.getCellAt((o.x+p+r.view.translate.x)*r.view.scale,(o.y+g+r.view.translate.y)*r.view.scale,null,null,null,function(t,e,n){return!r.isContainer(t.cell)});null!=b&&b!=d?null!=(s=r.view.getState(b))&&(f=s.origin,d=b,v=!0,r.model.isEdge(t)||(o.x-=f.x-p,o.y-=f.y-g)):c&&!r.isTableRow(t)&&!r.isTableCell(t)||(o.x+=p,o.y+=g),p=u.x,g=u.y,r.model.isEdge(e[i])&&(g=p=0),s=e=r.importCells(e,o.x-(v?p:0),o.y-(v?g:0),v?d:null),r.model.isEdge(t)?r.model.setTerminal(t,e[i],n==mxConstants.DIRECTION_NORTH):r.model.isEdge(e[i])?(r.model.setTerminal(e[i],t,!0),((x=r.getCellGeometry(e[i])).points=null)!=x.getTerminalPoint(!1)?x.setTerminalPoint(o.getTerminalPoint(!1),!1):v&&r.model.isVertex(d)&&(f=(y=r.view.getState(d)).cell!=r.view.currentRoot?y.origin:new mxPoint(0,0),r.cellsMoved(e,f.x,f.y,null,null,!0))):(u=r.getCellGeometry(e[i]),p=o.x-Math.round(u.x),g=o.y-Math.round(u.y),o.x=Math.round(u.x),o.y=Math.round(u.y),r.model.setGeometry(e[i],o),r.cellsMoved(e,p,g,null,null,!0),s=e.slice(),a=1==s.length?s[0]:null,e.push(r.insertEdge(null,null,"",t,e[i],r.createCurrentEdgeStyle()))),null!=l&&mxEvent.isShiftDown(l)||r.fireEvent(new mxEventObject("cellsInserted","cells",e))}catch(t){this.editorUi.handleError(t)}finally{r.model.endUpdate()}r.editAfterInsert&&null!=l&&mxEvent.isMouseEvent(l)&&null!=a&&window.setTimeout(function(){r.startEditing(a)},0)}return s},Sidebar.prototype.getDropAndConnectGeometry=function(t,e,n,i){var l=this.editorUi.editor.graph,o=l.view,s=1<i.length,r=l.getCellGeometry(t);return i=l.getCellGeometry(e),null!=r&&null!=i&&(i=i.clone(),l.model.isEdge(t)?(e=(r=(t=l.view.getState(t)).absolutePoints)[0],l=r[r.length-1],n==mxConstants.DIRECTION_NORTH?(i.x=e.x/o.scale-o.translate.x-i.width/2,i.y=e.y/o.scale-o.translate.y-i.height/2):(i.x=l.x/o.scale-o.translate.x-i.width/2,i.y=l.y/o.scale-o.translate.y-i.height/2)):(r.relative&&(t=l.view.getState(t),(r=r.clone()).x=(t.x-o.translate.x)/o.scale,r.y=(t.y-o.translate.y)/o.scale),o=l.defaultEdgeLength,l.model.isEdge(e)&&null!=i.getTerminalPoint(!0)&&null!=i.getTerminalPoint(!1)?(e=i.getTerminalPoint(!0),o=(l=i.getTerminalPoint(!1)).x-e.x,e=l.y-e.y,o=Math.sqrt(o*o+e*e),i.x=r.getCenterX(),i.y=r.getCenterY(),i.width=1,i.height=1,n==mxConstants.DIRECTION_NORTH?(i.height=o,i.y=r.y-o,i.setTerminalPoint(new mxPoint(i.x,i.y),!1)):n==mxConstants.DIRECTION_EAST?(i.width=o,i.x=r.x+r.width,i.setTerminalPoint(new mxPoint(i.x+i.width,i.y),!1)):n==mxConstants.DIRECTION_SOUTH?(i.height=o,i.y=r.y+r.height,i.setTerminalPoint(new mxPoint(i.x,i.y+i.height),!1)):n==mxConstants.DIRECTION_WEST&&(i.width=o,i.x=r.x-o,i.setTerminalPoint(new mxPoint(i.x,i.y),!1))):(!s&&45<i.width&&45<i.height&&45<r.width&&45<r.height&&(i.width*=r.height/i.height,i.height=r.height),i.x=r.x+r.width/2-i.width/2,i.y=r.y+r.height/2-i.height/2,n==mxConstants.DIRECTION_NORTH?i.y=i.y-r.height/2-i.height/2-o:n==mxConstants.DIRECTION_EAST?i.x=i.x+r.width/2+i.width/2+o:n==mxConstants.DIRECTION_SOUTH?i.y=i.y+r.height/2+i.height/2+o:n==mxConstants.DIRECTION_WEST&&(i.x=i.x-r.width/2-i.width/2-o),l.model.isEdge(e)&&null!=i.getTerminalPoint(!0)&&null!=e.getTerminal(!1)&&null!=(r=l.getCellGeometry(e.getTerminal(!1)))&&(n==mxConstants.DIRECTION_NORTH?(i.x-=r.getCenterX(),i.y-=r.getCenterY()+r.height/2):n==mxConstants.DIRECTION_EAST?(i.x-=r.getCenterX()-r.width/2,i.y-=r.getCenterY()):n==mxConstants.DIRECTION_SOUTH?(i.x-=r.getCenterX(),i.y-=r.getCenterY()-r.height/2):n==mxConstants.DIRECTION_WEST&&(i.x-=r.getCenterX()+r.width/2,i.y-=r.getCenterY()))))),i},Sidebar.prototype.isDropStyleEnabled=function(t,e){var n=!0;return null!=e&&1==t.length&&null!=(t=this.graph.getCellStyle(t[e]))&&(n=mxUtils.getValue(t,mxConstants.STYLE_STROKECOLOR,mxConstants.NONE)!=mxConstants.NONE||mxUtils.getValue(t,mxConstants.STYLE_FILLCOLOR,mxConstants.NONE)!=mxConstants.NONE),n},Sidebar.prototype.isDropStyleTargetIgnored=function(t){return this.graph.isSwimlane(t.cell)||this.graph.isTableCell(t.cell)||this.graph.isTableRow(t.cell)||this.graph.isTable(t.cell)},Sidebar.prototype.createDragSource=function(t,e,n,i,l){function o(t,e){var n=mxUtils.createImage(t.src);return n.style.width=t.width+"px",n.style.height=t.height+"px",null!=e&&n.setAttribute("title",e),mxUtils.setOpacity(n,t==this.refreshTarget?30:20),n.style.position="absolute",n.style.cursor="crosshair",n}function s(t,e,n,i){return null!=i.parentNode&&(mxUtils.contains(n,t,e)?(mxUtils.setOpacity(i,100),P=i):mxUtils.setOpacity(i,i==w?30:20)),n}for(var r=this.editorUi,a=r.editor.graph,h=null,u=null,d=this,c=0;c<i.length&&(null==u&&a.model.isVertex(i[c])?u=c:null==h&&a.model.isEdge(i[c])&&null==a.model.getTerminal(i[c],!0)&&(h=c),null==u||null==h);c++);var p=this.isDropStyleEnabled(i,u),m=mxUtils.makeDraggable(t,a,mxUtils.bind(this,function(t,n,l,o,s){var r;null!=this.updateThread&&window.clearTimeout(this.updateThread),null!=i&&null!=f&&P==w?(r=t.isCellSelected(f.cell)?t.getSelectionCells():[f.cell],r=this.updateShapes(t.model.isEdge(f.cell)?i[0]:i[u],r),t.setSelectionCells(r)):null!=i&&null!=P&&null!=x&&P!=w?(r=t.model.isEdge(x.cell)||null==h?u:h,t.setSelectionCells(this.dropAndConnect(x.cell,i,L,r,n))):e.apply(this,arguments),null!=this.editorUi.hoverIcons&&this.editorUi.hoverIcons.update(t.view.getState(t.getSelectionCell()))}),n,0,0,a.autoscroll,!0,!0);a.addListener(mxEvent.ESCAPE,function(t,e){m.isActive()&&m.reset()});var g=m.mouseDown;m.mouseDown=function(t){mxEvent.isPopupTrigger(t)||mxEvent.isMultiTouchEvent(t)||(a.stopEditing(),g.apply(this,arguments))};var x=null,y=null,f=null,v=!1,b=o(this.triangleUp,mxResources.get("connect")),C=o(this.triangleRight,mxResources.get("connect")),E=o(this.triangleDown,mxResources.get("connect")),S=o(this.triangleLeft,mxResources.get("connect")),w=o(this.refreshTarget,mxResources.get("replace")),T=null,A=o(this.roundDrop),M=o(this.roundDrop),L=mxConstants.DIRECTION_NORTH,P=null,I=m.createPreviewElement;m.createPreviewElement=function(t){var e=I.apply(this,arguments);return mxClient.IS_SVG&&(e.style.pointerEvents="none"),this.previewElementWidth=e.style.width,this.previewElementHeight=e.style.height,e};var R=m.dragEnter;m.dragEnter=function(t,e){null!=r.hoverIcons&&r.hoverIcons.setDisplay("none"),R.apply(this,arguments)};var O=m.dragExit;m.dragExit=function(t,e){null!=r.hoverIcons&&r.hoverIcons.setDisplay(""),O.apply(this,arguments)},m.dragOver=function(t,e){var n,o,s,r,a,c,p,g;mxDragSource.prototype.dragOver.apply(this,arguments),null!=this.currentGuide&&null!=P&&this.currentGuide.hide(),null!=this.previewElement&&(n=t.view,null!=f&&P==w?(this.previewElement.style.display=t.model.isEdge(f.cell)?"none":"",this.previewElement.style.left=f.x+"px",this.previewElement.style.top=f.y+"px",this.previewElement.style.width=f.width+"px",this.previewElement.style.height=f.height+"px"):null!=x&&null!=P?(null!=m.currentHighlight&&null!=m.currentHighlight.state&&m.currentHighlight.hide(),o=t.model.isEdge(x.cell)||null==h?u:h,s=d.getDropAndConnectGeometry(x.cell,i[o],L,i),r=t.model.isEdge(x.cell)?null:t.getCellGeometry(x.cell),a=t.getCellGeometry(i[o]),c=t.model.getParent(x.cell),p=n.translate.x*n.scale,g=n.translate.y*n.scale,null!=r&&!r.relative&&t.model.isVertex(c)&&c!=n.currentRoot&&(p=(g=n.getState(c)).x,g=g.y),r=a.x,a=a.y,t.model.isEdge(i[o])&&(a=r=0),this.previewElement.style.left=(s.x-r)*n.scale+p+"px",this.previewElement.style.top=(s.y-a)*n.scale+g+"px",1==i.length&&(this.previewElement.style.width=s.width*n.scale+"px",this.previewElement.style.height=s.height*n.scale+"px"),this.previewElement.style.display=""):null!=m.currentHighlight.state&&t.model.isEdge(m.currentHighlight.state.cell)?(this.previewElement.style.left=Math.round(parseInt(this.previewElement.style.left)-l.width*n.scale/2)+"px",this.previewElement.style.top=Math.round(parseInt(this.previewElement.style.top)-l.height*n.scale/2)+"px"):(this.previewElement.style.width=this.previewElementWidth,this.previewElement.style.height=this.previewElementHeight,this.previewElement.style.display=""))};var _=(new Date).getTime(),D=0,U=null,N=this.editorUi.editor.graph.getCellStyle(i[0]);return m.getDropTarget=mxUtils.bind(this,function(t,e,n,l){var o=mxEvent.isAltDown(l)||null==i?null:t.getCellAt(e,n,null,null,null,function(e,n,i){return t.isContainer(e.cell)});null==o||this.graph.isCellConnectable(o)||this.graph.model.isEdge(o)||(h=this.graph.getModel().getParent(o),this.graph.getModel().isVertex(h)&&this.graph.isCellConnectable(h)&&(o=h)),t.isCellLocked(o)&&(o=null);var r,a,h,d=t.view.getState(o);if(h=P=null,U!=d?(_=(new Date).getTime(),D=0,U=d,null!=this.updateThread&&window.clearTimeout(this.updateThread),null!=d&&(this.updateThread=window.setTimeout(function(){null==P&&(U=d,m.getDropTarget(t,e,n,l))},this.dropTargetDelay+10))):D=(new Date).getTime()-_,p&&D<2500&&null!=d&&!mxEvent.isShiftDown(l)&&(mxUtils.getValue(d.style,mxConstants.STYLE_SHAPE)!=mxUtils.getValue(N,mxConstants.STYLE_SHAPE)&&(mxUtils.getValue(d.style,mxConstants.STYLE_STROKECOLOR,mxConstants.NONE)!=mxConstants.NONE||mxUtils.getValue(d.style,mxConstants.STYLE_FILLCOLOR,mxConstants.NONE)!=mxConstants.NONE||mxUtils.getValue(d.style,mxConstants.STYLE_GRADIENTCOLOR,mxConstants.NONE)!=mxConstants.NONE)||"image"==mxUtils.getValue(N,mxConstants.STYLE_SHAPE)||1500<D||t.model.isEdge(d.cell))&&D>this.dropTargetDelay&&!this.isDropStyleTargetIgnored(d)&&(t.model.isVertex(d.cell)&&null!=u||t.model.isEdge(d.cell)&&t.model.isEdge(i[0]))?(f=d,r=new mxRectangle((r=t.model.isEdge(d.cell)?t.view.getPoint(d):new mxPoint(d.getCenterX(),d.getCenterY())).x-this.refreshTarget.width/2,r.y-this.refreshTarget.height/2,this.refreshTarget.width,this.refreshTarget.height),w.style.left=Math.floor(r.x)+"px",w.style.top=Math.floor(r.y)+"px",null==T&&(t.container.appendChild(w),T=w.parentNode),s(e,n,r,w)):null==f||!mxUtils.contains(f,e,n)||1500<D&&!mxEvent.isShiftDown(l)?(f=null)!=T&&(w.parentNode.removeChild(w),T=null):null!=f&&null!=T&&(r=new mxRectangle((r=t.model.isEdge(f.cell)?t.view.getPoint(f):new mxPoint(f.getCenterX(),f.getCenterY())).x-this.refreshTarget.width/2,r.y-this.refreshTarget.height/2,this.refreshTarget.width,this.refreshTarget.height),s(e,n,r,w)),v&&null!=x&&!mxEvent.isAltDown(l)&&null==P&&(h=mxRectangle.fromRectangle(x),t.model.isEdge(x.cell)?(a=x.absolutePoints,null!=A.parentNode&&h.add(s(e,n,new mxRectangle((r=a[0]).x-this.roundDrop.width/2,r.y-this.roundDrop.height/2,this.roundDrop.width,this.roundDrop.height),A)),null!=M.parentNode&&h.add(s(e,n,new mxRectangle((a=a[a.length-1]).x-this.roundDrop.width/2,a.y-this.roundDrop.height/2,this.roundDrop.width,this.roundDrop.height),M))):(r=mxRectangle.fromRectangle(x),(r=null!=x.shape&&null!=x.shape.boundingBox?mxRectangle.fromRectangle(x.shape.boundingBox):r).grow(this.graph.tolerance),r.grow(HoverIcons.prototype.arrowSpacing),null!=(a=this.graph.selectionCellsHandler.getHandler(x.cell))&&(r.x-=a.horizontalOffset/2,r.y-=a.verticalOffset/2,r.width+=a.horizontalOffset,r.height+=a.verticalOffset,null!=a.rotationShape&&null!=a.rotationShape.node&&"hidden"!=a.rotationShape.node.style.visibility&&"none"!=a.rotationShape.node.style.display&&null!=a.rotationShape.boundingBox&&r.add(a.rotationShape.boundingBox)),h.add(s(e,n,new mxRectangle(x.getCenterX()-this.triangleUp.width/2,r.y-this.triangleUp.height,this.triangleUp.width,this.triangleUp.height),b)),h.add(s(e,n,new mxRectangle(r.x+r.width,x.getCenterY()-this.triangleRight.height/2,this.triangleRight.width,this.triangleRight.height),C)),h.add(s(e,n,new mxRectangle(x.getCenterX()-this.triangleDown.width/2,r.y+r.height,this.triangleDown.width,this.triangleDown.height),E)),h.add(s(e,n,new mxRectangle(r.x-this.triangleLeft.width,x.getCenterY()-this.triangleLeft.height/2,this.triangleLeft.width,this.triangleLeft.height),S))),null!=h&&h.grow(10)),L=mxConstants.DIRECTION_NORTH,P==C?L=mxConstants.DIRECTION_EAST:P==E||P==M?L=mxConstants.DIRECTION_SOUTH:P==S&&(L=mxConstants.DIRECTION_WEST),null!=f&&P==w&&(d=f),r=(null==u||t.isCellConnectable(i[u]))&&(t.model.isEdge(o)&&null!=u||t.model.isVertex(o)&&t.isCellConnectable(o)),null!=x&&5e3<=D||x!=d&&(null==h||!mxUtils.contains(h,e,n)||500<D&&null==P&&r))if(v=!1,null!=(x=D<5e3&&D>this.dropTargetDelay||t.model.isEdge(o)?d:null)&&r){for(h=[A,M,b,C,E,S],r=0;r<h.length;r++)null!=h[r].parentNode&&h[r].parentNode.removeChild(h[r]);t.model.isEdge(o)?null!=(a=d.absolutePoints)&&(r=a[0],a=a[a.length-1],new mxRectangle(e-(h=t.tolerance),n-h,2*h,2*h),A.style.left=Math.floor(r.x-this.roundDrop.width/2)+"px",A.style.top=Math.floor(r.y-this.roundDrop.height/2)+"px",M.style.left=Math.floor(a.x-this.roundDrop.width/2)+"px",M.style.top=Math.floor(a.y-this.roundDrop.height/2)+"px",null==t.model.getTerminal(o,!0)&&t.container.appendChild(A),null==t.model.getTerminal(o,!1)&&t.container.appendChild(M)):(r=mxRectangle.fromRectangle(d),(r=null!=d.shape&&null!=d.shape.boundingBox?mxRectangle.fromRectangle(d.shape.boundingBox):r).grow(this.graph.tolerance),r.grow(HoverIcons.prototype.arrowSpacing),null!=(a=this.graph.selectionCellsHandler.getHandler(d.cell))&&(r.x-=a.horizontalOffset/2,r.y-=a.verticalOffset/2,r.width+=a.horizontalOffset,r.height+=a.verticalOffset,null!=a.rotationShape&&null!=a.rotationShape.node&&"hidden"!=a.rotationShape.node.style.visibility&&"none"!=a.rotationShape.node.style.display&&null!=a.rotationShape.boundingBox&&r.add(a.rotationShape.boundingBox)),b.style.left=Math.floor(d.getCenterX()-this.triangleUp.width/2)+"px",b.style.top=Math.floor(r.y-this.triangleUp.height)+"px",C.style.left=Math.floor(r.x+r.width)+"px",C.style.top=Math.floor(d.getCenterY()-this.triangleRight.height/2)+"px",E.style.left=b.style.left,E.style.top=Math.floor(r.y+r.height)+"px",S.style.left=Math.floor(r.x-this.triangleLeft.width)+"px",S.style.top=C.style.top,"eastwest"!=d.style.portConstraint&&(t.container.appendChild(b),t.container.appendChild(E)),t.container.appendChild(C),t.container.appendChild(S)),null!=d&&null!=(y=t.selectionCellsHandler.getHandler(d.cell))&&null!=y.setHandlesVisible&&y.setHandlesVisible(!1),v=!0}else for(h=[A,M,b,C,E,S],r=0;r<h.length;r++)null!=h[r].parentNode&&h[r].parentNode.removeChild(h[r]);if(v||null==y||y.setHandlesVisible(!0),o=mxEvent.isAltDown(l)&&!mxEvent.isShiftDown(l)||null!=f&&P==w?null:mxDragSource.prototype.getDropTarget.apply(this,arguments),h=t.getModel(),null!=o&&(null!=P||!t.isSplitTarget(o,i,l))){for(;null!=o&&!t.isValidDropTarget(o,i,l)&&h.isVertex(h.getParent(o));)o=h.getParent(o);null!=o&&(t.view.currentRoot==o||!t.isValidRoot(o)&&0==t.getModel().getChildCount(o)||t.isCellLocked(o)||h.isEdge(o)||!t.isValidDropTarget(o,i,l))&&(o=null)}return o}),m.stopDrag=function(){mxDragSource.prototype.stopDrag.apply(this,arguments);for(var t=[A,M,w,b,C,E,S],e=0;e<t.length;e++)null!=t[e].parentNode&&t[e].parentNode.removeChild(t[e]);null!=x&&null!=y&&y.reset(),P=T=f=x=y=null},m},Sidebar.prototype.itemClicked=function(t,e,n,i){if((i=this.editorUi.editor.graph).container.focus(),mxEvent.isAltDown(n)&&1==i.getSelectionCount()&&i.model.isVertex(i.getSelectionCell())){e=null;for(var l=0;l<t.length&&null==e;l++)i.model.isVertex(t[l])&&(e=l);null!=e&&(i.setSelectionCells(this.dropAndConnect(i.getSelectionCell(),t,mxEvent.isMetaDown(n)||mxEvent.isControlDown(n)?mxEvent.isShiftDown(n)?mxConstants.DIRECTION_WEST:mxConstants.DIRECTION_NORTH:mxEvent.isShiftDown(n)?mxConstants.DIRECTION_EAST:mxConstants.DIRECTION_SOUTH,e,n)),i.scrollCellToVisible(i.getSelectionCell()))}else mxEvent.isShiftDown(n)&&!i.isSelectionEmpty()?(this.updateShapes(t[0],i.getSelectionCells()),i.scrollCellToVisible(i.getSelectionCell())):(t=mxEvent.isAltDown(n)?i.getFreeInsertPoint():i.getCenterInsertPoint(i.getBoundingBoxFromGeometry(t,!0)),e.drop(i,n,null,t.x,t.y,!0))},Sidebar.prototype.addClickHandler=function(t,e,n){var i=e.mouseDown,l=e.mouseMove,o=e.mouseUp,s=this.editorUi.editor.graph.tolerance,r=null,a=this;e.mouseDown=function(e){i.apply(this,arguments),r=new mxPoint(mxEvent.getClientX(e),mxEvent.getClientY(e)),null!=this.dragElement&&(this.dragElement.style.display="none",mxUtils.setOpacity(t,50))},e.mouseMove=function(e){null!=this.dragElement&&"none"==this.dragElement.style.display&&null!=r&&(Math.abs(r.x-mxEvent.getClientX(e))>s||Math.abs(r.y-mxEvent.getClientY(e))>s)&&(this.dragElement.style.display="",mxUtils.setOpacity(t,100)),l.apply(this,arguments)},e.mouseUp=function(i){try{mxEvent.isPopupTrigger(i)||null!=this.currentGraph||null==this.dragElement||"none"!=this.dragElement.style.display||a.itemClicked(n,e,i,t),o.apply(e,arguments),mxUtils.setOpacity(t,100),r=null,a.currentElt=t}catch(i){e.reset(),a.editorUi.handleError(i)}}},Sidebar.prototype.createVertexTemplateEntry=function(t,e,n,i,l,o,s,r){return r=null!=r&&0<r.length?r:null!=l?l.toLowerCase():"",this.addEntry(r,mxUtils.bind(this,function(){return this.createVertexTemplate(t,e,n,i,l,o,s)}))},Sidebar.prototype.createVertexTemplate=function(t,e,n,i,l,o,s,r,a){return(t=[new mxCell(null!=i?i:"",new mxGeometry(0,0,e,n),t)])[0].vertex=!0,this.createVertexTemplateFromCells(t,e,n,l,o,s,r,a)},Sidebar.prototype.createVertexTemplateFromData=function(t,e,n,i,l,o,s,r){var a=new mxCodec(t=mxUtils.parseXml(Graph.decompress(t))),h=new mxGraphModel;return a.decode(t.documentElement,h),t=this.graph.cloneCells(h.root.getChildAt(0).children),this.createVertexTemplateFromCells(t,e,n,i,l,o,s,r)},Sidebar.prototype.createVertexTemplateFromCells=function(t,e,n,i,l,o,s,r){return this.createItem(t,i,l,o,e,n,s,r)},Sidebar.prototype.createEdgeTemplateEntry=function(t,e,n,i,l,o,s,r,a){return s=null!=s&&0<s.length?s:l.toLowerCase(),this.addEntry(s,mxUtils.bind(this,function(){return this.createEdgeTemplate(t,e,n,i,l,o,r,a)}))},Sidebar.prototype.createEdgeTemplate=function(t,e,n,i,l,o,s,r){return(t=new mxCell(null!=i?i:"",new mxGeometry(0,0,e,n),t)).geometry.setTerminalPoint(new mxPoint(0,n),!0),t.geometry.setTerminalPoint(new mxPoint(e,0),!1),t.geometry.relative=!0,t.edge=!0,this.createEdgeTemplateFromCells([t],e,n,l,o,s,r)},Sidebar.prototype.createEdgeTemplateFromCells=function(t,e,n,i,l,o,s){return this.createItem(t,i,l,!0,e,n,o,s)},Sidebar.prototype.addPaletteFunctions=function(t,e,n,i){this.addPalette(t,e,n,mxUtils.bind(this,function(t){for(var e=0;e<i.length;e++)t.appendChild(i[e](t))}))},Sidebar.prototype.addPalette=function(t,e,n,i){e=this.createTitle(e),this.container.appendChild(e);var l=document.createElement("div");return l.className="geSidebar",mxClient.IS_POINTER&&(l.style.touchAction="none"),n?(i(l),i=null):l.style.display="none",this.addFoldingHandler(e,l,i),(n=document.createElement("div")).appendChild(l),this.container.appendChild(n),null!=t&&(this.palettes[t]=[e,n]),l},Sidebar.prototype.addFoldingHandler=function(t,e,n){var i=!1;(!mxClient.IS_IE||8<=document.documentMode)&&(t.style.backgroundImage="none"==e.style.display?"url('"+this.collapsedImage+"')":"url('"+this.expandedImage+"')"),t.style.backgroundRepeat="no-repeat",t.style.backgroundPosition="0% 50%",mxEvent.addListener(t,"click",mxUtils.bind(this,function(l){var o;"none"==e.style.display?(i?e.style.display="block":(i=!0,null!=n?(t.style.cursor="wait",o=t.innerHTML,t.innerHTML=mxResources.get("loading")+"...",window.setTimeout(function(){e.style.display="block",t.style.cursor="",t.innerHTML=o;var i=mxClient.NO_FO;mxClient.NO_FO=Editor.prototype.originalNoForeignObject,n(e,t),mxClient.NO_FO=i},mxClient.IS_FF?20:0)):e.style.display="block"),t.style.backgroundImage="url('"+this.expandedImage+"')"):(t.style.backgroundImage="url('"+this.collapsedImage+"')",e.style.display="none"),mxEvent.consume(l)})),mxEvent.addListener(t,mxClient.IS_POINTER?"pointerdown":"mousedown",mxUtils.bind(this,function(t){t.preventDefault()}))},Sidebar.prototype.removePalette=function(t){var e=this.palettes[t];if(null==e)return!1;for(this.palettes[t]=null,t=0;t<e.length;t++)this.container.removeChild(e[t]);return!0},Sidebar.prototype.addImagePalette=function(t,e,n,i,l,o,s){for(var r=[],a=0;a<l.length;a++)mxUtils.bind(this,function(t,e,l){var o;null==l&&(l=t.lastIndexOf("/"),o=t.lastIndexOf("."),l=t.substring(0<=l?l+1:0,0<=o?o:t.length).replace(/[-_]/g," ")),r.push(this.createVertexTemplateEntry("image;html=1;image="+n+t+i,this.defaultImageWidth,this.defaultImageHeight,"",e,null!=e,null,this.filterTags(l)))})(l[a],null!=o?o[a]:null,null!=s?s[l[a]]:null);this.addPaletteFunctions(t,e,!1,r)},Sidebar.prototype.getTagsForStencil=function(t,e,n){t=t.split(".");for(var i=1;i<t.length;i++)t[i]=t[i].replace(/_/g," ");return t.push(e.replace(/_/g," ")),null!=n&&t.push(n),t.slice(1,t.length)},Sidebar.prototype.addStencilPalette=function(t,e,n,i,l,o,s,r,a,h){if(s=null!=s?s:1,this.addStencilsToIndex){var u=[];if(null!=a)for(h=0;h<a.length;h++)u.push(a[h]);mxStencilRegistry.loadStencilSet(n,mxUtils.bind(this,function(t,e,n,o,a){var h;(null==l||mxUtils.indexOf(l,e)<0)&&(n=this.getTagsForStencil(t,e),null!=(h=null!=r?r[e]:null)&&n.push(h),u.push(this.createVertexTemplateEntry("shape="+t+e.toLowerCase()+i,Math.round(o*s),Math.round(a*s),"",e.replace(/_/g," "),null,null,this.filterTags(n.join(" ")))))}),!0,!0),this.addPaletteFunctions(t,e,!1,u)}else this.addPalette(t,e,!1,mxUtils.bind(this,function(t){if(null==i&&(i=""),null!=o&&o.call(this,t),null!=a)for(var e=0;e<a.length;e++)a[e](t);mxStencilRegistry.loadStencilSet(n,mxUtils.bind(this,function(e,n,o,r,a){(null==l||mxUtils.indexOf(l,n)<0)&&t.appendChild(this.createVertexTemplate("shape="+e+n.toLowerCase()+i,Math.round(r*s),Math.round(a*s),"",n.replace(/_/g," "),!0))}),!0)}))},Sidebar.prototype.destroy=function(){null!=this.graph&&(null!=this.graph.container&&null!=this.graph.container.parentNode&&this.graph.container.parentNode.removeChild(this.graph.container),this.graph.destroy(),this.graph=null),null!=this.pointerUpHandler&&(mxEvent.removeListener(document,mxClient.IS_POINTER?"pointerup":"mouseup",this.pointerUpHandler),this.pointerUpHandler=null),null!=this.pointerDownHandler&&(mxEvent.removeListener(document,mxClient.IS_POINTER?"pointerdown":"mousedown",this.pointerDownHandler),this.pointerDownHandler=null),null!=this.pointerMoveHandler&&(mxEvent.removeListener(document,mxClient.IS_POINTER?"pointermove":"mousemove",this.pointerMoveHandler),this.pointerMoveHandler=null),null!=this.pointerOutHandler&&(mxEvent.removeListener(document,mxClient.IS_POINTER?"pointerout":"mouseout",this.pointerOutHandler),this.pointerOutHandler=null)},Toolbar.prototype.dropdownImage=mxClient.IS_SVG?"data:image/gif;base64,R0lGODlhDQANAIABAHt7e////yH/C1hNUCBEYXRhWE1QPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS4wLWMwNjAgNjEuMTM0Nzc3LCAyMDEwLzAyLzEyLTE3OjMyOjAwICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOnhtcE1NPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvbW0vIiB4bWxuczpzdFJlZj0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL3NUeXBlL1Jlc291cmNlUmVmIyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M1IE1hY2ludG9zaCIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDpCREM1NkJFMjE0NEMxMUU1ODk1Q0M5MjQ0MTA4QjNDMSIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDpCREM1NkJFMzE0NEMxMUU1ODk1Q0M5MjQ0MTA4QjNDMSI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkQzOUMzMjZCMTQ0QjExRTU4OTVDQzkyNDQxMDhCM0MxIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOkQzOUMzMjZDMTQ0QjExRTU4OTVDQzkyNDQxMDhCM0MxIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+Af/+/fz7+vn49/b19PPy8fDv7u3s6+rp6Ofm5eTj4uHg397d3Nva2djX1tXU09LR0M/OzczLysnIx8bFxMPCwcC/vr28u7q5uLe2tbSzsrGwr66trKuqqainpqWko6KhoJ+enZybmpmYl5aVlJOSkZCPjo2Mi4qJiIeGhYSDgoGAf359fHt6eXh3dnV0c3JxcG9ubWxramloZ2ZlZGNiYWBfXl1cW1pZWFdWVVRTUlFQT05NTEtKSUhHRkVEQ0JBQD8+PTw7Ojk4NzY1NDMyMTAvLi0sKyopKCcmJSQjIiEgHx4dHBsaGRgXFhUUExIREA8ODQwLCgkIBwYFBAMCAQAAIfkEAQAAAQAsAAAAAA0ADQAAAhGMj6nL3QAjVHIu6azbvPtWAAA7":IMAGE_PATH+"/dropdown.gif",Toolbar.prototype.dropdownImageHtml='<img border="0" style="position:absolute;right:4px;top:'+(EditorUi.compactUi?6:8)+'px;" src="'+Toolbar.prototype.dropdownImage+'" valign="middle"/>',Toolbar.prototype.selectedBackground="#d0d0d0",Toolbar.prototype.unselectedBackground="none",Toolbar.prototype.staticElements=null,Toolbar.prototype.init=function(){var t,e=screen.width;700<=(e-=740<screen.height?56:0)&&(t=this.addMenu("",mxResources.get("view")+" ("+mxResources.get("panTooltip")+")",!0,"viewPanels",null,!0),this.addDropDownArrow(t,"geSprite-formatpanel",38,50,-4,-3,36,-8),this.addSeparator());var n=this.addMenu("",mxResources.get("zoom")+" (Alt+Mousewheel)",!0,"viewZoom",null,!0);n.showDisabled=!0,n.style.whiteSpace="nowrap",n.style.position="relative",n.style.overflow="hidden",n.style.width=EditorUi.compactUi?"50px":"36px",420<=e&&(this.addSeparator(),(t=this.addItems(["zoomIn","zoomOut"]))[0].setAttribute("title",mxResources.get("zoomIn")+" ("+this.editorUi.actions.get("zoomIn").shortcut+")"),t[1].setAttribute("title",mxResources.get("zoomOut")+" ("+this.editorUi.actions.get("zoomOut").shortcut+")")),this.updateZoom=mxUtils.bind(this,function(){n.innerHTML=Math.round(100*this.editorUi.editor.graph.view.scale)+"%"+this.dropdownImageHtml,EditorUi.compactUi&&(n.getElementsByTagName("img")[0].style.right="1px",n.getElementsByTagName("img")[0].style.top="5px")}),this.editorUi.editor.graph.view.addListener(mxEvent.EVENT_SCALE,this.updateZoom),this.editorUi.editor.addListener("resetGraphView",this.updateZoom),(t=this.addItems(["-","undo","redo"]))[1].setAttribute("title",mxResources.get("undo")+" ("+this.editorUi.actions.get("undo").shortcut+")"),t[2].setAttribute("title",mxResources.get("redo")+" ("+this.editorUi.actions.get("redo").shortcut+")"),320<=e&&(t=this.addItems(["-","delete"]))[1].setAttribute("title",mxResources.get("delete")+" ("+this.editorUi.actions.get("delete").shortcut+")"),550<=e&&this.addItems(["-","toFront","toBack"]),740<=e&&(this.addItems(["-","fillColor"]),780<=e&&(this.addItems(["strokeColor"]),820<=e&&this.addItems(["shadow"]))),400<=e&&(this.addSeparator(),440<=e&&(this.edgeShapeMenu=this.addMenuFunction("",mxResources.get("connection"),!1,mxUtils.bind(this,function(t){this.editorUi.menus.edgeStyleChange(t,"",[mxConstants.STYLE_SHAPE,"width"],[null,null],"geIcon geSprite geSprite-connection",null,!0).setAttribute("title",mxResources.get("line")),this.editorUi.menus.edgeStyleChange(t,"",[mxConstants.STYLE_SHAPE,"width"],["link",null],"geIcon geSprite geSprite-linkedge",null,!0).setAttribute("title",mxResources.get("link")),this.editorUi.menus.edgeStyleChange(t,"",[mxConstants.STYLE_SHAPE,"width"],["flexArrow",null],"geIcon geSprite geSprite-arrow",null,!0).setAttribute("title",mxResources.get("arrow")),this.editorUi.menus.edgeStyleChange(t,"",[mxConstants.STYLE_SHAPE,"width"],["arrow",null],"geIcon geSprite geSprite-simplearrow",null,!0).setAttribute("title",mxResources.get("simpleArrow"))})),this.addDropDownArrow(this.edgeShapeMenu,"geSprite-connection",44,50,0,0,22,-4)),this.edgeStyleMenu=this.addMenuFunction("geSprite-orthogonal",mxResources.get("waypoints"),!1,mxUtils.bind(this,function(t){this.editorUi.menus.edgeStyleChange(t,"",[mxConstants.STYLE_EDGE,mxConstants.STYLE_CURVED,mxConstants.STYLE_NOEDGESTYLE],[null,null,null],"geIcon geSprite geSprite-straight",null,!0).setAttribute("title",mxResources.get("straight")),this.editorUi.menus.edgeStyleChange(t,"",[mxConstants.STYLE_EDGE,mxConstants.STYLE_CURVED,mxConstants.STYLE_NOEDGESTYLE],["orthogonalEdgeStyle",null,null],"geIcon geSprite geSprite-orthogonal",null,!0).setAttribute("title",mxResources.get("orthogonal")),this.editorUi.menus.edgeStyleChange(t,"",[mxConstants.STYLE_EDGE,mxConstants.STYLE_ELBOW,mxConstants.STYLE_CURVED,mxConstants.STYLE_NOEDGESTYLE],["elbowEdgeStyle",null,null,null],"geIcon geSprite geSprite-horizontalelbow",null,!0).setAttribute("title",mxResources.get("simple")),this.editorUi.menus.edgeStyleChange(t,"",[mxConstants.STYLE_EDGE,mxConstants.STYLE_ELBOW,mxConstants.STYLE_CURVED,mxConstants.STYLE_NOEDGESTYLE],["elbowEdgeStyle","vertical",null,null],"geIcon geSprite geSprite-verticalelbow",null,!0).setAttribute("title",mxResources.get("simple")),this.editorUi.menus.edgeStyleChange(t,"",[mxConstants.STYLE_EDGE,mxConstants.STYLE_ELBOW,mxConstants.STYLE_CURVED,mxConstants.STYLE_NOEDGESTYLE],["isometricEdgeStyle",null,null,null],"geIcon geSprite geSprite-horizontalisometric",null,!0).setAttribute("title",mxResources.get("isometric")),this.editorUi.menus.edgeStyleChange(t,"",[mxConstants.STYLE_EDGE,mxConstants.STYLE_ELBOW,mxConstants.STYLE_CURVED,mxConstants.STYLE_NOEDGESTYLE],["isometricEdgeStyle","vertical",null,null],"geIcon geSprite geSprite-verticalisometric",null,!0).setAttribute("title",mxResources.get("isometric")),this.editorUi.menus.edgeStyleChange(t,"",[mxConstants.STYLE_EDGE,mxConstants.STYLE_CURVED,mxConstants.STYLE_NOEDGESTYLE],["orthogonalEdgeStyle","1",null],"geIcon geSprite geSprite-curved",null,!0).setAttribute("title",mxResources.get("curved")),this.editorUi.menus.edgeStyleChange(t,"",[mxConstants.STYLE_EDGE,mxConstants.STYLE_CURVED,mxConstants.STYLE_NOEDGESTYLE],["entityRelationEdgeStyle",null,null],"geIcon geSprite geSprite-entity",null,!0).setAttribute("title",mxResources.get("entityRelation"))})),this.addDropDownArrow(this.edgeStyleMenu,"geSprite-orthogonal",44,50,0,0,22,-4)),this.addSeparator(),e=this.addMenu("",mxResources.get("insert")+" ("+mxResources.get("doubleClickTooltip")+")",!0,"insert",null,!0),this.addDropDownArrow(e,"geSprite-plus",38,48,-4,-3,36,-8),this.addTableDropDown()},Toolbar.prototype.addTableDropDown=function(){this.addSeparator();var t=this.addMenuFunction("geIcon geSprite geSprite-table",mxResources.get("table"),!1,mxUtils.bind(this,function(t){var e=this.editorUi.editor.graph,n=e.getSelectionCell();e.isTableCell(n)||e.isTableRow(n)||e.isTable(n)?(t.addItem("",null,mxUtils.bind(this,function(){try{e.insertTableColumn(n,!0)}catch(t){this.editorUi.handleError(t)}}),null,"geIcon geSprite geSprite-insertcolumnbefore").setAttribute("title",mxResources.get("insertColumnBefore")),t.addItem("",null,mxUtils.bind(this,function(){try{e.insertTableColumn(n,!1)}catch(t){this.editorUi.handleError(t)}}),null,"geIcon geSprite geSprite-insertcolumnafter").setAttribute("title",mxResources.get("insertColumnAfter")),t.addItem("Delete column",null,mxUtils.bind(this,function(){if(null!=n)try{e.deleteTableColumn(n)}catch(t){this.editorUi.handleError(t)}}),null,"geIcon geSprite geSprite-deletecolumn").setAttribute("title",mxResources.get("deleteColumn")),t.addItem("",null,mxUtils.bind(this,function(){try{e.insertTableRow(n,!0)}catch(t){this.editorUi.handleError(t)}}),null,"geIcon geSprite geSprite-insertrowbefore").setAttribute("title",mxResources.get("insertRowBefore")),t.addItem("",null,mxUtils.bind(this,function(){try{e.insertTableRow(n,!1)}catch(t){this.editorUi.handleError(t)}}),null,"geIcon geSprite geSprite-insertrowafter").setAttribute("title",mxResources.get("insertRowAfter")),t.addItem("",null,mxUtils.bind(this,function(){try{e.deleteTableRow(n)}catch(t){this.editorUi.handleError(t)}}),null,"geIcon geSprite geSprite-deleterow").setAttribute("title",mxResources.get("deleteRow"))):this.editorUi.menus.addInsertTableCellItem(t)}));t.style.position="relative",t.style.whiteSpace="nowrap",t.style.overflow="hidden",t.innerHTML='<div class="geSprite geSprite-table" style="margin-left:-2px;"></div>'+this.dropdownImageHtml,t.style.width="30px",EditorUi.compactUi&&(t.getElementsByTagName("img")[0].style.left="22px",t.getElementsByTagName("img")[0].style.top="5px");var e=this.editorUi.menus.get("insert");return null!=e&&"function"==typeof t.setEnabled&&e.addListener("stateChanged",function(){t.setEnabled(e.enabled)}),t},Toolbar.prototype.addDropDownArrow=function(t,e,n,i,l,o,s,r){l=EditorUi.compactUi?l:r,t.style.whiteSpace="nowrap",t.style.overflow="hidden",t.style.position="relative",t.innerHTML='<div class="geSprite '+e+'" style="margin-left:'+l+"px;margin-top:"+o+'px;"></div>'+this.dropdownImageHtml,t.style.width=i-(null!=s?s:32)+"px",EditorUi.compactUi&&(t.getElementsByTagName("img")[0].style.left="24px",t.getElementsByTagName("img")[0].style.top="5px",t.style.width=n-10+"px")},Toolbar.prototype.setFontName=function(t){null!=this.fontMenu&&(this.fontMenu.innerHTML='<div style="width:60px;overflow:hidden;display:inline-block;">'+mxUtils.htmlEntities(t)+"</div>"+this.dropdownImageHtml)},Toolbar.prototype.setFontSize=function(t){null!=this.sizeMenu&&(this.sizeMenu.innerHTML='<div style="width:24px;overflow:hidden;display:inline-block;">'+mxUtils.htmlEntities(t)+"</div>"+this.dropdownImageHtml)},Toolbar.prototype.createTextToolbar=function(){var t=this.editorUi.editor.graph,e=this.addMenu("",mxResources.get("style"),!0,"formatBlock");e.style.position="relative",e.style.whiteSpace="nowrap",e.style.overflow="hidden",e.innerHTML=mxResources.get("style")+this.dropdownImageHtml,EditorUi.compactUi&&(e.style.paddingRight="18px",e.getElementsByTagName("img")[0].style.right="1px",e.getElementsByTagName("img")[0].style.top="5px"),this.addSeparator(),this.fontMenu=this.addMenu("",mxResources.get("fontFamily"),!0,"fontFamily"),this.fontMenu.style.position="relative",this.fontMenu.style.whiteSpace="nowrap",this.fontMenu.style.overflow="hidden",this.fontMenu.style.width="60px",this.setFontName(Menus.prototype.defaultFont),EditorUi.compactUi&&(this.fontMenu.style.paddingRight="18px",this.fontMenu.getElementsByTagName("img")[0].style.right="1px",this.fontMenu.getElementsByTagName("img")[0].style.top="5px"),this.addSeparator(),this.sizeMenu=this.addMenu(Menus.prototype.defaultFontSize,mxResources.get("fontSize"),!0,"fontSize"),this.sizeMenu.style.position="relative",this.sizeMenu.style.whiteSpace="nowrap",this.sizeMenu.style.overflow="hidden",this.sizeMenu.style.width="24px",this.setFontSize(Menus.prototype.defaultFontSize),EditorUi.compactUi&&(this.sizeMenu.style.paddingRight="18px",this.sizeMenu.getElementsByTagName("img")[0].style.right="1px",this.sizeMenu.getElementsByTagName("img")[0].style.top="5px"),(e=this.addItems("- undo redo - bold italic underline".split(" ")))[1].setAttribute("title",mxResources.get("undo")+" ("+this.editorUi.actions.get("undo").shortcut+")"),e[2].setAttribute("title",mxResources.get("redo")+" ("+this.editorUi.actions.get("redo").shortcut+")"),e[4].setAttribute("title",mxResources.get("bold")+" ("+this.editorUi.actions.get("bold").shortcut+")"),e[5].setAttribute("title",mxResources.get("italic")+" ("+this.editorUi.actions.get("italic").shortcut+")"),e[6].setAttribute("title",mxResources.get("underline")+" ("+this.editorUi.actions.get("underline").shortcut+")"),(e=this.addMenuFunction("",mxResources.get("align"),!1,mxUtils.bind(this,function(e){(n=e.addItem("",null,mxUtils.bind(this,function(e){t.cellEditor.alignText(mxConstants.ALIGN_LEFT,e)}),null,"geIcon geSprite geSprite-left")).setAttribute("title",mxResources.get("left")),(n=e.addItem("",null,mxUtils.bind(this,function(e){t.cellEditor.alignText(mxConstants.ALIGN_CENTER,e)}),null,"geIcon geSprite geSprite-center")).setAttribute("title",mxResources.get("center")),(n=e.addItem("",null,mxUtils.bind(this,function(e){t.cellEditor.alignText(mxConstants.ALIGN_RIGHT,e)}),null,"geIcon geSprite geSprite-right")).setAttribute("title",mxResources.get("right")),(n=e.addItem("",null,mxUtils.bind(this,function(){document.execCommand("justifyfull",!1,null)}),null,"geIcon geSprite geSprite-justifyfull")).setAttribute("title",mxResources.get("justifyfull")),(n=e.addItem("",null,mxUtils.bind(this,function(){document.execCommand("insertorderedlist",!1,null)}),null,"geIcon geSprite geSprite-orderedlist")).setAttribute("title",mxResources.get("numberedList")),(n=e.addItem("",null,mxUtils.bind(this,function(){document.execCommand("insertunorderedlist",!1,null)}),null,"geIcon geSprite geSprite-unorderedlist")).setAttribute("title",mxResources.get("bulletedList")),(n=e.addItem("",null,mxUtils.bind(this,function(){document.execCommand("outdent",!1,null)}),null,"geIcon geSprite geSprite-outdent")).setAttribute("title",mxResources.get("decreaseIndent")),(n=e.addItem("",null,mxUtils.bind(this,function(){document.execCommand("indent",!1,null)}),null,"geIcon geSprite geSprite-indent")).setAttribute("title",mxResources.get("increaseIndent"))}))).style.position="relative",e.style.whiteSpace="nowrap",e.style.overflow="hidden",e.innerHTML='<div class="geSprite geSprite-left" style="margin-left:-2px;"></div>'+this.dropdownImageHtml,e.style.width="30px",EditorUi.compactUi&&(e.getElementsByTagName("img")[0].style.left="22px",e.getElementsByTagName("img")[0].style.top="5px"),(e=this.addMenuFunction("",mxResources.get("format"),!1,mxUtils.bind(this,function(t){(n=t.addItem("",null,this.editorUi.actions.get("subscript").funct,null,"geIcon geSprite geSprite-subscript")).setAttribute("title",mxResources.get("subscript")+" ("+Editor.ctrlKey+"+,)"),(n=t.addItem("",null,this.editorUi.actions.get("superscript").funct,null,"geIcon geSprite geSprite-superscript")).setAttribute("title",mxResources.get("superscript")+" ("+Editor.ctrlKey+"+.)"),(n=t.addItem("",null,this.editorUi.actions.get("fontColor").funct,null,"geIcon geSprite geSprite-fontcolor")).setAttribute("title",mxResources.get("fontColor")),(n=t.addItem("",null,this.editorUi.actions.get("backgroundColor").funct,null,"geIcon geSprite geSprite-fontbackground")).setAttribute("title",mxResources.get("backgroundColor")),(n=t.addItem("",null,mxUtils.bind(this,function(){document.execCommand("removeformat",!1,null)}),null,"geIcon geSprite geSprite-removeformat")).setAttribute("title",mxResources.get("removeFormat"))}))).style.position="relative",e.style.whiteSpace="nowrap",e.style.overflow="hidden",e.innerHTML='<div class="geSprite geSprite-dots" style="margin-left:-2px;"></div>'+this.dropdownImageHtml,e.style.width="30px",EditorUi.compactUi&&(e.getElementsByTagName("img")[0].style.left="22px",e.getElementsByTagName("img")[0].style.top="5px"),this.addSeparator(),this.addButton("geIcon geSprite geSprite-code",mxResources.get("html"),function(){t.cellEditor.toggleViewMode(),0<t.cellEditor.textarea.innerHTML.length&&("&nbsp;"!=t.cellEditor.textarea.innerHTML||!t.cellEditor.clearOnChange)&&window.setTimeout(function(){document.execCommand("selectAll",!1,null)})}),this.addSeparator(),(e=this.addMenuFunction("",mxResources.get("insert"),!0,mxUtils.bind(this,function(t){t.addItem(mxResources.get("insertLink"),null,mxUtils.bind(this,function(){this.editorUi.actions.get("link").funct()})),t.addItem(mxResources.get("insertImage"),null,mxUtils.bind(this,function(){this.editorUi.actions.get("image").funct()})),t.addItem(mxResources.get("insertHorizontalRule"),null,mxUtils.bind(this,function(){document.execCommand("inserthorizontalrule",!1,null)}))}))).style.whiteSpace="nowrap",e.style.overflow="hidden",e.style.position="relative",e.innerHTML='<div class="geSprite geSprite-plus" style="margin-left:-4px;margin-top:-3px;"></div>'+this.dropdownImageHtml,e.style.width="16px",EditorUi.compactUi&&(e.getElementsByTagName("img")[0].style.left="24px",e.getElementsByTagName("img")[0].style.top="5px",e.style.width="30px"),this.addSeparator();var n=this.addMenuFunction("geIcon geSprite geSprite-table",mxResources.get("table"),!1,mxUtils.bind(this,function(e){var n,i=t.getSelectedElement(),l=t.getParentByNames(i,["TD","TH"],t.cellEditor.text2),o=t.getParentByName(i,"TR",t.cellEditor.text2);null==o?this.editorUi.menus.addInsertTableItem(e):(n=t.getParentByName(o,"TABLE",t.cellEditor.text2),(i=e.addItem("",null,mxUtils.bind(this,function(){try{t.selectNode(t.insertColumn(n,null!=l?l.cellIndex:0))}catch(e){this.editorUi.handleError(e)}}),null,"geIcon geSprite geSprite-insertcolumnbefore")).setAttribute("title",mxResources.get("insertColumnBefore")),(i=e.addItem("",null,mxUtils.bind(this,function(){try{t.selectNode(t.insertColumn(n,null!=l?l.cellIndex+1:-1))}catch(e){this.editorUi.handleError(e)}}),null,"geIcon geSprite geSprite-insertcolumnafter")).setAttribute("title",mxResources.get("insertColumnAfter")),(i=e.addItem("Delete column",null,mxUtils.bind(this,function(){if(null!=l)try{t.deleteColumn(n,l.cellIndex)}catch(e){this.editorUi.handleError(e)}}),null,"geIcon geSprite geSprite-deletecolumn")).setAttribute("title",mxResources.get("deleteColumn")),(i=e.addItem("",null,mxUtils.bind(this,function(){try{t.selectNode(t.insertRow(n,o.sectionRowIndex))}catch(e){this.editorUi.handleError(e)}}),null,"geIcon geSprite geSprite-insertrowbefore")).setAttribute("title",mxResources.get("insertRowBefore")),(i=e.addItem("",null,mxUtils.bind(this,function(){try{t.selectNode(t.insertRow(n,o.sectionRowIndex+1))}catch(e){this.editorUi.handleError(e)}}),null,"geIcon geSprite geSprite-insertrowafter")).setAttribute("title",mxResources.get("insertRowAfter")),(i=e.addItem("",null,mxUtils.bind(this,function(){try{t.deleteRow(n,o.sectionRowIndex)}catch(e){this.editorUi.handleError(e)}}),null,"geIcon geSprite geSprite-deleterow")).setAttribute("title",mxResources.get("deleteRow")),(i=e.addItem("",null,mxUtils.bind(this,function(){var t=n.style.borderColor.replace(/\brgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/g,function(t,e,n,i){return"#"+("0"+Number(e).toString(16)).substr(-2)+("0"+Number(n).toString(16)).substr(-2)+("0"+Number(i).toString(16)).substr(-2)});this.editorUi.pickColor(t,function(t){null==t||t==mxConstants.NONE?(n.removeAttribute("border"),n.style.border="",n.style.borderCollapse=""):(n.setAttribute("border","1"),n.style.border="1px solid "+t,n.style.borderCollapse="collapse")})}),null,"geIcon geSprite geSprite-strokecolor")).setAttribute("title",mxResources.get("borderColor")),(i=e.addItem("",null,mxUtils.bind(this,function(){var t=n.style.backgroundColor.replace(/\brgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/g,function(t,e,n,i){return"#"+("0"+Number(e).toString(16)).substr(-2)+("0"+Number(n).toString(16)).substr(-2)+("0"+Number(i).toString(16)).substr(-2)});this.editorUi.pickColor(t,function(t){n.style.backgroundColor=null==t||t==mxConstants.NONE?"":t})}),null,"geIcon geSprite geSprite-fillcolor")).setAttribute("title",mxResources.get("backgroundColor")),(i=e.addItem("",null,mxUtils.bind(this,function(){var t=n.getAttribute("cellPadding")||0;t=new FilenameDialog(this.editorUi,t,mxResources.get("apply"),mxUtils.bind(this,function(t){null!=t&&0<t.length?n.setAttribute("cellPadding",t):n.removeAttribute("cellPadding")}),mxResources.get("spacing")),this.editorUi.showDialog(t.container,300,80,!0,!0),t.init()}),null,"geIcon geSprite geSprite-fit")).setAttribute("title",mxResources.get("spacing")),(i=e.addItem("",null,mxUtils.bind(this,function(){n.setAttribute("align","left")}),null,"geIcon geSprite geSprite-left")).setAttribute("title",mxResources.get("left")),(i=e.addItem("",null,mxUtils.bind(this,function(){n.setAttribute("align","center")}),null,"geIcon geSprite geSprite-center")).setAttribute("title",mxResources.get("center")),(i=e.addItem("",null,mxUtils.bind(this,function(){n.setAttribute("align","right")}),null,"geIcon geSprite geSprite-right")).setAttribute("title",mxResources.get("right")))}));n.style.position="relative",n.style.whiteSpace="nowrap",n.style.overflow="hidden",n.innerHTML='<div class="geSprite geSprite-table" style="margin-left:-2px;"></div>'+this.dropdownImageHtml,n.style.width="30px",EditorUi.compactUi&&(n.getElementsByTagName("img")[0].style.left="22px",n.getElementsByTagName("img")[0].style.top="5px")},Toolbar.prototype.hideMenu=function(){this.editorUi.hideCurrentMenu()},Toolbar.prototype.addMenu=function(t,e,n,i,l,o,s){var r=this.editorUi.menus.get(i),a=this.addMenuFunction(t,e,n,function(){r.funct.apply(r,arguments)},l,o);return s||"function"!=typeof a.setEnabled||r.addListener("stateChanged",function(){a.setEnabled(r.enabled)}),a},Toolbar.prototype.addMenuFunction=function(t,e,n,i,l,o){return this.addMenuFunctionInContainer(null!=l?l:this.container,t,e,n,i,o)},Toolbar.prototype.addMenuFunctionInContainer=function(t,e,n,i,l,o){return e=i?this.createLabel(e):this.createButton(e),this.initElement(e,n),this.addMenuHandler(e,i,l,o),t.appendChild(e),e},Toolbar.prototype.addSeparator=function(t){t=null!=t?t:this.container;var e=document.createElement("div");return e.className="geSeparator",t.appendChild(e),e},Toolbar.prototype.addItems=function(t,e,n){for(var i=[],l=0;l<t.length;l++){var o=t[l];i.push("-"==o?this.addSeparator(e):this.addItem("geSprite-"+o.toLowerCase(),o,e,n))}return i},Toolbar.prototype.addItem=function(t,e,n,i){var l=this.editorUi.actions.get(e),o=null;return null!=l&&(e=l.label,null!=l.shortcut&&(e+=" ("+l.shortcut+")"),o=this.addButton(t,e,l.funct,n),i||"function"!=typeof o.setEnabled||(o.setEnabled(l.enabled),l.addListener("stateChanged",function(){o.setEnabled(l.enabled)}))),o},Toolbar.prototype.addButton=function(t,e,n,i){return t=this.createButton(t),i=null!=i?i:this.container,this.initElement(t,e),this.addClickHandler(t,n),i.appendChild(t),t},Toolbar.prototype.initElement=function(t,e){null!=e&&t.setAttribute("title",e),this.addEnabledState(t)},Toolbar.prototype.addEnabledState=function(t){var e=t.className;t.setEnabled=function(n){t.enabled=n,t.className=n?e:e+" mxDisabled"},t.setEnabled(!0)},Toolbar.prototype.addClickHandler=function(t,e){null!=e&&(mxEvent.addListener(t,"click",function(n){t.enabled&&e(n),mxEvent.consume(n)}),mxEvent.addListener(t,mxClient.IS_POINTER?"pointerdown":"mousedown",mxUtils.bind(this,function(t){t.preventDefault()})))},Toolbar.prototype.createButton=function(t){var e=document.createElement("a");e.className="geButton";var n=document.createElement("div");return null!=t&&(n.className="geSprite "+t),e.appendChild(n),e},Toolbar.prototype.createLabel=function(t,e){return(e=document.createElement("a")).className="geLabel",mxUtils.write(e,t),e},Toolbar.prototype.addMenuHandler=function(t,e,n,i){var l,o,s;null!=n&&(l=this.editorUi.editor.graph,s=!(o=null),mxEvent.addListener(t,"click",mxUtils.bind(this,function(r){var a;s&&(null==t.enabled||t.enabled)&&(l.popupMenuHandler.hideMenu(),(o=new mxPopupMenu(n)).div.className+=" geToolbarMenu",o.showDisabled=i,o.labels=e,o.autoExpand=!0,a=mxUtils.getOffset(t),o.popup(a.x,a.y+t.offsetHeight,null,r),this.editorUi.setCurrentMenu(o,t),!e&&o.div.scrollHeight>o.div.clientHeight&&(o.div.style.width="40px"),o.hideMenu=mxUtils.bind(this,function(){mxPopupMenu.prototype.hideMenu.apply(o,arguments),this.editorUi.resetCurrentMenu(),o.destroy()}),o.addListener(mxEvent.EVENT_HIDE,mxUtils.bind(this,function(){this.currentElt=null}))),s=!0,mxEvent.consume(r)})),mxEvent.addListener(t,mxClient.IS_POINTER?"pointerdown":"mousedown",mxUtils.bind(this,function(e){s=this.currentElt!=t,e.preventDefault()})))},Toolbar.prototype.destroy=function(){null!=this.gestureHandler&&(mxEvent.removeGestureListeners(document,this.gestureHandler),this.gestureHandler=null)},Editor.createRoughCanvas=function(t){var e=rough.canvas({getContext:function(){return t}});return e.draw=function(e){for(var n=e.sets||[],i=e.options||this.getDefaultOptions(),l=0;l<n.length;l++){var o=n[l];switch(o.type){case"path":null!=i.stroke&&this._drawToContext(t,o,i);break;case"fillPath":this._drawToContext(t,o,i);break;case"fillSketch":this.fillSketch(t,o,i)}}},e.fillSketch=function(e,n,i){var l=t.state.strokeColor,o=t.state.strokeWidth,s=t.state.strokeAlpha,r=t.state.dashed,a=i.fillWeight;a<0&&(a=i.strokeWidth/2),t.setStrokeAlpha(t.state.fillAlpha),t.setStrokeColor(i.fill||""),t.setStrokeWidth(a),t.setDashed(!1),this._drawToContext(e,n,i),t.setDashed(r),t.setStrokeWidth(o),t.setStrokeColor(l),t.setStrokeAlpha(s)},e._drawToContext=function(t,e,n){t.begin();for(var i=0;i<e.ops.length;i++){var l=e.ops[i],o=l.data;switch(l.op){case"move":t.moveTo(o[0],o[1]);break;case"bcurveTo":t.curveTo(o[0],o[1],o[2],o[3],o[4],o[5]);break;case"lineTo":t.lineTo(o[0],o[1])}}t.end(),"fillPath"===e.type&&n.filled?t.fill():t.stroke()},e},function(){function t(e,n,i){this.canvas=e,this.rc=n,this.shape=i,this.canvas.setLineJoin("round"),this.canvas.setLineCap("round"),this.originalBegin=this.canvas.begin,this.canvas.begin=mxUtils.bind(this,t.prototype.begin),this.originalEnd=this.canvas.end,this.canvas.end=mxUtils.bind(this,t.prototype.end),this.originalRect=this.canvas.rect,this.canvas.rect=mxUtils.bind(this,t.prototype.rect),this.originalRoundrect=this.canvas.roundrect,this.canvas.roundrect=mxUtils.bind(this,t.prototype.roundrect),this.originalEllipse=this.canvas.ellipse,this.canvas.ellipse=mxUtils.bind(this,t.prototype.ellipse),this.originalLineTo=this.canvas.lineTo,this.canvas.lineTo=mxUtils.bind(this,t.prototype.lineTo),this.originalMoveTo=this.canvas.moveTo,this.canvas.moveTo=mxUtils.bind(this,t.prototype.moveTo),this.originalQuadTo=this.canvas.quadTo,this.canvas.quadTo=mxUtils.bind(this,t.prototype.quadTo),this.originalCurveTo=this.canvas.curveTo,this.canvas.curveTo=mxUtils.bind(this,t.prototype.curveTo),this.originalArcTo=this.canvas.arcTo,this.canvas.arcTo=mxUtils.bind(this,t.prototype.arcTo),this.originalClose=this.canvas.close,this.canvas.close=mxUtils.bind(this,t.prototype.close),this.originalFill=this.canvas.fill,this.canvas.fill=mxUtils.bind(this,t.prototype.fill),this.originalStroke=this.canvas.stroke,this.canvas.stroke=mxUtils.bind(this,t.prototype.stroke),this.originalFillAndStroke=this.canvas.fillAndStroke,this.canvas.fillAndStroke=mxUtils.bind(this,t.prototype.fillAndStroke),this.path=[],this.passThrough=!1}t.prototype.moveOp="M",t.prototype.lineOp="L",t.prototype.quadOp="Q",t.prototype.curveOp="C",t.prototype.closeOp="Z",t.prototype.getStyle=function(t,e){var n=1;if(null!=this.shape.state){var i=this.shape.state.cell.id;if(null!=i)for(var l=0;l<i.length;l++)n=(n<<5)-n+i.charCodeAt(l)<<0}var o={strokeWidth:this.canvas.state.strokeWidth,seed:n,preserveVertices:!0},s=this.rc.getDefaultOptions();t?o.stroke="none"===this.canvas.state.strokeColor?"transparent":this.canvas.state.strokeColor:delete o.stroke;var r=null;return(o.filled=e)?(o.fill="none"===this.canvas.state.fillColor?"":this.canvas.state.fillColor,r="none"===this.canvas.state.gradientColor?null:this.canvas.state.gradientColor):o.fill="",o.bowing=mxUtils.getValue(this.shape.style,"bowing",s.bowing),o.hachureAngle=mxUtils.getValue(this.shape.style,"hachureAngle",s.hachureAngle),o.curveFitting=mxUtils.getValue(this.shape.style,"curveFitting",s.curveFitting),o.roughness=mxUtils.getValue(this.shape.style,"jiggle",s.roughness),o.simplification=mxUtils.getValue(this.shape.style,"simplification",s.simplification),o.disableMultiStroke=mxUtils.getValue(this.shape.style,"disableMultiStroke",s.disableMultiStroke),o.disableMultiStrokeFill=mxUtils.getValue(this.shape.style,"disableMultiStrokeFill",s.disableMultiStrokeFill),t=mxUtils.getValue(this.shape.style,"hachureGap",-1),o.hachureGap="auto"==t?-1:t,o.dashGap=mxUtils.getValue(this.shape.style,"dashGap",t),o.dashOffset=mxUtils.getValue(this.shape.style,"dashOffset",t),o.zigzagOffset=mxUtils.getValue(this.shape.style,"zigzagOffset",t),e=mxUtils.getValue(this.shape.style,"fillWeight",-1),o.fillWeight="auto"==e?-1:e,"auto"==(t=mxUtils.getValue(this.shape.style,"fillStyle","auto"))&&(e=null!=this.shape.state?this.shape.state.view.graph.defaultPageBackgroundColor:"#ffffff",t=null!=o.fill&&(null!=r||null!=e&&o.fill.toLowerCase()==e.toLowerCase())?"solid":s.fillStyle),o.fillStyle=t,o},t.prototype.begin=function(){this.passThrough?this.originalBegin.apply(this.canvas,arguments):this.path=[]},t.prototype.end=function(){this.passThrough&&this.originalEnd.apply(this.canvas,arguments)},t.prototype.addOp=function(){if(null!=this.path&&(this.path.push(arguments[0]),2<arguments.length))for(var t=2;t<arguments.length;t+=2)this.lastX=arguments[t-1],this.lastY=arguments[t],this.path.push(this.canvas.format(this.lastX)),this.path.push(this.canvas.format(this.lastY))},t.prototype.lineTo=function(t,e){this.passThrough?this.originalLineTo.apply(this.canvas,arguments):(this.addOp(this.lineOp,t,e),this.lastX=t,this.lastY=e)},t.prototype.moveTo=function(t,e){this.passThrough?this.originalMoveTo.apply(this.canvas,arguments):(this.addOp(this.moveOp,t,e),this.lastX=t,this.lastY=e,this.firstX=t,this.firstY=e)},t.prototype.close=function(){this.passThrough?this.originalClose.apply(this.canvas,arguments):this.addOp(this.closeOp)},t.prototype.quadTo=function(t,e,n,i){this.passThrough?this.originalQuadTo.apply(this.canvas,arguments):(this.addOp(this.quadOp,t,e,n,i),this.lastX=n,this.lastY=i)},t.prototype.curveTo=function(t,e,n,i,l,o){this.passThrough?this.originalCurveTo.apply(this.canvas,arguments):(this.addOp(this.curveOp,t,e,n,i,l,o),this.lastX=l,this.lastY=o)},t.prototype.arcTo=function(t,e,n,i,l,o,s){if(this.passThrough)this.originalArcTo.apply(this.canvas,arguments);else{var r=mxUtils.arcToCurves(this.lastX,this.lastY,t,e,n,i,l,o,s);if(null!=r)for(var a=0;a<r.length;a+=6)this.curveTo(r[a],r[a+1],r[a+2],r[a+3],r[a+4],r[a+5]);this.lastX=o,this.lastY=s}},t.prototype.rect=function(t,e,n,i){this.passThrough?this.originalRect.apply(this.canvas,arguments):(this.path=[],this.nextShape=this.rc.generator.rectangle(t,e,n,i,this.getStyle(!0,!0)))},t.prototype.ellipse=function(t,e,n,i){this.passThrough?this.originalEllipse.apply(this.canvas,arguments):(this.path=[],this.nextShape=this.rc.generator.ellipse(t+n/2,e+i/2,n,i,this.getStyle(!0,!0)))},t.prototype.roundrect=function(t,e,n,i,l,o){this.passThrough?this.originalRoundrect.apply(this.canvas,arguments):(this.begin(),this.moveTo(t+l,e),this.lineTo(t+n-l,e),this.quadTo(t+n,e,t+n,e+o),this.lineTo(t+n,e+i-o),this.quadTo(t+n,e+i,t+n-l,e+i),this.lineTo(t+l,e+i),this.quadTo(t,e+i,t,e+i-o),this.lineTo(t,e+o),this.quadTo(t,e,t+l,e))},t.prototype.drawPath=function(t){if(0<this.path.length){this.passThrough=!0;try{this.rc.path(this.path.join(" "),t)}catch(t){}this.passThrough=!1}else if(null!=this.nextShape){for(var e in t)this.nextShape.options[e]=t[e];null==t.stroke&&delete this.nextShape.options.stroke,t.filled||delete this.nextShape.options.fill,this.passThrough=!0,this.rc.draw(this.nextShape),this.passThrough=!1}},t.prototype.stroke=function(){this.passThrough?this.originalStroke.apply(this.canvas,arguments):this.drawPath(this.getStyle(!0,!1))},t.prototype.fill=function(){this.passThrough?this.originalFill.apply(this.canvas,arguments):this.drawPath(this.getStyle(!1,!0))},t.prototype.fillAndStroke=function(){this.passThrough?this.originalFillAndStroke.apply(this.canvas,arguments):this.drawPath(this.getStyle(!0,!0))},t.prototype.destroy=function(){this.canvas.lineTo=this.originalLineTo,this.canvas.moveTo=this.originalMoveTo,this.canvas.close=this.originalClose,this.canvas.quadTo=this.originalQuadTo,this.canvas.curveTo=this.originalCurveTo,this.canvas.arcTo=this.originalArcTo,this.canvas.close=this.originalClose,this.canvas.fill=this.originalFill,this.canvas.stroke=this.originalStroke,this.canvas.fillAndStroke=this.originalFillAndStroke,this.canvas.begin=this.originalBegin,this.canvas.end=this.originalEnd,this.canvas.rect=this.originalRect,this.canvas.ellipse=this.originalEllipse,this.canvas.roundrect=this.originalRoundrect},mxShape.prototype.createRoughCanvas=function(e){return new t(e,Editor.createRoughCanvas(e),this)};var e=mxShape.prototype.createHandJiggle;mxShape.prototype.createHandJiggle=function(t){return this.outline||null==this.style||"0"==mxUtils.getValue(this.style,"sketch","1"==urlParams.rough?"1":"0")?e.apply(this,arguments):"comic"==mxUtils.getValue(this.style,"sketchStyle","rough")?this.createComicCanvas(t):this.createRoughCanvas(t)};var n=mxShape.prototype.paint;mxShape.prototype.paint=function(e){var i,l,o,s,r,a=e.addTolerance,h=!0;null!=this.style&&(h="1"==mxUtils.getValue(this.style,mxConstants.STYLE_POINTER_EVENTS,"1")),null==e.handJiggle||e.handJiggle.constructor!=t||this.outline||(e.save(),i=this.fill,l=this.stroke,this.fill=null,this.stroke=null,o=this.configurePointerEvents,s=e.setStrokeColor,e.setStrokeColor=function(){},r=e.setFillColor,e.setFillColor=function(){},h||null==i||(this.configurePointerEvents=function(){}),e.handJiggle.passThrough=!0,n.apply(this,arguments),e.handJiggle.passThrough=!1,e.setFillColor=r,e.setStrokeColor=s,this.configurePointerEvents=o,this.stroke=l,this.fill=i,e.restore(),h&&null!=i&&(e.addTolerance=function(){})),n.apply(this,arguments),e.addTolerance=a};var i=mxShape.prototype.paintGlassEffect;mxShape.prototype.paintGlassEffect=function(e,n,l,o,s,r){null!=e.handJiggle&&e.handJiggle.constructor==t?(e.handJiggle.passThrough=!0,i.apply(this,arguments),e.handJiggle.passThrough=!1):i.apply(this,arguments)}}()},B9G6:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("ahDk");e.groupBy=function(t,e,n,l){return i.groupBy(t,e,n,l)(this)}},BSEn:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("ahDk");e.bufferToggle=function(t,e){return i.bufferToggle(t,e)(this)}},BdNY:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("DtyJ"),l=n("4Hgy");i.Observable.prototype.do=l._do,i.Observable.prototype._do=l._do},BilO:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("DtyJ");i.Observable.of=i.of},"C/AH":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("DtyJ"),l=n("Elj+");i.Observable.prototype.repeat=l.repeat},C8tm:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("DtyJ"),l=n("B9G6");i.Observable.prototype.groupBy=l.groupBy},COpn:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("ahDk");e.skipLast=function(t){return i.skipLast(t)(this)}},CVW7:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("ahDk");e.sample=function(t){return i.sample(t)(this)}},CuWV:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("ahDk");e.publishLast=function(){return i.publishLast()(this)}},DNeS:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("DtyJ"),l=n("4AtU");i.Observable.prototype.expand=l.expand},DWF9:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("DtyJ"),l=n("mfsk");i.Observable.prototype.defaultIfEmpty=l.defaultIfEmpty},DpPw:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("DtyJ"),l=n("bcPL");i.Observable.prototype.onErrorResumeNext=l.onErrorResumeNext},E2OZ:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("DtyJ"),l=n("VmLd");i.Observable.prototype.combineLatest=l.combineLatest},EUoG:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("DtyJ"),l=n("v87U");i.Observable.prototype.single=l.single},"Elj+":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("ahDk");e.repeat=function(t){return void 0===t&&(t=-1),i.repeat(t)(this)}},FDEy:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("ahDk");e.dematerialize=function(){return i.dematerialize()(this)}},FU7m:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("DtyJ");e.Observable=i.Observable,e.Subject=i.Subject;var l=n("lRok");e.AnonymousSubject=l.AnonymousSubject;var o=n("lRok");e.config=o.config,n("1JPw"),n("PpQq"),n("sNY3"),n("+v8i"),n("lK5c"),n("XPuz"),n("O5hQ"),n("fnh7"),n("Xj2z"),n("11EI"),n("3Qpg"),n("G4Hi"),n("uGYe"),n("RhlD"),n("mx47"),n("4w9M"),n("8Ip+"),n("BilO"),n("t0XI"),n("HAEL"),n("ojb+"),n("czqU"),n("QXri"),n("cD4w"),n("m1gp"),n("bi34"),n("uO2z"),n("3EiV"),n("vQc4"),n("hf5g"),n("Zw/6"),n("YA+d"),n("1M8x"),n("LxJG"),n("E2OZ"),n("KC9P"),n("Qw2J"),n("37L2"),n("RT2N"),n("9E4K"),n("KGUQ"),n("LOqM"),n("QtPd"),n("DWF9"),n("n2g9"),n("wfyD"),n("FZ9u"),n("+qxJ"),n("TwXD"),n("BdNY"),n("jIeU"),n("70oK"),n("DNeS"),n("q8yx"),n("hswa+"),n("Xs6s"),n("7MrP"),n("sjkp"),n("YwoP"),n("C8tm"),n("wWu8"),n("RFdt"),n("dlYL"),n("ksOG"),n("9HtI"),n("+4/i"),n("Kvnp"),n("89kA"),n("8YE1"),n("Qbza"),n("KVj6"),n("cPnI"),n("P+DX"),n("wGW3"),n("sRqT"),n("eyjB"),n("g0lY"),n("7RDD"),n("+oeQ"),n("DpPw"),n("7+k4"),n("Nh3w"),n("jdlx"),n("aMoL"),n("A+qg"),n("PZgn"),n("l3KV"),n("bUWp"),n("ob0Y"),n("C/AH"),n("W/jz"),n("+psR"),n("eYtX"),n("LUEE"),n("G12B"),n("QJJP"),n("G21R"),n("VSOP"),n("2+DN"),n("EUoG"),n("pe+M"),n("LSkT"),n("5hZ8"),n("9qLK"),n("gSmF"),n("rSqW"),n("okVX"),n("4Wg5"),n("W5YF"),n("oKp4"),n("0ZAG"),n("omlZ"),n("I6kD"),n("JpQp"),n("8Yhr"),n("VlMj"),n("fElF"),n("rqY6"),n("00Es"),n("TMm9"),n("XC4j"),n("ND/j"),n("7N5M"),n("2IC2"),n("bHhB"),n("6IDA"),n("cf52"),n("9Sef"),n("ofYe");var s=n("DtyJ");e.Subscription=s.Subscription,e.ReplaySubject=s.ReplaySubject,e.BehaviorSubject=s.BehaviorSubject,e.Notification=s.Notification,e.EmptyError=s.EmptyError,e.ArgumentOutOfRangeError=s.ArgumentOutOfRangeError,e.ObjectUnsubscribedError=s.ObjectUnsubscribedError,e.UnsubscriptionError=s.UnsubscriptionError,e.pipe=s.pipe;var r=n("V8dw");e.TestScheduler=r.TestScheduler;var a=n("DtyJ");e.Subscriber=a.Subscriber,e.AsyncSubject=a.AsyncSubject,e.ConnectableObservable=a.ConnectableObservable,e.TimeoutError=a.TimeoutError,e.VirtualTimeScheduler=a.VirtualTimeScheduler;var h=n("roV9");e.AjaxResponse=h.AjaxResponse,e.AjaxError=h.AjaxError,e.AjaxTimeoutError=h.AjaxTimeoutError;var u=n("DtyJ"),d=n("lRok"),c=n("lRok");e.TimeInterval=c.TimeInterval,e.Timestamp=c.Timestamp;var p=n("ahDk");e.operators=p,e.Scheduler={asap:u.asapScheduler,queue:u.queueScheduler,animationFrame:u.animationFrameScheduler,async:u.asyncScheduler},e.Symbol={rxSubscriber:d.rxSubscriber,observable:d.observable,iterator:d.iterator}},FZ9u:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("DtyJ"),l=n("vTln");i.Observable.prototype.distinct=l.distinct},G12B:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("DtyJ"),l=n("P71F");i.Observable.prototype.sampleTime=l.sampleTime},G21R:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("DtyJ"),l=n("UE8N");i.Observable.prototype.sequenceEqual=l.sequenceEqual},G4Hi:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("DtyJ");i.Observable.generate=i.generate},GsYY:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("ahDk");e.distinctUntilChanged=function(t,e){return i.distinctUntilChanged(t,e)(this)}},"H+DX":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("ahDk");e.observeOn=function(t,e){return void 0===e&&(e=0),i.observeOn(t,e)(this)}},HAEL:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("DtyJ");i.Observable.pairs=i.pairs},I6kD:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("DtyJ"),l=n("QTCG");i.Observable.prototype.takeWhile=l.takeWhile},IMZ1:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("ahDk");e.publishBehavior=function(t){return i.publishBehavior(t)(this)}},IUuq:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("ahDk");e.combineAll=function(t){return i.combineAll(t)(this)}},JM0U:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("DtyJ"),l=n("ahDk");e.auditTime=function(t,e){return void 0===e&&(e=i.asyncScheduler),l.auditTime(t,e)(this)}},JpQp:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("DtyJ"),l=n("LSSe");i.Observable.prototype.throttle=l.throttle},KC9P:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("DtyJ"),l=n("ovWV");i.Observable.prototype.concat=l.concat},KGUQ:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("DtyJ"),l=n("FDEy");i.Observable.prototype.dematerialize=l.dematerialize},KVj6:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("DtyJ"),l=n("7065");i.Observable.prototype.max=l.max},Kvnp:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("DtyJ"),l=n("cLIC");i.Observable.prototype.every=l.every},KxFi:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("ahDk");e.mergeAll=function(t){return void 0===t&&(t=Number.POSITIVE_INFINITY),i.mergeAll(t)(this)}},LM6Q:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("ahDk");e.startWith=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return i.startWith.apply(void 0,t)(this)}},LOqM:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("DtyJ"),l=n("uARb");i.Observable.prototype.debounce=l.debounce},"LOr+":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("DtyJ"),l=n("ahDk");e.debounceTime=function(t,e){return void 0===e&&(e=i.asyncScheduler),l.debounceTime(t,e)(this)}},LSSe:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("ahDk"),l=n("lRok");e.throttle=function(t,e){return void 0===e&&(e=l.defaultThrottleConfig),i.throttle(t,e)(this)}},LSkT:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("DtyJ"),l=n("COpn");i.Observable.prototype.skipLast=l.skipLast},LUEE:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("DtyJ"),l=n("CVW7");i.Observable.prototype.sample=l.sample},LfHy:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("ahDk");e.publishReplay=function(t,e,n,l){return i.publishReplay(t,e,n,l)(this)}},Lsvf:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("ahDk");e.ignoreElements=function(){return i.ignoreElements()(this)}},LxJG:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("DtyJ"),l=n("IUuq");i.Observable.prototype.combineAll=l.combineAll},M6P7:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("ahDk");e._finally=function(t){return i.finalize(t)(this)}},Mw3v:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("ahDk");e.pluck=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return i.pluck.apply(void 0,t)(this)}},Myac:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("ahDk");e.race=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return i.race.apply(void 0,t)(this)}},"ND/j":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("DtyJ"),l=n("Xh4i");i.Observable.prototype.window=l.window},NEMR:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("ahDk");e.retryWhen=function(t){return i.retryWhen(t)(this)}},Nh3w:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("DtyJ"),l=n("Y7AG");i.Observable.prototype.partition=l.partition},O5hQ:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("DtyJ");i.Observable.forkJoin=i.forkJoin},"P+DX":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("DtyJ"),l=n("KxFi");i.Observable.prototype.mergeAll=l.mergeAll},P71F:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("DtyJ"),l=n("ahDk");e.sampleTime=function(t,e){return void 0===e&&(e=i.asyncScheduler),l.sampleTime(t,e)(this)}},PZgn:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("DtyJ"),l=n("LfHy");i.Observable.prototype.publishReplay=l.publishReplay},PpQq:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("DtyJ");i.Observable.bindNodeCallback=i.bindNodeCallback},QJJP:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("DtyJ"),l=n("elu/");i.Observable.prototype.scan=l.scan},"QPu+":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("ahDk");e.reduce=function(t,e){return arguments.length>=2?i.reduce(t,e)(this):i.reduce(t)(this)}},QTCG:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("ahDk");e.takeWhile=function(t){return i.takeWhile(t)(this)}},QXri:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("DtyJ");i.Observable.throw=i.throwError,i.Observable.throwError=i.throwError},Qbza:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("DtyJ"),l=n("1gRP");i.Observable.prototype.materialize=l.materialize},QsQ4:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("ahDk");e.withLatestFrom=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return i.withLatestFrom.apply(void 0,t)(this)}},QtPd:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("DtyJ"),l=n("LOr+");i.Observable.prototype.debounceTime=l.debounceTime},Qw2J:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("DtyJ"),l=n("caIW");i.Observable.prototype.concatAll=l.concatAll},RFdt:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("DtyJ"),l=n("nueD");i.Observable.prototype.isEmpty=l.isEmpty},RFoL:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("ahDk");e.first=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return i.first.apply(void 0,t)(this)}},RT2N:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("DtyJ"),l=n("eUyF");i.Observable.prototype.concatMapTo=l.concatMapTo},RhlD:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("DtyJ");i.Observable.interval=i.interval},SjmF:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("ahDk");e.min=function(t){return i.min(t)(this)}},TMm9:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("DtyJ"),l=n("0c70");i.Observable.prototype.toArray=l.toArray},TpWx:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("ahDk");e.windowCount=function(t,e){return void 0===e&&(e=0),i.windowCount(t,e)(this)}},TqLU:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("ahDk");e.find=function(t,e){return i.find(t,e)(this)}},TwXD:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("DtyJ"),l=n("7y2s");i.Observable.prototype.distinctUntilKeyChanged=l.distinctUntilKeyChanged},UE8N:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("ahDk");e.sequenceEqual=function(t,e){return i.sequenceEqual(t,e)(this)}},V8dw:function(t,e,n){"use strict";n.r(e);var i=n("mrSG"),l=n("6blF"),o=n("60iU"),s=n("pugT"),r=function(){return function(t,e){void 0===e&&(e=Number.POSITIVE_INFINITY),this.subscribedFrame=t,this.unsubscribedFrame=e}}(),a=(n("mQwz"),function(t){function e(e,n){var i=t.call(this,function(t){var e=this,n=e.logSubscribedFrame(),i=new s.a;return i.add(new s.a(function(){e.logUnsubscribedFrame(n)})),e.scheduleMessages(t),i})||this;return i.messages=e,i.subscriptions=[],i.scheduler=n,i}return i.__extends(e,t),e.prototype.scheduleMessages=function(t){for(var e=this.messages.length,n=0;n<e;n++){var i=this.messages[n];t.add(this.scheduler.schedule(function(t){t.message.notification.observe(t.subscriber)},i.frame,{message:i,subscriber:t}))}},e}(l.a)),h=function(t){function e(e,n){var i=t.call(this)||this;return i.messages=e,i.subscriptions=[],i.scheduler=n,i}return i.__extends(e,t),e.prototype._subscribe=function(e){var n=this,i=n.logSubscribedFrame(),l=new s.a;return l.add(new s.a(function(){n.logUnsubscribedFrame(i)})),l.add(t.prototype._subscribe.call(this,e)),l},e.prototype.setup=function(){for(var t=this,e=t.messages.length,n=0;n<e;n++)!function(){var e=t.messages[n];t.scheduler.schedule(function(){e.notification.observe(t)},e.frame)}()},e}(n("K9Ia").b),u=n("UR0p"),d=n("CS9Q"),c=750,p=function(t){function e(e){var n=t.call(this,u.a,c)||this;return n.assertDeepEqual=e,n.hotObservables=[],n.coldObservables=[],n.flushTests=[],n.runMode=!1,n}return i.__extends(e,t),e.prototype.createTime=function(t){var n=t.indexOf("|");if(-1===n)throw new Error('marble diagram for time should have a completion marker "|"');return n*e.frameTimeFactor},e.prototype.createColdObservable=function(t,n,i){if(-1!==t.indexOf("^"))throw new Error('cold observable cannot have subscription offset "^"');if(-1!==t.indexOf("!"))throw new Error('cold observable cannot have unsubscription marker "!"');var l=e.parseMarbles(t,n,i,void 0,this.runMode),o=new a(l,this);return this.coldObservables.push(o),o},e.prototype.createHotObservable=function(t,n,i){if(-1!==t.indexOf("!"))throw new Error('hot observable cannot have unsubscription marker "!"');var l=e.parseMarbles(t,n,i,void 0,this.runMode),o=new h(l,this);return this.hotObservables.push(o),o},e.prototype.materializeInnerObservable=function(t,e){var n=this,i=[];return t.subscribe(function(t){i.push({frame:n.frame-e,notification:o.a.createNext(t)})},function(t){i.push({frame:n.frame-e,notification:o.a.createError(t)})},function(){i.push({frame:n.frame-e,notification:o.a.createComplete()})}),i},e.prototype.expectObservable=function(t,n){var i=this;void 0===n&&(n=null);var s,r=[],a={actual:r,ready:!1},h=e.parseMarblesAsSubscriptions(n,this.runMode),u=h.subscribedFrame===Number.POSITIVE_INFINITY?0:h.subscribedFrame,d=h.unsubscribedFrame;this.schedule(function(){s=t.subscribe(function(t){var e=t;t instanceof l.a&&(e=i.materializeInnerObservable(e,i.frame)),r.push({frame:i.frame,notification:o.a.createNext(e)})},function(t){r.push({frame:i.frame,notification:o.a.createError(t)})},function(){r.push({frame:i.frame,notification:o.a.createComplete()})})},u),d!==Number.POSITIVE_INFINITY&&this.schedule(function(){return s.unsubscribe()},d),this.flushTests.push(a);var c=this.runMode;return{toBe:function(t,n,i){a.ready=!0,a.expected=e.parseMarbles(t,n,i,!0,c)}}},e.prototype.expectSubscriptions=function(t){var n={actual:t,ready:!1};this.flushTests.push(n);var i=this.runMode;return{toBe:function(t){var l="string"==typeof t?[t]:t;n.ready=!0,n.expected=l.map(function(t){return e.parseMarblesAsSubscriptions(t,i)})}}},e.prototype.flush=function(){for(var e=this,n=this.hotObservables;n.length>0;)n.shift().setup();t.prototype.flush.call(this),this.flushTests=this.flushTests.filter(function(t){return!t.ready||(e.assertDeepEqual(t.actual,t.expected),!1)})},e.parseMarblesAsSubscriptions=function(t,e){var n=this;if(void 0===e&&(e=!1),"string"!=typeof t)return new r(Number.POSITIVE_INFINITY);for(var i,l=t.length,o=-1,s=Number.POSITIVE_INFINITY,a=Number.POSITIVE_INFINITY,h=0,u=function(l){var r=h,u=function(t){r+=t*n.frameTimeFactor},c=t[l];switch(c){case" ":e||u(1);break;case"-":u(1);break;case"(":o=h,u(1);break;case")":o=-1,u(1);break;case"^":if(s!==Number.POSITIVE_INFINITY)throw new Error("found a second subscription point '^' in a subscription marble diagram. There can only be one.");s=o>-1?o:h,u(1);break;case"!":if(a!==Number.POSITIVE_INFINITY)throw new Error("found a second subscription point '^' in a subscription marble diagram. There can only be one.");a=o>-1?o:h;break;default:if(e&&c.match(/^[0-9]$/)&&(0===l||" "===t[l-1])){var p=t.slice(l).match(/^([0-9]+(?:\.[0-9]+)?)(ms|s|m) /);if(p){l+=p[0].length-1;var m=parseFloat(p[1]),g=void 0;switch(p[2]){case"ms":g=m;break;case"s":g=1e3*m;break;case"m":g=1e3*m*60}u(g/d.frameTimeFactor);break}}throw new Error("there can only be '^' and '!' markers in a subscription marble diagram. Found instead '"+c+"'.")}h=r,i=l},d=this,c=0;c<l;c++)u(c),c=i;return a<0?new r(s):new r(s,a)},e.parseMarbles=function(t,e,n,i,l){var s=this;if(void 0===i&&(i=!1),void 0===l&&(l=!1),-1!==t.indexOf("!"))throw new Error('conventional marble diagrams cannot have the unsubscription marker "!"');for(var r,h=t.length,u=[],d=l?t.replace(/^[ ]+/,"").indexOf("^"):t.indexOf("^"),c=-1===d?0:d*-this.frameTimeFactor,p="object"!=typeof e?function(t){return t}:function(t){return i&&e[t]instanceof a?e[t].messages:e[t]},m=-1,g=function(e){var i=c,a=function(t){i+=t*s.frameTimeFactor},h=void 0,d=t[e];switch(d){case" ":l||a(1);break;case"-":a(1);break;case"(":m=c,a(1);break;case")":m=-1,a(1);break;case"|":h=o.a.createComplete(),a(1);break;case"^":a(1);break;case"#":h=o.a.createError(n||"error"),a(1);break;default:if(l&&d.match(/^[0-9]$/)&&(0===e||" "===t[e-1])){var g=t.slice(e).match(/^([0-9]+(?:\.[0-9]+)?)(ms|s|m) /);if(g){e+=g[0].length-1;var y=parseFloat(g[1]),f=void 0;switch(g[2]){case"ms":f=y;break;case"s":f=1e3*y;break;case"m":f=1e3*y*60}a(f/x.frameTimeFactor);break}}h=o.a.createNext(p(d)),a(1)}h&&u.push({frame:m>-1?m:c,notification:h}),c=i,r=e},x=this,y=0;y<h;y++)g(y),y=r;return u},e.prototype.run=function(t){var n=e.frameTimeFactor,i=this.maxFrames;e.frameTimeFactor=1,this.maxFrames=Number.POSITIVE_INFINITY,this.runMode=!0,d.a.delegate=this;var l={cold:this.createColdObservable.bind(this),hot:this.createHotObservable.bind(this),flush:this.flush.bind(this),expectObservable:this.expectObservable.bind(this),expectSubscriptions:this.expectSubscriptions.bind(this)};try{var o=t(l);return this.flush(),o}finally{e.frameTimeFactor=n,this.maxFrames=i,this.runMode=!1,d.a.delegate=void 0}},e}(u.b);n.d(e,"TestScheduler",function(){return p})},VSOP:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("DtyJ"),l=n("l4jP");i.Observable.prototype.share=l.share},VlMj:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("DtyJ"),l=n("bKLx");i.Observable.prototype.timeInterval=l.timeInterval},VmLd:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("DtyJ"),l=n("lRok");e.combineLatest=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=null;return"function"==typeof t[t.length-1]&&(n=t.pop()),1===t.length&&l.isArray(t[0])&&(t=t[0].slice()),this.lift.call(i.of.apply(void 0,[this].concat(t)),new l.CombineLatestOperator(n))}},Vzig:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("DtyJ"),l=n("lRok"),o=n("ahDk");e.throttleTime=function(t,e,n){return void 0===e&&(e=i.asyncScheduler),void 0===n&&(n=l.defaultThrottleConfig),o.throttleTime(t,e,n)(this)}},"W/jz":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("DtyJ"),l=n("A5T5");i.Observable.prototype.repeatWhen=l.repeatWhen},W5YF:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("DtyJ"),l=n("oXC5");i.Observable.prototype.switchMapTo=l.switchMapTo},XC4j:function(t,e){},XDL1:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("ahDk");e.elementAt=function(t,e){return i.elementAt.apply(void 0,arguments)(this)}},XPuz:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("DtyJ");i.Observable.empty=i.empty},Xh4i:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("ahDk");e.window=function(t){return i.window(t)(this)}},Xj2z:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("DtyJ");i.Observable.fromEvent=i.fromEvent},Xk39:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("ahDk");e._catch=function(t){return i.catchError(t)(this)}},Xs6s:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("DtyJ"),l=n("M6P7");i.Observable.prototype.finally=l._finally,i.Observable.prototype._finally=l._finally},Y7AG:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("ahDk");e.partition=function(t,e){return i.partition(t,e)(this)}},"YA+d":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("DtyJ"),l=n("cYpg");i.Observable.prototype.bufferWhen=l.bufferWhen},YiA4:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("ahDk");e.windowWhen=function(t){return i.windowWhen(t)(this)}},YwoP:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("DtyJ"),l=n("RFoL");i.Observable.prototype.first=l.first},ZHaO:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("ahDk");e.multicast=function(t,e){return i.multicast(t,e)(this)}},ZHpM:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("ahDk");e.take=function(t){return i.take(t)(this)}},ZR4w:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("ahDk");e.map=function(t,e){return i.map(t,e)(this)}},"Zw/6":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("DtyJ"),l=n("BSEn");i.Observable.prototype.bufferToggle=l.bufferToggle},aMoL:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("DtyJ"),l=n("jtHT");i.Observable.prototype.publish=l.publish},aP66:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("DtyJ"),l=n("ahDk");e.timeout=function(t,e){return void 0===e&&(e=i.asyncScheduler),l.timeout(t,e)(this)}},atJV:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("ahDk");e.last=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return i.last.apply(void 0,t)(this)}},"b/PJ":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("ahDk");e.skipUntil=function(t){return i.skipUntil(t)(this)}},bHhB:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("DtyJ"),l=n("n6Nf");i.Observable.prototype.windowToggle=l.windowToggle},bKLx:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("DtyJ"),l=n("ahDk");e.timeInterval=function(t){return void 0===t&&(t=i.asyncScheduler),l.timeInterval(t)(this)}},bUWp:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("DtyJ"),l=n("Myac");i.Observable.prototype.race=l.race},"bb3/":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("DtyJ"),l=n("ahDk");e.timestamp=function(t){return void 0===t&&(t=i.asyncScheduler),l.timestamp(t)(this)}},bcPL:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("ahDk");e.onErrorResumeNext=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return i.onErrorResumeNext.apply(void 0,t)(this)}},bd5T:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("DtyJ"),l=n("ahDk");e.delay=function(t,e){return void 0===e&&(e=i.asyncScheduler),l.delay(t,e)(this)}},bi34:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("DtyJ"),l=n("roV9");i.Observable.ajax=l.ajax},cD4w:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("DtyJ");i.Observable.timer=i.timer},cLIC:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("ahDk");e.every=function(t,e){return i.every(t,e)(this)}},cPnI:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("DtyJ"),l=n("02G1");i.Observable.prototype.merge=l.merge},cYpg:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("ahDk");e.bufferWhen=function(t){return i.bufferWhen(t)(this)}},caIW:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("ahDk");e.concatAll=function(){return i.concatAll()(this)}},cf52:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("DtyJ"),l=n("QsQ4");i.Observable.prototype.withLatestFrom=l.withLatestFrom},ciat:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("ahDk");e.audit=function(t){return i.audit(t)(this)}},czqU:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("DtyJ");i.Observable.using=i.using},dL1u:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("ahDk");e.buffer=function(t){return i.buffer(t)(this)}},dlYL:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("DtyJ"),l=n("ciat");i.Observable.prototype.audit=l.audit},eUyF:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("ahDk");e.concatMapTo=function(t){return i.concatMapTo(t)(this)}},eYtX:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("DtyJ"),l=n("NEMR");i.Observable.prototype.retryWhen=l.retryWhen},"elu/":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("ahDk");e.scan=function(t,e){return arguments.length>=2?i.scan(t,e)(this):i.scan(t)(this)}},eyjB:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("DtyJ"),l=n("mQn8");i.Observable.prototype.mergeScan=l.mergeScan},fElF:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("DtyJ"),l=n("aP66");i.Observable.prototype.timeout=l.timeout},fUwU:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("ahDk");e.skip=function(t){return i.skip(t)(this)}},fY5S:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("DtyJ");e.zipProto=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this.lift.call(i.zip.apply(void 0,[this].concat(t)))}},fnh7:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("DtyJ");i.Observable.from=i.from},g0lY:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("DtyJ"),l=n("SjmF");i.Observable.prototype.min=l.min},gSmF:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("DtyJ"),l=n("LM6Q");i.Observable.prototype.startWith=l.startWith},gzwt:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("ahDk");e.count=function(t){return i.count(t)(this)}},hf5g:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("DtyJ"),l=n("9xAK");i.Observable.prototype.bufferTime=l.bufferTime},"hswa+":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("DtyJ"),l=n("ADT6");i.Observable.prototype.filter=l.filter},iD44:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("ahDk");e.mergeMap=function(t,e){return void 0===e&&(e=Number.POSITIVE_INFINITY),i.mergeMap(t,e)(this)}},"itJ+":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("ahDk");e.bufferCount=function(t,e){return void 0===e&&(e=null),i.bufferCount(t,e)(this)}},j5kd:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("DtyJ"),l=n("lRok"),o=n("ahDk");e.windowTime=function(t){var e=i.asyncScheduler,n=null,s=Number.POSITIVE_INFINITY;return l.isScheduler(arguments[3])&&(e=arguments[3]),l.isScheduler(arguments[2])?e=arguments[2]:l.isNumeric(arguments[2])&&(s=Number(arguments[2])),l.isScheduler(arguments[1])?e=arguments[1]:l.isNumeric(arguments[1])&&(n=Number(arguments[1])),o.windowTime(t,n,s,e)(this)}},jIeU:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("DtyJ"),l=n("5LO2");i.Observable.prototype.exhaust=l.exhaust},jdlx:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("DtyJ"),l=n("Mw3v");i.Observable.prototype.pluck=l.pluck},jtHT:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("ahDk");e.publish=function(t){return i.publish(t)(this)}},kIVX:function(t,e,n){"use strict";n.r(e);var i=n("CcnG"),l=function(){return function(){}}(),o=n("pMnS"),s=[".btnGroupContainer[_ngcontent-%COMP%]{position:absolute;bottom:1rem;right:1.5rem;z-index:99}.btnGroup[_ngcontent-%COMP%]{background-color:#fff;border-radius:8px;box-shadow:0 1px 4px rgba(0,0,0,.3);width:32px;height:32px;position:relative;margin-bottom:10px}.btnGroup.extra[_ngcontent-%COMP%]{height:65px;display:flex;justify-content:center;flex-direction:column}.seperator[_ngcontent-%COMP%]{width:80%;height:.5px;background:#888c9b;margin:auto}.button[_ngcontent-%COMP%]{display:block;cursor:pointer;transition:background-color .16s ease-out;background:0 0;border:none;height:100%;width:100%;align-items:center;justify-content:center;display:flex;position:relative}.button[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#455a64;font-size:13px}.tooltip[_ngcontent-%COMP%]{opacity:1;display:none;position:absolute;left:0;top:50%;transform:translate(-125%,-50%);background:#455a64;padding:8px 10px;border-radius:6px;color:#ffff!important;font-size:13px!important;font-weight:700}.tooltip[_ngcontent-%COMP%]::after{content:'';position:absolute;width:0;height:0;border-width:10px;border-style:solid;border-color:transparent transparent transparent #455a64;right:0;transform:translate(90%,-50%);top:50%}.button[_ngcontent-%COMP%]:focus, .button[_ngcontent-%COMP%]:hover{outline:0!important}.button[_ngcontent-%COMP%]:hover   .tooltip[_ngcontent-%COMP%]{display:block}.button[_ngcontent-%COMP%]:hover   .fa[_ngcontent-%COMP%]{color:#008bfe}#reset[_ngcontent-%COMP%]   .fa[_ngcontent-%COMP%]{transform:scale(-1,1)}[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:0 0}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#ddd}[_ngcontent-%COMP%]::-webkit-scrollbar{width:8px;height:8px}.loader-rings[_ngcontent-%COMP%]{display:inline-block;width:80px;height:80px}.loader-rings[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{box-sizing:border-box;display:block;position:absolute;width:64px;height:64px;margin:8px;border:8px solid #fff;border-radius:50%;-webkit-animation:1.2s cubic-bezier(.5,0,.5,1) infinite loader-rings;animation:1.2s cubic-bezier(.5,0,.5,1) infinite loader-rings;border-color:#2d7bdb transparent transparent}.loader-rings[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(1){-webkit-animation-delay:-.45s;animation-delay:-.45s}.loader-rings[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(2){-webkit-animation-delay:-.3s;animation-delay:-.3s}.loader-rings[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(3){-webkit-animation-delay:-.15s;animation-delay:-.15s}@-webkit-keyframes loader-rings{0%{transform:rotate(0)}100%{transform:rotate(360deg)}}@keyframes loader-rings{0%{transform:rotate(0)}100%{transform:rotate(360deg)}}#sld-loader[_ngcontent-%COMP%]{margin:10% 0 0}#loader-container[_ngcontent-%COMP%]{z-index:41;position:absolute;height:100%;width:100%;background:#e9eaed;text-align:center}.isNotAllowed[_ngcontent-%COMP%]{cursor:not-allowed!important}tr[_ngcontent-%COMP%]{text-align:center}.modbus_info_span[_ngcontent-%COMP%]{font-size:15px;line-height:2rem}.table[_ngcontent-%COMP%]   .thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .ui-sortable-handle[_ngcontent-%COMP%]   .draggable[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:16px}.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{border:none!important;color:#484a4b!important}.table[_ngcontent-%COMP%]   .thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .ui-sortable-handle.grabbing[_ngcontent-%COMP%]{left:10px!important;right:10px!important;margin:auto;width:100%}.table[_ngcontent-%COMP%]   .thead-dark[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{vertical-align:middle;color:#000;background:0 0;padding:0 7px!important;border-top:1px solid #dee2e6!important;border-bottom:0 solid transparent}.table[_ngcontent-%COMP%]{margin-bottom:10px}.table[_ngcontent-%COMP%]   .thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .ui-sortable-handle.grabbing.ui-sortable-helper[_ngcontent-%COMP%]   .draggable[_ngcontent-%COMP%]   .fa-circle-o[_ngcontent-%COMP%]:before{background:#e5e5e5;transform:scale(1.1) rotate(90deg);vertical-align:middle}thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{border-top:none;vertical-align:middle!important}.modbus_info_div[_ngcontent-%COMP%], thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{position:sticky;position:-webkit-sticky;top:0;background:#fff;z-index:9;height:45px;padding:0 5px;vertical-align:middle!important;text-align:left;font-size:14px;color:#888c9b;max-width:150px;min-width:90px;text-overflow:ellipsis;overflow:hidden;white-space:nowrap;border-top:.2px solid #e9ecef;border-bottom:none;font-weight:500;box-shadow:5px 2px 9px 0 #e9eaedb0}tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{vertical-align:middle;background:#fff}tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child{position:-webkit-sticky;position:sticky;left:0}th[_ngcontent-%COMP%]:first-child{position:sticky;position:-webkit-sticky;top:0;left:0;background:#fff;text-align:initial}th[_ngcontent-%COMP%]:nth-child(2), tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(2){padding-left:12px!important}tbody[_ngcontent-%COMP%]{overflow:auto}tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{height:45px;padding:0 5px;vertical-align:middle;text-align:left;color:#888c9b;max-width:150px;min-width:90px;text-overflow:ellipsis;white-space:nowrap;font-size:10pt;overflow:hidden}tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:last-child{border:none}.modbus_info_div[_ngcontent-%COMP%]{width:100%;max-width:100%;text-align:center;min-height:30px}.fa-exclamation-triangle[_ngcontent-%COMP%]{padding:10px}.loader-rings[_ngcontent-%COMP%]{position:absolute;top:36%;left:50%;transform:translate(-50%,-50%)}.mdbs_loader[_ngcontent-%COMP%]{position:absolute!important;z-index:100;background:#fff;left:50%}.modal_height[_ngcontent-%COMP%]{height:calc(100% - 8%)}.retry_request[_ngcontent-%COMP%]{position:relative;top:calc(50% - 100px);margin:0 auto;border-radius:65%}.retry_request[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:initial;color:#6c757d}.modal-body[_ngcontent-%COMP%]{text-align:center;overflow:auto}.fa-exclamation-circle[_ngcontent-%COMP%], .fa-refresh[_ngcontent-%COMP%]{font-size:6rem;color:rgba(0,0,0,.15)}.modal-header[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%], .no_results_found[_ngcontent-%COMP%]{white-space:nowrap;width:100%;overflow:hidden;text-overflow:ellipsis;line-height:inherit;margin-bottom:4px}.modal-header[_ngcontent-%COMP%]{align-items:flex-end}.mdbsSearch[_ngcontent-%COMP%]{padding:5px!important;width:50%;border:1px solid #b7b7b7!important}.no_results_found[_ngcontent-%COMP%]{font-size:1rem;background:#eaeaea;color:#7d7e80;padding:10px;box-shadow:5px 2px 9px 0 #e9eaedb0}.modal[_ngcontent-%COMP%]{height:100%}.main-loader[_ngcontent-%COMP%]{width:100%;height:100%;z-index:1;position:relative;margin:0 auto}.context[_ngcontent-%COMP%], .sub-menu[_ngcontent-%COMP%]{font-size:1.1em;position:absolute;width:200px;height:auto;border-radius:5px;background-color:#fff;box-shadow:0 2px 6px 2px #50505073;margin:3px 0;z-index:10}.context[_ngcontent-%COMP%]   .context-item[_ngcontent-%COMP%], .context[_ngcontent-%COMP%]   .context-title[_ngcontent-%COMP%], .sub-menu[_ngcontent-%COMP%]   .context-item[_ngcontent-%COMP%], .sub-menu[_ngcontent-%COMP%]   .context-title[_ngcontent-%COMP%]{height:32px;line-height:32px;text-overflow:ellipsis;overflow:hidden;white-space:nowrap;font-size:10pt}.context[_ngcontent-%COMP%]   .context-item[_ngcontent-%COMP%]   .hover-title[_ngcontent-%COMP%]:hover, .context[_ngcontent-%COMP%]   .context-item[_ngcontent-%COMP%]   .inner-item[_ngcontent-%COMP%]:hover, .context[_ngcontent-%COMP%]   .context-title[_ngcontent-%COMP%]   .hover-title[_ngcontent-%COMP%]:hover, .context[_ngcontent-%COMP%]   .context-title[_ngcontent-%COMP%]   .inner-item[_ngcontent-%COMP%]:hover, .sub-menu[_ngcontent-%COMP%]   .context-item[_ngcontent-%COMP%]   .hover-title[_ngcontent-%COMP%]:hover, .sub-menu[_ngcontent-%COMP%]   .context-item[_ngcontent-%COMP%]   .inner-item[_ngcontent-%COMP%]:hover, .sub-menu[_ngcontent-%COMP%]   .context-title[_ngcontent-%COMP%]   .hover-title[_ngcontent-%COMP%]:hover, .sub-menu[_ngcontent-%COMP%]   .context-title[_ngcontent-%COMP%]   .inner-item[_ngcontent-%COMP%]:hover{background-color:#eee}.context[_ngcontent-%COMP%]   .context-item[_ngcontent-%COMP%]   .inner-item[_ngcontent-%COMP%], .context[_ngcontent-%COMP%]   .context-title[_ngcontent-%COMP%]   .inner-item[_ngcontent-%COMP%], .sub-menu[_ngcontent-%COMP%]   .context-item[_ngcontent-%COMP%]   .inner-item[_ngcontent-%COMP%], .sub-menu[_ngcontent-%COMP%]   .context-title[_ngcontent-%COMP%]   .inner-item[_ngcontent-%COMP%]{padding:0 25px}.context[_ngcontent-%COMP%]   .context-item[_ngcontent-%COMP%]   .inner-item[_ngcontent-%COMP%]   i[_ngcontent-%COMP%], .context[_ngcontent-%COMP%]   .context-title[_ngcontent-%COMP%]   .inner-item[_ngcontent-%COMP%]   i[_ngcontent-%COMP%], .sub-menu[_ngcontent-%COMP%]   .context-item[_ngcontent-%COMP%]   .inner-item[_ngcontent-%COMP%]   i[_ngcontent-%COMP%], .sub-menu[_ngcontent-%COMP%]   .context-title[_ngcontent-%COMP%]   .inner-item[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin:0 5px 0 0;font-weight:700}.context[_ngcontent-%COMP%]   .context_hr[_ngcontent-%COMP%], .sub-menu[_ngcontent-%COMP%]   .context_hr[_ngcontent-%COMP%]{height:2px;border-top:1px solid #e8dddd}.context-title[_ngcontent-%COMP%]{padding:0 0 0 38px}.context-item[_ngcontent-%COMP%]{margin:3px 0}.cursor-pointer[_ngcontent-%COMP%]{cursor:pointer}.field-disabled[_ngcontent-%COMP%]{color:#afafaf}.align-center[_ngcontent-%COMP%]{align-self:center}.align-contents[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.trigger_anime[_ngcontent-%COMP%]{color:#455a64}.modal-height[_ngcontent-%COMP%]{height:calc(100% - 10%)}.fs-1rem[_ngcontent-%COMP%]{font-size:1rem}.sub-menu[_ngcontent-%COMP%]{position:absolute;display:none}.context-submenu[_ngcontent-%COMP%]:hover > .sub-menu[_ngcontent-%COMP%], .sub-menu[_ngcontent-%COMP%]:hover{display:block}.fs-25[_ngcontent-%COMP%]{font-size:25px;border-radius:50%}.content-position[_ngcontent-%COMP%]{position:absolute;margin:8px}.border[_ngcontent-%COMP%]{margin:1%;border-top-right-radius:3%}.prop-Item[_ngcontent-%COMP%]{height:20%;display:flex;align-items:center;margin:0 24px;border-bottom:1px solid #dcdcdc;box-shadow:0 8px 6px -7px #dedede}.prop-Item[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.margin-a[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin:0 auto}.pad-ten[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{padding:10%}.h-80[_ngcontent-%COMP%]{height:calc(100% - 10%)}.scada_loader[_ngcontent-%COMP%]{display:block;top:36%;left:6%;margin:0 auto;position:relative}.configured-conditions[_ngcontent-%COMP%]{padding:25px;margin:10px;background:#f9f9f9}.form-group[_ngcontent-%COMP%]{text-align:left}.w-100[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:initial}.w-100[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{border:1px solid #f9f9f9;color:#909194}.w-100[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:disabled{background-color:#fff}.show-activity[_ngcontent-%COMP%]{align-self:flex-end}.color-green[_ngcontent-%COMP%]{color:green}.color-red[_ngcontent-%COMP%]{color:red}.no-conditions[_ngcontent-%COMP%]{padding:46px;margin:10px;color:#a9acb7;font-size:1.5rem;border:1px solid #f9f9f9}.modal-history[_ngcontent-%COMP%]   .modal-header[_ngcontent-%COMP%]{height:60px}.modal-history[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child, .modal-history[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:last-child{text-align:center!important}.modal-history[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .search-group[_ngcontent-%COMP%]{height:36px}.fa-caret-right[_ngcontent-%COMP%]{float:right;margin:8px;font-size:1rem}[_nghost-%COMP%]     .context{margin-left:0}.pin-sidebar[_nghost-%COMP%]     .context, .pin-sidebar   [_nghost-%COMP%]     .context{margin-left:calc(40px - var(--sidebarWidth))!important}.trigger-popup[_ngcontent-%COMP%]{height:45px;overflow:hidden}.trigger-popup-height[_ngcontent-%COMP%]{height:5rem}.modal-body[_ngcontent-ywx-c9][_ngcontent-%COMP%]   p[_ngcontent-ywx-c9][_ngcontent-%COMP%]{font-size:14px;font-weight:400;line-height:21px;margin:0;color:#888c9b}.trigger-body[_ngcontent-%COMP%]{line-height:1;color:#888c9b}.trigger-title[_ngcontent-%COMP%]{line-height:.5}input[type=checkbox][_ngcontent-%COMP%]:checked:after{content:'';left:6px;top:1px;width:6px;height:13px;border:solid #909194;border-width:0 2px 2px 0;transform:rotate(45deg);position:absolute}.confirm-message[_ngcontent-%COMP%]{font-size:.8rem}.input-checkbox[_ngcontent-%COMP%]{height:20px;width:20px;font-size:31px;line-height:1;position:absolute}.input-checkbox[_ngcontent-%COMP%]:after{content:'X';font-size:14px;left:5px;top:3px;font-weight:700;width:0;border:#909194;height:0;border-width:0 2px 2px 0;position:absolute}.arrange[_ngcontent-%COMP%]{line-height:1.5;padding-top:40px}.show-check[_ngcontent-%COMP%]{margin-left:25px!important}.action-name[_ngcontent-%COMP%]{white-space:pre;overflow:hidden;max-width:200px;display:inline-block;text-overflow:ellipsis}.cell-name[_ngcontent-%COMP%]{white-space:pre;overflow:hidden;max-width:100px;display:inline-block;text-overflow:ellipsis}.trigger-confirm[_ngcontent-%COMP%]{line-height:.8}.trigger-name[_ngcontent-%COMP%]{font-size:.9rem;font-weight:700;max-width:250px;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;margin:6px}.trigger-row[_ngcontent-%COMP%]{display:block;width:50%;margin:auto}.form-background[_ngcontent-%COMP%]:disabled{background-color:#f9f9f9!important}.style-value[_ngcontent-%COMP%]{position:absolute;line-height:2.7;margin-left:29px}.pl-23[_ngcontent-%COMP%]{padding-left:2.3rem!important}.ml-1-8rem[_ngcontent-%COMP%]{margin-left:1.7rem}.elm-unchecked-radio-button[_ngcontent-%COMP%]:before{background:#e6e6e6;border-radius:50%}.table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{border-top:none;border-bottom:1px solid #dee2e6}.manage-overflow[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;padding:0 28px 0 24px;background:#0000000d;margin:1px}.manage-overflow[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#ada9a9}.context-header[_ngcontent-%COMP%]{text-align:center}.text-overflow[_ngcontent-%COMP%]{white-space:nowrap;max-width:50%;overflow:hidden;text-overflow:ellipsis}.pe-none[_ngcontent-%COMP%]{pointer-events:none}.reduced-height[_ngcontent-%COMP%]{height:15px!important;line-height:1!important}.shape-title[_ngcontent-%COMP%]{font-size:15px}.prop-align[_ngcontent-%COMP%]{padding:0 0 0 25px}@media screen and (max-width:768px){.sub-main-content[_ngcontent-%COMP%]{width:100%;padding:0}}.image-action[_ngcontent-%COMP%]{margin:.5rem}.visibility-styles[_ngcontent-%COMP%]{margin:0 0 0 1rem}.hideHex[_ngcontent-%COMP%]{position:absolute;z-index:-100}.ripple[_ngcontent-%COMP%]{border-radius:50px;background-position:center;transition:background .8s}.ripple[_ngcontent-%COMP%]:active{background-color:#fcfbfb;background-size:100%;transform:scale(1.01);transition:background 0s}.zIndex-1070[_ngcontent-%COMP%]{z-index:1070}.overflow-y-hidden[_ngcontent-%COMP%]{overflow-y:hidden!important}"],r=n("VzoX"),a=n("t99X"),h=n("OaWH"),u=n("a4oh"),d=n("yFW5"),c=n("ZYCi"),p=n("xs1C"),m=n("/Sl/"),g=n("qSsA"),x=n("Ohgw"),y=['.config-bg[_ngcontent-%COMP%]{padding:1rem;background:#f9f9f9}.fs-color[_ngcontent-%COMP%]{font-size:13px;color:#878989}label[_ngcontent-%COMP%]{color:#6c757d}.accordian-header[_ngcontent-%COMP%]{padding:7px;cursor:pointer}.accordian-header[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%]{margin:0!important}.accordian-header[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%]::after{font-family:elmeasure-icon;display:inline-block;font-size:inherit;color:inherit;padding:0;font-weight:500;margin-right:5px;vertical-align:middle;content:"\\f11f"}.accordian-header.collapsed[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%]{margin:0!important}.accordian-header.collapsed[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%]::after{content:"\\f11d"}.h-90[_ngcontent-%COMP%]{height:90%}.table-width[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{text-align:center;box-shadow:0 0 10px 0 #e3dbdb;color:#6c757d}.table-width[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{width:20%}.table-width[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child, .table-width[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(5){width:10%}.table-width[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border:none;padding:.7rem}.form-control[_ngcontent-%COMP%]::-webkit-input-placeholder{font-size:.8rem}.color-hex[_ngcontent-%COMP%]{background:#eaeaea;text-align:center;color:#767e86}.invalid-field[_ngcontent-%COMP%]{border:1px solid #ff6767;border-left:3px solid #ff6767}.h-1p6rem[_ngcontent-%COMP%]{height:1.6rem}.trash-hov[_ngcontent-%COMP%]{padding:7px;font-size:1rem;border-radius:50%;width:30px}.trash-hov[_ngcontent-%COMP%]:hover{background:#dfdfdf}.up-down-container[_ngcontent-%COMP%]{margin-left:1rem;width:3.5rem;display:flex;justify-content:center}.up-down-container[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{padding:2px;font-size:21px}.up-down-container[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]:hover{color:var(--brandPrimaryBlue)}.color-ac[_ngcontent-%COMP%]{color:#acacac}.no-hover[_ngcontent-%COMP%]:hover{color:#acacac!important}.loader-rings[_ngcontent-%COMP%]{display:inline-block;position:relative;width:80px;height:80px}.loader-rings[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{box-sizing:border-box;display:block;position:absolute;width:64px;height:64px;margin:8px;border:8px solid #fff;border-radius:50%;-webkit-animation:1.2s cubic-bezier(.5,0,.5,1) infinite loader-rings;animation:1.2s cubic-bezier(.5,0,.5,1) infinite loader-rings;border-color:#2d7bdb transparent transparent}.loader-rings[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(1){-webkit-animation-delay:-.45s;animation-delay:-.45s}.loader-rings[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(2){-webkit-animation-delay:-.3s;animation-delay:-.3s}.loader-rings[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(3){-webkit-animation-delay:-.15s;animation-delay:-.15s}@-webkit-keyframes loader-rings{0%{transform:rotate(0)}100%{transform:rotate(360deg)}}@keyframes loader-rings{0%{transform:rotate(0)}100%{transform:rotate(360deg)}}.content-align[_ngcontent-%COMP%]{height:95%;width:97%;position:absolute;z-index:100;background:#fff;overflow:hidden}.modal-footer[_ngcontent-%COMP%]{height:45px}.pos-abs[_ngcontent-%COMP%]{position:absolute;left:1rem}'],f=n("gMr2"),v=n("QpxQ"),b=n("gIcY"),C=n("Ip0R"),E=n("xrkn"),S=n("zbnG"),w=function(){function t(){this.operators=[{value:"==",label:"= (Equals)"},{value:"!=",label:"!= (Not equals)"},{value:"&ge;",label:">= (Greater or equal to)"},{value:"&le;",label:"<= (Less or equal to)"},{value:"&gt;",label:"> (Greater than)"},{value:"&lt;",label:"< (Less than)"}],this.isCell=[{value:"fillColor",label:"Fill Color"},{value:"display",label:"Visibility"},{value:"rotation",label:"Rotation"},{value:"gradientColor",label:"Gradient Color"},{value:"fontColor",label:"Font Color"},{value:"fontSize",label:"Font Size"},{value:"text",label:"Show content with value"},{value:"progress",label:"Progress"}],this.isEdge=[{value:"strokeColor",label:"Fill Color"},{value:"display",label:"Visibility"},{value:"fontColor",label:"Font Color"},{value:"fontSize",label:"Font Size"},{value:"labelBackgroundColor",label:"Text Background"},{value:"text",label:"Show content with value"},{value:"progress",label:"Progress"}],this.isImage=[{value:"imageBackground",label:"Fill Color"},{value:"display",label:"Visibility"},{value:"rotation",label:"Rotation"},{value:"image",label:"Image"},{value:"fontColor",label:"Font Color"},{value:"fontSize",label:"Font Size"},{value:"text",label:"Show content with value"}]}return t.prototype.setGraphObject=function(t){this.graph=t},t.prototype.getGraphObject=function(){return this.graph},t.prototype.overridesForEditorConditions=function(t,e){t.mxShape.prototype.createSvgCanvas=function(){t.mxSvgCanvas2D.prototype.cellState=this.state;var e=new t.mxSvgCanvas2D(this.node,!1,this.state);e.strokeTolerance=this.pointerEvents?this.svgStrokeTolerance:0,e.pointerEventsValue=this.svgPointerEvents;var n=this.getSvgScreenOffset();return 0!=n?this.node.setAttribute("transform","translate("+n+","+n+")"):this.node.removeAttribute("transform"),e.minStrokeWidth=this.minSvgStrokeWidth,this.antiAlias||(e.format=function(t){return Math.round(parseFloat(t))}),e},t.mxSvgCanvas2D.prototype.addNode=function(e,n){var i=this.node,l=this.state;if(null!=i){if("path"==i.nodeName){if(!(null!=this.path&&this.path.length>0))return;i.setAttribute("d",this.path.join(" "))}if(e&&null!=l.fillColor?this.updateFill():this.styleEnabled||(i.setAttribute("fill","ellipse"==i.nodeName&&t.mxClient.IS_FF?"transparent":"none"),e=!1),n&&null!=l.strokeColor?this.updateStroke():this.styleEnabled||i.setAttribute("stroke","none"),null!=l.transform&&l.transform.length>0&&i.setAttribute("transform",l.transform),l.shadow&&this.root.appendChild(this.createShadow(i)),this.strokeTolerance>0&&!e&&this.root.appendChild(this.createTolerance(i)),this.pointerEvents?i.setAttribute("pointer-events",this.pointerEventsValue):this.pointerEvents||null!=this.originalRoot||i.setAttribute("pointer-events","none"),("rect"!=i.nodeName&&"path"!=i.nodeName&&"ellipse"!=i.nodeName||"none"!=i.getAttribute("fill")&&"transparent"!=i.getAttribute("fill")||"none"!=i.getAttribute("stroke")||"none"!=i.getAttribute("pointer-events"))&&this.root.appendChild(i),this.cellState&&this.cellState.x>3&&this.cellState.y>2&&this.cellState.cell.cellName)(o=document.createElementNS("http://www.w3.org/2000/svg","title")).innerHTML=this.cellState.cell.cellName,this.root.appendChild(o);else if(this.cellState&&this.cellState.x>3&&this.cellState.y>2){var o;(o=document.createElementNS("http://www.w3.org/2000/svg","title")).innerHTML="el_"+this.cellState.cell.id,this.root.appendChild(o)}this.node=null}},t.mxSvgCanvas2D.prototype.image=function(e,n,i,l,o,s,r,a){o=this.converter.convert(o),s=null==s||s,r=null!=r&&r,a=null!=a&&a;var h=this.state;e+=h.dx,n+=h.dy;var u=this.createElement("image");u.setAttribute("x",this.format(e*h.scale)+this.imageOffset),u.setAttribute("y",this.format(n*h.scale)+this.imageOffset),u.setAttribute("width",this.format(i*h.scale)),u.setAttribute("height",this.format(l*h.scale)),null==u.setAttributeNS?u.setAttribute("xlink:href",o):u.setAttributeNS(t.mxConstants.NS_XLINK,"xlink:href",o),s||u.setAttribute("preserveAspectRatio","none"),(h.alpha<1||h.fillAlpha<1)&&u.setAttribute("opacity",h.alpha*h.fillAlpha);var d=this.state.transform||"";if(r||a){var c=1,p=1,m=0,g=0;r&&(c=-1,m=-i-2*e),a&&(p=-1,g=-l-2*n),d+="scale("+c+","+p+")translate("+m*h.scale+","+g*h.scale+")"}if(d.length>0&&u.setAttribute("transform",d),this.pointerEvents||u.setAttribute("pointer-events","none"),this.cellState&&this.cellState.x>3&&this.cellState.y>2&&this.cellState.cell.cellName)(x=document.createElementNS("http://www.w3.org/2000/svg","title")).innerHTML=this.cellState.cell.cellName,this.root.appendChild(x);else if(this.cellState&&this.cellState.x>3&&this.cellState.y>2){var x;(x=document.createElementNS("http://www.w3.org/2000/svg","title")).innerHTML="el_"+this.cellState.cell.id,this.root.appendChild(x)}this.root.appendChild(u)},t.mxSvgCanvas2D.prototype.createDiv=function(e){var n=e;if(t.mxUtils.isNode(n)||(n="<div><div>"+this.convertHtml(n)+"</div></div>"),t.mxClient.IS_IE||t.mxClient.IS_IE11||!document.createElementNS)return t.mxUtils.isNode(n)&&(n="<div><div>"+t.mxUtils.getXml(n)+"</div></div>"),t.mxUtils.parseXml(n='<div xmlns="http://www.w3.org/1999/xhtml">'+n+"</div>").documentElement;var i=document.createElementNS("http://www.w3.org/1999/xhtml","div");if(t.mxUtils.isNode(n)){var l=document.createElement("div"),o=l.cloneNode(!1);this.root.ownerDocument!=document?l.appendChild(n.cloneNode(!0)):l.appendChild(n),o.appendChild(l),i.appendChild(o)}else i.innerHTML=n;return this.cellState&&this.cellState.x>3&&this.cellState.y>2&&this.cellState.cell.cellName?i.title=this.cellState.cell.cellName:this.cellState&&this.cellState.x>3&&this.cellState.y>2&&(i.title="el_"+this.cellState.cell.id),i}},t.prototype.overridesForPreviewConditions=function(t,e){t.mxShape.prototype.createSvgCanvas=function(){t.mxSvgCanvas2D.prototype.cellState=this.state;var e=new t.mxSvgCanvas2D(this.node,!1,this.state);e.strokeTolerance=this.pointerEvents?this.svgStrokeTolerance:0,e.pointerEventsValue=this.svgPointerEvents;var n=this.getSvgScreenOffset();return 0!=n?this.node.setAttribute("transform","translate("+n+","+n+")"):this.node.removeAttribute("transform"),e.minStrokeWidth=this.minSvgStrokeWidth,this.antiAlias||(e.format=function(t){return Math.round(parseFloat(t))}),e},t.mxSvgCanvas2D.prototype.addNode=function(t,e){var n=this.node,i=this.state;if(this.node.style.transition="0.5s ease-out",null!=n){if("path"==n.nodeName){if(!(null!=this.path&&this.path.length>0))return;n.setAttribute("d",this.path.join(" "))}if(t&&null!=i.fillColor?this.cellState.hasOwnProperty("progress")&&this.cellState.progress.enabled&&this.cellState.progress.percentage?(this.cellState.cell.hasOwnProperty("isEdges")&&!this.cellState.cell.isEdges||"flexArrow"==this.cellState.cell.defaultStyle.shape)&&this.updatePreviewFill(!0,!1):t&&null!==i.fillColor&&this.updateFill():this.styleEnabled||(n.setAttribute("fill","ellipse"==n.nodeName?"transparent":"none"),t=!1),this.cellState.cell.hasOwnProperty("edgeProgress")){var l=this.node.getTotalLength();0==this.root.querySelectorAll("title").length?(this.node.setAttribute("stroke-dasharray",l),this.node.setAttribute("stroke-dashoffset",l-this.cellState.progress.percentage*l/100)):this.node.style.display=this.cellState.cell.edgeProgress.display}if(e&&null!=i.strokeColor?this.updateStroke():this.styleEnabled||n.setAttribute("stroke","none"),null!=i.transform&&i.transform.length>0&&n.setAttribute("transform",i.transform),i.shadow&&this.root.appendChild(this.createShadow(n)),this.strokeTolerance>0&&!t&&this.root.appendChild(this.createTolerance(n)),this.pointerEvents?n.setAttribute("pointer-events",this.pointerEventsValue):this.pointerEvents||null!=this.originalRoot||n.setAttribute("pointer-events","none"),("rect"!=n.nodeName&&"path"!=n.nodeName&&"ellipse"!=n.nodeName||"none"!=n.getAttribute("fill")&&"transparent"!=n.getAttribute("fill")||"none"!=n.getAttribute("stroke")||"none"!=n.getAttribute("pointer-events"))&&this.root.appendChild(n),this.cellState&&this.cellState.cell.cellName)(o=document.createElementNS("http://www.w3.org/2000/svg","title")).innerHTML=this.cellState.cell.cellName,this.root.appendChild(o);else if(this.cellState){var o;(o=document.createElementNS("http://www.w3.org/2000/svg","title")).innerHTML="el_"+this.cellState.cell.id,this.root.appendChild(o)}this.cellState&&this.root.setAttribute("id",this.cellState.cell.id),this.node=null}},t.mxSvgCanvas2D.prototype.image=function(e,n,i,l,o,s,r,a){o=this.converter.convert(o),s=null==s||s,r=null!=r&&r,a=null!=a&&a;var h=this.state;e+=h.dx,n+=h.dy;var u=this.createElement("image");u.setAttribute("x",this.format(e*h.scale)+this.imageOffset),u.setAttribute("y",this.format(n*h.scale)+this.imageOffset),u.setAttribute("width",this.format(i*h.scale)),u.setAttribute("height",this.format(l*h.scale)),null==u.setAttributeNS?u.setAttribute("xlink:href",o):u.setAttributeNS(t.mxConstants.NS_XLINK,"xlink:href",o),s||u.setAttribute("preserveAspectRatio","none"),(h.alpha<1||h.fillAlpha<1)&&u.setAttribute("opacity",h.alpha*h.fillAlpha);var d,c=this.state.transform||"";if(r||a){var p=1,m=1,g=0,x=0;r&&(p=-1,g=-i-2*e),a&&(m=-1,x=-l-2*n),c+="scale("+p+","+m+")translate("+g*h.scale+","+x*h.scale+")"}c.length>0&&u.setAttribute("transform",c),this.pointerEvents||u.setAttribute("pointer-events","none"),this.cellState&&(this.cellState.cell.cellName?((d=document.createElementNS("http://www.w3.org/2000/svg","title")).innerHTML=this.cellState.cell.cellName,this.root.appendChild(d)):((d=document.createElementNS("http://www.w3.org/2000/svg","title")).innerHTML="el_"+this.cellState.cell.id,this.root.appendChild(d)),this.root.setAttribute("id",this.cellState.cell.id)),this.root.appendChild(u)},t.mxSvgCanvas2D.prototype.createDiv=function(e){var n=e;if(t.mxUtils.isNode(n)||(n="<div><div>"+this.convertHtml(n)+"</div></div>"),t.mxClient.IS_IE||t.mxClient.IS_IE11||!document.createElementNS)return t.mxUtils.isNode(n)&&(n="<div><div>"+t.mxUtils.getXml(n)+"</div></div>"),t.mxUtils.parseXml(n='<div xmlns="http://www.w3.org/1999/xhtml">'+n+"</div>").documentElement;var i=document.createElementNS("http://www.w3.org/1999/xhtml","div");if(t.mxUtils.isNode(n)){var l=document.createElement("div"),o=l.cloneNode(!1);this.root.ownerDocument!=document?l.appendChild(n.cloneNode(!0)):l.appendChild(n),o.appendChild(l),i.appendChild(o)}else i.innerHTML=n;return this.cellState&&this.cellState.cell.cellName?i.title=this.cellState.cell.cellName:this.cellState&&(i.title="el_"+this.cellState.cell.id),i},t.mxCellRenderer.prototype.doRedrawShape=function(t){t.shape.redraw(t,!0,!1)},t.mxSvgCanvas2D.prototype.updatePreviewFill=function(e,n){var i;this.cellState.cell.defaultStyle.fillColor=this.cellState.cell.defaultStyle.fillColor?this.cellState.cell.defaultStyle.fillColor:"white",this.cellState&&((i=this.cellState.shape.fill==this.cellState.cell.defaultStyle.fillColor?"#36A6DE":this.cellState.shape.fill)||(i=this.cellState.shape.fill?this.cellState.shape.fill:"#36A6DE"));var l=this.getPreviewGradient(String("none"==this.cellState.cell.defaultStyle.fillColor?"transparent":this.cellState.cell.defaultStyle.fillColor?this.cellState.cell.defaultStyle.fillColor:"white"),String(i),this.cellState.progress.settings.direction,this.cellState.progress.percentage);if(t.mxClient.IS_CHROMEAPP||t.mxClient.IS_IE||t.mxClient.IS_IE11||t.mxClient.IS_EDGE||this.root.ownerDocument!=document)this.node.setAttribute("fill","url(#"+l+")");else{var o=this.getBaseUrl().replace(/([\(\)])/g,"\\$1");this.node.setAttribute("fill","url("+o+"#"+l+")")}},t.mxSvgCanvas2D.prototype.getPreviewGradient=function(t,e,n,i){var l=this.createPreviewGradientId(),o=this.gradients[l];if(null==o){var s=this.root.ownerSVGElement,r=l;if(null!=s)for(;null!=o&&o.ownerSVGElement!=s;)o=this.createPreviewGradient(t,e,n,i,r);else r="id"+ ++this.refCount;null==o&&((o=this.createPreviewGradient(t,e,n,i,r)).setAttribute("id",r),null!=this.defs?this.defs.appendChild(o):s.appendChild(o)),this.gradients[l]=o}return o.getAttribute("id")},t.mxSvgCanvas2D.prototype.createPreviewGradientId=function(){return"elm-gradient-"+this.cellState.cell.id},t.mxSvgCanvas2D.prototype.createPreviewGradient=function(e,n,i,l,o){"#ffffff"==n&&(n="#36A6DE");var s=this.root.ownerSVGElement.ownerDocument.getElementById(o);if(s){var r=s.querySelectorAll("stop");return r[0].setAttribute("offset",l+"%"),r[0].setAttribute("style","stop-color:"+n+";stop-opacity:1;"),r[1].setAttribute("offset",l+"%"),r[1].setAttribute("style","stop-color:"+e+";stop-opacity:1;"),s}var a,h=this.createElement("linearGradient");return h.setAttribute("spreadMethod","pad"),h.setAttribute("x1","0%"),h.setAttribute("y1","0%"),h.setAttribute("x2","0%"),h.setAttribute("y2","0%"),null==i||i==t.mxConstants.DIRECTION_SOUTH?h.setAttribute("y2","100%"):i==t.mxConstants.DIRECTION_EAST?h.setAttribute("x2","100%"):i==t.mxConstants.DIRECTION_NORTH?h.setAttribute("y1","100%"):i==t.mxConstants.DIRECTION_WEST&&h.setAttribute("x1","100%"),(a=this.createElement("stop")).setAttribute("offset",l+"%"),a.setAttribute("style","stop-color:"+n+";stop-opacity:1;"),h.appendChild(a),(a=this.createElement("stop")).setAttribute("offset",l+"%"),a.setAttribute("style","stop-color:"+e+";stop-opacity:1;"),h.appendChild(a),(a=this.createElement("stop")).setAttribute("offset","100%"),a.setAttribute("style","stop-color:"+e+";stop-opacity:1;"),h.appendChild(a),h}},t.ngInjectableDef=i.T({factory:function(){return new t},token:t,providedIn:"root"}),t}(),T=function(){function t(t){this._handleGraph=t}return t.prototype.loaderToggleOn=function(){var t=document.getElementById("scada-loader");t&&(t.classList.remove("d-none"),t.classList.add("d-block"))},t.prototype.loaderToggleOff=function(){var t=document.getElementById("scada-loader");t&&(t.classList.remove("d-block"),t.classList.add("d-none"))},t.prototype.openImportModal=function(){document.getElementById("scada_import_modal").click()},t.prototype.openExportModal=function(){document.getElementById("scada_export_modal").click()},t.prototype.openUploadModal=function(){document.getElementById("scada_upload_modal").click()},t.prototype.openliveDataModal=function(){this.toggleLiveData(),document.getElementById("scada_liveData_modal").click()},t.prototype.openAssetControlModal=function(){this.toggleassetControlData(),document.getElementById("scada_assetControl_modal").click()},t.prototype.toggleLiveData=function(){this.liveData=Math.random()},t.prototype.disableMenu=function(){var t=document.getElementsByClassName("geMenubarContainer")[0];t&&t.classList.add("pointer-events-none")},t.prototype.enableMenu=function(){var t=document.getElementsByClassName("geMenubarContainer")[0];t&&t.classList.remove("pointer-events-none")},t.prototype.toggleassetControlData=function(){this.assetControl=Math.random()},t.prototype.uiSettings=function(t,e){var n=this;t.EditorUi.prototype.createUi=function(){t._editorUi=this,this.menubar=this.editor.chromeless?null:this.menus.createMenubar(this.createDiv("geMenubar")),this.menubarContainer.appendChild(this.menubar.container),null!=this.menubar&&this.container.appendChild(this.menubarContainer),this.toolbar=this.editor.chromeless?null:this.createToolbar(this.createDiv("geToolbar")),null!=this.toolbar&&(this.toolbarContainer.appendChild(this.toolbar.container),this.container.appendChild(this.toolbarContainer)),this.sidebar=this.editor.chromeless?null:this.createSidebar(this.sidebarContainer),null!=this.sidebar&&(this.sidebarContainer.classList.add("scada-sidebar"),this.container.appendChild(this.sidebarContainer)),this.format=this.editor.chromeless||!this.formatEnabled?null:this.createFormat(this.formatContainer),null!=this.format&&(this.formatContainer.classList.add("scada-format"),this.container.appendChild(this.formatContainer)),null!=this.sidebar&&this.sidebarFooterContainer&&this.container.appendChild(this.sidebarFooterContainer);var e=this.editor.chromeless?null:this.createFooter();null!=e&&(this.footerContainer.appendChild(e),this.container.appendChild(this.footerContainer)),this.container.appendChild(this.diagramContainer),null!=this.container&&null!=this.tabContainer&&this.container.appendChild(this.tabContainer),null!=this.sidebar&&(this.hsplit.classList.add("icon"),this.container.appendChild(this.hsplit),this.addSplitHandler(this.hsplit,!0,0,t.mxUtils.bind(this,function(t){this.hsplitPosition=t,this.refresh()})))},t.EditorUi.prototype.initCanvas=function(){var e=this,i=n._handleGraph.graph;i.timerAutoScroll=!0,i.getPagePadding=function(){return new t.mxPoint(Math.max(0,Math.round((i.container.offsetWidth-34)/i.view.scale)),Math.max(0,Math.round((i.container.offsetHeight-34)/i.view.scale)))},i.view.getBackgroundPageBounds=function(){var e=this.graph.getPageLayout(),n=this.graph.getPageSize();return new t.mxRectangle(this.scale*(this.translate.x+e.x*n.width),this.scale*(this.translate.y+e.y*n.height),this.scale*e.width*n.width,this.scale*e.height*n.height)},i.getPreferredPageSize=function(e,n,i){var l=this.getPageLayout(),o=this.getPageSize();return new t.mxRectangle(0,0,l.width*o.width,l.height*o.height)};var l=i.view.validate;if(i.view.validate=function(){if(null!=this.graph.container&&t.mxUtils.hasScrollbars(this.graph.container)){var e=this.graph.getPagePadding(),n=this.graph.getPageSize();this.translate.x=e.x-(this.x0||0)*n.width,this.translate.y=e.y-(this.y0||0)*n.height}l.apply(this,arguments)},!i.isViewer()){var o=i.sizeDidChange;i.sizeDidChange=function(){if(null!=this.container&&t.mxUtils.hasScrollbars(this.container)){var e=this.getPageLayout(),n=this.getPagePadding(),l=this.getPageSize(),s=Math.ceil(2*n.x+e.width*l.width),r=Math.ceil(2*n.y+e.height*l.height),a=i.minimumGraphSize;null!=a&&a.width==s&&a.height==r||(i.minimumGraphSize=new t.mxRectangle(0,0,s,r));var h=n.x-e.x*l.width,u=n.y-e.y*l.height;if(!this.autoTranslate&&(this.view.translate.x!=h||this.view.translate.y!=u)){this.autoTranslate=!0,this.view.x0=e.x,this.view.y0=e.y;var d=i.view.translate.x,c=i.view.translate.y;return i.view.setTranslate(h,u),i.container.scrollLeft+=Math.round((h-d)*i.view.scale),i.container.scrollTop+=Math.round((u-c)*i.view.scale),void(this.autoTranslate=!1)}o.apply(this,arguments)}else this.fireEvent(new t.mxEventObject(t.mxEvent.SIZE,"bounds",this.getGraphBounds()))}}var s=i.view.getBackgroundPane(),r=i.view.getDrawPane();i.cumulativeZoomFactor=1;var a=null,h=null,u=null,d=null,c=null,p=function(n){null!=a&&window.clearTimeout(a),window.setTimeout(function(){i.isMouseDown&&!d||(a=window.setTimeout(t.mxUtils.bind(this,function(){i.isFastZoomEnabled()&&(null!=i.view.backgroundPageShape&&null!=i.view.backgroundPageShape.node&&(t.mxUtils.setPrefixedStyle(i.view.backgroundPageShape.node.style,"transform-origin",null),t.mxUtils.setPrefixedStyle(i.view.backgroundPageShape.node.style,"transform",null)),r.style.transformOrigin="",s.style.transformOrigin="",t.mxClient.IS_SF?(r.style.transform="scale(1)",s.style.transform="scale(1)",window.setTimeout(function(){r.style.transform="",s.style.transform=""},0)):(r.style.transform="",s.style.transform=""),i.view.getDecoratorPane().style.opacity="",i.view.getOverlayPane().style.opacity="");var e=new t.mxPoint(i.container.scrollLeft,i.container.scrollTop),n=t.mxUtils.getOffset(i.container),l=i.view.scale,o=0,p=0;null!=h&&(o=i.container.offsetWidth/2-h.x+n.x,p=i.container.offsetHeight/2-h.y+n.y),i.zoom(i.cumulativeZoomFactor),i.view.scale!=l&&(null!=u&&(o+=e.x-u.x,p+=e.y-u.y),!t.mxUtils.hasScrollbars(i.container)||0==o&&0==p||(i.container.scrollLeft-=o*(i.cumulativeZoomFactor-1),i.container.scrollTop-=p*(i.cumulativeZoomFactor-1))),null!=c&&r.setAttribute("filter",c),i.cumulativeZoomFactor=1,a=null,u=null,h=null,d=null,c=null}),null!=n?n:i.isFastZoomEnabled()?e.wheelZoomDelay:e.lazyZoomDelay))},0)},m=Date.now();i.lazyZoom=function(l,o,a){if((o=o||!i.scrollbars)&&(h=new t.mxPoint(i.container.offsetLeft+i.container.clientWidth/2,i.container.offsetTop+i.container.clientHeight/2)),!(Date.now()-m<15)){if(m=Date.now(),l?this.view.scale*this.cumulativeZoomFactor<=.15?this.cumulativeZoomFactor*=(this.view.scale+.05)/this.view.scale:(this.cumulativeZoomFactor*=this.zoomFactor,this.cumulativeZoomFactor=Math.round(this.view.scale*this.cumulativeZoomFactor*20)/20/this.view.scale):this.view.scale*this.cumulativeZoomFactor<=.15?this.cumulativeZoomFactor*=(this.view.scale-.05)/this.view.scale:(this.cumulativeZoomFactor/=this.zoomFactor,this.cumulativeZoomFactor=Math.round(this.view.scale*this.cumulativeZoomFactor*20)/20/this.view.scale),this.cumulativeZoomFactor=Math.max(.05,Math.min(this.view.scale*this.cumulativeZoomFactor,160))/this.view.scale,i.isFastZoomEnabled()){null==c&&""!=r.getAttribute("filter")&&(c=r.getAttribute("filter"),r.removeAttribute("filter")),u=new t.mxPoint(n._handleGraph.graph.container.scrollLeft+12,n._handleGraph.graph.container.scrollTop+50);var d=o?n._handleGraph.graph.container.scrollLeft+n._handleGraph.graph.container.clientWidth/2:h.x+n._handleGraph.graph.container.scrollLeft-n._handleGraph.graph.container.offsetLeft,g=o?i.container.scrollTop+n._handleGraph.graph.container.clientHeight/2:h.y+n._handleGraph.graph.container.scrollTop-n._handleGraph.graph.container.offsetTop;if(r.style.transformOrigin=d+"px "+g+"px",r.style.transform="scale("+this.cumulativeZoomFactor+")",s.style.transformOrigin=d+"px "+g+"px",s.style.transform="scale("+this.cumulativeZoomFactor+")",null!=n._handleGraph.graph.view.backgroundPageShape&&null!=n._handleGraph.graph.view.backgroundPageShape.node){var x=n._handleGraph.graph.view.backgroundPageShape.node;t.mxUtils.setPrefixedStyle(x.style,"transform-origin",(o?n._handleGraph.graph.container.clientWidth/2+n._handleGraph.graph.container.scrollLeft-x.offsetLeft+"px":h.x+n._handleGraph.graph.container.scrollLeft-x.offsetLeft-n._handleGraph.graph.container.offsetLeft+"px")+" "+(o?n._handleGraph.graph.container.clientHeight/2+n._handleGraph.graph.container.scrollTop-x.offsetTop+"px":h.y+n._handleGraph.graph.container.scrollTop-x.offsetTop-n._handleGraph.graph.container.offsetTop+"px")),t.mxUtils.setPrefixedStyle(x.style,"transform","scale("+this.cumulativeZoomFactor+")")}i.view.getDecoratorPane().style.opacity="0",i.view.getOverlayPane().style.opacity="0",null!=e.hoverIcons&&e.hoverIcons.reset()}p(a)}},t.mxEvent.addGestureListeners(i.container,function(t){null!=a&&window.clearTimeout(a)},null,function(t){1!=i.cumulativeZoomFactor&&p(0)}),t.mxEvent.addListener(i.container,"scroll",function(t){null==a||i.isMouseDown||1==i.cumulativeZoomFactor||p(0)}),t.mxEvent.addMouseWheelListener(t.mxUtils.bind(this,function(e,n,l,o,s){if(null==this.dialogs||0==this.dialogs.length)if(i.scrollbars||l||!i.isScrollWheelEvent(e)){if(l||i.isZoomWheelEvent(e))for(var r=t.mxEvent.getSource(e);null!=r;){if(r==i.container)return i.tooltipHandler.hideTooltip(),h=null!=o&&null!=s?new t.mxPoint(o,s):new t.mxPoint(t.mxEvent.getClientX(e),t.mxEvent.getClientY(e)),i.lazyZoom(n),t.mxEvent.consume(e),!1;r=r.parentNode}}else{var a=i.view.getTranslate(),u=40/i.view.scale;t.mxEvent.isShiftDown(e)?i.view.setTranslate(a.x+(n?-u:u),a.y):i.view.setTranslate(a.x,a.y+(n?u:-u))}}),i.container),i.panningHandler.zoomGraph=function(e){i.cumulativeZoomFactor=e.scale,i.lazyZoom(e.scale>0,!0),t.mxEvent.consume(e)}},t.mxGraphView.prototype.validateBackgroundPage=function(){var e=this.graph;if(null!=e.container&&!e.transparentBackground){if(e.pageVisible){var n=this.getBackgroundPageBounds();if(null==this.backgroundPageShape){for(var i=e.container.firstChild;null!=i&&i.nodeType!=t.mxConstants.NODETYPE_ELEMENT;)i=i.nextSibling;null!=i&&(this.backgroundPageShape=this.createBackgroundPageShape(n),this.backgroundPageShape.scale=1,this.backgroundPageShape.isShadow=!0,this.backgroundPageShape.dialect=t.mxConstants.DIALECT_STRICTHTML,this.backgroundPageShape.init(e.container),i.style.position="absolute",e.container.insertBefore(this.backgroundPageShape.node,i),this.backgroundPageShape.redraw(),this.backgroundPageShape.node.className="geBackgroundPage",t.mxEvent.addListener(this.backgroundPageShape.node,"dblclick",t.mxUtils.bind(this,function(t){e.dblClick(t)})),t.mxEvent.addGestureListeners(this.backgroundPageShape.node,t.mxUtils.bind(this,function(n){e.fireMouseEvent(t.mxEvent.MOUSE_DOWN,new t.mxMouseEvent(n))}),t.mxUtils.bind(this,function(n){null!=e.tooltipHandler&&e.tooltipHandler.isHideOnHover()&&e.tooltipHandler.hide(),e.isMouseDown&&!t.mxEvent.isConsumed(n)&&e.fireMouseEvent(t.mxEvent.MOUSE_MOVE,new t.mxMouseEvent(n))}),t.mxUtils.bind(this,function(n){e.fireMouseEvent(t.mxEvent.MOUSE_UP,new t.mxMouseEvent(n))})))}else this.backgroundPageShape.scale=1,this.backgroundPageShape.bounds=n,this.backgroundPageShape.redraw()}else null!=this.backgroundPageShape&&(this.backgroundPageShape.destroy(),this.backgroundPageShape=null);this.validateBackgroundStyles()}},t.mxGraphView.prototype.validateBackgroundStyles=function(){var e=this.graph,n=null==e.background||e.background==t.mxConstants.NONE?e.defaultPageBackgroundColor:e.background,i=null!=n&&this.gridColor!=n.toLowerCase()?this.gridColor:"#ffffff",l="none",o="";if(e.isGridEnabled()||e.gridVisible){var s=10;t.mxClient.IS_SVG?(l=unescape(encodeURIComponent(this.createSvgGrid(i))),l="url(data:image/svg+xml;base64,"+(l=btoa(l))+")",s=e.gridSize*this.scale*this.gridSteps):l="url("+this.gridImage+")";var r=0,a=0;if(null!=e.view.backgroundPageShape){var h=this.getBackgroundPageBounds();r=1+h.x,a=1+h.y}o=-Math.round(s-t.mxUtils.mod(this.translate.x*this.scale-r,s))+"px "+-Math.round(s-t.mxUtils.mod(this.translate.y*this.scale-a,s))+"px"}var u=e.view.canvas;null!=u.ownerSVGElement&&(u=u.ownerSVGElement),null!=e.view.backgroundPageShape?(e.view.backgroundPageShape.node.style.backgroundPosition=o,e.view.backgroundPageShape.node.style.backgroundImage=l,e.view.backgroundPageShape.node.style.backgroundColor=n,e.view.backgroundPageShape.node.style.borderColor=e.defaultPageBorderColor,e.container.className="geDiagramContainer geDiagramBackdrop",u.style.backgroundImage="none",u.style.backgroundColor=""):(e.container.className="geDiagramContainer",u.style.backgroundPosition=o,u.style.backgroundColor=n,u.style.backgroundImage=l)},t.mxGraphView.prototype.createSvgGrid=function(e){for(var n=this.graph.gridSize*this.scale;n<this.minGridSize;)n*=2;for(var i=this.gridSteps*n,l=[],o=1;o<this.gridSteps;o++){var s=o*n;l.push("M 0 "+s+" L "+i+" "+s+" M "+s+" 0 L "+s+" "+i)}return'<svg width="'+i+'" height="'+i+'" xmlns="'+t.mxConstants.NS_SVG+'"><defs><pattern id="grid" width="'+i+'" height="'+i+'" patternUnits="userSpaceOnUse"><path d="'+l.join(" ")+'" fill="none" stroke="'+e+'" opacity="0.2" stroke-width="1"/><path d="M '+i+" 0 L 0 0 0 "+i+'" fill="none" stroke="'+e+'" stroke-width="1"/></pattern></defs><rect width="100%" height="100%" fill="url(#grid)"/></svg>'};var i=t.mxGraph.prototype.panGraph;t.mxGraph.prototype.panGraph=function(e,n){if(i.apply(this,arguments),null!=this.shiftPreview1){var l=this.view.canvas;null!=l.ownerSVGElement&&(l=l.ownerSVGElement);var o=this.gridSize*this.view.scale*this.view.gridSteps,s=-Math.round(o-t.mxUtils.mod(this.view.translate.x*this.view.scale+e,o))+"px "+-Math.round(o-t.mxUtils.mod(this.view.translate.y*this.view.scale+n,o))+"px";l.style.backgroundPosition=s}},t.mxGraph.prototype.updatePageBreaks=function(e,n,i){var l=this.view.scale,o=this.view.translate,s=this.pageFormat,r=l*this.pageScale,a=this.view.getBackgroundPageBounds();n=a.width,i=a.height;var h=new t.mxRectangle(l*o.x,l*o.y,s.width*r,s.height*r),u=(e=e&&Math.min(h.width,h.height)>this.minPageBreakDist)?Math.ceil(i/h.height)-1:0,d=e?Math.ceil(n/h.width)-1:0,c=a.x+n,p=a.y+i;null==this.horizontalPageBreaks&&u>0&&(this.horizontalPageBreaks=[]),null==this.verticalPageBreaks&&d>0&&(this.verticalPageBreaks=[]);var m=t.mxUtils.bind(this,function(e){if(null!=e){for(var n=e==this.horizontalPageBreaks?u:d,i=0;i<=n;i++){var l=e==this.horizontalPageBreaks?[new t.mxPoint(Math.round(a.x),Math.round(a.y+(i+1)*h.height)),new t.mxPoint(Math.round(c),Math.round(a.y+(i+1)*h.height))]:[new t.mxPoint(Math.round(a.x+(i+1)*h.width),Math.round(a.y)),new t.mxPoint(Math.round(a.x+(i+1)*h.width),Math.round(p))];if(null!=e[i])e[i].points=l,e[i].redraw();else{var o=new t.mxPolyline(l,this.pageBreakColor);o.dialect=this.dialect,o.isDashed=this.pageBreakDashed,o.pointerEvents=!1,o.init(this.view.backgroundPane),o.redraw(),e[i]=o}}for(i=n;i<e.length;i++)e[i].destroy();e.splice(n,e.length-n)}});m(this.horizontalPageBreaks),m(this.verticalPageBreaks)};var l=t.mxGraphHandler.prototype.shouldRemoveCellsFromParent;t.mxGraphHandler.prototype.shouldRemoveCellsFromParent=function(t,e,n){for(var i=0;i<e.length;i++){if(this.graph.isTableCell(e[i])||this.graph.isTableRow(e[i]))return!1;if(this.graph.getModel().isVertex(e[i])){var o=this.graph.getCellGeometry(e[i]);if(null!=o&&o.relative)return!1}}return l.apply(this,arguments)};var o=t.mxConnectionHandler.prototype.createMarker;t.mxConnectionHandler.prototype.createMarker=function(){var e=o.apply(this,arguments);return e.intersects=t.mxUtils.bind(this,function(n,i){return!!this.isConnecting()||t.mxCellMarker.prototype.intersects.apply(e,arguments)}),e},t.mxGraphView.prototype.createBackgroundPageShape=function(e){return new t.mxRectangleShape(e,"#ffffff",this.graph.defaultPageBorderColor)},t.mxGraphView.prototype.getBackgroundPageBounds=function(){var e=this.getGraphBounds(),n=e.width>0?e.x/this.scale-this.translate.x:0,i=e.height>0?e.y/this.scale-this.translate.y:0,l=e.width/this.scale,o=e.height/this.scale,s=this.graph.pageFormat,r=this.graph.pageScale,a=s.width*r,h=s.height*r,u=Math.floor(Math.min(0,n)/a),d=Math.floor(Math.min(0,i)/h),c=Math.ceil(Math.max(1,n+l)/a),p=Math.ceil(Math.max(1,i+o)/h);return new t.mxRectangle(this.scale*(this.translate.x+u*a),this.scale*(this.translate.y+d*h),this.scale*(c-u)*a,this.scale*(p-d)*h)};var s=t.mxGraph.prototype.panGraph;t.mxGraph.prototype.panGraph=function(e,n){s.apply(this,arguments),this.dialect==t.mxConstants.DIALECT_SVG||null==this.view.backgroundPageShape||this.useScrollbarsForPanning&&t.mxUtils.hasScrollbars(this.container)||(this.view.backgroundPageShape.node.style.marginLeft=e+"px",this.view.backgroundPageShape.node.style.marginTop=n+"px")};var r=t.mxPopupMenu.prototype.addItem;t.mxPopupMenu.prototype.addItem=function(e,n,i,l,o,s){var a=r.apply(this,arguments);return null==s||s||t.mxEvent.addListener(a,"mousedown",function(e){t.mxEvent.consume(e)}),a};var a=t.mxGraphHandler.prototype.isPropagateSelectionCell;t.mxGraphHandler.prototype.isPropagateSelectionCell=function(t,e,n){var i=!1,l=this.graph.model.getParent(t);if(e){var o=this.graph.model.isEdge(t)?null:this.graph.getCellGeometry(t);i=!this.graph.model.isEdge(l)&&!this.graph.isSiblingSelected(t)&&(null!=o&&o.relative||!this.graph.isContainer(l)||this.graph.isPart(t))}else if(i=a.apply(this,arguments),this.graph.isTableCell(t)||this.graph.isTableRow(t)){var s=l;this.graph.isTable(s)||(s=this.graph.model.getParent(s)),i=!this.graph.selectionCellsHandler.isHandled(s)||this.graph.isCellSelected(s)&&this.graph.isToggleEvent(n.getEvent())||this.graph.isCellSelected(t)&&!this.graph.isToggleEvent(n.getEvent())||this.graph.isTableCell(t)&&this.graph.isCellSelected(l)}return i},t.mxPopupMenuHandler.prototype.getCellForPopupEvent=function(t){for(var e=t.getCell(),n=this.graph.getModel(),i=n.getParent(e),l=this.graph.view.getState(i),o=this.graph.isCellSelected(e);null!=l&&(n.isVertex(i)||n.isEdge(i));){var s=this.graph.isCellSelected(i);o=o||s,(s||!o&&(this.graph.isTableCell(e)||this.graph.isTableRow(e)))&&(e=i),i=n.getParent(i)}return e}},t.prototype.previewUiSettings=function(t,e){t.EditorUi.prototype.createUi=function(){t._editorUi=this,this.footerHeight=0,this.container.appendChild(this.diagramContainer)},t.EditorUi.prototype.initCanvas=function(){var e=this.editor.graph;e.timerAutoScroll=!0,e.isEnabled=function(){return!1},e.getPagePadding=function(){return new t.mxPoint(0,0)},e.view.getBackgroundPageBounds=function(){var e=this.graph.getPageLayout(),n=this.graph.getPageSize();return new t.mxRectangle(this.scale*(this.translate.x+e.x*n.width),this.scale*(this.translate.y+e.y*n.height),this.scale*e.width*n.width,this.scale*e.height*n.height)},e.getPreferredPageSize=function(e,n,i){var l=this.getPageLayout(),o=this.getPageSize();return new t.mxRectangle(0,0,l.width*o.width,l.height*o.height)};var n=this;if(this.editor.extendCanvas){var i=e.view.validate;if(e.view.validate=function(){if(null!=this.graph.container&&t.mxUtils.hasScrollbars(this.graph.container)){var e=this.graph.getPagePadding(),n=this.graph.getPageSize();this.translate.x=e.x-(this.x0||0)*n.width,this.translate.y=e.y-(this.y0||0)*n.height}i.apply(this,arguments)},!e.isViewer()){var l=e.sizeDidChange;e.sizeDidChange=function(){if(null!=this.container&&t.mxUtils.hasScrollbars(this.container)){var n=this.getPageLayout(),i=this.getPagePadding(),o=this.getPageSize(),s=Math.ceil(2*i.x+n.width*o.width),r=Math.ceil(2*i.y+n.height*o.height),a=e.minimumGraphSize;null!=a&&a.width==s&&a.height==r||(e.minimumGraphSize=new t.mxRectangle(0,0,s,r));var h=i.x-n.x*o.width,u=i.y-n.y*o.height;if(!this.autoTranslate&&(this.view.translate.x!=h||this.view.translate.y!=u)){this.autoTranslate=!0,this.view.x0=n.x,this.view.y0=n.y;var d=e.view.translate.x,c=e.view.translate.y;return e.view.setTranslate(h,u),e.container.scrollLeft+=Math.round((h-d)*e.view.scale),e.container.scrollTop+=Math.round((u-c)*e.view.scale),void(this.autoTranslate=!1)}l.apply(this,arguments)}else this.fireEvent(new t.mxEventObject(t.mxEvent.SIZE,"bounds",this.getGraphBounds()))}}}var o=e.view.getBackgroundPane(),s=e.view.getDrawPane();e.cumulativeZoomFactor=1;var r=null,a=null,h=null,u=null,d=null,c=function(i){null!=r&&window.clearTimeout(r),window.setTimeout(function(){e.isMouseDown&&!u||(r=window.setTimeout(t.mxUtils.bind(this,function(){e.isFastZoomEnabled()&&(null!=e.view.backgroundPageShape&&null!=e.view.backgroundPageShape.node&&(t.mxUtils.setPrefixedStyle(e.view.backgroundPageShape.node.style,"transform-origin",null),t.mxUtils.setPrefixedStyle(e.view.backgroundPageShape.node.style,"transform",null)),s.style.transformOrigin="",o.style.transformOrigin="",/iP(hone|od|ad)/.test(navigator.platform)?(s.style.transform="scale(1)",o.style.transform="scale(1)",window.setTimeout(function(){s.style.transform="",o.style.transform=""},0)):(s.style.transform="",o.style.transform=""),e.view.getDecoratorPane().style.opacity="",e.view.getOverlayPane().style.opacity="");var n=new t.mxPoint(e.container.scrollLeft,e.container.scrollTop),i=t.mxUtils.getOffset(e.container),l=e.view.scale,c=0,p=0;null!=a&&(c=e.container.offsetWidth/2-a.x+i.x,p=e.container.offsetHeight/2-a.y+i.y),e.zoom(e.cumulativeZoomFactor),e.view.scale!=l&&(null!=h&&(c+=n.x-h.x,p+=n.y-h.y),!t.mxUtils.hasScrollbars(e.container)||0==c&&0==p||(e.container.scrollLeft-=c*(e.cumulativeZoomFactor-1),e.container.scrollTop-=p*(e.cumulativeZoomFactor-1))),null!=d&&s.setAttribute("filter",d),e.cumulativeZoomFactor=1,r=null,h=null,a=null,u=null,d=null}),null!=i?i:e.isFastZoomEnabled()?n.wheelZoomDelay:n.lazyZoomDelay))},0)},p=Date.now();e.lazyZoom=function(i,l,r){if(l=l||!e.scrollbars,(l=!1)&&(a=new t.mxPoint(e.container.offsetLeft+e.container.clientWidth/2,e.container.offsetTop+e.container.clientHeight/2)),!(Date.now()-p<15)){if(p=Date.now(),i?this.view.scale*this.cumulativeZoomFactor<=.15?this.cumulativeZoomFactor*=(this.view.scale+.05)/this.view.scale:(this.cumulativeZoomFactor*=this.zoomFactor,this.cumulativeZoomFactor=Math.round(this.view.scale*this.cumulativeZoomFactor*20)/20/this.view.scale):this.view.scale*this.cumulativeZoomFactor<=.15?this.cumulativeZoomFactor*=(this.view.scale-.05)/this.view.scale:(this.cumulativeZoomFactor/=this.zoomFactor,this.cumulativeZoomFactor=Math.round(this.view.scale*this.cumulativeZoomFactor*20)/20/this.view.scale),this.cumulativeZoomFactor=Math.max(.05,Math.min(this.view.scale*this.cumulativeZoomFactor,160))/this.view.scale,e.isFastZoomEnabled()){null==d&&""!=s.getAttribute("filter")&&(d=s.getAttribute("filter"),s.removeAttribute("filter")),h=new t.mxPoint(e.container.scrollLeft,e.container.scrollTop);var u=document.body.classList.contains("pin-sidebar"),m=(l?e.container.scrollLeft+e.container.clientWidth/2:a.x+e.container.scrollLeft-e.container.offsetLeft)-(u?272:72),g=(l?e.container.scrollTop+e.container.clientHeight/2:a.y+e.container.scrollTop-e.container.offsetTop)-50;if(s.style.transformOrigin=m+"px "+g+"px",s.style.transform="scale("+this.cumulativeZoomFactor+")",o.style.transformOrigin=m+"px "+g+"px",o.style.transform="scale("+this.cumulativeZoomFactor+")",null!=e.view.backgroundPageShape&&null!=e.view.backgroundPageShape.node){var x=e.view.backgroundPageShape.node;t.mxUtils.setPrefixedStyle(x.style,"transform-origin",(l?e.container.clientWidth/2+e.container.scrollLeft-x.offsetLeft+"px":a.x+e.container.scrollLeft-x.offsetLeft-e.container.offsetLeft+"px")+" "+(l?e.container.clientHeight/2+e.container.scrollTop-x.offsetTop+"px":a.y+e.container.scrollTop-x.offsetTop-e.container.offsetTop+"px")),t.mxUtils.setPrefixedStyle(x.style,"transform","scale("+this.cumulativeZoomFactor+")")}e.view.getDecoratorPane().style.opacity="0",e.view.getOverlayPane().style.opacity="0",null!=n.hoverIcons&&n.hoverIcons.reset()}c(r)}},t.mxEvent.addGestureListeners(e.container,function(t){null!=r&&window.clearTimeout(r)},null,function(t){1!=e.cumulativeZoomFactor&&c(0)}),t.mxEvent.addListener(e.container,"scroll",function(t){e.hasOwnProperty("zoomEnabled")&&e.zoomEnabled\u015b&&(null==r||e.isMouseDown||1==e.cumulativeZoomFactor||c(0))}),t.mxEvent.addMouseWheelListener(t.mxUtils.bind(this,function(n,i,l,o,s){if(e.hasOwnProperty("zoomEnabled")&&e.zoomEnabled&&(null==this.dialogs||0==this.dialogs.length))if(e.scrollbars||l||!e.isScrollWheelEvent(n)){if(l||e.isZoomWheelEvent(n)){var r=t.mxEvent.getSource(n);for(e.getPagePadding=function(){return new t.mxPoint(Math.max(0,Math.round(e.container.offsetWidth/e.view.scale)),Math.max(0,Math.round(e.container.offsetHeight/e.view.scale)))};null!=r;){if(r==e.container)return e.tooltipHandler.hideTooltip(),a=null!=o&&null!=s?new t.mxPoint(o,s):new t.mxPoint(t.mxEvent.getClientX(n),t.mxEvent.getClientY(n)),e.lazyZoom(i),t.mxEvent.consume(n),!1;r=r.parentNode}}}else{var h=e.view.getTranslate(),u=40/e.view.scale;t.mxEvent.isShiftDown(n)?e.view.setTranslate(h.x+(i?-u:u),h.y):e.view.setTranslate(h.x,h.y+(i?u:-u))}}),e.container),e.panningHandler.zoomGraph=function(n){e.cumulativeZoomFactor=n.scale,e.lazyZoom(n.scale>0,!0),t.mxEvent.consume(n)}},t.mxGraphView.prototype.validateBackgroundPage=function(){var e=this.graph;if(null!=e.container&&!e.transparentBackground){if(e.pageVisible){var n=this.getBackgroundPageBounds();if(null==this.backgroundPageShape){for(var i=e.container.firstChild;null!=i&&i.nodeType!=t.mxConstants.NODETYPE_ELEMENT;)i=i.nextSibling;null!=i&&(this.backgroundPageShape=this.createBackgroundPageShape(n),this.backgroundPageShape.scale=1,i.style.position="inherit")}}this.validateBackgroundStyles()}},t.mxGraphView.prototype.validateBackgroundStyles=function(){var t=this.graph,e=null==t.background||"none"==t.background?t.defaultPageBackgroundColor:t.background,n=null!=e&&this.gridColor!=e.toLowerCase()?this.gridColor:"#ffffff",i="none";t.isGridEnabled()&&(i=unescape(encodeURIComponent(this.createSvgGrid(n))),i="url(data:image/svg+xml;base64,"+(i=btoa(i))+")",null!=t.view.backgroundPageShape)&&this.getBackgroundPageBounds();var l=t.view.canvas;null!=l.ownerSVGElement&&(l=l.ownerSVGElement),null!=t.view.backgroundPageShape?(t.container.className="geDiagramContainer geDiagramBackdrop",l.style.backgroundImage=i,l.style.backgroundColor||(l.style.backgroundColor="white")):(t.container.className="geDiagramContainer",l.style.backgroundPosition="",l.style.backgroundImage=i,l.style.backgroundColor||(l.style.backgroundColor="white"))},t.mxGraphView.prototype.createSvgGrid=function(t){for(var e=this.graph.gridSize*this.scale;e<this.minGridSize;)e*=2;for(var n=this.gridSteps*e,i=[],l=1;l<this.gridSteps;l++){var o=l*e;i.push("M 0 "+o+" L "+n+" "+o+" M "+o+" 0 L "+o+" "+n)}return'<svg width="'+n+'" height="'+n+'" xmlns="http://www.w3.org/2000/svg"><defs><pattern id="grid" width="'+n+'" height="'+n+'" patternUnits="userSpaceOnUse"><path d="'+i.join(" ")+'" fill="none" stroke="'+t+'" opacity="0.2" stroke-width="1"/><path d="M '+n+" 0 L 0 0 0 "+n+'" fill="none" stroke="'+t+'" stroke-width="1"/></pattern></defs><rect width="100%" height="100%" fill="url(#grid)"/></svg>'};var n=t.mxGraph.prototype.panGraph;t.mxGraph.prototype.panGraph=function(e,i){if(n.apply(this,arguments),null!=this.shiftPreview1){var l=this.view.canvas;null!=l.ownerSVGElement&&(l=l.ownerSVGElement);var o=this.gridSize*this.view.scale*this.view.gridSteps,s=-Math.round(o-t.mxUtils.mod(this.view.translate.x*this.view.scale+e,o))+"px "+-Math.round(o-t.mxUtils.mod(this.view.translate.y*this.view.scale+i,o))+"px";l.style.backgroundPosition=s,l.style.minHeight="1000px"}},t.mxGraph.prototype.updatePageBreaks=function(e,n,i){var l=this.view.scale,o=this.view.translate,s=this.pageFormat,r=l*this.pageScale,a=this.view.getBackgroundPageBounds();n=a.width,i=a.height;var h=new t.mxRectangle(l*o.x,l*o.y,s.width*r,s.height*r);e=e&&Math.min(h.width,h.height)>this.minPageBreakDist;var u=(e=!1)?Math.ceil(i/h.height):0,d=e?Math.ceil(n/h.width):0,c=a.x+n,p=a.y+i;null==this.horizontalPageBreaks&&u>0&&(this.horizontalPageBreaks=[]),null==this.verticalPageBreaks&&d>0&&(this.verticalPageBreaks=[]);var m=t.mxUtils.bind(this,function(e){if(null!=e){for(var n=e==this.horizontalPageBreaks?u:d,i=0;i<=n;i++){var l=e==this.horizontalPageBreaks?[new t.mxPoint(Math.round(a.x),Math.round(a.y+(i+1)*h.height)),new t.mxPoint(Math.round(c),Math.round(a.y+(i+1)*h.height))]:[new t.mxPoint(Math.round(a.x+(i+1)*h.width),Math.round(a.y)),new t.mxPoint(Math.round(a.x+(i+1)*h.width),Math.round(p))];if(null!=e[i])e[i].points=l,e[i].redraw();else{var o=new t.mxPolyline(l,this.pageBreakColor);o.dialect=this.dialect,o.isDashed=this.pageBreakDashed,o.pointerEvents=!1,o.init(this.view.backgroundPane),o.redraw(),e[i]=o}}for(i=n;i<e.length;i++)e[i].destroy();e.splice(n,e.length-n)}});m(this.horizontalPageBreaks),m(this.verticalPageBreaks)},t.mxGraphView.prototype.createBackgroundPageShape=function(e){return new t.mxRectangleShape(e,"#ffffff",this.graph.defaultPageBorderColor)},t.mxGraphView.prototype.getBackgroundPageBounds=function(){var e=this.getGraphBounds(),n=e.width>0?e.x/this.translate.x:0,i=e.height>0?e.y/this.translate.y:0,l=e.width/this.scale,o=e.height/this.scale,s=this.graph.pageFormat,r=this.graph.pageScale,a=s.width*r,h=s.height*r,u=Math.floor(Math.min(0,n)/a),d=Math.floor(Math.min(0,i)/h),c=Math.ceil(Math.max(1,n+l)/a),p=Math.ceil(Math.max(1,i+o)/h);return new t.mxRectangle(this.scale*(this.translate.x+u*a),this.scale*(this.translate.y+d*h),this.scale*(c-u)*a,this.scale*(p-d)*h)};var i=t.mxGraph.prototype.panGraph;t.mxGraph.prototype.panGraph=function(e,n){i.apply(this,arguments),"svg"==this.dialect||null==this.view.backgroundPageShape||this.useScrollbarsForPanning&&t.mxUtils.hasScrollbars(this.container)||(this.view.backgroundPageShape.node.style.marginLeft=e+"px",this.view.backgroundPageShape.node.style.marginTop=n+"px")};var l=t.mxPopupMenu.prototype.addItem;t.mxPopupMenu.prototype.addItem=function(e,n,i,o,s,r){var a=l.apply(this,arguments);return null==r||r||t.mxEvent.addListener(a,"mousedown",function(e){t.mxEvent.consume(e)}),a};var o=t.mxGraphHandler.prototype.getInitialCellForEvent;t.mxGraphHandler.prototype.getInitialCellForEvent=function(t){var e=this.graph.getModel(),n=e.getParent(this.graph.getSelectionCell()),i=o.apply(this,arguments),l=e.getParent(i);if(null==n||n!=i&&n!=l)for(;!this.graph.isCellSelected(i)&&!this.graph.isCellSelected(l)&&e.isVertex(l)&&!this.graph.isContainer(l);)i=l,l=this.graph.getModel().getParent(i);return i};var s=t.mxGraphHandler.prototype.isDelayedSelection;t.mxGraphHandler.prototype.isDelayedSelection=function(t,e){var n=s.apply(this,arguments);if(!n)for(var i=this.graph.getModel(),l=i.getParent(t);null!=l;){if(this.graph.isCellSelected(l)&&i.isVertex(l)){n=!0;break}l=i.getParent(l)}return n},t.mxGraphHandler.prototype.selectDelayed=function(t){if(!this.graph.popupMenuHandler.isPopupTrigger(t)){var e=t.getCell();null==e&&(e=this.cell);var n=this.graph.view.getState(e);if(null!=n&&t.isSource(n.control))this.graph.selectCellForEvent(e,t.getEvent());else{for(var i=this.graph.getModel(),l=i.getParent(e);!this.graph.isCellSelected(l)&&i.isVertex(l);)l=i.getParent(e=l);this.graph.selectCellForEvent(e,t.getEvent())}}},t.mxPopupMenuHandler.prototype.getCellForPopupEvent=function(t){for(var e=t.getCell(),n=this.graph.getModel(),i=n.getParent(e);n.isVertex(i)&&!this.graph.isContainer(i);)this.graph.isCellSelected(i)&&(e=i),i=n.getParent(i);return e}},t.prototype.editorGraphSettings=function(t,e){t.Editor.prototype.readGraphState=function(e){var n=this,i=e.getAttribute("grid");null!=i&&""!=i||(i=this.graph.defaultGridEnabled?"1":"0"),this.graph.gridEnabled="0"!=i,this.graph.gridSize=parseFloat(e.getAttribute("gridSize"))||mxGraph.prototype.gridSize,this.graph.graphHandler.guidesEnabled="0"!=e.getAttribute("guides"),this.graph.setTooltips("0"!=e.getAttribute("tooltips")),this.graph.setConnectable("0"!=e.getAttribute("connect")),this.graph.connectionArrowsEnabled="0"!=e.getAttribute("arrows"),this.graph.foldingEnabled="0"!=e.getAttribute("fold");var l=parseFloat(e.getAttribute("pageScale"));if(this.graph.pageScale=!isNaN(l)&&l>0?l:t.mxGraph.prototype.pageScale,this.graph.isLightboxView()||this.graph.isViewer())this.graph.pageVisible=!1;else{var o=e.getAttribute("page");this.graph.pageVisible=null!=o?"0"!=o:this.graph.defaultPageVisible}this.graph.pageBreaksVisible=this.graph.pageVisible,this.graph.preferPageSize=this.graph.pageBreaksVisible;var s=parseFloat(e.getAttribute("pageWidth")),r=parseFloat(e.getAttribute("pageHeight"));isNaN(s)||isNaN(r)||(this.graph.pageFormat=new t.mxRectangle(0,0,s,r));var a=e.getAttribute("background");this.graph.background=null!=a&&a.length>0?a:null;var h=this.graph.container.querySelector("svg"),u=setInterval(function(){if(h.childNodes[0].childNodes[1].childNodes[0]&&n.graph.minimumGraphSize&&n.graph.container.clientWidth>0){clearInterval(u),n.graph.pageVisible||n.get("pageView").funct();var e=n.graph.pageFormat,i=n.graph.pageScale,l=Math.floor(20*Math.min((n.graph.container.clientWidth-10)/e.width/i,(n.graph.container.clientHeight-10)/e.height/i))/20;if(n.graph.zoomTo(l),t.mxUtils.hasScrollbars(n.graph.container)){var o=n.graph.getPagePadding();n.graph.container.scrollTop=o.y*n.graph.view.scale-1,n.graph.container.scrollLeft=Math.min(o.x*n.graph.view.scale,(n.graph.container.scrollWidth-n.graph.container.clientWidth)/2)-1}}},100)}},t.prototype.previewGraphSettings=function(t,e){t.Editor.prototype.readGraphState=function(e){var n=this;this.graph.gridEnabled="0"!=e.getAttribute("grid")&&!this.isChromelessView(),this.graph.gridSize=parseFloat(e.getAttribute("gridSize"))||t.mxGraph.prototype.gridSize,this.graph.graphHandler.guidesEnabled="0"!=e.getAttribute("guides"),this.graph.setTooltips("0"!=e.getAttribute("tooltips")),this.graph.setConnectable("0"!=e.getAttribute("connect")),this.graph.connectionArrowsEnabled="0"!=e.getAttribute("arrows"),this.graph.foldingEnabled="0"!=e.getAttribute("fold"),this.graph.fitToScreen="true"===e.getAttribute("fitToScreen"),this.graph.fitHorizontal="true"===e.getAttribute("fitHorizontal"),this.graph.fitVertical="true"===e.getAttribute("fitVertical"),this.graph.zoomEnabled="true"===e.getAttribute("zoomEnabled")||null===e.getAttribute("zoomEnabled"),this.graph.hoverEnabled="true"===e.getAttribute("hoverEnabled");var i=parseFloat(e.getAttribute("pageWidth")),l=parseFloat(e.getAttribute("pageHeight"));this.graph.pw=i,this.graph.ph=l,this.graph.scaleToTranslate=1;var o=e.getAttribute("saveToPreview");if(null!=this.graph.view.canvas.ownerSVGElement&&(this.graph.view.canvas=this.graph.view.canvas.ownerSVGElement),this.graph.view.canvas.style.backgroundColor="none"===e.getAttribute("background")?"white":e.getAttribute("background"),"true"===o?(this.graph.gridEnabled="true"===e.getAttribute("gridEnabled"),this.graph.view.gridColor=e.getAttribute("gridColor"),this.graph.gridSize=e.getAttribute("gridSize")):this.graph.gridEnabled="true"===e.getAttribute("gridEnabled"),this.graph.fitToScreen||this.graph.fitHorizontal||this.graph.fitVertical)var s=setInterval(function(){if(n.graph.minimumGraphSize&&n.graph.container.clientWidth>0){clearInterval(s);var t,e=n.graph.minimumGraphSize.height,o=n.graph.minimumGraphSize.width,r=1,a="none";switch(n.graph.fitHorizontal&&(a="horizontal",n.graph.scaleToTranslate=(r=n.graph.container.clientWidth)/(t=i),n.graph.view.scaleAndTranslate(n.graph.scaleToTranslate)),n.graph.fitToScreen&&(r=Math.min(n.graph.container.clientHeight/e,n.graph.container.clientWidth/o),n.graph.scaleToTranslate=r,n.graph.view.scaleAndTranslate(n.graph.scaleToTranslate)),n.graph.fitVertical&&(a="vertical",n.graph.scaleToTranslate=(r=n.graph.container.clientHeight)/(t=l),n.graph.view.scaleAndTranslate(n.graph.scaleToTranslate)),n.graph.fitWhat=a,a){case"horizontal":if(0!=(h=n.graph.container.clientWidth>n.graph.container.getBoundingClientRect().width?n.graph.container.clientWidth-n.graph.container.getBoundingClientRect().width:n.graph.container.getBoundingClientRect().width-n.graph.container.clientWidth)){r=n.graph.container.clientWidth-(n.graph.container.getBoundingClientRect().width-n.graph.container.clientWidth)/3,n.graph.scaleToTranslate=r/t,n.graph.view.scaleAndTranslate(n.graph.scaleToTranslate);break}case"vertical":var h;h=n.graph.container.clientHeight>n.graph.container.getBoundingClientRect().height?n.graph.container.clientHeight-n.graph.container.getBoundingClientRect().height:n.graph.container.getBoundingClientRect().height-n.graph.container.clientHeight,r=(r=n.graph.container.getBoundingClientRect().height)%1>.5?n.graph.container.getBoundingClientRect().height-h-2:n.graph.container.getBoundingClientRect().height-h,n.graph.scaleToTranslate=r/t,n.graph.view.scaleAndTranslate(n.graph.scaleToTranslate)}}},50);this.isChromelessView()&&this.graph.foldingEnabled&&(this.graph.foldingEnabled=!1,this.graph.cellRenderer.forceControlClickHandler=this.graph.foldingEnabled);var r=parseFloat(e.getAttribute("pageScale"));if(this.graph.pageScale=!isNaN(r)&&r>0?r:t.mxGraph.prototype.pageScale,this.graph.isLightboxView()||this.graph.isViewer())this.graph.pageVisible=!1;else{var a=e.getAttribute("page");this.graph.pageVisible=null!=a?"0"!=a:this.graph.defaultPageVisible}this.graph.pageBreaksVisible=this.graph.pageVisible,this.graph.preferPageSize=this.graph.pageBreaksVisible,this.graph.pageFormat=isNaN(i)||isNaN(l)||!this.graph.fitToScreen?new t.mxRectangle(0,0,i,l):new t.mxRectangle(0,0,1,1);var h=e.getAttribute("background");this.graph.background=null!=h&&h.length>0?h:null}},t.prototype.removeOpenDropDowns=function(){for(var t=0,e=document.getElementsByClassName("dropdown-menu-right");t<e.length;t++){var n=e[t];n.classList.contains("show")&&n.classList.remove("show")}},t.ngInjectableDef=i.T({factory:function(){return new t(i.X(w))},token:t,providedIn:"root"}),t}(),A=n("zfDx"),M=function(){function t(t,e,n,i,l){this._app=t,this._global=e,this._toastLoad=n,this._editorUi=i,this._util=l,this.defaultImages=[],this.uploadedImages=[],this.default_images=[],this.uploaded_images=[],this.default_images_key_access={}}return t.prototype.fixSidebar=function(t,e){var n=this;this.Scada=t,t.Sidebar.prototype.createVertexTemplate=function(e,n,i,l,o,s,r,a){var h=[new t.mxCell(null!=l?l:"",new t.mxGeometry(0,0,n,i),e)];return h[0].vertex=!0,e.includes("shape=image;")&&(h[0].version="1"),this.createVertexTemplateFromCells(h,n,i,o,s,r,a)},t.Sidebar.prototype.init=function(){this.addSearchPalette(!0),this.addGeneralPalette(!1),this.loadDefaultImages(!1)},t.Sidebar.prototype.addGeneralPalette=function(e){var n="line lines connector connectors connection connections arrow arrows ";this.setCurrentSearchEntryLibrary("general","general");for(var i=[this.createVertexTemplateEntry("rounded=0;whiteSpace=wrap;html=1;",120,60,"","Rectangle",null,null,"rect rectangle box"),this.createVertexTemplateEntry("rounded=1;whiteSpace=wrap;html=1;",120,60,"","Rounded Rectangle",null,null,"rounded rect rectangle box"),this.createVertexTemplateEntry("text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;",40,20,"Text","Text",null,null,"text textbox textarea label"),this.createVertexTemplateEntry("text;html=1;strokeColor=none;fillColor=none;spacing=5;spacingTop=-20;whiteSpace=wrap;overflow=hidden;rounded=0;",190,120,"<h1>Heading</h1><p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.</p>","Textbox",null,null,"text textbox textarea"),this.createVertexTemplateEntry("ellipse;whiteSpace=wrap;html=1;",120,80,"","Ellipse",null,null,"oval ellipse state"),this.createVertexTemplateEntry("whiteSpace=wrap;html=1;aspect=fixed;",80,80,"","Square",null,null,"square"),this.createVertexTemplateEntry("ellipse;whiteSpace=wrap;html=1;aspect=fixed;",80,80,"","Circle",null,null,"circle"),this.createVertexTemplateEntry("shape=process;whiteSpace=wrap;html=1;backgroundOutline=1;",120,60,"","Process",null,null,"process task"),this.createVertexTemplateEntry("rhombus;whiteSpace=wrap;html=1;",80,80,"","Diamond",null,null,"diamond rhombus if condition decision conditional question test"),this.createVertexTemplateEntry("shape=parallelogram;perimeter=parallelogramPerimeter;whiteSpace=wrap;html=1;fixedSize=1;",120,60,"","Parallelogram"),this.createVertexTemplateEntry("shape=hexagon;perimeter=hexagonPerimeter2;whiteSpace=wrap;html=1;fixedSize=1;",120,80,"","Hexagon",null,null,"hexagon preparation"),this.createVertexTemplateEntry("triangle;whiteSpace=wrap;html=1;",60,80,"","Triangle",null,null,"triangle logic inverter buffer"),this.createVertexTemplateEntry("shape=cylinder3;whiteSpace=wrap;html=1;boundedLbl=1;backgroundOutline=1;",60,80,"","Cylinder",null,null,"cylinder data database"),this.createVertexTemplateEntry("ellipse;shape=cloud;whiteSpace=wrap;html=1;",120,80,"","Cloud",null,null,"cloud network"),this.createVertexTemplateEntry("shape=document;whiteSpace=wrap;html=1;boundedLbl=1;",120,80,"","Document"),this.createVertexTemplateEntry("shape=internalStorage;whiteSpace=wrap;html=1;backgroundOutline=1;",80,80,"","Internal Storage"),this.createVertexTemplateEntry("shape=cube;whiteSpace=wrap;html=1;boundedLbl=1;backgroundOutline=1;darkOpacity=0.05;darkOpacity2=0.1;",120,80,"","Cube"),this.createVertexTemplateEntry("shape=step;perimeter=stepPerimeter;whiteSpace=wrap;html=1;fixedSize=1;",120,80,"","Step"),this.createVertexTemplateEntry("shape=trapezoid;perimeter=trapezoidPerimeter;whiteSpace=wrap;html=1;fixedSize=1;",120,60,"","Trapezoid"),this.createVertexTemplateEntry("shape=tape;whiteSpace=wrap;html=1;",120,100,"","Tape"),this.createVertexTemplateEntry("shape=note;whiteSpace=wrap;html=1;backgroundOutline=1;darkOpacity=0.05;",80,100,"","Note"),this.createVertexTemplateEntry("shape=card;whiteSpace=wrap;html=1;",80,100,"","Card"),this.createVertexTemplateEntry("shape=callout;whiteSpace=wrap;html=1;perimeter=calloutPerimeter;",120,80,"","Callout",null,null,"bubble chat thought speech message"),this.createVertexTemplateEntry("shape=umlActor;verticalLabelPosition=bottom;verticalAlign=top;html=1;outlineConnect=0;",30,60,"Actor","Actor",!1,null,"user person human stickman"),this.createVertexTemplateEntry("shape=xor;whiteSpace=wrap;html=1;",60,80,"","Or",null,null,"logic or"),this.createVertexTemplateEntry("shape=or;whiteSpace=wrap;html=1;",60,80,"","And",null,null,"logic and"),this.createVertexTemplateEntry("shape=dataStorage;whiteSpace=wrap;html=1;fixedSize=1;",100,80,"","Data Storage"),this.addEntry("curve",t.mxUtils.bind(this,function(){var e=new t.mxCell("",new t.mxGeometry(0,0,50,50),"curved=1;endArrow=classic;html=1;");return e.geometry.setTerminalPoint(new t.mxPoint(0,50),!0),e.geometry.setTerminalPoint(new t.mxPoint(50,0),!1),e.geometry.points=[new t.mxPoint(50,50),new t.mxPoint(0,0)],e.geometry.relative=!0,e.edge=!0,this.createEdgeTemplateFromCells([e],e.geometry.width,e.geometry.height,"Curve")})),this.createEdgeTemplateEntry("shape=flexArrow;endArrow=classic;startArrow=classic;html=1;",100,100,"","Bidirectional Arrow",null,n+"bidirectional"),this.createEdgeTemplateEntry("shape=flexArrow;endArrow=classic;html=1;",50,50,"","Arrow",null,n+"directional directed"),this.createEdgeTemplateEntry("endArrow=none;dashed=1;html=1;",50,50,"","Dashed Line",null,n+"dashed undirected no"),this.createEdgeTemplateEntry("endArrow=none;dashed=1;html=1;dashPattern=1 3;strokeWidth=2;",50,50,"","Dotted Line",null,n+"dotted undirected no"),this.createEdgeTemplateEntry("endArrow=none;html=1;",50,50,"","Line",null,n+"simple undirected plain blank no"),this.createEdgeTemplateEntry("endArrow=classic;startArrow=classic;html=1;",50,50,"","Bidirectional Connector",null,n+"bidirectional"),this.createEdgeTemplateEntry("endArrow=classic;html=1;",50,50,"","Directional Connector",null,n+"directional directed"),this.createEdgeTemplateEntry("shape=link;html=1;",100,0,"","Link",null,n+"link"),this.createVertexTemplateEntry("shape=partialRectangle;whiteSpace=wrap;html=1;top=0;bottom=0;fillColor=none;",120,60,"","Partial Rectangle"),this.createVertexTemplateEntry("shape=partialRectangle;whiteSpace=wrap;html=1;right=0;top=0;bottom=0;fillColor=none;routingCenterX=-0.5;",120,60,"","Partial Rectangle"),this.createVertexTemplateEntry("shape=partialRectangle;whiteSpace=wrap;html=1;bottom=0;right=0;fillColor=none;",120,60,"","Partial Rectangle"),this.createVertexTemplateEntry("shape=partialRectangle;whiteSpace=wrap;html=1;top=0;left=0;fillColor=none;",120,60,"","Partial Rectangle")],l=[],o=0;o<l.length;o++)i.push(l[o]);t.mxStencilRegistry.loadStencilSet("/assets/library/scada/resources/stencils/flowchart.xml",t.mxUtils.bind(this,function(t,e,n,l,o){var s=this.getTagsForStencil(t,e);i.push(this.createVertexTemplateEntry("shape="+t+e.toLowerCase()+";whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#000000;strokeWidth=2",Math.round(1*l),Math.round(1*o),"",e.replace(/_/g," "),null,null,this.filterTags(s.join(" "))))}),!0,!0),this.addPaletteFunctions("general",t.mxResources.get("shapes"),null==e||e,i),this.setCurrentSearchEntryLibrary()},t.Sidebar.prototype.loadDefaultImages=function(t){var e=this;n.default_images=[],n._app.getAllImagesInfo({}).subscribe(function(t){if("success"==t.status){var i=t.data.images_info;n.defaultImages=[];for(var l=0,o=i;l<o.length;l++){var s=o[l];n.defaultImages.push(s.name+"^"+s.url+"^"+s.keywords);var r=s.url.split("/");n.default_images_key_access[r[r.length-1]]=s.url,n.default_images.push({label:s.name,image:n.getHostIp(n._util.appMode)+s.url,value:s.url})}e.loadImages(!1,"gallery","Gallery",n.defaultImages)}else n._toastLoad.toast("error","Error","Failed to load default images",!0);e.loadImageLibrary(!1)},function(t){e.loadImageLibrary(!1),n._toastLoad.toast("error","Error","Failed to load default images",!0)})},t.Sidebar.prototype.loadImageLibrary=function(t){var e=this;n.uploaded_images=[];var i=document.getElementById("imgLibraryRefresh");i&&i.classList.add("fa-spin"),n._app.getUploadedImages({}).subscribe(function(l){if("success"==l.status){var o=l.data.images_info;n.uploadedImages=[];for(var s=0,r=o;s<r.length;s++){var a=r[s];n.uploadedImages.push(a.name+"^"+a.url+"^"+a.keywords),n.uploaded_images.push({label:a.name,image:n.getHostIp(n._util.appMode)+a.url,value:a.url})}e.loadImages(t,"ImageLibrary","Uploads",n.uploadedImages);var h=document.createElement("span");h.classList.add("uploadNFound"),h.innerHTML="Uploads not found<br><span class='clickToUpload'> Click <i class='fa fa-upload c-pointer' title='Upload'></i> to upload</span>";var u=document.getElementById("Uploads");0==n.uploadedImages.length&&u?(u.appendChild(h),u.classList.add("noDataFound")):u&&(u.classList.remove("noDataFound"),u.querySelector("span")&&u.removeChild(h))}else n._toastLoad.toast("error","Error","Failed to load default images",!0);i&&i.classList.remove("fa-spin")},function(t){i&&i.classList.remove("fa-spin"),n._toastLoad.toast("error","Error","Failed to load default images",!0)})},t.Sidebar.prototype.loadImages=function(e,i,l,o,s,r){for(var a=[],h=0;h<o.length;h++){var u=o[h].split("^");t.mxUtils.bind(this,function(t,e,i){null==i&&(i=u[2]+","+u[0].split(".")[0]),a.push(this.createVertexTemplateEntry("shape=image;html=1;labelBackgroundColor=#ffffff;image="+n.getHostIp(n._util.appMode)+u[1],this.defaultImageWidth,this.defaultImageHeight,"",u[0],null,null,this.filterTags(i)))})(u[0],null!=s?s[h]:null,null!=r?r[u[0]]:null)}this.addPaletteFunctions(i,l,e,a)},t.Sidebar.prototype.addPalette=function(e,i,l,o){var s=this,r=this.createTitle(i);if(r.id=e,"ImageLibrary"==e&&!document.getElementById("imgLibrary")&&!document.getElementById("imgLibraryRefresh")){var a,h=document.createElement("div");h.className="image-library-container",(a=document.createElement("button")).className="fa fa-refresh images-library images-library-refresh",a.id="imgLibraryRefresh",a.title="Refresh",h.appendChild(a),a.addEventListener("click",function(){s.loadImageLibrary(!0)}),(a=document.createElement("button")).title="Upload",a.className="fa fa-upload images-library images-library-refresh",a.id="imgLibrary",h.appendChild(a),a.addEventListener("click",function(){n._editorUi.openUploadModal()}),this.container.appendChild(h)}if(document.getElementById(e)?this.container.replaceChild(r,document.getElementById(e)):this.container.appendChild(r),document.getElementById(i)){var u=document.getElementById(i);u.innerHTML=""}else{(u=document.createElement("div")).className="geSidebar",u.id=i;var d=document.createElement("div");d.appendChild(u),this.container.appendChild(d)}return t.mxClient.IS_POINTER&&(u.style.touchAction="none"),l?(o(u),o=null):u.style.display="none",this.addFoldingHandler(r,u,o),this.palettes?this.palettes&&(n.imgLibraryPallete=this.palettes,null!=e&&(this.palettes[e]=[r,d])):null!=e&&(n.imgLibraryPallete[e]=[r,d]),u},this.fixToolTipPosition(t)},t.prototype.getHostIp=function(t){switch(t){case"server":var e=JSON.parse(this._util.decryptCryptoAES(localStorage.getItem("SERVER_INFO"),"thisissecret"));return e.protocol+"://"+e.ip;case"cloud":return(this._global._appConfigurations.MQTT.useSSL?"https":"http")+"://"+this._global._appConfigurations.MQTT.ip;default:return""+window.location.origin}},t.prototype.fixToolTipPosition=function(t){t.Sidebar.prototype.showTooltip=function(e,n,i,l,o,s){if(this.enableTooltips&&this.showTooltips&&this.currentElt!=e){null!=this.thread&&(window.clearTimeout(this.thread),this.thread=null);var r=t.mxUtils.bind(this,function(){null==this.tooltip&&(this.tooltip=document.createElement("div"),this.tooltip.className="geSidebarTooltip",this.tooltip.style.zIndex=t.mxPopupMenu.prototype.zIndex-1,document.body.appendChild(this.tooltip),this.graph2=new t.Graph(this.tooltip,null,null,this.editorUi.editor.graph.getStylesheet()),this.graph2.resetViewOnRootChange=!1,this.graph2.foldingEnabled=!1,this.graph2.gridEnabled=!1,this.graph2.autoScroll=!1,this.graph2.setTooltips(!1),this.graph2.setConnectable(!1),this.graph2.setEnabled(!1)),this.graph2.model.clear(),this.graph2.view.setTranslate(this.tooltipBorder,this.tooltipBorder),this.graph2.view.scale=i>this.maxTooltipWidth||l>this.maxTooltipHeight?Math.round(100*Math.min(this.maxTooltipWidth/i,this.maxTooltipHeight/l))/100:1,this.tooltip.style.display="block",this.graph2.labelsVisible=null==s||s;var r=t.mxClient.NO_FO;t.mxClient.NO_FO=t.Editor.prototype.originalNoForeignObject;var a=this.graph2.cloneCells(n);this.editorUi.insertHandler(a,null,this.graph2.model),this.graph2.addCells(a),t.mxClient.NO_FO=r;var h=this.graph2.getGraphBounds(),u=h.width+2*this.tooltipBorder+4,d=h.height+2*this.tooltipBorder;this.tooltip.style.overflow="visible",this.tooltip.style.width=u+"px";var c=u;if(this.tooltipTitles&&null!=o&&o.length>0){null==this.tooltipTitle?(this.tooltipTitle=document.createElement("div"),this.tooltipTitle.style.borderTop="1px solid gray",this.tooltipTitle.style.textAlign="center",this.tooltipTitle.style.width="100%",this.tooltipTitle.style.overflow="hidden",this.tooltipTitle.style.position="absolute",this.tooltipTitle.style.paddingTop="6px",this.tooltipTitle.style.bottom="6px",this.tooltip.appendChild(this.tooltipTitle)):this.tooltipTitle.innerHTML="",this.tooltipTitle.style.display="",t.mxUtils.write(this.tooltipTitle,o),c=Math.min(this.maxTooltipWidth,Math.max(u,this.tooltipTitle.scrollWidth+4));var p=this.tooltipTitle.offsetHeight+10;d+=p,t.mxClient.IS_SVG?this.tooltipTitle.style.marginTop=2-p+"px":this.tooltipTitle.style.top=(d-=6)-p+"px"}else null!=this.tooltipTitle&&null!=this.tooltipTitle.parentNode&&(this.tooltipTitle.style.display="none");c>u&&(this.tooltip.style.width=c+"px"),this.tooltip.style.height=d+"px";var m=-Math.round(h.x-this.tooltipBorder)+(c>u?(c-u)/2:0),g=-Math.round(h.y-this.tooltipBorder),x=this.getTooltipOffset(e,h),y=x.x,f=x.y;0!=m||0!=g?this.graph2.view.canvas.setAttribute("transform","translate("+m+","+g+")"):this.graph2.view.canvas.removeAttribute("transform"),y+=0,f+=50,this.tooltip.style.position="absolute",this.tooltip.style.left=y+"px",this.tooltip.style.top=f+"px",t.mxUtils.fit(this.tooltip)});null!=this.tooltip&&"none"!=this.tooltip.style.display?r():this.thread=window.setTimeout(r,this.tooltipDelay),this.currentElt=e}}},t.ngInjectableDef=i.T({factory:function(){return new t(i.X(h.a),i.X(m.a),i.X(u.a),i.X(T),i.X(A.a))},token:t,providedIn:"root"}),t}(),L=n("CIo6"),P=n("0np6"),I=n("26FU"),R=n("K9Ia"),O=n("gI3B"),_=function(){function t(t,e,n,i,l,o){this._appservice=t,this._global=e,this._util=n,this._toastLoad=i,this._handleGraph=l,this._sidebar=o,this.topicSubscribe=[],this.topicNodeData={},this.availableTopics={},this.cellsToUpdate=new I.a("0.00"),this.graphHasUpdated=new R.b,this.colorPicker={},this.searchFieldContent="",this.requestInProgress=!1,this.numbers=Object(O.a)(1e3,1e3),this.context_shape_name="el_ID",this.configPopupData={conditionsExist:!1,device:"Not Found",tag:"Not Found",unit:"Not Found",decimal:"Not Found",live_value:"Not Found",showUnits:!0,showValue:!1,header_content:["Compare","Compare value","Action","Action value"],body_content:[]},this.action_name="action",this.cell_name="device",this.cell_id="01",this.cellPropertyData={body_content:[]},this.devices={},this.tags={},this.units={},this.clientId="mqttjs_"+Math.random().toString(17).substr(2,8),this.Comparison={"==":{value:"==",label:"Equals"},"!=":{value:"!=",label:"Not equals"},"&ge;":{value:">=",label:"Greater or equal to"},"&le;":{value:"<=",label:"Less or equal to"},"&gt;":{value:">",label:"Greater than"},"&lt;":{value:"<",label:"Less than"},progress:{value:"-",label:"-"}},this.Action={strokeColor:{label:"Stroke Color"},opacity:{label:"Visibility",type:"value-to-hide"},display:{label:"Visibility",type:"value-to-hide"},fontColor:{label:"Font Color"},fillColor:{label:"Fill Color"},fontSize:{label:"Font Size"},labelBackgroundColor:{label:"Text Background"},imageBackground:{label:"Fill Color"},rotation:{label:"Rotation"},image:{label:"Image"},textOpacity:{label:"Text Visibility",type:"value-to-hide"},gradientColor:{label:"Gradient Color"},text:{label:"Show content with value"},progress:{label:"Progress",labels:{south:"Top to Bottom",north:"Bottom to Top",east:"Left to Right",west:"Right to Left"}}},this.contextMenuTop=284,this.contextMenuLeft=170,this.hexReference={}}return t.prototype.getScadaColors=function(){for(var t=this,e=0,n=this._global._appConfigurations.scadaColors;e<n.length;e++){var i=n[e];this.colorPicker[i.reference]={value:i.value,label:i.label},this.hexReference[i.value]=i.label,this.hexReference[i.label]=i.value}this._appservice.getXmlData().subscribe(function(e){t.noXmlPresent=atob(e.SCADAData)})},t.prototype.createGraphInstance=function(t,e,n,i){var l=this;return this.graph={},this.graphContainer=t,this.verifyCellProperty=0,this.SVG="",mxUtils.getAll(["","/assets/library/scada/editor/styles/default.xml"],function(o){mxResources.parse(o[0].getText());var s=new Object;s.default=o[1].getDocumentElement(),l.graph=new i(null,null,null,null,s,null),l.graph.transparentBackground=!1,new n(new e(null,s,null,null,l.graph),t)},function(){console.log("could not load Scada")})},t.prototype.loadXmlToInstance=function(t,e,n){var i=this,l="",o=!0;try{l=atob(t.widget.wcData[0].SCADAData),e.prototype.open=function(){}}catch(r){o=!1,this.writeXmlToPage(e,this.noXmlPresent)}if(o){this.documentElement=mxUtils.parseXml(l).documentElement,this.writeXmlToPage(e,this.documentElement);var s=setInterval(function(){i.graph&&Object.keys(i.graph).length>0&&(clearInterval(s),i.hasScadaLoaded=!0,i.graphHasUpdated.next(!0),i.hasScadaLoaded=!0)},100)}},t.prototype.getUnitData=function(t,e,n){var i=this;this.unitMetaData={filter:[{site_id:this._global.getCurrentUserSiteId},{user_id:this._global.getCurrentUserId}]},this._appservice.getScadaUnitMetaData(this.unitMetaData).subscribe(function(l){l&&"success"===l.status?(i.cellFactors=l.data,i._appservice.getScadaUnits().subscribe(function(l){l&&"success"===l.status?(i.cellUnits=l.data,i.getTopicsForCells(t,e,n)):(i._toastLoad.toast("error","Error",l.message,!0),i.cellFactors=null,i.cellUnits=null)})):(i._toastLoad.toast("error","Error",l.message,!0),i.cellFactors=null)})},t.prototype.setCellProperty=function(t,e,n){this._scada=t,this.graphHasUpdated.next(!0),this.graph=this._handleGraph.getGraphObject(),this.documentElement=t.mxUtils.parseXml(e).documentElement,this.SVG=this._handleGraph.graph.container.querySelector("svg");var i={autoRefreshType:"realTime",filter:{filtersData:[{id:"devices",list:[],overwrite:!0,title:"Devices",type:"multiCheckboxSelect",value:[]}]},yaxis:[]},l=!1,o=this.documentElement.getElementsByTagName("mxCell");this._handleGraph.graph.nodes=o;var s=this._handleGraph.graph.getModel();if(o&&s)for(var r=0;r<o.length;r++){var a=o[r].getAttribute("id"),h=s.getCell(a);if(h){h.devices&&h.tags&&(l=!0,i.filter.filtersData[0].value.push({checked:!0,label:h.devices,value:h.devices}),i.yaxis.push({tag:{label:h.tags.split(":")[0],type:"tag",unit:{label:h.tags.split(":")[1],value:h.tags.split(":")[1]},value:h.tags.split(":")[0]}}));var u={},d=h.getStyle();if(d){d=d.split(";");for(var c=0;c<d.length;c++)u[d[c].split("=")[0]]=d[c].split("=")[1];h.defaultStyle=u,h.defaultStyle.display="block",h.defaultStyle.text=" ",h.defaultStyle.geometry=h.geometry,h.isEdges=this._handleGraph.graph.getModel().isEdge(h),"flexArrow"==h.defaultStyle.shape&&(h.flexArrow=!0)}if(h.configure&&h.configure.conditions.length>0){var p=h.configure.conditions;for(var m in p)"progress"==p[m].action.name&&(h.configured="progress")}if(h.style&&h.style.includes("shape=image;")&&h.style.includes("image=")){var g=h.style.split("image=")[0],x=this._sidebar.getHostIp(this._util.appMode),y=h.style.split("//")[1].split("/");y.shift(),h.style=g+"image="+x+"/"+y.join("/")}}}n||(l?this.getUnitData(i,o,s):this.disconnect())},t.prototype.getTopicsForCells=function(t,e,n){var i=this;this.topicSubscribe=[],this.topicNodeData={},this._appservice.getScadaTopics(t).subscribe(function(t){if(t&&"success"===t.status){for(var l=t.topics,o=Object.keys(l),s=0;s<o.length;s++)for(var r=o[s],a=function(t){var a=e[t].getAttribute("id"),h=n.getCell(a);if(e[t].getAttribute("devices")&&r.includes(e[t].getAttribute("devices")))for(var u=0;u<l[r].length;u++)l[r][u].includes(e[t].getAttribute("tags").split(":")[0])&&e[t].setAttribute("topics",o[s]);if(h&&h.hasOwnProperty("tags")){var d=h.tags.split(":")[1];i.cellFactors&&void 0!==i.cellFactors[d]&&i.cellFactors[d].forEach(function(t){t.value===h.converter&&(h.factor=t.factor)}),i.cellUnits&&h.hasOwnProperty("converter")&&i.cellUnits.forEach(function(t){t.id===h.converter&&(h.units=t.notation)})}var c=e[t].getAttribute("topics");""===c||null===c||i.topicSubscribe.includes(c)||i.topicSubscribe.push(c),i.topicNodeData[c]?i.topicNodeData[c].push(e[t]):(i.topicNodeData[c]=[],i.topicNodeData[c].push(e[t]))},h=2;h<e.length;h++)a(h);try{i.setRealTimeRefresh()}catch(u){console.log(u)}}else i._toastLoad.toast("error","Error",t.message,!0)})},t.prototype.setRealTimeRefresh=function(){this._mqttClient&&this._mqttClient.connected&&this.disconnect();var t=P.a.CONSTANTS.MQTT.ip,e=P.a.CONSTANTS.MQTT.port,n="mqttjs_"+Math.random().toString(17).substr(2,8);this.mqttConnect(t,e,n)},t.prototype.mqttConnect=function(t,e,n){var i,l=this;this._mqttClient=null,i={useSSL:P.a.CONSTANTS.MQTT.useSSL,userName:P.a.CONSTANTS.MQTT.userName,password:P.a.CONSTANTS.MQTT.password,onFailure:this.onFailed.bind(this),onSuccess:this.onConnect.bind(this),keepAliveInterval:45},this._mqttClient=new L.Paho.MQTT.Client(t,Number(e),n),this._mqttClient.onMessageArrived=function(t){l._mqttClient.isConnected()&&l.setCellsToUpdate(t.payloadString,t._getDestinationName())},this._mqttClient.connect(i)},t.prototype.onConnect=function(){if(this._mqttClient.connected=!0,this.topicSubscribe.length>0)for(var t=0;t<this.topicSubscribe.length;t++)this._mqttClient.subscribe(this.topicSubscribe[t])},t.prototype.disconnect=function(){if(this._mqttClient&&this._mqttClient.connected)try{this._mqttClient.disconnect(),this._mqttClient.connected=!1}catch(t){}},t.prototype.onFailed=function(){this._toastLoad.toast("error","Error","Unable to connect. Please try again later",!0)},t.prototype.setCellsToUpdate=function(t,e){for(var n=JSON.parse(t),i=this._handleGraph.graph.getModel(),l=this.topicNodeData[e],o=0;o<l.length;o++){var s={},r=i.getCell(l[o].getAttribute("id"));s.cell_id=l[o];var a=void 0;r&&(a=r.tags.split(":")[0]);var h=void 0,u=void 0;r&&r.hasOwnProperty("showValue")&&r.hasOwnProperty("showUnits")?(h=0!==r.showValue,u=0!==r.showUnits):(h=!0,u=!0),u||(r.units=""),r.decimal=r.decimal&&r.decimal>0&&r.decimal<100?r.decimal:0,n.hasOwnProperty(a)&&!isNaN(n[a][1])&&n[a].length>0&&h&&(r.value="",s.value=(n[a][1]*(r.factor?r.factor:1)).toFixed(r.decimal)+" "+r.units);var d=[],c=[],p=[],m=r.configure;if(n&&n.hasOwnProperty(a)&&n[a].length>0)for(var g=0;g<m.conditions.length;g++){this.colorPicker[m.conditions[g].action.change_to]&&(m.conditions[g].action.change_to=this.colorPicker[m.conditions[g].action.change_to].value),"progress"==m.conditions[g].action.name&&(m.conditions[g].condition="progress");var x=m.conditions[g].condition,y=m.conditions[g].action.name,f=m.conditions[g].action.change_to,v=n[a][1];switch(x){case"==":case"=":d[y]||v!==m.conditions[g].value?d[y]||this.updateStyleArray(p,y,f):(this.updateStyleArray(c,y,f),d[y]=x);break;case"!=":d[y]||v===m.conditions[g].value?d[y]||this.updateStyleArray(p,y,f):(this.updateStyleArray(c,y,f),d[y]=x);break;case"&ge;":!d[y]&&v>=m.conditions[g].value?(this.updateStyleArray(c,y,f),d[y]=x):d[y]||this.updateStyleArray(p,y,f);break;case"&le;":!d[y]&&v<=m.conditions[g].value?(this.updateStyleArray(c,y,f),d[y]=x):d[y]||this.updateStyleArray(p,y,f);break;case"&gt;":!d[y]&&v>m.conditions[g].value?(this.updateStyleArray(c,y,f),d[y]=x):d[y]||this.updateStyleArray(p,y,f);break;case"&lt;":!d[y]&&v<m.conditions[g].value?(this.updateStyleArray(c,y,f),d[y]=x):d[y]||this.updateStyleArray(p,y,f);break;case"progress":if(m.conditions[g].action.max<m.conditions[g].action.min){var b=m.conditions[g].action.max;m.conditions[g].action.max=m.conditions[g].action.min,m.conditions[g].action.min=b}!d[y]&&v>=m.conditions[g].action.min&&v<=m.conditions[g].action.max?(m.conditions[g].action.value=v,m.conditions[g].action.goBackToDefault=!1,f=JSON.stringify(m.conditions[g].action),this.updateStyleArray(c,y,f),d[y]=x):d[y]||(m.conditions[g].action.goBackToDefault=!0,f=JSON.stringify(m.conditions[g].action),this.updateStyleArray(c,y,f))}}s.styles={update:c,remove:p},this.cellsToUpdate.next(s)}},t.prototype.getPreviewCells=function(){return this.cellsToUpdate.asObservable()},t.prototype.getGraphState=function(){return this.graphHasUpdated.asObservable()},t.prototype.getKeyByValue=function(t,e){for(var n in t)if(t.hasOwnProperty(n)&&t[n]===e)return n},t.prototype.updateStyleArray=function(t,e,n){t.push(e+"="+n)},t.prototype.setCellStyle=function(t,e,n,i,l){var o;if("display"==t||"text"==t||"progress"==t)this.setCustomStyles(t,e,n,i,l);else if(o="rotation"===t&&n.defaultStyle[t]?parseInt(n.defaultStyle[t])+parseInt(e):e,n&&t)return this._handleGraph.graph.setCellStyles(t,o,[n])},t.prototype.setCustomStyles=function(t,e,n,i,l){switch(t){case"display":(o=this.SVG.getElementById(n.id)).style[t]=e,"none"==e&&this._handleGraph.graph.model.setValue(n,"");break;case"text":i&&e?this._handleGraph.graph.model.setValue(n,n.value+" "+e):e&&this._handleGraph.graph.model.setValue(n,e);break;case"progress":var o=this.SVG.getElementById(n.id);this.setCellProgress(o,e,n)}},t.prototype.setCellProgress=function(t,e,n){var i=this._handleGraph.graph.view.getCellStates([n])[0],l=JSON.parse(e),o=this.calcPercentage(l,n);i&&(i.progress={enabled:!0,settings:l,percentage:o},n.hasOwnProperty("isEdges")&&n.isEdges&&!n.defaultStyle.hasOwnProperty("shape")?("west"==l.direction&&!n.hasOwnProperty("turned")&&this.reverseCellOnRTL(t,e,n),this.pathPercentage(t,o,i)):this._scada.mxCellRenderer.prototype.redraw(i,!0,!0))},t.prototype.pathPercentage=function(t,e,n){var i=t.querySelectorAll("path")[1],l=t.querySelectorAll("path")[2],o=t.querySelectorAll("path")[3];if(i){var s=i.getTotalLength();n.cell.edgeProgress={dasharray:s,dashOffset:s-e*s/100},o?(l.style.display="none",e<100&&o?(o.style.display="none",n.cell.edgeProgress.display="none"):o&&setTimeout(function(){o.style.display="block",n.cell.edgeProgress.display="block"},500)):e<100&&l?(l.style.display="none",n.cell.edgeProgress.display="none"):l&&setTimeout(function(){l.style.display="block",n.cell.edgeProgress.display="block"},500),i.style.transition="0.5s ease-out",i.setAttribute("stroke-dasharray",n.cell.edgeProgress.dasharray),i.setAttribute("stroke-dashoffset",n.cell.edgeProgress.dashOffset)}},t.prototype.reverseCellOnRTL=function(t,e,n){this._handleGraph.graph.turnShapes([n],!0),n.turned=!0},t.prototype.calcPercentage=function(t,e){var n=t.min,i=t.value;return t.goBackToDefault?i<=n?0:e.defaultStyle.geometry[t.dimension]:100*(i-n)/(t.max-n)},t.prototype.setPageZoom=function(){this.scaleToTranslate=void 0!==this._handleGraph.graph.scaleToTranslate?this._handleGraph.graph.scaleToTranslate:1,this._handleGraph.graph.view.scaleAndTranslate(this.scaleToTranslate);var t=this._handleGraph.graph.container.querySelector("svg");this._handleGraph.graph.container.scrollTop=t.clientHeight/4,this._handleGraph.graph.container.scrollLeft=t.clientWidth/4},t.prototype.zoomOut=function(){return this._handleGraph.graph.zoomOut()},t.prototype.writeXmlToPage=function(t,e){t.prototype.open=function(){try{return this.editor.setGraphXml(e),void this.editor.setModified(!1)}catch(t){console.log("error")}}},t.prototype.getCurrentOffset=function(t,e){var n={},i=window.innerHeight,l=window.innerWidth;return i-t<300&&(n.height=!0),l-e<350&&(n.width=!0),n},t.prototype.setContextMenu=function(t,e){var n=document.body.classList.contains("pin-sidebar"),i=t,l=e,o=this.getCurrentOffset(i,l);this.subMenuContentsLeft=199,this.subMenuContentsTop=78,n?(l=e-50,this.contextMenuTop=i=t-48,this.contextMenuLeft=l,o.hasOwnProperty("height")&&o.hasOwnProperty("width")?(this.contextMenuTop=i-160,this.contextMenuLeft=l-220,this.subMenuContentsLeft=-199,this.subMenuContentsTop=78):(o.hasOwnProperty("height")&&(this.contextMenuTop=i-160,this.contextMenuLeft=l),o.hasOwnProperty("width")&&(this.contextMenuTop=i,this.contextMenuLeft=l-200,this.subMenuContentsLeft=-199,this.subMenuContentsTop=78))):(l=e-70,this.contextMenuTop=i=t-48,this.contextMenuLeft=l,o.hasOwnProperty("height")&&o.hasOwnProperty("width")?(this.contextMenuTop=i-160,this.contextMenuLeft=l-205,this.subMenuContentsLeft=-199,this.subMenuContentsTop=78):(o.hasOwnProperty("height")&&(this.contextMenuTop=i-160,this.contextMenuLeft=l),o.hasOwnProperty("width")&&(this.contextMenuTop=i,this.contextMenuLeft=l-205,this.subMenuContentsLeft=-199,this.subMenuContentsTop=78)))},t.prototype.triggerAction=function(){var t=this;this._appservice.triggerAssetControlData({asset_action_id:this.action_id,type:"scada"}).subscribe(function(e){"success"===e.status?t._toastLoad.toast("success","Success","Action Triggered Successfully",!0):t._toastLoad.toast("error","Error","Action Couldn`t Be Triggered",!0)},function(e){t._toastLoad.toast("error","Error","Failed To Reach Server",!0)})},t.prototype.openTriggerPopup=function(){this.hasSubbed&&this.hasSubbed.unsubscribe(),this.initiateTriggerCountDown(),document.getElementById("contextTrigger").click()},t.prototype.initiateTriggerCountDown=function(){var t=this;this.countDown=10,this.hasSubbed=this.numbers.subscribe(function(e){if(t.countDown>=1)t.countDown--;else{t.hasSubbed.unsubscribe();try{var n=document.getElementById("dismissTriggerModal"),i=document.getElementById("actionTrigger");i&&i.classList.contains("show")&&n&&n.click()}catch(l){console.log(l)}}})},t.prototype.getMetaData=function(){var t=this;this._appservice.getChartConfigMetaData({fetch_meta_data_by:["devices","tags"],filter:[{site_id:this._global.getCurrentUserSiteId},{user_id:this._global.getCurrentUserId}]}).subscribe(function(e){(e.status="success")&&e.hasOwnProperty("data")&&e.data.hasOwnProperty("devices")&&e.data.hasOwnProperty("tags")&&t.setMetaData(e.data)})},t.prototype.setMetaData=function(t){for(var e=this,n=0,i=t.devices;n<i.length;n++){var l=i[n];this.devices[l.value]=l.label}t.tags.forEach(function(t){e.tags[t.value]=t.label}),this.cellUnits&&this.cellUnits.forEach(function(t){e.units[t.id]=t.name})},t.ngInjectableDef=i.T({factory:function(){return new t(i.X(h.a),i.X(m.a),i.X(A.a),i.X(u.a),i.X(w),i.X(M))},token:t,providedIn:"root"}),t}(),D=function(){function t(t,e,n,i,l,o,s,r,a){this._app=t,this._toaster=e,this._auth=n,this._global=i,this._sidebar=l,this._editor=o,this._util=s,this._webScada=r,this._graph=a,this.currentState="Loading..",this.devicesMeta=[],this.tagsMeta=[],this.unitsMeta=[],this.isGetMetaLoading=!1,this.isUnitLoading=!1,this.restrictDecimal=2,this.showValue=!0,this.showUnits=!0,this.actions=[],this.scadaColors=[],this.scadaColorsMeta={},this.currentaction="fillColor",this.conditonsMeta={action:{name:"",change_to:""},condition:"",value:""},this.hexReference={},this.conditions=[],this.isShowUnitsEnabled=!0}return t.prototype.ngOnInit=function(){this.getOperators(),this.getScadaColors()},t.prototype.ngOnChanges=function(){this.isPopupOpened&&(this.currentState="Loading..",this.restrictDecimal=2,this.showUnits=!0,this.showValue=!0,this.getMetaData())},t.prototype.setCellProperties=function(){this.imagePickerImages=[],0!==this._sidebar.uploaded_images.length&&(this.imagePickerImages=this.imagePickerImages.concat(this._sidebar.uploaded_images)),0!==this._sidebar.default_images.length&&(this.imagePickerImages=this.imagePickerImages.concat(this._sidebar.default_images)),this.conditions=[],this.elementsName="";var t=this._graph.getGraphObject();t&&t.hasOwnProperty("CELL")&&(this.currentCell=t.CELL,this.currentCell.hasOwnProperty("configure")&&this.currentCell.configure.hasOwnProperty("conditions")&&this.currentCell.configure.conditions.length>0&&this.setCellConditions(this.currentCell.configure.conditions),t.CELL.hasOwnProperty("cellName")&&t.CELL.cellName!=="el_"+t.CELL.id&&(this.elementsName=t.CELL.cellName),this.currentCellType=t.getModel().isEdge(t.CELL),this.setActionFromCellType(),t.CELL.devices&&t.CELL.tags?this.setDefaultValues(t.CELL):this._defaultDevice&&this._defaultDevice.length>0&&(this.currentState="Create",this._defaultDevice=this.devicesMeta[0].value,this._defaultTag=this.tagsMeta[0],this._defaultUnit=this._defaultTag.unit&&this._defaultTag.unit.length?this._defaultTag.unit[0].value:this._defaultTag.unit.value))},t.prototype.setCellConditions=function(t){for(var e=0,n=t;e<n.length;e++){var i=n[e],l={action:{name:"",change_to:""},condition:"",value:""};if(l.action.name=i.action.name,this.hexReference[i.action.change_to])l.action.change_to=this.hexReference[i.action.change_to];else{l.action.change_to=i.action.change_to;var o=i.action.change_to;this.scadaColors.push({value:o,reference:o,label:o}),this.hexReference[o]=o}l.condition=i.condition?i.condition:this.operators[0].value,l.value=i.value,"progress"==i.action.name&&(l.action.direction=i.action.direction,l.action.max=i.action.max,l.action.min=i.action.min),this.conditions.push(l)}},t.prototype.getScadaColors=function(){this.scadaColors=this._global._appConfigurations.scadaColors;for(var t=0,e=this.scadaColors;t<e.length;t++){var n=e[t];this.scadaColorsMeta[n.reference]=n.value,this.hexReference[n.value]=n.reference,this.hexReference[n.reference]=n.reference}},t.prototype.addConditions=function(){this.conditions.push({action:{name:"edge"==this.cellType?"strokeColor":"image"==this.cellType?"imageBackground":"fillColor",change_to:this.scadaColors[0].reference},condition:"==",value:""}),this.updateActionName(this.conditions.length-1,this.conditions[this.conditions.length-1].action.name)},t.prototype.getOperators=function(){this.operators=this._graph.operators},t.prototype.updateActionName=function(t,e){var n=0;this.conditions[t].action={name:this.conditions[t].action.name,change_to:this.conditions[t].action.change_to};for(var i=0,l=this.conditions;i<l.length;i++)"progress"===l[i].action.name&&++n>1&&(this._toaster.toast("info","","There can only be one progress action in the conditions list",!0),this.conditions[t].action.name=e="edge"==this.cellType?"strokeColor":"image"==this.cellType?"imageBackground":"fillColor");switch(e){case"fillColor":case"strokeColor":case"imageBackground":case"labelBackgroundColor":case"fontColor":case"gradientColor":this.conditions[t].action.change_to=this.scadaColors[0].reference;break;case"display":this.conditions[t].action.change_to="show";break;case"rotation":case"fontSize":case"text":this.conditions[t].action.change_to="";break;case"image":this.conditions[t].action.change_to=this._sidebar.getHostIp(this._util.appMode)+this.imagePickerImages[0].value;break;case"progress":this.conditions[t].action.change_to="direction",this.conditions[t].action.direction="south",this.conditions[t].action.min="",this.conditions[t].action.max=""}},t.prototype.setActionFromCellType=function(){this.currentCellType?(this.actions=this._graph.isEdge,this.cellType="edge"):!this.currentCellType&&this.currentCell.style.includes("shape=image;")?(this.actions=this._graph.isImage,this.cellType="image"):(this.actions=this._graph.isCell,this.cellType="shape")},t.prototype.setDefaultValues=function(t){this.currentState="Edit",this._defaultDevice=t.devices;var e=t.tags.split(":");this._defaultTag=this.tagsMeta.filter(function(t){return t.value==e[0]})[0],this._defaultUnit=t.converter,this.restrictDecimal=t.decimal,this.showValue=!t.hasOwnProperty("showValue")||t.showValue,this.showUnits=!t.hasOwnProperty("showUnits")||t.showUnits},t.prototype.getMetaData=function(){var t=this;this.isGetMetaLoading=!0,this._app.getChartConfigMetaData({fetch_meta_data_by:["devices","tags"],filter:[{site_id:this._auth.getCurrentUserSiteId()},{user_id:this._auth.serviceUserId()}]}).subscribe(function(e){"success"==e.status?(t.devicesMeta=e.data.devices,t.tagsMeta=e.data.tags,t._defaultDevice=t.devicesMeta[0].value,t._webScada.setMetaData(e.data)):t._toaster.toast("error","Error","Failed to retrieve Assets and Tags, Please try again later.",!0),t.setCellProperties(),t.getUnitMetaData(),t.isGetMetaLoading=!1},function(e){t.isGetMetaLoading=!1,t._toaster.toast("error","Error","Unable to reach server, Please try again later.",!0)})},t.prototype.getUnitMetaData=function(){var t=this;this.isUnitLoading=!0,this._app.getChartUnitMetaData({filter:[{site_id:this._auth.getCurrentUserSiteId()},{user_id:this._auth.serviceUserId()}]}).subscribe(function(e){if("success"==e.status){if(t.unitsMeta=e.data,t.currentCell&&t.currentCell.devices)for(var n=t.currentCell.tags.split(":")[1],i=0,l=Object.keys(t.unitsMeta);i<l.length;i++)t._defaultUnit.length||n&&(t._defaultUnit=t.unitsMeta[l[i]].filter(function(t){return t.value==n}).value);t.getUnits()}else t._toaster.toast("error","Error","Unable to retrieve units, Please try again later.",!0);t.isUnitLoading=!1},function(e){t.isUnitLoading=!1,t._toaster.toast("error","Error","Unable to reach server, Please try again later.",!0)})},t.prototype.getUnits=function(){var t;if(this.tagsMeta&&this.unitsMeta&&(t=this._defaultTag?this._defaultTag:this.tagsMeta[0])&&t.unit){if(!Array.isArray(t.unit)){var e=t.unit.value;if(t.unit=[t.unit],this.unitsMeta[e])for(var n=0,i=this.unitsMeta[e];n<i.length;n++)t.unit.push(i[n])}var l=this.isDefaultTagPresent(this._defaultUnit,t.unit);return this._defaultUnit=l?t.unit[l].value:t.unit[0].value,this._defaultTag=t,this._defaultTag.unit}},t.prototype.isDefaultTagPresent=function(t,e){for(var n=e.length;n--;)if(e[n].value==t)return n;return!1},t.prototype.closeDialog=function(){this._editor.toggleLiveData()},t.prototype.isShowUnitEnabled=function(){this.showValue?(this.isShowUnitsEnabled=!1,this.showUnits=!1):(this.isShowUnitsEnabled=!0,this.showUnits=!0)},t.prototype.deleteRow=function(t){this.conditions.splice(t,1)},t.prototype.saveCurrentSettings=function(){if(this.elementsName)if(this.restrictDecimal&&this.restrictDecimal<0)this._toaster.toast("error","Error","Restrict to decimal cannot be a negative value.",!0);else{var t=this.validateConditions();if(t.isValid){try{this._graph.graph.CELL.cellName=this.elementsName,this._graph.graph.CELL.devices=this._defaultDevice,this._graph.graph.CELL.units=this._defaultTag.label,this._graph.graph.CELL.converter=this._defaultUnit,this._graph.graph.CELL.tags=this._defaultTag.value+":"+this._defaultTag.unit[0].value,this._graph.graph.CELL.decimal=this.restrictDecimal?this.restrictDecimal:0,this._graph.graph.CELL.showValue=this.showValue,this._graph.graph.CELL.showUnits=this.showUnits,this._graph.graph.CELL.configure={},this._graph.graph.CELL.configure.conditions=this.conditions,this._graph.graph.clickSource.querySelector("title")?this._graph.graph.clickSource.querySelector("title").innerHTML=this.elementsName:this._graph.graph.clickSource.title=this.elementsName,this._sidebar.Scada._editorUi.editor.setModified(!0)}catch(e){console.log(e)}this.closeModal.nativeElement.click()}else this._toaster.toast("error","Error",t.message,!0)}else this._toaster.toast("error","Error","Please enter elements name",!0)},t.prototype.validateConditions=function(){var t={isValid:!0,message:"All fields are mandatory"};if(0!==this.conditions.length){for(var e=0,n=this.conditions;e<n.length;e++){var i=n[e];if(("progress"!=i.action.name||i.value)&&!i.value&&0!==i.value)return{isValid:!1,message:"All fields are mandatory"};for(var l=0,o=Object.keys(i.action);l<o.length;l++){var s=o[l];if(!i.action[s]&&0!==i.action[s])return{isValid:!1,message:"All fields are mandatory"}}}return t}return t},t.prototype.moveItems=function(t,e){var n=this.conditions[e];this.conditions[e]=this.conditions[t],this.conditions[t]=n},t}(),U=i.ob({encapsulation:0,styles:[y],data:{}});function N(t){return i.Kb(0,[(t()(),i.qb(0,0,null,null,6,"div",[["class","main-loader content-align"],["id","scada-loader"]],null,null,null,null,null)),(t()(),i.qb(1,0,null,null,5,"div",[["id","loader-wrapper-submaincontent"]],null,null,null,null,null)),(t()(),i.qb(2,0,null,null,4,"div",[["class","loader-rings"]],null,null,null,null,null)),(t()(),i.qb(3,0,null,null,0,"div",[],null,null,null,null,null)),(t()(),i.qb(4,0,null,null,0,"div",[],null,null,null,null,null)),(t()(),i.qb(5,0,null,null,0,"div",[],null,null,null,null,null)),(t()(),i.qb(6,0,null,null,0,"div",[],null,null,null,null,null))],null,null)}function k(t){return i.Kb(0,[(t()(),i.qb(0,0,null,null,20,null,null,null,null,null,null,null)),(t()(),i.qb(1,0,null,null,19,"ng-select",[["bindLabel","label"],["bindValue","value"],["class","ng-select"],["id","units"],["loadingText","Loading Units.."],["placeholder","Select units.."],["role","listbox"]],[[2,"ng-select-single",null],[2,"ng-select-typeahead",null],[2,"ng-select-multiple",null],[2,"ng-select-taggable",null],[2,"ng-select-searchable",null],[2,"ng-select-clearable",null],[2,"ng-select-opened",null],[2,"ng-select-disabled",null],[2,"ng-select-filtered",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"keydown"]],function(t,e,n){var l=!0,o=t.component;return"keydown"===e&&(l=!1!==i.Ab(t,3).handleKeyDown(n)&&l),"ngModelChange"===e&&(l=!1!==(o._defaultUnit=n)&&l),l},f.c,f.a)),i.Fb(4608,null,v.f,v.f,[]),i.pb(3,4964352,null,12,v.a,[[8,null],[8,null],[8,null],v.b,v.d,i.k,i.h,v.l],{bindLabel:[0,"bindLabel"],bindValue:[1,"bindValue"],placeholder:[2,"placeholder"],loadingText:[3,"loadingText"],loading:[4,"loading"],clearable:[5,"clearable"],items:[6,"items"]},null),i.Gb(335544320,27,{optionTemplate:0}),i.Gb(335544320,28,{optgroupTemplate:0}),i.Gb(335544320,29,{labelTemplate:0}),i.Gb(335544320,30,{multiLabelTemplate:0}),i.Gb(335544320,31,{headerTemplate:0}),i.Gb(335544320,32,{footerTemplate:0}),i.Gb(335544320,33,{notFoundTemplate:0}),i.Gb(335544320,34,{typeToSearchTemplate:0}),i.Gb(335544320,35,{loadingTextTemplate:0}),i.Gb(335544320,36,{tagTemplate:0}),i.Gb(335544320,37,{loadingSpinnerTemplate:0}),i.Gb(603979776,38,{ngOptions:1}),i.Bb(16,1),i.Fb(1024,null,b.o,function(t){return[t]},[v.a]),i.pb(18,671744,null,0,b.t,[[8,null],[8,null],[8,null],[6,b.o]],{model:[0,"model"]},{update:"ngModelChange"}),i.Fb(2048,null,b.p,null,[b.t]),i.pb(20,16384,null,0,b.q,[[4,b.p]],null,null)],function(t,e){var n=e.component,i=n.isUnitLoading,l=n._defaultTag.unit.length>0?n._defaultTag.unit:t(e,16,0,n._defaultTag.unit);t(e,3,0,"label","value","Select units..","Loading Units..",i,!1,l),t(e,18,0,n._defaultUnit)},function(t,e){t(e,1,1,[!i.Ab(e,3).multiple,i.Ab(e,3).typeahead,i.Ab(e,3).multiple,i.Ab(e,3).addTag,i.Ab(e,3).searchable,i.Ab(e,3).clearable,i.Ab(e,3).isOpen,i.Ab(e,3).disabled,i.Ab(e,3).filtered,i.Ab(e,20).ngClassUntouched,i.Ab(e,20).ngClassTouched,i.Ab(e,20).ngClassPristine,i.Ab(e,20).ngClassDirty,i.Ab(e,20).ngClassValid,i.Ab(e,20).ngClassInvalid,i.Ab(e,20).ngClassPending])})}function H(t){return i.Kb(0,[(t()(),i.qb(0,0,null,null,6,null,null,null,null,null,null,null)),(t()(),i.qb(1,0,null,null,5,"div",[["class","container text-center"]],null,null,null,null,null)),(t()(),i.qb(2,0,null,null,1,"h5",[],null,null,null,null,null)),(t()(),i.Ib(-1,null,["Start adding conditions to visually see changes"])),(t()(),i.qb(4,0,null,null,2,"button",[["class","btn btn-primary btn-sm"]],null,[[null,"click"]],function(t,e,n){var i=!0;return"click"===e&&(i=!1!==t.component.addConditions()&&i),i},null,null)),(t()(),i.qb(5,0,null,null,0,"i",[["class","fa fa-plus"]],null,null,null,null,null)),(t()(),i.Ib(-1,null,[" Add"]))],null,null)}function G(t){return i.Kb(0,[(t()(),i.qb(0,0,null,null,19,"div",[["class","form-group"]],null,null,null,null,null)),(t()(),i.qb(1,0,null,null,18,"ng-select",[["bindLabel","label"],["bindValue","value"],["class","ng-select"],["role","listbox"]],[[2,"ng-select-single",null],[2,"ng-select-typeahead",null],[2,"ng-select-multiple",null],[2,"ng-select-taggable",null],[2,"ng-select-searchable",null],[2,"ng-select-clearable",null],[2,"ng-select-opened",null],[2,"ng-select-disabled",null],[2,"ng-select-filtered",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"keydown"]],function(t,e,n){var l=!0;return"keydown"===e&&(l=!1!==i.Ab(t,3).handleKeyDown(n)&&l),"ngModelChange"===e&&(l=!1!==(t.parent.context.$implicit.condition=n)&&l),l},f.c,f.a)),i.Fb(4608,null,v.f,v.f,[]),i.pb(3,4964352,null,12,v.a,[[8,null],[8,null],[8,null],v.b,v.d,i.k,i.h,v.l],{bindLabel:[0,"bindLabel"],bindValue:[1,"bindValue"],searchable:[2,"searchable"],clearable:[3,"clearable"],items:[4,"items"]},null),i.Gb(335544320,39,{optionTemplate:0}),i.Gb(335544320,40,{optgroupTemplate:0}),i.Gb(335544320,41,{labelTemplate:0}),i.Gb(335544320,42,{multiLabelTemplate:0}),i.Gb(335544320,43,{headerTemplate:0}),i.Gb(335544320,44,{footerTemplate:0}),i.Gb(335544320,45,{notFoundTemplate:0}),i.Gb(335544320,46,{typeToSearchTemplate:0}),i.Gb(335544320,47,{loadingTextTemplate:0}),i.Gb(335544320,48,{tagTemplate:0}),i.Gb(335544320,49,{loadingSpinnerTemplate:0}),i.Gb(603979776,50,{ngOptions:1}),i.Fb(1024,null,b.o,function(t){return[t]},[v.a]),i.pb(17,671744,null,0,b.t,[[8,null],[8,null],[8,null],[6,b.o]],{isDisabled:[0,"isDisabled"],model:[1,"model"]},{update:"ngModelChange"}),i.Fb(2048,null,b.p,null,[b.t]),i.pb(19,16384,null,0,b.q,[[4,b.p]],null,null)],function(t,e){t(e,3,0,"label","value",!1,!1,e.component.operators),t(e,17,0,"progress"==e.parent.context.$implicit.action.name,e.parent.context.$implicit.condition)},function(t,e){t(e,1,1,[!i.Ab(e,3).multiple,i.Ab(e,3).typeahead,i.Ab(e,3).multiple,i.Ab(e,3).addTag,i.Ab(e,3).searchable,i.Ab(e,3).clearable,i.Ab(e,3).isOpen,i.Ab(e,3).disabled,i.Ab(e,3).filtered,i.Ab(e,19).ngClassUntouched,i.Ab(e,19).ngClassTouched,i.Ab(e,19).ngClassPristine,i.Ab(e,19).ngClassDirty,i.Ab(e,19).ngClassValid,i.Ab(e,19).ngClassInvalid,i.Ab(e,19).ngClassPending])})}function F(t){return i.Kb(0,[(t()(),i.qb(0,0,null,null,19,"div",[["class","form-group"]],null,null,null,null,null)),(t()(),i.qb(1,0,null,null,18,"ng-select",[["bindLabel","label"],["bindValue","value"],["class","ng-select"],["role","listbox"]],[[2,"ng-select-single",null],[2,"ng-select-typeahead",null],[2,"ng-select-multiple",null],[2,"ng-select-taggable",null],[2,"ng-select-searchable",null],[2,"ng-select-clearable",null],[2,"ng-select-opened",null],[2,"ng-select-disabled",null],[2,"ng-select-filtered",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"keydown"]],function(t,e,n){var l=!0,o=t.component;return"keydown"===e&&(l=!1!==i.Ab(t,3).handleKeyDown(n)&&l),"ngModelChange"===e&&(l=!1!==(t.parent.context.$implicit.action.name=n)&&l),"ngModelChange"===e&&(l=!1!==o.updateActionName(t.parent.context.index,t.parent.context.$implicit.action.name)&&l),l},f.c,f.a)),i.Fb(4608,null,v.f,v.f,[]),i.pb(3,4964352,null,12,v.a,[[8,null],[8,null],[8,null],v.b,v.d,i.k,i.h,v.l],{bindLabel:[0,"bindLabel"],bindValue:[1,"bindValue"],searchable:[2,"searchable"],clearable:[3,"clearable"],items:[4,"items"]},null),i.Gb(335544320,51,{optionTemplate:0}),i.Gb(335544320,52,{optgroupTemplate:0}),i.Gb(335544320,53,{labelTemplate:0}),i.Gb(335544320,54,{multiLabelTemplate:0}),i.Gb(335544320,55,{headerTemplate:0}),i.Gb(335544320,56,{footerTemplate:0}),i.Gb(335544320,57,{notFoundTemplate:0}),i.Gb(335544320,58,{typeToSearchTemplate:0}),i.Gb(335544320,59,{loadingTextTemplate:0}),i.Gb(335544320,60,{tagTemplate:0}),i.Gb(335544320,61,{loadingSpinnerTemplate:0}),i.Gb(603979776,62,{ngOptions:1}),i.Fb(1024,null,b.o,function(t){return[t]},[v.a]),i.pb(17,671744,null,0,b.t,[[8,null],[8,null],[8,null],[6,b.o]],{model:[0,"model"]},{update:"ngModelChange"}),i.Fb(2048,null,b.p,null,[b.t]),i.pb(19,16384,null,0,b.q,[[4,b.p]],null,null)],function(t,e){t(e,3,0,"label","value",!1,!1,e.component.actions),t(e,17,0,e.parent.context.$implicit.action.name)},function(t,e){t(e,1,1,[!i.Ab(e,3).multiple,i.Ab(e,3).typeahead,i.Ab(e,3).multiple,i.Ab(e,3).addTag,i.Ab(e,3).searchable,i.Ab(e,3).clearable,i.Ab(e,3).isOpen,i.Ab(e,3).disabled,i.Ab(e,3).filtered,i.Ab(e,19).ngClassUntouched,i.Ab(e,19).ngClassTouched,i.Ab(e,19).ngClassPristine,i.Ab(e,19).ngClassDirty,i.Ab(e,19).ngClassValid,i.Ab(e,19).ngClassInvalid,i.Ab(e,19).ngClassPending])})}function V(t){return i.Kb(0,[(t()(),i.qb(0,0,null,null,0,null,null,null,null,null,null,null))],null,null)}function B(t){return i.Kb(0,[(t()(),i.qb(0,0,null,null,2,null,null,null,null,null,null,null)),(t()(),i.hb(16777216,null,null,1,null,V)),i.pb(2,540672,null,0,C.s,[i.P],{ngTemplateOutlet:[0,"ngTemplateOutlet"]},null),(t()(),i.hb(0,null,null,0))],function(t,e){t(e,2,0,i.Ab(e.parent,43))},null)}function z(t){return i.Kb(0,[(t()(),i.qb(0,0,null,null,0,null,null,null,null,null,null,null))],null,null)}function Y(t){return i.Kb(0,[(t()(),i.qb(0,0,null,null,2,null,null,null,null,null,null,null)),(t()(),i.hb(16777216,null,null,1,null,z)),i.pb(2,540672,null,0,C.s,[i.P],{ngTemplateOutlet:[0,"ngTemplateOutlet"]},null),(t()(),i.hb(0,null,null,0))],function(t,e){t(e,2,0,i.Ab(e.parent,43))},null)}function j(t){return i.Kb(0,[(t()(),i.qb(0,0,null,null,0,null,null,null,null,null,null,null))],null,null)}function W(t){return i.Kb(0,[(t()(),i.qb(0,0,null,null,2,null,null,null,null,null,null,null)),(t()(),i.hb(16777216,null,null,1,null,j)),i.pb(2,540672,null,0,C.s,[i.P],{ngTemplateOutlet:[0,"ngTemplateOutlet"]},null),(t()(),i.hb(0,null,null,0))],function(t,e){t(e,2,0,i.Ab(e.parent,43))},null)}function q(t){return i.Kb(0,[(t()(),i.qb(0,0,null,null,0,null,null,null,null,null,null,null))],null,null)}function X(t){return i.Kb(0,[(t()(),i.qb(0,0,null,null,2,null,null,null,null,null,null,null)),(t()(),i.hb(16777216,null,null,1,null,q)),i.pb(2,540672,null,0,C.s,[i.P],{ngTemplateOutlet:[0,"ngTemplateOutlet"]},null),(t()(),i.hb(0,null,null,0))],function(t,e){t(e,2,0,i.Ab(e.parent,43))},null)}function Z(t){return i.Kb(0,[(t()(),i.qb(0,0,null,null,0,null,null,null,null,null,null,null))],null,null)}function K(t){return i.Kb(0,[(t()(),i.qb(0,0,null,null,2,null,null,null,null,null,null,null)),(t()(),i.hb(16777216,null,null,1,null,Z)),i.pb(2,540672,null,0,C.s,[i.P],{ngTemplateOutlet:[0,"ngTemplateOutlet"]},null),(t()(),i.hb(0,null,null,0))],function(t,e){t(e,2,0,i.Ab(e.parent,44))},null)}function J(t){return i.Kb(0,[(t()(),i.qb(0,0,null,null,0,null,null,null,null,null,null,null))],null,null)}function Q(t){return i.Kb(0,[(t()(),i.qb(0,0,null,null,2,null,null,null,null,null,null,null)),(t()(),i.hb(16777216,null,null,1,null,J)),i.pb(2,540672,null,0,C.s,[i.P],{ngTemplateOutlet:[0,"ngTemplateOutlet"]},null),(t()(),i.hb(0,null,null,0))],function(t,e){t(e,2,0,i.Ab(e.parent,43))},null)}function $(t){return i.Kb(0,[(t()(),i.qb(0,0,null,null,0,null,null,null,null,null,null,null))],null,null)}function tt(t){return i.Kb(0,[(t()(),i.qb(0,0,null,null,2,null,null,null,null,null,null,null)),(t()(),i.hb(16777216,null,null,1,null,$)),i.pb(2,540672,null,0,C.s,[i.P],{ngTemplateOutlet:[0,"ngTemplateOutlet"]},null),(t()(),i.hb(0,null,null,0))],function(t,e){t(e,2,0,i.Ab(e.parent,45))},null)}function et(t){return i.Kb(0,[(t()(),i.qb(0,0,null,null,0,null,null,null,null,null,null,null))],null,null)}function nt(t){return i.Kb(0,[(t()(),i.qb(0,0,null,null,2,null,null,null,null,null,null,null)),(t()(),i.hb(16777216,null,null,1,null,et)),i.pb(2,540672,null,0,C.s,[i.P],{ngTemplateOutlet:[0,"ngTemplateOutlet"]},null),(t()(),i.hb(0,null,null,0))],function(t,e){t(e,2,0,i.Ab(e.parent,43))},null)}function it(t){return i.Kb(0,[(t()(),i.qb(0,0,null,null,0,null,null,null,null,null,null,null))],null,null)}function lt(t){return i.Kb(0,[(t()(),i.qb(0,0,null,null,2,null,null,null,null,null,null,null)),(t()(),i.hb(16777216,null,null,1,null,it)),i.pb(2,540672,null,0,C.s,[i.P],{ngTemplateOutlet:[0,"ngTemplateOutlet"]},null),(t()(),i.hb(0,null,null,0))],function(t,e){t(e,2,0,i.Ab(e.parent,45))},null)}function ot(t){return i.Kb(0,[(t()(),i.qb(0,0,null,null,0,null,null,null,null,null,null,null))],null,null)}function st(t){return i.Kb(0,[(t()(),i.qb(0,0,null,null,2,null,null,null,null,null,null,null)),(t()(),i.hb(16777216,null,null,1,null,ot)),i.pb(2,540672,null,0,C.s,[i.P],{ngTemplateOutlet:[0,"ngTemplateOutlet"]},null),(t()(),i.hb(0,null,null,0))],function(t,e){t(e,2,0,i.Ab(e.parent,46))},null)}function rt(t){return i.Kb(0,[(t()(),i.qb(0,0,null,null,0,null,null,null,null,null,null,null))],null,null)}function at(t){return i.Kb(0,[(t()(),i.qb(0,0,null,null,2,null,null,null,null,null,null,null)),(t()(),i.hb(16777216,null,null,1,null,rt)),i.pb(2,540672,null,0,C.s,[i.P],{ngTemplateOutlet:[0,"ngTemplateOutlet"]},null),(t()(),i.hb(0,null,null,0))],function(t,e){t(e,2,0,i.Ab(e.parent,48))},null)}function ht(t){return i.Kb(0,[(t()(),i.qb(0,0,null,null,0,null,null,null,null,null,null,null))],null,null)}function ut(t){return i.Kb(0,[(t()(),i.qb(0,0,null,null,2,null,null,null,null,null,null,null)),(t()(),i.hb(16777216,null,null,1,null,ht)),i.pb(2,540672,null,0,C.s,[i.P],{ngTemplateOutlet:[0,"ngTemplateOutlet"]},null),(t()(),i.hb(0,null,null,0))],function(t,e){t(e,2,0,i.Ab(e.parent,47))},null)}function dt(t){return i.Kb(0,[(t()(),i.qb(0,0,null,null,3,"div",[["class","color-pallet"]],[[4,"text-align",null]],null,null,null,null)),(t()(),i.qb(1,0,null,null,0,"i",[["class","elm-checked-2"]],[[4,"color",null]],null,null,null,null)),(t()(),i.qb(2,0,null,null,1,"label",[],null,null,null,null,null)),(t()(),i.Ib(3,null,["",""]))],null,function(t,e){t(e,0,0,"center"),t(e,1,0,e.context.item.value),t(e,3,0,e.context.item.label)})}function ct(t){return i.Kb(0,[(t()(),i.qb(0,0,null,null,3,"div",[["class","color-pallet"]],[[4,"text-align",null]],null,null,null,null)),(t()(),i.qb(1,0,null,null,0,"i",[["class","elm-unchecked-radio-button"]],[[4,"color",null]],null,null,null,null)),(t()(),i.qb(2,0,null,null,1,"label",[],null,null,null,null,null)),(t()(),i.Ib(3,null,["",""]))],null,function(t,e){t(e,0,0,"center"),t(e,1,0,e.context.item.value),t(e,3,0,e.context.item.label)})}function pt(t){return i.Kb(0,[(t()(),i.qb(0,0,null,null,22,"ng-select",[["bindValue","reference"],["class","ng-select"],["name","icon"],["placeholder","Color"],["role","listbox"]],[[2,"ng-select-single",null],[2,"ng-select-typeahead",null],[2,"ng-select-multiple",null],[2,"ng-select-taggable",null],[2,"ng-select-searchable",null],[2,"ng-select-clearable",null],[2,"ng-select-opened",null],[2,"ng-select-disabled",null],[2,"ng-select-filtered",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"keydown"]],function(t,e,n){var l=!0;return"keydown"===e&&(l=!1!==i.Ab(t,2).handleKeyDown(n)&&l),"ngModelChange"===e&&(l=!1!==(t.parent.context.$implicit.action.change_to=n)&&l),l},f.c,f.a)),i.Fb(4608,null,v.f,v.f,[]),i.pb(2,4964352,null,12,v.a,[[8,null],[8,null],[8,null],v.b,v.d,i.k,i.h,v.l],{bindValue:[0,"bindValue"],placeholder:[1,"placeholder"],searchable:[2,"searchable"],clearable:[3,"clearable"],items:[4,"items"]},null),i.Gb(335544320,63,{optionTemplate:0}),i.Gb(335544320,64,{optgroupTemplate:0}),i.Gb(335544320,65,{labelTemplate:0}),i.Gb(335544320,66,{multiLabelTemplate:0}),i.Gb(335544320,67,{headerTemplate:0}),i.Gb(335544320,68,{footerTemplate:0}),i.Gb(335544320,69,{notFoundTemplate:0}),i.Gb(335544320,70,{typeToSearchTemplate:0}),i.Gb(335544320,71,{loadingTextTemplate:0}),i.Gb(335544320,72,{tagTemplate:0}),i.Gb(335544320,73,{loadingSpinnerTemplate:0}),i.Gb(603979776,74,{ngOptions:1}),i.Fb(1024,null,b.o,function(t){return[t]},[v.a]),i.pb(16,671744,null,0,b.t,[[8,null],[8,null],[8,null],[6,b.o]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),i.Fb(2048,null,b.p,null,[b.t]),i.pb(18,16384,null,0,b.q,[[4,b.p]],null,null),(t()(),i.hb(0,[[65,2]],null,1,null,dt)),i.pb(20,16384,null,0,v.i,[i.M],null,null),(t()(),i.hb(0,[[63,2]],null,1,null,ct)),i.pb(22,16384,null,0,v.g,[i.M],null,null),(t()(),i.qb(23,0,null,null,2,"div",[["class","color-hex"]],null,null,null,null,null)),(t()(),i.qb(24,0,null,null,1,"span",[],null,null,null,null,null)),(t()(),i.Ib(25,null,["",""]))],function(t,e){t(e,2,0,"reference","Color",!1,!1,e.component.scadaColors),t(e,16,0,"icon",e.parent.context.$implicit.action.change_to)},function(t,e){var n=e.component;t(e,0,1,[!i.Ab(e,2).multiple,i.Ab(e,2).typeahead,i.Ab(e,2).multiple,i.Ab(e,2).addTag,i.Ab(e,2).searchable,i.Ab(e,2).clearable,i.Ab(e,2).isOpen,i.Ab(e,2).disabled,i.Ab(e,2).filtered,i.Ab(e,18).ngClassUntouched,i.Ab(e,18).ngClassTouched,i.Ab(e,18).ngClassPristine,i.Ab(e,18).ngClassDirty,i.Ab(e,18).ngClassValid,i.Ab(e,18).ngClassInvalid,i.Ab(e,18).ngClassPending]),t(e,25,0,n.scadaColorsMeta[e.parent.context.$implicit.action.change_to])})}function mt(t){return i.Kb(0,[(t()(),i.qb(0,0,null,null,24,"ng-select",[["class","ng-select"],["role","listbox"]],[[2,"ng-select-single",null],[2,"ng-select-typeahead",null],[2,"ng-select-multiple",null],[2,"ng-select-taggable",null],[2,"ng-select-searchable",null],[2,"ng-select-clearable",null],[2,"ng-select-opened",null],[2,"ng-select-disabled",null],[2,"ng-select-filtered",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"keydown"]],function(t,e,n){var l=!0;return"keydown"===e&&(l=!1!==i.Ab(t,2).handleKeyDown(n)&&l),"ngModelChange"===e&&(l=!1!==(t.parent.context.$implicit.action.change_to=n)&&l),l},f.c,f.a)),i.Fb(4608,null,v.f,v.f,[]),i.pb(2,4964352,null,12,v.a,[[8,null],[8,null],[8,null],v.b,v.d,i.k,i.h,v.l],{searchable:[0,"searchable"],clearable:[1,"clearable"]},null),i.Gb(335544320,75,{optionTemplate:0}),i.Gb(335544320,76,{optgroupTemplate:0}),i.Gb(335544320,77,{labelTemplate:0}),i.Gb(335544320,78,{multiLabelTemplate:0}),i.Gb(335544320,79,{headerTemplate:0}),i.Gb(335544320,80,{footerTemplate:0}),i.Gb(335544320,81,{notFoundTemplate:0}),i.Gb(335544320,82,{typeToSearchTemplate:0}),i.Gb(335544320,83,{loadingTextTemplate:0}),i.Gb(335544320,84,{tagTemplate:0}),i.Gb(335544320,85,{loadingSpinnerTemplate:0}),i.Gb(603979776,86,{ngOptions:1}),i.Fb(1024,null,b.o,function(t){return[t]},[v.a]),i.pb(16,671744,null,0,b.t,[[8,null],[8,null],[8,null],[6,b.o]],{model:[0,"model"]},{update:"ngModelChange"}),i.Fb(2048,null,b.p,null,[b.t]),i.pb(18,16384,null,0,b.q,[[4,b.p]],null,null),(t()(),i.qb(19,0,null,null,2,"ng-option",[["selected",""],["value","block"]],null,null,null,f.d,f.b)),i.pb(20,573440,[[86,4]],0,v.k,[i.k],{value:[0,"value"]},null),(t()(),i.Ib(-1,0,["Show"])),(t()(),i.qb(22,0,null,null,2,"ng-option",[["value","none"]],null,null,null,f.d,f.b)),i.pb(23,573440,[[86,4]],0,v.k,[i.k],{value:[0,"value"]},null),(t()(),i.Ib(-1,0,["Hide"]))],function(t,e){t(e,2,0,!1,!1),t(e,16,0,e.parent.context.$implicit.action.change_to),t(e,20,0,"block"),t(e,23,0,"none")},function(t,e){t(e,0,1,[!i.Ab(e,2).multiple,i.Ab(e,2).typeahead,i.Ab(e,2).multiple,i.Ab(e,2).addTag,i.Ab(e,2).searchable,i.Ab(e,2).clearable,i.Ab(e,2).isOpen,i.Ab(e,2).disabled,i.Ab(e,2).filtered,i.Ab(e,18).ngClassUntouched,i.Ab(e,18).ngClassTouched,i.Ab(e,18).ngClassPristine,i.Ab(e,18).ngClassDirty,i.Ab(e,18).ngClassValid,i.Ab(e,18).ngClassInvalid,i.Ab(e,18).ngClassPending])})}function gt(t){return i.Kb(0,[(t()(),i.qb(0,0,null,null,7,"div",[["class","form-group"]],null,null,null,null,null)),(t()(),i.qb(1,0,null,null,6,"input",[["class","form-control"],["placeholder","Enter Value"],["type","number"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"]],function(t,e,n){var l=!0;return"input"===e&&(l=!1!==i.Ab(t,2)._handleInput(n.target.value)&&l),"blur"===e&&(l=!1!==i.Ab(t,2).onTouched()&&l),"compositionstart"===e&&(l=!1!==i.Ab(t,2)._compositionStart()&&l),"compositionend"===e&&(l=!1!==i.Ab(t,2)._compositionEnd(n.target.value)&&l),"change"===e&&(l=!1!==i.Ab(t,3).onChange(n.target.value)&&l),"input"===e&&(l=!1!==i.Ab(t,3).onChange(n.target.value)&&l),"blur"===e&&(l=!1!==i.Ab(t,3).onTouched()&&l),"ngModelChange"===e&&(l=!1!==(t.parent.context.$implicit.action.change_to=n)&&l),l},null,null)),i.pb(2,16384,null,0,b.e,[i.E,i.k,[2,b.a]],null,null),i.pb(3,16384,null,0,b.C,[i.E,i.k],null,null),i.Fb(1024,null,b.o,function(t,e){return[t,e]},[b.e,b.C]),i.pb(5,671744,null,0,b.t,[[8,null],[8,null],[8,null],[6,b.o]],{model:[0,"model"]},{update:"ngModelChange"}),i.Fb(2048,null,b.p,null,[b.t]),i.pb(7,16384,null,0,b.q,[[4,b.p]],null,null)],function(t,e){t(e,5,0,e.parent.context.$implicit.action.change_to)},function(t,e){t(e,1,0,i.Ab(e,7).ngClassUntouched,i.Ab(e,7).ngClassTouched,i.Ab(e,7).ngClassPristine,i.Ab(e,7).ngClassDirty,i.Ab(e,7).ngClassValid,i.Ab(e,7).ngClassInvalid,i.Ab(e,7).ngClassPending)})}function xt(t){return i.Kb(0,[(t()(),i.qb(0,0,null,null,7,"div",[["class","form-group"]],null,null,null,null,null)),(t()(),i.qb(1,0,null,null,6,"input",[["class","form-control"],["placeholder","Enter Text"],["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"change"],[null,"keydown.enter"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(t,e,n){var l=!0;return"change"===e&&(l=!1!==i.Ab(t,2).transformString(n)&&l),"keydown.enter"===e&&(l=!1!==i.Ab(t,2).transformString(n)&&l),"input"===e&&(l=!1!==i.Ab(t,3)._handleInput(n.target.value)&&l),"blur"===e&&(l=!1!==i.Ab(t,3).onTouched()&&l),"compositionstart"===e&&(l=!1!==i.Ab(t,3)._compositionStart()&&l),"compositionend"===e&&(l=!1!==i.Ab(t,3)._compositionEnd(n.target.value)&&l),"ngModelChange"===e&&(l=!1!==(t.parent.context.$implicit.action.change_to=n)&&l),l},null,null)),i.pb(2,16384,null,0,E.a,[i.E,i.k],null,{updateModel:"ngModelChange"}),i.pb(3,16384,null,0,b.e,[i.E,i.k,[2,b.a]],null,null),i.Fb(1024,null,b.o,function(t){return[t]},[b.e]),i.pb(5,671744,null,0,b.t,[[8,null],[8,null],[8,null],[6,b.o]],{model:[0,"model"]},{update:"ngModelChange"}),i.Fb(2048,null,b.p,null,[b.t]),i.pb(7,16384,null,0,b.q,[[4,b.p]],null,null)],function(t,e){t(e,5,0,e.parent.context.$implicit.action.change_to)},function(t,e){t(e,1,0,i.Ab(e,7).ngClassUntouched,i.Ab(e,7).ngClassTouched,i.Ab(e,7).ngClassPristine,i.Ab(e,7).ngClassDirty,i.Ab(e,7).ngClassValid,i.Ab(e,7).ngClassInvalid,i.Ab(e,7).ngClassPending)})}function yt(t){return i.Kb(0,[(t()(),i.qb(0,0,null,null,3,"div",[["class","color-pallet"]],[[4,"text-align",null]],null,null,null,null)),(t()(),i.qb(1,0,null,null,0,"img",[["height","30"],["width","30"]],[[8,"src",4],[8,"alt",0]],null,null,null,null)),(t()(),i.qb(2,0,null,null,1,"label",[],null,null,null,null,null)),(t()(),i.Ib(3,null,["",""]))],null,function(t,e){t(e,0,0,"center"),t(e,1,0,e.context.item.image,i.sb(1,"",e.context.item.name,"")),t(e,3,0,e.context.item.label)})}function ft(t){return i.Kb(0,[(t()(),i.qb(0,0,null,null,3,"div",[["class","color-pallet"]],[[4,"text-align",null]],null,null,null,null)),(t()(),i.qb(1,0,null,null,0,"img",[["height","30"],["width","30"]],[[8,"src",4],[8,"alt",0]],null,null,null,null)),(t()(),i.qb(2,0,null,null,1,"label",[],null,null,null,null,null)),(t()(),i.Ib(3,null,["",""]))],null,function(t,e){t(e,0,0,"center"),t(e,1,0,e.context.item.image,i.sb(1,"",e.context.item.name,"")),t(e,3,0,e.context.item.label)})}function vt(t){return i.Kb(0,[(t()(),i.qb(0,0,null,null,22,"ng-select",[["bindValue","image"],["class","ng-select"],["name","icon"],["placeholder","Select image.."],["role","listbox"]],[[2,"ng-select-single",null],[2,"ng-select-typeahead",null],[2,"ng-select-multiple",null],[2,"ng-select-taggable",null],[2,"ng-select-searchable",null],[2,"ng-select-clearable",null],[2,"ng-select-opened",null],[2,"ng-select-disabled",null],[2,"ng-select-filtered",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"keydown"]],function(t,e,n){var l=!0;return"keydown"===e&&(l=!1!==i.Ab(t,2).handleKeyDown(n)&&l),"ngModelChange"===e&&(l=!1!==(t.parent.context.$implicit.action.change_to=n)&&l),l},f.c,f.a)),i.Fb(4608,null,v.f,v.f,[]),i.pb(2,4964352,null,12,v.a,[[8,null],[8,null],[8,null],v.b,v.d,i.k,i.h,v.l],{bindValue:[0,"bindValue"],placeholder:[1,"placeholder"],virtualScroll:[2,"virtualScroll"],searchable:[3,"searchable"],clearable:[4,"clearable"],items:[5,"items"]},null),i.Gb(335544320,87,{optionTemplate:0}),i.Gb(335544320,88,{optgroupTemplate:0}),i.Gb(335544320,89,{labelTemplate:0}),i.Gb(335544320,90,{multiLabelTemplate:0}),i.Gb(335544320,91,{headerTemplate:0}),i.Gb(335544320,92,{footerTemplate:0}),i.Gb(335544320,93,{notFoundTemplate:0}),i.Gb(335544320,94,{typeToSearchTemplate:0}),i.Gb(335544320,95,{loadingTextTemplate:0}),i.Gb(335544320,96,{tagTemplate:0}),i.Gb(335544320,97,{loadingSpinnerTemplate:0}),i.Gb(603979776,98,{ngOptions:1}),i.Fb(1024,null,b.o,function(t){return[t]},[v.a]),i.pb(16,671744,null,0,b.t,[[8,null],[8,null],[8,null],[6,b.o]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),i.Fb(2048,null,b.p,null,[b.t]),i.pb(18,16384,null,0,b.q,[[4,b.p]],null,null),(t()(),i.hb(0,[[89,2]],null,1,null,yt)),i.pb(20,16384,null,0,v.i,[i.M],null,null),(t()(),i.hb(0,[[87,2]],null,1,null,ft)),i.pb(22,16384,null,0,v.g,[i.M],null,null)],function(t,e){t(e,2,0,"image","Select image..",!0,!1,!1,e.component.imagePickerImages),t(e,16,0,"icon",e.parent.context.$implicit.action.change_to)},function(t,e){t(e,0,1,[!i.Ab(e,2).multiple,i.Ab(e,2).typeahead,i.Ab(e,2).multiple,i.Ab(e,2).addTag,i.Ab(e,2).searchable,i.Ab(e,2).clearable,i.Ab(e,2).isOpen,i.Ab(e,2).disabled,i.Ab(e,2).filtered,i.Ab(e,18).ngClassUntouched,i.Ab(e,18).ngClassTouched,i.Ab(e,18).ngClassPristine,i.Ab(e,18).ngClassDirty,i.Ab(e,18).ngClassValid,i.Ab(e,18).ngClassInvalid,i.Ab(e,18).ngClassPending])})}function bt(t){return i.Kb(0,[(t()(),i.qb(0,0,null,null,16,"div",[["class","row h-1p6rem"]],null,null,null,null,null)),(t()(),i.qb(1,0,null,null,7,"div",[["class","col-lg-6 col-md-6 col-sm-6 p-0"]],null,null,null,null,null)),(t()(),i.qb(2,0,null,null,6,"input",[["class","form-control h-1p6rem"],["placeholder","min"],["type","number"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"]],function(t,e,n){var l=!0;return"input"===e&&(l=!1!==i.Ab(t,3)._handleInput(n.target.value)&&l),"blur"===e&&(l=!1!==i.Ab(t,3).onTouched()&&l),"compositionstart"===e&&(l=!1!==i.Ab(t,3)._compositionStart()&&l),"compositionend"===e&&(l=!1!==i.Ab(t,3)._compositionEnd(n.target.value)&&l),"change"===e&&(l=!1!==i.Ab(t,4).onChange(n.target.value)&&l),"input"===e&&(l=!1!==i.Ab(t,4).onChange(n.target.value)&&l),"blur"===e&&(l=!1!==i.Ab(t,4).onTouched()&&l),"ngModelChange"===e&&(l=!1!==(t.parent.context.$implicit.action.min=n)&&l),l},null,null)),i.pb(3,16384,null,0,b.e,[i.E,i.k,[2,b.a]],null,null),i.pb(4,16384,null,0,b.C,[i.E,i.k],null,null),i.Fb(1024,null,b.o,function(t,e){return[t,e]},[b.e,b.C]),i.pb(6,671744,null,0,b.t,[[8,null],[8,null],[8,null],[6,b.o]],{model:[0,"model"]},{update:"ngModelChange"}),i.Fb(2048,null,b.p,null,[b.t]),i.pb(8,16384,null,0,b.q,[[4,b.p]],null,null),(t()(),i.qb(9,0,null,null,7,"div",[["class","col-lg-6 col-md-6 col-sm-6 p-0"]],null,null,null,null,null)),(t()(),i.qb(10,0,null,null,6,"input",[["class","form-control h-1p6rem"],["placeholder","max"],["type","number"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"]],function(t,e,n){var l=!0;return"input"===e&&(l=!1!==i.Ab(t,11)._handleInput(n.target.value)&&l),"blur"===e&&(l=!1!==i.Ab(t,11).onTouched()&&l),"compositionstart"===e&&(l=!1!==i.Ab(t,11)._compositionStart()&&l),"compositionend"===e&&(l=!1!==i.Ab(t,11)._compositionEnd(n.target.value)&&l),"change"===e&&(l=!1!==i.Ab(t,12).onChange(n.target.value)&&l),"input"===e&&(l=!1!==i.Ab(t,12).onChange(n.target.value)&&l),"blur"===e&&(l=!1!==i.Ab(t,12).onTouched()&&l),"ngModelChange"===e&&(l=!1!==(t.parent.context.$implicit.action.max=n)&&l),l},null,null)),i.pb(11,16384,null,0,b.e,[i.E,i.k,[2,b.a]],null,null),i.pb(12,16384,null,0,b.C,[i.E,i.k],null,null),i.Fb(1024,null,b.o,function(t,e){return[t,e]},[b.e,b.C]),i.pb(14,671744,null,0,b.t,[[8,null],[8,null],[8,null],[6,b.o]],{model:[0,"model"]},{update:"ngModelChange"}),i.Fb(2048,null,b.p,null,[b.t]),i.pb(16,16384,null,0,b.q,[[4,b.p]],null,null),(t()(),i.qb(17,0,null,null,31,"div",[["class","row"]],null,null,null,null,null)),(t()(),i.qb(18,0,null,null,30,"ng-select",[["class","form-control p-0 ng-select"],["placeholder","Select direction.."],["role","listbox"]],[[2,"ng-select-single",null],[2,"ng-select-typeahead",null],[2,"ng-select-multiple",null],[2,"ng-select-taggable",null],[2,"ng-select-searchable",null],[2,"ng-select-clearable",null],[2,"ng-select-opened",null],[2,"ng-select-disabled",null],[2,"ng-select-filtered",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"keydown"]],function(t,e,n){var l=!0;return"keydown"===e&&(l=!1!==i.Ab(t,20).handleKeyDown(n)&&l),"ngModelChange"===e&&(l=!1!==(t.parent.context.$implicit.action.direction=n)&&l),l},f.c,f.a)),i.Fb(4608,null,v.f,v.f,[]),i.pb(20,4964352,null,12,v.a,[[8,"form-control p-0"],[8,null],[8,null],v.b,v.d,i.k,i.h,v.l],{placeholder:[0,"placeholder"],searchable:[1,"searchable"],clearable:[2,"clearable"]},null),i.Gb(335544320,99,{optionTemplate:0}),i.Gb(335544320,100,{optgroupTemplate:0}),i.Gb(335544320,101,{labelTemplate:0}),i.Gb(335544320,102,{multiLabelTemplate:0}),i.Gb(335544320,103,{headerTemplate:0}),i.Gb(335544320,104,{footerTemplate:0}),i.Gb(335544320,105,{notFoundTemplate:0}),i.Gb(335544320,106,{typeToSearchTemplate:0}),i.Gb(335544320,107,{loadingTextTemplate:0}),i.Gb(335544320,108,{tagTemplate:0}),i.Gb(335544320,109,{loadingSpinnerTemplate:0}),i.Gb(603979776,110,{ngOptions:1}),i.Fb(1024,null,b.o,function(t){return[t]},[v.a]),i.pb(34,671744,null,0,b.t,[[8,null],[8,null],[8,null],[6,b.o]],{model:[0,"model"]},{update:"ngModelChange"}),i.Fb(2048,null,b.p,null,[b.t]),i.pb(36,16384,null,0,b.q,[[4,b.p]],null,null),(t()(),i.qb(37,0,null,null,2,"ng-option",[["value","south"]],null,null,null,f.d,f.b)),i.pb(38,573440,[[110,4]],0,v.k,[i.k],{value:[0,"value"]},null),(t()(),i.Ib(-1,0,["Top to Bottom"])),(t()(),i.qb(40,0,null,null,2,"ng-option",[["value","north"]],null,null,null,f.d,f.b)),i.pb(41,573440,[[110,4]],0,v.k,[i.k],{value:[0,"value"]},null),(t()(),i.Ib(-1,0,["Bottom to Top"])),(t()(),i.qb(43,0,null,null,2,"ng-option",[["value","east"]],null,null,null,f.d,f.b)),i.pb(44,573440,[[110,4]],0,v.k,[i.k],{value:[0,"value"]},null),(t()(),i.Ib(-1,0,["Left to Right"])),(t()(),i.qb(46,0,null,null,2,"ng-option",[["value","west"]],null,null,null,f.d,f.b)),i.pb(47,573440,[[110,4]],0,v.k,[i.k],{value:[0,"value"]},null),(t()(),i.Ib(-1,0,["Right to Left"]))],function(t,e){t(e,6,0,e.parent.context.$implicit.action.min),t(e,14,0,e.parent.context.$implicit.action.max),t(e,20,0,"Select direction..",!1,!1),t(e,34,0,e.parent.context.$implicit.action.direction),t(e,38,0,"south"),t(e,41,0,"north"),t(e,44,0,"east"),t(e,47,0,"west")},function(t,e){t(e,2,0,i.Ab(e,8).ngClassUntouched,i.Ab(e,8).ngClassTouched,i.Ab(e,8).ngClassPristine,i.Ab(e,8).ngClassDirty,i.Ab(e,8).ngClassValid,i.Ab(e,8).ngClassInvalid,i.Ab(e,8).ngClassPending),t(e,10,0,i.Ab(e,16).ngClassUntouched,i.Ab(e,16).ngClassTouched,i.Ab(e,16).ngClassPristine,i.Ab(e,16).ngClassDirty,i.Ab(e,16).ngClassValid,i.Ab(e,16).ngClassInvalid,i.Ab(e,16).ngClassPending),t(e,18,1,[!i.Ab(e,20).multiple,i.Ab(e,20).typeahead,i.Ab(e,20).multiple,i.Ab(e,20).addTag,i.Ab(e,20).searchable,i.Ab(e,20).clearable,i.Ab(e,20).isOpen,i.Ab(e,20).disabled,i.Ab(e,20).filtered,i.Ab(e,36).ngClassUntouched,i.Ab(e,36).ngClassTouched,i.Ab(e,36).ngClassPristine,i.Ab(e,36).ngClassDirty,i.Ab(e,36).ngClassValid,i.Ab(e,36).ngClassInvalid,i.Ab(e,36).ngClassPending])})}function Ct(t){return i.Kb(0,[(t()(),i.qb(0,0,null,null,0,"i",[["class","fa fa-sort color-ac not-allowed-cursor no-hover"],["title","Add more than one row for sorting table"]],null,null,null,null,null))],null,null)}function Et(t){return i.Kb(0,[(t()(),i.qb(0,0,null,null,0,"i",[["class","elm-slide-up color-ac"],["title","Move Up"]],null,[[null,"click"]],function(t,e,n){var i=!0;return"click"===e&&(i=!1!==t.component.moveItems(t.parent.context.index,t.parent.context.index-1)&&i),i},null,null))],null,null)}function St(t){return i.Kb(0,[(t()(),i.qb(0,0,null,null,0,"i",[["class","elm-down-button color-ac"],["title","Move Down"]],null,[[null,"click"]],function(t,e,n){var i=!0;return"click"===e&&(i=!1!==t.component.moveItems(t.parent.context.index,t.parent.context.index+1)&&i),i},null,null))],null,null)}function wt(t){return i.Kb(0,[(t()(),i.qb(0,0,null,null,58,"tr",[],null,null,null,null,null)),(t()(),i.qb(1,0,null,null,2,"td",[],null,null,null,null,null)),(t()(),i.hb(16777216,null,null,1,null,G)),i.pb(3,16384,null,0,C.l,[i.P,i.M],{ngIf:[0,"ngIf"]},null),(t()(),i.qb(4,0,null,null,8,"td",[],null,null,null,null,null)),(t()(),i.qb(5,0,null,null,7,"div",[["class","form-group"]],null,null,null,null,null)),(t()(),i.qb(6,0,null,null,6,"input",[["class","form-control"],["placeholder","Enter compare value"],["type","number"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"]],function(t,e,n){var l=!0;return"input"===e&&(l=!1!==i.Ab(t,7)._handleInput(n.target.value)&&l),"blur"===e&&(l=!1!==i.Ab(t,7).onTouched()&&l),"compositionstart"===e&&(l=!1!==i.Ab(t,7)._compositionStart()&&l),"compositionend"===e&&(l=!1!==i.Ab(t,7)._compositionEnd(n.target.value)&&l),"change"===e&&(l=!1!==i.Ab(t,8).onChange(n.target.value)&&l),"input"===e&&(l=!1!==i.Ab(t,8).onChange(n.target.value)&&l),"blur"===e&&(l=!1!==i.Ab(t,8).onTouched()&&l),"ngModelChange"===e&&(l=!1!==(t.context.$implicit.value=n)&&l),l},null,null)),i.pb(7,16384,null,0,b.e,[i.E,i.k,[2,b.a]],null,null),i.pb(8,16384,null,0,b.C,[i.E,i.k],null,null),i.Fb(1024,null,b.o,function(t,e){return[t,e]},[b.e,b.C]),i.pb(10,671744,null,0,b.t,[[8,null],[8,null],[8,null],[6,b.o]],{isDisabled:[0,"isDisabled"],model:[1,"model"]},{update:"ngModelChange"}),i.Fb(2048,null,b.p,null,[b.t]),i.pb(12,16384,null,0,b.q,[[4,b.p]],null,null),(t()(),i.qb(13,0,null,null,2,"td",[],null,null,null,null,null)),(t()(),i.hb(16777216,null,null,1,null,F)),i.pb(15,16384,null,0,C.l,[i.P,i.M],{ngIf:[0,"ngIf"]},null),(t()(),i.qb(16,0,null,null,32,"td",[],null,null,null,null,null)),(t()(),i.qb(17,0,null,null,25,"div",[],null,null,null,null,null)),i.pb(18,16384,null,0,C.p,[],{ngSwitch:[0,"ngSwitch"]},null),(t()(),i.hb(16777216,null,null,1,null,B)),i.pb(20,278528,null,0,C.q,[i.P,i.M,C.p],{ngSwitchCase:[0,"ngSwitchCase"]},null),(t()(),i.hb(16777216,null,null,1,null,Y)),i.pb(22,278528,null,0,C.q,[i.P,i.M,C.p],{ngSwitchCase:[0,"ngSwitchCase"]},null),(t()(),i.hb(16777216,null,null,1,null,W)),i.pb(24,278528,null,0,C.q,[i.P,i.M,C.p],{ngSwitchCase:[0,"ngSwitchCase"]},null),(t()(),i.hb(16777216,null,null,1,null,X)),i.pb(26,278528,null,0,C.q,[i.P,i.M,C.p],{ngSwitchCase:[0,"ngSwitchCase"]},null),(t()(),i.hb(16777216,null,null,1,null,K)),i.pb(28,278528,null,0,C.q,[i.P,i.M,C.p],{ngSwitchCase:[0,"ngSwitchCase"]},null),(t()(),i.hb(16777216,null,null,1,null,Q)),i.pb(30,278528,null,0,C.q,[i.P,i.M,C.p],{ngSwitchCase:[0,"ngSwitchCase"]},null),(t()(),i.hb(16777216,null,null,1,null,tt)),i.pb(32,278528,null,0,C.q,[i.P,i.M,C.p],{ngSwitchCase:[0,"ngSwitchCase"]},null),(t()(),i.hb(16777216,null,null,1,null,nt)),i.pb(34,278528,null,0,C.q,[i.P,i.M,C.p],{ngSwitchCase:[0,"ngSwitchCase"]},null),(t()(),i.hb(16777216,null,null,1,null,lt)),i.pb(36,278528,null,0,C.q,[i.P,i.M,C.p],{ngSwitchCase:[0,"ngSwitchCase"]},null),(t()(),i.hb(16777216,null,null,1,null,st)),i.pb(38,278528,null,0,C.q,[i.P,i.M,C.p],{ngSwitchCase:[0,"ngSwitchCase"]},null),(t()(),i.hb(16777216,null,null,1,null,at)),i.pb(40,278528,null,0,C.q,[i.P,i.M,C.p],{ngSwitchCase:[0,"ngSwitchCase"]},null),(t()(),i.hb(16777216,null,null,1,null,ut)),i.pb(42,278528,null,0,C.q,[i.P,i.M,C.p],{ngSwitchCase:[0,"ngSwitchCase"]},null),(t()(),i.hb(0,[["colorPicker",2]],null,0,null,pt)),(t()(),i.hb(0,[["display",2]],null,0,null,mt)),(t()(),i.hb(0,[["number",2]],null,0,null,gt)),(t()(),i.hb(0,[["textField",2]],null,0,null,xt)),(t()(),i.hb(0,[["imagePicker",2]],null,0,null,vt)),(t()(),i.hb(0,[["progress",2]],null,0,null,bt)),(t()(),i.qb(49,0,null,null,1,"td",[["class","text-center"]],null,null,null,null,null)),(t()(),i.qb(50,0,null,null,0,"i",[["class","fa fa-trash trash-hov color-ac"]],null,[[null,"click"]],function(t,e,n){var i=!0;return"click"===e&&(i=!1!==t.component.deleteRow(t.context.index)&&i),i},null,null)),(t()(),i.qb(51,0,null,null,7,"td",[["class","text-center"]],null,null,null,null,null)),(t()(),i.qb(52,0,null,null,6,"span",[["class","up-down-container"]],null,null,null,null,null)),(t()(),i.hb(16777216,null,null,1,null,Ct)),i.pb(54,16384,null,0,C.l,[i.P,i.M],{ngIf:[0,"ngIf"]},null),(t()(),i.hb(16777216,null,null,1,null,Et)),i.pb(56,16384,null,0,C.l,[i.P,i.M],{ngIf:[0,"ngIf"]},null),(t()(),i.hb(16777216,null,null,1,null,St)),i.pb(58,16384,null,0,C.l,[i.P,i.M],{ngIf:[0,"ngIf"]},null)],function(t,e){var n=e.component;t(e,3,0,0!==n.operators.length),t(e,10,0,"progress"==e.context.$implicit.action.name,e.context.$implicit.value),t(e,15,0,n.actions),t(e,18,0,e.context.$implicit.action.name),t(e,20,0,"fillColor"),t(e,22,0,"strokeColor"),t(e,24,0,"imageBackground"),t(e,26,0,"labelBackgroundColor"),t(e,28,0,"display"),t(e,30,0,"fontColor"),t(e,32,0,"rotation"),t(e,34,0,"gradientColor"),t(e,36,0,"fontSize"),t(e,38,0,"text"),t(e,40,0,"progress"),t(e,42,0,"image"),t(e,54,0,1==n.conditions.length),t(e,56,0,0!=e.context.index),t(e,58,0,e.context.index<n.conditions.length-1)},function(t,e){t(e,6,0,i.Ab(e,12).ngClassUntouched,i.Ab(e,12).ngClassTouched,i.Ab(e,12).ngClassPristine,i.Ab(e,12).ngClassDirty,i.Ab(e,12).ngClassValid,i.Ab(e,12).ngClassInvalid,i.Ab(e,12).ngClassPending)})}function Tt(t){return i.Kb(0,[(t()(),i.qb(0,0,null,null,21,"table",[["class","table table-width"]],null,null,null,null,null)),(t()(),i.qb(1,0,null,null,17,"thead",[],null,null,null,null,null)),(t()(),i.qb(2,0,null,null,16,"tr",[],null,null,null,null,null)),(t()(),i.qb(3,0,null,null,1,"td",[],null,null,null,null,null)),(t()(),i.Ib(-1,null,["Compare"])),(t()(),i.qb(5,0,null,null,3,"td",[],null,null,null,null,null)),(t()(),i.Ib(-1,null,["Compare Value "])),(t()(),i.qb(7,0,null,null,1,"span",[["class","color-red"]],null,null,null,null,null)),(t()(),i.Ib(-1,null,["\xa0*"])),(t()(),i.qb(9,0,null,null,1,"td",[],null,null,null,null,null)),(t()(),i.Ib(-1,null,["Action"])),(t()(),i.qb(11,0,null,null,3,"td",[],null,null,null,null,null)),(t()(),i.Ib(-1,null,["Action Value"])),(t()(),i.qb(13,0,null,null,1,"span",[["class","color-red"]],null,null,null,null,null)),(t()(),i.Ib(-1,null,["\xa0*"])),(t()(),i.qb(15,0,null,null,1,"td",[],null,null,null,null,null)),(t()(),i.Ib(-1,null,["Delete"])),(t()(),i.qb(17,0,null,null,1,"td",[],null,null,null,null,null)),(t()(),i.Ib(-1,null,["Arrange"])),(t()(),i.qb(19,0,[[2,0],["tableBody",1]],null,2,"tbody",[],null,null,null,null,null)),(t()(),i.hb(16777216,null,null,1,null,wt)),i.pb(21,278528,null,0,C.k,[i.P,i.M,i.s],{ngForOf:[0,"ngForOf"]},null)],function(t,e){t(e,21,0,e.component.conditions)},null)}function At(t){return i.Kb(0,[(t()(),i.qb(0,0,null,null,3,null,null,null,null,null,null,null)),(t()(),i.qb(1,0,null,null,2,"button",[["class","btn btn-primary btn-sm"]],null,[[null,"click"]],function(t,e,n){var i=!0;return"click"===e&&(i=!1!==t.component.addConditions()&&i),i},null,null)),(t()(),i.qb(2,0,null,null,0,"i",[["class","fa fa-plus"]],null,null,null,null,null)),(t()(),i.Ib(-1,null,[" Add"]))],null,null)}function Mt(t){return i.Kb(0,[(t()(),i.qb(0,0,null,null,105,"div",[["class","container config-bg"]],null,null,null,null,null)),(t()(),i.qb(1,0,null,null,4,"div",[["aria-controls","generalTab"],["aria-expanded","true"],["class","accordian-header border-bottom"],["data-target","#generalTab"],["data-toggle","collapse"],["id","genTab"]],null,null,null,null,null)),(t()(),i.qb(2,0,null,null,3,"div",[["class","row"]],null,null,null,null,null)),(t()(),i.qb(3,0,null,null,2,"div",[["class","col-md-6 col-sm-6 col-lg-6"]],null,null,null,null,null)),(t()(),i.qb(4,0,null,null,1,"h6",[],null,null,null,null,null)),(t()(),i.Ib(-1,null,["General"])),(t()(),i.qb(6,0,null,null,99,"div",[["aria-labelledby","genTab"],["class","collapse show mt-3 mb-3"],["id","generalTab"]],null,null,null,null,null)),(t()(),i.qb(7,0,null,null,13,"div",[["class","row"]],null,null,null,null,null)),(t()(),i.qb(8,0,null,null,12,"div",[["class","col-md-4"]],null,null,null,null,null)),(t()(),i.qb(9,0,null,null,11,"div",[["class","form-group"]],null,null,null,null,null)),(t()(),i.qb(10,0,null,null,3,"label",[["for","element"]],null,null,null,null,null)),(t()(),i.Ib(-1,null,["Elements Name"])),(t()(),i.qb(12,0,null,null,1,"span",[["class","color-red"]],null,null,null,null,null)),(t()(),i.Ib(-1,null,["\xa0*"])),(t()(),i.qb(14,0,null,null,6,"input",[["autocomplete","off"],["class","form-control"],["id","element"],["name","element-name"],["placeholder","Enter elements name"],["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"change"],[null,"keydown.enter"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(t,e,n){var l=!0,o=t.component;return"change"===e&&(l=!1!==i.Ab(t,15).transformString(n)&&l),"keydown.enter"===e&&(l=!1!==i.Ab(t,15).transformString(n)&&l),"input"===e&&(l=!1!==i.Ab(t,16)._handleInput(n.target.value)&&l),"blur"===e&&(l=!1!==i.Ab(t,16).onTouched()&&l),"compositionstart"===e&&(l=!1!==i.Ab(t,16)._compositionStart()&&l),"compositionend"===e&&(l=!1!==i.Ab(t,16)._compositionEnd(n.target.value)&&l),"ngModelChange"===e&&(l=!1!==(o.elementsName=n)&&l),l},null,null)),i.pb(15,16384,null,0,E.a,[i.E,i.k],null,{updateModel:"ngModelChange"}),i.pb(16,16384,null,0,b.e,[i.E,i.k,[2,b.a]],null,null),i.Fb(1024,null,b.o,function(t){return[t]},[b.e]),i.pb(18,671744,null,0,b.t,[[8,null],[8,null],[8,null],[6,b.o]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),i.Fb(2048,null,b.p,null,[b.t]),i.pb(20,16384,null,0,b.q,[[4,b.p]],null,null),(t()(),i.qb(21,0,null,null,56,"div",[["class","row"]],null,null,null,null,null)),(t()(),i.qb(22,0,null,null,22,"div",[["class","col-md-4 col-sm-12 col-lg-4"]],null,null,null,null,null)),(t()(),i.qb(23,0,null,null,21,"div",[["class","form-group"]],null,null,null,null,null)),(t()(),i.qb(24,0,null,null,1,"label",[["for","assets"]],null,null,null,null,null)),(t()(),i.Ib(-1,null,["Asset"])),(t()(),i.qb(26,0,null,null,18,"ng-select",[["bindLabel","label"],["bindValue","value"],["class","ng-select"],["id","assets"],["loadingText","Loading assets.."],["placeholder","Select asset"],["role","listbox"]],[[2,"ng-select-single",null],[2,"ng-select-typeahead",null],[2,"ng-select-multiple",null],[2,"ng-select-taggable",null],[2,"ng-select-searchable",null],[2,"ng-select-clearable",null],[2,"ng-select-opened",null],[2,"ng-select-disabled",null],[2,"ng-select-filtered",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"keydown"]],function(t,e,n){var l=!0,o=t.component;return"keydown"===e&&(l=!1!==i.Ab(t,28).handleKeyDown(n)&&l),"ngModelChange"===e&&(l=!1!==(o._defaultDevice=n)&&l),l},f.c,f.a)),i.Fb(4608,null,v.f,v.f,[]),i.pb(28,4964352,null,12,v.a,[[8,null],[8,null],[8,null],v.b,v.d,i.k,i.h,v.l],{bindLabel:[0,"bindLabel"],bindValue:[1,"bindValue"],placeholder:[2,"placeholder"],loadingText:[3,"loadingText"],loading:[4,"loading"],virtualScroll:[5,"virtualScroll"],clearable:[6,"clearable"],items:[7,"items"]},null),i.Gb(335544320,3,{optionTemplate:0}),i.Gb(335544320,4,{optgroupTemplate:0}),i.Gb(335544320,5,{labelTemplate:0}),i.Gb(335544320,6,{multiLabelTemplate:0}),i.Gb(335544320,7,{headerTemplate:0}),i.Gb(335544320,8,{footerTemplate:0}),i.Gb(335544320,9,{notFoundTemplate:0}),i.Gb(335544320,10,{typeToSearchTemplate:0}),i.Gb(335544320,11,{loadingTextTemplate:0}),i.Gb(335544320,12,{tagTemplate:0}),i.Gb(335544320,13,{loadingSpinnerTemplate:0}),i.Gb(603979776,14,{ngOptions:1}),i.Fb(1024,null,b.o,function(t){return[t]},[v.a]),i.pb(42,671744,null,0,b.t,[[8,null],[8,null],[8,null],[6,b.o]],{model:[0,"model"]},{update:"ngModelChange"}),i.Fb(2048,null,b.p,null,[b.t]),i.pb(44,16384,null,0,b.q,[[4,b.p]],null,null),(t()(),i.qb(45,0,null,null,22,"div",[["class","col-md-4 col-sm-12 col-lg-4"]],null,null,null,null,null)),(t()(),i.qb(46,0,null,null,21,"div",[["class","form-group"]],null,null,null,null,null)),(t()(),i.qb(47,0,null,null,1,"label",[["for","tags"]],null,null,null,null,null)),(t()(),i.Ib(-1,null,["Tag"])),(t()(),i.qb(49,0,null,null,18,"ng-select",[["bindLabel","label"],["class","ng-select"],["id","tags"],["loadingText","Loading Tags.."],["placeholder","Select tags.."],["role","listbox"]],[[2,"ng-select-single",null],[2,"ng-select-typeahead",null],[2,"ng-select-multiple",null],[2,"ng-select-taggable",null],[2,"ng-select-searchable",null],[2,"ng-select-clearable",null],[2,"ng-select-opened",null],[2,"ng-select-disabled",null],[2,"ng-select-filtered",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"keydown"]],function(t,e,n){var l=!0,o=t.component;return"keydown"===e&&(l=!1!==i.Ab(t,51).handleKeyDown(n)&&l),"ngModelChange"===e&&(l=!1!==(o._defaultTag=n)&&l),"ngModelChange"===e&&(l=!1!==o.getUnits()&&l),l},f.c,f.a)),i.Fb(4608,null,v.f,v.f,[]),i.pb(51,4964352,null,12,v.a,[[8,null],[8,null],[8,null],v.b,v.d,i.k,i.h,v.l],{bindLabel:[0,"bindLabel"],placeholder:[1,"placeholder"],loadingText:[2,"loadingText"],loading:[3,"loading"],virtualScroll:[4,"virtualScroll"],clearable:[5,"clearable"],items:[6,"items"]},null),i.Gb(335544320,15,{optionTemplate:0}),i.Gb(335544320,16,{optgroupTemplate:0}),i.Gb(335544320,17,{labelTemplate:0}),i.Gb(335544320,18,{multiLabelTemplate:0}),i.Gb(335544320,19,{headerTemplate:0}),i.Gb(335544320,20,{footerTemplate:0}),i.Gb(335544320,21,{notFoundTemplate:0}),i.Gb(335544320,22,{typeToSearchTemplate:0}),i.Gb(335544320,23,{loadingTextTemplate:0}),i.Gb(335544320,24,{tagTemplate:0}),i.Gb(335544320,25,{loadingSpinnerTemplate:0}),i.Gb(603979776,26,{ngOptions:1}),i.Fb(1024,null,b.o,function(t){return[t]},[v.a]),i.pb(65,671744,null,0,b.t,[[8,null],[8,null],[8,null],[6,b.o]],{model:[0,"model"]},{update:"ngModelChange"}),i.Fb(2048,null,b.p,null,[b.t]),i.pb(67,16384,null,0,b.q,[[4,b.p]],null,null),(t()(),i.qb(68,0,null,null,9,"div",[["class","col-md-4 col-sm-12 col-lg-4"]],null,null,null,null,null)),(t()(),i.qb(69,0,null,null,8,"div",[["class","form-group"]],null,null,null,null,null)),(t()(),i.qb(70,0,null,null,1,"label",[["for","show-value"]],null,null,null,null,null)),(t()(),i.Ib(-1,null,["Show Value"])),(t()(),i.qb(72,0,null,null,5,"input",[["class","form-control"],["id","show-value"],["type","checkbox"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"click"],[null,"change"],[null,"blur"]],function(t,e,n){var l=!0,o=t.component;return"change"===e&&(l=!1!==i.Ab(t,73).onChange(n.target.checked)&&l),"blur"===e&&(l=!1!==i.Ab(t,73).onTouched()&&l),"ngModelChange"===e&&(l=!1!==(o.showValue=n)&&l),"click"===e&&(l=!1!==o.isShowUnitEnabled()&&l),l},null,null)),i.pb(73,16384,null,0,b.b,[i.E,i.k],null,null),i.Fb(1024,null,b.o,function(t){return[t]},[b.b]),i.pb(75,671744,null,0,b.t,[[8,null],[8,null],[8,null],[6,b.o]],{model:[0,"model"]},{update:"ngModelChange"}),i.Fb(2048,null,b.p,null,[b.t]),i.pb(77,16384,null,0,b.q,[[4,b.p]],null,null),(t()(),i.qb(78,0,null,null,27,"div",[["class","row"]],null,null,null,null,null)),(t()(),i.qb(79,0,null,null,10,"div",[["class","col-md-4 col-sm-12 col-lg-4"]],null,null,null,null,null)),(t()(),i.qb(80,0,null,null,9,"div",[["class","form-group"]],null,null,null,null,null)),(t()(),i.qb(81,0,null,null,1,"label",[["for","restrict"]],null,null,null,null,null)),(t()(),i.Ib(-1,null,["Restrict decimal to"])),(t()(),i.qb(83,0,null,null,6,"input",[["autocomplete","off"],["class","form-control"],["id","restrict"],["max","100"],["min","0"],["placeholder","Restrict decimal to"],["type","number"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"]],function(t,e,n){var l=!0,o=t.component;return"input"===e&&(l=!1!==i.Ab(t,84)._handleInput(n.target.value)&&l),"blur"===e&&(l=!1!==i.Ab(t,84).onTouched()&&l),"compositionstart"===e&&(l=!1!==i.Ab(t,84)._compositionStart()&&l),"compositionend"===e&&(l=!1!==i.Ab(t,84)._compositionEnd(n.target.value)&&l),"change"===e&&(l=!1!==i.Ab(t,85).onChange(n.target.value)&&l),"input"===e&&(l=!1!==i.Ab(t,85).onChange(n.target.value)&&l),"blur"===e&&(l=!1!==i.Ab(t,85).onTouched()&&l),"ngModelChange"===e&&(l=!1!==(o.restrictDecimal=n)&&l),l},null,null)),i.pb(84,16384,null,0,b.e,[i.E,i.k,[2,b.a]],null,null),i.pb(85,16384,null,0,b.C,[i.E,i.k],null,null),i.Fb(1024,null,b.o,function(t,e){return[t,e]},[b.e,b.C]),i.pb(87,671744,null,0,b.t,[[8,null],[8,null],[8,null],[6,b.o]],{model:[0,"model"]},{update:"ngModelChange"}),i.Fb(2048,null,b.p,null,[b.t]),i.pb(89,16384,null,0,b.q,[[4,b.p]],null,null),(t()(),i.qb(90,0,null,null,5,"div",[["class","col-md-4 col-sm-12 col-lg-4"]],null,null,null,null,null)),(t()(),i.qb(91,0,null,null,4,"div",[["class","form-group"]],null,null,null,null,null)),(t()(),i.qb(92,0,null,null,1,"label",[["for","units"]],null,null,null,null,null)),(t()(),i.Ib(-1,null,["Unit"])),(t()(),i.hb(16777216,null,null,1,null,k)),i.pb(95,16384,null,0,C.l,[i.P,i.M],{ngIf:[0,"ngIf"]},null),(t()(),i.qb(96,0,null,null,9,"div",[["class","col-md-4 col-sm-12 col-lg-4"]],null,null,null,null,null)),(t()(),i.qb(97,0,null,null,8,"div",[["class","form-group"]],null,null,null,null,null)),(t()(),i.qb(98,0,null,null,1,"label",[["for","show-unit"]],null,null,null,null,null)),(t()(),i.Ib(-1,null,["Show Unit"])),(t()(),i.qb(100,0,null,null,5,"input",[["class","form-control"],["id","show-unit"],["name","show-unit"],["type","checkbox"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"change"],[null,"blur"]],function(t,e,n){var l=!0,o=t.component;return"change"===e&&(l=!1!==i.Ab(t,101).onChange(n.target.checked)&&l),"blur"===e&&(l=!1!==i.Ab(t,101).onTouched()&&l),"ngModelChange"===e&&(l=!1!==(o.showUnits=n)&&l),l},null,null)),i.pb(101,16384,null,0,b.b,[i.E,i.k],null,null),i.Fb(1024,null,b.o,function(t){return[t]},[b.b]),i.pb(103,671744,null,0,b.t,[[8,null],[8,null],[8,null],[6,b.o]],{name:[0,"name"],isDisabled:[1,"isDisabled"],model:[2,"model"]},{update:"ngModelChange"}),i.Fb(2048,null,b.p,null,[b.t]),i.pb(105,16384,null,0,b.q,[[4,b.p]],null,null),(t()(),i.qb(106,0,null,null,9,"div",[["class","container config-bg mt-2"]],null,null,null,null,null)),(t()(),i.qb(107,0,null,null,2,"div",[["aria-controls","conditionsTab"],["aria-expanded","true"],["class","accordian-header border-bottom"],["data-target","#conditionsTab"],["data-toggle","collapse"],["id","condTab"]],null,null,null,null,null)),(t()(),i.qb(108,0,null,null,1,"h6",[],null,null,null,null,null)),(t()(),i.Ib(-1,null,["Conditions"])),(t()(),i.qb(110,0,null,null,5,"div",[["aria-labelledby","condTab"],["class","collapse show mt-3 mb-3"],["id","conditionsTab"]],null,null,null,null,null)),(t()(),i.hb(16777216,null,null,1,null,H)),i.pb(112,16384,null,0,C.l,[i.P,i.M],{ngIf:[0,"ngIf"],ngIfElse:[1,"ngIfElse"]},null),(t()(),i.hb(0,[["conditionsAvailable",2]],null,0,null,Tt)),(t()(),i.hb(16777216,null,null,1,null,At)),i.pb(115,16384,null,0,C.l,[i.P,i.M],{ngIf:[0,"ngIf"]},null)],function(t,e){var n=e.component;t(e,18,0,"element-name",n.elementsName),t(e,28,0,"label","value","Select asset","Loading assets..",n.isGetMetaLoading,!0,!1,n.devicesMeta),t(e,42,0,n._defaultDevice),t(e,51,0,"label","Select tags..","Loading Tags..",n.isGetMetaLoading,!0,!1,n.tagsMeta),t(e,65,0,n._defaultTag),t(e,75,0,n.showValue),t(e,87,0,n.restrictDecimal),t(e,95,0,0!==n.unitsMeta.length&&n._defaultTag&&n._defaultTag.hasOwnProperty("unit")),t(e,103,0,"show-unit",!n.isShowUnitsEnabled,n.showUnits),t(e,112,0,0==n.conditions.length,i.Ab(e,113)),t(e,115,0,0!==n.conditions.length)},function(t,e){t(e,14,0,i.Ab(e,20).ngClassUntouched,i.Ab(e,20).ngClassTouched,i.Ab(e,20).ngClassPristine,i.Ab(e,20).ngClassDirty,i.Ab(e,20).ngClassValid,i.Ab(e,20).ngClassInvalid,i.Ab(e,20).ngClassPending),t(e,26,1,[!i.Ab(e,28).multiple,i.Ab(e,28).typeahead,i.Ab(e,28).multiple,i.Ab(e,28).addTag,i.Ab(e,28).searchable,i.Ab(e,28).clearable,i.Ab(e,28).isOpen,i.Ab(e,28).disabled,i.Ab(e,28).filtered,i.Ab(e,44).ngClassUntouched,i.Ab(e,44).ngClassTouched,i.Ab(e,44).ngClassPristine,i.Ab(e,44).ngClassDirty,i.Ab(e,44).ngClassValid,i.Ab(e,44).ngClassInvalid,i.Ab(e,44).ngClassPending]),t(e,49,1,[!i.Ab(e,51).multiple,i.Ab(e,51).typeahead,i.Ab(e,51).multiple,i.Ab(e,51).addTag,i.Ab(e,51).searchable,i.Ab(e,51).clearable,i.Ab(e,51).isOpen,i.Ab(e,51).disabled,i.Ab(e,51).filtered,i.Ab(e,67).ngClassUntouched,i.Ab(e,67).ngClassTouched,i.Ab(e,67).ngClassPristine,i.Ab(e,67).ngClassDirty,i.Ab(e,67).ngClassValid,i.Ab(e,67).ngClassInvalid,i.Ab(e,67).ngClassPending]),t(e,72,0,i.Ab(e,77).ngClassUntouched,i.Ab(e,77).ngClassTouched,i.Ab(e,77).ngClassPristine,i.Ab(e,77).ngClassDirty,i.Ab(e,77).ngClassValid,i.Ab(e,77).ngClassInvalid,i.Ab(e,77).ngClassPending),t(e,83,0,i.Ab(e,89).ngClassUntouched,i.Ab(e,89).ngClassTouched,i.Ab(e,89).ngClassPristine,i.Ab(e,89).ngClassDirty,i.Ab(e,89).ngClassValid,i.Ab(e,89).ngClassInvalid,i.Ab(e,89).ngClassPending),t(e,100,0,i.Ab(e,105).ngClassUntouched,i.Ab(e,105).ngClassTouched,i.Ab(e,105).ngClassPristine,i.Ab(e,105).ngClassDirty,i.Ab(e,105).ngClassValid,i.Ab(e,105).ngClassInvalid,i.Ab(e,105).ngClassPending)})}function Lt(t){return i.Kb(0,[i.Gb(402653184,1,{closeModal:0}),i.Gb(671088640,2,{tableBody:0}),(t()(),i.qb(2,0,null,null,15,"div",[["class","modal-dialog modal-dialog-centered modal-xl h-90"],["role","document"]],null,null,null,null,null)),(t()(),i.qb(3,0,null,null,14,"div",[["class","modal-content h-100"]],null,null,null,null,null)),(t()(),i.qb(4,0,null,null,4,"div",[["class","modal-header"]],null,null,null,null,null)),(t()(),i.qb(5,0,null,null,1,"h6",[["class","modal-title text-muted"],["id","exampleModalLabel"]],null,null,null,null,null)),(t()(),i.Ib(6,null,["Live Data Configuration - ",""])),(t()(),i.qb(7,0,null,null,1,"button",[["aria-label","Close"],["class","close"],["data-dismiss","modal"],["type","button"]],null,null,null,null,null)),(t()(),i.qb(8,0,null,null,0,"i",[["class","elm-cancel"]],null,null,null,null,null)),(t()(),i.qb(9,0,null,null,3,"div",[["class","modal-body overflow-auto"]],null,null,null,null,null)),(t()(),i.hb(16777216,null,null,1,null,N)),i.pb(11,16384,null,0,C.l,[i.P,i.M],{ngIf:[0,"ngIf"],ngIfElse:[1,"ngIfElse"]},null),(t()(),i.hb(0,[["metaLoaded",2]],null,0,null,Mt)),(t()(),i.qb(13,0,null,null,4,"div",[["class","modal-footer"]],null,null,null,null,null)),(t()(),i.qb(14,0,null,null,1,"button",[["class","btn btn-primary btn-sm mr-3"],["type","button"]],null,[[null,"click"]],function(t,e,n){var i=!0;return"click"===e&&(i=!1!==t.component.saveCurrentSettings()&&i),i},null,null)),(t()(),i.Ib(-1,null,["Save"])),(t()(),i.qb(16,0,[[1,0],["closeModal",1]],null,1,"button",[["class","btn btn-secondary btn-sm mr-3"],["data-dismiss","modal"],["type","button"]],null,null,null,null,null)),(t()(),i.Ib(-1,null,["Close"]))],function(t,e){t(e,11,0,e.component.isGetMetaLoading,i.Ab(e,12))},function(t,e){t(e,6,0,e.component.currentState)})}var Pt=n("yv/X"),It=n("r5GR"),Rt=function(){function t(t,e,n,i,l){this._app=t,this._toaster=e,this._global=n,this._sidebar=i,this._graph=l,this.currentState="Create",this.devicesMeta=[],this.tagsMeta=[],this.isDevicesLoading=!1,this.isTagsLoading=!1,this.control_enabled=!0,this.actions=[],this.actionRaw={action_label:"",assets:[],tags:[],write_value:""},this.savingAssetControl=!1,this.multiselectSettings={primaryKey:"value",labelKey:"label",singleSelection:!1,text:"Select",selectAllText:"Select All",unSelectAllText:"Deselect All",enableCheckAll:!0,enableSearchFilter:!0,enableFilterSelectAll:!0,lazyLoading:!0,noDataLabel:"No items found",badgeShowLimit:1,filterSelectAllText:"Select Filtered",filterUnSelectAllText:"Unselect Filtered",maxHeight:220,searchAutofocus:!1,autoPosition:!0}}return t.prototype.ngOnInit=function(){},t.prototype.ngOnChanges=function(){if(this.isPopupOpened){this.currentState="Create",this.actions=[],this.elementsName="",this.actionID="",this.control_enabled=!0,this.getMetaData();var t=this._graph.getGraphObject();t&&t.hasOwnProperty("CELL")&&(this.currentCell=t.CELL,this.currentCell.hasOwnProperty("cellName")&&this.currentCell.cellName!=="el_"+this.currentCell.id&&(this.elementsName=this.currentCell.cellName),this.currentCell.hasOwnProperty("asset_control")?this.setDefaultValues(t.CELL):this.addRows())}},t.prototype.setDefaultValues=function(t){this.currentState="Edit",this.control_enabled=t.asset_control.isEnabled,this.actionID=t.asset_control.action_id,this.fetchSavedActionFromId()},t.prototype.fetchSavedActionFromId=function(){var t=this;this._app.editAssetControlData({asset_action_id:this.actionID,type:"scada"}).subscribe(function(e){e.hasOwnProperty("actions")&&0!==e.actions.length?t.actions=e.actions:t._toaster.toast("error","Error","Failed to retrieve action, Please try again later.",!0),t.isDevicesLoading=!1},function(e){t.isDevicesLoading=!1,t._toaster.toast("error","Error","Unable to reach server, Please try again later.",!0)})},t.prototype.getMetaData=function(){var t=this;this.isDevicesLoading=!0,this._app.getChartConfigMetaData({fetch_meta_data_by:["devices","tags"],cType:"modbus_write_widget",filter:[{site_id:this._global.getCurrentUserSiteId()},{user_id:this._global.getCurrentUserClientId()}]}).subscribe(function(e){"success"==e.status?(t.devicesMeta=e.data.devices,t.tagsMeta=e.data.tags):t._toaster.toast("error","Error","Failed to retrieve Assets and Tags, Please try again later.",!0),t.isDevicesLoading=!1},function(e){t.isDevicesLoading=!1,t._toaster.toast("error","Error","Unable to reach server, Please try again later.",!0)})},t.prototype.deleteRow=function(t){this.actions.splice(t,1)},t.prototype.addRows=function(){this.actions.push({action_label:"",assets:[],tags:[],write_value:""})},t.prototype.saveAssetControl=function(){var t=this;if(this.elementsName)if(this.validateEmptyFields()){if(!this.savingAssetControl){this.savingAssetControl=!0;var e={action_name:this.elementsName,actions:this.actions,description:"description empty",labels:[],schedule:{schedule:!1},type:"scada"};this.actionID&&(e.asset_action_id=this.actionID),this._app.saveAssetControlConfig(e).subscribe(function(e){"success"==e.status?(t._toaster.toast("success","Success",e.message,!0),t.actionID=e.asset_action_id,t._graph.graph.CELL.cellName=t.elementsName,t._graph.graph.CELL.asset_control={isEnabled:t.control_enabled,action_id:t.actionID,name:t.elementsName,action_name:t.elementsName},t._graph.graph.clickSource.querySelector("title")?t._graph.graph.clickSource.querySelector("title").innerHTML=t.elementsName:t._graph.graph.clickSource.title=t.elementsName,t._sidebar.Scada._editorUi.editor.setModified(!0),t.closeModal.nativeElement.click()):t._toaster.toast("error","Error","Failed to save, Please try again later.",!0),t.savingAssetControl=!1},function(e){t.savingAssetControl=!1,t._toaster.toast("error","Error","Unable to reach server, Please try again later.",!0)})}}else this._toaster.toast("error","Error","All fields are mandatory",!0);else this._toaster.toast("error","Error","Please enter elements name",!0)},t.prototype.onDeSelectAll=function(t,e,n){this.actions[e][n]=t},t.prototype.validateEmptyFields=function(){for(var t=0,e=this.actions;t<e.length;t++){var n=e[t];if(0==n.assets.length||0==n.tags.length||!n.action_label)return!1;if(1!=n.tags.length||"tag_1473"!==n.tags[0].value||n.write_value){if(!n.write_value)return!1}else n.write_value=""}return!0},t}(),Ot=i.ob({encapsulation:0,styles:[[".etsadm--ios-toggle[_ngcontent-%COMP%]{-webkit-appearance:none;height:20px;width:45px;background-color:#707070;border-radius:43px;position:relative;cursor:pointer;vertical-align:middle;margin:0 10px!important;outline:0}.etsadm--ios-toggle[_ngcontent-%COMP%]::after{top:50%!important;left:2px!important;content:'';width:18px!important;height:18px!important;background-color:#d3d3d3!important;position:absolute;border-radius:100%!important;transition:.3s!important;transform:translateY(-50%);border:none!important}.etsadm--ios-toggle[_ngcontent-%COMP%]:checked{background-color:var(--brandPrimaryBlue)}.etsadm--ios-toggle[_ngcontent-%COMP%]:checked::after{transform:translateX(22px) translateY(-50%)}.etsadm--ios-toggle[_ngcontent-%COMP%]:focus{outline-color:transparent}.ng-select.ng-select-multiple[_ngcontent-%COMP%]   .ng-select-container[_ngcontent-%COMP%]   .ng-value-container[_ngcontent-%COMP%]   .ng-value[_ngcontent-%COMP%]   .ng-value-label[_ngcontent-%COMP%]{display:inline-block;padding:10px 50px!important}.table-head[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{text-align:center;box-shadow:0 0 10px 0 #e3dbdb;color:#6c757d}.table-head[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{width:25%}.table-head[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(3), .table-head[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(4){width:20%}.table-head[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child{width:10%}.table-head[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border:none;padding:.7rem}.not-allowed[_ngcontent-%COMP%]{cursor:not-allowed}[_nghost-%COMP%]     angular2-multiselect .dropdown-list{overflow:inherit}[_nghost-%COMP%]     angular2-multiselect .list-area div:last-child{max-height:220px!important}[_nghost-%COMP%]     angular2-multiselect .vertical.selfScroll{height:220px!important;overflow:auto;clear:both}"],y],data:{}});function _t(t){return i.Kb(0,[(t()(),i.qb(0,0,null,null,6,"div",[["class","main-loader content-align"],["id","scada-loader"]],null,null,null,null,null)),(t()(),i.qb(1,0,null,null,5,"div",[["id","loader-wrapper-submaincontent"]],null,null,null,null,null)),(t()(),i.qb(2,0,null,null,4,"div",[["class","loader-rings"]],null,null,null,null,null)),(t()(),i.qb(3,0,null,null,0,"div",[],null,null,null,null,null)),(t()(),i.qb(4,0,null,null,0,"div",[],null,null,null,null,null)),(t()(),i.qb(5,0,null,null,0,"div",[],null,null,null,null,null)),(t()(),i.qb(6,0,null,null,0,"div",[],null,null,null,null,null))],null,null)}function Dt(t){return i.Kb(0,[(t()(),i.qb(0,0,null,null,44,"tr",[],null,null,null,null,null)),(t()(),i.qb(1,0,null,null,10,"td",[],null,null,null,null,null)),(t()(),i.qb(2,0,null,null,9,"angular2-multiselect",[],[[8,"className",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"onDeSelectAll"],[null,"ngModelChange"],["document","keyup.escape"]],function(t,e,n){var l=!0,o=t.component;return"document:keyup.escape"===e&&(l=!1!==i.Ab(t,3).onEscapeDown(n)&&l),"onDeSelectAll"===e&&(l=!1!==o.onDeSelectAll(n,t.context.index,"assets")&&l),"ngModelChange"===e&&(l=!1!==(t.context.$implicit.assets=n)&&l),l},Pt.b,Pt.a)),i.pb(3,13615104,null,3,It.a,[i.k,i.h,It.m],{data:[0,"data"],settings:[1,"settings"]},{onDeSelectAll:"onDeSelectAll"}),i.Gb(335544320,2,{itemTempl:0}),i.Gb(335544320,3,{badgeTempl:0}),i.Gb(335544320,4,{searchTempl:0}),i.Fb(1024,null,b.n,function(t){return[t]},[It.a]),i.Fb(1024,null,b.o,function(t){return[t]},[It.a]),i.pb(9,671744,null,0,b.t,[[8,null],[6,b.n],[8,null],[6,b.o]],{model:[0,"model"]},{update:"ngModelChange"}),i.Fb(2048,null,b.p,null,[b.t]),i.pb(11,16384,null,0,b.q,[[4,b.p]],null,null),(t()(),i.qb(12,0,null,null,10,"td",[],null,null,null,null,null)),(t()(),i.qb(13,0,null,null,9,"angular2-multiselect",[],[[8,"className",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"onDeSelectAll"],[null,"ngModelChange"],["document","keyup.escape"]],function(t,e,n){var l=!0,o=t.component;return"document:keyup.escape"===e&&(l=!1!==i.Ab(t,14).onEscapeDown(n)&&l),"onDeSelectAll"===e&&(l=!1!==o.onDeSelectAll(n,t.context.index,"tags")&&l),"ngModelChange"===e&&(l=!1!==(t.context.$implicit.tags=n)&&l),l},Pt.b,Pt.a)),i.pb(14,13615104,null,3,It.a,[i.k,i.h,It.m],{data:[0,"data"],settings:[1,"settings"]},{onDeSelectAll:"onDeSelectAll"}),i.Gb(335544320,5,{itemTempl:0}),i.Gb(335544320,6,{badgeTempl:0}),i.Gb(335544320,7,{searchTempl:0}),i.Fb(1024,null,b.n,function(t){return[t]},[It.a]),i.Fb(1024,null,b.o,function(t){return[t]},[It.a]),i.pb(20,671744,null,0,b.t,[[8,null],[6,b.n],[8,null],[6,b.o]],{model:[0,"model"]},{update:"ngModelChange"}),i.Fb(2048,null,b.p,null,[b.t]),i.pb(22,16384,null,0,b.q,[[4,b.p]],null,null),(t()(),i.qb(23,0,null,null,8,"td",[],null,null,null,null,null)),(t()(),i.qb(24,0,null,null,7,"div",[["class","form-group"]],null,null,null,null,null)),(t()(),i.qb(25,0,null,null,6,"input",[["class","form-control"],["placeholder","Enter value"],["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"change"],[null,"keydown.enter"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(t,e,n){var l=!0;return"change"===e&&(l=!1!==i.Ab(t,26).transformString(n)&&l),"keydown.enter"===e&&(l=!1!==i.Ab(t,26).transformString(n)&&l),"input"===e&&(l=!1!==i.Ab(t,27)._handleInput(n.target.value)&&l),"blur"===e&&(l=!1!==i.Ab(t,27).onTouched()&&l),"compositionstart"===e&&(l=!1!==i.Ab(t,27)._compositionStart()&&l),"compositionend"===e&&(l=!1!==i.Ab(t,27)._compositionEnd(n.target.value)&&l),"ngModelChange"===e&&(l=!1!==(t.context.$implicit.write_value=n)&&l),l},null,null)),i.pb(26,16384,null,0,E.a,[i.E,i.k],null,{updateModel:"ngModelChange"}),i.pb(27,16384,null,0,b.e,[i.E,i.k,[2,b.a]],null,null),i.Fb(1024,null,b.o,function(t){return[t]},[b.e]),i.pb(29,671744,null,0,b.t,[[8,null],[8,null],[8,null],[6,b.o]],{isDisabled:[0,"isDisabled"],model:[1,"model"]},{update:"ngModelChange"}),i.Fb(2048,null,b.p,null,[b.t]),i.pb(31,16384,null,0,b.q,[[4,b.p]],null,null),(t()(),i.qb(32,0,null,null,8,"td",[],null,null,null,null,null)),(t()(),i.qb(33,0,null,null,7,"div",[["class","form-group"]],null,null,null,null,null)),(t()(),i.qb(34,0,null,null,6,"input",[["class","form-control"],["placeholder","Enter label"],["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"change"],[null,"keydown.enter"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(t,e,n){var l=!0;return"change"===e&&(l=!1!==i.Ab(t,35).transformString(n)&&l),"keydown.enter"===e&&(l=!1!==i.Ab(t,35).transformString(n)&&l),"input"===e&&(l=!1!==i.Ab(t,36)._handleInput(n.target.value)&&l),"blur"===e&&(l=!1!==i.Ab(t,36).onTouched()&&l),"compositionstart"===e&&(l=!1!==i.Ab(t,36)._compositionStart()&&l),"compositionend"===e&&(l=!1!==i.Ab(t,36)._compositionEnd(n.target.value)&&l),"ngModelChange"===e&&(l=!1!==(t.context.$implicit.action_label=n)&&l),l},null,null)),i.pb(35,16384,null,0,E.a,[i.E,i.k],null,{updateModel:"ngModelChange"}),i.pb(36,16384,null,0,b.e,[i.E,i.k,[2,b.a]],null,null),i.Fb(1024,null,b.o,function(t){return[t]},[b.e]),i.pb(38,671744,null,0,b.t,[[8,null],[8,null],[8,null],[6,b.o]],{model:[0,"model"]},{update:"ngModelChange"}),i.Fb(2048,null,b.p,null,[b.t]),i.pb(40,16384,null,0,b.q,[[4,b.p]],null,null),(t()(),i.qb(41,0,null,null,3,"td",[["class","text-center"]],null,null,null,null,null)),(t()(),i.qb(42,0,null,null,2,"i",[["class","fa fa-trash trash-hov color-ac"]],null,[[null,"click"]],function(t,e,n){var i=!0,l=t.component;return"click"===e&&(i=!1!==(1!==l.actions.length?l.deleteRow(t.context.index):"")&&i),i},null,null)),i.pb(43,278528,null,0,C.j,[i.s,i.t,i.k,i.E],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),i.Db(44,{"not-allowed":0})],function(t,e){var n=e.component;t(e,3,0,n.devicesMeta,n.multiselectSettings),t(e,9,0,e.context.$implicit.assets),t(e,14,0,n.tagsMeta,n.multiselectSettings),t(e,20,0,e.context.$implicit.tags),t(e,29,0,1==e.context.$implicit.tags.length&&"tag_1473"===e.context.$implicit.tags[0].value,e.context.$implicit.write_value),t(e,38,0,e.context.$implicit.action_label);var i=t(e,44,0,1==n.actions.length);t(e,43,0,"fa fa-trash trash-hov color-ac",i)},function(t,e){t(e,2,0,i.Ab(e,3).defaultSettings.classes,i.Ab(e,11).ngClassUntouched,i.Ab(e,11).ngClassTouched,i.Ab(e,11).ngClassPristine,i.Ab(e,11).ngClassDirty,i.Ab(e,11).ngClassValid,i.Ab(e,11).ngClassInvalid,i.Ab(e,11).ngClassPending),t(e,13,0,i.Ab(e,14).defaultSettings.classes,i.Ab(e,22).ngClassUntouched,i.Ab(e,22).ngClassTouched,i.Ab(e,22).ngClassPristine,i.Ab(e,22).ngClassDirty,i.Ab(e,22).ngClassValid,i.Ab(e,22).ngClassInvalid,i.Ab(e,22).ngClassPending),t(e,25,0,i.Ab(e,31).ngClassUntouched,i.Ab(e,31).ngClassTouched,i.Ab(e,31).ngClassPristine,i.Ab(e,31).ngClassDirty,i.Ab(e,31).ngClassValid,i.Ab(e,31).ngClassInvalid,i.Ab(e,31).ngClassPending),t(e,34,0,i.Ab(e,40).ngClassUntouched,i.Ab(e,40).ngClassTouched,i.Ab(e,40).ngClassPristine,i.Ab(e,40).ngClassDirty,i.Ab(e,40).ngClassValid,i.Ab(e,40).ngClassInvalid,i.Ab(e,40).ngClassPending)})}function Ut(t){return i.Kb(0,[(t()(),i.qb(0,0,null,null,2,"tbody",[],null,null,null,null,null)),(t()(),i.hb(16777216,null,null,1,null,Dt)),i.pb(2,278528,null,0,C.k,[i.P,i.M,i.s],{ngForOf:[0,"ngForOf"]},null)],function(t,e){t(e,2,0,e.component.actions)},null)}function Nt(t){return i.Kb(0,[(t()(),i.qb(0,0,null,null,0,"div",[["class","form-group"]],null,null,null,null,null))],null,null)}function kt(t){return i.Kb(0,[(t()(),i.qb(0,0,null,null,32,"div",[["class","container config-bg"]],null,null,null,null,null)),(t()(),i.qb(1,0,null,null,4,"div",[["aria-controls","assetsGeneral"],["aria-expanded","true"],["class","accordian-header border-bottom"],["data-target","#assetsGeneral"],["data-toggle","collapse"],["id","assetsGeneralTab"]],null,null,null,null,null)),(t()(),i.qb(2,0,null,null,3,"div",[["class","row"]],null,null,null,null,null)),(t()(),i.qb(3,0,null,null,2,"div",[["class","col-md-6 col-sm-6 col-lg-6"]],null,null,null,null,null)),(t()(),i.qb(4,0,null,null,1,"h6",[],null,null,null,null,null)),(t()(),i.Ib(-1,null,["General"])),(t()(),i.qb(6,0,null,null,26,"div",[["aria-labelledby","assetsGeneralTab"],["class","collapse show mt-3 mb-3"],["id","assetsGeneral"]],null,null,null,null,null)),(t()(),i.qb(7,0,null,null,25,"div",[["class","row"]],null,null,null,null,null)),(t()(),i.qb(8,0,null,null,12,"div",[["class","col-md-6"]],null,null,null,null,null)),(t()(),i.qb(9,0,null,null,11,"div",[["class","form-group"]],null,null,null,null,null)),(t()(),i.qb(10,0,null,null,3,"label",[["for","element-name"]],null,null,null,null,null)),(t()(),i.Ib(-1,null,["Elements Name "])),(t()(),i.qb(12,0,null,null,1,"span",[["class","color-red"]],null,null,null,null,null)),(t()(),i.Ib(-1,null,["\xa0*"])),(t()(),i.qb(14,0,null,null,6,"input",[["autocomplete","off"],["class","form-control"],["id","element-name"],["name","element-name"],["placeholder","Enter elements name"],["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"change"],[null,"keydown.enter"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(t,e,n){var l=!0,o=t.component;return"change"===e&&(l=!1!==i.Ab(t,15).transformString(n)&&l),"keydown.enter"===e&&(l=!1!==i.Ab(t,15).transformString(n)&&l),"input"===e&&(l=!1!==i.Ab(t,16)._handleInput(n.target.value)&&l),"blur"===e&&(l=!1!==i.Ab(t,16).onTouched()&&l),"compositionstart"===e&&(l=!1!==i.Ab(t,16)._compositionStart()&&l),"compositionend"===e&&(l=!1!==i.Ab(t,16)._compositionEnd(n.target.value)&&l),"ngModelChange"===e&&(l=!1!==(o.elementsName=n)&&l),l},null,null)),i.pb(15,16384,null,0,E.a,[i.E,i.k],null,{updateModel:"ngModelChange"}),i.pb(16,16384,null,0,b.e,[i.E,i.k,[2,b.a]],null,null),i.Fb(1024,null,b.o,function(t){return[t]},[b.e]),i.pb(18,671744,null,0,b.t,[[8,null],[8,null],[8,null],[6,b.o]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),i.Fb(2048,null,b.p,null,[b.t]),i.pb(20,16384,null,0,b.q,[[4,b.p]],null,null),(t()(),i.qb(21,0,null,null,11,"div",[["class","col-md-6"]],null,null,null,null,null)),(t()(),i.qb(22,0,null,null,1,"label",[["for","element-name"]],null,null,null,null,null)),(t()(),i.Ib(-1,null,["Action"])),(t()(),i.qb(24,0,null,null,8,"label",[["class","d-flex"]],null,null,null,null,null)),(t()(),i.Ib(-1,null,[" Disable "])),(t()(),i.qb(26,0,null,null,5,"input",[["class","etsadm--ios-toggle"],["type","checkbox"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"change"],[null,"blur"]],function(t,e,n){var l=!0,o=t.component;return"change"===e&&(l=!1!==i.Ab(t,27).onChange(n.target.checked)&&l),"blur"===e&&(l=!1!==i.Ab(t,27).onTouched()&&l),"ngModelChange"===e&&(l=!1!==(o.control_enabled=n)&&l),l},null,null)),i.pb(27,16384,null,0,b.b,[i.E,i.k],null,null),i.Fb(1024,null,b.o,function(t){return[t]},[b.b]),i.pb(29,671744,null,0,b.t,[[8,null],[8,null],[8,null],[6,b.o]],{model:[0,"model"]},{update:"ngModelChange"}),i.Fb(2048,null,b.p,null,[b.t]),i.pb(31,16384,null,0,b.q,[[4,b.p]],null,null),(t()(),i.Ib(-1,null,[" Enable "])),(t()(),i.qb(33,0,null,null,37,"div",[["class","container config-bg mt-3"]],null,null,null,null,null)),(t()(),i.qb(34,0,null,null,4,"div",[["aria-controls","assetsTable"],["aria-expanded","true"],["class","accordian-header border-bottom"],["data-target","#assetsTable"],["data-toggle","collapse"],["id","assetControlTable"]],null,null,null,null,null)),(t()(),i.qb(35,0,null,null,3,"div",[["class","row"]],null,null,null,null,null)),(t()(),i.qb(36,0,null,null,2,"div",[["class","col-md-6 col-sm-6 col-lg-6"]],null,null,null,null,null)),(t()(),i.qb(37,0,null,null,1,"h6",[],null,null,null,null,null)),(t()(),i.Ib(-1,null,["Actions"])),(t()(),i.qb(39,0,null,null,31,"div",[["aria-labelledby","assetControlTable"],["class","collapse show mt-3 mb-3"],["id","assetsTable"]],null,null,null,null,null)),(t()(),i.qb(40,0,null,null,26,"div",[["class","row"]],null,null,null,null,null)),(t()(),i.qb(41,0,null,null,22,"table",[["class","table table-head"]],null,null,null,null,null)),(t()(),i.qb(42,0,null,null,19,"thead",[],null,null,null,null,null)),(t()(),i.qb(43,0,null,null,18,"tr",[],null,null,null,null,null)),(t()(),i.qb(44,0,null,null,3,"td",[],null,null,null,null,null)),(t()(),i.Ib(-1,null,["Assets "])),(t()(),i.qb(46,0,null,null,1,"span",[["class","color-red"]],null,null,null,null,null)),(t()(),i.Ib(-1,null,["\xa0*"])),(t()(),i.qb(48,0,null,null,3,"td",[],null,null,null,null,null)),(t()(),i.Ib(-1,null,["Tags "])),(t()(),i.qb(50,0,null,null,1,"span",[["class","color-red"]],null,null,null,null,null)),(t()(),i.Ib(-1,null,["\xa0*"])),(t()(),i.qb(52,0,null,null,3,"td",[],null,null,null,null,null)),(t()(),i.Ib(-1,null,["Value "])),(t()(),i.qb(54,0,null,null,1,"span",[["class","color-red"]],null,null,null,null,null)),(t()(),i.Ib(-1,null,["\xa0*"])),(t()(),i.qb(56,0,null,null,3,"td",[],null,null,null,null,null)),(t()(),i.Ib(-1,null,["Label "])),(t()(),i.qb(58,0,null,null,1,"span",[["class","color-red"]],null,null,null,null,null)),(t()(),i.Ib(-1,null,["\xa0*"])),(t()(),i.qb(60,0,null,null,1,"td",[],null,null,null,null,null)),(t()(),i.Ib(-1,null,["Delete"])),(t()(),i.hb(16777216,null,null,1,null,Ut)),i.pb(63,16384,null,0,C.l,[i.P,i.M],{ngIf:[0,"ngIf"]},null),(t()(),i.qb(64,0,null,null,2,"div",[["class","col-md-6"]],null,null,null,null,null)),(t()(),i.hb(16777216,null,null,1,null,Nt)),i.pb(66,16384,null,0,C.l,[i.P,i.M],{ngIf:[0,"ngIf"]},null),(t()(),i.qb(67,0,null,null,3,null,null,null,null,null,null,null)),(t()(),i.qb(68,0,null,null,2,"button",[["class","btn btn-primary btn-sm"]],null,[[null,"click"]],function(t,e,n){var i=!0,l=t.component;return"click"===e&&(i=!1!==(l.isDevicesLoading?"":l.addRows())&&i),i},null,null)),(t()(),i.qb(69,0,null,null,0,"i",[["class","fa fa-plus"]],null,null,null,null,null)),(t()(),i.Ib(-1,null,[" Add"]))],function(t,e){var n=e.component;t(e,18,0,"element-name",n.elementsName),t(e,29,0,n.control_enabled),t(e,63,0,0!==n.actions.length),t(e,66,0,n.devicesMeta&&0!==n.devicesMeta.length)},function(t,e){t(e,14,0,i.Ab(e,20).ngClassUntouched,i.Ab(e,20).ngClassTouched,i.Ab(e,20).ngClassPristine,i.Ab(e,20).ngClassDirty,i.Ab(e,20).ngClassValid,i.Ab(e,20).ngClassInvalid,i.Ab(e,20).ngClassPending),t(e,26,0,i.Ab(e,31).ngClassUntouched,i.Ab(e,31).ngClassTouched,i.Ab(e,31).ngClassPristine,i.Ab(e,31).ngClassDirty,i.Ab(e,31).ngClassValid,i.Ab(e,31).ngClassInvalid,i.Ab(e,31).ngClassPending)})}function Ht(t){return i.Kb(0,[i.Gb(402653184,1,{closeModal:0}),(t()(),i.qb(1,0,null,null,15,"div",[["class","modal-dialog modal-dialog-centered modal-xl h-90"],["role","document"]],null,null,null,null,null)),(t()(),i.qb(2,0,null,null,14,"div",[["class","modal-content h-100"]],null,null,null,null,null)),(t()(),i.qb(3,0,null,null,4,"div",[["class","modal-header"]],null,null,null,null,null)),(t()(),i.qb(4,0,null,null,1,"h6",[["class","modal-title text-muted"]],null,null,null,null,null)),(t()(),i.Ib(5,null,["Asset Control Configuration - ",""])),(t()(),i.qb(6,0,null,null,1,"button",[["aria-label","Close"],["class","close"],["data-dismiss","modal"],["type","button"]],null,null,null,null,null)),(t()(),i.qb(7,0,null,null,0,"i",[["class","elm-cancel"]],null,null,null,null,null)),(t()(),i.qb(8,0,null,null,3,"div",[["class","modal-body overflow-auto"]],null,null,null,null,null)),(t()(),i.hb(16777216,null,null,1,null,_t)),i.pb(10,16384,null,0,C.l,[i.P,i.M],{ngIf:[0,"ngIf"],ngIfElse:[1,"ngIfElse"]},null),(t()(),i.hb(0,[["metaLoaded",2]],null,0,null,kt)),(t()(),i.qb(12,0,null,null,4,"div",[["class","modal-footer"]],null,null,null,null,null)),(t()(),i.qb(13,0,null,null,1,"button",[["class","btn btn-primary btn-sm mr-3"],["type","button"]],null,[[null,"click"]],function(t,e,n){var i=!0,l=t.component;return"click"===e&&(i=!1!==(l.savingAssetControl?"":l.saveAssetControl())&&i),i},null,null)),(t()(),i.Ib(-1,null,["Save"])),(t()(),i.qb(15,0,[[1,0],["closeModal",1]],null,1,"button",[["class","btn btn-secondary btn-sm mr-3"],["data-dismiss","modal"],["type","button"]],null,null,null,null,null)),(t()(),i.Ib(-1,null,["Close"]))],function(t,e){t(e,10,0,e.component.isDevicesLoading,i.Ab(e,11))},function(t,e){t(e,5,0,e.component.currentState)})}var Gt=function(){function t(t,e,n,i,l,o){this._editorUi=t,this._appService=e,this._auth=n,this._router=i,this._graph=l,this._toaster=o,this.toggleView="preview",this.pageType="scada",this.exitEditor=new R.b,this.saving=!1}return t.prototype.updateMenu=function(t,e){var n=this._editorUi,i=this;t.Menus.prototype.defaultMenuItems=["cancel","saveexit","file","edit","view","arrange"];var l=t.Menus.prototype.init,o=t.Actions.prototype.init;t.Menus.prototype.init=function(){l.apply(this);var e=t.mxUtils.bind(this.editorUi.editor.graph,this.editorUi.editor.graph.isEnabled);this.put("cancel",new t.Menu(t.mxUtils.bind(this,function(e,n){i._editorUi.disableMenu(),t.hasOwnProperty("_editorUi")&&t._editorUi.hasOwnProperty("editor")&&t._editorUi.editor.modified&&!confirm("There are unsaved changes! Are you sure?")?i._editorUi.enableMenu():(i.exitEditor.next(!0),i._router.navigate([i.pageType+"/"+i._graph.graph.scadaData.dashboardId]))}))),this.put("saveexit",new t.Menu(t.mxUtils.bind(this,function(t,e){this.addMenuItems(t,["save","-","save&exit"],e)}))),this.put("file",new t.Menu(t.mxUtils.bind(this,function(t,e){this.addMenuItems(t,["import","export","-","pageSetup","print"],e)}))),this.put("edit",new t.Menu(t.mxUtils.bind(this,function(t,e){this.addMenuItems(t,["undo","redo","-","cut","copy","paste","delete","-","duplicate","-",,"editStyle","-","edit","-","selectVertices","selectEdges","selectAll","selectNone","-","lockUnlock"])}))),this.put("arrange",new t.Menu(t.mxUtils.bind(this,function(t,e){this.addMenuItems(t,["toFront","toBack","-"],e),this.addSubmenu("direction",t,e),this.addMenuItems(t,["turn","-"],e),this.addSubmenu("align",t,e),this.addSubmenu("distribute",t,e),t.addSeparator(e),this.addSubmenu("navigation",t,e),this.addSubmenu("layout",t,e),this.addMenuItems(t,["-","group","ungroup","removeFromGroup","-","clearWaypoints","autosize"],e)}))).isEnabled=e},t.Actions.prototype.init=function(){o.apply(this);var e=this.editorUi,l=e.editor,s=l.graph;e.footerHeight=0,e.hsplitClickEnabled=!0,s.fitToScreen=!0,s.fitHorizontal=!1,s.fitVertical=!1,s.zoomEnabled=!0,s.hoverEnabled=!1;var r=function(){return t.Action.prototype.isEnabled.apply(this,arguments)&&s.isEnabled()};this.addAction("save",function(){if(!i.saving){n.loaderToggleOn(),i._editorUi.disableMenu();try{var o=void 0;try{o=btoa(t.mxUtils.getPrettyXml(i.getXmlNode(e)))}catch(r){return i._toaster.toast("error","Error","Unable to save, Invalid character found.",!0),void n.loaderToggleOff()}i.saving=!0,i._appService.saveScada({dashboard_id:s.scadaData.dashboardId,widget_data:{SCADAData:o,cData:{chartOptions:{reportFormat:{}}},cType:"Scada",widget_id:s.scadaData.widget.wcData[0].widget_id},site_id:i._auth.getCurrentUserSiteId(),widget_id:s.scadaData.widget.wcData[0].widget_id}).subscribe(function(t){"success"==t.status?(i._toaster.toast("success","Success","Scada saved successfully",!0),l.setModified(!1)):i._toaster.toast("error","Error","Failed to save, please try again later.",!0),i.saving=!1,n.loaderToggleOff(),i._editorUi.enableMenu()},function(t){i.saving=!1,n.loaderToggleOff(),i._editorUi.enableMenu(),i._toaster.toast("error","Error","Unable to reach server, please try again later.",!0)})}catch(r){console.log(r)}}},null,null,t.Editor.ctrlKey+"+S").isEnabled=r,this.addAction("saveAs...",function(){},null,null,t.Editor.ctrlKey+"+Shift+S").isEnabled=r,this.addAction("save&exit",function(){if(!i.saving){n.loaderToggleOn();try{var o=void 0;try{o=btoa(t.mxUtils.getPrettyXml(i.getXmlNode(e)))}catch(r){return i._toaster.toast("error","Error","Unable to save, Invalid character found.",!0),void n.loaderToggleOff()}i._appService.saveScada({dashboard_id:s.scadaData.dashboardId,widget_data:{SCADAData:o,cData:{chartOptions:{reportFormat:{}}},cType:"Scada",widget_id:s.scadaData.widget.wcData[0].widget_id},site_id:i._auth.getCurrentUserSiteId(),widget_id:s.scadaData.widget.wcData[0].widget_id}).subscribe(function(t){"success"==t.status?(i._editorUi.disableMenu(),i._toaster.toast("success","Success","Scada saved successfully",!0),l.setModified(!1),i._router.navigate([i.pageType+"/"+i._graph.graph.scadaData.dashboardId])):i._toaster.toast("error","Error","Failed to save, please try again later.",!0),i.saving=!1,n.loaderToggleOff()},function(t){i.saving=!1,n.loaderToggleOff(),i._toaster.toast("error","Error","Unable to reach server, please try again later.",!0)})}catch(r){console.log(r)}}},null,null).isEnabled=r,this.addAction("import...",function(){i._editorUi.openImportModal()}).isEnabled=r,this.addAction("export...",function(){i._editorUi.openExportModal()}).isEnabled=r,this.addAction("liveData",function(){i._graph.graph.CELL=s.getSelectionCell(),i._graph.graph.clickSource=s.firstClickSource.parentNode,i._editorUi.openliveDataModal()}),this.addAction("asset_control",function(){i._graph.graph.CELL=s.getSelectionCell(),i._graph.graph.clickSource=s.firstClickSource.parentNode,i._editorUi.openAssetControlModal()})},t.Toolbar.prototype.init=function(){var e=screen.width;if((e-=screen.height>740?56:0)>=700){var n=this.addMenu("",t.mxResources.get("view")+" ("+t.mxResources.get("panTooltip")+")",!0,"viewPanels",null,!0);this.addDropDownArrow(n,"geSprite-formatpanel",38,50,-4,-3,36,-8),this.addSeparator()}var i,l=this.addMenu("",t.mxResources.get("zoom")+" (Alt+Mousewheel)",!0,"viewZoom",null,!0);l.showDisabled=!0,l.style.whiteSpace="nowrap",l.style.position="relative",l.style.overflow="hidden",l.style.width="45px",e>=420&&(this.addSeparator(),(i=this.addItems(["zoomIn","zoomOut"]))[0].setAttribute("title",t.mxResources.get("zoomIn")+" ("+this.editorUi.actions.get("zoomIn").shortcut+")"),i[1].setAttribute("title",t.mxResources.get("zoomOut")+" ("+this.editorUi.actions.get("zoomOut").shortcut+")")),this.updateZoom=t.mxUtils.bind(this,function(){l.innerHTML=Math.round(100*this.editorUi.editor.graph.view.scale)+"%"+this.dropdownImageHtml}),this.editorUi.editor.graph.view.addListener(t.mxEvent.EVENT_SCALE,this.updateZoom),this.editorUi.editor.addListener("resetGraphView",this.updateZoom),(i=this.addItems(["-","undo","redo"]))[1].setAttribute("title",t.mxResources.get("undo")+" ("+this.editorUi.actions.get("undo").shortcut+")"),i[2].setAttribute("title",t.mxResources.get("redo")+" ("+this.editorUi.actions.get("redo").shortcut+")"),e>=320&&(i=this.addItems(["-","delete"]))[1].setAttribute("title",t.mxResources.get("delete")+" ("+this.editorUi.actions.get("delete").shortcut+")"),e>=550&&this.addItems(["-","toFront","toBack"]),e>=740&&(this.addItems(["-","fillColor"]),e>=780&&(this.addItems(["strokeColor"]),e>=820&&this.addItems(["shadow"]))),e>=400&&(this.addSeparator(),e>=440&&(this.edgeShapeMenu=this.addMenuFunction("",t.mxResources.get("connection"),!1,t.mxUtils.bind(this,function(e){this.editorUi.menus.edgeStyleChange(e,"",[t.mxConstants.STYLE_SHAPE,"width"],[null,null],"geIcon geSprite geSprite-connection",null,!0).setAttribute("title",t.mxResources.get("line")),this.editorUi.menus.edgeStyleChange(e,"",[t.mxConstants.STYLE_SHAPE,"width"],["link",null],"geIcon geSprite geSprite-linkedge",null,!0).setAttribute("title",t.mxResources.get("link")),this.editorUi.menus.edgeStyleChange(e,"",[t.mxConstants.STYLE_SHAPE,"width"],["flexArrow",null],"geIcon geSprite geSprite-arrow",null,!0).setAttribute("title",t.mxResources.get("arrow")),this.editorUi.menus.edgeStyleChange(e,"",[t.mxConstants.STYLE_SHAPE,"width"],["arrow",null],"geIcon geSprite geSprite-simplearrow",null,!0).setAttribute("title",t.mxResources.get("simpleArrow"))})),this.addDropDownArrow(this.edgeShapeMenu,"geSprite-connection",44,50,0,0,22,-4)),this.edgeStyleMenu=this.addMenuFunction("geSprite-orthogonal",t.mxResources.get("waypoints"),!1,t.mxUtils.bind(this,function(e){this.editorUi.menus.edgeStyleChange(e,"",[t.mxConstants.STYLE_EDGE,t.mxConstants.STYLE_CURVED,t.mxConstants.STYLE_NOEDGESTYLE],[null,null,null],"geIcon geSprite geSprite-straight",null,!0).setAttribute("title",t.mxResources.get("straight")),this.editorUi.menus.edgeStyleChange(e,"",[t.mxConstants.STYLE_EDGE,t.mxConstants.STYLE_CURVED,t.mxConstants.STYLE_NOEDGESTYLE],["orthogonalEdgeStyle",null,null],"geIcon geSprite geSprite-orthogonal",null,!0).setAttribute("title",t.mxResources.get("orthogonal")),this.editorUi.menus.edgeStyleChange(e,"",[t.mxConstants.STYLE_EDGE,t.mxConstants.STYLE_ELBOW,t.mxConstants.STYLE_CURVED,t.mxConstants.STYLE_NOEDGESTYLE],["elbowEdgeStyle",null,null,null],"geIcon geSprite geSprite-horizontalelbow",null,!0).setAttribute("title",t.mxResources.get("simple")),this.editorUi.menus.edgeStyleChange(e,"",[t.mxConstants.STYLE_EDGE,t.mxConstants.STYLE_ELBOW,t.mxConstants.STYLE_CURVED,t.mxConstants.STYLE_NOEDGESTYLE],["elbowEdgeStyle","vertical",null,null],"geIcon geSprite geSprite-verticalelbow",null,!0).setAttribute("title",t.mxResources.get("simple")),this.editorUi.menus.edgeStyleChange(e,"",[t.mxConstants.STYLE_EDGE,t.mxConstants.STYLE_ELBOW,t.mxConstants.STYLE_CURVED,t.mxConstants.STYLE_NOEDGESTYLE],["isometricEdgeStyle",null,null,null],"geIcon geSprite geSprite-horizontalisometric",null,!0).setAttribute("title",t.mxResources.get("isometric")),this.editorUi.menus.edgeStyleChange(e,"",[t.mxConstants.STYLE_EDGE,t.mxConstants.STYLE_ELBOW,t.mxConstants.STYLE_CURVED,t.mxConstants.STYLE_NOEDGESTYLE],["isometricEdgeStyle","vertical",null,null],"geIcon geSprite geSprite-verticalisometric",null,!0).setAttribute("title",t.mxResources.get("isometric")),this.editorUi.menus.edgeStyleChange(e,"",[t.mxConstants.STYLE_EDGE,t.mxConstants.STYLE_CURVED,t.mxConstants.STYLE_NOEDGESTYLE],["orthogonalEdgeStyle","1",null],"geIcon geSprite geSprite-curved",null,!0).setAttribute("title",t.mxResources.get("curved")),this.editorUi.menus.edgeStyleChange(e,"",[t.mxConstants.STYLE_EDGE,t.mxConstants.STYLE_CURVED,t.mxConstants.STYLE_NOEDGESTYLE],["entityRelationEdgeStyle",null,null],"geIcon geSprite geSprite-entity",null,!0).setAttribute("title",t.mxResources.get("entityRelation"))})),this.addDropDownArrow(this.edgeStyleMenu,"geSprite-orthogonal",44,50,0,0,22,-4))},this.setUpContextMenu(t),this.setUpCopyAndPaste(t),this.cancelPreventDefault(t),this.scada_editor=t},t.prototype.setUpContextMenu=function(t){t.Menus.prototype.addPopupTitle=function(t,e,n){if(1==this.editorUi.editor.graph.getSelectionCount()&&!(this.editorUi.editor.graph.getModel().getChildCount(e)>0)){var i="el_id";""==(i=e.hasOwnProperty("cellName")?e.cellName:"el_"+e.id)&&(i="el_"+e.id),this.addMenuItem(t,i,null,n,null,null,!0)}},t.Menus.prototype.addMenuItem=function(e,n,i,l,o,s,r){var a=this.editorUi.actions.get(n);if(r)var h=e.addItem(n,null,null,i,o,!1);return null!=a&&(e.showDisabled||a.isEnabled())&&a.visible?(h=e.addItem(s||a.label,null,function(){a.funct(l)},i,o,a.isEnabled()),a.toggleAction&&a.isSelected()&&e.addCheckmark(h,t.Editor.checkmarkImage),this.addShortcut(h,a),h):null},t.Menus.prototype.addPopupMenuStyleItems=function(t,e,n){1!=this.editorUi.editor.graph.getSelectionCount()||this.editorUi.editor.graph.getModel().getChildCount(e)>0?this.editorUi.editor.graph.isSelectionEmpty()&&this.addMenuItems(t,["-","clearDefaultStyle"],null,n):(this.addMenuItems(t,["-","liveData"],null,n),this.editorUi.editor.graph.getModel().isEdge(e)||this.addMenuItems(t,["asset_control"],null,n))},t.Menus.prototype.addPopupMenuEditItems=function(t,e,n){this.editorUi.editor.graph.isSelectionEmpty()?this.addMenuItems(t,["pasteHere"],null,n):this.addMenuItems(t,["-","setAsDefaultStyle","-","cut","copy","duplicate","delete"],null,n)},t.Menus.prototype.createPopupMenu=function(t,e,n){t.smartSeparators=!0,this.addPopupTitle(t,e,n),this.addPopupMenuStyleItems(t,e,n),this.addPopupMenuArrangeItems(t,e,n),this.addPopupMenuEditItems(t,e,n),this.addPopupMenuHistoryItems(t,e,n)}},t.prototype.cancelPreventDefault=function(t){t.Menubar.prototype.addMenuHandler=function(e,n){if(null!=n){var i=!0,l=t.mxUtils.bind(this,function(l){if(i&&null==e.enabled||e.enabled){this.editorUi.editor.graph.popupMenuHandler.hideMenu();var o=new t.mxPopupMenu(n);o.div.className+=" geMenubarMenu",o.smartSeparators=!0,o.showDisabled=!0,o.autoExpand=!0,o.hideMenu=t.mxUtils.bind(this,function(){t.mxPopupMenu.prototype.hideMenu.apply(o,arguments),this.editorUi.resetCurrentMenu(),o.destroy()});var s=t.mxUtils.getOffset(e);o.popup(s.x,s.y+e.offsetHeight,null,l),this.editorUi.setCurrentMenu(o,e)}t.mxEvent.consume(l)});"Cancel"!=e.innerHTML&&(t.mxEvent.addListener(e,"mousemove",t.mxUtils.bind(this,function(t){null!=this.editorUi.currentMenu&&this.editorUi.currentMenuElt!=e&&(this.editorUi.hideCurrentMenu(),l(t))})),t.mxEvent.addListener(e,t.mxClient.IS_POINTER?"pointerdown":"mousedown",t.mxUtils.bind(this,function(t){i=this.currentElt!=e,t.preventDefault()}))),t.mxEvent.addListener(e,"click",t.mxUtils.bind(this,function(t){l(t),i=!0}))}}},t.prototype.setUpCopyAndPaste=function(t){function e(t){var e;switch(t[0]&&t[0].hasOwnProperty("children")&&(t=t[0].children,e="grouped"),t[0]&&t[0].hasOwnProperty("edge")&&(e="indiv"),t&&t.hasOwnProperty("cellName")&&(e="duplicate"),t&&t.hasOwnProperty("children")&&(t=t.children,e="droupedDuplicate"),e){case"grouped":case"droupedDuplicate":case"indiv":for(var n=0,i=t;n<i.length;n++){var l=i[n];l.hasOwnProperty("cellName")&&!l.edge&&(l.cellName=l.cellName+" - Copy (el_"+l.id+")")}break;case"duplicate":t.hasOwnProperty("cellName")&&(t.cellName=t.cellName+" - Copy (el_"+t.id+")")}}t.mxClipboard.paste=function(n){var i=null;if(!t.mxClipboard.isEmpty()){i=n.getImportableCells(t.mxClipboard.getCells());var l=t.mxClipboard.insertCount*t.mxClipboard.STEPSIZE,o=n.getDefaultParent();e(i=n.importCells(i,l,l,o)),t.mxClipboard.insertCount++,n.setSelectionCells(i,!1)}return i},t.Graph.prototype.duplicateCells=function(t,n){t=null!=t?t:this.getSelectionCells(),n=null==n||n,t=this.model.getTopmostCells(t);var i=this.getModel(),l=this.gridSize,o=[];i.beginUpdate();try{for(var s=this.cloneCells(t,!1,null,!0),r=0;r<t.length;r++){var a=i.getParent(t[r]),h=this.moveCells([s[r]],l,l,!1)[0];if(o.push(h),n)e(i.add(a,s[r]));else{var u=a.getIndex(t[r]);i.add(a,s[r],u+1)}}}finally{i.endUpdate()}return o},t.Graph.prototype.selectCellsForConnectVertex=function(n,i,l){2==n.length&&this.model.isVertex(n[1])?(this.setSelectionCell(n[1]),this.scrollCellToVisible(n[1]),null!=l&&(t.mxEvent.isTouchEvent(i)?l.update(l.getState(this.view.getState(n[1]))):l.reset())):this.setSelectionCells(n),e(n)}},t.prototype.getXmlNode=function(t){var e=t.editor,n=e.graph,i=e.getGraphXml();return i.setAttribute("background",n.background),i.setAttribute("saveToPreview",n.saveToPreview),i.setAttribute("fitToScreen",n.fitToScreen),i.setAttribute("fitHorizontal",n.fitHorizontal),i.setAttribute("fitVertical",n.fitVertical),i.setAttribute("zoomEnabled",n.zoomEnabled),i.setAttribute("hoverEnabled",n.hoverEnabled),n.saveToPreview&&(i.setAttribute("gridColor",n.view.gridColor),i.setAttribute("gridEnabled",n.gridEnabled)),i},t.prototype.parseXmlToDoc=function(t){return this.scada_editor.mxUtils.parseXml(t)},t.prototype.getXmlForDownload=function(){return this.scada_editor.mxUtils.getPrettyXml(this.getXmlNode(this.scada_editor._editorUi))},t.prototype.fetchScadaData=function(t,e){var n=this;t&&e.hasOwnProperty("_editorUi")&&e._editorUi.hasOwnProperty("editor")&&"editor"==this.toggleView&&e._editorUi.editor.modified&&!confirm("There are unsaved changes! Are you sure?")||this._appService.getScadaData({dashboard_id:this._graph.scadaInformation.dashboardId}).subscribe(function(t){t&&"success"===t.status?(n._graph.scadaInformation={},n._graph.scadaInformation=t.data,n._graph.scadaInformation.isReset=!1,n._graph.scadaInformation.isOwner=t.data.isOwner,n._graph.scadaInformation.ownerId=t.data.ownerId,n._graph.scadaInformation.ownerName=t.data.ownerName,n.toggleView="preview"):console.log("error")},function(t){console.log(t.error.message)})},t.prototype.getExitState=function(){return this.exitEditor.asObservable()},t.ngInjectableDef=i.T({factory:function(){return new t(i.X(T),i.X(h.a),i.X(S.a),i.X(c.l),i.X(w),i.X(u.a))},token:t,providedIn:"root"}),t}(),Ft=function(){function t(t){this.handleGraph=t}return t.prototype.constructFormatPanel=function(t,e){t.DiagramFormatPanel.prototype.addView=function(e){var n=this.editorUi,i=n.editor.graph;e.appendChild(this.createTitle(t.mxResources.get("view"))),this.addGridOption(e),e.appendChild(this.createOption(t.mxResources.get("saveToPreview"),function(){return i.saveToPreview},function(e){i.saveToPreview=e,n.fireEvent(new t.mxEventObject("savePreview"))},{install:function(t){this.listener=function(){t(i.saveToPreview)},n.addListener("savePreview",this.listener)},destroy:function(){n.removeListener(this.listener)}}));var l=setInterval(function(){var t=document.getElementById("showGridId");t&&!i.gridEnabled&&(clearInterval(l),t.setAttribute("disabled","true"))},200);if(i.isEnabled()){var o=this.createColorOption(t.mxResources.get("background"),function(){return i.background},function(e){var l=new t.ChangePageSetup(n,e);l.ignoreImage=!0,i.model.execute(l)},"#ffffff",{install:function(t){this.listener=function(){t(i.background)},n.addListener("backgroundColorChanged",this.listener)},destroy:function(){n.removeListener(this.listener)}});e.appendChild(o)}return e.appendChild(this.createOption(t.mxResources.get("fitToScreen"),function(){return i.fitToScreen},function(e){i.fitToScreen=e,i.fitHorizontal&&e?(i.fitHorizontal=!1,n.fireEvent(new t.mxEventObject("fitHorizontal"))):i.fitVertical&&e&&(i.fitVertical=!1,n.fireEvent(new t.mxEventObject("fitVertical"))),n.fireEvent(new t.mxEventObject("fitToScreen"))},{install:function(t){this.listener=function(){t(i.fitToScreen)},n.addListener("fitToScreen",this.listener)},destroy:function(){n.removeListener(this.listener)}})),e.appendChild(this.createOption(t.mxResources.get("fitHorizontal"),function(){return i.fitHorizontal},function(e){i.fitHorizontal=e,i.fitToScreen&&e?(i.fitToScreen=!1,n.fireEvent(new t.mxEventObject("fitToScreen"))):i.fitVertical&&e&&(i.fitVertical=!1,n.fireEvent(new t.mxEventObject("fitVertical"))),n.fireEvent(new t.mxEventObject("fitHorizontal"))},{install:function(t){this.listener=function(){t(i.fitHorizontal)},n.addListener("fitHorizontal",this.listener)},destroy:function(){n.removeListener(this.listener)}})),e.appendChild(this.createOption(t.mxResources.get("fitVertical"),function(){return i.fitVertical},function(e){i.fitVertical=e,i.fitToScreen&&e?(i.fitToScreen=!1,n.fireEvent(new t.mxEventObject("fitToScreen"))):i.fitHorizontal&&e&&(i.fitHorizontal=!1,n.fireEvent(new t.mxEventObject("fitHorizontal"))),n.fireEvent(new t.mxEventObject("fitVertical"))},{install:function(t){this.listener=function(){t(i.fitVertical)},n.addListener("fitVertical",this.listener)},destroy:function(){n.removeListener(this.listener)}})),e.appendChild(this.createOption(t.mxResources.get("zoomEnabled"),function(){return i.zoomEnabled},function(e){i.zoomEnabled=e,n.fireEvent(new t.mxEventObject("zoomEnabled"))},{install:function(t){this.listener=function(){t(i.zoomEnabled)},n.addListener("zoomEnabled",this.listener)},destroy:function(){n.removeListener(this.listener)}})),e.appendChild(this.createOption(t.mxResources.get("hoverEnabled"),function(){return i.hoverEnabled},function(e){i.hoverEnabled=e,n.fireEvent(new t.mxEventObject("hoverEnabled"))},{install:function(t){this.listener=function(){t(i.hoverEnabled)},n.addListener("hoverEnabled",this.listener)},destroy:function(){n.removeListener(this.listener)}})),e},t.BaseFormatPanel.prototype.createOption=function(e,n,i,l){var o=document.createElement("div");o.style.padding="6px 0px 1px 0px",o.style.whiteSpace="nowrap",o.style.overflow="hidden",o.style.width="200px",o.style.height="18px";var s=document.createElement("input");s.setAttribute("type","checkbox"),s.id="showGridId",s.style.margin="0px 6px 0px 0px",o.appendChild(s);var r=document.createElement("span");t.mxUtils.write(r,e),o.appendChild(r);var a=!1,h=n(),u=function(t){s.disabled||a||(a=!0,t?(s.setAttribute("checked","checked"),s.defaultChecked=!0,s.checked=!0):(s.removeAttribute("checked"),s.defaultChecked=!1,s.checked=!1),h!=t&&(h=t,n()!=h&&i(h)),a=!1)};return t.mxEvent.addListener(o,"click",function(e){if(!s.disabled&&"disabled"!=s.getAttribute("disabled")){var n=t.mxEvent.getSource(e);n!=o&&n!=r||(s.checked=!s.checked),u(s.checked)}}),u(h),null!=l&&(l.install(u),this.listeners.push(l)),o},t.DiagramFormatPanel.prototype.addStyleOps=function(e){var n=t.mxUtils.button(t.mxResources.get("clearDefaultStyle"),t.mxUtils.bind(this,function(t){this.editorUi.actions.get("clearDefaultStyle").funct()}));return n.setAttribute("title",t.mxResources.get("clearDefaultStyle")+" ("+this.editorUi.actions.get("clearDefaultStyle").shortcut+")"),n.setAttribute("class","btn btn-secondary"),n.style.width="80%",n.style.height="1.5rem",e.appendChild(n),e},t.DiagramFormatPanel.prototype.addGridOption=function(e){var n=this,i=this.editorUi,l=i.editor.graph,o=document.createElement("input");o.style.position="absolute",o.style.textAlign="right",o.style.width="38px",o.value=this.inUnit(l.getGridSize())+" "+this.getUnit();var s=this.createStepper(o,r,this.getUnitStep(),null,null,null,this.isFloatUnit());function r(e){var i=n.isFloatUnit()?parseFloat(o.value):parseInt(o.value);(i=n.fromUnit(Math.max(n.inUnit(1),isNaN(i)?n.inUnit(10):i)))!=l.getGridSize()&&l.setGridSize(i),o.value=n.inUnit(i)+" "+n.getUnit(),t.mxEvent.consume(e)}o.style.display=l.isGridEnabled()?"":"none",s.style.display=o.style.display,t.mxEvent.addListener(o,"keydown",function(e){13==e.keyCode?(l.container.focus(),t.mxEvent.consume(e)):27==e.keyCode&&(o.value=l.getGridSize(),l.container.focus(),t.mxEvent.consume(e))}),t.mxEvent.addListener(o,"blur",r),t.mxEvent.addListener(o,"change",r);var a=function(t,e){o.value=n.inUnit(l.getGridSize())+" "+n.getUnit(),n.format.refresh()};l.view.addListener("unitChanged",a),this.listeners.push({destroy:function(){l.view.removeListener(a)}}),o.style.marginTop="-2px",o.style.right="84px",s.style.marginTop="-16px",s.style.right="72px";var h=this.createColorOption(t.mxResources.get("grid"),function(){var t=l.view.gridColor;return l.isGridEnabled()?t:null},function(e){var n=l.isGridEnabled();"none"==e?l.setGridEnabled(!1):(l.setGridEnabled(!0),i.setGridColor(e)),o.style.display=l.isGridEnabled()?"":"none",s.style.display=o.style.display,n!=l.isGridEnabled()&&(l.saveToPreview=!1,i.fireEvent(new t.mxEventObject("savePreview")),i.fireEvent(new t.mxEventObject("gridEnabledChanged")));var r=document.getElementById("showGridId");n&&r?r.setAttribute("disabled","true"):r&&r.removeAttribute("disabled")},l.view.gridColor,{install:function(t){this.listener=function(){t(l.isGridEnabled()?l.view.gridColor:null)},i.addListener("gridColorChanged",this.listener),i.addListener("gridEnabledChanged",this.listener)},destroy:function(){i.removeListener(this.listener)}});h.appendChild(o),h.appendChild(s),e.appendChild(h)},t.DiagramFormatPanel.prototype.addOptions=function(e){var n=this.editorUi,i=n.editor.graph;return e.appendChild(this.createTitle(t.mxResources.get("options"))),t.DiagramFormatPanel.showPageView&&e.appendChild(this.createOption(t.mxResources.get("pageView"),function(){return i.pageVisible},function(t){n.actions.get("pageView").funct()},{install:function(t){this.listener=function(){t(i.pageVisible)},n.addListener("pageViewChanged",this.listener)},destroy:function(){n.removeListener(this.listener)}})),i.isEnabled()&&(e.appendChild(this.createOption(t.mxResources.get("connectionArrows"),function(){return i.connectionArrowsEnabled},function(t){n.actions.get("connectionArrows").funct()},{install:function(t){this.listener=function(){t(i.connectionArrowsEnabled)},n.addListener("connectionArrowsChanged",this.listener)},destroy:function(){n.removeListener(this.listener)}})),e.appendChild(this.createOption(t.mxResources.get("connectionPoints"),function(){return i.connectionHandler.isEnabled()},function(t){n.actions.get("connectionPoints").funct()},{install:function(t){this.listener=function(){t(i.connectionHandler.isEnabled())},n.addListener("connectionPointsChanged",this.listener)},destroy:function(){n.removeListener(this.listener)}})),e.appendChild(this.createOption(t.mxResources.get("guides"),function(){return i.graphHandler.guidesEnabled},function(t){n.actions.get("guides").funct()},{install:function(t){this.listener=function(){t(i.graphHandler.guidesEnabled)},n.addListener("guidesEnabledChanged",this.listener)},destroy:function(){n.removeListener(this.listener)}}))),e}},t.ngInjectableDef=i.T({factory:function(){return new t(i.X(w))},token:t,providedIn:"root"}),t}(),Vt=function(){function t(t,e,n,i,l){this._handleGraph=t,this._app=e,this._toastLoad=n,this._sidebar=i,this._util=l,this.default_images_key_access=[]}return t.prototype.loadXMLIntoContainer=function(t,e,n){var i=this,l=this._handleGraph.getGraphObject();e.Editor.prototype.setGraphXml=function(t){this.graph=l;var o=e.mxUtils.parseXml(t).documentElement;if(null!=o){var s=new e.mxCodec(o.ownerDocument);if("mxGraphModel"==o.nodeName){this.graph.model.beginUpdate();try{this.graph.model.clear(),this.graph.view.scale=1,this.readGraphState(o),this.updateGraphComponents(),s.decode(o,this.graph.getModel()),i.fetchDefaultImages(o.getElementsByTagName("mxCell"),this.graph,e,n)}catch(a){console.log(a)}finally{this.graph.model.endUpdate()}this.fireEvent(new e.mxEventObject("resetGraphView"))}else{if("root"!=o.nodeName)throw{message:e.mxResources.get("cannotOpenFile"),node:o,toString:function(){return this.message}};this.resetGraph();var r=s.document.createElement("mxGraphModel");r.appendChild(o),s.decode(r,this.graph.getModel()),this.updateGraphComponents(),this.fireEvent(new e.mxEventObject("resetGraphView"))}}else this.resetGraph(),this.graph.model.clear(),this.fireEvent(new e.mxEventObject("resetGraphView"));e._editorUi.editor.undoManager.clear(),e._editorUi.editor.setModified(!1)};var o="";try{o=atob(t.widget.wcData[0].SCADAData),e.Editor.prototype.setGraphXml(o),e._editorUi.editor.setModified(!1)}catch(s){console.log(s)}},t.prototype.updateVersionSpecificUrl=function(t,e,n,i){for(var l=e.getModel(),o=0,s=t;o<s.length;o++){var r=l.getCell(s[o].getAttribute("id"));if(i&&r&&r.style&&r.style.includes("locked=1;")&&e.setCellStyles("locked","0",[r]),r&&!r.version&&r.style&&r.style.includes("shape=image;")){var a=r.style.split(";"),h="";r.style="";for(var u=0,d=a;u<d.length;u++){var c=d[u];if(c.includes("image=")){var p=c.split("=")[1].split("/"),m=p[p.length-1];this.default_images_key_access[m]&&(h=h+"image="+this._sidebar.getHostIp(this._util.appMode)+this.default_images_key_access[m]+";")}else""!==c&&(h=h+c+";");if(r.style.includes("shape=image;")&&r.style.includes("image=")){var g=r.style.split("image=")[0],x=this._sidebar.getHostIp(this._util.appMode),y=r.style.split("//")[1].split("/");y.shift(),r.style=g+"image="+x+"/"+y.join("/")}e.setCellStyle(n.mxUtils.trim(h),[r]),r.version=1}}}},t.prototype.fetchDefaultImages=function(t,e,n,i){var l=this;this._app.getAllImagesInfo({}).subscribe(function(o){if("success"==o.status){l.default_images_key_access=[];for(var s=0,r=o.data.images_info;s<r.length;s++){var a=r[s],h=a.url.split("/");l.default_images_key_access[h[h.length-1]]=a.url}l.updateVersionSpecificUrl(t,e,n,i)}else l._toastLoad.toast("error","Error","Failed to load default images",!0)},function(t){l._toastLoad.toast("error","Error","Failed to load default images",!0)})},t.prototype.formatGraphSettings=function(t){var e=this._handleGraph.getGraphObject(),n=t.getAttribute("fitHorizontal");n&&(this._handleGraph.graph.fitHorizontal="true"==n);var i=t.getAttribute("fitVertical");i&&(this._handleGraph.graph.fitVertical="true"==i);var l=t.getAttribute("zoomEnabled");l&&(this._handleGraph.graph.zoomEnabled="true"==l);var o=t.getAttribute("hoverEnabled");o&&(this._handleGraph.graph.hoverEnabled="true"==o);var s=t.getAttribute("fitToScreen");s&&(this._handleGraph.graph.fitToScreen="true"==s),null!=e.view.canvas.ownerSVGElement&&(this._handleGraph.graph.view.canvas=e.view.canvas.ownerSVGElement);var r=t.getAttribute("background");this._handleGraph.graph.view.canvas.style.backgroundColor="none"==r?"white":r;var a=t.getAttribute("saveToPreview");this._handleGraph.graph.saveToPreview=!!this._handleGraph.graph.isGridEnabled()&&"true"==a,"true"==a?(this._handleGraph.graph.gridEnabled="true"==t.getAttribute("saveToPreview"),this._handleGraph.graph.view.gridColor=t.getAttribute("gridColor"),this._handleGraph.graph.gridSize=t.getAttribute("gridSize")):this._handleGraph.graph.saveToPreview="true"==t.getAttribute("saveToPreview")},t.ngInjectableDef=i.T({factory:function(){return new t(i.X(w),i.X(h.a),i.X(u.a),i.X(M),i.X(A.a))},token:t,providedIn:"root"}),t}(),Bt=n("AXqq"),zt=n("FU7m"),Yt=function(){function t(t,e,n,l,o,s,r,a,h){this._toastLoad=t,this._editorUI=e,this._menu=n,this._handleXML=l,this._handleGraph=o,this._sidebar=s,this._auth=r,this._preview=a,this._formatPanel=h,this.refetchScada=new i.m}return t.prototype.ngOnInit=function(){this.graphContainer.nativeElement.innerHTML="",this._handleGraph.graph="",this._menu.updateMenu(Bt,null),this._editorUI.uiSettings(Bt,null),this._formatPanel.constructFormatPanel(Bt,null),this._sidebar.fixSidebar(Bt,null),this._editorUI.editorGraphSettings(Bt,null),this._handleGraph.overridesForEditorConditions(Bt,null),this.initializeGraph(),document.body.classList.add("main-content-fullScreen"),this._editorUI.removeOpenDropDowns()},t.prototype.ngOnChanges=function(){this.scadaData.hasOwnProperty("dashboardId")&&""!==this.scadaData.dashboardId&&this.setUpEditor(),history.pushState(null,null,location.href),window.onpopstate=function(){history.go(1)}},t.prototype.setUpEditor=function(){this.loadXml(),Bt.mxKeyHandler.prototype.setEnabled(!0)},t.prototype.canDeactivate=function(){if(Bt._editorUi.editor.modified){var t=window.confirm("There are unsaved changes! Are you sure?");return zt.Observable.of(t)}return!0},t.prototype.initializeGraph=function(){var t=this;window.STENCIL_PATH="/assets/library/scada/resources/stencils/",window.RESOURCES_PATH="/assets/library/scada/resources/images/",window.IMAGE_PATH="/assets/library/scada/resources/images/";try{return Bt.mxUtils.getAll([Bt.mxResources.getDefaultBundle("/assets/library/scada/resources/elmeasure",mxLanguage),"/assets/library/scada/resources/stencils/default.xml"],function(e){Bt.mxResources.parse(e[0].getText());var n=new Object;n.default=e[1].getDocumentElement(),t._handleGraph.graph=new Bt.Graph(null,null,null,null,n,null),t._handleGraph.graph.transparentBackground=!1,new Bt.EditorUi(new Bt.Editor(!1,n.default,null,t._handleGraph.graph,!0),t.graphContainer.nativeElement)},function(){t._toastLoad.toast("error","Error","Failed to load",!0)})}catch(e){console.log(e)}},t.prototype.loadXml=function(){var t=this;if(this.scadaData.hasOwnProperty("dashboardId")&&""!==this.scadaData.dashboardId)var e=setInterval(function(){if(t._handleGraph.graph){clearInterval(e);var n,i=null;t._handleGraph.graph.panningHandler.addListener(Bt.mxEvent.PAN_START,Bt.mxUtils.bind(t,function(){this._handleGraph.graph.isEnabled()&&(i=this._handleGraph.graph.container.style.cursor,this._handleGraph.graph.container.style.cursor="move")})),t._handleGraph.graph.panningHandler.addListener(Bt.mxEvent.PAN_END,Bt.mxUtils.bind(t,function(){this._handleGraph.graph.isEnabled()&&(this._handleGraph.graph.container.style.cursor=i)})),t.scadaData.widget&&t.scadaData.widget.wcData&&0==t.scadaData.widget.wcData.length?n=btoa(Bt.mxUtils.getPrettyXml(Bt._editorUi.editor.getGraphXml())):t.scadaData.widget&&t.scadaData.widget.wcData&&(n=atob(t.scadaData.widget.wcData[0].SCADAData)),t._handleXML.formatGraphSettings(Bt.mxUtils.parseXml(n).childNodes[0]),t._handleGraph.graph.scadaData=t.scadaData,t._handleXML.loadXMLIntoContainer(t.scadaData,Bt),setTimeout(function(){t._editorUI.loaderToggleOff()},200),t._editorUI.enableMenu()}},100)},t.prototype.destroyEditorWindows=function(t){var e=Bt._editorUi.actions[t];e&&e.destroy()},t.prototype.ngOnDestroy=function(){this._editorUI.loaderToggleOn(),this.destroyEditorWindows("layersWindow"),this.destroyEditorWindows("outlineWindow"),document.body.classList.remove("main-content-fullScreen"),this.refetchScada.emit("refetchScada")},t}(),jt=i.ob({encapsulation:0,styles:[[""]],data:{}});function Wt(t){return i.Kb(0,[i.Gb(402653184,1,{graphContainer:0}),(t()(),i.qb(1,0,[[1,0],["graphContainer",1]],null,0,"div",[["class","graphContainer"]],null,null,null,null,null)),(t()(),i.qb(2,0,null,null,0,"button",[["class","btn btn-primary m-auto d-none"],["data-target","#liveData_modal"],["data-toggle","modal"],["id","scada_liveData_modal"],["type","button"]],null,null,null,null,null)),(t()(),i.qb(3,0,null,null,2,"div",[["aria-hidden","true"],["aria-labelledby","exampleModalLabel"],["class","modal fade"],["id","liveData_modal"],["role","dialog"],["tabindex","-1"]],null,null,null,null,null)),(t()(),i.qb(4,0,null,null,1,"kl-scada-live-configuration",[],null,null,null,Lt,U)),i.pb(5,638976,null,0,D,[h.a,u.a,S.a,m.a,M,T,A.a,_,w],{isPopupOpened:[0,"isPopupOpened"]},null),(t()(),i.qb(6,0,null,null,0,"button",[["class","btn btn-primary m-auto d-none"],["data-target","#assetControl_modal"],["data-toggle","modal"],["id","scada_assetControl_modal"],["type","button"]],null,null,null,null,null)),(t()(),i.qb(7,0,null,null,2,"div",[["aria-hidden","true"],["aria-labelledby","exampleModalLabel"],["class","modal fade"],["id","assetControl_modal"],["role","dialog"],["tabindex","-1"]],null,null,null,null,null)),(t()(),i.qb(8,0,null,null,1,"kl-scada-asset-control",[],null,null,null,Ht,Ot)),i.pb(9,638976,null,0,Rt,[h.a,u.a,m.a,M,w],{isPopupOpened:[0,"isPopupOpened"]},null)],function(t,e){var n=e.component;t(e,5,0,n._editorUI.liveData),t(e,9,0,n._editorUI.assetControl)},null)}var qt=n("a9uJ"),Xt=n("XW5A"),Zt=function(){function t(t){this._appService=t,this.headerTitle="History",this.isHistoryResponse=!1,this.isHistoryDataMessage=!1,this.historyExecutionDropdownList=[],this.historyExecutionData=[],this.queryStringHistoryTable="",this.historyDefaultDropdownValue="Activity",this.isHistoryLoading=!1,this.historyExecutionTable=[],this.finalRangeHistoryExecutionTable=25}return t.prototype.ngOnInit=function(){},t.prototype.ngOnChanges=function(){this.action_id.includes("asset_action_")&&this.actionHistory(this.action_id)},t.prototype.actionHistory=function(t,e){var n=this;this.isHistoryExecutionTableLoadMore=!1,this.isHistoryResponse=!1,this.isHistoryDataMessage=!1,this.historyExecutionDropdownList=[],this.historyExecutionData=[],this.queryStringHistoryTable="",this.historyDefaultDropdownValue="Activity",this.isHistoryLoading=!0,this.headerLabelName="";var i={};void 0===t?i={asset_action_id:this.historyRetryId,type:this.pageType}:(this.historyRetryId=t,i={asset_action_id:t,type:this.pageType}),this._appService.historyAssetControlData(i).subscribe(function(t){n.isHistoryLoading=!1,"success"===t.status?(n.historyExecutionDropdownList=t.data,t.action_name&&(n.headerLabelName="- "+t.action_name),n.historyExecutionDropdownList.length>0&&n.actionHistoryInfo(n.historyExecutionDropdownList[0].execution_id)):(n.isHistoryResponse=!1,n.isHistoryExecutionTableLoadMore=!1,n.isHistoryDataMessage=!0,n.isHistoryLoading=!1)},function(t){console.log(t),n.isHistoryLoading=!1,n.isHistoryResponse=!0,n.isHistoryDataMessage=!1})},t.prototype.actionHistoryInfo=function(t){var e=this;this.isHistoryExecutionTableLoadMore=!1,this.isHistoryLoading=!0,this.isHistoryResponse=!1,this.isHistoryDataMessage=!1,this.queryStringHistoryTable="",this.isHistoryExecutionTableLoadMore=!1;for(var n={execution_id:t,type:this.pageType},i=0;i<this.historyExecutionDropdownList.length;i++)this.historyExecutionDropdownList[i].execution_id===t&&(this.historyDefaultDropdownValue=this.historyExecutionDropdownList[i].date_and_time+" by "+this.historyExecutionDropdownList[i].triggered_by);this._appService.historyInfoAssetControlData(n).subscribe(function(t){e.isHistoryLoading=!1,t?(e.isHistoryDataMessage=!1,e.historyExecutionData=t,e.historyExecutionTable=t.body_content,e.historyExecutionTable.length>=e.finalRangeHistoryExecutionTable&&(e.isHistoryExecutionTableLoadMore=!0)):(e.historyExecutionData=[],e.isHistoryExecutionTableLoadMore=!1,e.isHistoryDataMessage=!0,e.isHistoryResponse=!1,e.isHistoryLoading=!1)},function(t){console.log(t),e.isHistoryLoading=!1,e.isHistoryResponse=!0,e.isHistoryDataMessage=!1})},t.prototype.cancelHistoryInfoModal=function(){this.historyExecutionDropdownList=[],this.historyExecutionData=[],this.queryStringHistoryTable="",this.isHistoryExecutionTableLoadMore=!1,this.finalRangeHistoryExecutionTable=30},t}(),Kt=i.ob({encapsulation:0,styles:[[".modal-header[_ngcontent-%COMP%]{height:60px!important}.modal-content[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child, .modal-content[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:last-child{text-align:center!important}.modal-content[_ngcontent-%COMP%]   .search-group[_ngcontent-%COMP%]{height:36px}"],qt.a],data:{}});function Jt(t){return i.Kb(0,[(t()(),i.Ib(0,null,[" "," "]))],null,function(t,e){t(e,0,0,e.component.historyDefaultDropdownValue)})}function Qt(t){return i.Kb(0,[(t()(),i.Ib(0,null,[" "," by "," "]))],null,function(t,e){t(e,0,0,e.context.item.date_and_time,e.context.item.triggered_by)})}function $t(t){return i.Kb(0,[(t()(),i.qb(0,0,null,null,1,"th",[],null,null,null,null,null)),(t()(),i.Ib(1,null,["",""]))],null,function(t,e){t(e,1,0,e.context.$implicit.label)})}function te(t){return i.Kb(0,[(t()(),i.qb(0,0,null,null,1,"span",[],null,null,null,null,null)),(t()(),i.Ib(1,null,[" "," "]))],null,function(t,e){t(e,1,0,e.parent.parent.context.$implicit[e.parent.context.$implicit.key])})}function ee(t){return i.Kb(0,[(t()(),i.qb(0,0,null,null,2,"span",[],null,null,null,null,null)),(t()(),i.qb(1,0,null,null,1,"span",[["class","table-status success"]],null,null,null,null,null)),(t()(),i.Ib(2,null,[" "," "]))],null,function(t,e){t(e,2,0,e.parent.parent.parent.context.$implicit[e.parent.parent.context.$implicit.key])})}function ne(t){return i.Kb(0,[(t()(),i.qb(0,0,null,null,2,"span",[],null,null,null,null,null)),(t()(),i.qb(1,0,null,null,1,"span",[["class","table-status failed"]],null,null,null,null,null)),(t()(),i.Ib(2,null,[" "," "]))],null,function(t,e){t(e,2,0,e.parent.parent.parent.context.$implicit[e.parent.parent.context.$implicit.key])})}function ie(t){return i.Kb(0,[(t()(),i.qb(0,0,null,null,4,"span",[],null,null,null,null,null)),(t()(),i.hb(16777216,null,null,1,null,ee)),i.pb(2,16384,null,0,C.l,[i.P,i.M],{ngIf:[0,"ngIf"]},null),(t()(),i.hb(16777216,null,null,1,null,ne)),i.pb(4,16384,null,0,C.l,[i.P,i.M],{ngIf:[0,"ngIf"]},null)],function(t,e){t(e,2,0,"success"==e.parent.parent.context.$implicit[e.parent.context.$implicit.key]),t(e,4,0,"failed"==e.parent.parent.context.$implicit[e.parent.context.$implicit.key])},null)}function le(t){return i.Kb(0,[(t()(),i.qb(0,0,null,null,4,"td",[],null,null,null,null,null)),(t()(),i.hb(16777216,null,null,1,null,te)),i.pb(2,16384,null,0,C.l,[i.P,i.M],{ngIf:[0,"ngIf"]},null),(t()(),i.hb(16777216,null,null,1,null,ie)),i.pb(4,16384,null,0,C.l,[i.P,i.M],{ngIf:[0,"ngIf"]},null)],function(t,e){t(e,2,0,"status"!=e.context.$implicit.key),t(e,4,0,"status"==e.context.$implicit.key)},null)}function oe(t){return i.Kb(0,[(t()(),i.qb(0,0,null,null,2,"tr",[],null,null,null,null,null)),(t()(),i.hb(16777216,null,null,1,null,le)),i.pb(2,278528,null,0,C.k,[i.P,i.M,i.s],{ngForOf:[0,"ngForOf"]},null)],function(t,e){t(e,2,0,e.component.historyExecutionData.header_content)},null)}function se(t){return i.Kb(0,[(t()(),i.qb(0,0,null,null,10,"table",[["class","table"]],null,null,null,null,null)),(t()(),i.qb(1,0,null,null,3,"thead",[],null,null,null,null,null)),(t()(),i.qb(2,0,null,null,2,"tr",[],null,null,null,null,null)),(t()(),i.hb(16777216,null,null,1,null,$t)),i.pb(4,278528,null,0,C.k,[i.P,i.M,i.s],{ngForOf:[0,"ngForOf"]},null),(t()(),i.qb(5,0,null,null,5,"tbody",[],null,null,null,null,null)),(t()(),i.hb(16777216,null,null,4,null,oe)),i.pb(7,278528,null,0,C.k,[i.P,i.M,i.s],{ngForOf:[0,"ngForOf"],ngForTrackBy:[1,"ngForTrackBy"]},null),i.Bb(8,4),i.Eb(9,5),i.Cb(0,C.v,[])],function(t,e){var n=e.component;t(e,4,0,n.historyExecutionData.header_content);var l=i.Jb(e,7,0,i.Ab(e,10).transform(i.Jb(e,7,0,t(e,9,0,i.Ab(e.parent,0),n.historyExecutionData.body_content,n.queryStringHistoryTable,t(e,8,0,"asset_name","tag","value","status"),!0,2)),n.initialRangeHistoryExecutionTable,n.finalRangeHistoryExecutionTable));t(e,7,0,l,n.trackAssetControlList)},null)}function re(t){return i.Kb(0,[(t()(),i.qb(0,0,null,null,3,"div",[["class","btn-load-more"]],null,null,null,null,null)),(t()(),i.qb(1,0,null,null,2,"button",[["class","btn btn-sm  btn-outline-primary"]],null,[[null,"click"]],function(t,e,n){var i=!0;return"click"===e&&(i=!1!==t.component.loadMoreHistoryLists()&&i),i},null,null)),(t()(),i.qb(2,0,null,null,0,"i",[["class","fa fa-repeat"]],null,null,null,null,null)),(t()(),i.Ib(-1,null,[" Load More"]))],null,null)}function ae(t){return i.Kb(0,[(t()(),i.qb(0,0,null,null,5,"div",[["class","position-relative h-100"]],null,null,null,null,null)),(t()(),i.qb(1,0,null,null,4,"div",[["class","lds-ring"]],null,null,null,null,null)),(t()(),i.qb(2,0,null,null,0,"div",[],null,null,null,null,null)),(t()(),i.qb(3,0,null,null,0,"div",[],null,null,null,null,null)),(t()(),i.qb(4,0,null,null,0,"div",[],null,null,null,null,null)),(t()(),i.qb(5,0,null,null,0,"div",[],null,null,null,null,null))],null,null)}function he(t){return i.Kb(0,[(t()(),i.qb(0,0,null,null,5,"div",[["class","empty-history"]],null,null,null,null,null)),(t()(),i.qb(1,0,null,null,0,"span",[["class","fa fa-clock-o"]],null,null,null,null,null)),(t()(),i.qb(2,0,null,null,1,"h6",[["class","text-muted"]],null,null,null,null,null)),(t()(),i.Ib(-1,null,[" History data not found "])),(t()(),i.qb(4,0,null,null,1,"p",[],null,null,null,null,null)),(t()(),i.Ib(-1,null,[" Choose another activity from the activity list to view the history of other schedules. "]))],null,null)}function ue(t){return i.Kb(0,[(t()(),i.qb(0,0,null,null,9,"div",[["class","modal-body"]],null,null,null,null,null)),(t()(),i.qb(1,0,null,null,8,"div",[["class","empty-history"]],null,null,null,null,null)),(t()(),i.qb(2,0,null,null,0,"span",[["class","fa fa-refresh"]],null,null,null,null,null)),(t()(),i.qb(3,0,null,null,1,"h6",[["class","text-muted"]],null,null,null,null,null)),(t()(),i.Ib(-1,null,[" Failed "])),(t()(),i.qb(5,0,null,null,1,"p",[["class","text-muted"]],null,null,null,null,null)),(t()(),i.Ib(-1,null,[" Invalid response from server. Please try again later. "])),(t()(),i.qb(7,0,null,null,2,"button",[["class","btn btn-sm btn-link widget-text-color"]],null,[[null,"click"]],function(t,e,n){var i=!0;return"click"===e&&(i=!1!==t.component.actionHistory(n.execution_id)&&i),i},null,null)),(t()(),i.qb(8,0,null,null,0,"i",[["class","fa fa-repeat"]],null,null,null,null,null)),(t()(),i.Ib(-1,null,[" Try Again "]))],null,null)}function de(t){return i.Kb(0,[(t()(),i.qb(0,0,null,null,3,"div",[["class","d-flex align-items-center justify-content-center flex-column h-100"]],null,null,null,null,null)),(t()(),i.qb(1,0,null,null,1,"h6",[["class","text-muted"]],null,null,null,null,null)),(t()(),i.Ib(-1,null,[" No results found "])),(t()(),i.qb(3,0,null,null,0,"p",[["class","text-muted"]],null,null,null,null,null))],null,null)}function ce(t){return i.Kb(0,[i.Cb(0,Xt.a,[]),(t()(),i.qb(1,0,null,null,61,"div",[["class","modal-content h-100"]],null,null,null,null,null)),(t()(),i.qb(2,0,null,null,40,"div",[["class","modal-header dropdown"]],null,null,null,null,null)),(t()(),i.qb(3,0,null,null,1,"h6",[["class","modal-title text-muted"]],null,null,null,null,null)),(t()(),i.Ib(4,null,[" "," "])),(t()(),i.qb(5,0,null,null,8,"div",[["class","search-group mr-2 ml-auto"],["tabindex","1"]],null,null,null,null,null)),(t()(),i.qb(6,0,null,null,0,"i",[["class","fa fa-search search-icon"]],null,null,null,null,null)),(t()(),i.qb(7,0,null,null,6,"input",[["class","search-input"],["placeholder","Search"],["type","search"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(t,e,n){var l=!0,o=t.component;return"input"===e&&(l=!1!==i.Ab(t,8)._handleInput(n.target.value)&&l),"blur"===e&&(l=!1!==i.Ab(t,8).onTouched()&&l),"compositionstart"===e&&(l=!1!==i.Ab(t,8)._compositionStart()&&l),"compositionend"===e&&(l=!1!==i.Ab(t,8)._compositionEnd(n.target.value)&&l),"ngModelChange"===e&&(l=!1!==(o.queryStringHistoryTable=n)&&l),l},null,null)),i.pb(8,16384,null,0,b.e,[i.E,i.k,[2,b.a]],null,null),i.Fb(1024,null,b.o,function(t){return[t]},[b.e]),i.pb(10,671744,null,0,b.t,[[8,null],[8,null],[8,null],[6,b.o]],{model:[0,"model"],options:[1,"options"]},{update:"ngModelChange"}),i.Db(11,{standalone:0}),i.Fb(2048,null,b.p,null,[b.t]),i.pb(13,16384,null,0,b.q,[[4,b.p]],null,null),(t()(),i.qb(14,0,null,null,28,"ng-select",[["bindLabel","triggered_by"],["bindValue","date_and_time"],["class","ng-select"],["name","historyDefaultDropdownValue"],["ngDefaultControl",""],["placeholder","Activity"],["role","listbox"]],[[2,"ng-select-single",null],[2,"ng-select-typeahead",null],[2,"ng-select-multiple",null],[2,"ng-select-taggable",null],[2,"ng-select-searchable",null],[2,"ng-select-clearable",null],[2,"ng-select-opened",null],[2,"ng-select-disabled",null],[2,"ng-select-filtered",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"change"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"keydown"]],function(t,e,n){var l=!0,o=t.component;return"input"===e&&(l=!1!==i.Ab(t,16)._handleInput(n.target.value)&&l),"blur"===e&&(l=!1!==i.Ab(t,16).onTouched()&&l),"compositionstart"===e&&(l=!1!==i.Ab(t,16)._compositionStart()&&l),"compositionend"===e&&(l=!1!==i.Ab(t,16)._compositionEnd(n.target.value)&&l),"keydown"===e&&(l=!1!==i.Ab(t,17).handleKeyDown(n)&&l),"ngModelChange"===e&&(l=!1!==(o.historyDefaultDropdownValue=n)&&l),"change"===e&&(l=!1!==o.actionHistoryInfo(n.execution_id)&&l),l},f.c,f.a)),i.Fb(4608,null,v.f,v.f,[]),i.pb(16,16384,null,0,b.e,[i.E,i.k,[2,b.a]],null,null),i.pb(17,4964352,null,12,v.a,[[8,null],[8,null],[8,null],v.b,v.d,i.k,i.h,v.l],{bindLabel:[0,"bindLabel"],bindValue:[1,"bindValue"],placeholder:[2,"placeholder"],clearable:[3,"clearable"],items:[4,"items"]},{blurEvent:"blur",changeEvent:"change"}),i.Gb(335544320,1,{optionTemplate:0}),i.Gb(335544320,2,{optgroupTemplate:0}),i.Gb(335544320,3,{labelTemplate:0}),i.Gb(335544320,4,{multiLabelTemplate:0}),i.Gb(335544320,5,{headerTemplate:0}),i.Gb(335544320,6,{footerTemplate:0}),i.Gb(335544320,7,{notFoundTemplate:0}),i.Gb(335544320,8,{typeToSearchTemplate:0}),i.Gb(335544320,9,{loadingTextTemplate:0}),i.Gb(335544320,10,{tagTemplate:0}),i.Gb(335544320,11,{loadingSpinnerTemplate:0}),i.Gb(603979776,12,{ngOptions:1}),i.Fb(1024,null,b.o,function(t,e){return[t,e]},[v.a,b.e]),i.pb(31,671744,null,0,b.t,[[8,null],[8,null],[8,null],[6,b.o]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),i.Fb(2048,null,b.p,null,[b.t]),i.pb(33,16384,null,0,b.q,[[4,b.p]],null,null),(t()(),i.hb(0,[[3,2]],null,6,function(t,e,n){var l=!0,o=t.component;return"input"===e&&(l=!1!==i.Ab(t,35)._handleInput(n.target.value)&&l),"blur"===e&&(l=!1!==i.Ab(t,35).onTouched()&&l),"compositionstart"===e&&(l=!1!==i.Ab(t,35)._compositionStart()&&l),"compositionend"===e&&(l=!1!==i.Ab(t,35)._compositionEnd(n.target.value)&&l),"ngModelChange"===e&&(l=!1!==(o.historyDefaultDropdownValue=n)&&l),l},Jt)),i.pb(35,16384,null,0,b.e,[i.E,i.k,[2,b.a]],null,null),i.Fb(1024,null,b.o,function(t){return[t]},[b.e]),i.pb(37,671744,null,0,b.t,[[8,null],[8,null],[8,null],[6,b.o]],{model:[0,"model"]},{update:"ngModelChange"}),i.Fb(2048,null,b.p,null,[b.t]),i.pb(39,16384,null,0,b.q,[[4,b.p]],null,null),i.pb(40,16384,null,0,v.i,[i.M],null,null),(t()(),i.hb(0,[[1,2]],null,1,null,Qt)),i.pb(42,16384,null,0,v.g,[i.M],null,null),(t()(),i.qb(43,0,null,null,16,"div",[["class","modal-body pt-0"]],null,null,null,null,null)),(t()(),i.hb(16777216,null,null,1,null,se)),i.pb(45,16384,null,0,C.l,[i.P,i.M],{ngIf:[0,"ngIf"]},null),(t()(),i.hb(16777216,null,null,3,null,re)),i.pb(47,16384,null,0,C.l,[i.P,i.M],{ngIf:[0,"ngIf"]},null),i.Bb(48,3),i.Eb(49,5),(t()(),i.hb(16777216,null,null,1,null,ae)),i.pb(51,16384,null,0,C.l,[i.P,i.M],{ngIf:[0,"ngIf"]},null),(t()(),i.hb(16777216,null,null,1,null,he)),i.pb(53,16384,null,0,C.l,[i.P,i.M],{ngIf:[0,"ngIf"]},null),(t()(),i.hb(16777216,null,null,1,null,ue)),i.pb(55,16384,null,0,C.l,[i.P,i.M],{ngIf:[0,"ngIf"]},null),(t()(),i.hb(16777216,null,null,3,null,de)),i.pb(57,16384,null,0,C.l,[i.P,i.M],{ngIf:[0,"ngIf"]},null),i.Bb(58,4),i.Eb(59,5),(t()(),i.qb(60,0,null,null,2,"div",[["class","modal-footer"]],null,null,null,null,null)),(t()(),i.qb(61,0,null,null,1,"button",[["class","btn btn-sm btn-secondary"],["data-dismiss","modal"],["type","button"]],null,[[null,"click"]],function(t,e,n){var i=!0;return"click"===e&&(i=!1!==t.component.cancelHistoryInfoModal()&&i),i},null,null)),(t()(),i.Ib(-1,null,["Close"]))],function(t,e){var n=e.component,l=n.queryStringHistoryTable,o=t(e,11,0,!0);t(e,10,0,l,o),t(e,17,0,"triggered_by","date_and_time","Activity",!1,n.historyExecutionDropdownList),t(e,31,0,"historyDefaultDropdownValue",n.historyDefaultDropdownValue),t(e,37,0,n.historyDefaultDropdownValue),t(e,45,0,!n.isHistoryDataMessage&&!n.isHistoryResponse&&!n.isHistoryLoading);var s=n.isHistoryExecutionTableLoadMore&&i.Jb(e,47,0,t(e,49,0,i.Ab(e,0),n.historyExecutionData.body_content,n.queryStringHistoryTable,t(e,48,0,"asset_name","tag","value"),!0,2)).length>30;t(e,47,0,s),t(e,51,0,n.isHistoryLoading),t(e,53,0,n.isHistoryDataMessage),t(e,55,0,n.isHistoryResponse);var r=!n.isHistoryDataMessage&&!n.isHistoryResponse&&!n.isHistoryLoading&&0===i.Jb(e,57,0,t(e,59,0,i.Ab(e,0),n.historyExecutionData.body_content,n.queryStringHistoryTable,t(e,58,0,"asset_name","tag","value","status"),!0,2)).length;t(e,57,0,r)},function(t,e){t(e,4,0,e.component.headerTitle),t(e,7,0,i.Ab(e,13).ngClassUntouched,i.Ab(e,13).ngClassTouched,i.Ab(e,13).ngClassPristine,i.Ab(e,13).ngClassDirty,i.Ab(e,13).ngClassValid,i.Ab(e,13).ngClassInvalid,i.Ab(e,13).ngClassPending),t(e,14,1,[!i.Ab(e,17).multiple,i.Ab(e,17).typeahead,i.Ab(e,17).multiple,i.Ab(e,17).addTag,i.Ab(e,17).searchable,i.Ab(e,17).clearable,i.Ab(e,17).isOpen,i.Ab(e,17).disabled,i.Ab(e,17).filtered,i.Ab(e,33).ngClassUntouched,i.Ab(e,33).ngClassTouched,i.Ab(e,33).ngClassPristine,i.Ab(e,33).ngClassDirty,i.Ab(e,33).ngClassValid,i.Ab(e,33).ngClassInvalid,i.Ab(e,33).ngClassPending])})}var pe=function(){function t(t){this._appService=t,this.headerTitle="More Info",this.typeOfAction="action",this.isMoreInfoLoading=!1,this.actionMoreInfoData=[],this.hideTemplateContents=!1}return t.prototype.ngOnInit=function(){},t.prototype.ngOnChanges=function(){this.action_id.includes("asset_action_")&&this.moreInfoForAction(this.action_id)},t.prototype.moreInfoForAction=function(t,e){var n=this;this.hideTemplateContents="scada"===this.typeOfAction,this.actionMoreInfoData=[],this.isMoreInfoLoading=!0,this.isActionMoreInfoResponse=!1,this.isActionMoreInfoData=!1,this.isActionMoreInfoLoadMore=!1,this.headerLabelName="";var i={};void 0===t?i={asset_action_id:this.historyRetryId,type:this.pageType}:(this.historyRetryId=t,i={asset_action_id:t,type:this.pageType}),this._appService.moreInfoAssetControlData(i).subscribe(function(t){n.isMoreInfoLoading=!1,t&&!t.status?(n.actionMoreInfoData=t,n.actionMoreInfoTable=t.body_content,n.headerLabelName="- "+t.action_name,n.isActionMoreInfoSchedule=t.schedule.schedule,t.body_content.length>=n.finalRangeActionMoreInfoTable&&(n.isActionMoreInfoLoadMore=!0)):(n.isActionMoreInfoData=!0,n.isActionMoreInfoLoadMore=!1)},function(t){console.log(t),n.isMoreInfoLoading=!1,n.isActionMoreInfoResponse=!0})},t.prototype.moreInfoCancel=function(){this.actionMoreInfoData=[],this.finalRangeActionMoreInfoTable=10,this.isActionMoreInfoData=!1,this.isActionMoreInfoResponse=!1},t}(),me=i.ob({encapsulation:0,styles:[[""],qt.a],data:{}});function ge(t){return i.Kb(0,[(t()(),i.qb(0,0,null,null,2,"p",[],null,null,null,null,null)),(t()(),i.qb(1,0,null,null,0,"i",[["class","fa fa-clock-o"]],null,null,null,null,null)),(t()(),i.Ib(-1,null,[" Scheduled "]))],null,null)}function xe(t){return i.Kb(0,[(t()(),i.qb(0,0,null,null,2,"p",[],null,null,null,null,null)),(t()(),i.qb(1,0,null,null,0,"i",[["class","fa fa-clock-o"]],null,null,null,null,null)),(t()(),i.Ib(-1,null,[" Not scheduled "]))],null,null)}function ye(t){return i.Kb(0,[(t()(),i.qb(0,0,null,null,6,"div",[["class","asset-control-status"]],null,null,null,null,null)),i.pb(1,278528,null,0,C.j,[i.s,i.t,i.k,i.E],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),i.Db(2,{scheduled:0,"not-scheduled":1}),(t()(),i.hb(16777216,null,null,1,null,ge)),i.pb(4,16384,null,0,C.l,[i.P,i.M],{ngIf:[0,"ngIf"]},null),(t()(),i.hb(16777216,null,null,1,null,xe)),i.pb(6,16384,null,0,C.l,[i.P,i.M],{ngIf:[0,"ngIf"]},null)],function(t,e){var n=e.component,i=t(e,2,0,1==n.isActionMoreInfoSchedule,0==n.isActionMoreInfoSchedule);t(e,1,0,"asset-control-status",i),t(e,4,0,1==n.isActionMoreInfoSchedule),t(e,6,0,0==n.isActionMoreInfoSchedule)},null)}function fe(t){return i.Kb(0,[(t()(),i.qb(0,0,null,null,2,null,null,null,null,null,null,null)),(t()(),i.hb(16777216,null,null,1,null,ye)),i.pb(2,16384,null,0,C.l,[i.P,i.M],{ngIf:[0,"ngIf"]},null),(t()(),i.hb(0,null,null,0))],function(t,e){var n=e.component;t(e,2,0,!n.isActionMoreInfoResponse&&!n.isActionMoreInfoData&&!n.isMoreInfoLoading)},null)}function ve(t){return i.Kb(0,[(t()(),i.qb(0,0,null,null,1,"div",[["class","label-block"]],null,null,null,null,null)),(t()(),i.Ib(1,null,[" "," "]))],null,function(t,e){t(e,1,0,e.context.$implicit)})}function be(t){return i.Kb(0,[(t()(),i.qb(0,0,null,null,8,null,null,null,null,null,null,null)),(t()(),i.qb(1,0,null,null,7,"div",[["class","tab-pane-contnet row"]],null,null,null,null,null)),(t()(),i.qb(2,0,null,null,6,"div",[["class","col-12"]],null,null,null,null,null)),(t()(),i.qb(3,0,null,null,5,"div",[["class","form-group"]],null,null,null,null,null)),(t()(),i.qb(4,0,null,null,1,"label",[["class","control-label"]],null,null,null,null,null)),(t()(),i.Ib(-1,null,[" Labels "])),(t()(),i.qb(6,0,null,null,2,"div",[["class","label-group"]],null,null,null,null,null)),(t()(),i.hb(16777216,null,null,1,null,ve)),i.pb(8,278528,null,0,C.k,[i.P,i.M,i.s],{ngForOf:[0,"ngForOf"]},null)],function(t,e){t(e,8,0,e.component.actionMoreInfoData.labels)},null)}function Ce(t){return i.Kb(0,[(t()(),i.qb(0,0,null,null,7,null,null,null,null,null,null,null)),(t()(),i.qb(1,0,null,null,6,"div",[["class","tab-pane-contnet row"]],null,null,null,null,null)),(t()(),i.qb(2,0,null,null,5,"div",[["class","col-12"]],null,null,null,null,null)),(t()(),i.qb(3,0,null,null,4,"div",[["class","form-group"]],null,null,null,null,null)),(t()(),i.qb(4,0,null,null,1,"label",[["class","control-label"]],null,null,null,null,null)),(t()(),i.Ib(-1,null,["Description"])),(t()(),i.qb(6,0,null,null,1,"p",[["class",""]],null,null,null,null,null)),(t()(),i.Ib(7,null,[" "," "]))],null,function(t,e){t(e,7,0,e.component.actionMoreInfoData.description)})}function Ee(t){return i.Kb(0,[(t()(),i.qb(0,0,null,null,1,"th",[],null,null,null,null,null)),(t()(),i.Ib(1,null,[" "," "]))],null,function(t,e){t(e,1,0,e.context.$implicit.label)})}function Se(t){return i.Kb(0,[(t()(),i.qb(0,0,null,null,1,"td",[],null,null,null,null,null)),(t()(),i.Ib(1,null,[" "," "]))],null,function(t,e){t(e,1,0,e.parent.context.$implicit[e.context.$implicit.key])})}function we(t){return i.Kb(0,[(t()(),i.qb(0,0,null,null,2,"tr",[],null,null,null,null,null)),(t()(),i.hb(16777216,null,null,1,null,Se)),i.pb(2,278528,null,0,C.k,[i.P,i.M,i.s],{ngForOf:[0,"ngForOf"]},null)],function(t,e){t(e,2,0,e.component.actionMoreInfoData.header_content)},null)}function Te(t){return i.Kb(0,[(t()(),i.qb(0,0,null,null,3,"div",[["class","btn-load-more"]],null,null,null,null,null)),(t()(),i.qb(1,0,null,null,2,"button",[["class","btn btn-sm  btn-outline-primary"]],null,[[null,"click"]],function(t,e,n){var i=!0;return"click"===e&&(i=!1!==t.component.loadMoreInfo()&&i),i},null,null)),(t()(),i.qb(2,0,null,null,0,"i",[["class","fa fa-repeat"]],null,null,null,null,null)),(t()(),i.Ib(-1,null,[" Load More"]))],null,null)}function Ae(t){return i.Kb(0,[(t()(),i.qb(0,0,null,null,35,"div",[["class","tab-pane-container"]],null,null,null,null,null)),(t()(),i.hb(16777216,null,null,1,null,be)),i.pb(2,16384,null,0,C.l,[i.P,i.M],{ngIf:[0,"ngIf"]},null),(t()(),i.hb(16777216,null,null,1,null,Ce)),i.pb(4,16384,null,0,C.l,[i.P,i.M],{ngIf:[0,"ngIf"]},null),(t()(),i.qb(5,0,null,null,14,"div",[["class","tab-pane-contnet row"]],null,null,null,null,null)),(t()(),i.qb(6,0,null,null,6,"div",[["class","col-12"]],null,null,null,null,null)),(t()(),i.qb(7,0,null,null,5,"div",[["class","form-group"]],null,null,null,null,null)),(t()(),i.qb(8,0,null,null,1,"label",[["class","control-label"]],null,null,null,null,null)),(t()(),i.Ib(-1,null,["Created By "])),(t()(),i.qb(10,0,null,null,2,"p",[["class","asset-user"]],null,null,null,null,null)),(t()(),i.qb(11,0,null,null,0,"i",[["class","fa fa-user-o"]],null,null,null,null,null)),(t()(),i.Ib(12,null,[" "," at ",""])),(t()(),i.qb(13,0,null,null,6,"div",[["class","col-12"]],null,null,null,null,null)),(t()(),i.qb(14,0,null,null,5,"div",[["class","form-group"]],null,null,null,null,null)),(t()(),i.qb(15,0,null,null,1,"label",[["class","control-label"]],null,null,null,null,null)),(t()(),i.Ib(-1,null,["Modified By"])),(t()(),i.qb(17,0,null,null,2,"p",[["class","asset-user"]],null,null,null,null,null)),(t()(),i.qb(18,0,null,null,0,"i",[["class","fa fa-user-o"]],null,null,null,null,null)),(t()(),i.Ib(19,null,[" "," at ",""])),(t()(),i.qb(20,0,null,null,15,"div",[["class","tab-pane-contnet row"]],null,null,null,null,null)),(t()(),i.qb(21,0,null,null,14,"div",[["class","col-12"]],null,null,null,null,null)),(t()(),i.qb(22,0,null,null,11,"div",[["class","form-group"]],null,null,null,null,null)),(t()(),i.qb(23,0,null,null,1,"label",[["class","control-label"]],null,null,null,null,null)),(t()(),i.Ib(-1,null,["Asset Info"])),(t()(),i.qb(25,0,null,null,8,"table",[["class","table"]],null,null,null,null,null)),(t()(),i.qb(26,0,null,null,3,"thead",[],null,null,null,null,null)),(t()(),i.qb(27,0,null,null,2,"tr",[],null,null,null,null,null)),(t()(),i.hb(16777216,null,null,1,null,Ee)),i.pb(29,278528,null,0,C.k,[i.P,i.M,i.s],{ngForOf:[0,"ngForOf"]},null),(t()(),i.qb(30,0,null,null,3,"tbody",[],null,null,null,null,null)),(t()(),i.hb(16777216,null,null,2,null,we)),i.pb(32,278528,null,0,C.k,[i.P,i.M,i.s],{ngForOf:[0,"ngForOf"],ngForTrackBy:[1,"ngForTrackBy"]},null),i.Cb(0,C.v,[]),(t()(),i.hb(16777216,null,null,1,null,Te)),i.pb(35,16384,null,0,C.l,[i.P,i.M],{ngIf:[0,"ngIf"]},null)],function(t,e){var n=e.component;t(e,2,0,!n.hideTemplateContents),t(e,4,0,!n.hideTemplateContents),t(e,29,0,n.actionMoreInfoData.header_content),t(e,32,0,i.Jb(e,32,0,i.Ab(e,33).transform(n.actionMoreInfoData.body_content,n.initialRangeActionMoreInfoTable,n.finalRangeActionMoreInfoTable)),n.trackAssetControlList),t(e,35,0,n.isActionMoreInfoLoadMore)},function(t,e){var n=e.component;t(e,12,0,n.actionMoreInfoData.created_by,n.actionMoreInfoData.created_at),t(e,19,0,n.actionMoreInfoData.last_modified_by,n.actionMoreInfoData.last_modified_at)})}function Me(t){return i.Kb(0,[(t()(),i.qb(0,0,null,null,5,"div",[["class","position-relative h-100"]],null,null,null,null,null)),(t()(),i.qb(1,0,null,null,4,"div",[["class","lds-ring"]],null,null,null,null,null)),(t()(),i.qb(2,0,null,null,0,"div",[],null,null,null,null,null)),(t()(),i.qb(3,0,null,null,0,"div",[],null,null,null,null,null)),(t()(),i.qb(4,0,null,null,0,"div",[],null,null,null,null,null)),(t()(),i.qb(5,0,null,null,0,"div",[],null,null,null,null,null))],null,null)}function Le(t){return i.Kb(0,[(t()(),i.qb(0,0,null,null,3,"div",[["class","empty-history"]],null,null,null,null,null)),(t()(),i.qb(1,0,null,null,0,"span",[["class","fa fa-clock-o"]],null,null,null,null,null)),(t()(),i.qb(2,0,null,null,1,"h6",[["class","text-muted"]],null,null,null,null,null)),(t()(),i.Ib(3,null,[" "," data not found "]))],null,function(t,e){t(e,3,0,e.component.headerTitle)})}function Pe(t){return i.Kb(0,[(t()(),i.qb(0,0,null,null,8,"div",[["class","error-history"]],null,null,null,null,null)),(t()(),i.qb(1,0,null,null,0,"span",[["class","fa fa-refresh"]],null,null,null,null,null)),(t()(),i.qb(2,0,null,null,1,"h6",[["class","text-muted"]],null,null,null,null,null)),(t()(),i.Ib(-1,null,[" Failed "])),(t()(),i.qb(4,0,null,null,1,"p",[["class","text-muted"]],null,null,null,null,null)),(t()(),i.Ib(-1,null,[" Invalid response from server. Please try again later. "])),(t()(),i.qb(6,0,null,null,2,"button",[["class","btn btn-sm btn-link widget-text-color"]],null,[[null,"click"]],function(t,e,n){var i=!0;return"click"===e&&(i=!1!==t.component.moreInfoForAction()&&i),i},null,null)),(t()(),i.qb(7,0,null,null,0,"i",[["class","fa fa-repeat"]],null,null,null,null,null)),(t()(),i.Ib(-1,null,[" Try Again "]))],null,null)}function Ie(t){return i.Kb(0,[(t()(),i.qb(0,0,null,null,17,"div",[["class","modal-content h-100"]],null,null,null,null,null)),(t()(),i.qb(1,0,null,null,4,"div",[["class","modal-header"]],null,null,null,null,null)),(t()(),i.qb(2,0,null,null,1,"h6",[["class","modal-title text-muted"]],null,null,null,null,null)),(t()(),i.Ib(3,null,[" "," "])),(t()(),i.hb(16777216,null,null,1,null,fe)),i.pb(5,16384,null,0,C.l,[i.P,i.M],{ngIf:[0,"ngIf"]},null),(t()(),i.qb(6,0,null,null,8,"div",[["class","modal-body pt-0"]],null,null,null,null,null)),(t()(),i.hb(16777216,null,null,1,null,Ae)),i.pb(8,16384,null,0,C.l,[i.P,i.M],{ngIf:[0,"ngIf"]},null),(t()(),i.hb(16777216,null,null,1,null,Me)),i.pb(10,16384,null,0,C.l,[i.P,i.M],{ngIf:[0,"ngIf"]},null),(t()(),i.hb(16777216,null,null,1,null,Le)),i.pb(12,16384,null,0,C.l,[i.P,i.M],{ngIf:[0,"ngIf"]},null),(t()(),i.hb(16777216,null,null,1,null,Pe)),i.pb(14,16384,null,0,C.l,[i.P,i.M],{ngIf:[0,"ngIf"]},null),(t()(),i.qb(15,0,null,null,2,"div",[["class","modal-footer"]],null,null,null,null,null)),(t()(),i.qb(16,0,null,null,1,"button",[["class","btn btn-sm btn-secondary"],["data-dismiss","modal"],["type","button"]],null,[[null,"click"]],function(t,e,n){var i=!0;return"click"===e&&(i=!1!==t.component.moreInfoCancel()&&i),i},null,null)),(t()(),i.Ib(-1,null,["Close"]))],function(t,e){var n=e.component;t(e,5,0,!n.hideTemplateContents),t(e,8,0,!n.isActionMoreInfoResponse&&!n.isActionMoreInfoData&&!n.isMoreInfoLoading),t(e,10,0,n.isMoreInfoLoading),t(e,12,0,n.isActionMoreInfoData),t(e,14,0,n.isActionMoreInfoResponse)},function(t,e){t(e,3,0,e.component.headerTitle)})}var Re=function(){function t(t,e,n,l,o,s,r){this._editorUI=t,this._router=e,this._handleXML=n,this._handleGraph=l,this._auth=o,this._toastLoad=s,this._preview=r,this.refetchOnEdit=new i.m,this.contextMenuEnabled=!1,this.isSubscribed=!1,this.devices={},this.tags={},this.units={},this.cellPropertyData={body_content:[]},this.configPopupData={conditionsExist:!1,device:"Not Found",tag:"Not Found",unit:"Not Found",decimal:"Not Found",live_value:"Not Found",showUnits:!0,showValue:!1,header_content:["Compare","Compare value","Action","Action value"],body_content:[]},this.highlightActive=!1}return t.prototype.ngOnChanges=function(t){this.scadaData&&this.scadaData.hasOwnProperty("dashboardId")&&""!==this.scadaData.dashboardId&&(this._editorUI.loaderToggleOn(),this.contextMenuEnabled=!1,this.initializeContainer(),this.loadXml(),Bt.mxKeyHandler.prototype.setEnabled(!1))},t.prototype.ngOnInit=function(){this._preview.getMetaData(),this._preview.getScadaColors(),this.hasEditAccess=this._auth.getMenuObject.accessLevel.edit;var t=this._auth.allowAccessComponent("assetControl","trigger");this.hasTriggerAccess=null==t||t},t.prototype.initializeContainer=function(){var t=this;this.graphContainer.nativeElement.innerHTML="",this._handleGraph.graph="",window.STENCIL_PATH="/assets/library/scada/resources/stencils/",window.RESOURCES_PATH="/assets/library/scada/resources/images/",window.IMAGE_PATH="/assets/library/scada/resources/images/",this._editorUI.previewGraphSettings(Bt,null),this._editorUI.previewUiSettings(Bt,null),this._handleGraph.overridesForPreviewConditions(Bt,null);try{return Bt.mxUtils.getAll([Bt.mxResources.getDefaultBundle("/assets/library/scada/resources/elmeasure",mxLanguage),"/assets/library/scada/resources/stencils/default.xml"],function(e){Bt.mxResources.parse(e[0].getText());var n=new Object;n.default=e[1].getDocumentElement(),t._handleGraph.graph=new Bt.Graph(null,null,null,null,n,null),t._handleGraph.graph.transparentBackground=!1,new Bt.EditorUi(new Bt.Editor(!1,n.default,null,t._handleGraph.graph,!0),t.graphContainer.nativeElement)},function(){t._toastLoad.toast("error","Error","Failed to load",!0)})}catch(e){console.log(e)}},t.prototype.loadXml=function(){var t=this;if(this.scadaData.hasOwnProperty("dashboardId")&&""!==this.scadaData.dashboardId)var e=setInterval(function(){var n;t._handleGraph.graph&&(clearInterval(e),t.scadaData.widget&&t.scadaData.widget.wcData&&0==t.scadaData.widget.wcData.length?n=btoa(Bt.mxUtils.getPrettyXml(Bt._editorUi.editor.getGraphXml())):t.scadaData.widget&&t.scadaData.widget.wcData&&(n=atob(t.scadaData.widget.wcData[0].SCADAData)),t._handleXML.formatGraphSettings(Bt.mxUtils.parseXml(n).childNodes[0]),t._handleGraph.graph.scadaData=t.scadaData,t._handleXML.loadXMLIntoContainer(t.scadaData,Bt,!0),setTimeout(function(){t._editorUI.loaderToggleOff()},200),t.graphUpdateObservable(n),t._preview.setCellProperty(Bt,n,!1))},100)},t.prototype.isGraphCurrentlyUpdating=function(){this.isSubscribed&&(this.hasObservable.unsubscribe(),this.hasGraphUpdated.unsubscribe(),this.isSubscribed=!1)},t.prototype.graphUpdateObservable=function(t){var e=this;this.isSubscribed||(this.hasObservable=this._preview.getPreviewCells().subscribe(function(n){e.isSubscribed=!0,e.updateCellOnValue(n,t)}),this.hasGraphUpdated=this._preview.getGraphState().subscribe(function(t){e.setGraphEvents(),Bt.mxCellHighlight.prototype.keepOnTop=!0,Bt.mxConstants.HIGHLIGHT_OPACITY=70,e.highligtOut=new Bt.mxCellHighlight(e._handleGraph.graph,"#eee",5)}))},t.prototype.updateCellOnValue=function(t,e){var n=this._handleGraph.graph;if(n&&t&&t.cell_id){var i=n.model.getCell(t.cell_id.getAttribute("id"));if(i&&i.hasOwnProperty("defaultStyle")){if(t.value&&this._handleGraph.graph.model.setValue(i,t.value),i&&i.defaultStyle&&t.styles&&t.styles.remove&&t.styles.remove.length>0)for(var l=t.styles.remove,o=0;o<l.length;o++)this._preview.setCellStyle(l[o].split("=")[0],i.defaultStyle[l[o].split("=")[0]],i,t.value);if(i&&i.defaultStyle&&t.styles&&t.styles.update.length>0){var s=t.styles.update;for(o=0;o<s.length;o++)this._preview.setCellStyle(s[o].split("=")[0],s[o].split("=")[1],i,t.value)}}else this._preview.setCellProperty(Bt,e,!0);Bt._editorUi.editor.setModified(!1)}},t.prototype.setHightLightNull=function(){this._handleGraph.graph.hasOwnProperty("hoverEnabled")&&this._handleGraph.graph.hoverEnabled&&this.highligtOut&&this.highligtOut.highlight(null)},t.prototype.setHighLight=function(t){this._handleGraph.graph.hasOwnProperty("hoverEnabled")&&this._handleGraph.graph.hoverEnabled&&this.highligtOut.highlight(t)},t.prototype.setGraphEvents=function(){var t=this;this._handleGraph.graph.addMouseListener({mouseUp:function(e,n){n.state&&n.state.cell?(t.configPopupData.conditionsExist=!1,t.contextMenuEnabled?(t.setHightLightNull(),t.contextMenuEnabled=!1):2==n.evt.button?(t.setHightLightNull(),t.setHighLight(n.state),t.highlightActive=!0,t._editorUI.removeOpenDropDowns(),t.isCellConfigured=t.isConfigured(n.state.cell),t.isCellAssetRemote=t.isAssetRemote(n.state.cell),n.state.cell.asset_control&&(t._preview.action_id=n.state.cell.asset_control.action_id),n.state.cell.asset_control&&t.setActionCellName(n.state.cell),t.isCellConfigured&&t.createConfigPopupData(n.state.cell),n.state.cell.hasOwnProperty("defaultStyle")&&t.createPropertyData(n.state.cell),t.context_shape_name=n.state.cell.cellName?n.state.cell.cellName:"el_"+n.state.cell.id,t.cell_id=n.state.cell.id,n.state.cell.asset_control&&(t._preview.action_id=n.state.cell.asset_control.action_id),t._preview.setContextMenu(n.evt.pageY,n.evt.pageX),t.contextMenuEnabled=!0):n.state.cell.hasOwnProperty("asset_control")&&1==n.state.cell.asset_control.isEnabled&&t.scadaData.isOwner&&t.hasTriggerAccess?(t.setHighLight(n.state),t.highlightActive=!0,t._preview.action_id=n.state.cell.asset_control.action_id,n.state.cell.asset_control&&t.setActionCellName(n.state.cell),t.contextMenuEnabled=!1,t._preview.openTriggerPopup()):(t.contextMenuEnabled=!1,t.highlightActive=!1)):(t.setHightLightNull(),t.highlightActive=!1,t.contextMenuEnabled=!1)},mouseMove:function(e,n){if(n.state){var i=n.state;i&&i.cell?(t.contextMenuEnabled||t.setHighLight(n.state),t.highlightActive=!0,i.cell.hasOwnProperty("asset_control")&&i.cell.asset_control.isEnabled&&t.scadaData.isOwner&&t.hasTriggerAccess?i.setCursor("pointer"):i.setCursor("default")):(t.setHightLightNull(),t.highlightActive=!1,i.setCursor("default"))}else t.highlightActive&&!t.contextMenuEnabled&&(t.highlightActive=!1,t.setHightLightNull())},mouseDown:function(t,e){}})},t.prototype.isConfigured=function(t){if(t.hasOwnProperty("configure")&&t.configure.hasOwnProperty("conditions"))return!!(t.hasOwnProperty("devices")&&t.devices&&t.hasOwnProperty("tags")&&t.tags)},t.prototype.isAssetRemote=function(t){return!!(t.hasOwnProperty("asset_control")&&t.asset_control.hasOwnProperty("action_id")&&this.hasTriggerAccess&&1==t.asset_control.isEnabled)},t.prototype.setActionCellName=function(t){this._preview.cell_name=t.hasOwnProperty("cellName")?t.cellName:"el_"+t.id},t.prototype.createPropertyData=function(t){this.cellPropertyData.body_content=[];var e,n="#FFFFFF",i=t.defaultStyle;if("image"==i.shape)e=t.style.includes("/defaultImages/")?"Gallery":"Uploads",i.hasOwnProperty("imageBackground")&&(n=i.imageBackground),this.cellType="Image";else{e="Shapes",this.cellType="Shape";for(var l=0,o=t.style.split(";");l<o.length;l++){var s=o[l];s&&s.includes("fillColor")&&(n=s.split("=")[1].toUpperCase())}}this.cellPropertyData.body_content.push({key:"Source",value:e},{key:"Value",value:t.value},{key:"Fill Color",value:this._preview.hexReference[n]?this._preview.hexReference[n]:n})},t.prototype.createConfigPopupData=function(t){this.configPopupData.body_content=[],t.configure.conditions.length>0&&(this.configPopupData.conditionsExist=!0);for(var e=0,n=t.configure.conditions;e<n.length;e++){var i=n[e];this._preview.colorPicker[i.action.change_to]&&(i.action.change_to=this._preview.colorPicker[i.action.change_to].value);var l=this._preview.hexReference[i.action.change_to],o=this._preview.Action[i.action.name],s={compare:this._preview.Comparison[i.condition].value+" ("+this._preview.Comparison[i.condition].label+")",c_value:i.value,action:o.label,a_value:l||i.action.change_to,progress_labels:"progress"==o.label.toLowerCase()?this._preview.Action.progress.labels[i.action.direction]:"",isColor:!(!l&&"number"==typeof i.action.change_to||!i.action.change_to.includes("#")),rawColor:i.action.change_to};"none"!=s.a_value&&"block"!=s.a_value||!o.hasOwnProperty("type")||"value-to-hide"!=o.type||(s.a_value="none"==s.a_value?"Hide":"Show"),this.configPopupData.body_content.push(s)}if(t.hasOwnProperty("devices")&&t.devices&&t.hasOwnProperty("tags")&&t.tags&&this._preview.tags){var r=t.tags.split(":");this.configPopupData.device=this._preview.devices[t.devices],this.configPopupData.tag=this._preview.tags[r[0]],this.configPopupData.unit=this._preview.units[t.converter],t.value&&(this.configPopupData.live_value=t.value),this.configPopupData.decimal=t.decimal,this.configPopupData.showUnits=1===t.showUnits,this.configPopupData.showValue=1===t.showValue}},t.prototype.triggerConfirm=function(){this.triggerCountDown(),this.contextMenuEnabled=!1,this._preview.triggerAction()},t.prototype.triggerCountDown=function(){this._preview.hasSubbed&&this._preview.hasSubbed.unsubscribe(),this._preview.initiateTriggerCountDown()},t.prototype.copyInputMessage=function(t){t.focus(),t.select(),document.execCommand("copy")},t.prototype.editGraph=function(){var t=this;setTimeout(function(){t._router.navigate(["scada/"+t.scadaData.dashboardId],{queryParams:{view:"editor"}})},300)},t.prototype.zoomInGraph=function(){this._handleGraph.graph.zoomIn()},t.prototype.zoomOutGraph=function(){this._handleGraph.graph.zoomOut()},t.prototype.resetGraph=function(){this._handleGraph.graph.getPagePadding=function(){return new Bt.mxPoint(0,0)},this._preview.setPageZoom()},t.prototype.ngOnDestroy=function(){this._editorUI.loaderToggleOn(),this._preview.disconnect(),this.isGraphCurrentlyUpdating(),this.refetchOnEdit.emit("fetchOnEdit")},t}(),Oe=i.ob({encapsulation:0,styles:[s],data:{}});function _e(t){return i.Kb(0,[(t()(),i.qb(0,0,null,null,42,"div",[["class","context"]],null,null,null,null,null)),i.pb(1,278528,null,0,C.o,[i.t,i.k,i.E],{ngStyle:[0,"ngStyle"]},null),i.Db(2,{"top.px":0,"left.px":1}),(t()(),i.qb(3,0,null,null,2,"div",[["class","manage-overflow"]],null,null,null,null,null)),(t()(),i.qb(4,0,null,null,1,"span",[["class","shape-title"]],[[8,"title",0]],null,null,null,null)),(t()(),i.Ib(5,null,["",""])),(t()(),i.qb(6,0,null,null,0,"div",[["class","context_hr"]],null,null,null,null,null)),(t()(),i.qb(7,0,null,null,2,"div",[["class","context-item reduced-height"]],null,null,null,null,null)),(t()(),i.qb(8,0,null,null,1,"div",[["class","inner-item pe-none"]],null,null,null,null,null)),(t()(),i.Ib(-1,null,[" Configuration Info "])),(t()(),i.qb(10,0,null,null,4,"div",[["class","context-item"],["data-toggle","modal"]],[[1,"data-target",0]],[[null,"click"]],function(t,e,n){var i=!0,l=t.component;return"click"===e&&(l.isCellConfigured&&(l.contextMenuEnabled=!1),l.contextMenuEnabled=!1,i=!1!==l.highligtOut.highlight(null)&&i),i},null,null)),i.pb(11,278528,null,0,C.j,[i.s,i.t,i.k,i.E],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),i.Db(12,{"cursor-pointer":0,"field-disabled":1}),(t()(),i.qb(13,0,null,null,1,"div",[["class","context-title hover-title mt-0"]],null,null,null,null,null)),(t()(),i.Ib(-1,null,[" Live Data "])),(t()(),i.qb(15,0,null,null,23,"div",[["class","context-item context-submenu"]],null,null,null,null,null)),(t()(),i.qb(16,0,null,null,4,"div",[["class","context-title hover-title mt-0"]],null,null,null,null,null)),i.pb(17,278528,null,0,C.j,[i.s,i.t,i.k,i.E],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),i.Db(18,{"cursor-pointer":0,"field-disabled":1}),(t()(),i.Ib(-1,null,[" Asset Control "])),(t()(),i.qb(20,0,null,null,0,"i",[["aria-hidden","true"],["class","fa fa-caret-right"]],null,null,null,null,null)),(t()(),i.qb(21,0,null,null,0,"div",[["class","context_hr"]],null,null,null,null,null)),(t()(),i.qb(22,0,null,null,16,"div",[],null,null,null,null,null)),i.pb(23,278528,null,0,C.j,[i.s,i.t,i.k,i.E],{ngClass:[0,"ngClass"]},null),i.Db(24,{"sub-menu":0}),i.pb(25,278528,null,0,C.o,[i.t,i.k,i.E],{ngStyle:[0,"ngStyle"]},null),i.Db(26,{"top.px":0,"left.px":1}),(t()(),i.qb(27,0,null,null,2,"div",[["class","context-item cursor-pointer"]],null,null,null,null,null)),(t()(),i.qb(28,0,null,null,1,"div",[["class","inner-item"],["data-target","#actionMoreInfo"],["data-toggle","modal"]],null,[[null,"click"]],function(t,e,n){var l=!0,o=t.component;return"click"===e&&(i.Ab(t.parent,35).moreInfoForAction(o._preview.action_id),o.contextMenuEnabled=!1,l=!1!==o.highligtOut.highlight(null)&&l),l},null,null)),(t()(),i.Ib(-1,null,[" Action Info "])),(t()(),i.qb(30,0,null,null,2,"div",[["class","context-item cursor-pointer"],["data-target","#actionHistory"],["data-toggle","modal"]],null,[[null,"click"]],function(t,e,n){var l=!0,o=t.component;return"click"===e&&(i.Ab(t.parent,31).actionHistory(o._preview.action_id),o.contextMenuEnabled=!1,l=!1!==o.highligtOut.highlight(null)&&l),l},null,null)),(t()(),i.qb(31,0,null,null,1,"div",[["class","inner-item"]],null,null,null,null,null)),(t()(),i.Ib(-1,null,[" History "])),(t()(),i.qb(33,0,null,null,5,"div",[["class","context-item cursor-pointer"]],null,null,null,null,null)),(t()(),i.qb(34,0,null,null,4,"div",[["class","inner-item align-contents"],["data-toggle","modal"]],[[1,"data-target",0]],[[null,"click"]],function(t,e,n){var i=!0,l=t.component;return"click"===e&&(l.scadaData.isOwner&&l.triggerCountDown(),i=0!=(l.contextMenuEnabled=!1)&&i),i},null,null)),i.pb(35,278528,null,0,C.j,[i.s,i.t,i.k,i.E],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),i.Db(36,{"field-disabled":0}),(t()(),i.qb(37,0,null,null,1,"span",[],null,null,null,null,null)),(t()(),i.Ib(-1,null,["Trigger"])),(t()(),i.qb(39,0,null,null,0,"div",[["class","context_hr"]],null,null,null,null,null)),(t()(),i.qb(40,0,null,null,2,"div",[["class","context-item cursor-pointer"],["data-target","#propertiesModal"],["data-toggle","modal"]],null,[[null,"click"]],function(t,e,n){var i=!0,l=t.component;return"click"===e&&(l.contextMenuEnabled=!1,i=!1!==l.highligtOut.highlight(null)&&i),i},null,null)),(t()(),i.qb(41,0,null,null,1,"div",[["class","context-title prop-align  hover-title"]],null,null,null,null,null)),(t()(),i.Ib(-1,null,[" Properties "]))],function(t,e){var n=e.component,i=t(e,2,0,n._preview.contextMenuTop,n._preview.contextMenuLeft);t(e,1,0,i);var l=t(e,12,0,n.isCellConfigured,!n.isCellConfigured);t(e,11,0,"context-item",l);var o=t(e,18,0,n.isCellAssetRemote&&n.scadaData.isOwner,!n.isCellAssetRemote);t(e,17,0,"context-title hover-title mt-0",o);var s=t(e,24,0,n.isCellAssetRemote);t(e,23,0,s);var r=t(e,26,0,n._preview.subMenuContentsTop,n._preview.subMenuContentsLeft);t(e,25,0,r);var a=t(e,36,0,!n.scadaData.isOwner);t(e,35,0,"inner-item align-contents",a)},function(t,e){var n=e.component;t(e,4,0,i.sb(1,"",n.context_shape_name,"")),t(e,5,0,n.context_shape_name),t(e,10,0,n.isCellConfigured?"#configurationModal":""),t(e,34,0,n.scadaData.isOwner?"#actionTrigger":"")})}function De(t){return i.Kb(0,[(t()(),i.qb(0,0,null,null,2,"i",[["class","elm-unchecked-radio-button fs-25"]],null,null,null,null,null)),i.pb(1,278528,null,0,C.o,[i.t,i.k,i.E],{ngStyle:[0,"ngStyle"]},null),i.Db(2,{color:0})],function(t,e){var n=e.component,i=t(e,2,0,n._preview.hexReference[e.parent.context.$implicit.value]?n._preview.hexReference[e.parent.context.$implicit.value]:e.parent.context.$implicit.value);t(e,1,0,i)},null)}function Ue(t){return i.Kb(0,[(t()(),i.qb(0,0,null,null,15,"tr",[],null,null,null,null,null)),(t()(),i.qb(1,0,null,null,3,"td",[],null,null,null,null,null)),i.pb(2,278528,null,0,C.j,[i.s,i.t,i.k,i.E],{ngClass:[0,"ngClass"]},null),i.Db(3,{"border-0":0}),(t()(),i.Ib(4,null,["",""])),(t()(),i.qb(5,0,null,null,10,"td",[["class","text-left pl-23 background-f1"]],null,null,null,null,null)),i.pb(6,278528,null,0,C.j,[i.s,i.t,i.k,i.E],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),i.Db(7,{"border-0":0}),(t()(),i.qb(8,0,null,null,4,"span",[],null,null,null,null,null)),i.pb(9,278528,null,0,C.j,[i.s,i.t,i.k,i.E],{ngClass:[0,"ngClass"]},null),i.Db(10,{"style-value":0,"ml-1-8rem":1}),(t()(),i.Ib(11,null,[" "," "])),i.Eb(12,1),(t()(),i.qb(13,0,null,null,2,"span",[],null,null,null,null,null)),(t()(),i.hb(16777216,null,null,1,null,De)),i.pb(15,16384,null,0,C.l,[i.P,i.M],{ngIf:[0,"ngIf"]},null)],function(t,e){var n=t(e,3,0,2==e.context.index&&e.context.$implicit.value);t(e,2,0,n);var i=t(e,7,0,2==e.context.index&&e.context.$implicit.value);t(e,6,0,"text-left pl-23 background-f1",i);var l=t(e,10,0,2==e.context.index&&e.context.$implicit.value,!(2==e.context.index&&e.context.$implicit.value));t(e,9,0,l),t(e,15,0,2==e.context.index&&e.context.$implicit.value)},function(t,e){t(e,4,0,e.context.$implicit.key);var n=i.Jb(e,11,0,t(e,12,0,i.Ab(e.parent,0),e.context.$implicit.value));t(e,11,0,n)})}function Ne(t){return i.Kb(0,[(t()(),i.qb(0,0,null,null,2,null,null,null,null,null,null,null)),(t()(),i.qb(1,0,null,null,1,"h4",[["class","no-conditions"]],null,null,null,null,null)),(t()(),i.Ib(-1,null,["Conditions not added"]))],null,null)}function ke(t){return i.Kb(0,[(t()(),i.qb(0,0,null,null,1,"th",[],null,null,null,null,null)),(t()(),i.Ib(1,null,["",""]))],null,function(t,e){t(e,1,0,e.context.$implicit)})}function He(t){return i.Kb(0,[(t()(),i.qb(0,0,null,null,11,null,null,null,null,null,null,null)),(t()(),i.qb(1,0,null,null,2,"td",[],null,null,null,null,null)),(t()(),i.qb(2,0,null,null,1,"label",[["class","mt-2"]],null,null,null,null,null)),(t()(),i.Ib(-1,null,["-"])),(t()(),i.qb(4,0,null,null,1,"td",[],null,null,null,null,null)),(t()(),i.Ib(-1,null,[" - "])),(t()(),i.qb(6,0,null,null,2,"td",[],null,null,null,null,null)),(t()(),i.Ib(7,null,["",""])),i.Eb(8,1),(t()(),i.qb(9,0,null,null,2,"td",[],null,null,null,null,null)),(t()(),i.qb(10,0,null,null,1,"span",[],null,null,null,null,null)),(t()(),i.Ib(11,null,["",""]))],null,function(t,e){var n=i.Jb(e,7,0,t(e,8,0,i.Ab(e.parent.parent.parent,0),e.parent.context.$implicit.action));t(e,7,0,n),t(e,11,0,e.parent.context.$implicit.progress_labels)})}function Ge(t){return i.Kb(0,[(t()(),i.qb(0,0,null,null,3,"span",[],null,null,null,null,null)),(t()(),i.qb(1,0,null,null,2,"i",[["class","elm-unchecked-radio-button fs-25"]],null,null,null,null,null)),i.pb(2,278528,null,0,C.o,[i.t,i.k,i.E],{ngStyle:[0,"ngStyle"]},null),i.Db(3,{color:0})],function(t,e){var n=t(e,3,0,e.parent.parent.context.$implicit.rawColor);t(e,2,0,n)},null)}function Fe(t){return i.Kb(0,[(t()(),i.qb(0,0,null,null,1,"span",[],null,null,null,null,null)),(t()(),i.qb(1,0,null,null,0,"img",[["alt",""],["class","image-action"],["height","50"],["width","50"]],[[8,"src",4]],null,null,null,null))],null,function(t,e){t(e,1,0,e.parent.parent.context.$implicit.a_value)})}function Ve(t){return i.Kb(0,[(t()(),i.qb(0,0,null,null,0,"i",[["aria-hidden","true"],["class","fa fa-files-o ml-2"]],[[8,"title",0]],[[null,"click"]],function(t,e,n){var l=!0;return"click"===e&&(l=!1!==t.component.copyInputMessage(i.Ab(t.parent.parent,9))&&l),l},null,null))],null,function(t,e){t(e,0,0,i.sb(1,"copy ",e.parent.parent.parent.context.$implicit.rawColor," to clipboard"))})}function Be(t){return i.Kb(0,[(t()(),i.qb(0,0,null,null,5,"span",[],null,null,null,null,null)),i.pb(1,278528,null,0,C.j,[i.s,i.t,i.k,i.E],{ngClass:[0,"ngClass"]},null),i.Db(2,{"content-position ripple":0,"visibility-styles ":1}),(t()(),i.Ib(3,null,[" "," "])),(t()(),i.hb(16777216,null,null,1,null,Ve)),i.pb(5,16384,null,0,C.l,[i.P,i.M],{ngIf:[0,"ngIf"]},null)],function(t,e){var n=t(e,2,0,e.parent.parent.context.$implicit.isColor,"Visibility"==e.parent.parent.context.$implicit.action);t(e,1,0,n),t(e,5,0,e.parent.parent.context.$implicit.isColor)},function(t,e){t(e,3,0,e.parent.parent.context.$implicit.a_value)})}function ze(t){return i.Kb(0,[(t()(),i.qb(0,0,null,null,2,"td",[],null,null,null,null,null)),(t()(),i.qb(1,0,null,null,1,"label",[["class","mt-2"]],null,null,null,null,null)),(t()(),i.Ib(2,null,["",""])),(t()(),i.qb(3,0,null,null,1,"td",[],null,null,null,null,null)),(t()(),i.Ib(4,null,["",""])),(t()(),i.qb(5,0,null,null,2,"td",[],null,null,null,null,null)),(t()(),i.Ib(6,null,["",""])),i.Eb(7,1),(t()(),i.qb(8,0,null,null,8,"td",[],null,null,null,null,null)),(t()(),i.qb(9,0,[["hexColor",1]],null,1,"input",[["class","hideHex"],["type","text"]],[[8,"value",0]],[[null,"change"],[null,"keydown.enter"]],function(t,e,n){var l=!0;return"change"===e&&(l=!1!==i.Ab(t,10).transformString(n)&&l),"keydown.enter"===e&&(l=!1!==i.Ab(t,10).transformString(n)&&l),l},null,null)),i.pb(10,16384,null,0,E.a,[i.E,i.k],null,null),(t()(),i.hb(16777216,null,null,1,null,Ge)),i.pb(12,16384,null,0,C.l,[i.P,i.M],{ngIf:[0,"ngIf"]},null),(t()(),i.hb(16777216,null,null,1,null,Fe)),i.pb(14,16384,null,0,C.l,[i.P,i.M],{ngIf:[0,"ngIf"]},null),(t()(),i.hb(16777216,null,null,1,null,Be)),i.pb(16,16384,null,0,C.l,[i.P,i.M],{ngIf:[0,"ngIf"]},null)],function(t,e){t(e,12,0,e.parent.context.$implicit.isColor),t(e,14,0,"Image"==e.parent.context.$implicit.action),t(e,16,0,"Image"!==e.parent.context.$implicit.action)},function(t,e){t(e,2,0,e.parent.context.$implicit.compare),t(e,4,0,e.parent.context.$implicit.c_value);var n=i.Jb(e,6,0,t(e,7,0,i.Ab(e.parent.parent.parent,0),e.parent.context.$implicit.action));t(e,6,0,n),t(e,9,0,e.parent.context.$implicit.rawColor)})}function Ye(t){return i.Kb(0,[(t()(),i.qb(0,0,null,null,3,"tr",[],null,null,null,null,null)),(t()(),i.hb(16777216,null,null,1,null,He)),i.pb(2,16384,null,0,C.l,[i.P,i.M],{ngIf:[0,"ngIf"],ngIfElse:[1,"ngIfElse"]},null),(t()(),i.hb(0,[["notProgress",2]],null,0,null,ze))],function(t,e){t(e,2,0,e.context.$implicit.progress_labels,i.Ab(e,3))},null)}function je(t){return i.Kb(0,[(t()(),i.qb(0,0,null,null,7,null,null,null,null,null,null,null)),(t()(),i.qb(1,0,null,null,6,"table",[["class","table m-0"]],null,null,null,null,null)),(t()(),i.qb(2,0,null,null,2,"thead",[],null,null,null,null,null)),(t()(),i.hb(16777216,null,null,1,null,ke)),i.pb(4,278528,null,0,C.k,[i.P,i.M,i.s],{ngForOf:[0,"ngForOf"]},null),(t()(),i.qb(5,0,null,null,2,"tbody",[],null,null,null,null,null)),(t()(),i.hb(16777216,null,null,1,null,Ye)),i.pb(7,278528,null,0,C.k,[i.P,i.M,i.s],{ngForOf:[0,"ngForOf"]},null)],function(t,e){var n=e.component;t(e,4,0,n.configPopupData.header_content),t(e,7,0,n.configPopupData.body_content)},null)}function We(t){return i.Kb(0,[(t()(),i.qb(0,0,null,null,15,null,null,null,null,null,null,null)),(t()(),i.qb(1,0,null,null,9,"div",[["class","btnGroup extra"]],null,null,null,null,null)),(t()(),i.qb(2,0,null,null,3,"button",[["class","button"],["id","zoomin"],["type","button"]],null,[[null,"click"]],function(t,e,n){var i=!0;return"click"===e&&(i=!1!==t.component.zoomInGraph()&&i),i},null,null)),(t()(),i.qb(3,0,null,null,0,"span",[["class","fa fa-plus"]],null,null,null,null,null)),(t()(),i.qb(4,0,null,null,1,"span",[["class","tooltip"]],null,null,null,null,null)),(t()(),i.Ib(-1,null,[" ZoomIn "])),(t()(),i.qb(6,0,null,null,0,"div",[["class","seperator"]],null,null,null,null,null)),(t()(),i.qb(7,0,null,null,3,"button",[["class","button"],["id","zoomout"],["type","button"]],null,[[null,"click"]],function(t,e,n){var i=!0;return"click"===e&&(i=!1!==t.component.zoomOutGraph()&&i),i},null,null)),(t()(),i.qb(8,0,null,null,0,"span",[["class","fa fa-minus"]],null,null,null,null,null)),(t()(),i.qb(9,0,null,null,1,"span",[["class","tooltip"]],null,null,null,null,null)),(t()(),i.Ib(-1,null,[" ZoomOut "])),(t()(),i.qb(11,0,null,null,4,"div",[["class","btnGroup"]],null,null,null,null,null)),(t()(),i.qb(12,0,null,null,3,"button",[["class","button"],["id","reset"],["type","button"]],null,[[null,"click"]],function(t,e,n){var i=!0;return"click"===e&&(i=!1!==t.component.resetGraph()&&i),i},null,null)),(t()(),i.qb(13,0,null,null,0,"span",[["class","fa fa-repeat"]],null,null,null,null,null)),(t()(),i.qb(14,0,null,null,1,"span",[["class","tooltip"]],null,null,null,null,null)),(t()(),i.Ib(-1,null,[" Reset "]))],null,null)}function qe(t){return i.Kb(0,[(t()(),i.qb(0,0,null,null,5,"div",[["class","btnGroup"],["id","editBtnGroup"]],null,null,null,null,null)),(t()(),i.qb(1,0,null,null,4,"button",[["class","button"],["id","edit"],["type","button"]],[[8,"title",0]],[[null,"click"]],function(t,e,n){var i=!0,l=t.component;return"click"===e&&(i=!1!==(l.scadaData.isOwner&&l.hasEditAccess?l.editGraph():"")&&i),i},null,null)),i.pb(2,278528,null,0,C.j,[i.s,i.t,i.k,i.E],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),(t()(),i.qb(3,0,null,null,0,"span",[["class","fa fa-edit"]],null,null,null,null,null)),(t()(),i.qb(4,0,null,null,1,"span",[["class","tooltip"]],null,null,null,null,null)),(t()(),i.Ib(-1,null,[" Edit "]))],function(t,e){var n=e.component;t(e,2,0,"button",n.scadaData.isOwner&&n.hasEditAccess?"":"isNotAllowed")},function(t,e){var n=e.component;t(e,1,0,n.scadaData.isOwner&&n.hasEditAccess?"":"Access Denied")})}function Xe(t){return i.Kb(0,[i.Cb(0,C.w,[]),i.Gb(402653184,1,{graphContainer:0}),(t()(),i.qb(2,0,[[1,0],["graphContainer",1]],null,0,"div",[["class","graphContainer"]],null,null,null,null,null)),(t()(),i.hb(16777216,null,null,1,null,_e)),i.pb(4,16384,null,0,C.l,[i.P,i.M],{ngIf:[0,"ngIf"]},null),(t()(),i.qb(5,0,null,null,0,"button",[["class","d-none"],["data-target","#actionTrigger"],["data-toggle","modal"],["id","contextTrigger"]],null,null,null,null,null)),(t()(),i.qb(6,0,null,null,21,"div",[["aria-labelledby",""],["aria-modal","true"],["class","modal fade"],["id","actionTrigger"],["role","dialog"],["tabindex","-1"]],null,null,null,null,null)),(t()(),i.qb(7,0,null,null,20,"div",[["class","modal-dialog modal-dialog-component"],["role","document"]],null,null,null,null,null)),(t()(),i.qb(8,0,null,null,19,"div",[["class","modal-content"]],null,null,null,null,null)),(t()(),i.qb(9,0,null,null,4,"div",[["class","modal-header trigger-title trigger-popup dropdown"]],null,null,null,null,null)),(t()(),i.qb(10,0,null,null,1,"span",[["class","fs-1rem"]],null,null,null,null,null)),(t()(),i.Ib(-1,null,["Confirm "])),(t()(),i.qb(12,0,null,null,1,"span",[["class","text-muted ml-auto"]],null,null,null,null,null)),(t()(),i.Ib(13,null,["Closes in ",""])),(t()(),i.qb(14,0,null,null,8,"div",[["class","modal-body trigger-body trigger-popup-height trigger-message"]],null,null,null,null,null)),(t()(),i.qb(15,0,null,null,2,"div",[["class","row trigger-row"]],null,null,null,null,null)),(t()(),i.qb(16,0,null,null,1,"span",[["class","confirm-message"]],null,null,null,null,null)),(t()(),i.Ib(-1,null,["Are you sure you want to trigger"])),(t()(),i.qb(18,0,null,null,4,"div",[["class","row trigger-row"]],null,null,null,null,null)),(t()(),i.qb(19,0,null,null,3,"h6",[["class","trigger-name"]],[[8,"title",0]],null,null,null,null)),(t()(),i.Ib(20,null,[""," "])),(t()(),i.qb(21,0,null,null,1,"span",[["class","font-weight-normal"]],null,null,null,null,null)),(t()(),i.Ib(-1,null,["?"])),(t()(),i.qb(23,0,null,null,4,"div",[["class","modal-footer trigger-popup"]],null,null,null,null,null)),(t()(),i.qb(24,0,null,null,1,"button",[["class","btn btn-sm btn-primary"],["data-dismiss","modal"],["type","button"]],null,[[null,"click"]],function(t,e,n){var i=!0,l=t.component;return"click"===e&&(l.triggerConfirm(),l.contextMenuEnabled=!1,i=!1!==l.highligtOut.highlight(null)&&i),i},null,null)),(t()(),i.Ib(-1,null,["Yes"])),(t()(),i.qb(26,0,null,null,1,"button",[["class","btn btn-sm btn-secondary"],["data-dismiss","modal"],["id","dismissTriggerModal"],["type","button"]],null,[[null,"click"]],function(t,e,n){var i=!0,l=t.component;return"click"===e&&(l.contextMenuEnabled=!1,i=!1!==l.highligtOut.highlight(null)&&i),i},null,null)),(t()(),i.Ib(-1,null,["No"])),(t()(),i.qb(28,0,null,null,3,"div",[["class","modal fade overflow-y-hidden"],["id","actionHistory"],["role","dialog"]],null,null,null,null,null)),(t()(),i.qb(29,0,null,null,2,"div",[["class","modal-dialog modal-dialog-component modal-xl modal-history modal_height"]],null,null,null,null,null)),(t()(),i.qb(30,0,null,null,1,"kl-asset-control-history",[["pageType","scada"]],null,null,null,ce,Kt)),i.pb(31,638976,[["actionHistory",4]],0,Zt,[h.a],{action_id:[0,"action_id"],pageType:[1,"pageType"],headerTitle:[2,"headerTitle"]},null),(t()(),i.qb(32,0,null,null,3,"div",[["class","modal fade overflow-y-hidden"],["id","actionMoreInfo"],["role","dialog"]],null,null,null,null,null)),(t()(),i.qb(33,0,null,null,2,"div",[["class","modal-dialog modal-dialog-component modal-xl modal_height"]],null,null,null,null,null)),(t()(),i.qb(34,0,null,null,1,"kl-asset-control-more-info",[["class","h-100"],["pageType","scada"],["typeOfAction","scada"]],null,null,null,Ie,me)),i.pb(35,638976,[["actionMoreInfo",4]],0,pe,[h.a],{action_id:[0,"action_id"],pageType:[1,"pageType"],headerTitle:[2,"headerTitle"],typeOfAction:[3,"typeOfAction"]},null),(t()(),i.qb(36,0,null,null,25,"div",[["class","modal fade"],["id","propertiesModal"],["role","dialog"]],null,null,null,null,null)),(t()(),i.qb(37,0,null,null,24,"div",[["class","modal-dialog modal-dialog-component"]],null,null,null,null,null)),(t()(),i.qb(38,0,null,null,23,"div",[["class","modal-content"]],null,null,null,null,null)),(t()(),i.qb(39,0,null,null,2,"div",[["class","modal-header dropdown"]],null,null,null,null,null)),(t()(),i.qb(40,0,null,null,1,"h5",[["class","modal-title"]],null,null,null,null,null)),(t()(),i.Ib(-1,null,["Element Properties"])),(t()(),i.qb(42,0,null,null,16,"div",[["class","modal-body m-1 row"]],null,null,null,null,null)),(t()(),i.qb(43,0,null,null,15,"table",[["class","table"]],null,null,null,null,null)),(t()(),i.qb(44,0,null,null,14,"tbody",[],null,null,null,null,null)),(t()(),i.qb(45,0,null,null,5,"tr",[],null,null,null,null,null)),(t()(),i.qb(46,0,null,null,1,"td",[],null,null,null,null,null)),(t()(),i.Ib(-1,null,["Name"])),(t()(),i.qb(48,0,null,null,2,"td",[["class","text-left pl-23 background-f1"]],null,null,null,null,null)),(t()(),i.qb(49,0,null,null,1,"span",[["class","ml-1-8rem"]],[[8,"title",0]],null,null,null,null)),(t()(),i.Ib(50,null,[" ",""])),(t()(),i.qb(51,0,null,null,5,"tr",[],null,null,null,null,null)),(t()(),i.qb(52,0,null,null,1,"td",[],null,null,null,null,null)),(t()(),i.Ib(-1,null,["ID"])),(t()(),i.qb(54,0,null,null,2,"td",[["class","text-left pl-23 background-f1"]],null,null,null,null,null)),(t()(),i.qb(55,0,null,null,1,"span",[["class","ml-1-8rem"]],[[8,"title",0]],null,null,null,null)),(t()(),i.Ib(56,null,[" ",""])),(t()(),i.hb(16777216,null,null,1,null,Ue)),i.pb(58,278528,null,0,C.k,[i.P,i.M,i.s],{ngForOf:[0,"ngForOf"]},null),(t()(),i.qb(59,0,null,null,2,"div",[["class","modal-footer"]],null,null,null,null,null)),(t()(),i.qb(60,0,null,null,1,"button",[["class","btn btn-secondary btn-sm"],["data-dismiss","modal"],["type","button"]],null,null,null,null,null)),(t()(),i.Ib(-1,null,["Close"])),(t()(),i.qb(62,0,null,null,44,"div",[["class","modal fade"],["id","configurationModal"],["role","dialog"]],null,null,null,null,null)),(t()(),i.qb(63,0,null,null,43,"div",[["class","modal-dialog modal-dialog-component modal-xl modal-height"]],null,null,null,null,null)),(t()(),i.qb(64,0,null,null,42,"div",[["class","modal-content h-100"]],null,null,null,null,null)),(t()(),i.qb(65,0,null,null,2,"div",[["class","modal-header"]],null,null,null,null,null)),(t()(),i.qb(66,0,null,null,1,"h5",[["class","modal-title text-overflow"]],null,null,null,null,null)),(t()(),i.Ib(67,null,["Live Data - ",""])),(t()(),i.qb(68,0,null,null,35,"div",[["class","modal-body"]],null,null,null,null,null)),(t()(),i.qb(69,0,null,null,30,"div",[["class","configured-conditions"]],null,null,null,null,null)),(t()(),i.qb(70,0,null,null,14,"div",[["class","row w-100 m-0"]],null,null,null,null,null)),(t()(),i.qb(71,0,null,null,4,"div",[["class","form-group col-lg-4 col-md-4 col-sm-4"]],null,null,null,null,null)),(t()(),i.qb(72,0,null,null,1,"label",[],null,null,null,null,null)),(t()(),i.Ib(-1,null,["Asset"])),(t()(),i.qb(74,0,null,null,1,"input",[["class","form-control"],["disabled",""],["type","text"]],[[8,"value",0]],[[null,"change"],[null,"keydown.enter"]],function(t,e,n){var l=!0;return"change"===e&&(l=!1!==i.Ab(t,75).transformString(n)&&l),"keydown.enter"===e&&(l=!1!==i.Ab(t,75).transformString(n)&&l),l},null,null)),i.pb(75,16384,null,0,E.a,[i.E,i.k],null,null),(t()(),i.qb(76,0,null,null,4,"div",[["class","form-group col-lg-4 col-md-4 col-sm-4"]],null,null,null,null,null)),(t()(),i.qb(77,0,null,null,1,"label",[],null,null,null,null,null)),(t()(),i.Ib(-1,null,["Tag"])),(t()(),i.qb(79,0,null,null,1,"input",[["class","form-control"],["disabled",""],["type","text"]],[[8,"value",0]],[[null,"change"],[null,"keydown.enter"]],function(t,e,n){var l=!0;return"change"===e&&(l=!1!==i.Ab(t,80).transformString(n)&&l),"keydown.enter"===e&&(l=!1!==i.Ab(t,80).transformString(n)&&l),l},null,null)),i.pb(80,16384,null,0,E.a,[i.E,i.k],null,null),(t()(),i.qb(81,0,null,null,3,"div",[["class","form-group col-lg-4 col-md-4 col-sm-4 arrange"]],null,null,null,null,null)),(t()(),i.qb(82,0,null,null,0,"input",[["class","form-control input-checkbox form-background"],["disabled",""],["type","checkbox"]],[[8,"checked",0]],null,null,null,null)),(t()(),i.qb(83,0,null,null,1,"span",[["class","form-check-label mx-1 show-check"]],null,null,null,null,null)),(t()(),i.Ib(-1,null,["Show Value"])),(t()(),i.qb(85,0,null,null,14,"div",[["class","row w-100 m-0"]],null,null,null,null,null)),(t()(),i.qb(86,0,null,null,4,"div",[["class","form-group col-lg-4 col-md-4 col-sm-4"]],null,null,null,null,null)),(t()(),i.qb(87,0,null,null,1,"label",[],null,null,null,null,null)),(t()(),i.Ib(-1,null,["Restrict decimal to"])),(t()(),i.qb(89,0,null,null,1,"input",[["class","form-control"],["disabled",""],["type","text"]],[[8,"value",0]],[[null,"change"],[null,"keydown.enter"]],function(t,e,n){var l=!0;return"change"===e&&(l=!1!==i.Ab(t,90).transformString(n)&&l),"keydown.enter"===e&&(l=!1!==i.Ab(t,90).transformString(n)&&l),l},null,null)),i.pb(90,16384,null,0,E.a,[i.E,i.k],null,null),(t()(),i.qb(91,0,null,null,4,"div",[["class","form-group col-lg-4 col-md-4 col-sm-4"]],null,null,null,null,null)),(t()(),i.qb(92,0,null,null,1,"label",[],null,null,null,null,null)),(t()(),i.Ib(-1,null,["Unit"])),(t()(),i.qb(94,0,null,null,1,"input",[["class","form-control"],["disabled",""],["type","text"]],[[8,"value",0]],[[null,"change"],[null,"keydown.enter"]],function(t,e,n){var l=!0;return"change"===e&&(l=!1!==i.Ab(t,95).transformString(n)&&l),"keydown.enter"===e&&(l=!1!==i.Ab(t,95).transformString(n)&&l),l},null,null)),i.pb(95,16384,null,0,E.a,[i.E,i.k],null,null),(t()(),i.qb(96,0,null,null,3,"div",[["class","form-group col-lg-4 col-md-4 col-sm-4 arrange"]],null,null,null,null,null)),(t()(),i.qb(97,0,null,null,0,"input",[["class","form-control input-checkbox form-background"],["disabled",""],["type","checkbox"]],[[8,"checked",0]],null,null,null,null)),(t()(),i.qb(98,0,null,null,1,"span",[["class","form-check-label mx-1 show-check"]],null,null,null,null,null)),(t()(),i.Ib(-1,null,["Show Units"])),(t()(),i.hb(16777216,null,null,1,null,Ne)),i.pb(101,16384,null,0,C.l,[i.P,i.M],{ngIf:[0,"ngIf"]},null),(t()(),i.hb(16777216,null,null,1,null,je)),i.pb(103,16384,null,0,C.l,[i.P,i.M],{ngIf:[0,"ngIf"]},null),(t()(),i.qb(104,0,null,null,2,"div",[["class","modal-footer"]],null,null,null,null,null)),(t()(),i.qb(105,0,null,null,1,"button",[["class","btn btn-secondary btn-sm"],["data-dismiss","modal"],["type","button"]],null,null,null,null,null)),(t()(),i.Ib(-1,null,["Close"])),(t()(),i.qb(107,0,null,null,4,"div",[["class","btnGroupContainer"]],null,null,null,null,null)),(t()(),i.hb(16777216,null,null,1,null,We)),i.pb(109,16384,null,0,C.l,[i.P,i.M],{ngIf:[0,"ngIf"]},null),(t()(),i.hb(16777216,null,null,1,null,qe)),i.pb(111,16384,null,0,C.l,[i.P,i.M],{ngIf:[0,"ngIf"]},null)],function(t,e){var n=e.component;t(e,4,0,n.contextMenuEnabled),t(e,31,0,i.sb(1,"",i.Ab(e,31),""),"scada",i.sb(1,"History - ",n._preview.cell_name,"")),t(e,35,0,i.sb(1,"",i.Ab(e,35),""),"scada",i.sb(1,"Action Info - ",n._preview.cell_name,""),"scada"),t(e,58,0,n.cellPropertyData.body_content),t(e,101,0,!n.configPopupData.conditionsExist),t(e,103,0,n.configPopupData.conditionsExist),t(e,109,0,n._handleGraph.graph&&n._handleGraph.graph.zoomEnabled),t(e,111,0,n.scadaData.isOwner)},function(t,e){var n=e.component;t(e,13,0,n._preview.countDown),t(e,19,0,i.sb(1,"",n._preview.cell_name,"")),t(e,20,0,n._preview.cell_name),t(e,49,0,i.sb(1,"",n.context_shape_name,"")),t(e,50,0,n.context_shape_name),t(e,55,0,i.sb(1,"",n.context_shape_name,"")),t(e,56,0,n.cell_id),t(e,67,0,n.context_shape_name),t(e,74,0,i.sb(1,"",n.configPopupData.device,"")),t(e,79,0,i.sb(1,"",n.configPopupData.tag,"")),t(e,82,0,n.configPopupData.showValue),t(e,89,0,i.sb(1,"",n.configPopupData.decimal,"")),t(e,94,0,i.sb(1,"",n.configPopupData.unit,"")),t(e,97,0,n.configPopupData.showUnits)})}var Ze=n("RA6g"),Ke=n("OeNE"),Je=n("Zcos"),Qe=function(){function t(t,e,n){this._editorMenu=t,this._handleGraph=e,this._toastLoad=n,this.imageUploadSettings={isUploadEnabled:!0,isSingleSelection:!1,isContentProjection:!1}}return t.prototype.ngOnInit=function(){},t.prototype.importFilesIntoGraph=function(){var t=this,e=new FileReader;this.importedFiles.nativeElement.value?(e.onload=function(e){var n=t._editorMenu.parseXmlToDoc(e.target.result);t._handleGraph.graph.setSelectionCells(t._handleGraph.graph.importGraphModel(n.documentElement))},e.onerror=function(e){t._toastLoad.toast("error","Error","Unable to read the file, please try again with a valid file.",!0)},e.readAsText(this.importedFiles.nativeElement.files[0]),this.closeDialog("import")):this._toastLoad.toast("error","Error","Please select a file to import.",!0)},t.prototype.closeDialog=function(t){switch(t){case"import":this.closeImportModal.nativeElement.click()}},t.prototype.clearFileContent=function(){this.importedFiles.nativeElement.value=""},t.prototype.clearExportFileName=function(){this.exportfileName=""},t.prototype.exportFilesIntoGraph=function(){if(this.exportfileName){var t=this._editorMenu.getXmlForDownload(),e=new Blob([t],{type:"text/xml"}),n=document.createElement("a");n.download=this.exportfileName,null!==n.href&&window.URL.revokeObjectURL(this.textFile),n.href=window.URL.createObjectURL(e),n.click()}else this._toastLoad.toast("error","Error","Unable to export, please enter a valid Filename",!0)},t}(),$e=i.ob({encapsulation:0,styles:[[".loader-rings[_ngcontent-%COMP%]{display:inline-block;position:relative;width:80px;height:80px}.loader-rings[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{box-sizing:border-box;display:block;position:absolute;width:64px;height:64px;margin:8px;border:8px solid #fff;border-radius:50%;-webkit-animation:1.2s cubic-bezier(.5,0,.5,1) infinite loader-rings;animation:1.2s cubic-bezier(.5,0,.5,1) infinite loader-rings;border-color:#2d7bdb transparent transparent}.loader-rings[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(1){-webkit-animation-delay:-.45s;animation-delay:-.45s}.loader-rings[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(2){-webkit-animation-delay:-.3s;animation-delay:-.3s}.loader-rings[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(3){-webkit-animation-delay:-.15s;animation-delay:-.15s}@-webkit-keyframes loader-rings{0%{transform:rotate(0)}100%{transform:rotate(360deg)}}@keyframes loader-rings{0%{transform:rotate(0)}100%{transform:rotate(360deg)}}.main-loader[_ngcontent-%COMP%]{position:absolute;z-index:100;top:0;background:#ececec38;height:100%;width:100%}.content-align[_ngcontent-%COMP%]{height:95%;width:97%;position:absolute;z-index:100;background:#fff;overflow:hidden}.scada-choose-file[_ngcontent-%COMP%]::file-selector-button{display:inline-block;font-family:Roboto-Regular;box-shadow:none!important;outline:0;padding:.25rem .5rem;border-radius:0!important;border:.5px solid #aeaeae;background:#fff;color:#5a5a5a;line-height:1.5;transition:background .8s}.scada-choose-file[_ngcontent-%COMP%]::file-selector-button:hover{background:radial-gradient(circle,transparent 1%,#fff 1%) center/15000% #fff;border-color:#5a5a5a}"]],data:{}});function tn(t){return i.Kb(0,[i.Gb(402653184,1,{importedFiles:0}),i.Gb(402653184,2,{closeImportModal:0}),(t()(),i.qb(2,0,null,null,6,"div",[["class","main-loader d-none"],["id","scada-loader"]],null,null,null,null,null)),(t()(),i.qb(3,0,null,null,5,"div",[["id","loader-wrapper-submaincontent"]],null,null,null,null,null)),(t()(),i.qb(4,0,null,null,4,"div",[["class","loader-rings"]],null,null,null,null,null)),(t()(),i.qb(5,0,null,null,0,"div",[],null,null,null,null,null)),(t()(),i.qb(6,0,null,null,0,"div",[],null,null,null,null,null)),(t()(),i.qb(7,0,null,null,0,"div",[],null,null,null,null,null)),(t()(),i.qb(8,0,null,null,0,"div",[],null,null,null,null,null)),(t()(),i.qb(9,0,null,null,0,"button",[["class","btn btn-primary m-auto d-none"],["data-target","#import_modal"],["data-toggle","modal"],["id","scada_import_modal"],["type","button"]],null,null,null,null,null)),(t()(),i.qb(10,0,null,null,18,"div",[["aria-hidden","true"],["aria-labelledby","importScada"],["class","modal fade"],["id","import_modal"],["role","dialog"],["tabindex","-1"]],null,null,null,null,null)),(t()(),i.qb(11,0,null,null,17,"div",[["class","modal-dialog modal-dialog-centered"],["role","document"]],null,null,null,null,null)),(t()(),i.qb(12,0,null,null,16,"div",[["class","modal-content"]],null,null,null,null,null)),(t()(),i.qb(13,0,null,null,4,"div",[["class","modal-header"]],null,null,null,null,null)),(t()(),i.qb(14,0,null,null,1,"h6",[["class","modal-title text-muted"],["id","importScada"]],null,null,null,null,null)),(t()(),i.Ib(-1,null,["Import Scada"])),(t()(),i.qb(16,0,null,null,1,"button",[["aria-label","Close"],["class","close"],["data-dismiss","modal"],["type","button"]],null,null,null,null,null)),(t()(),i.qb(17,0,null,null,0,"i",[["class","elm-cancel"]],null,null,null,null,null)),(t()(),i.qb(18,0,null,null,5,"div",[["class","modal-body"]],null,null,null,null,null)),(t()(),i.qb(19,0,null,null,1,"div",[["class","form-group"]],null,null,null,null,null)),(t()(),i.qb(20,0,[[1,0],["importedFiles",1]],null,0,"input",[["accept","text/xml"],["class","scada-choose-file"],["id","importedXML"],["type","file"]],null,null,null,null,null)),(t()(),i.qb(21,0,null,null,2,"div",[],null,null,null,null,null)),(t()(),i.qb(22,0,null,null,1,"span",[],null,null,null,null,null)),(t()(),i.Ib(-1,null,["Supported file format: xml"])),(t()(),i.qb(24,0,null,null,4,"div",[["class","modal-footer"]],null,null,null,null,null)),(t()(),i.qb(25,0,[[2,0],["closeImportModal",1]],null,1,"button",[["class","btn btn-secondary btn-sm"],["data-dismiss","modal"],["type","button"]],null,[[null,"click"]],function(t,e,n){var i=!0;return"click"===e&&(i=!1!==t.component.clearFileContent()&&i),i},null,null)),(t()(),i.Ib(-1,null,[" Close "])),(t()(),i.qb(27,0,null,null,1,"button",[["class","btn btn-primary btn-sm"],["type","button"]],null,[[null,"click"]],function(t,e,n){var i=!0;return"click"===e&&(i=!1!==t.component.importFilesIntoGraph()&&i),i},null,null)),(t()(),i.Ib(-1,null,[" Import "])),(t()(),i.qb(29,0,null,null,0,"button",[["class","btn btn-primary m-auto d-none"],["data-target","#export_modal"],["data-toggle","modal"],["id","scada_export_modal"],["type","button"]],null,[[null,"click"]],function(t,e,n){var i=!0;return"click"===e&&(i=!1!==t.component.clearExportFileName()&&i),i},null,null)),(t()(),i.qb(30,0,null,null,23,"div",[["aria-hidden","true"],["aria-labelledby","exportScada"],["class","modal fade"],["id","export_modal"],["role","dialog"],["tabindex","-1"]],null,null,null,null,null)),(t()(),i.qb(31,0,null,null,22,"div",[["class","modal-dialog modal-dialog-centered"],["role","document"]],null,null,null,null,null)),(t()(),i.qb(32,0,null,null,21,"div",[["class","modal-content"]],null,null,null,null,null)),(t()(),i.qb(33,0,null,null,4,"div",[["class","modal-header"]],null,null,null,null,null)),(t()(),i.qb(34,0,null,null,1,"h6",[["class","modal-title text-muted"],["id","exportScada"]],null,null,null,null,null)),(t()(),i.Ib(-1,null,["Export Scada"])),(t()(),i.qb(36,0,null,null,1,"button",[["aria-label","Close"],["class","close"],["data-dismiss","modal"],["type","button"]],null,null,null,null,null)),(t()(),i.qb(37,0,null,null,0,"i",[["class","elm-cancel"]],null,null,null,null,null)),(t()(),i.qb(38,0,null,null,10,"div",[["class","modal-body"]],null,null,null,null,null)),(t()(),i.qb(39,0,null,null,9,"div",[["class","form-group"]],null,null,null,null,null)),(t()(),i.qb(40,0,null,null,1,"label",[],null,null,null,null,null)),(t()(),i.Ib(-1,null,["Filename : "])),(t()(),i.qb(42,0,null,null,6,"input",[["class","form-control"],["placeholder","Enter file name"],["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"],[null,"keydown.enter"]],function(t,e,n){var l=!0,o=t.component;return"input"===e&&(l=!1!==i.Ab(t,43)._handleInput(n.target.value)&&l),"blur"===e&&(l=!1!==i.Ab(t,43).onTouched()&&l),"compositionstart"===e&&(l=!1!==i.Ab(t,43)._compositionStart()&&l),"compositionend"===e&&(l=!1!==i.Ab(t,43)._compositionEnd(n.target.value)&&l),"change"===e&&(l=!1!==i.Ab(t,48).transformString(n)&&l),"keydown.enter"===e&&(l=!1!==i.Ab(t,48).transformString(n)&&l),"ngModelChange"===e&&(l=!1!==(o.exportfileName=n)&&l),l},null,null)),i.pb(43,16384,null,0,b.e,[i.E,i.k,[2,b.a]],null,null),i.Fb(1024,null,b.o,function(t){return[t]},[b.e]),i.pb(45,671744,null,0,b.t,[[8,null],[8,null],[8,null],[6,b.o]],{model:[0,"model"]},{update:"ngModelChange"}),i.Fb(2048,null,b.p,null,[b.t]),i.pb(47,16384,null,0,b.q,[[4,b.p]],null,null),i.pb(48,16384,null,0,E.a,[i.E,i.k],null,{updateModel:"ngModelChange"}),(t()(),i.qb(49,0,null,null,4,"div",[["class","modal-footer"]],null,null,null,null,null)),(t()(),i.qb(50,0,null,null,1,"button",[["class","btn btn-secondary btn-sm"],["data-dismiss","modal"],["type","button"]],null,null,null,null,null)),(t()(),i.Ib(-1,null,["Close"])),(t()(),i.qb(52,0,null,null,1,"button",[["class","btn btn-primary btn-sm"],["data-dismiss","modal"],["type","button"]],null,[[null,"click"]],function(t,e,n){var i=!0;return"click"===e&&(i=!1!==t.component.exportFilesIntoGraph()&&i),i},null,null)),(t()(),i.Ib(-1,null,["Export"])),(t()(),i.qb(54,0,null,null,0,"button",[["class","btn btn-primary m-auto d-none"],["data-target","#upload_modal"],["data-toggle","modal"],["id","scada_upload_modal"],["type","button"]],null,null,null,null,null)),(t()(),i.qb(55,0,null,null,3,"div",[["aria-hidden","true"],["aria-labelledby","exampleModalLabel"],["class","modal fade"],["id","upload_modal"],["role","dialog"],["tabindex","-1"]],null,null,null,null,null)),(t()(),i.qb(56,0,null,null,2,"kl-image-picker",[],null,[["window","message"]],function(t,e,n){var l=!0;return"window:message"===e&&(l=!1!==i.Ab(t,57).onMessage(n)&&l),l},Ze.c,Ze.b)),i.pb(57,1163264,null,1,Ke.a,[Je.a,c.a,u.a],{isScadaTemplateView:[0,"isScadaTemplateView"],defaultSettings:[1,"defaultSettings"]},null),i.Gb(335544320,3,{modalTrigger:0})],function(t,e){var n=e.component;t(e,45,0,n.exportfileName),t(e,57,0,!0,n.imageUploadSettings)},function(t,e){t(e,42,0,i.Ab(e,47).ngClassUntouched,i.Ab(e,47).ngClassTouched,i.Ab(e,47).ngClassPristine,i.Ab(e,47).ngClassDirty,i.Ab(e,47).ngClassValid,i.Ab(e,47).ngClassInvalid,i.Ab(e,47).ngClassPending)})}var en=function(){function t(t,e,n,i,l,o,s,r,a,h,u){var d=this;this.appservice=t,this._activeRoute=e,this._authGuard=n,this._editor=i,this._menu=l,this._router=o,this._auth=s,this._handleGraph=r,this._handleXml=a,this._webScada=h,this._toaster=u,this.showDashboardFilter=!1,this.dashboardData={dashboardId:""},this.widgetData={},this.widgetLoading=!1,this.dashboardInfo={},this.action_name="action",this.cell_name="device",this.context_shape_name="el_ID",this.cell_id="01",this.cellPropertyData={body_content:[]},this.cellType="Shapes",this._activeRoute.params.subscribe(function(t){d.dashboardId=t.id,d.pageType=d._authGuard.getMenuObject.ticket,d.dashboardId?d.loadWidgets(!1,!0):d.loadFirstScada()})}return t.prototype.ngOnInit=function(){var t=this;this._editor.loaderToggleOn(),this._activeRoute.queryParams.subscribe(function(e){var n=e.view,i=setInterval(function(){""!==t.dashboardData.dashboardId&&(t.hasEditAccess=t._authGuard.getMenuObject.accessLevel.edit,"editor"==n&&t.dashboardData.hasOwnProperty("isOwner")?t.hasEditAccess&&t.dashboardData.isOwner?t.typeOfView="editor":t._router.navigate(["/un-authorized"]):t.typeOfView="preview",clearInterval(i),"editor"==t.typeOfView?t.editorDashboardData=t.dashboardData:"preview"==t.typeOfView&&(t.previewDashboardData=t.dashboardData))},100)}),window.addEventListener("beforeunload",function(e){"editor"===t.typeOfView&&Bt._editorUi.editor.modified&&(e.preventDefault(),e.returnValue="")})},t.prototype.ngOnChanges=function(){"editor"==this.typeOfView&&Bt.mxKeyHandler.prototype.setEnabled(!1)},t.prototype.loadFirstScada=function(){var t=this;try{this.appservice.getDashboardLeftSideconfigData({type:"Scada"}).subscribe(function(e){if("success"===e.status){var n=[];e.data.forEach(function(t){t.route="scada/"+t.dashboard_id,n.push(t)}),t.sideMenus=n}t.sideMenus&&t.sideMenus.length>0&&(t.dashboardId=t.sideMenus[0].dashboard_id,t._router.navigate(["scada/"+t.dashboardId]))})}catch(e){console.log(e)}},t.prototype.triggerConfirm=function(){this.triggerCountDown(),this._webScada.contextMenuEnabled=!1,this._webScada.triggerAction()},t.prototype.triggerCountDown=function(){this._webScada.hasSubbed&&this._webScada.hasSubbed.unsubscribe(),this._webScada.initiateTriggerCountDown()},t.prototype.copyInputMessage=function(t){t.focus(),t.select(),document.execCommand("copy")},t.prototype.canDeactivate=function(){if("editor"==this.typeOfView&&Bt._editorUi.editor.modified){var t=window.confirm("There are unsaved changes! Are you sure?");return zt.Observable.of(t)}return!0},t.prototype.loadWidgets=function(t,e){var n=this;if(this.previewDashboardData={},this.editorDashboardData={},!(t&&Bt.hasOwnProperty("_editorUi")&&Bt._editorUi.hasOwnProperty("editor")&&"editor"==this.typeOfView&&Bt._editorUi.editor.modified)||confirm("There are unsaved changes! Are you sure?"))try{if(this._editor.loaderToggleOn(),this.widgetLoading=!1,!this.dashboardId)return void(this.widgetLoading=!1);this.appservice.getScadaData({dashboard_id:this.dashboardId}).subscribe(function(t){t&&"success"===t.status?(0==t.data.widget.wcData.length?n.createDefaultWidget():(n.widgetData=t.data.widget,n.widgetData.wcData.forEach(function(t){t.cData.chartData={}}),n.dashboardData=t.data,n.dashboardData.pageType=n.pageType,n.dashboardData.isReset=!1,n.dashboardData.isOwner=t.data.isOwner,n.dashboardData.ownerId=t.data.ownerId,n.dashboardData.ownerName=t.data.ownerName,n.dashboardInfo={dashboardName:n.dashboardData.dashboardName,dashboardId:n.dashboardData.dashboardId,pageType:n.pageType,isOwner:t.data.isOwner},e&&(n.previewDashboardData=n.dashboardData),"editor"==n.typeOfView&&(n.editorDashboardData=n.dashboardData)),n.widgetLoading=!0):console.log("error")})}catch(i){console.log("error")}},t.prototype.createDefaultWidget=function(){var t=this,e={dashboard_id:this.dashboardId,widget_data:{SCADAData:"PG14R3JhcGhNb2RlbCBkeD0iMTAyMSIgZHk9IjYxOSIgZ3JpZD0iMSIgZ3JpZFNpemU9IjEwIiBndWlkZXM9IjEiIHRvb2x0aXBzPSIxIiBjb25uZWN0PSIxIiBhcnJvd3M9IjEiIGZvbGQ9IjEiIHBhZ2U9IjEiIHBhZ2VTY2FsZT0iMSIgcGFnZVdpZHRoPSI4NTAiIHBhZ2VIZWlnaHQ9IjExMDAiIGJhY2tncm91bmQ9Im51bGwiIHNhdmVUb1ByZXZpZXc9InRydWUiIGZpdFRvU2NyZWVuPSJmYWxzZSIgZ3JpZENvbG9yPSIjZDBkMGQwIiBncmlkRW5hYmxlZD0idHJ1ZSI+CiAgICAgIDxyb290PgogICAgICAgIDxteENlbGwgaWQ9IjAiIC8+CiAgICAgICAgPG14Q2VsbCBpZD0iMSIgcGFyZW50PSIwIiAvPgogICAgICA8L3Jvb3Q+CiAgICA8L214R3JhcGhNb2RlbD4=",cData:{chartOptions:{reportFormat:{}}},cType:"Scada"},site_id:this._auth.getCurrentUserSiteId()};this.appservice.saveScada(e).subscribe(function(e){"success"==e.status?t.loadWidgets(!1):t._toaster.toast("error","Error","Failed to load, please try again later.",!0)},function(e){t._toaster.toast("error","Error","Unable to reach server, please try again later.",!0)})},t.prototype.ngOnDestroy=function(){this._editor.loaderToggleOff()},t}(),nn=i.ob({encapsulation:0,styles:[[".btnGroupContainer[_ngcontent-%COMP%]{position:absolute;bottom:3rem;right:1.5rem;z-index:99}.btnGroup[_ngcontent-%COMP%]{background-color:#fff;border-radius:8px;box-shadow:0 1px 4px rgba(0,0,0,.3);width:32px;height:32px;position:relative;margin-bottom:10px}.btnGroup.extra[_ngcontent-%COMP%]{height:65px;display:flex;justify-content:center;flex-direction:column}.seperator[_ngcontent-%COMP%]{width:80%;height:.5px;background:#888c9b;margin:auto}.button[_ngcontent-%COMP%]{display:block;cursor:pointer;transition:background-color .16s ease-out;background:0 0;border:none;height:100%;width:100%;align-items:center;justify-content:center;display:flex;position:relative}.button[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#455a64;font-size:13px}.tooltip[_ngcontent-%COMP%]{opacity:1;display:none;position:absolute;left:0;top:50%;transform:translate(-125%,-50%);background:#455a64;padding:8px 10px;border-radius:6px;color:#ffff!important;font-size:13px!important;font-weight:700}.tooltip[_ngcontent-%COMP%]::after{content:'';position:absolute;width:0;height:0;border-width:10px;border-style:solid;border-color:transparent transparent transparent #455a64;right:0;transform:translate(90%,-50%);top:50%}.button[_ngcontent-%COMP%]:focus, .button[_ngcontent-%COMP%]:hover{outline:0!important}.button[_ngcontent-%COMP%]:hover   .tooltip[_ngcontent-%COMP%]{display:block}.button[_ngcontent-%COMP%]:hover   .fa[_ngcontent-%COMP%]{color:#008bfe}[_nghost-%COMP%]     .pointer-events-none{pointer-events:none}"],s],data:{}});function ln(t){return i.Kb(0,[(t()(),i.qb(0,0,null,null,1,"kl-breadcrumb",[],null,[[null,"refreshDashboardEmitter"]],function(t,e,n){var i=!0;return"refreshDashboardEmitter"===e&&(i=!1!==t.component.loadWidgets(!0,!0)&&i),i},r.b,r.a)),i.pb(1,770048,null,0,a.a,[i.E,h.a,u.a,d.a,c.l,c.a,p.a,p.a,m.a,g.a,x.a],{dashboardData:[0,"dashboardData"]},{refreshDashboardEmitter:"refreshDashboardEmitter"})],function(t,e){t(e,1,0,e.component.dashboardData)},null)}function on(t){return i.Kb(0,[(t()(),i.qb(0,0,null,null,1,"kl-editor",[],null,[[null,"refetchScada"]],function(t,e,n){var i=!0;return"refetchScada"===e&&(i=!1!==t.component.loadWidgets(!1,!0)&&i),i},Wt,jt)),i.pb(1,770048,null,0,Yt,[u.a,T,Gt,Vt,w,M,d.a,_,Ft],{scadaData:[0,"scadaData"]},{refetchScada:"refetchScada"})],function(t,e){t(e,1,0,e.component.editorDashboardData)},null)}function sn(t){return i.Kb(0,[(t()(),i.qb(0,0,null,null,4,null,null,null,null,null,null,null)),(t()(),i.qb(1,0,null,null,3,"div",[["class","main-content fill-margin-width"]],null,null,null,null,null)),(t()(),i.qb(2,0,null,null,2,"div",[["class","sub-main-content"]],null,null,null,null,null)),(t()(),i.hb(16777216,null,null,1,null,on)),i.pb(4,16384,null,0,C.l,[i.P,i.M],{ngIf:[0,"ngIf"]},null)],function(t,e){t(e,4,0,e.component.editorDashboardData)},null)}function rn(t){return i.Kb(0,[(t()(),i.qb(0,0,null,null,1,"kl-preview",[],null,[[null,"refetchOnEdit"]],function(t,e,n){var i=!0;return"refetchOnEdit"===e&&(i=!1!==t.component.loadWidgets(!1,!1)&&i),i},Xe,Oe)),i.pb(1,770048,null,0,Re,[T,c.l,Vt,w,d.a,u.a,_],{scadaData:[0,"scadaData"]},{refetchOnEdit:"refetchOnEdit"})],function(t,e){t(e,1,0,e.component.previewDashboardData)},null)}function an(t){return i.Kb(0,[(t()(),i.qb(0,0,null,null,4,null,null,null,null,null,null,null)),(t()(),i.qb(1,0,null,null,3,"div",[["class","main-content"]],null,null,null,null,null)),(t()(),i.qb(2,0,null,null,2,"div",[["class","sub-main-content"]],null,null,null,null,null)),(t()(),i.hb(16777216,null,null,1,null,rn)),i.pb(4,16384,null,0,C.l,[i.P,i.M],{ngIf:[0,"ngIf"]},null)],function(t,e){t(e,4,0,e.component.previewDashboardData)},null)}function hn(t){return i.Kb(0,[(t()(),i.qb(0,0,null,null,5,null,null,null,null,null,null,null)),i.pb(1,16384,null,0,C.p,[],{ngSwitch:[0,"ngSwitch"]},null),(t()(),i.hb(16777216,null,null,1,null,sn)),i.pb(3,278528,null,0,C.q,[i.P,i.M,C.p],{ngSwitchCase:[0,"ngSwitchCase"]},null),(t()(),i.hb(16777216,null,null,1,null,an)),i.pb(5,278528,null,0,C.q,[i.P,i.M,C.p],{ngSwitchCase:[0,"ngSwitchCase"]},null),(t()(),i.hb(0,null,null,0))],function(t,e){t(e,1,0,e.component.typeOfView),t(e,3,0,"editor"),t(e,5,0,"preview")},null)}function un(t){return i.Kb(0,[(t()(),i.qb(0,0,null,null,1,"kl-scada-modals",[],null,null,null,tn,$e)),i.pb(1,114688,null,0,Qe,[Gt,w,u.a],null,null),(t()(),i.hb(16777216,null,null,1,null,ln)),i.pb(3,16384,null,0,C.l,[i.P,i.M],{ngIf:[0,"ngIf"]},null),(t()(),i.hb(16777216,null,null,1,null,hn)),i.pb(5,16384,null,0,C.l,[i.P,i.M],{ngIf:[0,"ngIf"]},null)],function(t,e){var n=e.component;t(e,1,0),t(e,3,0,n.dashboardId&&n.dashboardData.hasOwnProperty("dashboardName")),t(e,5,0,n.typeOfView&&n.dashboardData)},null)}function dn(t){return i.Kb(0,[(t()(),i.qb(0,0,null,null,1,"kl-scada",[],null,null,null,un,nn)),i.pb(1,770048,null,0,en,[h.a,c.a,d.a,T,Gt,c.l,S.a,w,Vt,_,u.a],null,null)],function(t,e){t(e,1,0)},null)}var cn=i.mb("kl-scada",en,dn,{},{},[]),pn=n("No7X"),mn=n("bIR2"),gn=n("9Bt9"),xn=n("qAlS"),yn=n("eDkP"),fn=n("Fzqc"),vn=n("M2Lx"),bn=n("Tq4R"),Cn=n("rAFq"),En=n("4D9t"),Sn=n("bMPK"),wn=n("UiI2"),Tn=n("dWZg"),An=n("I13Q"),Mn=n("gk6K"),Ln=n("ea3G"),Pn=function(){function t(){}return t.prototype.canDeactivate=function(t,e,n){return!t.canDeactivate||t.canDeactivate()},t.ngInjectableDef=i.T({factory:function(){return new t},token:t,providedIn:"root"}),t}(),In=function(){return function(){}}(),Rn=n("Hf/j"),On=n("yYhs"),_n=n("VwUT"),Dn=n("5NQ/"),Un=n("4c35"),Nn=n("lLAP"),kn=n("jRYl"),Hn=n("KL2N"),Gn=n("QX+E"),Fn=n("0+i/"),Vn=n("54cG"),Bn=n("lHym"),zn=n("j1ZV"),Yn=n("EFU/"),jn=n("Cpk/");n.d(e,"WebscadaModuleNgFactory",function(){return Wn});var Wn=i.nb(l,[],function(t){return i.xb([i.yb(512,i.j,i.cb,[[8,[o.a,cn,pn.a,mn.a]],[3,i.j],i.x]),i.yb(4608,C.n,C.m,[i.u,[2,C.C]]),i.yb(4608,b.E,b.E,[]),i.yb(4608,b.g,b.g,[]),i.yb(4608,gn.e,gn.e,[C.c,i.z,xn.j,gn.g]),i.yb(5120,"virtual-scroller-default-options",It.j,[]),i.yb(4608,It.m,It.m,[]),i.yb(4608,yn.b,yn.b,[yn.h,yn.d,i.j,yn.g,yn.e,i.q,i.z,C.c,fn.b,[2,C.h]]),i.yb(5120,yn.i,yn.j,[yn.b]),i.yb(4608,vn.a,vn.a,[]),i.yb(5120,bn.b,bn.c,[yn.b]),i.yb(4608,bn.d,bn.d,[yn.b,i.q,[2,C.h],bn.b,[2,bn.a],[3,bn.d],yn.d]),i.yb(4608,Cn.a,Cn.a,[]),i.yb(5120,En.a,En.b,[yn.b]),i.yb(4608,Sn.a,wn.a,[[2,Sn.b],Tn.a]),i.yb(4608,An.a,An.a,[]),i.yb(4608,Mn.a,Mn.a,[]),i.yb(4608,Ln.a,Ln.a,[]),i.yb(4608,Pn,Pn,[]),i.yb(1073742336,C.b,C.b,[]),i.yb(1073742336,c.m,c.m,[[2,c.s],[2,c.l]]),i.yb(1073742336,In,In,[]),i.yb(1073742336,Rn.f,Rn.f,[]),i.yb(1073742336,b.B,b.B,[]),i.yb(1073742336,b.l,b.l,[]),i.yb(1073742336,b.x,b.x,[]),i.yb(1073742336,gn.f,gn.f,[]),i.yb(1073742336,On.b,On.b,[]),i.yb(1073742336,_n.a,_n.a,[]),i.yb(1073742336,v.c,v.c,[]),i.yb(1073742336,Dn.b,Dn.b,[]),i.yb(1073742336,It.l,It.l,[]),i.yb(1073742336,It.b,It.b,[]),i.yb(1073742336,fn.a,fn.a,[]),i.yb(1073742336,Un.f,Un.f,[]),i.yb(1073742336,Tn.b,Tn.b,[]),i.yb(1073742336,xn.g,xn.g,[]),i.yb(1073742336,yn.f,yn.f,[]),i.yb(1073742336,vn.b,vn.b,[]),i.yb(1073742336,Nn.a,Nn.a,[]),i.yb(1073742336,kn.a,kn.a,[]),i.yb(1073742336,Hn.a,Hn.a,[]),i.yb(1073742336,Gn.a,Gn.a,[]),i.yb(1073742336,Gn.b,Gn.b,[]),i.yb(1073742336,Fn.a,Fn.a,[]),i.yb(1073742336,Vn.a,Vn.a,[]),i.yb(1073742336,xn.e,xn.e,[]),i.yb(1073742336,Bn.a,Bn.a,[]),i.yb(1073742336,zn.a,zn.a,[]),i.yb(1073742336,l,l,[]),i.yb(1024,c.j,function(){return[[{path:"",component:en,canActivate:[d.a],canDeactivate:[Pn]}]]},[]),i.yb(256,v.d,v.e,[]),i.yb(256,Yn.a,Gn.c,[]),i.yb(1024,jn.a,zn.b,[C.u])])})},ksOG:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("DtyJ"),l=n("JM0U");i.Observable.prototype.auditTime=l.auditTime},l3KV:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("DtyJ"),l=n("CuWV");i.Observable.prototype.publishLast=l.publishLast},l4jP:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("ahDk");e.share=function(){return i.share()(this)}},l53z:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("ahDk");e.zipAll=function(t){return i.zipAll(t)(this)}},lK5c:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("DtyJ");i.Observable.defer=i.defer},lRok:function(t,e,n){"use strict";n.r(e);var i=n("iLxQ"),l=n("rPjj"),o=n("MGBS"),s=n("siIJ"),r=n("K9Ia"),a=n("uMaO"),h=n("FFOo"),u=n("6blF"),d=n("S5XQ"),c=n("2Ros");function p(t,e){return e?Object(c.a)(t,e):new u.a(Object(d.a)(t))}var m=n("u67D"),g=n("AWo+");function x(t,e){if(!t)throw new Error("Iterable cannot be null");return e?Object(g.a)(t,e):new u.a(Object(m.a)(t))}var y,f=n("WSmt"),v=n("D2hM"),b=n("b8Xf"),C=n("N8wI"),E=n("dzgT"),S=n("vAyL"),w=n("02O7"),T=n("5IO1"),A=n("6wkY"),M=n("IxPp"),L=n("+gEr"),P=n("L/V9"),I=n("En8+"),R=n("xTla"),O=n("b7mW"),_=n("3fWJ"),D=n("1BfG"),U=n("8g8A"),N=n("3U0i"),k=n("awvh"),H=n("mQwz"),G={e:{}},F=n("DKTb"),V=n("mChF"),B=n("isby"),z=n("2ePl"),Y=n("VGuC"),j=n("2Bdj"),W=n("jHfq"),q=n("/21U"),X=n("McSo"),Z=n("8cou"),K=n("/WYv"),J=n("nkY7"),Q=n("+umK"),$=n("jFaF"),tt=n("y3By"),et=n("U8mb"),nt=n("Fxb1"),it=n("+tJ4"),lt=n("JcRv"),ot=n("zotm"),st=n("PeiK");function rt(){G.e=void 0;try{return y.apply(this,arguments)}catch(t){return G.e=t,G}finally{y=void 0}}function at(t){return y=t,rt}n.d(e,"config",function(){return i.a}),n.d(e,"InnerSubscriber",function(){return l.a}),n.d(e,"OuterSubscriber",function(){return o.a}),n.d(e,"Scheduler",function(){return s.a}),n.d(e,"AnonymousSubject",function(){return r.a}),n.d(e,"SubjectSubscription",function(){return a.a}),n.d(e,"Subscriber",function(){return h.a}),n.d(e,"fromPromise",function(){return p}),n.d(e,"fromIterable",function(){return x}),n.d(e,"ajax",function(){return f.a}),n.d(e,"webSocket",function(){return v.a}),n.d(e,"ajaxGet",function(){return b.g}),n.d(e,"ajaxPost",function(){return b.j}),n.d(e,"ajaxDelete",function(){return b.f}),n.d(e,"ajaxPut",function(){return b.k}),n.d(e,"ajaxPatch",function(){return b.i}),n.d(e,"ajaxGetJSON",function(){return b.h}),n.d(e,"AjaxObservable",function(){return b.b}),n.d(e,"AjaxSubscriber",function(){return b.d}),n.d(e,"AjaxResponse",function(){return b.c}),n.d(e,"AjaxError",function(){return b.a}),n.d(e,"AjaxTimeoutError",function(){return b.e}),n.d(e,"WebSocketSubject",function(){return C.a}),n.d(e,"CombineLatestOperator",function(){return E.a}),n.d(e,"dispatch",function(){return S.a}),n.d(e,"SubscribeOnObservable",function(){return w.a}),n.d(e,"Timestamp",function(){return T.a}),n.d(e,"TimeInterval",function(){return A.a}),n.d(e,"GroupedObservable",function(){return M.a}),n.d(e,"defaultThrottleConfig",function(){return L.a}),n.d(e,"rxSubscriber",function(){return P.a}),n.d(e,"iterator",function(){return I.a}),n.d(e,"observable",function(){return R.a}),n.d(e,"ArgumentOutOfRangeError",function(){return O.a}),n.d(e,"EmptyError",function(){return _.a}),n.d(e,"Immediate",function(){return D.a}),n.d(e,"ObjectUnsubscribedError",function(){return U.a}),n.d(e,"TimeoutError",function(){return N.a}),n.d(e,"UnsubscriptionError",function(){return k.a}),n.d(e,"applyMixins",function(){return H.a}),n.d(e,"errorObject",function(){return G}),n.d(e,"hostReportError",function(){return F.a}),n.d(e,"identity",function(){return V.a}),n.d(e,"isArray",function(){return B.a}),n.d(e,"isArrayLike",function(){return z.a}),n.d(e,"isDate",function(){return Y.a}),n.d(e,"isFunction",function(){return j.a}),n.d(e,"isIterable",function(){return W.a}),n.d(e,"isNumeric",function(){return q.a}),n.d(e,"isObject",function(){return X.a}),n.d(e,"isObservable",function(){return Z.a}),n.d(e,"isPromise",function(){return K.a}),n.d(e,"isScheduler",function(){return J.a}),n.d(e,"noop",function(){return Q.a}),n.d(e,"not",function(){return $.a}),n.d(e,"pipe",function(){return tt.a}),n.d(e,"root",function(){return et.a}),n.d(e,"subscribeTo",function(){return nt.a}),n.d(e,"subscribeToArray",function(){return it.a}),n.d(e,"subscribeToIterable",function(){return m.a}),n.d(e,"subscribeToObservable",function(){return lt.a}),n.d(e,"subscribeToPromise",function(){return d.a}),n.d(e,"subscribeToResult",function(){return ot.a}),n.d(e,"toSubscriber",function(){return st.a}),n.d(e,"tryCatch",function(){return at})},lXds:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("ahDk");e.delayWhen=function(t,e){return i.delayWhen(t,e)(this)}},m1gp:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("DtyJ");i.Observable.zip=i.zip},mQn8:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("ahDk");e.mergeScan=function(t,e,n){return void 0===n&&(n=Number.POSITIVE_INFINITY),i.mergeScan(t,e,n)(this)}},mQwz:function(t,e,n){"use strict";function i(t,e){for(var n=0,i=e.length;n<i;n++)for(var l=e[n],o=Object.getOwnPropertyNames(l.prototype),s=0,r=o.length;s<r;s++){var a=o[s];t.prototype[a]=l.prototype[a]}}n.d(e,"a",function(){return i})},mfsk:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("ahDk");e.defaultIfEmpty=function(t){return void 0===t&&(t=null),i.defaultIfEmpty(t)(this)}},mx47:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("DtyJ");i.Observable.merge=i.merge},n2g9:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("DtyJ"),l=n("bd5T");i.Observable.prototype.delay=l.delay},n6Nf:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("ahDk");e.windowToggle=function(t,e){return i.windowToggle(t,e)(this)}},nZYK:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("ahDk");e.switchMap=function(t){return i.switchMap(t)(this)}},nueD:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("ahDk");e.isEmpty=function(){return i.isEmpty()(this)}},oKp4:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("DtyJ"),l=n("ZHpM");i.Observable.prototype.take=l.take},oXC5:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("ahDk");e.switchMapTo=function(t){return i.switchMapTo(t)(this)}},ob0Y:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("DtyJ"),l=n("QPu+");i.Observable.prototype.reduce=l.reduce},odkN:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.letProto=function(t){return t(this)}},ofYe:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("DtyJ"),l=n("l53z");i.Observable.prototype.zipAll=l.zipAll},"ojb+":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("DtyJ");i.Observable.range=i.range},okVX:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("DtyJ"),l=n("pv6b");i.Observable.prototype.switch=l._switch,i.Observable.prototype._switch=l._switch},omlZ:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("DtyJ"),l=n("r+37");i.Observable.prototype.takeUntil=l.takeUntil},ovWV:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("DtyJ");e.concat=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this.lift.call(i.concat.apply(void 0,[this].concat(t)))}},"pe+M":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("DtyJ"),l=n("fUwU");i.Observable.prototype.skip=l.skip},pv6b:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("ahDk");e._switch=function(){return i.switchAll()(this)}},q8yx:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("DtyJ"),l=n("XDL1");i.Observable.prototype.elementAt=l.elementAt},qIMP:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("ahDk");e.pairwise=function(){return i.pairwise()(this)}},"r+37":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("ahDk");e.takeUntil=function(t){return i.takeUntil(t)(this)}},rSqW:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("DtyJ"),l=n("8LQU");i.Observable.prototype.subscribeOn=l.subscribeOn},roV9:function(t,e,n){"use strict";n.r(e);var i=n("WSmt");n.d(e,"ajax",function(){return i.a});var l=n("b8Xf");n.d(e,"AjaxResponse",function(){return l.c}),n.d(e,"AjaxError",function(){return l.a}),n.d(e,"AjaxTimeoutError",function(){return l.e})},rqY6:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("DtyJ"),l=n("zDpS");i.Observable.prototype.timeoutWith=l.timeoutWith},sNY3:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("DtyJ");i.Observable.combineLatest=i.combineLatest},sRqT:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("DtyJ"),l=n("xwTN");i.Observable.prototype.flatMapTo=l.mergeMapTo,i.Observable.prototype.mergeMapTo=l.mergeMapTo},sjkp:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("DtyJ"),l=n("6mJ0");i.Observable.prototype.findIndex=l.findIndex},t0XI:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("DtyJ");i.Observable.onErrorResumeNext=i.onErrorResumeNext},uARb:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("ahDk");e.debounce=function(t){return i.debounce(t)(this)}},uGYe:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("DtyJ");i.Observable.if=i.iif},uMcE:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("ahDk");e.shareReplay=function(t,e,n){return t&&"object"==typeof t?i.shareReplay(t)(this):i.shareReplay(t,e,n)(this)}},uO2z:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("DtyJ"),l=n("xuRT");i.Observable.webSocket=l.webSocket},v87U:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("ahDk");e.single=function(t){return i.single(t)(this)}},vQc4:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("DtyJ"),l=n("itJ+");i.Observable.prototype.bufferCount=l.bufferCount},vTln:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("ahDk");e.distinct=function(t,e){return i.distinct(t,e)(this)}},wGW3:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("DtyJ"),l=n("iD44");i.Observable.prototype.mergeMap=l.mergeMap,i.Observable.prototype.flatMap=l.mergeMap},wWu8:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("DtyJ"),l=n("Lsvf");i.Observable.prototype.ignoreElements=l.ignoreElements},wfyD:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("DtyJ"),l=n("lXds");i.Observable.prototype.delayWhen=l.delayWhen},xuRT:function(t,e,n){"use strict";n.r(e);var i=n("D2hM");n.d(e,"webSocket",function(){return i.a});var l=n("N8wI");n.d(e,"WebSocketSubject",function(){return l.a})},xwTN:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("ahDk");e.mergeMapTo=function(t,e){return void 0===e&&(e=Number.POSITIVE_INFINITY),i.mergeMapTo(t,e)(this)}},zDpS:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("DtyJ"),l=n("ahDk");e.timeoutWith=function(t,e,n){return void 0===n&&(n=i.asyncScheduler),l.timeoutWith(t,e,n)(this)}}}]);