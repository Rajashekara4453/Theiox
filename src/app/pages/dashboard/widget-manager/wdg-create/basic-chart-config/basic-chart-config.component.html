<div class="rounded-bottom" [ngClass]="{'with-preview': !showPrevBtn, 'without-preview': showPrevBtn}"
  *ngIf="_chartConfig">
  <!-- Now we are Using Input FIeild Width to col-lg-3 col-md-4 col-sm-6 -->
  <!-- Accordian Content Start -->
  <div [hidden]="showImagePicker" class="col-12 without-content tab-content accordion" id="accordionExample">

    <!-- Title -->
    <div class="card border-0 pt-3">
      <div class="accordian-header border-bottom" id="Title" data-toggle="collapse" data-target="#collapsetitle"
        aria-expanded="true" aria-controls="collapsetitle">
        <h6>Widget Info</h6>
      </div>
      <div class="tab-pane" id="collapsetitle" class="collapse show mt-3 mb-3" aria-labelledby="Title">
        <div class="tab-pane-container">
          <div class="row">
            <div class="form-group col-lg-3 col-md-4 col-sm-6">
              <label class="control-label">Widget Title</label>
              <input type="text" class="form-control" placeholder="Enter Widget Title" [(ngModel)]="chartConfig.title">
            </div>
          </div>
          <div class="row">
            <div class="form-group col-lg-3 col-md-4 col-sm-6"
              *ngIf="chartConfig.cType=='line' || (chartConfig.cType=='bar' && !chartConfig.isNormaltile && !chartConfig.isMap && !chartConfig.isTile)">
              <label class="control-label">Tagwise Filter Selection</label>
              <input type="checkbox" class="" (change)="filterSelectionToggle(_chartConfig.isReadYaxisFilter)"
                [(ngModel)]="_chartConfig.isReadYaxisFilter" />
            </div>
          </div>
        </div>
      </div>
    </div>

    <!--Time period-->
    <div class="card border-0 pt-3" *ngIf="!chartConfig.isAlarmFilter && !chartConfig.isModeBus">
      <div class="accordian-header border-bottom" id="Time" data-toggle="collapse" data-target="#collapsetime"
        aria-expanded="true" aria-controls="collapsetime">
        <h6>Time Period</h6>
      </div>
      <div class="tab-pane" id="collapsetime" class="collapse show mt-3 mb-3" aria-labelledby="Time">
        <div class="tab-pane-container">
          <!-- time Period -->
          <div class="row">
            <div class="form-group col-3">
              <label class="control-label">Date</label>
              <!-- <input type="text" class="form-control mb-2 mr-sm-2" placeholder="Date" [(ngModel)]="_chartConfig.filter.date"> -->
              <div class="custom-select-dropdown d-inline-block border" (click)="showDropdownValues($event)"
                title="{{_chartConfig.filter.timeRangeLabel}}">
                <span>
                  <span (click)="showDropdownValues($event)">
                    {{ _chartConfig.filter.timeRangeLabel ? _chartConfig.filter.timeRangeLabel : 'Select...' }}</span>
                  <i class="fa" (click)="showDropdownValues($event)"
                    [ngClass]="{'fa-caret-up': showList, 'fa-caret-down': !showList}"
                    style="font-size: 16px;margin-top:0;color: #999;margin-right: 4px;" aria-hidden="true"></i>
                </span>
              </div>
            </div>
            <div class="custom-dropdown-toggle dateRangeClass border common" (click)="$event.stopPropagation();"
              *ngIf="timeRangeList && showTimeRange && timeRangeList.length>0">
              <div class="col-12 custom-dropdown-content d-flex flex-column" style="max-height: 83vh; overflow: auto;">
                <div class="modal-header">
                  <h6 class="custom-date-title">
                    Time Period
                  </h6>
                </div>
                <div class="row mb-0 border-0 pb-0">
                  <h6 class="col-12 custom-date-title">Absolute Time Range<span
                      class="pull-right text-muted d-flex align-items-center"> <input type="checkbox"
                        [(ngModel)]="_chartConfig.filter.dateOverwrite" class="mx-1">override</span></h6>

                  <div class="col-md-5 form-group">
                    <label class="control-label">From</label>
                    <angular2-date-picker [(ngModel)]="tempOnDateSelect['fromDisp']" [settings]="calendarSettings"
                      (onDateSelect)="onDateSelect($event,'from')">
                    </angular2-date-picker>
                  </div>
                  <div class="col-md-5 form-group">
                    <label class="control-label">To</label>
                    <angular2-date-picker [(ngModel)]="tempOnDateSelect['toDisp']" [settings]="calendarSettings"
                      (onDateSelect)="onDateSelect($event,'to')">
                    </angular2-date-picker>
                  </div>
                  <div class="col-lg-2 col-md-4 col-sm-10 form-group">
                    <label class="control-label invisible d-block">Apply Time Range</label>
                    <button type="button" (click)="applyCustomRange()"
                      class="btn btn-sm btn-primary text-nowrap w-100 mt-1">Apply Time Range</button>
                  </div>
                  <h6 class="col-12 custom-date-title mt-2 mb-0">Relative Time Ranges</h6>
                </div>
                <div class="row overflow-auto pt-1">
                  <div class="col-md-3 list" *ngFor="let section of timeRangeList">
                    <div *ngFor="let item of section.list">
                      <label class="value" (click)="selectTimeRange(item)">{{ item.label }}</label>
                    </div>
                  </div>
                </div>
                <div class="modal-footer">
                  <button (click)="closeDropdownValues()" class="btn btn-sm btn-secondary" title="Close">Close</button>
                </div>
              </div>
              <div class="custom-modal-fade" (click)="closeDropdownValues()">

              </div>
            </div>

          </div>
          <!-- Comparision -->
          <div class="row"
            *ngIf="!chartConfig.isPue && chartConfig.cType !='pie' && !chartConfig.isPf && pageType !='reports'">
            <div class="form-group col-lg-3 col-md-4 col-sm-6">
              <label class="control-label">Compare</label>
              <ng-select placeholder="Enabled" [clearable]="false" (change)="onComparisonChange()" [(ngModel)]="_chartConfig.filter.compare.comparison"
                [items]="chartOptions.filter.compare" bindLabel="label" bindValue="value">
              </ng-select>
            </div>
            <div class="form-group col-lg-3 col-md-4 col-sm-6" *ngIf="_chartConfig.filter.compare.comparison">
              <label class="control-label">Comparison Period</label>
              <ng-select placeholder="Comparison Period" [clearable]="false"
                [(ngModel)]="_chartConfig.filter.compare.comparisonPeriod"
                [items]="chartOptions.filter.comparisonPeriod" bindLabel="label" bindValue="value">
              </ng-select>
            </div>
            <div class="col-lg-6 col-md-6 col-sm-12"
              *ngIf="_chartConfig.filter.compare.comparison && _chartConfig.filter.compare.comparisonPeriod === 'custom'">
              <div class="row">
                <div class="form-group col-lg-6 col-md-6 col-sm-6">

                  <label class="control-label">From</label>
                  <angular2-date-picker [(ngModel)]="_chartConfig.filter.compare.custom['fromDisp']"
                    [settings]="calendarSettings" (onDateSelect)="onDateSelectCompare($event,'from')">
                  </angular2-date-picker>
                </div>
                <div class="form-group col-lg-6 col-md-6 col-sm-6">
                  <label class="control-label">To</label>
                  <angular2-date-picker [(ngModel)]="_chartConfig.filter.compare.custom['toDisp']"
                    [settings]="calendarSettings" (onDateSelect)="onDateSelectCompare($event,'to')">
                  </angular2-date-picker>
                </div>
              </div>
            </div>
          </div>

        </div>
      </div>

    </div>

    <!-- Filter -->
    <div class="card border-0 pt-3" *ngIf="chartOptions.filter && !_chartConfig.isReadYaxisFilter">
      <div class="accordian-header border-bottom" id="Filter" data-toggle="collapse" data-target="#collapseFilter"
        aria-expanded="true" aria-controls="collapseFilter">
        <h6>Select Filters</h6>
      </div>
      <div class="tab-pane" id="collapseFilter" class="collapse show mt-3 mb-3" aria-labelledby="Filter">
        <div class="tab-pane-container">
          <div class="row ml-1">

            <div class="row">
              <ul class="filter-menus">
                <ng-container *ngFor="let type of chartOptions.filter.types;">
                  <li (click)="!this['isClickedFilter' + type.label]?addFilter(type):''" *ngIf="type.isShow"
                    [ngClass]="{'active': type.disabled}">
                    <i
                      [ngClass]='{"elm-unchecked-radio-button" : !type.disabled && !this["isClickedFilter" + type.label], "elm-reset continues" : !type.disabled && this["isClickedFilter" + type.label], "elm-checked-2" : type.disabled}'></i>
                    <a class="">{{type.label}}</a>
                  </li>
                </ng-container>
              </ul>
            </div>
          </div>
          <div class="row mt-3">
            <div class="col-lg-4 col-md-6 col-sm-12 mb-3"
              *ngFor="let filter of _chartConfig.filter.filterList; let i=index;trackBy:track">
              <ng-container *ngIf="filter.type === 'multiCheckboxSelect'">
                <div class="col-12 p-2" style="background:#f9f9f9;">
                  <div class="col-12 p-0">
                    <h6 class="category-heading p-0">{{filter.title}}
                      <i (click)="addReloadFilter(filter)" class="elm-reset px-2"
                        style="font-size: 15px; vertical-align: middle;" title="Update Data"></i>
                      <!-- <i *ngIf="isClicked" class="elm-reset continues"></i> -->
                      <i (click)="deleteFilterRow(i)" class="elm-cancel float-right" style="font-size: 19px;"
                        title="close"></i>
                    </h6>
                  </div>
                  <div class="col-12 p-0" *ngIf="!chartConfig.isPue">
                    <h6 class="override-label clearfix">
                      <input type="checkbox" [(ngModel)]="filter.overwrite" class="float-left">
                      <span class="float-left">Override filter</span>
                    </h6>
                  </div>
                  <kl-custom-multiselect *ngIf="!showLoader" [inputData]="filter" [selectedData]="filter.value"
                    [isCheckBox]="isCheckBox" (emitData)="emittedData($event,filter['id'],filter['set'])" class="mt-3">
                  </kl-custom-multiselect>
                </div>
              </ng-container>
              <ng-container *ngIf="filter.type === 'dropdown'">
                <!-- <div class="form-group">
                  <label for="alarmType">{{filter.title}} </label>
                  <ng-select placeholder="Select" class="form-control p-0" [clearable]="true" [(ngModel)]="filter.value"
                    [items]="filter.list" (change)="emittedData($event,filter['id'])" bindLabel="label" bindLabel="value">
                  </ng-select>
                </div> -->
                <div class="col-12 p-2" style="background:#f9f9f9;">
                  <div class="col-12 p-0">
                    <h6 class="category-heading p-0">{{filter.title}}
                      <!-- <i *ngIf="isClicked" class="elm-reset continues"></i> -->
                      <i (click)="deleteFilterRow(i)" class="elm-cancel float-right"></i>
                    </h6>
                  </div>
                  <ng-select placeholder="Select" class="form-control p-0" [clearable]="false"
                    [(ngModel)]="filter.value" [items]="filter.list" (change)="emittedData($event,filter['id'])"
                    bindLabel="label">
                  </ng-select>
                </div>
              </ng-container>
              <ng-container *ngIf="filter.type === 'tree'">
                <div class="col-12 p-2" style="background:#f9f9f9;">
                  <div class="col-12 p-0">
                    <h6 class="category-heading p-0">{{filter.title}}
                      <i (click)="addReloadFilter(filter)" class="elm-reset px-2"
                        style="font-size: 15px; vertical-align: middle;" title="Update Data"></i>
                      <i (click)="deleteFilterRow(i)" style="font-size: 19px;" class="elm-cancel float-right"
                        title="close"></i>
                    </h6>
                  </div>
                  <div class="col-12 mb-2 p-0" *ngIf="!chartConfig.isPue">
                    <h6 class="override-label">
                      <input type="checkbox" [(ngModel)]="filter.overwrite" class="float-left">
                      <span class="float-left">Override filter</span>
                    </h6>
                  </div>
                  <kl-custom-tree [inputData]="filter" [selectedData]="filter.value" [displayModes]='selectModes'
                    (emitData)="emittedData($event,filter['id'],filter['set'])"
                    (emitTreeMode)="emittedTreeData($event,filter['set'])">
                  </kl-custom-tree>
                </div>
              </ng-container>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!--Tags -->
    <div class="card border-0 pt-3" *ngIf="!chartConfig.isFlexi && !chartConfig.isAlarmFilter">
      <div class="accordian-header border-bottom" id="Yaxis" data-toggle="collapse" data-target="#collapseyaxis"
        aria-expanded="true" aria-controls="collapseyaxis">
        <h6 class="text-nowrap">Tags</h6>
      </div>
      <div class="tab-pane" id="collapseyaxis" class="collapse show mt-3 mb-3" aria-labelledby="Yaxis">
        <div class="tab-pane-container clearfix">
          <!-- <h6 class="category-heading ">Add
                          <i class="elm-add-2" ></i>
                      </h6> -->

          <div class="position-relative mb-3 p-3" style="background:#f9f9f9"
            *ngFor="let series of _chartConfig.yaxis; let i=index;trackBy:track">
            <div class="row" *ngIf="chartConfig.isPue">
              <div class="form-group col-lg-3 col-md-4 col-sm-6">
                <label class="control-label">Show set {{series.set}}</label>
                <input type="checkbox" class="" [(ngModel)]="series.isSetShow" />
                <!-- </div> -->
              </div>
            </div>
            <div class="row" *ngIf="!series.isCustomValue && series['set'] !== 3">
              <div class="form-group col-lg-3 col-md-4 col-sm-6"
                *ngIf="_chartConfig.isReadYaxisFilter && chartOptions.yaxis['devices']">
                <div>
                  <label class="control-label">Assets</label>
                  <angular2-multiselect [data]="chartOptions.yaxis['devices']" [(ngModel)]="series['devices']" (onSelect)="onItemSelect($event)" 
                    [settings]="dropdownSettingsAsset" (onDeSelect)="OnItemDeSelect(series['devices'],'devices',i)"
                    (onDeSelectAll)="onDeSelectAll($event,'asset',i)">
                  </angular2-multiselect>
                </div>
              </div>
              <!-- <div class="form-group col-lg-3 col-md-4 col-sm-6"
                *ngIf="_chartConfig.isReadYaxisFilter && chartOptions.yaxis['deviceGroups']">
                <label class="control-label">Asset Group</label>
                <angular2-multiselect [data]="chartOptions.yaxis['deviceGroups']"
                  (onDeSelect)="OnItemDeSelect(series['deviceGroups'],'deviceGroups',i)"
                  (onDeSelectAll)="onDeSelectAll($event,'assetgroup',i)" [settings]="dropdownSettingsAssetGroup"
                  [(ngModel)]="series['deviceGroups']">
                </angular2-multiselect>
              </div> -->
              <!-- Tags -->
              <div class="form-group col-lg-3 col-md-4 col-sm-6">
                <label class="control-label">Tag</label>
                <ng-select bindLabel="label" [items]="chartOptions.yaxis.tags" placeholder="Tag" [clearable]="false"
                  [(ngModel)]="series.tag" (ngModelChange)="tagChangeAction(series)">
                </ng-select>
              </div>
              <!-- Label -->
              <div class="form-group col-lg-3 col-md-4 col-sm-6">
                <label class="control-label">Label</label>
                <input type="text" class="form-control" placeholder="Label" [(ngModel)]="series.name">
              </div>

              <!-- Base unit -->
              <div class="form-group col-lg-3 col-md-4 col-sm-6 d-none">
                <label class="control-label">Base Unit</label>
                <input type="text" class="form-control" placeholder="Original Unit" [(ngModel)]="series.selectedUnit"
                  disabled>
              </div>

              <!-- Unit -->
              <div class="form-group col-lg-3 col-md-4 col-sm-6"
                *ngIf="isAttributeShow('unitConverter') && !chartConfig.isModeBus">
                <label class="control-label">Unit</label>
                <ng-select bindLabel="label" [items]="getUnitList(series)" placeholder="Unit" [clearable]="false"
                  [(ngModel)]="series.unitInfo" (ngModelChange)="unitChangeAction(series)">
                </ng-select>
              </div>

              <!-- Chart type -->
              <div class="form-group col-lg-3 col-md-4 col-sm-6"
                *ngIf="isAttributeShow('chartType') && !chartConfig.isModeBus">
                <label class="control-label">Chart Type</label>
                <ng-select bindLabel="label" bindValue="value" [items]="chartOptions.yaxis.chartType"
                  placeholder="Chart Type" [clearable]="false" [(ngModel)]="series.type" [disabled]="chartConfig.isPf">
                </ng-select>
              </div>

              <!-- COlor -->
              <div class="form-group col-lg-3 col-md-4 col-sm-6"
                *ngIf="chartConfig.cType !== 'markLine' && isAttributeShow('color') &&  !chartConfig.isModeBus">
                <label class="control-label">Color</label>
                <!-- <div class="d-flex align-items-center flex-row form-control d-flex justify-content-between p-0">
                  <input type="color"
                    class="shadow-0 shadow-none bg-transparent form-control w-100 m-0  h-100 border-0 p-1 px-2"
                    placeholder="Color" [(ngModel)]="series.color">
                  <i class="elm-cancel pr-2" *ngIf="series.color" (click)="clearColor(series.color,i)"
                    data-toggle="tooltip" data-placement="top" title="Remove color"></i>
                </div> -->
                <!-- <label for="priorityType">Icon </label> -->
                <ng-select bindValue="reference" bindLabel="label" [searchable]="false" name="icon"
                  [items]="chartOptions.yaxis.colors" [(ngModel)]="series.colorReference" [clearable]="false"
                  (change)="colorChange($event,series)">
                  <ng-template ng-label-tmp let-item="item">
                    <div [style.color]="item.value" [style.text-align]="'center'" class="color-pallet">
                      <i [style.color]="item.value" class="elm-checked-2"></i>
                      <label>{{item['label']}}</label>
                    </div>
                  </ng-template>
                  <ng-template ng-option-tmp let-item="item" let-index="index">
                    <div [style.text-align]="'center'" class="color-pallet">
                      <i [style.color]="item.value" class="elm-unchecked-radio-button"></i>
                      <label>{{item.label}}</label>
                    </div>
                  </ng-template>
                </ng-select>
              </div>

              <!-- position -->
              <div class="form-group col-lg-3 col-md-4 col-sm-6"
                *ngIf="isAttributeShow('position') && !chartConfig.isModeBus ">
                <label class="control-label">Y-Axis Position </label>
                <ng-select bindValue="value" bindLabel="label" [items]="chartOptions.yaxis.position"
                  placeholder="Y-Axis Position" [clearable]="false" [(ngModel)]="series.position">
                </ng-select>
              </div>
              <!-- INversr -->
              <div class="form-group col-lg-3 col-md-4 col-sm-6"
                *ngIf="(chartConfig.isTile || chartConfig.isNormaltile)&& chartConfig.cType == 'bar'">
                <label class="control-label">Inverse</label>
                <input type="checkbox" class="" [(ngModel)]="series.isInverse" />
                <!-- </div> -->
              </div>

              <!-- Mark point -->
              <div class="form-group col-lg-3 col-md-4 col-sm-6" *ngIf="chartConfig.cType === 'markPoint'">
                <label class="control-label">Mark Point</label>
                <ng-select bindValue="value" bindLabel="label" [items]="chartOptions.yaxis.markPoint"
                  placeholder="Mark Point" [clearable]="false" [(ngModel)]="series.markPointData" [multiple]="true">
                </ng-select>
              </div>
              <!-- Custom multiplication factor only for PUE widget-->
              <div class="form-group col-lg-3 col-md-4 col-sm-6" *ngIf="chartConfig.isPue">
                <label class="control-label">Custom Multiplication Factor</label>
                <input type="number" class="form-control" placeholder="Enter value"
                  [(ngModel)]="series.CustomMultiplicationFactor" />
                <!-- </div> -->
              </div>
              <div class="form-group col-lg-3 col-md-4 col-sm-6" *ngIf="chartConfig.isPue">
                <label class="control-label">Custom Unit Label</label>
                <input type="text" class="form-control" placeholder="Label" [(ngModel)]="series.customUnit" />
                <!-- </div> -->
              </div>
            </div>
            <div class="row" *ngIf="!series.isCustomValue && series['set'] !== 3 && !chartConfig.isModeBus ">
              <!-- Advanced  MOde -->
              <div class="form-group col-lg-3 col-md-4 col-sm-6"
                *ngIf='_chartConfig.yaxis.length !== 0 && !chartConfig.isPf'>
                <label class="control-label">Advance Mode</label>
                <input type="checkbox" [(ngModel)]="series['isAdvance']" (change)="handleAdvanceClick(i)">
              </div>

              <ng-container *ngIf="series.isAdvance">
                <div class="form-group col-lg-3 col-md-4 col-sm-6">
                  <label class="control-label">Frequency</label>
                  <ng-select bindValue="value" bindLabel="label" [items]="chartOptions.yaxis.frequency"
                    placeholder="Frequency" [clearable]="true"
                    (change)="frequencyChanged($event,series.function.name,i)" [(ngModel)]="series.function.frequency">
                  </ng-select>
                </div>
                <div class="form-group col-lg-3 col-md-4 col-sm-6"
                  *ngIf="series.function.frequency == 'shift' && pageType == 'reports' && reportTemplateId !=='template_101' && reportTemplateId !=='template_201'">
                  <label class="control-label">Shift</label>
                  <angular2-multiselect [data]="chartOptions.yaxis.shiftValue" class="form-control p-0"
                    [(ngModel)]="series.function.shift" [settings]="dropdownSettingsShift"
                    (onSelect)="onShiftSelect(series.function.shift,i)"
                    (onDeSelect)="onShiftSelect(series.function.shift,i)"
                    (onDeSelectAll)="onDeSelectAll($event,'shift',i)"></angular2-multiselect>
                </div>
                <div class="form-group col-lg-3 col-md-4 col-sm-6"
                  *ngIf="pageType == 'dashboard' || (reportTemplateId !== 'undefined' && series.function.frequency !== 'shift')">
                  <label class="control-label">Function</label>
                  <ng-select bindValue="value" bindLabel="label" [items]="chartOptions.yaxis.function"
                    placeholder="Function" [clearable]="true" [(ngModel)]="series.function.name">
                  </ng-select>
                </div>
                <div class="form-group col-lg-3 col-md-4 col-sm-6" *ngIf="series.function.frequency == 'shift' && pageType == 'reports'
                  && reportTemplateId !=='template_101' && reportTemplateId !=='template_201'">
                  <label class="control-label">Function</label>
                  <angular2-multiselect [data]="chartOptions.yaxis.function" class="form-control p-0"
                    [(ngModel)]="series.function.name" [settings]="dropdownSettingsShift"
                    (onSelect)="onFunctionSelect(series.function.name,i)"
                    (onDeSelect)="onFunctionSelect(series.function.name,i)"
                    (onDeSelectAll)="onDeSelectAll($event,'name',i)"></angular2-multiselect>
                </div>
                <!-- <div class="form-group col-2" *ngIf="series.function.name == 'add'">
                        <label class="control-label">Tag</label>
                        <ng-select [items]="chartOptions.yaxis.tags" placeholder="Tag"
                          [clearable]="false" [(ngModel)]="series.function.tag2">
                        </ng-select>
                      </div>
                      <div class="form-group col-2">            
                        <label class="control-label">Operator</label>
                        <ng-select bindValue="value" bindLabel="label" [items]="chartOptions.yaxis.operator"
                          placeholder="Operator" [clearable]="false" [(ngModel)]="series.function.operator">
                        </ng-select>
                      </div>
                      <div class="form-group col-2">
                        <label class="control-label">Custom</label>
                        <input type="checkbox" class="mt-2 d-block" [(ngModel)]="series.function.isCustom"/>
                      </div>
                      <div class="form-group col-2" *ngIf="series.function.isCustom == false">
                        <label class="control-label">Tag</label>
                        <ng-select [items]="chartOptions.yaxis.tags" placeholder="Tag"
                          [clearable]="false" [(ngModel)]="series.function.tag3">
                        </ng-select>
                      </div>
                      <div class="form-group col-2" *ngIf="series.function.isCustom == true">              
                        <label class="control-label">Custom Value</label>
                        <input type="number" class="form-control mb-2 mr-sm-2" placeholder="Custom Value" [(ngModel)]="series.function.customValue">
                      </div>-->
              </ng-container>
            </div>

            <!-- bench mark -->
            <div class="row" *ngIf="!series.isCustomValue && series['set'] !== 3">
              <div class="form-group col-lg-3 col-md-4 col-sm-6"
                *ngIf="chartConfig.cType !== 'markPoint' && chartConfig.cType !== 'markLine' && isAttributeShow('benchmark') && !chartConfig.isModeBus">
                <label class="control-label">Benchmark</label>
                <ng-select bindValue="value" bindLabel="label" [items]="chartOptions.yaxis.benchmark"
                  placeholder="Benchmark" [clearable]="false" [(ngModel)]="series.benchmark">
                </ng-select>
              </div>
              <div class="form-group col-lg-3 col-md-4 col-sm-6"
                *ngIf="chartConfig.cType !== 'markPoint' && chartConfig.cType !== 'markLine' && isAttributeShow('benchmark') && series.benchmark">
                <label class="control-label">Benchmark Value</label>
                <input type="number" class="form-control" placeholder="Benchmark Value"
                  [(ngModel)]="series.benchmarkValue">
              </div>

              <!-- Threshold -->
              <div class="form-group col-lg-3 col-md-4 col-sm-6"
                *ngIf="chartConfig.cType !== 'markPoint' && chartConfig.cType !== 'markLine' && isAttributeShow('threshold') && !chartConfig.isModeBus">
                <label class="control-label">Threshold</label>
                <ng-select bindValue="value" bindLabel="label" [items]="chartOptions.yaxis.threshold"
                  placeholder="Threshold" [clearable]="false" [(ngModel)]="series.threshold">
                </ng-select>
              </div>

              <!-- Threshold Value -->
              <div class="form-group col-lg-3 col-md-4 col-sm-6"
                *ngIf="chartConfig.cType !== 'markPoint' && chartConfig.cType !== 'markLine' && isAttributeShow('threshold') && series.threshold">
                <label class="control-label">Threshold Value</label>
                <input type="number" class="form-control" placeholder="Threshold Value"
                  [(ngModel)]="series.thresholdValue">
              </div>

            </div>
            <!-- Third tag for PUE widget-->
            <div class="row" *ngIf="chartConfig.isPue && series['set'] == 3">
              <div class="form-group col-lg-3 col-md-4 col-sm-6">
                <label class="control-label">Label</label>
                <input type="text" class="form-control" placeholder="Label" [(ngModel)]="series.label">
              </div>
              <div class="form-group col-lg-3 col-md-4 col-sm-6">
                <label class="control-label">Operand 1</label>
                <ng-select bindValue="value" bindLabel="label" [items]="chartOptions.yaxis.sets" placeholder="Operand 1"
                  [clearable]="false" (change)="operandChange(series.value_1)" [(ngModel)]="series.value_1">
                </ng-select>
              </div>
              <div class="form-group col-lg-3 col-md-4 col-sm-6">
                <label class="control-label">Operator</label>
                <ng-select bindValue="value" bindLabel="label" [items]="chartOptions.yaxis.operators"
                  placeholder="Operator" [clearable]="false" [(ngModel)]="series.operator">
                </ng-select>
              </div>
              <div class="form-group col-lg-3 col-md-4 col-sm-6">
                <label class="control-label">Operand 2</label>
                <ng-select bindValue="value" bindLabel="label" [disabled]="true" [items]="chartOptions.yaxis.sets"
                  placeholder="Operand 2" [clearable]="false" [(ngModel)]="series.value_2">
                </ng-select>
              </div>
              <div class="form-group col-lg-3 col-md-4 col-sm-6">
                <label class="control-label">Custom Multiplication Factor</label>
                <input type="number" class="form-control" placeholder="Enter value"
                  [(ngModel)]="series.CustomMultiplicationFactor" />
                <!-- </div> -->
              </div>
              <div class="form-group col-lg-3 col-md-4 col-sm-6">
                <label class="control-label">Custom Unit Label</label>
                <input type="text" class="form-control" placeholder="Label" [(ngModel)]="series.customUnit" />
                <!-- </div> -->
              </div>
            </div>
            <div class="cancel-y-axis" *ngIf="_chartConfig.yaxis.length>1">
              <label class="control-label"></label>
              <span class="up-down-container">
                <i *ngIf="i!=0 && !chartConfig.isPue" (click)="moveUp(i,i-1)" class="elm-slide-up" data-toggle="tooltip"
                  data-placement="right" title="Move Up"></i>
                <i *ngIf="i<_chartConfig.yaxis.length-1 && !chartConfig.isPue" class="elm-down-button"
                  (click)="moveUp(i,i+1)" data-toggle="tooltip" data-placement="right" title="Move Down"></i>
                <i class="elm-cancel" *ngIf="isAttributeShow('yaxisDeleteBtn')" (click)="deleteYaxisSeries(i)"
                  data-toggle="tooltip" data-placement="top" title="Delete"></i>
              </span>
            </div>
            <!-- pue widget custom value field-->
            <div class="row" *ngIf="chartConfig.isPue && series['set'] !== 3">
              <div class="form-group col-lg-3 col-md-4 col-sm-6">
                <label class="control-label">Custom Value</label>
                <input type="checkbox" class="" [(ngModel)]="series.isCustomValue" />
                <!-- </div> -->
              </div>
              <div class="form-group col-lg-3 col-md-4 col-sm-6" *ngIf="series.isCustomValue">
                <label class="control-label">Target Value/day</label>
                <input type="text" class="form-control" placeholder="Target Value/day"
                  [(ngModel)]="series.tagCustomValue">
              </div>
              <div class="form-group col-lg-3 col-md-4 col-sm-6" *ngIf="series.isCustomValue">
                <label class="control-label">Custom Unit Label</label>
                <input type="text" class="form-control" placeholder="Label" [(ngModel)]="series.customUnit" />
                <!-- </div> -->
              </div>
            </div>
          </div>
        </div>
      </div>
      <button type="button" class="btn btn-sm btn-primary mb-3 ml-0 ng-star-inserted" (click)="addYaxisAction()"
        *ngIf="isAttributeShow('yaxisAddBtn') && !isCompareTable && !chartConfig.isModeBus" data-toggle="tooltip"
        data-placement="right" title="Add Tag" style="width: fit-content"><strong>+</strong> Add Tag</button>
    </div>

    <!-- Data Type -->
    <div class="card border-0 pt-3" *ngIf="!chartConfig.isPue && !chartConfig.isAlarmFilter && !chartConfig.isModeBus ">
      <div class="accordian-header border-bottom" id="Xaxis" data-toggle="collapse" data-target="#collapsexaxis"
        aria-expanded="true" aria-controls="collapsexaxis">
        <h6>Data Type</h6>
      </div>
      <div class="tab-pane" id="collapsexaxis" class="collapse show mt-3 mb-3" aria-labelledby="Xaxis">
        <ng-container *ngIf="chartConfig.cType !== 'flexiTiles'">
          <div class="tab-pane-container clearfix" *ngIf="_chartConfig.xaxis">
            <div class="row">

              <!-- Label -->
              <!-- <div class="form-group col-lg-3 col-md-4 col-sm-6">
                <label class="control-label">Label</label>
                <input type="text" class="form-control" placeholder="Label"
                  [(ngModel)]="_chartConfig.xaxis.label">
              </div> -->

              <!-- Type -->
              <div class="form-group col-lg-3 col-md-4 col-sm-6">
                <label class="control-label">Select Data Type</label>
                <ng-select bindValue="value" bindLabel="label" placeholder="Type" [clearable]="false"
                  [(ngModel)]="_chartConfig.xaxis.type" (ngModelChange)="updateFilterAggrOptions()"
                  [disabled]="chartConfig.isPf">
                  <ng-option *ngFor="let type of chartOptions.xaxis.types" [value]="type" [disabled]="type.disabled">
                    {{type.label}}</ng-option>
                </ng-select>
              </div>

              <!-- Group BY -->
              <div class="form-group col-lg-3 col-md-4 col-sm-6" *ngIf="_chartConfig.xaxis.type === 'category'">
                <label class="control-label">Group by</label>
                <ng-select bindValue="value"
                  [disabled]="_chartConfig.isReadYaxisFilter && (_chartConfig.chartType == 'bar' ||_chartConfig.chartType == 'line')?true:false"
                  bindLabel="label" placeholder="Group by" [clearable]="false"
                  [(ngModel)]="_chartConfig.xaxis.dimensionalTag">
                  <ng-option *ngFor="let diTag of chartOptions.xaxis.dimensionalTag" [value]="diTag.value"
                    [disabled]="diTag.disabled">{{diTag.label}}</ng-option>
                </ng-select>
              </div>

              <!-- Aggregate -->
              <div class="form-group col-lg-3 col-md-4 col-sm-6"
                *ngIf="_chartConfig.xaxis.type === 'timeSeries' && !chartConfig.isPf">
                <label class="control-label">Group by</label>
                <ng-select bindValue="value" bindLabel="label" [items]="chartOptions.xaxis.aggregation"
                  placeholder="Group by" [clearable]="true" (change)="onChangeTimeSeriesGroupBy($event)" [(ngModel)]="_chartConfig.xaxis.aggregation">
                </ng-select>

              </div>

              <!-- Format -->
              <div class="form-group col-lg-3 col-md-4 col-sm-6"
                *ngIf="_chartConfig.xaxis.type === 'timeSeries' && (_chartConfig.xaxis.aggregation === null)">
                <label class="control-label">Timestamp Format</label>
                <ng-select bindValue="value" bindLabel="label" [items]="chartOptions.xaxis.dateFormats"
                  placeholder="Timestamp Format" [clearable]="false" [(ngModel)]="_chartConfig.xaxis.format">
                </ng-select>
              </div>

              <!-- stack by -->
              <div class="form-group col-lg-3 col-md-4 col-sm-6"
                *ngIf="_chartConfig.xaxis.type === 'timeSeries' &&chartConfig.cType == 'stackedBar'">
                <label class="control-label">Stack By</label>
                <ng-select bindValue="value" bindLabel="label" [items]="chartOptions.xaxis.stackBy"
                  [(ngModel)]="_chartConfig.xaxis.stackBy" [clearable]="false">
                </ng-select>

              </div>

              <!-- unit Reference -->
              <div class="form-group formhalf d-none"
                *ngIf="_chartConfig.xaxis.type === 'timeSeries' &&chartConfig.cType == 'stackedBar'">
                <label class="control-label">Unit Reference</label>
                <ng-select bindValue="value" bindLabel="label" [items]="chartOptions.xaxis.unitReference"
                  [(ngModel)]="_chartConfig.xaxis.unitReference" [clearable]="false"
                  [disabled]="chartOptions.xaxis.unitReference.disabled">
                </ng-select>
              </div>

              <!-- aggregation -->
              <div class="form-group col-lg-3 col-md-4 col-sm-6" *ngIf="!chartConfig.isPf">
                <label class="control-label">Aggregation</label>
                <ng-select bindValue="value" bindLabel="label" placeholder="Aggregation" [clearable]="false"
                  [(ngModel)]="_chartConfig.filter.aggregation">
                  <ng-option *ngFor="let aggr of chartOptions.filter.aggregation" [value]="aggr.value"
                    [disabled]="aggr.disabled">{{aggr.label}}</ng-option>
                </ng-select>
              </div>

              <div class="form-group col-xl-2 col-lg-3 col-md-4 col-sm-5"
                *ngIf="chartConfig.cType == 'table' && _chartConfig.filter.compare.comparison">
                <label class="control-label">Column Wise</label>
                <ng-select placeholder="Column Wise" [clearable]="false" [items]="chartOptions.report.functions"
                  bindLabel="label" bindValue="value" [(ngModel)]="_chartConfig.reportFormat.column_functions"
                  (change)="handleReportAggregatorchange('column')" [multiple]="true">
                </ng-select>
              </div>

              <!-- Sort by -->
              <div class="form-group col-lg-3 col-md-4 col-sm-6" *ngIf="pageType !== 'reports' && !chartConfig.isNormaltile && chartConfig.cType !== 'kpi' && chartConfig.cType !== 'pfgraph' && !chartConfig.isMap">
                <label class="control-label">Sort</label>
                <ng-select bindValue="value" bindLabel="label" placeholder="Sorting order" [clearable]="false" [title]="disableSort ? 'Select one filter/tag' : '' "
                  [(ngModel)]="_chartConfig.xaxis.sort"  [items]="chartOptions.xaxis.sorting" [disabled]="disableSort">
                </ng-select>
              </div>

              <!-- Data Count -->
              <div class="form-group col-lg-3 col-md-4 col-sm-6" *ngIf="pageType !== 'reports' && !chartConfig.isNormaltile && chartConfig.cType !== 'kpi' && chartConfig.cType !== 'pfgraph' && !chartConfig.isMap">
                <label class="control-label">Data Count</label>
                <ng-select bindValue="value" bindLabel="label" placeholder="Number of data" [clearable]="false"
                  [(ngModel)]="_chartConfig.xaxis.limit_results"  [items]="chartOptions.xaxis.dataCount">
                </ng-select>
              </div>
            </div>
          </div>

        </ng-container>

        <!-- Flexi Tiles -->
        <ng-container *ngIf="chartConfig.cType === 'flexiTiles'">
          <div class="tab-pane-container" *ngIf="_chartConfig.xaxis">
            <div class="row">
              <div class="form-group col-lg-3 col-md-4 col-sm-6">
                <label class="control-label">Type</label>
                <ng-select bindValue="value" bindLabel="label" placeholder="Type" [clearable]="false"
                  [(ngModel)]="_chartConfig.xaxis.type" (ngModelChange)="updateFilterAggrOptions()">
                  <ng-option *ngFor="let type of chartOptions.xaxis.types" [value]="type" [disabled]="type.disabled">
                    {{type.label}}</ng-option>
                </ng-select>
              </div>
              <div class="form-group col-lg-3 col-md-4 col-sm-6" *ngIf="_chartConfig.xaxis.type === 'category'">
                <label class="control-label">Group by</label>
                <ng-select bindValue="value" bindLabel="label" [items]="chartOptions.xaxis.dimensionalTag"
                  placeholder="Dimentional Tag" [clearable]="false" [(ngModel)]="_chartConfig.xaxis.dimensionalTag">
                </ng-select>
              </div>
              <!-- aggregation -->
              <div class="form-group col-lg-3 col-md-4 col-sm-6">
                <label class="control-label">Aggregation</label>
                <ng-select bindValue="value" bindLabel="label" placeholder="Aggregation" [clearable]="false"
                  [(ngModel)]="_chartConfig.filter.aggregation">
                  <ng-option *ngFor="let aggr of chartOptions.filter.aggregation" [value]="aggr.value"
                    [disabled]="aggr.disabled">{{aggr.label}}</ng-option>
                </ng-select>
              </div>
              <!-- Format -->
              <div class="form-group col-lg-3 col-md-4 col-sm-6">
                <label class="control-label">Format</label>
                <ng-select bindValue="value" bindLabel="label" [(ngModel)]="_chartConfig.format"
                  [items]="chartOptions.showDate.dateFormats" placeholder="Format" [clearable]="false">
                </ng-select>
              </div>
            </div>
          </div>
          <div class="tab-pane-container">
            <ul class="flexiTilesBlockUL p-0">
              <div class="overflow-hidden d-flex justify-content-between">
                <div class="d-inline-block p-0" (click)="toggleExpandCollepseImg()">
                  <!-- <img class="toggleImg" (click)="toggleExpandCollepseImg()" src="/assets/images/right.png"
                                [ngClass]="{'toggle-expanded': isBlockExpanded, 'toggle-collepsed': !isBlockExpanded }" /> -->
                  <i class="toggleImg h4 elm-collapse-arrow"
                    [ngClass]="{'toggle-expanded': isBlockExpanded, 'toggle-collepsed': !isBlockExpanded }"></i>Blocks

                </div>
                <div class="d-inline-block" [ngClass]="{'d-inline-block': isBlockExpanded, 'd-none': !isBlockExpanded}">
                  <button class="btn btn-sm btn-secondary" (click)="addBlock()">Add Block</button>
                </div>
              </div>
              <li *ngFor="let block of _chartConfig.flexiTiles.blocks; let i=index;trackBy:track"
                [ngClass]="{'d-block': isBlockExpanded, 'd-none': !isBlockExpanded}" class="bg-white p-0 my-1">
                <div class="tab-content border py-2 col-12" style="overflow: visible">
                  <div class="tab-pane-container row p-0 m-0 mt-2">
                    <div class="form-group col-lg-3 col-md-4 col-sm-6">
                      <label class="control-label">Block Name</label>
                      <input type="text" [(ngModel)]="block.name" placeholder="Block Name" class="form-control" />
                    </div>
                    <div class="form-group col-lg-3 col-md-4 col-sm-6"
                      *ngIf="_chartConfig.xaxis.dimensionalTag != 'all'">
                      <label class="control-label">Show Progress Bar</label>
                      <input type="checkbox" class="" [(ngModel)]="block.isShowProgressBar"
                        (change)="resetProgressBar(block.isShowProgressBar,i)" />

                      <button type="button" class="btn btn-sm btn-secondary float-right ml-auto"
                        *ngIf="_chartConfig.flexiTiles.blocks.length>1" (click)="deleteBlock(i)">Delete Block</button>
                    </div>
                    <div *ngIf="_chartConfig.xaxis.dimensionalTag != 'all' && block.isShowProgressBar">
                      <label class="control-label">Progress Bar Tag</label>
                      <div class="row mx-auto my-2 p-1 bg-white position-relative border"
                        *ngFor="let series of block.selectedProgressTag; let j=index;trackBy:track">
                        <div class="col-12">
                          <div class="row">
                            <div class="form-group col-lg-3 col-md-4 col-sm-6">
                              <label class="control-label">Label</label>
                              <input type="text" class="form-control mb-2 mr-sm-2" placeholder="Label"
                                [(ngModel)]="series.name">
                            </div>
                            <div class="form-group col-lg-3 col-md-4 col-sm-6">
                              <label class="control-label">Tag</label>
                              <ng-select bindLabel="label" [items]="chartOptions.yaxis.tags" placeholder="Tag"
                                [clearable]="false" [(ngModel)]="series.tag" (ngModelChange)="tagChangeAction(series)"
                                (change)="progressTagChangeAction(block,i)">
                              </ng-select>
                            </div>
                            <div class="form-group col-lg-3 col-md-4 col-sm-6 d-none">
                              <label class="control-label">Base Unit</label>
                              <input type="text" class="form-control mb-2 mr-sm-2" placeholder="Original Unit"
                                [(ngModel)]="series.selectedUnit" disabled>
                            </div>

                            <div class="form-group col-lg-3 col-md-4 col-sm-6" *ngIf="isAttributeShow('unitConverter')">
                              <label class="control-label">Unit</label>
                              <ng-select bindLabel="label" [items]="getUnitList(series)" placeholder="Unit"
                                [clearable]="false" [(ngModel)]="series.unitInfo"
                                (ngModelChange)="unitChangeAction(series)">
                              </ng-select>
                            </div>
                            <div class="form-group col-lg-3 col-md-4 col-sm-6" *ngIf="isAttributeShow('chartType')">
                              <label class="control-label">Chart Type</label>
                              <ng-select bindLabel="label" bindValue="value" [items]="chartOptions.yaxis.chartType"
                                placeholder="Chart Type" [clearable]="false" [(ngModel)]="series.type">
                              </ng-select>
                            </div>
                            <div class="form-group col-lg-3 col-md-4 col-sm-6 position-relative"
                              *ngIf="block.selectedProgressTag[j].color !== undefined">
                              <label class="control-label">Color</label>
                              <!-- <div
                                class="d-flex align-items-center flex-row form-control d-flex justify-content-between p-0">
                                <input type="color"
                                  class="shadow-0 shadow-none bg-transparent form-control w-100 m-0  h-100 border-0 p-1 px-2"
                                  placeholder="Color" [(ngModel)]="series.color">
                                <i class="elm-cancel pr-2" *ngIf="series.color"
                                  (click)="clearProgressColor(series.color,i,j)" data-toggle="tooltip"
                                  data-placement="top" title="Remove color"></i>
                              </div> -->
                              <ng-select bindValue="value" bindLabel="label" [searchable]="false" name="icon"
                                [items]="chartOptions.yaxis.colors" placeholder="Color" [(ngModel)]="series.color"
                                [clearable]="false" (change)="colorChange($event,series)">
                                <ng-template ng-label-tmp let-item="item">
                                  <div [style.text-align]="'center'" color="color-pallet">
                                    <i [style.color]="item.value" class="elm-checked-2"></i>
                                    <label>{{item['label']}}</label>
                                  </div>
                                </ng-template>
                                <ng-template ng-option-tmp let-item="item" let-index="index">
                                  <div [style.text-align]="'center'" color="color-pallet">
                                    <i [style.color]="item.value" class="elm-unchecked-radio-button"></i>
                                    <label>{{item.label}}</label>
                                  </div>
                                </ng-template>
                              </ng-select>

                            </div>
                            <!-- <div class="form-group col-2" *ngIf="isAttributeShow('position')">
                                            <label class="control-label">Position </label>
                                            <ng-select bindValue="value" bindLabel="label" [items]="chartOptions.yaxis.position"
                                              placeholder="Axis Position" [clearable]="false" [(ngModel)]="series.position">
                                            </ng-select>
                                          </div>
                                          <div class="form-group col-2 d-flex align-items-center flex-row">
                                            <label class="control-label px-2">Comparison </label>
                                            <input type="checkbox" class="px-2" [(ngModel)]="series.isComparisonRequired" />
                                          </div>
                                          <div class="form-group col-2 d-flex align-items-center flex-row">
                                            <label class="control-label px-2">Inverse </label>
                                            <input type="checkbox" class="px-2" [(ngModel)]="series.isInverse" />
                                          </div>
                                          <div class="form-group col-2">
                                            <label class="control-label">Threshold</label>
                                            <ng-select bindValue="value" bindLabel="label" [items]="chartOptions.yaxis.threshold"
                                              placeholder="Threshold" [clearable]="false" [(ngModel)]="series.threshold">
                                            </ng-select>
                                          </div>
                                          <div class="form-group col-2"
                                            *ngIf="chartConfig.cType !== 'markPoint' && chartConfig.cType !== 'markLine' && isAttributeShow('threshold') && series.threshold">
                                            <label class="control-label">Threshold Value</label>
                                            <input type="number" class="form-control mb-2 mr-sm-2" placeholder="Threshold Value"
                                              [(ngModel)]="series.thresholdValue">
                                          </div> -->
                            <div class="form-group col-lg-3 col-md-4 col-sm-6"
                              *ngIf="block.selectedProgressTag[j].benchmark !== undefined">
                              <label class="control-label">Percentage</label>
                              <ng-select bindValue="value" bindLabel="label" [items]="chartOptions.yaxis.benchmark"
                                placeholder="Percentage" [clearable]="false" [(ngModel)]="series.benchmark"
                                (change)="addProgressTag(series.benchmark,i)">
                              </ng-select>
                            </div>
                            <div class="form-group col-lg-3 col-md-4 col-sm-6" *ngIf="series.benchmark">
                              <label class="control-label">Percentage Value</label>
                              <input type="number" class="form-control mb-2 mr-sm-2" placeholder="Percentage Value"
                                [(ngModel)]="series.benchmarkValue">
                            </div>
                            <div class="form-group col-lg-3 col-md-4 col-sm-6 d-flex align-items-center flex-row"
                              *ngIf='_chartConfig.yaxis.length !== 0'>
                              <label class="control-label px-2">Advance Mode</label>
                              <input type="checkbox" class="" [(ngModel)]="series['isAdvance']"
                                (change)="handleAdvanceClickFlexi(j,i,'pro')">
                            </div>
                          </div>
                          <div class="row pt-1" *ngIf="series.isAdvance">
                            <div class="form-group col-lg-3 col-md-4 col-sm-6">
                              <label class="control-label">Frequency</label>
                              <ng-select bindValue="value" bindLabel="label" [items]="chartOptions.yaxis.frequency"
                                placeholder="Frequency" [clearable]="false" [(ngModel)]="series.function.frequency">
                              </ng-select>
                            </div>
                            <div class="form-group col-lg-3 col-md-4 col-sm-6"
                              *ngIf="pageType == 'dashboard' || (reportTemplateId !== 'undefined' && series.function.frequency !== 'shift')">
                              <label class="control-label">Function</label>
                              <ng-select bindValue="value" bindLabel="label" [items]="chartOptions.yaxis.function"
                                placeholder="Function" [clearable]="false" [(ngModel)]="series.function.name">
                              </ng-select>
                            </div>

                            <!-- <div class="form-group col-2" *ngIf="series.function.name == 'add'">
                                            <label class="control-label">Tag</label>
                                            <ng-select [items]="chartOptions.yaxis.tags" placeholder="Tag"
                                              [clearable]="false" [(ngModel)]="series.function.tag2">
                                            </ng-select>
                                          </div>
                                          <div class="form-group col-2">            
                                            <label class="control-label">Operator</label>
                                            <ng-select bindValue="value" bindLabel="label" [items]="chartOptions.yaxis.operator"
                                              placeholder="Operator" [clearable]="false" [(ngModel)]="series.function.operator">
                                            </ng-select>
                                          </div>
                                          <div class="form-group col-2 d-flex flex-row align-items-center">
                                            <label class="control-label px-2">Custom</label>
                                            <input type="checkbox" class="d-block" [(ngModel)]="series.function.isCustom"/>
                                          </div>
                                          <div class="form-group col-2" *ngIf="series.function.isCustom == false">
                                            <label class="control-label">Tag</label>
                                            <ng-select [items]="chartOptions.yaxis.tags" placeholder="Tag"
                                              [clearable]="false" [(ngModel)]="series.function.tag3">
                                            </ng-select>
                                          </div>
                                          <div class="form-group col-2" *ngIf="series.function.isCustom == true">              
                                            <label class="control-label">Custom Value</label>
                                            <input type="number" class="form-control mb-2 mr-sm-2" placeholder="Custom Value" [(ngModel)]="series.function.customValue">
                                          </div> -->
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="p-0 col-12">
                    <div class="col-sm-12 my-1 p-0">
                      <div class="col-sm-4 d-inline-block p-0" (click)="toggleTagExpandCollepseImg(i)">
                        <!-- <img class="toggleImg" (click)="toggleTagExpandCollepseImg(i)" src="/assets/images/right.png"
                                      [ngClass]="{'toggle-expanded': block.isTagBlockExpanded, 'toggle-collepsed': !block.isTagBlockExpanded }" /> -->
                        <i class="toggleImg h4 elm-collapse-arrow"
                          [ngClass]="{'toggle-expanded': !block.isTagBlockExpanded, 'toggle-collepsed': block.isTagBlockExpanded }"></i>
                        Tags
                      </div>
                      <div class="col-sm-6 btn-group p-0 text-right d-inline-block">
                        <button class="btn btn-secondary btn-sm " (click)="addTag(i)">Add Tag</button>
                      </div>
                    </div>
                  </div>
                  <div class="row mx-auto my-2 p-1 bg-white position-relative border"
                    *ngFor="let series of block.tags; let j=index;trackBy:track"
                    [ngClass]="{'d-none': block.isTagBlockExpanded, 'd-block': !block.isTagBlockExpanded }">
                    <div class="col-12">
                      <div class="row">
                        <div class="form-group col-lg-3 col-md-4 col-sm-6">
                          <label class="control-label">Label</label>
                          <input type="text" class="form-control mb-2 mr-sm-2" placeholder="Label"
                            [(ngModel)]="series.name">
                        </div>
                        <div *ngIf="!chartConfig.isModeBus" class="form-group col-lg-3 col-md-4 col-sm-6">
                          <label class="control-label">Tag</label>
                          <ng-select bindLabel="label" [items]="chartOptions.yaxis.tags" placeholder="Tag"
                            [clearable]="false" [(ngModel)]="series.tag" (ngModelChange)="tagChangeAction(series)">
                          </ng-select>
                        </div>
                        <div class="form-group col-lg-3 col-md-4 col-sm-6 d-none">
                          <label class="control-label">Base Unit</label>
                          <input type="text" class="form-control mb-2 mr-sm-2" placeholder="Original Unit"
                            [(ngModel)]="series.selectedUnit" disabled>
                        </div>

                        <div class="form-group col-lg-3 col-md-4 col-sm-6" *ngIf="isAttributeShow('unitConverter')">
                          <label class="control-label">Unit</label>
                          <ng-select bindLabel="label" [items]="getUnitList(series)" placeholder="Unit"
                            [clearable]="false" [(ngModel)]="series.unitInfo"
                            (ngModelChange)="unitChangeAction(series)">
                          </ng-select>
                        </div>
                        <div class="form-group col-lg-3 col-md-4 col-sm-6" *ngIf="isAttributeShow('chartType')">
                          <label class="control-label">Chart Type</label>
                          <ng-select bindLabel="label" bindValue="value" [items]="chartOptions.yaxis.chartType"
                            placeholder="Chart Type" [clearable]="false" [(ngModel)]="series.type">
                          </ng-select>
                        </div>
                        <!-- <div class="form-group col-2" *ngIf="chartConfig.cType !== 'markLine' && isAttributeShow('color')">
                                          <label class="control-label">Color</label>
                                          <input type="color" class="form-control mb-2 mr-sm-2" placeholder="Color" [(ngModel)]="series.color">
                                        </div>
                                        <div class="form-group col-2" *ngIf="isAttributeShow('position')">
                                          <label class="control-label">Position </label>
                                          <ng-select bindValue="value" bindLabel="label" [items]="chartOptions.yaxis.position"
                                            placeholder="Axis Position" [clearable]="false" [(ngModel)]="series.position">
                                          </ng-select>
                                        </div> -->
                        <div class="form-group col-lg-3 col-md-4 col-sm-6 d-flex align-items-center flex-row ">
                          <label class="control-label px-2">Comparison </label>
                          <input type="checkbox" class="" [(ngModel)]="series.isComparisonRequired" />
                        </div>
                        <div class="form-group col-lg-3 col-md-4 col-sm-6 d-flex align-items-center flex-row">
                          <label class="control-label px-2">Inverse </label>
                          <input type="checkbox" class="" [(ngModel)]="series.isInverse" />
                        </div>
                        <!-- <div class="form-group col-2">
                                          <label class="control-label">Threshold</label>
                                          <ng-select bindValue="value" bindLabel="label" [items]="chartOptions.yaxis.threshold"
                                            placeholder="Threshold" [clearable]="false" [(ngModel)]="series.threshold">
                                          </ng-select>
                                        </div>
                                        <div class="form-group col-2"
                                          *ngIf="chartConfig.cType !== 'markPoint' && chartConfig.cType !== 'markLine' && isAttributeShow('threshold') && series.threshold">
                                          <label class="control-label">Threshold Value</label>
                                          <input type="number" class="form-control mb-2 mr-sm-2" placeholder="Threshold Value"
                                            [(ngModel)]="series.thresholdValue">
                                        </div>
                                        <div class="form-group col-2"
                                          *ngIf="chartConfig.cType !== 'markPoint' && chartConfig.cType !== 'markLine' && isAttributeShow('benchmark')">
                                          <label class="control-label">Benchmark</label>
                                          <ng-select bindValue="value" bindLabel="label" [items]="chartOptions.yaxis.benchmark"
                                            placeholder="Benchmark" [clearable]="false" [(ngModel)]="series.benchmark">
                                          </ng-select>
                                        </div>
                                        <div class="form-group col-2"
                                          *ngIf="chartConfig.cType !== 'markPoint' && chartConfig.cType !== 'markLine' && isAttributeShow('benchmark') && series.benchmark">
                                          <label class="control-label">Benchmark Value</label>
                                          <input type="number" class="form-control mb-2 mr-sm-2" placeholder="Benchmark Value"
                                            [(ngModel)]="series.benchmarkValue">
                                        </div> -->
                        <div class="form-group col-lg-3 col-md-4 col-sm-6"
                          *ngIf="(chartConfig.isTile || chartConfig.isNormaltile) && chartConfig.cType == 'bar'">
                          <label class="control-label">Comparsion</label>
                          <div>
                            <input type="checkbox" class="mb-2 mr-sm-2 pt-1" [(ngModel)]="series.isInverse" />
                            <label class="control-label">Inverse</label>
                          </div>
                        </div>
                        <div class="form-group col-lg-3 col-md-4 col-sm-6" *ngIf="chartConfig.cType === 'markPoint'">
                          <label class="control-label">Mark Point</label>
                          <ng-select bindValue="value" bindLabel="label" [items]="chartOptions.yaxis.markPoint"
                            placeholder="Mark Point" [clearable]="false" [(ngModel)]="series.markPointData"
                            [multiple]="true">
                          </ng-select>
                        </div>
                        <div class="form-group col-lg-3 col-md-4 col-sm-6 d-flex align-items-center flex-row"
                          *ngIf='_chartConfig.yaxis.length !== 0'>
                          <label class="control-label px-2">Advance Mode</label>
                          <input type="checkbox" class="" [(ngModel)]="series['isAdvance']"
                            (change)="handleAdvanceClickFlexi(j,i,'')">

                        </div>
                      </div>
                      <div class="row pt-1" *ngIf="series.isAdvance">
                        <div class="form-group col-lg-3 col-md-4 col-sm-6">
                          <label class="control-label">Frequency</label>
                          <ng-select bindValue="value" bindLabel="label" [items]="chartOptions.yaxis.frequency"
                            placeholder="Frequency" [clearable]="true" [(ngModel)]="series.function.frequency">
                          </ng-select>
                        </div>
                        <div class="form-group col-lg-3 col-md-4 col-sm-6"
                          *ngIf="pageType == 'dashboard' || (reportTemplateId !== 'undefined' && series.function.frequency !== 'shift')">
                          <label class="control-label">Function</label>
                          <ng-select bindValue="value" bindLabel="label" [items]="chartOptions.yaxis.function"
                            placeholder="Function" [clearable]="true" [(ngModel)]="series.function.name">
                          </ng-select>
                        </div>
                        <!-- <div class="form-group col-2" *ngIf="series.function.name == 'add'">
                                          <label class="control-label">Tag</label>
                                          <ng-select [items]="chartOptions.yaxis.tags" placeholder="Tag"
                                            [clearable]="false" [(ngModel)]="series.function.tag2">
                                          </ng-select>
                                        </div>
                                        <div class="form-group col-2">            
                                          <label class="control-label">Operator</label>
                                          <ng-select bindValue="value" bindLabel="label" [items]="chartOptions.yaxis.operator"
                                            placeholder="Operator" [clearable]="false" [(ngModel)]="series.function.operator">
                                          </ng-select>
                                        </div>
                                        <div class="form-group col-2 d-flex align-items-center flex-row">
                                          <label class="control-label px-2 m-0">Custom</label>
                                          <input type="checkbox" class="d-block" [(ngModel)]="series.function.isCustom"/>
                                        </div>
                                        <div class="form-group col-2" *ngIf="series.function.isCustom == false">
                                          <label class="control-label">Tag</label>
                                          <ng-select [items]="chartOptions.yaxis.tags" placeholder="Tag"
                                            [clearable]="false" [(ngModel)]="series.function.tag3">
                                          </ng-select>
                                        </div>
                                        <div class="form-group col-2" *ngIf="series.function.isCustom == true">              
                                          <label class="control-label">Custom Value</label>
                                          <input type="number" class="form-control mb-2 mr-sm-2" placeholder="Custom Value" [(ngModel)]="series.function.customValue">
                                        </div> -->
                      </div>
                    </div>
                    <div class="cancel-y-axis">
                      <label class="control-label"></label>
                      <i class="elm-cancel" (click)="deleteTag(i, j)" *ngIf="block.tags.length>1" data-toggle="tooltip"
                        data-placement="top" title="Delete"></i>
                    </div>
                  </div>
                </div>
              </li>
            </ul>
          </div>
        </ng-container>

      </div>
    </div>

    <!-- Reports -->
    <div class="card border-0 pt-3" *ngIf="pageType == 'reports'">
      <div class="accordian-header border-bottom" id="Reports" data-toggle="collapse" data-target="#collapseReports"
        aria-expanded="true" aria-controls="collapseReports">
        <h6>Reports</h6>
      </div>
      <div class="tab-pane" *ngIf="pageType == 'reports'" id="collapseReports" class="collapse show mt-3 mb-3"
        aria-labelledby="Reports">
        <div class="col-12 mb-2">
          <div class="row p-1 bg-white">
            <div class="form-group col-2">
              <label class="control-label">Format</label>
              <ng-select [(ngModel)]="chartConfig.cData.chartOptions.reportType" [disabled]="true"
                (change)="handleReportFormatChange()">
              </ng-select>
            </div>
            <div class="form-group col-2">
              <label class="control-label">Template</label>
              <ng-select [(ngModel)]="chartConfig.cTypeLabel" [disabled]="true" (change)="handleReportTemplateChange()">
              </ng-select>
            </div>
          </div>
        </div>
        <div class="col-12 mb-2">
          <div class="row p-1 bg-white">
            <div class="form-group col-2 position-relative p-1">
              <label class="control-label">Upload Logo</label>
              <div class="image-upload">
                <label for="reportLogo" class="reportlogo">
                  <img
                    [src]="_chartConfig.reportFormat.logo!=''?'data:image/png;base64,' + _chartConfig.reportFormat.logo:'assets/images/upload-report.png'"
                    class="image imgCorners" title="Click to upload new image" />
                </label>
                <input type="file" class="form-control browse" accept="image/png, image/jpeg" id="reportLogo" ngModel
                  (change)="getFiles($event)">
                <i class="elm-cancel" *ngIf="_chartConfig.reportFormat.logo!=''"
                  (click)="_chartConfig.reportFormat.logo=''" data-toggle="tooltip" data-placement="top"
                  title="Remove uploaded logo"></i>
              </div>
            </div>
            <div class="form-group col-xl-2 col-lg-3 col-md-4 col-sm-5">
              <label class="control-label">Row Wise</label>
              <ng-select placeholder="Row Wise" [clearable]="false" [items]="chartOptions.report.functions"
                bindLabel="label" bindValue="value" [(ngModel)]="_chartConfig.reportFormat.row_functions"
                [multiple]="true" (change)="handleReportAggregatorchange('row')">
              </ng-select>
            </div>
            <div class="form-group col-xl-2 col-lg-3 col-md-4 col-sm-5">
              <label class="control-label">Column Wise</label>
              <ng-select placeholder="Column Wise" [clearable]="false" [items]="chartOptions.report.functions"
                bindLabel="label" bindValue="value" [(ngModel)]="_chartConfig.reportFormat.column_functions"
                [multiple]="true" (change)="handleReportAggregatorchange('column')">
              </ng-select>
            </div>
            <div class="form-group col-2">
              <label class="control-label">Consider Null</label>
              <input type="checkbox" class="mb-2 mr-sm-2 pt-1" [(ngModel)]="_chartConfig.reportFormat.consider_null" />
            </div>
            <div class="form-group col-2">
              <label class="control-label">Client Name</label>
              <input type="text" [(ngModel)]="_chartConfig.reportFormat.client_name" placeholder="Client Name"
                class="form-control" />
            </div>
            <div class="form-group col-2">
              <label class="control-label">Client Location</label>
              <input type="text" [(ngModel)]="_chartConfig.reportFormat.client_location" placeholder="Client Location"
                class="form-control" />
            </div>
            <div class="form-group col-2">
              <label class="control-label">Device Name</label>
              <input type="text" [(ngModel)]="_chartConfig.reportFormat.device_name" placeholder="Device Name"
                class="form-control" />
            </div>
            <div class="form-group col-2">
              <label class="control-label">Employee 1</label>
              <input type="text" [(ngModel)]="_chartConfig.reportFormat.employee_details.Employee_1"
                placeholder="Employee 1" class="form-control" />
            </div>
            <div class="form-group col-2">
              <label class="control-label">Employee 2</label>
              <input type="text" [(ngModel)]="_chartConfig.reportFormat.employee_details.Employee_2"
                placeholder="Employee 2" class="form-control" />
            </div>
            <div class="form-group col-2">
              <label class="control-label">Employee 3</label>
              <input type="text" [(ngModel)]="_chartConfig.reportFormat.employee_details.Employee_3"
                placeholder="Employee 3" class="form-control" />
            </div>
            <div class="form-group col-2">
              <label class="control-label">Employee 4</label>
              <input type="text" [(ngModel)]="_chartConfig.reportFormat.employee_details.Employee_4"
                placeholder="Employee 4" class="form-control" />
            </div>
            <div class="form-group col-2" *ngIf="reportTemplateId == 'template_119' || reportTemplateId == 'template_121'">
              <label class="control-label">SEC columns</label>
              <ng-select placeholder="SEC columns" [clearable]="false" [items]="chartOptions.report.secColumns"
                bindLabel="label" bindValue="value" [(ngModel)]="_chartConfig.reportFormat.sec_columns"
                [multiple]="true">
              </ng-select>
            </div>
            <div class="form-group col-2">
              <label class="control-label">Cost</label>
              <input type="number" [(ngModel)]="_chartConfig.reportFormat.cost" placeholder="Cost"
                class="form-control" />
            </div>
          </div>
        </div>
      </div>
    </div>
    <div *ngIf="chartConfig.isModeBus">
      <div class="card border-0 pt-3">
        <div class="accordian-header border-bottom" id="Yaxis" data-toggle="collapse" data-target="#collapseyaxis"
          aria-expanded="true" aria-controls="collapseyaxis">
          <h6>Actions</h6>
        </div>
        <div class="tab-pane" id="collapseyaxis" class="collapse show mt-3 mb-3" aria-labelledby="Yaxis"
          *ngFor="let series of _chartConfig.write_register; let i=index;trackBy:track">
          <div class="tab-pane-container clearfix">
            <div class="row">
              <div class="form-group col-lg-3 col-md-4 col-sm-6">
                <label class="control-label">Label</label>
                <input type="text" class="form-control" placeholder="Label" [(ngModel)]="series.label">
              </div>
              <div class="form-group col-lg-3 col-md-4 col-sm-6" *ngIf=" isAttributeShow('color')">
                <label class="control-label">Color</label>
                <ng-select bindValue="reference" bindLabel="label" [searchable]="false" name="icon"
                  [items]="chartOptions.modBuscolors" [(ngModel)]="series.colorReference" [clearable]="false"
                  (change)="colorChange($event,series)">
                  <ng-template ng-label-tmp let-item="item">
                    <div [style.color]="item.value" [style.text-align]="'center'" class="color-pallet">
                      <i [style.color]="item.value" class="elm-checked-2"></i>
                      <label>{{item['label']}}</label>
                    </div>
                  </ng-template>
                  <ng-template ng-option-tmp let-item="item" let-index="index">
                    <div [style.text-align]="'center'" class="color-pallet">
                      <i [style.color]="item.value" class="elm-unchecked-radio-button"></i>
                      <label>{{item.label}}</label>
                    </div>
                  </ng-template>
                </ng-select>
              </div>
              <div class="form-group col-lg-3 col-md-4 col-sm-6">
                <label class="control-label">Value</label>
                <input type="number" class="form-control" placeholder="Enter Value"
                  [(ngModel)]="series.relay_operation">
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>


    <!--Visualisation-->
    <div class="card border-0 pt-3">
      <div class="accordian-header border-bottom" id="General" data-toggle="collapse" data-target="#collapseOne"
        aria-expanded="true" aria-controls="collapseOne">
        <h6>Visualisation</h6>
      </div>
      <div class="tab-pane" id="collapseOne" class="collapse show mt-3 mb-3" aria-labelledby="General">
        <div class="tab-pane-container clearfix">
          <div class="row">
            <!-- Upload image -->
            <div class="form-group col-lg-3 col-md-4 col-sm-6" *ngIf="chartConfig.isNormaltile || chartConfig.isPue">
              <label class="control-label">Image</label>
              <div class="image-upload" *ngIf="_chartConfig.img!=''">
                <label for="reportLogo">
                  <img src="{{_chartConfig.img}}" class="image imgCorners" title="Click to upload new image" />
                </label>
                <i class="elm-cancel" *ngIf="_chartConfig.img!=''" (click)="_chartConfig.img=''" data-toggle="tooltip"
                  data-placement="top" title="Remove selected image"></i>
                <!-- <input type="file" class="form-control browse" accept="image/png, image/jpeg" id="reportLogo" ngModel
                  (change)="getFiles($event)">
                  <i class="elm-cancel" *ngIf="_chartConfig.img!='assets/images/save-energy.png'" (click)="_chartConfig.img='assets/images/save-energy.png'" data-toggle="tooltip" data-placement="top" title="Remove uploaded image"></i> -->
                <!-- <kl-image-picker [settings]='imagePickerSettings'></kl-image-picker> -->
              </div>
              <div>
                <button class="btn btn-secondary" (click)="chooseImage()">{{_chartConfig.img==''?'Choose Image':'Change
                  Image'}}</button>
              </div>
            </div>
            <!-- <div class="form-group col-lg-3 col-md-4 col-sm-6" *ngIf="chartConfig.isNormaltile || chartConfig.isPue">
              <label class="control-label">Show image</label>

              <input type="checkbox" class="" [(ngModel)]="_chartConfig['isImageShow']" />

            </div> -->

            <!-- Show Widget Title -->
            <div class="form-group col-lg-3 col-md-4 col-sm-6">
              <label class="control-label">Show Widget Title</label>

              <input type="checkbox" class="" [(ngModel)]="chartConfig.isTitleShow" />

            </div>

            <!-- show Date -->
            <!-- <div class="form-group col-lg-3 col-md-4 col-sm-6" *ngIf="!chartConfig.isAlarmFilter">
              <label class="control-label">Show Date</label>
              <ng-select [(ngModel)]="_chartConfig.isDateShow" [items]="chartOptions.showDate.options"
                [clearable]="false" placeholder="Show Date">
              </ng-select>
            </div> -->

            <!-- Format -->
            <div class="form-group col-lg-3 col-md-4 col-sm-6"
              *ngIf="!chartConfig.isAlarmFilter && !chartConfig.isModeBus">
              <label class="control-label">Time Period Format</label>
              <ng-select bindValue="value" bindLabel="label" [(ngModel)]="_chartConfig.format"
                [items]="chartOptions.showDate.dateFormats" placeholder="Select Date/Time Format" [clearable]="false">
              </ng-select>
            </div>

            <!-- show time -->
            <!-- <div class="form-group col-lg-3 col-md-4 col-sm-6" *ngIf="pageType !=='reports'">
              <label class="control-label">Show Timer</label>
              <input type="checkbox" class="" [(ngModel)]="chartConfig.isTimerShow" />
            </div> -->
          </div>
        </div>
        <div class="tab-pane-container clearfix">
          <ng-container *ngIf="chartConfig.cType === 'flexiTiles'">
            <div class="row">

              <!-- display tags -->
              <div class="form-group col-lg-3 col-md-4 col-sm-6">
                <label class="control-label" title="Display Tags on Each Interval">Tag refresh Interval</label>
                <input type="number" class="form-control" placeholder="No. of Tags"
                  [(ngModel)]="_chartConfig['flexiTiles']['noOfTagsToSwapOnInterval']">
              </div>

              <!-- desplay divice -->
              <div class="form-group col-lg-3 col-md-4 col-sm-6">
                <label class="control-label" title="Display Devices on Each Interval"> No. of Assets/Refresh</label>
                <input type="number" class="form-control" placeholder="No. of Assets per refresh Interval"
                  [(ngModel)]="_chartConfig['flexiTiles']['noOfBlocksToSwapOnInterval']">
              </div>

              <!-- show unit -->
              <div class="form-group col-lg-3 col-md-4 col-sm-6">
                <label class="control-label">Show Unit</label>
                <input type="checkbox" class="" [(ngModel)]="_chartConfig['flexiTiles']['isShowUnit']" />
              </div>

              <!-- block header -->
              <div class="form-group col-lg-3 col-md-4 col-sm-6">
                <label class="control-label">Block Header Top</label>
                <input type="checkbox" class="" [(ngModel)]="_chartConfig['flexiTiles']['isHeader']" />
              </div>

              <!-- show control -->
              <div class="form-group col-lg-3 col-md-4 col-sm-6">
                <label class="control-label">Show Controls</label>
                <input type="checkbox" class="" [(ngModel)]="_chartConfig['flexiTiles']['isShowControls']" />
              </div>
            </div>
          </ng-container>
          <ng-container *ngIf="chartConfig.cType === 'markLine'">
            <div class="row">

              <!-- set range -->
              <div class="form-group col-lg-3 col-md-4 col-sm-6">
                <label class="control-label">Set Range</label>
                <button class="btn form-control btn-secondary btn-sm" (click)="addNewRange()">Add Range</button>
              </div>
              <table class="table table-borderless">
                <thead>
                  <tr>
                    <th class="text-center">Min Value</th>
                    <th class="text-center">Max Value</th>
                    <th class="text-center">Color</th>
                    <th class="text-center" style="width:40px;"></th>
                  </tr>
                </thead>
                <tbody>
                  <tr *ngFor="let piece of _chartConfig['visualMap']['pieces']; let i = index;">
                    <td class="text-center">
                      <input type="number" class="form-control" placeholder="Min Value" [(ngModel)]="piece['gt']">
                    </td>
                    <td class="text-center">
                      <input type="number" class="form-control" placeholder="Max Value" [(ngModel)]="piece['lte']">
                    </td>
                    <td class="text-center">
                      <!-- <input type="color" class="form-control" placeholder="Color" [(ngModel)]="piece['color']"> -->
                      <ng-select bindValue="reference" [searchable]="false" name="icon"
                        [items]="chartOptions.yaxis.colors" placeholder="Color" [(ngModel)]="piece['colorReference']"
                        [clearable]="false" (change)="colorChange($event,piece)">
                        <ng-template ng-label-tmp let-item="item">
                          <div [style.text-align]="'center'" class="color-pallet">
                            <i [style.color]="item.value" class="elm-checked-2"></i>
                            <label>{{item['label']}}</label>
                          </div>
                        </ng-template>
                        <ng-template ng-option-tmp let-item="item" let-index="index">
                          <div [style.text-align]="'center'" class="color-pallet">
                            <i [style.color]="item.value" class="elm-unchecked-radio-button"></i>
                            <label>{{item.label}}</label>
                          </div>
                        </ng-template>
                      </ng-select>
                    </td>
                    <td class="text-center">
                      <!-- <fa-icon class="btn" [icon]="['fas', 'trash']" title="Delete Range" >
                                              </fa-icon> -->
                      <button type="button" class="btn btn-sm btn-secondary" (click)="deleteRange(i)">
                        Delete
                      </button>
                    </td>
                  </tr>
                </tbody>
              </table>

            </div>
          </ng-container>
        </div>
        <div class="tab-pane-container clearfix d-none">
          <div class="row">
            <!-- width -->
            <div class="form-group col-lg-3 col-md-4 col-sm-6">
              <label class="control-label">Width</label>
              <input type="number" min="2" max="12" class="form-control" placeholder="Width"
                [(ngModel)]="chartConfig.w">
            </div>

            <!-- height -->
            <div class="form-group col-lg-3 col-md-4 col-sm-6">
              <label class="control-label">Height</label>
              <input type="number" min="100" class="form-control" placeholder="Height" [(ngModel)]="chartConfig.h">
            </div>
          </div>
        </div>
        <div class="tab-pane-container clearfix" *ngIf="pageType !='reports'">
          <div class="row">


            <div class="form-group col-lg-3 col-md-4 col-sm-6">
              <label class="control-label">Auto Refresh</label>
              <ng-select bindValue="value" bindLabel="label" [(ngModel)]="_chartConfig.autoRefresh"
                [items]="chartOptions.refresh.options" placeholder="Refresh" [clearable]="false">
              </ng-select>
            </div>
            <div class="form-group col-lg-3 col-md-4 col-sm-6" *ngIf="_chartConfig.autoRefresh">
              <label class="control-label">Auto Refresh Interval(sec)</label>
              <!-- <input type="number" class="form-control" placeholder="Refresh Interval"
                [(ngModel)]="_chartConfig.autoRefreshTime"> -->
              <ng-select placeholder="Select" [searchable]='false' [clearable]="false"
                [(ngModel)]="_chartConfig.autoRefreshTime" [items]="chartOptions.refresh.intervals" bindLabel="label"
                bindValue="value">
              </ng-select>
            </div>
            <div class="form-group col-lg-3 col-md-4 col-sm-6" *ngIf="chartConfig.isAlarmFilter">
              <label class="control-label">Show Priority List</label>
              <input type="checkbox" class="" (change)="priorityShowHide(_chartConfig.showPriorityList,'priority')"
                [(ngModel)]="_chartConfig.showPriorityList" />
            </div>
            <div class="form-group col-lg-3 col-md-4 col-sm-6" *ngIf="chartConfig.isAlarmFilter">
              <label class="control-label">Show Table</label>
              <input type="checkbox" class="" (change)="priorityShowHide(_chartConfig.showTable,'table')"
                [(ngModel)]="_chartConfig.showTable" />
            </div>
            <div class="form-group col-lg-3 col-md-4 col-sm-6" *ngIf="_chartConfig['showPriorityList']">
              <label class="control-label">Show Border</label>
              <input type="checkbox" class="" [(ngModel)]="_chartConfig['isShowBorder']" />
            </div>
          </div>
        </div>
        <div class="tab-pane-container clearfix"
          *ngIf="chartConfig.cType !== 'flexiTiles'&& !chartConfig.isMap && !chartConfig.isPue && !chartConfig.isTile && isAttributeShow('legend') && !chartConfig.isAlarmFilter && !chartConfig.isModeBus">

          <div class="row">
            <div class="form-group col-lg-3 col-md-4 col-sm-6">
              <label class="control-label">Show Legend</label>
              <ng-select bindValue="value" bindLabel="label" [items]="chartOptions.legends.show"
                [(ngModel)]="_chartConfig.legend.show" [clearable]="false" placeholder="Position">
              </ng-select>
            </div>
            <div class="form-group col-lg-3 col-md-4 col-sm-6" *ngIf="_chartConfig.legend.show">
              <label class="control-label">Legend Position</label>
              <ng-select bindValue="value" bindLabel="label" [items]="chartOptions.legends.position"
                [(ngModel)]="_chartConfig.legend.position" [clearable]="false" placeholder="Position">
              </ng-select>
            </div>
          </div>

        </div>
        <div class="tab-pane-container clearfix"
          *ngIf="chartConfig.cType !== 'flexiTiles'&& !chartConfig.isMap && !chartConfig.isTile && isAttributeShow('grid') &&!chartConfig.isAlarmFilter && !chartConfig.isModeBus">
          <div class="row">
            <!-- X axis Grid line -->
            <div class="form-group col-lg-3 col-md-4 col-sm-6">
              <label class="control-label">X-Axis Grid Line</label>
              <ng-select bindValue="value" bindLabel="label" [items]="chartOptions.legends.show"
                [(ngModel)]="_chartConfig.grid.xGridLine" [clearable]="false" placeholder="X-axis Grid Line">
              </ng-select>
            </div>

            <!-- y axis Grid line -->
            <div class="form-group col-lg-3 col-md-4 col-sm-6">
              <label class="control-label">Y-Axis Grid Line</label>
              <ng-select bindValue="value" bindLabel="label" [items]="chartOptions.legends.show"
                [(ngModel)]="_chartConfig.grid.yGridLine" [clearable]="false" placeholder="Y-axis Grid Line">
              </ng-select>
            </div>
          </div>

        </div>

        <div class="tab-pane-container clearfix" *ngIf="!chartConfig.isAlarmFilter && !chartConfig.isModeBus">
          <div class="row">
            <!-- Bar Chart Orientation -->
            <div class="form-group col-lg-3 col-md-4 col-sm-6" *ngIf="pageType !== 'reports' && chartConfig.cType=='bar' && !chartConfig.isNormaltile && !chartConfig.isMap && !chartConfig.isTile ">
              <label class="control-label">Orientation</label>
              <ng-select bindValue="value" bindLabel="label" [(ngModel)]="_chartConfig.bar_orientation"
                [items]="chartOptions.orientation" placeholder="Select orientation" [clearable]="false">
              </ng-select>
            </div>
            <div class="form-group col-lg-3 col-md-4 col-sm-6">
              <label class="control-label" title="Restrict decimal to">Restrict decimal to</label>
              <input type="number" min="0" max="12" class="form-control" placeholder="Restrict decimal to"
                [(ngModel)]="_chartConfig.maxDecimalPoint">
            </div>
            <!-- View Format -->
            <div class="form-group col-lg-3 col-md-4 col-sm-6" *ngIf="chartConfig.cType=='pie'">
              <label class="control-label">Tooltip Position</label>
              <ng-select bindValue="value" bindLabel="label" [(ngModel)]="_chartConfig.viewFormat"
                [items]="chartOptions.pieviewformat" placeholder="Data View Format" [clearable]="false">
              </ng-select>
            </div>
          </div>
        </div>

      </div>



    </div>
  </div>
  <div *ngIf="showImagePicker" class="col-12 without-content tab-content">
    <kl-image-picker (onSelect)="setImage($event)" [settings]='imagePickerSettings'></kl-image-picker>
  </div>

</div>