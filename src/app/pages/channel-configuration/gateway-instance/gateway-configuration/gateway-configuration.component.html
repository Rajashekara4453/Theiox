<kl-serviceloader></kl-serviceloader>
<nav class="gateway-header m-0">
  <div class="button-group-container d-flex justify-content-left align-items-center align-center m-0 border-0"
    role="group">
    <!-- <svg enable-background="new 0 0 32 32" version="1.1" viewBox="0 0 32 32" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><g id="Layer_2"/><g id="Layer_3"/><g id="Layer_4"/><g id="Layer_5"/><g id="Layer_6"/><g id="Layer_7"/><g id="Layer_8"/><g id="Layer_9"/><g id="Layer_10"/><g id="Layer_11"/><g id="Layer_12"/><g id="Layer_13"/><g id="Layer_14"/><g id="Layer_15"/><g id="Layer_16"/><g id="Layer_17"/><g id="Layer_18"/><g id="Layer_19"/><g id="Layer_20"/><g id="Layer_21"/><g id="Layer_22"/><g id="Layer_23"/><g id="Layer_24"><g><path d="M27,25v3c0,0.55-0.45,1-1,1H6c-0.55,0-1-0.45-1-1v-3c0-0.55,0.45-1,1-1h20C26.55,24,27,24.45,27,25z" fill="#96CEE5"/></g><g><path d="M7,19c-0.5522,0-1-0.4478-1-1v-6c0-0.5522,0.4478-1,1-1s1,0.4478,1,1v6C8,18.5522,7.5522,19,7,19z" fill="#4391B2"/></g><g><circle cx="7" cy="11" fill="#48B1DD" r="2"/></g><g><path d="M25,19c-0.5527,0-1-0.4478-1-1v-6c0-0.5522,0.4473-1,1-1s1,0.4478,1,1v6C26,18.5522,25.5527,19,25,19z" fill="#4391B2"/></g><g><circle cx="25" cy="11" fill="#48B1DD" r="2"/></g><g><path d="M31,20v3c0,1.65-1.35,3-3,3H4c-1.65,0-3-1.35-3-3v-3c0-1.65,1.35-3,3-3h24C29.65,17,31,18.35,31,20z" fill="red"/></g><g><circle cx="5.5" cy="21.5" fill="#96CEE5" r="1.5"/></g><g><circle cx="9.5" cy="21.5" fill="#96CEE5" r="1.5"/></g><g><circle cx="13.5" cy="21.5" fill="#96CEE5" r="1.5"/></g><g><path d="M8.9985,9c-0.2031,0-0.4082-0.0615-0.585-0.1899c-0.7539-0.5449-2.0742-0.5449-2.8281,0    c-0.4468,0.3247-1.0723,0.2236-1.396-0.2241c-0.3237-0.4473-0.2236-1.0723,0.2241-1.396c1.4502-1.0498,3.7217-1.0498,5.1719,0    c0.4478,0.3237,0.5479,0.9487,0.2241,1.396C9.6143,8.8564,9.3086,9,8.9985,9z" fill="#96CEE5"/></g><g><path d="M10.999,6.3188c-0.2183,0-0.438-0.0708-0.6221-0.2173c-1.8311-1.4561-4.9238-1.4561-6.7549,0    c-0.4321,0.3433-1.0615,0.272-1.4053-0.1602C1.873,5.5088,1.9448,4.8799,2.377,4.5361c2.5918-2.0615,6.6533-2.0615,9.2451,0    c0.4321,0.3438,0.5039,0.9727,0.1602,1.4053C11.585,6.1895,11.293,6.3188,10.999,6.3188z" fill="#96CEE5"/></g><g><path d="M26.999,9c-0.2031,0-0.4082-0.0615-0.585-0.1899c-0.7539-0.5449-2.0742-0.5449-2.8281,0    c-0.4473,0.3237-1.0723,0.2231-1.3965-0.2241c-0.3232-0.4473-0.2227-1.0723,0.2246-1.396c1.4492-1.0498,3.7227-1.0498,5.1719,0    c0.4473,0.3237,0.5479,0.9487,0.2246,1.396C27.6143,8.8564,27.3086,9,26.999,9z" fill="#96CEE5"/></g><g><path d="M28.999,6.3188c-0.2178,0-0.4375-0.0708-0.6211-0.2173c-1.832-1.4561-4.9238-1.4561-6.7559,0    c-0.4326,0.3447-1.0625,0.2705-1.4043-0.1602c-0.3438-0.4326-0.2725-1.0615,0.1602-1.4053c2.5918-2.0615,6.6523-2.0615,9.2441,0    c0.4326,0.3438,0.5039,0.9727,0.1602,1.4053C29.585,6.1895,29.2939,6.3188,28.999,6.3188z" fill="#96CEE5"/></g></g><g id="Layer_25"/><g id="Layer_26"/><g id="Layer_27"/><g id="Layer_28"/><g id="Layer_29"/><g id="Layer_30"/><g id="Layer_31"/></svg>  -->
    <!-- <select class="h6 select-title border text-muted">
      <option class="gatewaytitle-with-icon">&#xf18c; Gateways and Sensors</option>
      <option class="gatewaytitle-with-icon">&#xf18c; Gateways</option>
      <option class="devicetitle-with-icon">&#xf1a5; Sensors</option>
    </select> -->

    <!-- <ng-select [items]="viewDropDownItems" bindLabel="name" bindValue="id" placeholder="Select Sensor"
      [searchable]="true" [clearable]="false" [selectOnTab]="true" [(ngModel)]="viewDropDownItemChange"
      (change)="viewDropDownChange(viewDropDownItemChange)">
      <ng-template ng-label-tmp let-item="item">
        <i class="{{item.icon}}"></i>
        <b>{{item.name}}</b>
      </ng-template>
      <ng-template ng-option-tmp let-item="item" let-index="index">
        <i class="{{item.icon}}"></i>
        <b>{{item.name}}</b>
      </ng-template>
    </ng-select> -->
    <div class="dropdown select-gateway-title border" *ngIf="viewDropDownItems">
      <button class="btn btn-secondary dropdown-toggle header-title shadow-none padding-right-0" type="button"
        id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
        <i class="{{dropDownLable.icon}}"></i> {{dropDownLable.name}}
      </button>
      <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
        <a class="dropdown-item" *ngFor="let item of viewDropDownItems"
          (click)="onSelectValue(item.id,item.name,item.icon)"> <i class="{{item.icon}}"></i> {{item.name}}</a>
      </div>
    </div>
  </div>
  <div class="button-group-container ml-auto">
    <!-- <button type="button" class="btn btn-secondary border-right border-left-0 border-bottom-0 border-top-0"
      (click)="togglesearch()" [ngClass]="{'border-left-0':!togglesearchbutton}">
      <i class="elm-search"></i>
    </button> -->
    <div class="search-group" [ngClass]="{'addwidth border-left-0':togglesearchbutton}" tabindex="1">
      <i class="search-icon fa fa-search"></i>
      <input type="search" class="search-input" placeholder="Search" [(ngModel)]="queryString" (input)="onKey($event)">
    </div>
  </div>
  <div class="button-group-container d-flex justify-content-right" role="group">
    <div class="button-group d-flex" role="group">
      <button type="button" class="btn btn-secondary shadow-none gatewaytitle-with-icon" title="Gateways"></button>
      <button type="button" class="btn btn-secondary" data-toggle="modal" data-target="#exampleModal"
        (click)="openModel()" title="Create Gateway"><i class="elm-add-2 h5"></i></button>
      <button class="btn btn-secondary text-primary" type="button" (click)="allGateways('All')" data-toggle="tooltip"
        data-placement="bottom" title="All">{{gatewayInfo.allGatewayCount}}</button>
      <button type="button" class="btn btn-secondary text-success" (click)="allGateways('active')" data-toggle="tooltip"
        data-placement="bottom" title="Active">{{gatewayInfo.activeGatewayCount}}</button>
      <button class="btn btn-secondary text-danger" (click)="allGateways('inactive')" data-toggle="tooltip"
        data-placement="bottom" title="Inactive">{{gatewayInfo.inactiveGatewayCount}}</button>
      <button type="button" *ngIf="gatewayInfo.deletedGatewayCount > 0" class="btn btn-secondary text-dark"
        data-toggle="tooltip" data-placement="top" title="Deleted Gateways" (click)="allGateways('delete')"
        data-toggle="tooltip" data-placement="bottom" title="Delete">{{gatewayInfo.deletedGatewayCount}}</button>
      <button type="button" *ngIf="gatewayInfo.disabledGatewayCount > 0" class="btn btn-secondary text-secondary"
        data-toggle="tooltip" data-placement="top" title="Disabled Gateways" (click)="allGateways('disable')"
        data-toggle="tooltip" data-placement="bottom" title="Disable">{{gatewayInfo.disabledGatewayCount}}</button>
    </div>
  </div>
  <div class="button-group-container d-flex justify-content-right m-0">
    <div class="button-group d-flex" role="group">
      <button type="button" class="btn btn-secondary shadow-none devicetitle-with-icon"
        (click)="onExapndEdit('gateway_instance_all',false)" title="Sensors"></button>
      <button type="button" class="btn btn-secondary" data-toggle="modal" data-target="#exampleDeviceModal"
        (click)="openSensorCreationModel()" title="Create Sensor"><i class="elm-add-2 h5"></i></button>
      <button type="button" class="btn btn-secondary text-primary" (click)="allDevicesInGateway('All')"
        data-toggle="tooltip" data-placement="bottom" title="All">{{gatewayInfo.totalDeviceCount}}</button>
      <button type="button" class="btn btn-secondary text-success" (click)="allDevicesInGateway('active')"
        data-toggle="tooltip" data-placement="bottom" title="Active">{{gatewayInfo.totalDeviceActiveCount}}</button>
      <button type="button" class="btn btn-secondary text-danger" (click)="allDevicesInGateway('inactive')"
        data-toggle="tooltip" data-placement="bottom" title="Inactive">{{gatewayInfo.totalDeviceInActiveCount}}</button>
      <button type="button" class="btn btn-secondary text-dark" *ngIf="gatewayInfo.totalDeviceDeleteCount > 0"
        data-toggle="tooltip" data-placement="bottom" title="Deleted"
        (click)="allDevicesInGateway('delete')">{{gatewayInfo.totalDeviceDeleteCount}}</button>
      <button type="button" class="btn btn-secondary text-secondary" *ngIf="gatewayInfo.totalDeviceDisableCount > 0"
        data-toggle="tooltip" data-placement="Bottom" title="Disabled"
        (click)="allDevicesInGateway('disable')">{{gatewayInfo.totalDeviceDisableCount}}</button>
    </div>
  </div>
  <!-- <div class="justify-content-right align-items-center mx-2"> -->
  <!-- <div class="mx-2">
    <button *ngIf="!SileViewEnable" type="button" class="btn btn-secondary mx-2" (click)="enableSiloView()"
      data-toggle="tooltip" title="Silo View">
      <i class="elm-squared-menu p-0 animated jackInTheBox"></i>
    </button>
    <button *ngIf="SileViewEnable" type="button" class="btn btn-secondary mx-2" (click)="enableListView()"
      data-toggle="tooltip" title="List view">
      <i class="elm-menu-2 p-0 jackInTheBox"></i>
    </button>
  </div> -->

  <!-- <div class="col-6 mt-1 col-md-1 justify-content-right align-items-center">
    <span *ngIf="!SileViewEnable && showListView" class="khide"><button type="button" class="btn-add align-items-center"
        (click)="loadMoreLists()">Load More
      </button></span>
  </div> -->
</nav>
<!--Gate way body-->
<div class="gateway-sub-main-container overflow-auto" style="overflow-x: hidden">
  <ng-container *ngIf="!SileViewEnable">
    <div id="products" class="grid-container row m-0">
      <div class="noMatches" *ngIf="(gatewayInfo | GatewaysearchComponent: queryString : true ).length === 0">
        No gateways found
      </div>
      <ng-container
        *ngFor="let gateway of gatewayInfo | GatewaysearchComponent: queryString : true | slice:listForward:listBackword;let i=index;trackBy: i;let lastcall = last">
        <span *ngIf="lastcall">{{stopLoader(lastcall)}} </span>
        <ng-container *ngIf="gateway.isConfigured && gateway.show">
          <!-- <div class="item col-xs-3 col-lg-3" style="padding:5px;"> -->
          <div class="card col-sm-6 col-md-4 col-lg-3 col-xl-2"
            [ngClass]="{'active1':gateway.comStatus === 'active','inactive1':gateway.comStatus === 'inactive','disable1':gateway.comStatus === 'disable'}">
            <div class="card-header border-0">
              <div class="card-title-container">
                <!-- <div class="clearfix"> -->
                <h6 class="card-title m-0 gatewaytitle-with-icon">
                  <a (click)="onGatewayEdit(gateway.gateway_instance_id)" class="overflow-device-name"
                    data-toggle="modal" data-target="#gatewaycreation"
                    title="{{gateway.gatewayname}}">{{gateway.gatewayname}}</a>

                </h6>
                <div class="dropdown float-right m-0 text-muted">
                  <!-- <i (click)="onExapndEdit(gateway.gateway_instance_id)" class="elm-expand h6 mr-2" data-placement="right" data-toggle="tooltip" title="Enlarge"></i> -->
                  <i data-toggle="tooltip" data-placement="bottom" title="Create Sensor"
                    (click)="onExapndEdit(gateway.gateway_instance_id,true)" class="elm-plus h6 mr-2"></i>
                  <i (click)="onExapndEdit(gateway.gateway_instance_id,false)" class="elm-expand h6 mr-2"
                    data-placement="right" data-toggle="tooltip" title="Enlarge"></i>
                  <a aria-hidden="true" class="dropdown-toggle card-drop p-1" data-toggle="dropdown">
                    <i class="fa fa-ellipsis-v"></i>
                  </a>
                  <div class="dropdown-menu">
                    <a class="dropdown-item cursor" (click)="onGatewayEdit(gateway.gateway_instance_id)"
                      data-toggle="modal" data-target="#gatewaycreation">Edit</a>
                    <a class="dropdown-item cursor"
                      (click)="onGatewayDisableEnable(gateway.gateway_instance_id,gateway.isdisabled)">{{gateway.disabled}}</a>
                    <a class="dropdown-item cursor" data-toggle="modal" data-target="#deleteGateway"
                      (click)="getGatewayDeletedValues(gateway.gateway_instance_id,gateway.isdeleted,gateway.gatewayname)">{{gateway.deleted}}</a>
                    <!-- <a class="dropdown-item cursor" (click)="getSelectedGatgewayInfo(gateway.gateway_instance_id)"
                        data-toggle="modal" data-target="#gateway_instance_id">Add
                        To Library</a> -->
                  </div>
                </div>
                <!-- </div> -->
              </div>
              <div class="title-bottom">
                <div class="ip-container">
                  <ng-container *ngIf="gateway.uniqueip">
                    <a class="ip" (click)="openGateway(gateway.uniqueip)">{{gateway.uniqueip}}</a>
                  </ng-container>
                  <ng-container *ngIf="gateway.host">
                    <a class="ip" (click)="openGateway(gateway.host)">{{gateway.host}}</a>
                  </ng-container>
                  <span class="subtext" style="left:25%;">IP Address</span>
                </div>
                <br>
                <div class="mac-container" *ngIf="gateway.uniqueid">
                  <a (click)="copy(gateway.uniqueid)">{{gateway.uniqueid}}</a>
                  <span class="subtext">Gateway Ref/MAC ID</span>
                </div>
                <div class="mac-container" *ngIf="gateway.port">
                  <a>{{gateway.port}}</a>
                  <span class="subtext">COM Port</span>
                </div>
              </div>
            </div>
          </div>
          <!-- </div> -->
        </ng-container>
      </ng-container>
      <div class="card" *ngIf="!SileViewEnable && showListView" (click)="loadMoreLists()">
        <div class="card-header border-0">
          <div class="card-title-container">
            <div class="card-body d-flex align-items-center flex-column text-center text-muted p-0">
              <h6 class="device-title text-muted d-flex align-items-center m-0">Load More <i
                  class="elm-forward-2 h2 text-muted m-0"></i></h6>
            </div>
          </div>
        </div>
      </div>
    </div>
  </ng-container>
  <ng-container *ngIf="SileViewEnable">
    <div *ngIf="isGatewayRendering" class="position-relative h-100">
      <div class="lds-ring">
        <div></div>
        <div></div>
        <div></div>
        <div></div>
      </div>
    </div>
    <div class="gatescroll-horizontal" *ngIf="!isGatewayRendering">
      <div class="noMatches" *ngIf="(gatewayInfo | GatewaysearchComponent: queryString : false).length === 0">
        No gateways and sensors found
      </div>
      <ng-container
        *ngFor="let gateway of gatewayInfo | GatewaysearchComponent: queryString : false | slice:siloForward:siloBackword; let i=index;trackBy: i;let lastcall = last">
        <span *ngIf="lastcall">{{stopLoader(lastcall)}} </span>
        <ng-container *ngIf="gateway.isConfigured && gateway.show">
          <div class="card" [ngClass]='{"addextraSpace":gateway.uniqueid || gateway.uniqueip}'>
            <div class="card-header py-0"
              [ngClass]="{'active':gateway.comStatus === 'active','inactive':gateway.comStatus === 'inactive','disable':gateway.comStatus === 'disable'}">
              <div class="card-title-container">
                <!-- <div class="clearfix"> -->
                <h6 class="card-title m-0 gatewaytitle-with-icon text-muted">
                  <a (click)="onGatewayEdit(gateway.gateway_instance_id)" class="overflow-device-name"
                    data-toggle="modal" data-target="#gatewaycreation"
                    title="{{gateway.gatewayname}}">{{gateway.gatewayname}}</a>
                  <!-- <a *ngIf="gateway.uniqueip" (click) ="openGateway(gateway.uniqueip)">{{gateway.uniqueip}}</a>
                    <a *ngIf="gateway.uniqueid">{{gateway.uniqueid}}</a> -->
                </h6>
                <div class="dropdown card-title float-right d-flex justify-content-end align-center">
                  <i data-toggle="tooltip" data-placement="bottom" title="Create Sensor"
                    (click)="onExapndEdit(gateway.gateway_instance_id,true)" class="elm-plus h6 mr-2 mb-0"></i>
                  <i (click)="onExapndEdit(gateway.gateway_instance_id,false)" class="elm-expand h6 mr-2 mb-0"
                    data-placement="right" data-toggle="tooltip" title="Enlarge"></i>
                  <a aria-hidden="true" class="dropdown-toggle card-drop p-1" data-toggle="dropdown">
                    <i class="fa fa-ellipsis-v"></i>
                  </a>
                  <div class="dropdown-menu">
                    <a class="dropdown-item cursor" (click)="onGatewayEdit(gateway.gateway_instance_id)"
                      data-toggle="modal" data-target="#gatewaycreation">Edit</a>
                    <a class="dropdown-item cursor"
                      (click)="onGatewayDisableEnable(gateway.gateway_instance_id,gateway.isdisabled)">{{gateway.disabled}}</a>
                    <a class="dropdown-item cursor" data-toggle="modal" data-target="#deleteGateway"
                      (click)="getGatewayDeletedValues(gateway.gateway_instance_id,gateway.isdeleted,gateway.gatewayname)">{{gateway.deleted}}</a>
                    <!-- <a class="dropdown-item cursor" (click)="getSelectedGatgewayInfo(gateway.gateway_instance_id)"
                      data-toggle="modal" data-target="#gateway_instance_id">Add
                      To Library</a> -->
                  </div>
                </div>
                <!-- </div> -->
              </div>
              <div class="title-bottom">
                <div class="ip-container">
                  <ng-container *ngIf="gateway.uniqueip">
                    <a class="ip" (click)="openGateway(gateway.uniqueip)">{{gateway.uniqueip}}</a>
                  </ng-container>
                  <ng-container *ngIf="gateway.host">
                    <a class="ip" (click)="openGateway(gateway.host)">{{gateway.host}}</a>
                  </ng-container>
                  <span class="subtext">IP Address</span>
                </div>
                <div class="mac-container" *ngIf="gateway.uniqueid">
                  <a (click)="copy(gateway.uniqueid)">{{gateway.uniqueid}}</a>
                  <span class="subtext">Gateway Ref/MAC ID</span>
                </div>
                <div class="mac-container" *ngIf="gateway.port">
                  <a>{{gateway.port}}</a>
                  <span class="subtext">COM Port</span>
                </div>
              </div>
              <div class="d-flex text-center btn-group button-title-container justify-content-center align-items-center"
                role="group">
                <button type="button" class="btn btn-secondary shadow-none btn-sm">
                  Sensor
                </button>
                <button type="button" class="btn btn-secondary text-primary btn-sm"
                  (click)="allDevices(gateway.gateway_instance_id,'All')" data-toggle="tooltip" data-placement="bottom"
                  title="All">
                  <span>{{gateway.deviceCount}}</span>
                </button>
                <button class="btn btn-secondary text-success btn-sm"
                  (click)="allDevices(gateway.gateway_instance_id,'active')" data-toggle="tooltip"
                  data-placement="bottom" title="Active">
                  <span>{{gateway.activeDeviceCount}}</span>
                </button>
                <button class="btn btn-secondary text-danger btn-sm"
                  (click)="allDevices(gateway.gateway_instance_id,'inactive')" data-toggle="tooltip"
                  data-placement="bottom" title="Inactive">
                  <span>{{gateway.inactiveDeviceCount}}</span>
                </button>
                <button class="btn btn-secondary text-dark btn-sm"
                  (click)="allDevices(gateway.gateway_instance_id,'delete')" *ngIf="gateway.deleteCount > 0"
                  data-toggle="tooltip" data-placement="bottom" title="Delete">
                  <span>{{gateway.deleteCount}}</span>
                </button>
                <button class="btn btn-secondary text-secondary btn-sm"
                  (click)="allDevices(gateway.gateway_instance_id,'disable')" *ngIf="gateway.disableCount > 0"
                  data-toggle="tooltip" data-placement="bottom" title="Disable">
                  <span>{{gateway.disableCount}}</span>
                </button>
              </div>
              <!-- <div class="elm-add-device d-none">
                <a data-toggle="tooltip" data-placement="bottom" title="Create Sensor" class="cursor">
                  <i class="elm-expand-arrow-2"></i></a>
              </div> -->
            </div>
            <div class="card-body collapse show">
              <div class="noMatches" *ngIf="(gateway.devices | DeviceSearchComponent: queryString).length === 0">
                No sensors found
              </div>
              <ng-container
                *ngFor="let device of gateway.devices | DeviceSearchComponent: queryString;let j=index;trackBy: j ">
                <table class="table table-hover table-responsive-sm table-body">
                  <tbody class="w-100 d-flex">
                    <tr *ngIf="device.show" class="w-100 d-flex"
                      [ngClass]="{'delete':device.isdeleted === 'true','disable':device.isdisabled === 'true','enable':device.isdisabled === 'false' &&  device.isdeleted === 'false','deletedisable':device.isdeleted === 'true' && device.isdisabled === 'true'}">
                      <td width="90%">
                        <i class="elm-online {{device.status}} pr-2"></i>
                        <a (click)="accessLevelDevice.edit ? onDeviceEdit(device.device_instance_id,gateway.gateway_instance_id) : return"
                          class="overflow-device-name" data-toggle="tooltip" data-placement="right"
                          title="{{device.device_name}}">{{device.device_name}}</a>
                      </td>
                      <td class="text-right">
                        <div class="dropdown">
                          <i class="elm-menu-vertical dropdown-toggle cursor" aria-hidden="false" aria-expanded="false"
                            data-toggle="dropdown"></i>
                          <ul class="dropdown-menu">
                            <a class="dropdown-item cursor"
                              (click)="accessLevelDevice.edit ? onDeviceEdit(device.device_instance_id,gateway.gateway_instance_id) : return">Edit</a>
                            <a class="dropdown-item cursor"
                              (click)="onDeviceEnableDisable(device.device_instance_id,device.isdisabled)">{{device.disabled}}</a>
                            <a class="dropdown-item cursor" data-toggle="modal" data-target="#deleteSensor"
                              (click)="getSensorValues(device.device_instance_id,device.isdeleted,device.device_name)">{{device.deleted}}</a>
                            <a class="dropdown-item cursor" data-toggle="modal" data-target="#device_id"
                              (click)="getSelectedDeviceInfo(device.protocolcategory,device,gateway.gateway_instance_id)">Move
                              To Gateway</a>
                          </ul>
                        </div>
                      </td>
                    </tr>
                  </tbody>
                </table>
              </ng-container>
            </div>
          </div>
        </ng-container>
      </ng-container>
      <div class="card loadmore" *ngIf="SileViewEnable && showSiloView">
        <div class="card-body collapse show d-flex align-items-center justify-content-center">
          <span (click)="loadMoreSilos()" class="khide text-center" data-toggle="tooltip" title="Load More">
            <i class="elm-forward-2 h1"></i>
            <h6>
              Load More
            </h6>
          </span>

        </div>
      </div>
    </div>

    <!-- <div class="loadmore">
      </div> -->
  </ng-container>
</div>
<div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle"
  aria-hidden="true">
  <div class="modal-dialog modal-xl modal-dialog-scrollable h-100" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h6 class="modal-title col-md-8 gatewaytitle-with-icon text-muted" id="exampleModalCenterTitle">Create Gateway
        </h6>
        <!-- <div class="custom-file" *ngIf="!hideSiloButton">
          <input type="file" class="custom-file-input" id="customFile" name="filename"
            (change)="onChange($event.target.files)">
          <label class="custom-file-label" for="customFile">{{fileUploadlabel}}</label>
        </div> -->
        <div class="search-group ml-auto" tabindex="1">
          <span class="fa fa-search search-icon"></span>
          <input type="search" [(ngModel)]="searchModelText" class="search-input" placeholder='Search'>
        </div>
        <button aria-label="Close" class="close mx-0" data-dismiss="modal" type="button"><i
            class="elm-cancel cancel-elm"></i>
        </button>
      </div>
      <div class="modal-body form-body">
        <div class="h-100 position-relative" *ngIf="!tagsDisplay || !allModules">
          <div class="lds-ring">
            <div></div>
            <div></div>
            <div></div>
            <div></div>
          </div>
        </div>
        <div class="h-100" *ngIf="tagsDisplay && allModules">
          <nav>
            <div class="nav nav-tabs" id="nav-tab" role="tablist">
              <a *ngFor="let tag of tagsDisplay" id="nav-{{tag.name}}-tab" data-toggle="tab" href="#nav-{{tag.name}}"
                role="tab" aria-selected="true"
                [ngClass]="(tag.name === 'All')?'nav-item nav-link active':'nav-item nav-link'">{{tag.name}}</a>
            </div>
          </nav>
          <div class="tab-content" id="nav-tabContent">
            <div id="nav-{{tag.name}}" class="clearfix" *ngFor="let tag of tagsDisplay"
              [ngClass]="(tag.name === 'All')?'tab-pane fade show active':'tab-pane fade'">
              <ng-container class=""
                *ngFor="let module of allModules | elmfilter:searchModelText:['gatewaymodelname','name']:true:2">
                <div class="element-item" *ngIf="existsInArray(module.gwtags,tag.name)"
                  (click)='module.gateway_id ? onCreateGateway(module.gateway_id,module.gwtags): onCreateGateway(module.id,module.gwtags)'
                  data-toggle="modal" data-target="#gatewaycreation" data-backdrop="static" data-keyboard="false"
                  [attr.title]="module.gatewaymodelname ? module.gatewaymodelname : module.name">
                  <p class="name" *ngIf="module.gatewaymodelname">
                    {{module.gatewaymodelname}}
                  </p>
                  <p class="name" *ngIf="module.name">
                    {{module.name}}
                  </p>
                </div>
              </ng-container>
            </div>
          </div>
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" hidden="hidden" class="btn btn-secondary" data-dismiss="modal" #close>Close</button>
        <button type="button" class="btn btn-sm btn-secondary border" data-dismiss="modal">Cancel</button>
      </div>
    </div>
  </div>
</div>
<div class="modal fade" id="gateway_instance_id" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle"
  aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Add To Library</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <div class="form-group row">
          <label for='name' class="col-sm-3 col-form-label">Model Name *</label>
          <div class="col-sm-9">
            <input type="text" placeholder="Enter Model Name" class="form-control" autocomplete="true"
              [(ngModel)]="gatewayModelName" name="gateway" />
          </div>
        </div>
        <div class="form-group row">
          <label for='tagname' class="col-sm-3 col-form-label">Tag Name *</label>
          <div class="col-sm-9">
            <angular2-multiselect [data]="gatewayTagList" [(ngModel)]="libraryName" [settings]="tagsDropdownSettings"
              class="form-control p-0" (onAddFilterNewItem)="onAddItem($event)" name="device"></angular2-multiselect>
          </div>
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" hidden="hidden" class="btn btn-secondary" data-dismiss="modal" #tagclose>Cancel</button>
        <!-- <button type="button" class="btn btn-outline-primary" (click)="onAddToLibrary()">Add</button> -->
      </div>
    </div>
  </div>
</div>
<div class="modal fade" id="device_id" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle"
  aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h6 class="modal-title text-muted gatewaytitle-with-icon">Move To Gateway</h6>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <i class="elm-cancel cancel-elm">

          </i>

        </button>
      </div>
      <div class="modal-body">
        <div class="form-group row">
          <label for='name' class="col-sm-3 col-form-label">Gateway Name*</label>
          <div class="col-sm-9" *ngIf="matchedGateways">
            <ng-select [items]="matchedGateways" bindLabel="gatewayname" bindValue="gateway_instance_id"
              placeholder="Select Gateway" [searchable]="true" [clearable]="true" [selectOnTab]="true"
              (change)="selectOption(gatewayChange)" [(ngModel)]="gatewayChange">
              <ng-template ng-label-tmp let-item="item">
                <i class="gatewaytitle-with-icon pr-2"></i>
                <span>{{item.gatewayname}}</span>
              </ng-template>
              <ng-template ng-option-tmp let-item="item" let-index="index">
                <i class="gatewaytitle-with-icon pr-2"></i>
                <span>{{item.gatewayname}}</span>
              </ng-template>
            </ng-select>
          </div>
        </div>
        <div class="form-group row">
          <label for='deviceid' class="col-sm-3 col-form-label">Sensor Id *</label>
          <div class="col-sm-9">
            <input type="text" placeholder="Enter Device ID" class="form-control" autocomplete="false"
              [(ngModel)]="deviceId" name="deviceid" />
          </div>
        </div>
        <div class="form-group row">
          <label for='devicename' class="col-sm-3 col-form-label">Sensor Name *</label>
          <div class="col-sm-9">
            <input type="text" placeholder="Enter Device Name" class="form-control" autocomplete="false"
              [(ngModel)]="deviceName" name="devicename" />
          </div>
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" hidden="hidden" class="btn btn-secondary" data-dismiss="modal"
          #deviceclose>Cancel</button>
        <button type="button" class="btn btn-sm btn-primary" (click)="MoveToGateway()">
          <span *ngIf="!isSensorMoving">Move</span>
          <span *ngIf="isSensorMoving" class="loader-custom btn-loader d-inline-block"></span>
        </button>
      </div>
    </div>
  </div>
</div>
<div class="modal fade" id="exampleDeviceModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle"
  aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h6 class="modal-title text-muted">Create Sensor</h6>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span class="elm-cancel cancel-elm" aria-hidden="true"></span>
        </button>
      </div>
      <div class="modal-body">
        <div class="form-group row">
          <label for='tagname' class="col-sm-3 col-form-label">Gateway *</label>
          <div class="col-sm-9" *ngIf="options">
            <!-- <angular2-multiselect [data]="options" [(ngModel)]="gatewaySelectionid" [settings]="gatewayDropdownSettings"
              class="form-control p-0" name="device"></angular2-multiselect> -->
            <ng-select [items]="options" bindLabel="gatewayname" bindValue="gateway_instance_id"
              placeholder="Select Gateway" [searchable]="true" [clearable]="true" [selectOnTab]="true"
              [(ngModel)]="gatewaySelectionid">
              <ng-template ng-label-tmp let-item="item">
                <i class="gatewaytitle-with-icon pr-2"></i>
                <span>{{item.gatewayname}}</span>
              </ng-template>
              <ng-template ng-option-tmp let-item="item" let-index="index">
                <i class="gatewaytitle-with-icon pr-2"></i>
                <span>{{item.gatewayname}}</span>
              </ng-template>
            </ng-select>
          </div>
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" hidden="hidden" class="btn btn-secondary btn-sm" data-dismiss="modal"
          #gatewaySelctionclose>Cancel</button>
        <button type="button" class="btn-sm btn btn-primary" (click)="onAddDevice()">Continue</button>
      </div>
    </div>
  </div>
</div>
<div class="modal fade" id="gatewaycreation" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle"
  aria-hidden="true">
  <div class="modal-dialog modal-xl modal-dialog-scrollable h-100" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h6 class="modal-title gatewaytitle-with-icon text-muted"> {{gatewayTitle}}</h6>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close" (click)="onCloseModel()">
          <span class="elm-cancel cancel-elm" aria-hidden="true"></span>
        </button>
      </div>
      <div class="modal-body form-body">
        <div class="h-100 position-relative" *ngIf="!dmfData">
          <div class="lds-ring">
            <div></div>
            <div></div>
            <div></div>
            <div></div>
          </div>
        </div>
        <div class="h-100" *ngIf="dmfData">
          <kl-dfm *ngIf="DFMinput" [DFMDATA]="DFMinput"
            (SelectedValues)="accessLevel.create ? getselectedValues($event) : return" (cancel)="onDFMCancel()"
            (showFields)="showFields($event)" [disableBtn]="disableBtn"></kl-dfm>
        </div>
      </div>
      <div class="modal-footer d-none">
        <button type="button" hidden="hidden" class="btn btn-secondary btn-sm" data-dismiss="modal"
          #gatewaycreationval>Cancel</button>
      </div>
    </div>
  </div>
</div>

<!-- Modal -->
<div class="modal fade" id="deleteGateway" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
  aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel">Confirm</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        Are you sure want to delete <b>{{gatewayNameToDelete}}</b> ?
      </div>
      <div class="modal-footer">
        <!-- (click)="confirmdelete()" -->
        <button type="button" class="btn btn-secondary" data-dismiss="modal">No</button>
        <button type="button" class="btn btn-primary"
          (click)="accessLevel.delete ? onGatewayDelete(deleteGatewayId,deleteValue) : '' "
          data-dismiss="modal">Yes</button>
      </div>
    </div>
  </div>
</div>

<div class="modal fade" id="deleteSensor" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
  aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel">Confirm</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        Are you sure want to delete <b>{{sensorNameToDelete}}</b> ?
      </div>
      <div class="modal-footer">
        <!-- (click)="confirmdelete()" -->
        <button type="button" class="btn btn-secondary" data-dismiss="modal">No</button>
        <button type="button" class="btn btn-primary"
          (click)="accessLevelDevice.delete ? onDeviceDelete(deleteSensorId,deleteSensorValue) : '' "
          data-dismiss="modal">Yes</button>
      </div>
    </div>
  </div>
</div>